\hypertarget{sys_2wince_2mhdlg_8c}{\section{nethack/sys/wince/mhdlg.c File Reference}
\label{sys_2wince_2mhdlg_8c}\index{nethack/sys/wince/mhdlg.\+c@{nethack/sys/wince/mhdlg.\+c}}
}
{\ttfamily \#include \char`\"{}win\+M\+S.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}hack.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}func\+\_\+tab.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}mhdlg.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}mhmain.\+h\char`\"{}}\\*
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structgetlin__data}{getlin\+\_\+data}
\item 
struct \hyperlink{structextcmd__data}{extcmd\+\_\+data}
\item 
struct \hyperlink{structplsel__data}{plsel\+\_\+data}
\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{sys_2wince_2mhdlg_8c_a4d1bdfade06602b90d50cbdbdb45ee10}{Check\+Dlg\+Button}(dlg, btn\+\_\+id, st)~Send\+Dlg\+Item\+Message((dlg), (btn\+\_\+id), B\+M\+\_\+\+S\+E\+T\+C\+H\+E\+C\+K, (W\+P\+A\+R\+A\+M)(st), 0)
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
L\+R\+E\+S\+U\+L\+T C\+A\+L\+L\+B\+A\+C\+K \hyperlink{sys_2wince_2mhdlg_8c_a9653a6ffe3ddf03e6b036684d77177f7}{Getlin\+Dlg\+Proc} (H\+W\+N\+D, \hyperlink{def__os2_8h_a36cb3b01d81ffd844bbbfb54003e06ec}{U\+I\+N\+T}, W\+P\+A\+R\+A\+M, L\+P\+A\+R\+A\+M)
\item 
int \hyperlink{sys_2wince_2mhdlg_8c_a39d42e14bc9786f5e2956df063ab92ff}{mswin\+\_\+getlin\+\_\+window} (\hyperlink{tradstdc_8h_a2c212835823e3c54a8ab6d95c652660e}{const} char $\ast$question, char $\ast$result, size\+\_\+t result\+\_\+size)
\item 
L\+R\+E\+S\+U\+L\+T C\+A\+L\+L\+B\+A\+C\+K \hyperlink{sys_2wince_2mhdlg_8c_ad9e8613ffe5220c78d6c943c8693e95c}{Ext\+Cmd\+Dlg\+Proc} (H\+W\+N\+D, \hyperlink{def__os2_8h_a36cb3b01d81ffd844bbbfb54003e06ec}{U\+I\+N\+T}, W\+P\+A\+R\+A\+M, L\+P\+A\+R\+A\+M)
\item 
int \hyperlink{sys_2wince_2mhdlg_8c_ad4240b065b7b8e476803050a29181a20}{mswin\+\_\+ext\+\_\+cmd\+\_\+window} (int $\ast$selection)
\item 
B\+O\+O\+L C\+A\+L\+L\+B\+A\+C\+K \hyperlink{sys_2wince_2mhdlg_8c_ab354857d5335d3e54cdb3d69c423b885}{Player\+Selector\+Dlg\+Proc} (H\+W\+N\+D, \hyperlink{def__os2_8h_a36cb3b01d81ffd844bbbfb54003e06ec}{U\+I\+N\+T}, W\+P\+A\+R\+A\+M, L\+P\+A\+R\+A\+M)
\item 
static void \hyperlink{sys_2wince_2mhdlg_8c_a5849334dfe6fa6669496bbabd7beba1b}{plsel\+Init\+Dialog} (H\+W\+N\+D h\+Wnd)
\item 
static void \hyperlink{sys_2wince_2mhdlg_8c_a605937af4657a5d8fe751c8e72de53fe}{plsel\+Adjust\+Lists} (H\+W\+N\+D h\+Wnd, int changed\+\_\+opt)
\item 
static int \hyperlink{sys_2wince_2mhdlg_8c_a77b92c8b63aa0fda942b122f7a918003}{plsel\+Final\+Selection} (H\+W\+N\+D h\+Wnd, int $\ast$selection)
\item 
int \hyperlink{sys_2wince_2mhdlg_8c_abfa652ee4def0674368c65a2578121a5}{mswin\+\_\+player\+\_\+selection\+\_\+window} (int $\ast$selection)
\item 
void \hyperlink{sys_2wince_2mhdlg_8c_a0772aa991694d1e706a0d7f1e8852567}{set\+Combo\+Box\+Value} (H\+W\+N\+D h\+Wnd, int combo\+\_\+box, int value)
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\hypertarget{sys_2wince_2mhdlg_8c_a4d1bdfade06602b90d50cbdbdb45ee10}{\index{sys/wince/mhdlg.\+c@{sys/wince/mhdlg.\+c}!Check\+Dlg\+Button@{Check\+Dlg\+Button}}
\index{Check\+Dlg\+Button@{Check\+Dlg\+Button}!sys/wince/mhdlg.\+c@{sys/wince/mhdlg.\+c}}
\subsubsection[{Check\+Dlg\+Button}]{\setlength{\rightskip}{0pt plus 5cm}\#define Check\+Dlg\+Button(
\begin{DoxyParamCaption}
\item[{}]{dlg, }
\item[{}]{btn\+\_\+id, }
\item[{}]{st}
\end{DoxyParamCaption}
)~Send\+Dlg\+Item\+Message((dlg), (btn\+\_\+id), B\+M\+\_\+\+S\+E\+T\+C\+H\+E\+C\+K, (W\+P\+A\+R\+A\+M)(st), 0)}}\label{sys_2wince_2mhdlg_8c_a4d1bdfade06602b90d50cbdbdb45ee10}


Definition at line 12 of file mhdlg.\+c.



Referenced by plsel\+Init\+Dialog().



\subsection{Function Documentation}
\hypertarget{sys_2wince_2mhdlg_8c_ad9e8613ffe5220c78d6c943c8693e95c}{\index{sys/wince/mhdlg.\+c@{sys/wince/mhdlg.\+c}!Ext\+Cmd\+Dlg\+Proc@{Ext\+Cmd\+Dlg\+Proc}}
\index{Ext\+Cmd\+Dlg\+Proc@{Ext\+Cmd\+Dlg\+Proc}!sys/wince/mhdlg.\+c@{sys/wince/mhdlg.\+c}}
\subsubsection[{Ext\+Cmd\+Dlg\+Proc}]{\setlength{\rightskip}{0pt plus 5cm}B\+O\+O\+L C\+A\+L\+L\+B\+A\+C\+K Ext\+Cmd\+Dlg\+Proc (
\begin{DoxyParamCaption}
\item[{H\+W\+N\+D}]{h\+Wnd, }
\item[{{\bf U\+I\+N\+T}}]{message, }
\item[{W\+P\+A\+R\+A\+M}]{w\+Param, }
\item[{L\+P\+A\+R\+A\+M}]{l\+Param}
\end{DoxyParamCaption}
)}}\label{sys_2wince_2mhdlg_8c_ad9e8613ffe5220c78d6c943c8693e95c}


Definition at line 205 of file mhdlg.\+c.



References ext\+\_\+func\+\_\+tab\+::ef\+\_\+txt, extcmdlist, F\+A\+L\+S\+E, Get\+N\+H\+App(), I\+D\+C\+\_\+\+E\+X\+T\+C\+M\+D\+\_\+\+L\+I\+S\+T, N\+H\+\_\+\+A2\+W, extcmd\+\_\+data\+::selection, S\+I\+Z\+E, and T\+R\+U\+E.



Referenced by mswin\+\_\+ext\+\_\+cmd\+\_\+window().


\begin{DoxyCode}
206 \{
207     \textcolor{keyword}{struct }\hyperlink{structextcmd__data}{extcmd\_data}* data;
208     RECT   main\_rt, dlg\_rt;
209     \hyperlink{global_8h_afd2537d19a3cb6556b0f727580ec6ee7}{SIZE}   dlg\_sz;
210     \textcolor{keywordtype}{int}    i;
211     \textcolor{keyword}{const} \textcolor{keywordtype}{char} *ptr;
212     TCHAR wbuf[255];
213 
214     \textcolor{keywordflow}{switch} (message) 
215     \{
216     \textcolor{keywordflow}{case} WM\_INITDIALOG:
217         data = (\textcolor{keyword}{struct }\hyperlink{structextcmd__data}{extcmd\_data}*)lParam;
218         SetWindowLong(hWnd, GWL\_USERDATA, lParam);
219 
220         \textcolor{comment}{/* center dialog in the main window */}
221         GetWindowRect(\hyperlink{sys_2wince_2winhack_8c_ad72c8d80c9fc01eaf07a3c2463ab88bd}{GetNHApp}()->hMainWnd, &main\_rt);
222         GetWindowRect(hWnd, &dlg\_rt);
223         dlg\_sz.cx = dlg\_rt.right - dlg\_rt.left;
224         dlg\_sz.cy = dlg\_rt.bottom - dlg\_rt.top;
225 
226         dlg\_rt.left = (main\_rt.left+main\_rt.right-dlg\_sz.cx)/2;
227         dlg\_rt.right = dlg\_rt.left + dlg\_sz.cx;
228         dlg\_rt.top = (main\_rt.top+main\_rt.bottom-dlg\_sz.cy)/2;
229         dlg\_rt.bottom = dlg\_rt.top + dlg\_sz.cy;
230         MoveWindow( hWnd,
231                     (main\_rt.left+main\_rt.right-dlg\_sz.cx)/2,
232                     (main\_rt.top+main\_rt.bottom-dlg\_sz.cy)/2,
233                     dlg\_sz.cx,
234                     dlg\_sz.cy,
235                     \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE} );
236 
237         \textcolor{comment}{/* fill combobox with extended commands */}
238         \textcolor{keywordflow}{for}(i=0; (ptr=\hyperlink{func__tab_8h_af3a00fc8e4e157bae08471bcc66d46d9}{extcmdlist}[i].\hyperlink{structext__func__tab_a1c6b81a9ba3a70826ea2f1c2eacc089e}{ef\_txt}); i++) \{
239             SendDlgItemMessage(hWnd, \hyperlink{sys_2wince_2resource_8h_a353d3339d73756e0e2ce210b27d63452}{IDC\_EXTCMD\_LIST}, LB\_ADDSTRING, (WPARAM)0, (LPARAM)
      \hyperlink{wceconf_8h_a2ed36c9ee770dfe5f2d0e3088a62adad}{NH\_A2W}(ptr, wbuf, \textcolor{keyword}{sizeof}(wbuf)) );
240         \}
241 
242 \textcolor{preprocessor}{#if defined(WIN\_CE\_SMARTPHONE)}
243         NHSPhoneDialogSetup(hWnd, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE});
244 
245         GetClientRect(hWnd, &dlg\_rt);
246         MoveWindow(GetDlgItem(hWnd, \hyperlink{sys_2wince_2resource_8h_a353d3339d73756e0e2ce210b27d63452}{IDC\_EXTCMD\_LIST}),
247                    dlg\_rt.left, dlg\_rt.top, 
248                    dlg\_rt.right-dlg\_rt.left, dlg\_rt.bottom-dlg\_rt.top,
249                    \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE});
250 \textcolor{preprocessor}{#endif}
251 
252         \textcolor{comment}{/* set focus to the list control */}
253         SetFocus(GetDlgItem(hWnd, \hyperlink{sys_2wince_2resource_8h_a353d3339d73756e0e2ce210b27d63452}{IDC\_EXTCMD\_LIST}));
254 
255         \textcolor{comment}{/* tell windows we set the focus */}
256         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
257     \textcolor{keywordflow}{break};
258 
259     \textcolor{keywordflow}{case} WM\_COMMAND:
260         data = (\textcolor{keyword}{struct }\hyperlink{structextcmd__data}{extcmd\_data}*)GetWindowLong(hWnd, GWL\_USERDATA);
261         \textcolor{keywordflow}{switch} (LOWORD(wParam)) 
262         \{ 
263           \textcolor{comment}{/* OK button ws clicked */}
264           \textcolor{keywordflow}{case} IDOK:
265               *data->\hyperlink{structextcmd__data_ab011c2c8d46884e21377956420754497}{selection} = SendDlgItemMessage(hWnd, 
      \hyperlink{sys_2wince_2resource_8h_a353d3339d73756e0e2ce210b27d63452}{IDC\_EXTCMD\_LIST}, LB\_GETCURSEL, (WPARAM)0, (LPARAM)0 );
266               \textcolor{keywordflow}{if}( *data->\hyperlink{structextcmd__data_ab011c2c8d46884e21377956420754497}{selection}==LB\_ERR )
267                   *data->\hyperlink{structextcmd__data_ab011c2c8d46884e21377956420754497}{selection} = -1;
268               \textcolor{comment}{/* Fall through. */}
269 
270           \textcolor{comment}{/* CANCEL button ws clicked */}
271           \textcolor{keywordflow}{case} IDCANCEL:
272                 EndDialog(hWnd, wParam); 
273           \textcolor{keywordflow}{return} \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
274 
275           \textcolor{comment}{/* list control events */}
276           \textcolor{keywordflow}{case} \hyperlink{sys_2wince_2resource_8h_a353d3339d73756e0e2ce210b27d63452}{IDC\_EXTCMD\_LIST}:
277                 \textcolor{keywordflow}{switch}(HIWORD(wParam)) \{
278 
279                 \textcolor{keywordflow}{case} LBN\_DBLCLK: 
280                   \textcolor{comment}{/* double click within the list }
281 \textcolor{comment}{                     wParam }
282 \textcolor{comment}{                       The low-order word is the list box identifier. }
283 \textcolor{comment}{                       The high-order word is the notification message. }
284 \textcolor{comment}{                     lParam }
285 \textcolor{comment}{                       Handle to the list box}
286 \textcolor{comment}{                    */}
287                    *data->\hyperlink{structextcmd__data_ab011c2c8d46884e21377956420754497}{selection} = SendMessage((HWND)lParam, LB\_GETCURSEL, (WPARAM)0, (LPARAM)0
      );
288                    \textcolor{keywordflow}{if}( *data->\hyperlink{structextcmd__data_ab011c2c8d46884e21377956420754497}{selection}==LB\_ERR )
289                        *data->\hyperlink{structextcmd__data_ab011c2c8d46884e21377956420754497}{selection} = -1;
290                    EndDialog(hWnd, IDOK); 
291                    \textcolor{keywordflow}{return} \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
292                 \}
293           \textcolor{keywordflow}{break};
294         \}
295     \}
296     \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
297 \}
\end{DoxyCode}
\hypertarget{sys_2wince_2mhdlg_8c_a9653a6ffe3ddf03e6b036684d77177f7}{\index{sys/wince/mhdlg.\+c@{sys/wince/mhdlg.\+c}!Getlin\+Dlg\+Proc@{Getlin\+Dlg\+Proc}}
\index{Getlin\+Dlg\+Proc@{Getlin\+Dlg\+Proc}!sys/wince/mhdlg.\+c@{sys/wince/mhdlg.\+c}}
\subsubsection[{Getlin\+Dlg\+Proc}]{\setlength{\rightskip}{0pt plus 5cm}B\+O\+O\+L C\+A\+L\+L\+B\+A\+C\+K Getlin\+Dlg\+Proc (
\begin{DoxyParamCaption}
\item[{H\+W\+N\+D}]{h\+Wnd, }
\item[{{\bf U\+I\+N\+T}}]{message, }
\item[{W\+P\+A\+R\+A\+M}]{w\+Param, }
\item[{L\+P\+A\+R\+A\+M}]{l\+Param}
\end{DoxyParamCaption}
)}}\label{sys_2wince_2mhdlg_8c_a9653a6ffe3ddf03e6b036684d77177f7}


Definition at line 53 of file mhdlg.\+c.



References B\+U\+F\+S\+Z, F\+A\+L\+S\+E, Get\+N\+H\+App(), I\+D\+C\+\_\+\+G\+E\+T\+L\+I\+N\+\_\+\+E\+D\+I\+T, max, min, mswin\+\_\+hwnd\+\_\+from\+\_\+winid(), N\+H\+\_\+\+A2\+W, N\+H\+\_\+\+W2\+A, getlin\+\_\+data\+::question, getlin\+\_\+data\+::result, getlin\+\_\+data\+::result\+\_\+size, S\+I\+Z\+E, T\+R\+U\+E, and W\+I\+N\+\_\+\+M\+A\+P.



Referenced by mswin\+\_\+getlin\+\_\+window().


\begin{DoxyCode}
54 \{
55     \textcolor{keyword}{struct }\hyperlink{structgetlin__data}{getlin\_data}* data;
56     RECT   main\_rt, text\_rt, dlg\_rt, edit\_rt;
57     \hyperlink{global_8h_afd2537d19a3cb6556b0f727580ec6ee7}{SIZE}   dlg\_sz;
58     TCHAR  wbuf[\hyperlink{global_8h_ab26c26cbf7a0c97d8960c3cfb413f882}{BUFSZ}];
59     HDC    hdc;
60     HWND   control;
61     HWND   hwndMap; 
62 
63 \textcolor{preprocessor}{#if defined(WIN\_CE\_POCKETPC)}
64     SHInputDialog(hWnd, message, wParam);
65 \textcolor{preprocessor}{#endif}
66 
67     \textcolor{keywordflow}{switch} (message) 
68     \{
69     \textcolor{keywordflow}{case} WM\_INITDIALOG:
70         data = (\textcolor{keyword}{struct }\hyperlink{structgetlin__data}{getlin\_data}*)lParam;
71         SetWindowText(hWnd, \hyperlink{wceconf_8h_a2ed36c9ee770dfe5f2d0e3088a62adad}{NH\_A2W}(data->\hyperlink{structgetlin__data_a5ae51373bc945ad0f57b44419c26b7a8}{question}, wbuf, \textcolor{keyword}{sizeof}(wbuf)));
72         SetWindowLong(hWnd, GWL\_USERDATA, lParam);
73 
74         \textcolor{comment}{/* get title text width */}
75         SetRect(&text\_rt, 0, 0, 100, 50);
76         hdc = GetWindowDC(hWnd);
77         DrawText(hdc, wbuf, \_tcslen(wbuf), &text\_rt, 
78                  DT\_CALCRECT | DT\_SINGLELINE | DT\_NOPREFIX | DT\_LEFT | DT\_VCENTER );
79         ReleaseDC(hWnd, hdc);
80 
81         \textcolor{comment}{/* center dialog in the main window */}
82         GetWindowRect(hWnd, &dlg\_rt);
83         hwndMap = \hyperlink{sys_2wince_2mswproc_8c_a0890d6b16657f7ad53aebadc8818f147}{mswin\_hwnd\_from\_winid}(\hyperlink{decl_8h_afa1f7dd312c4c1b72afe3d2c8c2af691}{WIN\_MAP});
84         GetWindowRect( IsWindow(hwndMap)? hwndMap : \hyperlink{sys_2wince_2winhack_8c_ad72c8d80c9fc01eaf07a3c2463ab88bd}{GetNHApp}()->hMainWnd, &main\_rt);
85         dlg\_sz.cx = \hyperlink{hack_8h_affe776513b24d84b39af8ab0930fef7f}{max}(dlg\_rt.right-dlg\_rt.left, 
86                         \hyperlink{hack_8h_abb702d8b501669a23aa0ab3b281b9384}{min}( text\_rt.right-text\_rt.left+GetSystemMetrics(SM\_CXICON),
87                              main\_rt.right-main\_rt.left ) );
88         dlg\_sz.cy = \hyperlink{hack_8h_abb702d8b501669a23aa0ab3b281b9384}{min}(dlg\_rt.bottom - dlg\_rt.top, main\_rt.bottom - main\_rt.top);
89         dlg\_rt.left = (main\_rt.left+main\_rt.right-dlg\_sz.cx)/2;
90         dlg\_rt.right = dlg\_rt.left + dlg\_sz.cx;
91         dlg\_rt.top = (main\_rt.top+main\_rt.bottom-dlg\_sz.cy)/2;
92         dlg\_rt.bottom = dlg\_rt.top + dlg\_sz.cy;
93         MoveWindow( hWnd,
94                     (main\_rt.left+main\_rt.right-dlg\_sz.cx)/2,
95                     (main\_rt.top+main\_rt.bottom-dlg\_sz.cy)/2,
96                     dlg\_sz.cx,
97                     dlg\_sz.cy,
98                     \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE} );
99 
100         \textcolor{comment}{/* change layout of controls */}
101         GetClientRect(hWnd, &dlg\_rt);
102 
103         control = GetDlgItem(hWnd, \hyperlink{sys_2wince_2resource_8h_ad544225fbfcca7b814509a0b128d62b8}{IDC\_GETLIN\_EDIT});
104         GetWindowRect(control, &edit\_rt);
105         MoveWindow( control,
106                     0,
107                     0,
108                     dlg\_rt.right - dlg\_rt.left,
109                     edit\_rt.bottom - edit\_rt.top,
110                     \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE} );
111 
112         control = GetDlgItem(hWnd, IDOK);
113         GetWindowRect(control, &text\_rt);
114         MoveWindow( control,
115                     0,
116                     edit\_rt.bottom - edit\_rt.top,
117                     (dlg\_rt.right-dlg\_rt.left)/2,
118                     text\_rt.bottom - text\_rt.top,
119                     \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE} );
120 
121         control = GetDlgItem(hWnd, IDCANCEL);
122         GetWindowRect(control, &text\_rt);
123         MoveWindow( control,
124                     (dlg\_rt.right-dlg\_rt.left)/2,
125                     edit\_rt.bottom - edit\_rt.top,
126                     (dlg\_rt.right-dlg\_rt.left)/2,
127                     text\_rt.bottom - text\_rt.top,
128                     \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE} );
129 
130 \textcolor{preprocessor}{#if defined(WIN\_CE\_SMARTPHONE)}
131         NHSPhoneDialogSetup(hWnd, \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE}, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE});
132 \textcolor{preprocessor}{#endif}
133 
134         \textcolor{comment}{/* set focus to the edit control */}
135         SetFocus(GetDlgItem(hWnd, \hyperlink{sys_2wince_2resource_8h_ad544225fbfcca7b814509a0b128d62b8}{IDC\_GETLIN\_EDIT}));
136 
137         \textcolor{comment}{/* tell windows that we've set the focus */}
138         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}; 
139     \textcolor{keywordflow}{break};
140 
141     \textcolor{keywordflow}{case} WM\_COMMAND: 
142     \{
143         TCHAR wbuf[\hyperlink{global_8h_ab26c26cbf7a0c97d8960c3cfb413f882}{BUFSZ}];
144 
145         \textcolor{keywordflow}{switch} (LOWORD(wParam)) 
146         \{ 
147             \textcolor{comment}{/* OK button was pressed */}
148             \textcolor{keywordflow}{case} IDOK:
149               data = (\textcolor{keyword}{struct }\hyperlink{structgetlin__data}{getlin\_data}*)GetWindowLong(hWnd, GWL\_USERDATA);
150               SendDlgItemMessage(hWnd, \hyperlink{sys_2wince_2resource_8h_ad544225fbfcca7b814509a0b128d62b8}{IDC\_GETLIN\_EDIT}, WM\_GETTEXT, (WPARAM)\textcolor{keyword}{sizeof}(wbuf), (
      LPARAM)wbuf );
151               \hyperlink{wceconf_8h_a79324084b45d4a7bc4b8813ddfddad96}{NH\_W2A}(wbuf, data->\hyperlink{structgetlin__data_a30ab6084717e9691c3ecae6fbeac21b9}{result}, data->\hyperlink{structgetlin__data_a94955d5ee37e0a74dce5438809152c34}{result\_size});
152 
153               \textcolor{comment}{/* Fall through. */}
154 
155             \textcolor{comment}{/* cancel button was pressed */}
156             \textcolor{keywordflow}{case} IDCANCEL: 
157                 EndDialog(hWnd, wParam); 
158             \textcolor{keywordflow}{return} \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
159         \}
160     \} \textcolor{keywordflow}{break};
161 
162 \textcolor{preprocessor}{#if defined(WIN\_CE\_SMARTPHONE)}
163     \textcolor{keywordflow}{case} WM\_HOTKEY:
164         \textcolor{keywordflow}{if}(VK\_TBACK == HIWORD(lParam)) \{
165             SHSendBackToFocusWindow(message, wParam, lParam);
166         \}
167     \textcolor{keywordflow}{break};
168 \textcolor{preprocessor}{#endif}
169 
170     \} \textcolor{comment}{/* end switch (message) */}
171     \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
172 \}
\end{DoxyCode}
\hypertarget{sys_2wince_2mhdlg_8c_ad4240b065b7b8e476803050a29181a20}{\index{sys/wince/mhdlg.\+c@{sys/wince/mhdlg.\+c}!mswin\+\_\+ext\+\_\+cmd\+\_\+window@{mswin\+\_\+ext\+\_\+cmd\+\_\+window}}
\index{mswin\+\_\+ext\+\_\+cmd\+\_\+window@{mswin\+\_\+ext\+\_\+cmd\+\_\+window}!sys/wince/mhdlg.\+c@{sys/wince/mhdlg.\+c}}
\subsubsection[{mswin\+\_\+ext\+\_\+cmd\+\_\+window}]{\setlength{\rightskip}{0pt plus 5cm}int mswin\+\_\+ext\+\_\+cmd\+\_\+window (
\begin{DoxyParamCaption}
\item[{int $\ast$}]{selection}
\end{DoxyParamCaption}
)}}\label{sys_2wince_2mhdlg_8c_ad4240b065b7b8e476803050a29181a20}


Definition at line 183 of file mhdlg.\+c.



Referenced by mswin\+\_\+get\+\_\+ext\+\_\+cmd().


\begin{DoxyCode}
184 \{
185     \textcolor{keywordtype}{int} ret;
186     \textcolor{keyword}{struct }\hyperlink{structextcmd__data}{extcmd\_data} data;
187     
188     \textcolor{comment}{/* init dialog data */}
189     ZeroMemory(&data, \textcolor{keyword}{sizeof}(data));
190     *\hyperlink{structextcmd__data_ab011c2c8d46884e21377956420754497}{selection} = -1;
191     data.selection = \hyperlink{structextcmd__data_ab011c2c8d46884e21377956420754497}{selection};
192 
193     \textcolor{comment}{/* create modal dialog window */}
194     ret = DialogBoxParam(
195             \hyperlink{sys_2wince_2winhack_8c_ad72c8d80c9fc01eaf07a3c2463ab88bd}{GetNHApp}()->hApp,
196             MAKEINTRESOURCE(\hyperlink{sys_2wince_2resource_8h_afa993406db3065594cbee283067e3b7d}{IDD\_EXTCMD}),
197             \hyperlink{sys_2wince_2winhack_8c_ad72c8d80c9fc01eaf07a3c2463ab88bd}{GetNHApp}()->hMainWnd,
198             \hyperlink{sys_2wince_2mhdlg_8c_ad9e8613ffe5220c78d6c943c8693e95c}{ExtCmdDlgProc},
199             (LPARAM)&data
200     );
201     \textcolor{keywordflow}{if}( ret==-1 ) \hyperlink{txt2iff_8c_ab0824b6f5eb51db9371d2e9a222249d3}{panic}(\textcolor{stringliteral}{"Cannot create extcmd window"});
202     \textcolor{keywordflow}{return} ret;
203 \}
\end{DoxyCode}
\hypertarget{sys_2wince_2mhdlg_8c_a39d42e14bc9786f5e2956df063ab92ff}{\index{sys/wince/mhdlg.\+c@{sys/wince/mhdlg.\+c}!mswin\+\_\+getlin\+\_\+window@{mswin\+\_\+getlin\+\_\+window}}
\index{mswin\+\_\+getlin\+\_\+window@{mswin\+\_\+getlin\+\_\+window}!sys/wince/mhdlg.\+c@{sys/wince/mhdlg.\+c}}
\subsubsection[{mswin\+\_\+getlin\+\_\+window}]{\setlength{\rightskip}{0pt plus 5cm}int mswin\+\_\+getlin\+\_\+window (
\begin{DoxyParamCaption}
\item[{{\bf const} char $\ast$}]{question, }
\item[{char $\ast$}]{result, }
\item[{size\+\_\+t}]{result\+\_\+size}
\end{DoxyParamCaption}
)}}\label{sys_2wince_2mhdlg_8c_a39d42e14bc9786f5e2956df063ab92ff}


Definition at line 25 of file mhdlg.\+c.



Referenced by mswin\+\_\+askname(), mswin\+\_\+getlin(), and on\+List\+Char().


\begin{DoxyCode}
30 \{
31     \textcolor{keywordtype}{int} ret;
32     \textcolor{keyword}{struct }\hyperlink{structgetlin__data}{getlin\_data} data;
33 
34     \textcolor{comment}{/* initilize dialog data */}
35     ZeroMemory(&data, \textcolor{keyword}{sizeof}(data));
36     data.question = \hyperlink{structgetlin__data_a5ae51373bc945ad0f57b44419c26b7a8}{question};
37     data.result = \hyperlink{structgetlin__data_a30ab6084717e9691c3ecae6fbeac21b9}{result};
38     data.result\_size = \hyperlink{structgetlin__data_a94955d5ee37e0a74dce5438809152c34}{result\_size};
39 
40     \textcolor{comment}{/* create modal dialog window */}
41     ret = DialogBoxParam(
42             \hyperlink{sys_2wince_2winhack_8c_ad72c8d80c9fc01eaf07a3c2463ab88bd}{GetNHApp}()->hApp,
43             MAKEINTRESOURCE(\hyperlink{sys_2wince_2resource_8h_a31f315296fc7426c1fe25eeb9f32552b}{IDD\_GETLIN}),
44             \hyperlink{sys_2wince_2winhack_8c_ad72c8d80c9fc01eaf07a3c2463ab88bd}{GetNHApp}()->hMainWnd,
45             \hyperlink{sys_2wince_2mhdlg_8c_a9653a6ffe3ddf03e6b036684d77177f7}{GetlinDlgProc},
46             (LPARAM)&data
47     );
48     \textcolor{keywordflow}{if}( ret==-1 ) \hyperlink{txt2iff_8c_ab0824b6f5eb51db9371d2e9a222249d3}{panic}(\textcolor{stringliteral}{"Cannot create getlin window"});
49     
50     \textcolor{keywordflow}{return} ret;
51 \}
\end{DoxyCode}
\hypertarget{sys_2wince_2mhdlg_8c_abfa652ee4def0674368c65a2578121a5}{\index{sys/wince/mhdlg.\+c@{sys/wince/mhdlg.\+c}!mswin\+\_\+player\+\_\+selection\+\_\+window@{mswin\+\_\+player\+\_\+selection\+\_\+window}}
\index{mswin\+\_\+player\+\_\+selection\+\_\+window@{mswin\+\_\+player\+\_\+selection\+\_\+window}!sys/wince/mhdlg.\+c@{sys/wince/mhdlg.\+c}}
\subsubsection[{mswin\+\_\+player\+\_\+selection\+\_\+window}]{\setlength{\rightskip}{0pt plus 5cm}int mswin\+\_\+player\+\_\+selection\+\_\+window (
\begin{DoxyParamCaption}
\item[{int $\ast$}]{selection}
\end{DoxyParamCaption}
)}}\label{sys_2wince_2mhdlg_8c_abfa652ee4def0674368c65a2578121a5}


Definition at line 310 of file mhdlg.\+c.



Referenced by mswin\+\_\+player\+\_\+selection().


\begin{DoxyCode}
311 \{
312     \textcolor{keywordtype}{int} ret;
313     \textcolor{keyword}{struct }\hyperlink{structplsel__data}{plsel\_data} data;
314 
315     \textcolor{comment}{/* init dialog data */}
316     ZeroMemory(&data, \textcolor{keyword}{sizeof}(data));
317     data.selection = \hyperlink{structplsel__data_a6300c44105a90c7875e99c2b65f56375}{selection};
318 
319     \textcolor{comment}{/* create modal dialog */}
320     ret = DialogBoxParam(
321             \hyperlink{sys_2wince_2winhack_8c_ad72c8d80c9fc01eaf07a3c2463ab88bd}{GetNHApp}()->hApp,
322             MAKEINTRESOURCE(\hyperlink{sys_2wince_2resource_8h_ad83e812e82862386563ba64c8977d561}{IDD\_PLAYER\_SELECTOR}),
323             \hyperlink{sys_2wince_2winhack_8c_ad72c8d80c9fc01eaf07a3c2463ab88bd}{GetNHApp}()->hMainWnd,
324             \hyperlink{sys_2wince_2mhdlg_8c_ab354857d5335d3e54cdb3d69c423b885}{PlayerSelectorDlgProc},
325             (LPARAM)&data
326     );
327     \textcolor{keywordflow}{if}( ret==-1 ) \hyperlink{txt2iff_8c_ab0824b6f5eb51db9371d2e9a222249d3}{panic}(\textcolor{stringliteral}{"Cannot create getlin window"});
328     
329     \textcolor{keywordflow}{return} ret;
330 \}
\end{DoxyCode}
\hypertarget{sys_2wince_2mhdlg_8c_ab354857d5335d3e54cdb3d69c423b885}{\index{sys/wince/mhdlg.\+c@{sys/wince/mhdlg.\+c}!Player\+Selector\+Dlg\+Proc@{Player\+Selector\+Dlg\+Proc}}
\index{Player\+Selector\+Dlg\+Proc@{Player\+Selector\+Dlg\+Proc}!sys/wince/mhdlg.\+c@{sys/wince/mhdlg.\+c}}
\subsubsection[{Player\+Selector\+Dlg\+Proc}]{\setlength{\rightskip}{0pt plus 5cm}B\+O\+O\+L C\+A\+L\+L\+B\+A\+C\+K Player\+Selector\+Dlg\+Proc (
\begin{DoxyParamCaption}
\item[{H\+W\+N\+D}]{h\+Wnd, }
\item[{{\bf U\+I\+N\+T}}]{message, }
\item[{W\+P\+A\+R\+A\+M}]{w\+Param, }
\item[{L\+P\+A\+R\+A\+M}]{l\+Param}
\end{DoxyParamCaption}
)}}\label{sys_2wince_2mhdlg_8c_ab354857d5335d3e54cdb3d69c423b885}


Definition at line 332 of file mhdlg.\+c.



References F\+A\+L\+S\+E, Get\+N\+H\+App(), I\+D\+C\+\_\+\+P\+L\+S\+E\+L\+\_\+\+A\+L\+I\+G\+N\+\_\+\+L\+I\+S\+T, I\+D\+C\+\_\+\+P\+L\+S\+E\+L\+\_\+\+A\+L\+I\+G\+N\+\_\+\+R\+A\+N\+D\+O\+M, I\+D\+C\+\_\+\+P\+L\+S\+E\+L\+\_\+\+G\+E\+N\+D\+E\+R\+\_\+\+L\+I\+S\+T, I\+D\+C\+\_\+\+P\+L\+S\+E\+L\+\_\+\+G\+E\+N\+D\+E\+R\+\_\+\+R\+A\+N\+D\+O\+M, I\+D\+C\+\_\+\+P\+L\+S\+E\+L\+\_\+\+R\+A\+C\+E\+\_\+\+L\+I\+S\+T, I\+D\+C\+\_\+\+P\+L\+S\+E\+L\+\_\+\+R\+A\+C\+E\+\_\+\+R\+A\+N\+D\+O\+M, I\+D\+C\+\_\+\+P\+L\+S\+E\+L\+\_\+\+R\+O\+L\+E\+\_\+\+L\+I\+S\+T, I\+D\+C\+\_\+\+P\+L\+S\+E\+L\+\_\+\+R\+O\+L\+E\+\_\+\+R\+A\+N\+D\+O\+M, Message\+Box(), plsel\+Adjust\+Lists(), plsel\+Final\+Selection(), plsel\+Init\+Dialog(), plsel\+\_\+data\+::selection, S\+I\+Z\+E, and T\+R\+U\+E.



Referenced by mswin\+\_\+player\+\_\+selection\+\_\+window().


\begin{DoxyCode}
333 \{
334     \textcolor{keyword}{struct }\hyperlink{structplsel__data}{plsel\_data}* data;
335     RECT   main\_rt, dlg\_rt;
336     \hyperlink{global_8h_afd2537d19a3cb6556b0f727580ec6ee7}{SIZE}   dlg\_sz;
337 
338     \textcolor{keywordflow}{switch} (message) 
339     \{
340     \textcolor{keywordflow}{case} WM\_INITDIALOG:
341         data = (\textcolor{keyword}{struct }\hyperlink{structplsel__data}{plsel\_data}*)lParam;
342         SetWindowLong(hWnd, GWL\_USERDATA, lParam);
343 
344         \textcolor{comment}{/* center dialog in the main window */}
345         GetWindowRect(\hyperlink{sys_2wince_2winhack_8c_ad72c8d80c9fc01eaf07a3c2463ab88bd}{GetNHApp}()->hMainWnd, &main\_rt);
346         GetWindowRect(hWnd, &dlg\_rt);
347         dlg\_sz.cx = dlg\_rt.right - dlg\_rt.left;
348         dlg\_sz.cy = dlg\_rt.bottom - dlg\_rt.top;
349 
350         dlg\_rt.left = (main\_rt.left+main\_rt.right-dlg\_sz.cx)/2;
351         dlg\_rt.right = dlg\_rt.left + dlg\_sz.cx;
352         dlg\_rt.top = (main\_rt.top+main\_rt.bottom-dlg\_sz.cy)/2;
353         dlg\_rt.bottom = dlg\_rt.top + dlg\_sz.cy;
354         MoveWindow( hWnd,
355                     (main\_rt.left+main\_rt.right-dlg\_sz.cx)/2,
356                     (main\_rt.top+main\_rt.bottom-dlg\_sz.cy)/2,
357                     dlg\_sz.cx,
358                     dlg\_sz.cy,
359                     \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE} );
360 
361         \textcolor{comment}{/* init dialog */}
362         \hyperlink{sys_2wince_2mhdlg_8c_a5849334dfe6fa6669496bbabd7beba1b}{plselInitDialog}(hWnd);
363 
364 \textcolor{preprocessor}{#if defined(WIN\_CE\_SMARTPHONE)}
365         NHSPhoneDialogSetup(hWnd, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE});
366 \textcolor{preprocessor}{#endif}
367         \textcolor{comment}{/* set focus on the role checkbox (random) field */}
368         SetFocus(GetDlgItem(hWnd, \hyperlink{sys_2wince_2resource_8h_afdecee8a47b18e78f35f4ac40eb03ee3}{IDC\_PLSEL\_ROLE\_RANDOM}));
369 
370         \textcolor{comment}{/* tell windows we set the focus */}
371         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
372     \textcolor{keywordflow}{break};
373 
374     \textcolor{keywordflow}{case} WM\_COMMAND:
375         data = (\textcolor{keyword}{struct }\hyperlink{structplsel__data}{plsel\_data}*)GetWindowLong(hWnd, GWL\_USERDATA);
376         \textcolor{keywordflow}{switch} (LOWORD(wParam)) \{ 
377 
378         \textcolor{comment}{/* OK button was clicked */}
379         \textcolor{keywordflow}{case} IDOK:
380             \textcolor{keywordflow}{if}( \hyperlink{sys_2wince_2mhdlg_8c_a77b92c8b63aa0fda942b122f7a918003}{plselFinalSelection}(hWnd, data->\hyperlink{structplsel__data_a6300c44105a90c7875e99c2b65f56375}{selection}) ) \{
381                 EndDialog(hWnd, wParam); 
382             \} \textcolor{keywordflow}{else} \{
383                 \hyperlink{sys_2wince_2winhack_8c_a2879dc701085dff777122c1a265cc67f}{MessageBox}(hWnd, TEXT(\textcolor{stringliteral}{"Cannot match this role. Try something else."}), TEXT(\textcolor{stringliteral}{"STOP"}
      ), MB\_OK );
384             \}
385         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
386 
387         \textcolor{comment}{/* CANCEL button was clicked */}
388         \textcolor{keywordflow}{case} IDCANCEL:
389             *data->\hyperlink{structplsel__data_a6300c44105a90c7875e99c2b65f56375}{selection} = -1;
390             EndDialog(hWnd, wParam); 
391         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
392 
393         \textcolor{comment}{/* following are events from dialog controls: }
394 \textcolor{comment}{           "random" checkboxes send BN\_CLICKED messages;}
395 \textcolor{comment}{           role/race/... combo-boxes send CBN\_SELENDOK }
396 \textcolor{comment}{           if something was selected;}
397 \textcolor{comment}{        */}
398         \textcolor{keywordflow}{case} \hyperlink{sys_2wince_2resource_8h_afdecee8a47b18e78f35f4ac40eb03ee3}{IDC\_PLSEL\_ROLE\_RANDOM}:
399             \textcolor{keywordflow}{if}( HIWORD(wParam)==BN\_CLICKED ) \{
400                 \textcolor{comment}{/* enable corresponding list window if "random"}
401 \textcolor{comment}{                   checkbox was "unchecked" */}
402                 EnableWindow(
403                     GetDlgItem(hWnd, \hyperlink{sys_2wince_2resource_8h_afb0c36d55b3554ef6e5dcec741275c95}{IDC\_PLSEL\_ROLE\_LIST}), 
404                     SendMessage((HWND)lParam, BM\_GETCHECK, 0, 0)==BST\_UNCHECKED
405                   );
406             \}
407         \textcolor{keywordflow}{break};
408 
409         \textcolor{keywordflow}{case} \hyperlink{sys_2wince_2resource_8h_ae06980e2147d26d2848720a1a0d9c60b}{IDC\_PLSEL\_RACE\_RANDOM}:
410             \textcolor{keywordflow}{if}( HIWORD(wParam)==BN\_CLICKED ) \{
411                 EnableWindow(
412                     GetDlgItem(hWnd, \hyperlink{sys_2wince_2resource_8h_a53527a80890132904783781fcaaf7d04}{IDC\_PLSEL\_RACE\_LIST}), 
413                     SendMessage((HWND)lParam, BM\_GETCHECK, 0, 0)==BST\_UNCHECKED
414                   );
415             \}
416         \textcolor{keywordflow}{break};
417 
418         \textcolor{keywordflow}{case} \hyperlink{sys_2wince_2resource_8h_aa983e3d3345e1d075793408e671e6314}{IDC\_PLSEL\_GENDER\_RANDOM}:
419             \textcolor{keywordflow}{if}( HIWORD(wParam)==BN\_CLICKED ) \{
420                 EnableWindow(
421                     GetDlgItem(hWnd, \hyperlink{sys_2wince_2resource_8h_abc228aa8ac35a561e1333f028027a45c}{IDC\_PLSEL\_GENDER\_LIST}), 
422                     SendMessage((HWND)lParam, BM\_GETCHECK, 0, 0)==BST\_UNCHECKED
423                   );
424             \}
425         \textcolor{keywordflow}{break};
426 
427         \textcolor{keywordflow}{case} \hyperlink{sys_2wince_2resource_8h_ace047fa1a82ff9b066fb19c3198fc4c9}{IDC\_PLSEL\_ALIGN\_RANDOM}:
428             \textcolor{keywordflow}{if}( HIWORD(wParam)==BN\_CLICKED ) \{
429                 EnableWindow(
430                     GetDlgItem(hWnd, \hyperlink{sys_2wince_2resource_8h_a485f9115f1cc924bd4f965da012f6969}{IDC\_PLSEL\_ALIGN\_LIST}), 
431                     SendMessage((HWND)lParam, BM\_GETCHECK, 0, 0)==BST\_UNCHECKED
432                   );
433             \}
434         \textcolor{keywordflow}{break};
435 
436         \textcolor{keywordflow}{case} \hyperlink{sys_2wince_2resource_8h_afb0c36d55b3554ef6e5dcec741275c95}{IDC\_PLSEL\_ROLE\_LIST}:
437             \textcolor{keywordflow}{if}( HIWORD(wParam)==CBN\_SELENDOK ) \{
438                 \textcolor{comment}{/* filter out invalid options if }
439 \textcolor{comment}{                   the selection was made */}
440                 \hyperlink{sys_2wince_2mhdlg_8c_a605937af4657a5d8fe751c8e72de53fe}{plselAdjustLists}( hWnd, LOWORD(wParam) );
441             \}
442         \textcolor{keywordflow}{break};
443 
444         \textcolor{keywordflow}{case} \hyperlink{sys_2wince_2resource_8h_a53527a80890132904783781fcaaf7d04}{IDC\_PLSEL\_RACE\_LIST}:
445             \textcolor{keywordflow}{if}( HIWORD(wParam)==CBN\_SELENDOK ) \{
446                 \hyperlink{sys_2wince_2mhdlg_8c_a605937af4657a5d8fe751c8e72de53fe}{plselAdjustLists}( hWnd, LOWORD(wParam) );
447             \}
448         \textcolor{keywordflow}{break};
449 
450         \textcolor{keywordflow}{case} \hyperlink{sys_2wince_2resource_8h_abc228aa8ac35a561e1333f028027a45c}{IDC\_PLSEL\_GENDER\_LIST}:
451             \textcolor{keywordflow}{if}( HIWORD(wParam)==CBN\_SELENDOK ) \{
452                 \hyperlink{sys_2wince_2mhdlg_8c_a605937af4657a5d8fe751c8e72de53fe}{plselAdjustLists}( hWnd, LOWORD(wParam) );
453             \}
454         \textcolor{keywordflow}{break};
455 
456         \textcolor{keywordflow}{case} \hyperlink{sys_2wince_2resource_8h_a485f9115f1cc924bd4f965da012f6969}{IDC\_PLSEL\_ALIGN\_LIST}:
457             \textcolor{keywordflow}{if}( HIWORD(wParam)==CBN\_SELENDOK ) \{
458                 \hyperlink{sys_2wince_2mhdlg_8c_a605937af4657a5d8fe751c8e72de53fe}{plselAdjustLists}( hWnd, LOWORD(wParam) );
459             \}
460         \textcolor{keywordflow}{break};
461         \}
462     \textcolor{keywordflow}{break};
463     \}
464     \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
465 \}
\end{DoxyCode}
\hypertarget{sys_2wince_2mhdlg_8c_a605937af4657a5d8fe751c8e72de53fe}{\index{sys/wince/mhdlg.\+c@{sys/wince/mhdlg.\+c}!plsel\+Adjust\+Lists@{plsel\+Adjust\+Lists}}
\index{plsel\+Adjust\+Lists@{plsel\+Adjust\+Lists}!sys/wince/mhdlg.\+c@{sys/wince/mhdlg.\+c}}
\subsubsection[{plsel\+Adjust\+Lists}]{\setlength{\rightskip}{0pt plus 5cm}void plsel\+Adjust\+Lists (
\begin{DoxyParamCaption}
\item[{H\+W\+N\+D}]{h\+Wnd, }
\item[{int}]{changed\+\_\+opt}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{sys_2wince_2mhdlg_8c_a605937af4657a5d8fe751c8e72de53fe}


Definition at line 553 of file mhdlg.\+c.



References aligns, Role\+Name\+::f, flag\+::female, flags, genders, I\+D\+C\+\_\+\+P\+L\+S\+E\+L\+\_\+\+A\+L\+I\+G\+N\+\_\+\+L\+I\+S\+T, I\+D\+C\+\_\+\+P\+L\+S\+E\+L\+\_\+\+G\+E\+N\+D\+E\+R\+\_\+\+L\+I\+S\+T, I\+D\+C\+\_\+\+P\+L\+S\+E\+L\+\_\+\+R\+A\+C\+E\+\_\+\+L\+I\+S\+T, I\+D\+C\+\_\+\+P\+L\+S\+E\+L\+\_\+\+R\+O\+L\+E\+\_\+\+L\+I\+S\+T, flag\+::initalign, flag\+::initgend, flag\+::initrace, flag\+::initrole, Role\+Name\+::m, Role\+::name, name, N\+H\+\_\+\+A2\+W, Race\+::noun, ok\+\_\+align(), ok\+\_\+gend(), ok\+\_\+race(), ok\+\_\+role(), races, R\+O\+L\+E\+\_\+\+A\+L\+I\+G\+N\+S, R\+O\+L\+E\+\_\+\+G\+E\+N\+D\+E\+R\+S, R\+O\+L\+E\+\_\+\+N\+O\+N\+E, and roles.



Referenced by Player\+Selector\+Dlg\+Proc(), and plsel\+Init\+Dialog().


\begin{DoxyCode}
554 \{
555     HWND control\_role, control\_race, control\_gender, control\_align;
556     \textcolor{keywordtype}{int}  initrole, initrace, initgend, initalign;
557     \textcolor{keywordtype}{int} i;
558     \textcolor{keywordtype}{int} ind;
559     \textcolor{keywordtype}{int} valid\_opt;
560     TCHAR wbuf[255];
561 
562     \textcolor{comment}{/* get control handles */}
563     control\_role = GetDlgItem(hWnd, \hyperlink{sys_2wince_2resource_8h_afb0c36d55b3554ef6e5dcec741275c95}{IDC\_PLSEL\_ROLE\_LIST});
564     control\_race = GetDlgItem(hWnd, \hyperlink{sys_2wince_2resource_8h_a53527a80890132904783781fcaaf7d04}{IDC\_PLSEL\_RACE\_LIST});
565     control\_gender = GetDlgItem(hWnd, \hyperlink{sys_2wince_2resource_8h_abc228aa8ac35a561e1333f028027a45c}{IDC\_PLSEL\_GENDER\_LIST});
566     control\_align = GetDlgItem(hWnd, \hyperlink{sys_2wince_2resource_8h_a485f9115f1cc924bd4f965da012f6969}{IDC\_PLSEL\_ALIGN\_LIST});
567 
568     \textcolor{comment}{/* get current selections */}    
569     ind = SendMessage(control\_role, CB\_GETCURSEL, 0, 0);
570     initrole = (ind==LB\_ERR)? \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a3b31f41da5faa08ea53d1e7ddf857088}{initrole} : SendMessage(control\_role, CB\_GETITEMDATA, ind, 
      0);
571 
572     ind = SendMessage(control\_race, CB\_GETCURSEL, 0, 0);
573     initrace = (ind==LB\_ERR)? \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a4c946d68b3e8e39311a0d20be0027a26}{initrace} : SendMessage(control\_race, CB\_GETITEMDATA, ind, 
      0);
574 
575     ind = SendMessage(control\_gender, CB\_GETCURSEL, 0, 0);
576     initgend = (ind==LB\_ERR)? \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_ad3655bdc9c8984f4d3c4944a7a72795a}{initgend} : SendMessage(control\_gender, CB\_GETITEMDATA, ind
      , 0);
577 
578     ind = SendMessage(control\_align, CB\_GETCURSEL, 0, 0);
579     initalign = (ind==LB\_ERR)? \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a66f0ee2707e5a565a25f948658362ced}{initalign} : SendMessage(control\_align, CB\_GETITEMDATA, 
      ind, 0);
580 
581     \textcolor{comment}{/* intialize roles list */}
582     \textcolor{keywordflow}{if}( changed\_sel==-1 ) \{
583         valid\_opt = 0;
584 
585         \textcolor{comment}{/* reset content and populate the list */}
586         SendMessage(control\_role, CB\_RESETCONTENT, 0, 0); 
587         \textcolor{keywordflow}{for} (i = 0; \hyperlink{you_8h_ae6c97706d31bdeff4786e51b96747db0}{roles}[i].\hyperlink{structRole_aca88aa13366db080d9a996e0c8a6c767}{name}.\hyperlink{structRoleName_a264d1ed0d4715edaaad295e8ab4c1002}{m}; i++) \{
588             \textcolor{keywordflow}{if} (\hyperlink{role_8c_a318d1e9bf43d8ea42709dc462487d4e2}{ok\_role}(i, initrace, initgend, initalign)) \{
589                 \textcolor{keywordflow}{if} (initgend>=0 && \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_ae3f866c572c50c676ecadf8acccf0c50}{female} && \hyperlink{you_8h_ae6c97706d31bdeff4786e51b96747db0}{roles}[i].\hyperlink{structRole_aca88aa13366db080d9a996e0c8a6c767}{name}.
      \hyperlink{structRoleName_a9d8f4b8c99abfbf5ca40901e5dcc581a}{f})
590                     ind = SendMessage(control\_role, CB\_ADDSTRING, (WPARAM)0, (LPARAM)
      \hyperlink{wceconf_8h_a2ed36c9ee770dfe5f2d0e3088a62adad}{NH\_A2W}(\hyperlink{you_8h_ae6c97706d31bdeff4786e51b96747db0}{roles}[i].\hyperlink{lev__main_8c_a8f8f80d37794cde9472343e4487ba3eb}{name}.f, wbuf, \textcolor{keyword}{sizeof}(wbuf)) );
591                 \textcolor{keywordflow}{else} 
592                     ind = SendMessage(control\_role, CB\_ADDSTRING, (WPARAM)0, (LPARAM)
      \hyperlink{wceconf_8h_a2ed36c9ee770dfe5f2d0e3088a62adad}{NH\_A2W}(\hyperlink{you_8h_ae6c97706d31bdeff4786e51b96747db0}{roles}[i].\hyperlink{lev__main_8c_a8f8f80d37794cde9472343e4487ba3eb}{name}.m, wbuf, \textcolor{keyword}{sizeof}(wbuf)) );
593 
594                 SendMessage(control\_role, CB\_SETITEMDATA, (WPARAM)ind, (LPARAM)i );
595                 \textcolor{keywordflow}{if}( i==initrole ) \{ 
596                     SendMessage(control\_role, CB\_SETCURSEL, (WPARAM)ind, (LPARAM)0 );
597                     valid\_opt = 1;
598                 \}
599             \}
600         \}
601         
602         \textcolor{comment}{/* set selection to the previously selected role}
603 \textcolor{comment}{           if it is still valid */}
604         \textcolor{keywordflow}{if}( !valid\_opt ) \{
605             initrole = \hyperlink{you_8h_a2ebee97eaa15f8971117c3aa8e40126c}{ROLE\_NONE};
606             initrace = \hyperlink{you_8h_a2ebee97eaa15f8971117c3aa8e40126c}{ROLE\_NONE};
607             initgend = \hyperlink{you_8h_a2ebee97eaa15f8971117c3aa8e40126c}{ROLE\_NONE};
608             initalign = \hyperlink{you_8h_a2ebee97eaa15f8971117c3aa8e40126c}{ROLE\_NONE};
609             SendMessage(control\_role, CB\_SETCURSEL, (WPARAM)-1, (LPARAM)0 );
610         \}
611 
612         \textcolor{comment}{/* trigger change of the races list */}
613         changed\_sel=\hyperlink{sys_2wince_2resource_8h_afb0c36d55b3554ef6e5dcec741275c95}{IDC\_PLSEL\_ROLE\_LIST};
614     \}
615 
616     \textcolor{comment}{/* intialize races list */}
617     \textcolor{keywordflow}{if}( changed\_sel==\hyperlink{sys_2wince_2resource_8h_afb0c36d55b3554ef6e5dcec741275c95}{IDC\_PLSEL\_ROLE\_LIST} ) \{
618         valid\_opt = 0;
619 
620         \textcolor{comment}{/* reset content and populate the list */}
621         SendMessage(control\_race, CB\_RESETCONTENT, 0, 0); 
622         \textcolor{keywordflow}{for} (i = 0; \hyperlink{you_8h_a7ebf30ca392e4038a1d95c63f317d967}{races}[i].\hyperlink{structRace_a5a94ed91d36f9a470a6bb7c5b28dd8a2}{noun}; i++)
623             \textcolor{keywordflow}{if} (\hyperlink{role_8c_a56d4f004e4333c757761926cdba6f86b}{ok\_race}(initrole, i, \hyperlink{you_8h_a2ebee97eaa15f8971117c3aa8e40126c}{ROLE\_NONE}, \hyperlink{you_8h_a2ebee97eaa15f8971117c3aa8e40126c}{ROLE\_NONE})) \{
624                 ind = SendMessage(control\_race, CB\_ADDSTRING, (WPARAM)0, (LPARAM)
      \hyperlink{wceconf_8h_a2ed36c9ee770dfe5f2d0e3088a62adad}{NH\_A2W}(\hyperlink{you_8h_a7ebf30ca392e4038a1d95c63f317d967}{races}[i].noun, wbuf, \textcolor{keyword}{sizeof}(wbuf)) ); 
625                 SendMessage(control\_race, CB\_SETITEMDATA, (WPARAM)ind, (LPARAM)i ); 
626                 \textcolor{keywordflow}{if}( i==initrace ) \{ 
627                     SendMessage(control\_race, CB\_SETCURSEL, (WPARAM)ind, (LPARAM)0 );
628                     valid\_opt = 1;
629                 \}
630             \}
631 
632         \textcolor{comment}{/* set selection to the previously selected race}
633 \textcolor{comment}{           if it is still valid */}
634         \textcolor{keywordflow}{if}( !valid\_opt ) \{
635             initrace = \hyperlink{you_8h_a2ebee97eaa15f8971117c3aa8e40126c}{ROLE\_NONE};
636             initgend = \hyperlink{you_8h_a2ebee97eaa15f8971117c3aa8e40126c}{ROLE\_NONE};
637             initalign = \hyperlink{you_8h_a2ebee97eaa15f8971117c3aa8e40126c}{ROLE\_NONE};
638             SendMessage(control\_race, CB\_SETCURSEL, (WPARAM)-1, (LPARAM)0 );
639         \}
640 
641         \textcolor{comment}{/* trigger change of the genders list */}
642         changed\_sel=\hyperlink{sys_2wince_2resource_8h_a53527a80890132904783781fcaaf7d04}{IDC\_PLSEL\_RACE\_LIST};
643     \}
644 
645     \textcolor{comment}{/* intialize genders list */}
646     \textcolor{keywordflow}{if}( changed\_sel==\hyperlink{sys_2wince_2resource_8h_a53527a80890132904783781fcaaf7d04}{IDC\_PLSEL\_RACE\_LIST} ) \{
647         valid\_opt = 0;
648 
649         \textcolor{comment}{/* reset content and populate the list */}
650         SendMessage(control\_gender, CB\_RESETCONTENT, 0, 0); 
651         \textcolor{keywordflow}{for} (i = 0; i < \hyperlink{you_8h_a8b377306ace79d33d0b4b74dbd88b819}{ROLE\_GENDERS}; i++)
652             \textcolor{keywordflow}{if} (\hyperlink{role_8c_adc510807e3362f828c9c14174f622e9b}{ok\_gend}(initrole, initrace, i, \hyperlink{you_8h_a2ebee97eaa15f8971117c3aa8e40126c}{ROLE\_NONE})) \{
653                 ind = SendMessage(control\_gender, CB\_ADDSTRING, (WPARAM)0, (LPARAM)
      \hyperlink{wceconf_8h_a2ed36c9ee770dfe5f2d0e3088a62adad}{NH\_A2W}(\hyperlink{you_8h_a054315bd2a7d5525da7f008b40c3a6bf}{genders}[i].adj, wbuf, \textcolor{keyword}{sizeof}(wbuf)) ); 
654                 SendMessage(control\_gender, CB\_SETITEMDATA, (WPARAM)ind, (LPARAM)i ); 
655                 \textcolor{keywordflow}{if}( i==initgend ) \{ 
656                     SendMessage(control\_gender, CB\_SETCURSEL, (WPARAM)ind, (LPARAM)0 );
657                     valid\_opt = 1;
658                 \}
659             \}
660 
661         \textcolor{comment}{/* set selection to the previously selected gender}
662 \textcolor{comment}{           if it is still valid */}
663         \textcolor{keywordflow}{if}( !valid\_opt ) \{
664             initgend = \hyperlink{you_8h_a2ebee97eaa15f8971117c3aa8e40126c}{ROLE\_NONE};
665             initalign = \hyperlink{you_8h_a2ebee97eaa15f8971117c3aa8e40126c}{ROLE\_NONE};
666             SendMessage(control\_gender, CB\_SETCURSEL, (WPARAM)-1, (LPARAM)0 );
667         \}
668 
669         \textcolor{comment}{/* trigger change of the alignments list */}
670         changed\_sel=\hyperlink{sys_2wince_2resource_8h_abc228aa8ac35a561e1333f028027a45c}{IDC\_PLSEL\_GENDER\_LIST};
671     \}
672 
673     \textcolor{comment}{/* intialize alignments list */}
674     \textcolor{keywordflow}{if}( changed\_sel==\hyperlink{sys_2wince_2resource_8h_abc228aa8ac35a561e1333f028027a45c}{IDC\_PLSEL\_GENDER\_LIST} ) \{
675         valid\_opt = 0;
676 
677         \textcolor{comment}{/* reset content and populate the list */}
678         SendMessage(control\_align, CB\_RESETCONTENT, 0, 0); 
679         \textcolor{keywordflow}{for} (i = 0; i < \hyperlink{you_8h_a06accde00ac7683fc3293968cbc5e17a}{ROLE\_ALIGNS}; i++)
680             \textcolor{keywordflow}{if} (\hyperlink{role_8c_adf8f18a510b62a0c8f43f9521e2b8cc5}{ok\_align}(initrole, initrace, initgend, i)) \{
681                 ind = SendMessage(control\_align, CB\_ADDSTRING, (WPARAM)0, (LPARAM)
      \hyperlink{wceconf_8h_a2ed36c9ee770dfe5f2d0e3088a62adad}{NH\_A2W}(\hyperlink{you_8h_abbb6c9f0c6fc7aa532b2ed8dec7ffb29}{aligns}[i].adj, wbuf, \textcolor{keyword}{sizeof}(wbuf)) ); 
682                 SendMessage(control\_align, CB\_SETITEMDATA, (WPARAM)ind, (LPARAM)i ); 
683                 \textcolor{keywordflow}{if}( i==initalign ) \{ 
684                     SendMessage(control\_align, CB\_SETCURSEL, (WPARAM)ind, (LPARAM)0 );
685                     valid\_opt = 1;
686                 \}
687             \}
688 
689         \textcolor{comment}{/* set selection to the previously selected alignment}
690 \textcolor{comment}{           if it is still valid */}
691         \textcolor{keywordflow}{if}( !valid\_opt ) \{
692             initalign = \hyperlink{you_8h_a2ebee97eaa15f8971117c3aa8e40126c}{ROLE\_NONE};
693             SendMessage(control\_align, CB\_SETCURSEL, (WPARAM)-1, (LPARAM)0 );
694         \}
695     \}
696 \}
\end{DoxyCode}
\hypertarget{sys_2wince_2mhdlg_8c_a77b92c8b63aa0fda942b122f7a918003}{\index{sys/wince/mhdlg.\+c@{sys/wince/mhdlg.\+c}!plsel\+Final\+Selection@{plsel\+Final\+Selection}}
\index{plsel\+Final\+Selection@{plsel\+Final\+Selection}!sys/wince/mhdlg.\+c@{sys/wince/mhdlg.\+c}}
\subsubsection[{plsel\+Final\+Selection}]{\setlength{\rightskip}{0pt plus 5cm}int plsel\+Final\+Selection (
\begin{DoxyParamCaption}
\item[{H\+W\+N\+D}]{h\+Wnd, }
\item[{int $\ast$}]{selection}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{sys_2wince_2mhdlg_8c_a77b92c8b63aa0fda942b122f7a918003}


Definition at line 699 of file mhdlg.\+c.



References F\+A\+L\+S\+E, flags, I\+D\+C\+\_\+\+P\+L\+S\+E\+L\+\_\+\+A\+L\+I\+G\+N\+\_\+\+L\+I\+S\+T, I\+D\+C\+\_\+\+P\+L\+S\+E\+L\+\_\+\+A\+L\+I\+G\+N\+\_\+\+R\+A\+N\+D\+O\+M, I\+D\+C\+\_\+\+P\+L\+S\+E\+L\+\_\+\+G\+E\+N\+D\+E\+R\+\_\+\+L\+I\+S\+T, I\+D\+C\+\_\+\+P\+L\+S\+E\+L\+\_\+\+G\+E\+N\+D\+E\+R\+\_\+\+R\+A\+N\+D\+O\+M, I\+D\+C\+\_\+\+P\+L\+S\+E\+L\+\_\+\+R\+A\+C\+E\+\_\+\+L\+I\+S\+T, I\+D\+C\+\_\+\+P\+L\+S\+E\+L\+\_\+\+R\+A\+C\+E\+\_\+\+R\+A\+N\+D\+O\+M, I\+D\+C\+\_\+\+P\+L\+S\+E\+L\+\_\+\+R\+O\+L\+E\+\_\+\+L\+I\+S\+T, I\+D\+C\+\_\+\+P\+L\+S\+E\+L\+\_\+\+R\+O\+L\+E\+\_\+\+R\+A\+N\+D\+O\+M, flag\+::initalign, flag\+::initgend, flag\+::initrace, flag\+::initrole, Message\+Box(), pick\+\_\+align(), pick\+\_\+gend(), pick\+\_\+race(), P\+I\+C\+K\+\_\+\+R\+A\+N\+D\+O\+M, pick\+\_\+role(), R\+O\+L\+E\+\_\+\+R\+A\+N\+D\+O\+M, T\+R\+U\+E, validalign(), validgend(), and validrace().



Referenced by Player\+Selector\+Dlg\+Proc().


\begin{DoxyCode}
700 \{
701     \textcolor{keywordtype}{int} ind;
702 
703     \textcolor{comment}{/* get current selections */}
704     \textcolor{keywordflow}{if}( SendDlgItemMessage(hWnd, \hyperlink{sys_2wince_2resource_8h_afdecee8a47b18e78f35f4ac40eb03ee3}{IDC\_PLSEL\_ROLE\_RANDOM}, BM\_GETCHECK, 0, 0)==
      BST\_CHECKED ) \{
705         \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a3b31f41da5faa08ea53d1e7ddf857088}{initrole} = \hyperlink{you_8h_a7ddd1e4a9a55365ad9e36cd524be0480}{ROLE\_RANDOM};
706     \} \textcolor{keywordflow}{else} \{
707         ind = SendDlgItemMessage(hWnd, \hyperlink{sys_2wince_2resource_8h_afb0c36d55b3554ef6e5dcec741275c95}{IDC\_PLSEL\_ROLE\_LIST}, CB\_GETCURSEL, 0, 0);
708         \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a3b31f41da5faa08ea53d1e7ddf857088}{initrole} = (ind==LB\_ERR)? \hyperlink{you_8h_a7ddd1e4a9a55365ad9e36cd524be0480}{ROLE\_RANDOM} : SendDlgItemMessage(hWnd, 
      \hyperlink{sys_2wince_2resource_8h_afb0c36d55b3554ef6e5dcec741275c95}{IDC\_PLSEL\_ROLE\_LIST}, CB\_GETITEMDATA, ind, 0);
709     \}
710 
711     \textcolor{keywordflow}{if}( SendDlgItemMessage(hWnd, \hyperlink{sys_2wince_2resource_8h_ae06980e2147d26d2848720a1a0d9c60b}{IDC\_PLSEL\_RACE\_RANDOM}, BM\_GETCHECK, 0, 0)==
      BST\_CHECKED ) \{
712         \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a4c946d68b3e8e39311a0d20be0027a26}{initrace} = \hyperlink{you_8h_a7ddd1e4a9a55365ad9e36cd524be0480}{ROLE\_RANDOM};
713     \} \textcolor{keywordflow}{else} \{
714         ind = SendDlgItemMessage(hWnd, \hyperlink{sys_2wince_2resource_8h_a53527a80890132904783781fcaaf7d04}{IDC\_PLSEL\_RACE\_LIST}, CB\_GETCURSEL, 0, 0);
715         \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a4c946d68b3e8e39311a0d20be0027a26}{initrace} = (ind==LB\_ERR)? \hyperlink{you_8h_a7ddd1e4a9a55365ad9e36cd524be0480}{ROLE\_RANDOM} : SendDlgItemMessage(hWnd, 
      \hyperlink{sys_2wince_2resource_8h_a53527a80890132904783781fcaaf7d04}{IDC\_PLSEL\_RACE\_LIST}, CB\_GETITEMDATA, ind, 0);
716     \}
717 
718     \textcolor{keywordflow}{if}( SendDlgItemMessage(hWnd, \hyperlink{sys_2wince_2resource_8h_aa983e3d3345e1d075793408e671e6314}{IDC\_PLSEL\_GENDER\_RANDOM}, BM\_GETCHECK, 0, 0)==
      BST\_CHECKED ) \{
719         \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_ad3655bdc9c8984f4d3c4944a7a72795a}{initgend} = \hyperlink{you_8h_a7ddd1e4a9a55365ad9e36cd524be0480}{ROLE\_RANDOM};
720     \} \textcolor{keywordflow}{else} \{
721         ind = SendDlgItemMessage(hWnd, \hyperlink{sys_2wince_2resource_8h_abc228aa8ac35a561e1333f028027a45c}{IDC\_PLSEL\_GENDER\_LIST}, CB\_GETCURSEL, 0, 0);
722         \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_ad3655bdc9c8984f4d3c4944a7a72795a}{initgend} = (ind==LB\_ERR)? \hyperlink{you_8h_a7ddd1e4a9a55365ad9e36cd524be0480}{ROLE\_RANDOM} : SendDlgItemMessage(hWnd, 
      \hyperlink{sys_2wince_2resource_8h_abc228aa8ac35a561e1333f028027a45c}{IDC\_PLSEL\_GENDER\_LIST}, CB\_GETITEMDATA, ind, 0);
723     \}
724 
725     \textcolor{keywordflow}{if}( SendDlgItemMessage(hWnd, \hyperlink{sys_2wince_2resource_8h_ace047fa1a82ff9b066fb19c3198fc4c9}{IDC\_PLSEL\_ALIGN\_RANDOM}, BM\_GETCHECK, 0, 0)==
      BST\_CHECKED ) \{
726         \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a66f0ee2707e5a565a25f948658362ced}{initalign} = \hyperlink{you_8h_a7ddd1e4a9a55365ad9e36cd524be0480}{ROLE\_RANDOM};
727     \} \textcolor{keywordflow}{else} \{
728         ind = SendDlgItemMessage(hWnd, \hyperlink{sys_2wince_2resource_8h_a485f9115f1cc924bd4f965da012f6969}{IDC\_PLSEL\_ALIGN\_LIST}, CB\_GETCURSEL, 0, 0);
729         \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a66f0ee2707e5a565a25f948658362ced}{initalign} = (ind==LB\_ERR)? \hyperlink{you_8h_a7ddd1e4a9a55365ad9e36cd524be0480}{ROLE\_RANDOM} : SendDlgItemMessage(hWnd, 
      \hyperlink{sys_2wince_2resource_8h_a485f9115f1cc924bd4f965da012f6969}{IDC\_PLSEL\_ALIGN\_LIST}, CB\_GETITEMDATA, ind, 0);
730     \}
731     
732 
733     \textcolor{comment}{/* check the role */}
734     \textcolor{keywordflow}{if}( \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a3b31f41da5faa08ea53d1e7ddf857088}{initrole}==\hyperlink{you_8h_a7ddd1e4a9a55365ad9e36cd524be0480}{ROLE\_RANDOM} ) \{
735         \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a3b31f41da5faa08ea53d1e7ddf857088}{initrole} = \hyperlink{role_8c_a45a06501725a029f2a6d153cc0018cef}{pick\_role}(\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a4c946d68b3e8e39311a0d20be0027a26}{initrace}, 
      \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_ad3655bdc9c8984f4d3c4944a7a72795a}{initgend}, \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a66f0ee2707e5a565a25f948658362ced}{initalign}, \hyperlink{hack_8h_ad866a8283b1279be18b8066faa764467}{PICK\_RANDOM});
736         \textcolor{keywordflow}{if} (\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a3b31f41da5faa08ea53d1e7ddf857088}{initrole} < 0) \{
737             \hyperlink{sys_2wince_2winhack_8c_a2879dc701085dff777122c1a265cc67f}{MessageBox}(hWnd, TEXT(\textcolor{stringliteral}{"Incompatible role!"}), TEXT(\textcolor{stringliteral}{"STOP"}), MB\_OK);
738             \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
739         \}
740     \}
741 
742     \textcolor{comment}{/* Select a race, if necessary */}
743     \textcolor{comment}{/* force compatibility with role */}
744     \textcolor{keywordflow}{if} (\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a4c946d68b3e8e39311a0d20be0027a26}{initrace}==\hyperlink{you_8h_a7ddd1e4a9a55365ad9e36cd524be0480}{ROLE\_RANDOM} || !\hyperlink{role_8c_a648c22cd7c57851ea871247be474763b}{validrace}(
      \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a3b31f41da5faa08ea53d1e7ddf857088}{initrole}, \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a4c946d68b3e8e39311a0d20be0027a26}{initrace})) \{
745         \textcolor{comment}{/* pre-selected race not valid */}
746         \textcolor{keywordflow}{if} (\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a4c946d68b3e8e39311a0d20be0027a26}{initrace} == \hyperlink{you_8h_a7ddd1e4a9a55365ad9e36cd524be0480}{ROLE\_RANDOM}) \{
747             \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a4c946d68b3e8e39311a0d20be0027a26}{initrace} = \hyperlink{role_8c_aa6df5e095937cd04b595a860f324c3b6}{pick\_race}(\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a3b31f41da5faa08ea53d1e7ddf857088}{initrole}, 
      \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_ad3655bdc9c8984f4d3c4944a7a72795a}{initgend}, \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a66f0ee2707e5a565a25f948658362ced}{initalign}, \hyperlink{hack_8h_ad866a8283b1279be18b8066faa764467}{PICK\_RANDOM});
748         \}
749         
750         \textcolor{keywordflow}{if} (\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a4c946d68b3e8e39311a0d20be0027a26}{initrace} < 0) \{
751             \hyperlink{sys_2wince_2winhack_8c_a2879dc701085dff777122c1a265cc67f}{MessageBox}(hWnd, TEXT(\textcolor{stringliteral}{"Incompatible race!"}), TEXT(\textcolor{stringliteral}{"STOP"}), MB\_OK);
752             \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
753         \}
754     \}
755 
756     \textcolor{comment}{/* Select a gender, if necessary */}
757     \textcolor{comment}{/* force compatibility with role/race, try for compatibility with}
758 \textcolor{comment}{     * pre-selected alignment */}
759     \textcolor{keywordflow}{if} (\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_ad3655bdc9c8984f4d3c4944a7a72795a}{initgend} < 0 || 
760         !\hyperlink{role_8c_a2205e818d885f836907a6cf7ffa869de}{validgend}(\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a3b31f41da5faa08ea53d1e7ddf857088}{initrole}, \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a4c946d68b3e8e39311a0d20be0027a26}{initrace}, 
      \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_ad3655bdc9c8984f4d3c4944a7a72795a}{initgend})) \{
761         \textcolor{comment}{/* pre-selected gender not valid */}
762         \textcolor{keywordflow}{if} (\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_ad3655bdc9c8984f4d3c4944a7a72795a}{initgend} == \hyperlink{you_8h_a7ddd1e4a9a55365ad9e36cd524be0480}{ROLE\_RANDOM}) \{
763             \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_ad3655bdc9c8984f4d3c4944a7a72795a}{initgend} = \hyperlink{role_8c_a183d9c61e1fe467eb71ae8a4215c2b32}{pick\_gend}(\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a3b31f41da5faa08ea53d1e7ddf857088}{initrole}, 
      \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a4c946d68b3e8e39311a0d20be0027a26}{initrace}, \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a66f0ee2707e5a565a25f948658362ced}{initalign}, \hyperlink{hack_8h_ad866a8283b1279be18b8066faa764467}{PICK\_RANDOM});
764         \}
765         
766         \textcolor{keywordflow}{if} (\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_ad3655bdc9c8984f4d3c4944a7a72795a}{initgend} < 0) \{
767             \hyperlink{sys_2wince_2winhack_8c_a2879dc701085dff777122c1a265cc67f}{MessageBox}(hWnd, TEXT(\textcolor{stringliteral}{"Incompatible gender!"}), TEXT(\textcolor{stringliteral}{"STOP"}), MB\_OK);
768             \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
769         \}
770     \}
771 
772     \textcolor{comment}{/* Select an alignment, if necessary */}
773     \textcolor{comment}{/* force compatibility with role/race/gender */}
774     \textcolor{keywordflow}{if} (\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a66f0ee2707e5a565a25f948658362ced}{initalign} < 0 || 
775         !\hyperlink{role_8c_ab01f2c791fe250b69c15c02535bca8b0}{validalign}(\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a3b31f41da5faa08ea53d1e7ddf857088}{initrole}, \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a4c946d68b3e8e39311a0d20be0027a26}{initrace}, 
      \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a66f0ee2707e5a565a25f948658362ced}{initalign})) \{
776         \textcolor{comment}{/* pre-selected alignment not valid */}
777         \textcolor{keywordflow}{if} (\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a66f0ee2707e5a565a25f948658362ced}{initalign} == \hyperlink{you_8h_a7ddd1e4a9a55365ad9e36cd524be0480}{ROLE\_RANDOM}) \{
778             \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a66f0ee2707e5a565a25f948658362ced}{initalign} = \hyperlink{role_8c_a9697cef7cfa173a40d57e0626fed19c5}{pick\_align}(\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.
      \hyperlink{structflag_a3b31f41da5faa08ea53d1e7ddf857088}{initrole}, \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a4c946d68b3e8e39311a0d20be0027a26}{initrace}, \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_ad3655bdc9c8984f4d3c4944a7a72795a}{initgend}, 
      \hyperlink{hack_8h_ad866a8283b1279be18b8066faa764467}{PICK\_RANDOM});
779         \} \textcolor{keywordflow}{else} \{
780             \hyperlink{sys_2wince_2winhack_8c_a2879dc701085dff777122c1a265cc67f}{MessageBox}(hWnd, TEXT(\textcolor{stringliteral}{"Incompatible alignment!"}), TEXT(\textcolor{stringliteral}{"STOP"}), MB\_OK);
781             \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
782         \}
783     \}
784 
785     \textcolor{keywordflow}{return} \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
786 \}
\end{DoxyCode}
\hypertarget{sys_2wince_2mhdlg_8c_a5849334dfe6fa6669496bbabd7beba1b}{\index{sys/wince/mhdlg.\+c@{sys/wince/mhdlg.\+c}!plsel\+Init\+Dialog@{plsel\+Init\+Dialog}}
\index{plsel\+Init\+Dialog@{plsel\+Init\+Dialog}!sys/wince/mhdlg.\+c@{sys/wince/mhdlg.\+c}}
\subsubsection[{plsel\+Init\+Dialog}]{\setlength{\rightskip}{0pt plus 5cm}void plsel\+Init\+Dialog (
\begin{DoxyParamCaption}
\item[{H\+W\+N\+D}]{h\+Wnd}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{sys_2wince_2mhdlg_8c_a5849334dfe6fa6669496bbabd7beba1b}


Definition at line 482 of file mhdlg.\+c.



References B\+U\+F\+S\+Z, Check\+Dlg\+Button, F\+A\+L\+S\+E, flags, I\+D\+C\+\_\+\+P\+L\+S\+E\+L\+\_\+\+A\+L\+I\+G\+N\+\_\+\+L\+I\+S\+T, I\+D\+C\+\_\+\+P\+L\+S\+E\+L\+\_\+\+A\+L\+I\+G\+N\+\_\+\+R\+A\+N\+D\+O\+M, I\+D\+C\+\_\+\+P\+L\+S\+E\+L\+\_\+\+G\+E\+N\+D\+E\+R\+\_\+\+L\+I\+S\+T, I\+D\+C\+\_\+\+P\+L\+S\+E\+L\+\_\+\+G\+E\+N\+D\+E\+R\+\_\+\+R\+A\+N\+D\+O\+M, I\+D\+C\+\_\+\+P\+L\+S\+E\+L\+\_\+\+N\+A\+M\+E, I\+D\+C\+\_\+\+P\+L\+S\+E\+L\+\_\+\+R\+A\+C\+E\+\_\+\+L\+I\+S\+T, I\+D\+C\+\_\+\+P\+L\+S\+E\+L\+\_\+\+R\+A\+C\+E\+\_\+\+R\+A\+N\+D\+O\+M, I\+D\+C\+\_\+\+P\+L\+S\+E\+L\+\_\+\+R\+O\+L\+E\+\_\+\+L\+I\+S\+T, I\+D\+C\+\_\+\+P\+L\+S\+E\+L\+\_\+\+R\+O\+L\+E\+\_\+\+R\+A\+N\+D\+O\+M, flag\+::initalign, flag\+::initgend, flag\+::initrace, flag\+::initrole, N\+H\+\_\+\+A2\+W, ok\+\_\+align(), ok\+\_\+gend(), ok\+\_\+race(), ok\+\_\+role(), plname, plsel\+Adjust\+Lists(), R\+O\+L\+E\+\_\+\+N\+O\+N\+E, set\+Combo\+Box\+Value(), T\+R\+U\+E, validalign(), validgend(), and validrace().



Referenced by Player\+Selector\+Dlg\+Proc().


\begin{DoxyCode}
483 \{
484     TCHAR wbuf[\hyperlink{global_8h_ab26c26cbf7a0c97d8960c3cfb413f882}{BUFSZ}];
485 
486     \textcolor{comment}{/* set player name */}
487     SetDlgItemText(hWnd, \hyperlink{sys_2wince_2resource_8h_ade49a3637a7472636890af25b50ee008}{IDC\_PLSEL\_NAME}, \hyperlink{wceconf_8h_a2ed36c9ee770dfe5f2d0e3088a62adad}{NH\_A2W}(\hyperlink{decl_8h_a362b24d8378ea9e5a611cc50d66e354b}{plname}, wbuf, \textcolor{keyword}{sizeof}(wbuf)));
488 
489     \textcolor{comment}{/* check flags for consistency */}
490     \textcolor{keywordflow}{if}( \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a3b31f41da5faa08ea53d1e7ddf857088}{initrole}>=0 ) \{
491         \textcolor{keywordflow}{if} (\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a4c946d68b3e8e39311a0d20be0027a26}{initrace}>=0 && !\hyperlink{role_8c_a648c22cd7c57851ea871247be474763b}{validrace}(\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.
      \hyperlink{structflag_a3b31f41da5faa08ea53d1e7ddf857088}{initrole}, \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a4c946d68b3e8e39311a0d20be0027a26}{initrace})) \{
492             \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a4c946d68b3e8e39311a0d20be0027a26}{initrace} = \hyperlink{you_8h_a2ebee97eaa15f8971117c3aa8e40126c}{ROLE\_NONE};
493         \}
494 
495         \textcolor{keywordflow}{if} (\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_ad3655bdc9c8984f4d3c4944a7a72795a}{initgend}>=0 && !\hyperlink{role_8c_a2205e818d885f836907a6cf7ffa869de}{validgend}(\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.
      \hyperlink{structflag_a3b31f41da5faa08ea53d1e7ddf857088}{initrole}, \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a4c946d68b3e8e39311a0d20be0027a26}{initrace}, \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_ad3655bdc9c8984f4d3c4944a7a72795a}{initgend})) \{
496             \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_ad3655bdc9c8984f4d3c4944a7a72795a}{initgend} = \hyperlink{you_8h_a2ebee97eaa15f8971117c3aa8e40126c}{ROLE\_NONE};
497         \}
498 
499         \textcolor{keywordflow}{if} (\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a66f0ee2707e5a565a25f948658362ced}{initalign}>=0 && !\hyperlink{role_8c_ab01f2c791fe250b69c15c02535bca8b0}{validalign}(\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.
      \hyperlink{structflag_a3b31f41da5faa08ea53d1e7ddf857088}{initrole}, \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a4c946d68b3e8e39311a0d20be0027a26}{initrace}, \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a66f0ee2707e5a565a25f948658362ced}{initalign})) \{
500             \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a66f0ee2707e5a565a25f948658362ced}{initalign} = \hyperlink{you_8h_a2ebee97eaa15f8971117c3aa8e40126c}{ROLE\_NONE};
501         \}
502     \}
503 
504     \textcolor{comment}{/* populate select boxes */}
505     \hyperlink{sys_2wince_2mhdlg_8c_a605937af4657a5d8fe751c8e72de53fe}{plselAdjustLists}(hWnd, -1);
506 
507     \textcolor{comment}{/* intialize roles list */}
508     \textcolor{keywordflow}{if}( \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a3b31f41da5faa08ea53d1e7ddf857088}{initrole}<0 || !\hyperlink{role_8c_a318d1e9bf43d8ea42709dc462487d4e2}{ok\_role}(\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a3b31f41da5faa08ea53d1e7ddf857088}{initrole}, 
      \hyperlink{you_8h_a2ebee97eaa15f8971117c3aa8e40126c}{ROLE\_NONE}, \hyperlink{you_8h_a2ebee97eaa15f8971117c3aa8e40126c}{ROLE\_NONE}, \hyperlink{you_8h_a2ebee97eaa15f8971117c3aa8e40126c}{ROLE\_NONE})) \{
509         \hyperlink{sys_2wince_2mhdlg_8c_a4d1bdfade06602b90d50cbdbdb45ee10}{CheckDlgButton}(hWnd, \hyperlink{sys_2wince_2resource_8h_afdecee8a47b18e78f35f4ac40eb03ee3}{IDC\_PLSEL\_ROLE\_RANDOM}, BST\_CHECKED);
510         EnableWindow(GetDlgItem(hWnd, \hyperlink{sys_2wince_2resource_8h_afb0c36d55b3554ef6e5dcec741275c95}{IDC\_PLSEL\_ROLE\_LIST}), 
      \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE});
511     \} \textcolor{keywordflow}{else} \{
512         \hyperlink{sys_2wince_2mhdlg_8c_a4d1bdfade06602b90d50cbdbdb45ee10}{CheckDlgButton}(hWnd, \hyperlink{sys_2wince_2resource_8h_afdecee8a47b18e78f35f4ac40eb03ee3}{IDC\_PLSEL\_ROLE\_RANDOM}, BST\_UNCHECKED);
513         EnableWindow(GetDlgItem(hWnd, \hyperlink{sys_2wince_2resource_8h_afb0c36d55b3554ef6e5dcec741275c95}{IDC\_PLSEL\_ROLE\_LIST}), 
      \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE});
514         \hyperlink{sys_2wince_2mhdlg_8c_a0772aa991694d1e706a0d7f1e8852567}{setComboBoxValue}(hWnd, \hyperlink{sys_2wince_2resource_8h_afb0c36d55b3554ef6e5dcec741275c95}{IDC\_PLSEL\_ROLE\_LIST}, 
      \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a3b31f41da5faa08ea53d1e7ddf857088}{initrole});
515     \}
516 
517     \textcolor{comment}{/* intialize races list */}
518     \textcolor{keywordflow}{if}( \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a4c946d68b3e8e39311a0d20be0027a26}{initrace}<0 || !\hyperlink{role_8c_a56d4f004e4333c757761926cdba6f86b}{ok\_race}(\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a3b31f41da5faa08ea53d1e7ddf857088}{initrole}, 
      \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a4c946d68b3e8e39311a0d20be0027a26}{initrace}, \hyperlink{you_8h_a2ebee97eaa15f8971117c3aa8e40126c}{ROLE\_NONE}, \hyperlink{you_8h_a2ebee97eaa15f8971117c3aa8e40126c}{ROLE\_NONE}) ) \{
519         \hyperlink{sys_2wince_2mhdlg_8c_a4d1bdfade06602b90d50cbdbdb45ee10}{CheckDlgButton}(hWnd, \hyperlink{sys_2wince_2resource_8h_ae06980e2147d26d2848720a1a0d9c60b}{IDC\_PLSEL\_RACE\_RANDOM}, BST\_CHECKED);
520         EnableWindow(GetDlgItem(hWnd, \hyperlink{sys_2wince_2resource_8h_a53527a80890132904783781fcaaf7d04}{IDC\_PLSEL\_RACE\_LIST}), 
      \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE});
521     \} \textcolor{keywordflow}{else} \{
522         \hyperlink{sys_2wince_2mhdlg_8c_a4d1bdfade06602b90d50cbdbdb45ee10}{CheckDlgButton}(hWnd, \hyperlink{sys_2wince_2resource_8h_ae06980e2147d26d2848720a1a0d9c60b}{IDC\_PLSEL\_RACE\_RANDOM}, BST\_UNCHECKED);
523         EnableWindow(GetDlgItem(hWnd, \hyperlink{sys_2wince_2resource_8h_a53527a80890132904783781fcaaf7d04}{IDC\_PLSEL\_RACE\_LIST}), 
      \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE});
524         \hyperlink{sys_2wince_2mhdlg_8c_a0772aa991694d1e706a0d7f1e8852567}{setComboBoxValue}(hWnd, \hyperlink{sys_2wince_2resource_8h_a53527a80890132904783781fcaaf7d04}{IDC\_PLSEL\_RACE\_LIST}, 
      \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a4c946d68b3e8e39311a0d20be0027a26}{initrace});
525     \}
526 
527     \textcolor{comment}{/* intialize genders list */}
528     \textcolor{keywordflow}{if}( \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_ad3655bdc9c8984f4d3c4944a7a72795a}{initgend}<0 || !\hyperlink{role_8c_adc510807e3362f828c9c14174f622e9b}{ok\_gend}(\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a3b31f41da5faa08ea53d1e7ddf857088}{initrole}, 
      \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a4c946d68b3e8e39311a0d20be0027a26}{initrace}, \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_ad3655bdc9c8984f4d3c4944a7a72795a}{initgend}, \hyperlink{you_8h_a2ebee97eaa15f8971117c3aa8e40126c}{ROLE\_NONE})) \{
529         \hyperlink{sys_2wince_2mhdlg_8c_a4d1bdfade06602b90d50cbdbdb45ee10}{CheckDlgButton}(hWnd, \hyperlink{sys_2wince_2resource_8h_aa983e3d3345e1d075793408e671e6314}{IDC\_PLSEL\_GENDER\_RANDOM}, BST\_CHECKED);
530         EnableWindow(GetDlgItem(hWnd, \hyperlink{sys_2wince_2resource_8h_abc228aa8ac35a561e1333f028027a45c}{IDC\_PLSEL\_GENDER\_LIST}), 
      \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE});
531     \} \textcolor{keywordflow}{else} \{
532         \hyperlink{sys_2wince_2mhdlg_8c_a4d1bdfade06602b90d50cbdbdb45ee10}{CheckDlgButton}(hWnd, \hyperlink{sys_2wince_2resource_8h_aa983e3d3345e1d075793408e671e6314}{IDC\_PLSEL\_GENDER\_RANDOM}, BST\_UNCHECKED);
533         EnableWindow(GetDlgItem(hWnd, \hyperlink{sys_2wince_2resource_8h_abc228aa8ac35a561e1333f028027a45c}{IDC\_PLSEL\_GENDER\_LIST}), 
      \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE});
534         \hyperlink{sys_2wince_2mhdlg_8c_a0772aa991694d1e706a0d7f1e8852567}{setComboBoxValue}(hWnd, \hyperlink{sys_2wince_2resource_8h_abc228aa8ac35a561e1333f028027a45c}{IDC\_PLSEL\_GENDER\_LIST}, 
      \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_ad3655bdc9c8984f4d3c4944a7a72795a}{initgend});
535     \}
536 
537     \textcolor{comment}{/* intialize alignments list */}
538     \textcolor{keywordflow}{if}( \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a66f0ee2707e5a565a25f948658362ced}{initalign}<0 || !\hyperlink{role_8c_adf8f18a510b62a0c8f43f9521e2b8cc5}{ok\_align}(\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a3b31f41da5faa08ea53d1e7ddf857088}{initrole}, 
      \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a4c946d68b3e8e39311a0d20be0027a26}{initrace}, \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_ad3655bdc9c8984f4d3c4944a7a72795a}{initgend}, \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a66f0ee2707e5a565a25f948658362ced}{initalign}) ) \{
539         \hyperlink{sys_2wince_2mhdlg_8c_a4d1bdfade06602b90d50cbdbdb45ee10}{CheckDlgButton}(hWnd, \hyperlink{sys_2wince_2resource_8h_ace047fa1a82ff9b066fb19c3198fc4c9}{IDC\_PLSEL\_ALIGN\_RANDOM}, BST\_CHECKED);
540         EnableWindow(GetDlgItem(hWnd, \hyperlink{sys_2wince_2resource_8h_a485f9115f1cc924bd4f965da012f6969}{IDC\_PLSEL\_ALIGN\_LIST}), 
      \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE});
541     \} \textcolor{keywordflow}{else} \{
542         \hyperlink{sys_2wince_2mhdlg_8c_a4d1bdfade06602b90d50cbdbdb45ee10}{CheckDlgButton}(hWnd, \hyperlink{sys_2wince_2resource_8h_ace047fa1a82ff9b066fb19c3198fc4c9}{IDC\_PLSEL\_ALIGN\_RANDOM}, BST\_UNCHECKED);
543         EnableWindow(GetDlgItem(hWnd, \hyperlink{sys_2wince_2resource_8h_a485f9115f1cc924bd4f965da012f6969}{IDC\_PLSEL\_ALIGN\_LIST}), 
      \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE});
544         \hyperlink{sys_2wince_2mhdlg_8c_a0772aa991694d1e706a0d7f1e8852567}{setComboBoxValue}(hWnd, \hyperlink{sys_2wince_2resource_8h_a485f9115f1cc924bd4f965da012f6969}{IDC\_PLSEL\_ALIGN\_LIST}, 
      \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a66f0ee2707e5a565a25f948658362ced}{initalign});
545     \}
546 \}
\end{DoxyCode}
\hypertarget{sys_2wince_2mhdlg_8c_a0772aa991694d1e706a0d7f1e8852567}{\index{sys/wince/mhdlg.\+c@{sys/wince/mhdlg.\+c}!set\+Combo\+Box\+Value@{set\+Combo\+Box\+Value}}
\index{set\+Combo\+Box\+Value@{set\+Combo\+Box\+Value}!sys/wince/mhdlg.\+c@{sys/wince/mhdlg.\+c}}
\subsubsection[{set\+Combo\+Box\+Value}]{\setlength{\rightskip}{0pt plus 5cm}void set\+Combo\+Box\+Value (
\begin{DoxyParamCaption}
\item[{H\+W\+N\+D}]{h\+Wnd, }
\item[{int}]{combo\+\_\+box, }
\item[{int}]{value}
\end{DoxyParamCaption}
)}}\label{sys_2wince_2mhdlg_8c_a0772aa991694d1e706a0d7f1e8852567}


Definition at line 467 of file mhdlg.\+c.



References index().



Referenced by plsel\+Init\+Dialog().


\begin{DoxyCode}
468 \{
469     \textcolor{keywordtype}{int} index\_max = SendDlgItemMessage(hWnd, combo\_box, CB\_GETCOUNT, 0, 0);
470     \textcolor{keywordtype}{int} \hyperlink{uudecode_8c_ac82f3cc16110a05458f2b2483236afb7}{index};
471     \textcolor{keywordtype}{int} value\_to\_set = LB\_ERR;
472     \textcolor{keywordflow}{for} (index = 0; index < index\_max; index++) \{
473         \textcolor{keywordflow}{if} (SendDlgItemMessage(hWnd, combo\_box, CB\_GETITEMDATA, (WPARAM)index, 0) == value) \{
474         value\_to\_set = \hyperlink{uudecode_8c_ac82f3cc16110a05458f2b2483236afb7}{index};
475         \textcolor{keywordflow}{break};
476         \}
477     \}
478     SendDlgItemMessage(hWnd, combo\_box, CB\_SETCURSEL, (WPARAM)value\_to\_set, 0);
479 \}
\end{DoxyCode}
