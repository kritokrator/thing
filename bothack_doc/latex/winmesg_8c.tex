\hypertarget{winmesg_8c}{\section{nethack/win/\+X11/winmesg.c File Reference}
\label{winmesg_8c}\index{nethack/win/\+X11/winmesg.\+c@{nethack/win/\+X11/winmesg.\+c}}
}
{\ttfamily \#include $<$X11/\+Intrinsic.\+h$>$}\\*
{\ttfamily \#include $<$X11/\+String\+Defs.\+h$>$}\\*
{\ttfamily \#include $<$X11/\+Shell.\+h$>$}\\*
{\ttfamily \#include $<$X11/\+Xaw/\+Cardinals.\+h$>$}\\*
{\ttfamily \#include $<$X11/\+Xaw/\+Viewport.\+h$>$}\\*
{\ttfamily \#include $<$X11/\+Xatom.\+h$>$}\\*
{\ttfamily \#include \char`\"{}xwindow.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}hack.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}win\+X.\+h\char`\"{}}\\*
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{winmesg_8c_a871513d8c7abd319565c0f9393d28f9a}{P\+R\+E\+S\+E\+R\+V\+E\+\_\+\+N\+O\+\_\+\+S\+Y\+S\+V}~/$\ast$ X11 include files may define S\+Y\+S\+V $\ast$/
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
static struct \hyperlink{structline__element}{line\+\_\+element} $\ast$ \hyperlink{winmesg_8c_a5830795b4e7ba3c95c1de461edde217b}{F\+D\+E\+C\+L} (\hyperlink{winmesg_8c_ae121b4ee3f79dc8afd622bf0b963c981}{get\+\_\+previous},(struct \hyperlink{structline__element}{line\+\_\+element} $\ast$))
\item 
static void \hyperlink{winmesg_8c_aeba5cea26c96ae7ae517b5667dc8def6}{F\+D\+E\+C\+L} (\hyperlink{winmesg_8c_a65ce3fccba84081d03cea29d93f356d5}{set\+\_\+circle\+\_\+buf},(struct \hyperlink{structmesg__info__t}{mesg\+\_\+info\+\_\+t} $\ast$, int))
\item 
static char $\ast$ \hyperlink{winmesg_8c_a36f425fcbd2d94bf761387e5c8321da2}{F\+D\+E\+C\+L} (\hyperlink{winmesg_8c_a36c506c2cc6466ce8dc4939fe0093616}{split},(char $\ast$, X\+Font\+Struct $\ast$, \hyperlink{winX_8h_ab727bca4744de99a8f4736a8c6ebbfc4}{D\+I\+M\+E\+N\+S\+I\+O\+N\+\_\+\+P}))
\item 
static void \hyperlink{winmesg_8c_add62426f915cf47485771dc7367d3c41}{F\+D\+E\+C\+L} (\hyperlink{winmesg_8c_a55e801c03adc045fe3f1e9e587e09762}{add\+\_\+line},(struct \hyperlink{structmesg__info__t}{mesg\+\_\+info\+\_\+t} $\ast$, \hyperlink{tradstdc_8h_a2c212835823e3c54a8ab6d95c652660e}{const} char $\ast$))
\item 
static void \hyperlink{winmesg_8c_a4be2d6555725a3b7556cb10d9376ca28}{F\+D\+E\+C\+L} (\hyperlink{winmesg_8c_aeecf4e82f0405fcdf16e8791d593fa17}{redraw\+\_\+message\+\_\+window},(struct \hyperlink{structxwindow}{xwindow} $\ast$))
\item 
static void \hyperlink{winmesg_8c_a57cd9c7e1f716dafe1ae9041c12f068d}{F\+D\+E\+C\+L} (\hyperlink{winmesg_8c_a593fc29a5580c1ec13755e9a98cb0165}{mesg\+\_\+check\+\_\+size\+\_\+change},(struct \hyperlink{structxwindow}{xwindow} $\ast$))
\item 
static void \hyperlink{winmesg_8c_adc65896d6480633d76c9f241aed92aea}{F\+D\+E\+C\+L} (\hyperlink{winmesg_8c_a0a3efe518d04689f155ce4057a7d5a00}{mesg\+\_\+exposed},(Widget, Xt\+Pointer, Xt\+Pointer))
\item 
static void \hyperlink{winmesg_8c_a97aa881760a9baeb93aeec644b2a5d4d}{F\+D\+E\+C\+L} (\hyperlink{winmesg_8c_ad35c2e70ffcd665524b2d067f6ff367f}{get\+\_\+gc},(Widget, struct \hyperlink{structmesg__info__t}{mesg\+\_\+info\+\_\+t} $\ast$))
\item 
static void \hyperlink{winmesg_8c_aea31b3ff1394eda7e21d7cfdb7f01fbe}{F\+D\+E\+C\+L} (\hyperlink{winmesg_8c_a0129966ae4cbb90cc410eed020eeefc0}{mesg\+\_\+resized},(Widget, Xt\+Pointer, Xt\+Pointer))
\item 
void \hyperlink{winmesg_8c_ad7d285ef036dcbb192b821ac4828a1ef}{set\+\_\+message\+\_\+slider} (struct \hyperlink{structxwindow}{xwindow} $\ast$wp)
\item 
void \hyperlink{winmesg_8c_a9b472a60fff40069ef06ff7dfe87bb4d}{create\+\_\+message\+\_\+window} (struct \hyperlink{structxwindow}{xwindow} $\ast$wp, \hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} create\+\_\+popup, Widget parent)
\item 
void \hyperlink{winmesg_8c_a391dd241d24df76d9ff329b2288fad2d}{destroy\+\_\+message\+\_\+window} (struct \hyperlink{structxwindow}{xwindow} $\ast$wp)
\item 
void \hyperlink{winmesg_8c_aaece8138d8b0526926b8f0e913b4132b}{display\+\_\+message\+\_\+window} (struct \hyperlink{structxwindow}{xwindow} $\ast$wp)
\item 
void \hyperlink{winmesg_8c_aba2df503c2427cf659537de83b7fb436}{append\+\_\+message} (struct \hyperlink{structxwindow}{xwindow} $\ast$wp, \hyperlink{tradstdc_8h_a2c212835823e3c54a8ab6d95c652660e}{const} char $\ast$str)
\item 
static struct \hyperlink{structline__element}{line\+\_\+element} $\ast$ \hyperlink{winmesg_8c_ae121b4ee3f79dc8afd622bf0b963c981}{get\+\_\+previous} (struct \hyperlink{structline__element}{line\+\_\+element} $\ast$mark)
\item 
static void \hyperlink{winmesg_8c_a65ce3fccba84081d03cea29d93f356d5}{set\+\_\+circle\+\_\+buf} (struct \hyperlink{structmesg__info__t}{mesg\+\_\+info\+\_\+t} $\ast$mesg\+\_\+info, int \hyperlink{wingem1_8c_a66e3fedede6aa372e5196e55e5e8d5c1}{count})
\item 
static char $\ast$ \hyperlink{winmesg_8c_a36c506c2cc6466ce8dc4939fe0093616}{split} (char $\ast$s, X\+Font\+Struct $\ast$fs, Dimension pixel\+\_\+width)
\item 
static void \hyperlink{winmesg_8c_a55e801c03adc045fe3f1e9e587e09762}{add\+\_\+line} (struct \hyperlink{structmesg__info__t}{mesg\+\_\+info\+\_\+t} $\ast$mesg\+\_\+info, \hyperlink{tradstdc_8h_a2c212835823e3c54a8ab6d95c652660e}{const} char $\ast$s)
\item 
void \hyperlink{winmesg_8c_a031c4f45a4142522189f32dcdb5df12f}{set\+\_\+last\+\_\+pause} (struct \hyperlink{structxwindow}{xwindow} $\ast$wp)
\item 
static void \hyperlink{winmesg_8c_aeecf4e82f0405fcdf16e8791d593fa17}{redraw\+\_\+message\+\_\+window} (struct \hyperlink{structxwindow}{xwindow} $\ast$wp)
\item 
static void \hyperlink{winmesg_8c_a593fc29a5580c1ec13755e9a98cb0165}{mesg\+\_\+check\+\_\+size\+\_\+change} (struct \hyperlink{structxwindow}{xwindow} $\ast$wp)
\item 
static void \hyperlink{winmesg_8c_a0a3efe518d04689f155ce4057a7d5a00}{mesg\+\_\+exposed} (Widget w, Xt\+Pointer client\+\_\+data, Xt\+Pointer widget\+\_\+data)
\item 
static void \hyperlink{winmesg_8c_ad35c2e70ffcd665524b2d067f6ff367f}{get\+\_\+gc} (Widget w, struct \hyperlink{structmesg__info__t}{mesg\+\_\+info\+\_\+t} $\ast$mesg\+\_\+info)
\item 
static void \hyperlink{winmesg_8c_a0129966ae4cbb90cc410eed020eeefc0}{mesg\+\_\+resized} (Widget w, Xt\+Pointer client\+\_\+data, Xt\+Pointer call\+\_\+data)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static char \hyperlink{winmesg_8c_a604b7c1e20a008ddafbae6aadeb37d33}{mesg\+\_\+translations} \mbox{[}$\,$\mbox{]}
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\hypertarget{winmesg_8c_a871513d8c7abd319565c0f9393d28f9a}{\index{winmesg.\+c@{winmesg.\+c}!P\+R\+E\+S\+E\+R\+V\+E\+\_\+\+N\+O\+\_\+\+S\+Y\+S\+V@{P\+R\+E\+S\+E\+R\+V\+E\+\_\+\+N\+O\+\_\+\+S\+Y\+S\+V}}
\index{P\+R\+E\+S\+E\+R\+V\+E\+\_\+\+N\+O\+\_\+\+S\+Y\+S\+V@{P\+R\+E\+S\+E\+R\+V\+E\+\_\+\+N\+O\+\_\+\+S\+Y\+S\+V}!winmesg.\+c@{winmesg.\+c}}
\subsubsection[{P\+R\+E\+S\+E\+R\+V\+E\+\_\+\+N\+O\+\_\+\+S\+Y\+S\+V}]{\setlength{\rightskip}{0pt plus 5cm}\#define P\+R\+E\+S\+E\+R\+V\+E\+\_\+\+N\+O\+\_\+\+S\+Y\+S\+V~/$\ast$ X11 include files may define S\+Y\+S\+V $\ast$/}}\label{winmesg_8c_a871513d8c7abd319565c0f9393d28f9a}


Definition at line 16 of file winmesg.\+c.



\subsection{Function Documentation}
\hypertarget{winmesg_8c_a55e801c03adc045fe3f1e9e587e09762}{\index{winmesg.\+c@{winmesg.\+c}!add\+\_\+line@{add\+\_\+line}}
\index{add\+\_\+line@{add\+\_\+line}!winmesg.\+c@{winmesg.\+c}}
\subsubsection[{add\+\_\+line}]{\setlength{\rightskip}{0pt plus 5cm}static void add\+\_\+line (
\begin{DoxyParamCaption}
\item[{struct {\bf mesg\+\_\+info\+\_\+t} $\ast$}]{mesg\+\_\+info, }
\item[{{\bf const} char $\ast$}]{s}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{winmesg_8c_a55e801c03adc045fe3f1e9e587e09762}


Definition at line 388 of file winmesg.\+c.



References alloc(), line\+\_\+element\+::buf\+\_\+length, free(), line\+\_\+element\+::line, line\+\_\+element\+::str\+\_\+length, and Strcpy.



Referenced by append\+\_\+message().


\begin{DoxyCode}
391 \{
392     \textcolor{keyword}{register} \textcolor{keyword}{struct }\hyperlink{structline__element}{line\_element} *curr = mesg\_info->\hyperlink{structmesg__info__t_a9ec2627ed09c84d0871571ab1b004961}{head};
393     \textcolor{keyword}{register} \textcolor{keywordtype}{int} new\_line\_length = strlen(s);
394 
395     \textcolor{keywordflow}{if} (new\_line\_length + 1 > curr->\hyperlink{structline__element_a57475a80631202b2a3400477c182308d}{buf\_length}) \{
396     \textcolor{keywordflow}{if} (curr->\hyperlink{structline__element_a684c95e23c7d50d2f2152c82c137d66b}{line}) \hyperlink{winproto_8h_a4bbec68d324de17b99fecede64b383ba}{free}(curr->\hyperlink{structline__element_a684c95e23c7d50d2f2152c82c137d66b}{line});   \textcolor{comment}{/* free old line */}
397 
398     curr->\hyperlink{structline__element_a57475a80631202b2a3400477c182308d}{buf\_length} = new\_line\_length + 1;
399     curr->\hyperlink{structline__element_a684c95e23c7d50d2f2152c82c137d66b}{line} = (\textcolor{keywordtype}{char} *) \hyperlink{txt2iff_8c_ae273cbdce4cd64a076220ad06c41a5a1}{alloc}((\textcolor{keywordtype}{unsigned})curr->\hyperlink{structline__element_a57475a80631202b2a3400477c182308d}{buf\_length});
400     \}
401 
402     \hyperlink{global_8h_add22f733d1f2c380499f495068e42b7c}{Strcpy}(curr->\hyperlink{structline__element_a684c95e23c7d50d2f2152c82c137d66b}{line}, s);            \textcolor{comment}{/* copy info */}
403     curr->\hyperlink{structline__element_a6d24c9bca6243e9975bb8150ab0865e5}{str\_length} = new\_line\_length;       \textcolor{comment}{/* save string length */}
404 
405     mesg\_info->\hyperlink{structmesg__info__t_a9ec2627ed09c84d0871571ab1b004961}{head} = mesg\_info->\hyperlink{structmesg__info__t_a9ec2627ed09c84d0871571ab1b004961}{head}->\hyperlink{structline__element_a1cdd40d4dd6f8b3fe87bd77df90afbaf}{next};    \textcolor{comment}{/* move head to next line */}
406     mesg\_info->\hyperlink{structmesg__info__t_a08f16d5343387918e19cb9812303a4c7}{dirty} = True;           \textcolor{comment}{/* we have undrawn lines */}
407 \}
\end{DoxyCode}
\hypertarget{winmesg_8c_aba2df503c2427cf659537de83b7fb436}{\index{winmesg.\+c@{winmesg.\+c}!append\+\_\+message@{append\+\_\+message}}
\index{append\+\_\+message@{append\+\_\+message}!winmesg.\+c@{winmesg.\+c}}
\subsubsection[{append\+\_\+message}]{\setlength{\rightskip}{0pt plus 5cm}void append\+\_\+message (
\begin{DoxyParamCaption}
\item[{struct {\bf xwindow} $\ast$}]{wp, }
\item[{{\bf const} char $\ast$}]{str}
\end{DoxyParamCaption}
)}}\label{winmesg_8c_aba2df503c2427cf659537de83b7fb436}


Definition at line 236 of file winmesg.\+c.



References add\+\_\+line(), buf, B\+U\+F\+S\+Z, split(), and Strcpy.



Referenced by X11\+\_\+putstr().


\begin{DoxyCode}
239 \{
240     \textcolor{keywordtype}{char} *mark, *remainder, \hyperlink{xpm2iff_8c_a6f4b9854141692d23b0d072176044ca6}{buf}[\hyperlink{global_8h_ab26c26cbf7a0c97d8960c3cfb413f882}{BUFSZ}];
241 
242     \textcolor{keywordflow}{if} (!str) \textcolor{keywordflow}{return};
243 
244     \hyperlink{global_8h_add22f733d1f2c380499f495068e42b7c}{Strcpy}(buf, str); \textcolor{comment}{/* we might mark it up */}
245 
246     remainder = \hyperlink{xpm2iff_8c_a6f4b9854141692d23b0d072176044ca6}{buf};
247     \textcolor{keywordflow}{do} \{
248     mark = remainder;
249     remainder = \hyperlink{winmesg_8c_a36c506c2cc6466ce8dc4939fe0093616}{split}(mark, wp->mesg\_information->fs, wp->\hyperlink{structxwindow_a8f270ead0a1ab2847febd35c4da5afe6}{pixel\_width});
250     \hyperlink{winmesg_8c_a55e801c03adc045fe3f1e9e587e09762}{add\_line}(wp->mesg\_information, mark);
251     \} \textcolor{keywordflow}{while} (remainder);
252 \}
\end{DoxyCode}
\hypertarget{winmesg_8c_a9b472a60fff40069ef06ff7dfe87bb4d}{\index{winmesg.\+c@{winmesg.\+c}!create\+\_\+message\+\_\+window@{create\+\_\+message\+\_\+window}}
\index{create\+\_\+message\+\_\+window@{create\+\_\+message\+\_\+window}!winmesg.\+c@{winmesg.\+c}}
\subsubsection[{create\+\_\+message\+\_\+window}]{\setlength{\rightskip}{0pt plus 5cm}void create\+\_\+message\+\_\+window (
\begin{DoxyParamCaption}
\item[{struct {\bf xwindow} $\ast$}]{wp, }
\item[{{\bf boolean}}]{create\+\_\+popup, }
\item[{Widget}]{parent}
\end{DoxyParamCaption}
)}}\label{winmesg_8c_a9b472a60fff40069ef06ff7dfe87bb4d}


Definition at line 71 of file winmesg.\+c.



References alloc(), app\+Resources, mesg\+\_\+info\+\_\+t\+::char\+\_\+ascent, mesg\+\_\+info\+\_\+t\+::char\+\_\+height, mesg\+\_\+info\+\_\+t\+::char\+\_\+lbearing, mesg\+\_\+info\+\_\+t\+::char\+\_\+width, D\+E\+F\+A\+U\+L\+T\+\_\+\+M\+E\+S\+S\+A\+G\+E\+\_\+\+W\+I\+D\+T\+H, mesg\+\_\+info\+\_\+t\+::dirty, mesg\+\_\+info\+\_\+t\+::fs, get\+\_\+gc(), mesg\+\_\+info\+\_\+t\+::head, iflags, mesg\+\_\+info\+\_\+t\+::last\+\_\+pause, mesg\+\_\+info\+\_\+t\+::last\+\_\+pause\+\_\+head, mesg\+\_\+info\+\_\+t\+::line\+\_\+here, M\+A\+X\+\_\+\+H\+I\+S\+T\+O\+R\+Y, mesg\+\_\+exposed(), mesg\+\_\+resized(), App\+Resources\+::message\+\_\+lines, instance\+\_\+flags\+::msg\+\_\+history, N\+H\+W\+\_\+\+M\+E\+S\+S\+A\+G\+E, mesg\+\_\+info\+\_\+t\+::num\+\_\+lines, set\+\_\+circle\+\_\+buf(), toplevel, mesg\+\_\+info\+\_\+t\+::viewport\+\_\+height, mesg\+\_\+info\+\_\+t\+::viewport\+\_\+width, window\+Widget\+Class, wm\+\_\+delete\+\_\+window, Xt\+Nexpose\+Callback, and Xt\+Nresize\+Callback.



Referenced by init\+\_\+standard\+\_\+windows(), and X11\+\_\+create\+\_\+nhwindow().


\begin{DoxyCode}
75 \{
76     Arg args[8];
77     Cardinal num\_args;
78     Widget viewport;
79     \textcolor{keyword}{struct }\hyperlink{structmesg__info__t}{mesg\_info\_t} *mesg\_info;
80 
81     wp->\hyperlink{structxwindow_ae5bcb513f6ce2c64b180514ee0287c23}{type} = \hyperlink{wintype_8h_ab3d471e84a363992b5a483392d0b2389}{NHW\_MESSAGE};
82 
83     wp->mesg\_information = mesg\_info =
84             (\textcolor{keyword}{struct }\hyperlink{structmesg__info__t}{mesg\_info\_t} *) \hyperlink{txt2iff_8c_ae273cbdce4cd64a076220ad06c41a5a1}{alloc}(\textcolor{keyword}{sizeof}(\textcolor{keyword}{struct} 
      \hyperlink{structmesg__info__t}{mesg\_info\_t}));
85 
86     mesg\_info->\hyperlink{structmesg__info__t_a3ac4711a90ce72d56e435d5d44167932}{fs} = 0;
87     mesg\_info->\hyperlink{structmesg__info__t_aba23aab1261a0730bd4fef133f902d81}{num\_lines} = 0;
88     mesg\_info->\hyperlink{structmesg__info__t_a9ec2627ed09c84d0871571ab1b004961}{head} = mesg\_info->\hyperlink{structmesg__info__t_afd9b6c059ba606c7181a04036e0a1d56}{line\_here} = mesg\_info->\hyperlink{structmesg__info__t_a45ba0dcdbeb9c6492d19f4712b003254}{last\_pause} =
89             mesg\_info->\hyperlink{structmesg__info__t_af8c5f5bc77a707da17810c00e7dbb0a4}{last\_pause\_head} = (\textcolor{keyword}{struct }\hyperlink{structline__element}{line\_element} *) 0;
90     mesg\_info->\hyperlink{structmesg__info__t_a08f16d5343387918e19cb9812303a4c7}{dirty} = False;
91     mesg\_info->\hyperlink{structmesg__info__t_ae15ee1ff248f494358a3acafb446c19d}{viewport\_width} = mesg\_info->\hyperlink{structmesg__info__t_a305a331f90a384bcdd196ee554eb4402}{viewport\_height} = 0;
92 
93     \textcolor{keywordflow}{if} (\hyperlink{flag_8h_ae9cd54937dcb00432131e49e5e324075}{iflags}.\hyperlink{structinstance__flags_adbf4e331046e9ace346e832fc8a59074}{msg\_history} < \hyperlink{winX_8h_ade4731438ebdc0f73c31f52f6a64e032}{appResources}.
      \hyperlink{structAppResources_acab8a58e15d8d2122aeba73f0861c22b}{message\_lines})
94     \hyperlink{flag_8h_ae9cd54937dcb00432131e49e5e324075}{iflags}.\hyperlink{structinstance__flags_adbf4e331046e9ace346e832fc8a59074}{msg\_history} = \hyperlink{winX_8h_ade4731438ebdc0f73c31f52f6a64e032}{appResources}.\hyperlink{structAppResources_acab8a58e15d8d2122aeba73f0861c22b}{message\_lines};
95     \textcolor{keywordflow}{if} (\hyperlink{flag_8h_ae9cd54937dcb00432131e49e5e324075}{iflags}.\hyperlink{structinstance__flags_adbf4e331046e9ace346e832fc8a59074}{msg\_history} > \hyperlink{winX_8h_abf8d8994f09509f9e061f5bf82daf4cd}{MAX\_HISTORY})   \textcolor{comment}{/* a sanity check */}
96     \hyperlink{flag_8h_ae9cd54937dcb00432131e49e5e324075}{iflags}.\hyperlink{structinstance__flags_adbf4e331046e9ace346e832fc8a59074}{msg\_history} = \hyperlink{winX_8h_abf8d8994f09509f9e061f5bf82daf4cd}{MAX\_HISTORY};
97 
98     \hyperlink{winmesg_8c_a65ce3fccba84081d03cea29d93f356d5}{set\_circle\_buf}(mesg\_info, (\textcolor{keywordtype}{int}) \hyperlink{flag_8h_ae9cd54937dcb00432131e49e5e324075}{iflags}.\hyperlink{structinstance__flags_adbf4e331046e9ace346e832fc8a59074}{msg\_history});
99 
100     \textcolor{comment}{/* Create a popup that becomes the parent. */}
101     \textcolor{keywordflow}{if} (create\_popup) \{
102     num\_args = 0;
103     XtSetArg(args[num\_args], XtNallowShellResize, True); num\_args++;
104 
105     wp->\hyperlink{structxwindow_a87808ea4214ca268f6aa2df79301713e}{popup} = parent = XtCreatePopupShell(\textcolor{stringliteral}{"message\_popup"},
106                     topLevelShellWidgetClass,
107                     \hyperlink{winX_8h_af9f3bbc581ee507b6e668507c0a53bbe}{toplevel}, args, num\_args);
108     \textcolor{comment}{/*}
109 \textcolor{comment}{     * If we're here, then this is an auxiliary message window.  If we're}
110 \textcolor{comment}{     * cancelled via a delete window message, we should just pop down.}
111 \textcolor{comment}{     */}
112     \}
113 
114     \textcolor{comment}{/*}
115 \textcolor{comment}{     * Create the viewport.  We only want the vertical scroll bar ever to be}
116 \textcolor{comment}{     * visible.  If we allow the horizontal scrollbar to be visible it will}
117 \textcolor{comment}{     * always be visible, due to the stupid way the Athena viewport operates.}
118 \textcolor{comment}{     */}
119     num\_args = 0;
120     XtSetArg(args[num\_args], XtNallowVert,  True);      num\_args++;
121     viewport = XtCreateManagedWidget(
122             \textcolor{stringliteral}{"mesg\_viewport"},    \textcolor{comment}{/* name */}
123             viewportWidgetClass,    \textcolor{comment}{/* widget class from Window.h */}
124             parent,         \textcolor{comment}{/* parent widget */}
125             args,           \textcolor{comment}{/* set some values */}
126             num\_args);      \textcolor{comment}{/* number of values to set */}
127 
128     \textcolor{comment}{/*}
129 \textcolor{comment}{     * Create a message window.  We will change the width and height once}
130 \textcolor{comment}{     * we know what font we are using.}
131 \textcolor{comment}{     */}
132     num\_args = 0;
133     \textcolor{keywordflow}{if} (!create\_popup) \{
134     XtSetArg(args[num\_args], XtNtranslations,
135          XtParseTranslationTable(\hyperlink{winmesg_8c_a604b7c1e20a008ddafbae6aadeb37d33}{mesg\_translations}));  num\_args++;
136     \}
137     wp->\hyperlink{structxwindow_a02c943a987ff220921a86f40fc5fdfda}{w} = XtCreateManagedWidget(
138         \textcolor{stringliteral}{"message"},      \textcolor{comment}{/* name */}
139         \hyperlink{xwindow_8h_ac26290ed68699f657f8270a3b9527fbf}{windowWidgetClass}, \textcolor{comment}{/* widget class from Window.h */}
140         viewport,       \textcolor{comment}{/* parent widget */}
141         args,           \textcolor{comment}{/* set some values */}
142         num\_args);      \textcolor{comment}{/* number of values to set */}
143 
144     XtAddCallback(wp->\hyperlink{structxwindow_a02c943a987ff220921a86f40fc5fdfda}{w}, \hyperlink{xwindow_8h_a77f1e01f5cfe4720cf7cc1fdfdb01ece}{XtNexposeCallback}, \hyperlink{winmesg_8c_a0a3efe518d04689f155ce4057a7d5a00}{mesg\_exposed}, (XtPointer) 0);
145 
146     \textcolor{comment}{/*}
147 \textcolor{comment}{     * Now adjust the height and width of the message window so that it}
148 \textcolor{comment}{     * is appResources.message\_lines high and DEFAULT\_MESSAGE\_WIDTH wide.}
149 \textcolor{comment}{     */}
150 
151     \textcolor{comment}{/* Get the font information. */}
152     num\_args = 0;
153     XtSetArg(args[num\_args], XtNfont, &mesg\_info->\hyperlink{structmesg__info__t_a3ac4711a90ce72d56e435d5d44167932}{fs});           num\_args++;
154     XtGetValues(wp->\hyperlink{structxwindow_a02c943a987ff220921a86f40fc5fdfda}{w}, args, num\_args);
155 
156     \textcolor{comment}{/* Save character information for fast use later. */}
157     mesg\_info->\hyperlink{structmesg__info__t_a9d448d94905365fda9859981ae2d07a1}{char\_width}    = mesg\_info->\hyperlink{structmesg__info__t_a3ac4711a90ce72d56e435d5d44167932}{fs}->max\_bounds.width;
158     mesg\_info->\hyperlink{structmesg__info__t_af7ceb1e904683a4ef31352aa7697390e}{char\_height}   = mesg\_info->\hyperlink{structmesg__info__t_a3ac4711a90ce72d56e435d5d44167932}{fs}->max\_bounds.ascent +
159                         mesg\_info->\hyperlink{structmesg__info__t_a3ac4711a90ce72d56e435d5d44167932}{fs}->max\_bounds.descent;
160     mesg\_info->\hyperlink{structmesg__info__t_a737e633cc653b3e01eaf308564d362c3}{char\_ascent}   = mesg\_info->\hyperlink{structmesg__info__t_a3ac4711a90ce72d56e435d5d44167932}{fs}->max\_bounds.ascent;
161     mesg\_info->\hyperlink{structmesg__info__t_a8533deec9572890a70ba02b6cae67951}{char\_lbearing} = -mesg\_info->\hyperlink{structmesg__info__t_a3ac4711a90ce72d56e435d5d44167932}{fs}->min\_bounds.lbearing;
162 
163     \hyperlink{winmesg_8c_ad35c2e70ffcd665524b2d067f6ff367f}{get\_gc}(wp->\hyperlink{structxwindow_a02c943a987ff220921a86f40fc5fdfda}{w}, mesg\_info);
164 
165     wp->\hyperlink{structxwindow_aab5493256f7f6baa33fe878ab6c403f5}{pixel\_height} = ((int)\hyperlink{flag_8h_ae9cd54937dcb00432131e49e5e324075}{iflags}.\hyperlink{structinstance__flags_adbf4e331046e9ace346e832fc8a59074}{msg\_history}) * mesg\_info->
      \hyperlink{structmesg__info__t_af7ceb1e904683a4ef31352aa7697390e}{char\_height};
166 
167     \textcolor{comment}{/* If a variable spaced font, only use 2/3 of the default size */}
168     \textcolor{keywordflow}{if} (mesg\_info->\hyperlink{structmesg__info__t_a3ac4711a90ce72d56e435d5d44167932}{fs}->min\_bounds.width != mesg\_info->\hyperlink{structmesg__info__t_a3ac4711a90ce72d56e435d5d44167932}{fs}->max\_bounds.width) \{
169     wp->\hyperlink{structxwindow_a8f270ead0a1ab2847febd35c4da5afe6}{pixel\_width}  = ((2*\hyperlink{winX_8h_a0abdf62ac99671722a030cbbae1b33b8}{DEFAULT\_MESSAGE\_WIDTH})/3) *
170                     mesg\_info->\hyperlink{structmesg__info__t_a3ac4711a90ce72d56e435d5d44167932}{fs}->max\_bounds.width;
171     \} \textcolor{keywordflow}{else}
172     wp->\hyperlink{structxwindow_a8f270ead0a1ab2847febd35c4da5afe6}{pixel\_width}  = (\hyperlink{winX_8h_a0abdf62ac99671722a030cbbae1b33b8}{DEFAULT\_MESSAGE\_WIDTH} *
173                     mesg\_info->\hyperlink{structmesg__info__t_a3ac4711a90ce72d56e435d5d44167932}{fs}->max\_bounds.width);
174 
175     \textcolor{comment}{/* Set the new width and height. */}
176     num\_args = 0;
177     XtSetArg(args[num\_args], XtNwidth,        wp->\hyperlink{structxwindow_a8f270ead0a1ab2847febd35c4da5afe6}{pixel\_width});  num\_args++;
178     XtSetArg(args[num\_args], XtNheight,       wp->\hyperlink{structxwindow_aab5493256f7f6baa33fe878ab6c403f5}{pixel\_height}); num\_args++;
179     XtSetValues(wp->\hyperlink{structxwindow_a02c943a987ff220921a86f40fc5fdfda}{w}, args, num\_args);
180 
181     \textcolor{comment}{/* make sure viewport height makes sense before realizing it */}
182     num\_args = 0;
183     mesg\_info->\hyperlink{structmesg__info__t_a305a331f90a384bcdd196ee554eb4402}{viewport\_height} =
184     \hyperlink{winX_8h_ade4731438ebdc0f73c31f52f6a64e032}{appResources}.\hyperlink{structAppResources_acab8a58e15d8d2122aeba73f0861c22b}{message\_lines} * mesg\_info->\hyperlink{structmesg__info__t_af7ceb1e904683a4ef31352aa7697390e}{char\_height};
185     XtSetArg(args[num\_args], XtNheight, mesg\_info->\hyperlink{structmesg__info__t_a305a331f90a384bcdd196ee554eb4402}{viewport\_height});num\_args++;
186     XtSetValues(viewport, args, num\_args);
187 
188     XtAddCallback(wp->\hyperlink{structxwindow_a02c943a987ff220921a86f40fc5fdfda}{w}, \hyperlink{xwindow_8h_ad4817b3238bfe661068e0d1b5bbe778e}{XtNresizeCallback}, \hyperlink{winmesg_8c_a0129966ae4cbb90cc410eed020eeefc0}{mesg\_resized}, (XtPointer) 0);
189 
190     \textcolor{comment}{/*}
191 \textcolor{comment}{     * If we have created our own popup, then realize it so that the}
192 \textcolor{comment}{     * viewport is also realized.}
193 \textcolor{comment}{     */}
194     \textcolor{keywordflow}{if} (create\_popup) \{
195     XtRealizeWidget(wp->\hyperlink{structxwindow_a87808ea4214ca268f6aa2df79301713e}{popup});
196     XSetWMProtocols(XtDisplay(wp->\hyperlink{structxwindow_a87808ea4214ca268f6aa2df79301713e}{popup}), XtWindow(wp->\hyperlink{structxwindow_a87808ea4214ca268f6aa2df79301713e}{popup}),
197             &\hyperlink{winX_8h_ae061cf257d8ee1f9907008f160d340b7}{wm\_delete\_window}, 1);
198     \}
199 \}
\end{DoxyCode}
\hypertarget{winmesg_8c_a391dd241d24df76d9ff329b2288fad2d}{\index{winmesg.\+c@{winmesg.\+c}!destroy\+\_\+message\+\_\+window@{destroy\+\_\+message\+\_\+window}}
\index{destroy\+\_\+message\+\_\+window@{destroy\+\_\+message\+\_\+window}!winmesg.\+c@{winmesg.\+c}}
\subsubsection[{destroy\+\_\+message\+\_\+window}]{\setlength{\rightskip}{0pt plus 5cm}void destroy\+\_\+message\+\_\+window (
\begin{DoxyParamCaption}
\item[{struct {\bf xwindow} $\ast$}]{wp}
\end{DoxyParamCaption}
)}}\label{winmesg_8c_a391dd241d24df76d9ff329b2288fad2d}


Definition at line 203 of file winmesg.\+c.



References free(), mesg\+\_\+exposed(), nh\+\_\+\+Xt\+Popdown(), N\+H\+W\+\_\+\+N\+O\+N\+E, set\+\_\+circle\+\_\+buf(), and Xt\+Nexpose\+Callback.



Referenced by X11\+\_\+destroy\+\_\+nhwindow().


\begin{DoxyCode}
205 \{
206     \textcolor{keywordflow}{if} (wp->\hyperlink{structxwindow_a87808ea4214ca268f6aa2df79301713e}{popup}) \{
207     \hyperlink{winX_8c_ab9193a5900f3ec10f906ceda8baa2bc9}{nh\_XtPopdown}(wp->\hyperlink{structxwindow_a87808ea4214ca268f6aa2df79301713e}{popup});
208     \textcolor{keywordflow}{if} (!wp->\hyperlink{structxwindow_aa386fb9cd6e2a29ee3df76aa4307c401}{keep\_window})
209         XtDestroyWidget(wp->\hyperlink{structxwindow_a87808ea4214ca268f6aa2df79301713e}{popup}),  wp->\hyperlink{structxwindow_a87808ea4214ca268f6aa2df79301713e}{popup} = (Widget)0;
210     \}
211     \textcolor{keywordflow}{if} (wp->mesg\_information) \{
212     \hyperlink{winmesg_8c_a65ce3fccba84081d03cea29d93f356d5}{set\_circle\_buf}(wp->mesg\_information, 0);  \textcolor{comment}{/* free buffer list */}
213     \hyperlink{winproto_8h_a4bbec68d324de17b99fecede64b383ba}{free}((\hyperlink{tradstdc_8h_ad4a7dab7269b4b00e3c7c7d2e66f31cd}{genericptr\_t})wp->mesg\_information),  wp->mesg\_information = 0;
214     \}
215     \textcolor{keywordflow}{if} (wp->\hyperlink{structxwindow_aa386fb9cd6e2a29ee3df76aa4307c401}{keep\_window})
216     XtRemoveCallback(wp->\hyperlink{structxwindow_a02c943a987ff220921a86f40fc5fdfda}{w}, \hyperlink{xwindow_8h_a77f1e01f5cfe4720cf7cc1fdfdb01ece}{XtNexposeCallback}, \hyperlink{winmesg_8c_a0a3efe518d04689f155ce4057a7d5a00}{mesg\_exposed}, (XtPointer)0);
217     \textcolor{keywordflow}{else}
218     wp->\hyperlink{structxwindow_ae5bcb513f6ce2c64b180514ee0287c23}{type} = \hyperlink{winX_8h_ad149374e5170c08d2036a33dbf0f7b23}{NHW\_NONE};
219 \}
\end{DoxyCode}
\hypertarget{winmesg_8c_aaece8138d8b0526926b8f0e913b4132b}{\index{winmesg.\+c@{winmesg.\+c}!display\+\_\+message\+\_\+window@{display\+\_\+message\+\_\+window}}
\index{display\+\_\+message\+\_\+window@{display\+\_\+message\+\_\+window}!winmesg.\+c@{winmesg.\+c}}
\subsubsection[{display\+\_\+message\+\_\+window}]{\setlength{\rightskip}{0pt plus 5cm}void display\+\_\+message\+\_\+window (
\begin{DoxyParamCaption}
\item[{struct {\bf xwindow} $\ast$}]{wp}
\end{DoxyParamCaption}
)}}\label{winmesg_8c_aaece8138d8b0526926b8f0e913b4132b}


Definition at line 224 of file winmesg.\+c.



References redraw\+\_\+message\+\_\+window().



Referenced by X11\+\_\+display\+\_\+nhwindow(), X11\+\_\+mark\+\_\+synch(), and X11\+\_\+yn\+\_\+function().


\begin{DoxyCode}
226 \{
227     \textcolor{keywordflow}{if} (wp->mesg\_information->dirty) \hyperlink{winmesg_8c_aeecf4e82f0405fcdf16e8791d593fa17}{redraw\_message\_window}(wp);
228 \}
\end{DoxyCode}
\hypertarget{winmesg_8c_a5830795b4e7ba3c95c1de461edde217b}{\index{winmesg.\+c@{winmesg.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!winmesg.\+c@{winmesg.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}static struct {\bf line\+\_\+element}$\ast$ F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf get\+\_\+previous}}]{, }
\item[{(struct {\bf line\+\_\+element} $\ast$)}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{winmesg_8c_a5830795b4e7ba3c95c1de461edde217b}
\hypertarget{winmesg_8c_aeba5cea26c96ae7ae517b5667dc8def6}{\index{winmesg.\+c@{winmesg.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!winmesg.\+c@{winmesg.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}static void F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf set\+\_\+circle\+\_\+buf}}]{, }
\item[{(struct {\bf mesg\+\_\+info\+\_\+t} $\ast$, int)}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{winmesg_8c_aeba5cea26c96ae7ae517b5667dc8def6}
\hypertarget{winmesg_8c_a36f425fcbd2d94bf761387e5c8321da2}{\index{winmesg.\+c@{winmesg.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!winmesg.\+c@{winmesg.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}static char$\ast$ F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf split}}]{, }
\item[{(char $\ast$, X\+Font\+Struct $\ast$, {\bf D\+I\+M\+E\+N\+S\+I\+O\+N\+\_\+\+P})}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{winmesg_8c_a36f425fcbd2d94bf761387e5c8321da2}
\hypertarget{winmesg_8c_add62426f915cf47485771dc7367d3c41}{\index{winmesg.\+c@{winmesg.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!winmesg.\+c@{winmesg.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}static void F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf add\+\_\+line}}]{, }
\item[{(struct {\bf mesg\+\_\+info\+\_\+t} $\ast$, {\bf const} char $\ast$)}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{winmesg_8c_add62426f915cf47485771dc7367d3c41}
\hypertarget{winmesg_8c_a4be2d6555725a3b7556cb10d9376ca28}{\index{winmesg.\+c@{winmesg.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!winmesg.\+c@{winmesg.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}static void F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf redraw\+\_\+message\+\_\+window}}]{, }
\item[{(struct {\bf xwindow} $\ast$)}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{winmesg_8c_a4be2d6555725a3b7556cb10d9376ca28}
\hypertarget{winmesg_8c_a57cd9c7e1f716dafe1ae9041c12f068d}{\index{winmesg.\+c@{winmesg.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!winmesg.\+c@{winmesg.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}static void F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf mesg\+\_\+check\+\_\+size\+\_\+change}}]{, }
\item[{(struct {\bf xwindow} $\ast$)}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{winmesg_8c_a57cd9c7e1f716dafe1ae9041c12f068d}
\hypertarget{winmesg_8c_adc65896d6480633d76c9f241aed92aea}{\index{winmesg.\+c@{winmesg.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!winmesg.\+c@{winmesg.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}static void F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf mesg\+\_\+exposed}}]{, }
\item[{(Widget, Xt\+Pointer, Xt\+Pointer)}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{winmesg_8c_adc65896d6480633d76c9f241aed92aea}
\hypertarget{winmesg_8c_a97aa881760a9baeb93aeec644b2a5d4d}{\index{winmesg.\+c@{winmesg.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!winmesg.\+c@{winmesg.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}static void F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf get\+\_\+gc}}]{, }
\item[{(Widget, struct {\bf mesg\+\_\+info\+\_\+t} $\ast$)}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{winmesg_8c_a97aa881760a9baeb93aeec644b2a5d4d}
\hypertarget{winmesg_8c_aea31b3ff1394eda7e21d7cfdb7f01fbe}{\index{winmesg.\+c@{winmesg.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!winmesg.\+c@{winmesg.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}static void F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf mesg\+\_\+resized}}]{, }
\item[{(Widget, Xt\+Pointer, Xt\+Pointer)}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{winmesg_8c_aea31b3ff1394eda7e21d7cfdb7f01fbe}
\hypertarget{winmesg_8c_ad35c2e70ffcd665524b2d067f6ff367f}{\index{winmesg.\+c@{winmesg.\+c}!get\+\_\+gc@{get\+\_\+gc}}
\index{get\+\_\+gc@{get\+\_\+gc}!winmesg.\+c@{winmesg.\+c}}
\subsubsection[{get\+\_\+gc}]{\setlength{\rightskip}{0pt plus 5cm}static void get\+\_\+gc (
\begin{DoxyParamCaption}
\item[{Widget}]{w, }
\item[{struct {\bf mesg\+\_\+info\+\_\+t} $\ast$}]{mesg\+\_\+info}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{winmesg_8c_ad35c2e70ffcd665524b2d067f6ff367f}


Definition at line 558 of file winmesg.\+c.



References mesg\+\_\+info\+\_\+t\+::gc, and Window\+Font().



Referenced by create\+\_\+message\+\_\+window().


\begin{DoxyCode}
561 \{
562     XGCValues values;
563     XtGCMask mask = GCFunction | GCForeground | GCBackground | GCFont;
564     Pixel fgpixel, bgpixel;
565     Arg arg[2];
566 
567     XtSetArg(arg[0], XtNforeground, &fgpixel);
568     XtSetArg(arg[1], XtNbackground, &bgpixel);
569     XtGetValues(w, arg, TWO);
570 
571     values.foreground = fgpixel;
572     values.background = bgpixel;
573     values.function   = GXcopy;
574     values.font       = \hyperlink{xwindow_8h_a2a2cd7926a16390e97ac6a1e111be9b2}{WindowFont}(w);
575     mesg\_info->\hyperlink{structmesg__info__t_ace94c43075742d8ba4d9109669ba078c}{gc} = XtGetGC(w, mask, &values);
576 \}
\end{DoxyCode}
\hypertarget{winmesg_8c_ae121b4ee3f79dc8afd622bf0b963c981}{\index{winmesg.\+c@{winmesg.\+c}!get\+\_\+previous@{get\+\_\+previous}}
\index{get\+\_\+previous@{get\+\_\+previous}!winmesg.\+c@{winmesg.\+c}}
\subsubsection[{get\+\_\+previous}]{\setlength{\rightskip}{0pt plus 5cm}static struct {\bf line\+\_\+element}$\ast$ get\+\_\+previous (
\begin{DoxyParamCaption}
\item[{struct {\bf line\+\_\+element} $\ast$}]{mark}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{winmesg_8c_ae121b4ee3f79dc8afd622bf0b963c981}


Definition at line 261 of file winmesg.\+c.



References line\+\_\+element\+::next.



Referenced by set\+\_\+circle\+\_\+buf().


\begin{DoxyCode}
263 \{
264     \textcolor{keyword}{struct }\hyperlink{structline__element}{line\_element} *curr;
265 
266     \textcolor{keywordflow}{if} (!mark) \textcolor{keywordflow}{return} (\textcolor{keyword}{struct} \hyperlink{structline__element}{line\_element} *) 0;
267 
268     \textcolor{keywordflow}{for} (curr = mark; curr->\hyperlink{structline__element_a1cdd40d4dd6f8b3fe87bd77df90afbaf}{next} != mark; curr = curr->\hyperlink{structline__element_a1cdd40d4dd6f8b3fe87bd77df90afbaf}{next})
269     ;
270     \textcolor{keywordflow}{return} curr;
271 \}
\end{DoxyCode}
\hypertarget{winmesg_8c_a593fc29a5580c1ec13755e9a98cb0165}{\index{winmesg.\+c@{winmesg.\+c}!mesg\+\_\+check\+\_\+size\+\_\+change@{mesg\+\_\+check\+\_\+size\+\_\+change}}
\index{mesg\+\_\+check\+\_\+size\+\_\+change@{mesg\+\_\+check\+\_\+size\+\_\+change}!winmesg.\+c@{winmesg.\+c}}
\subsubsection[{mesg\+\_\+check\+\_\+size\+\_\+change}]{\setlength{\rightskip}{0pt plus 5cm}static void mesg\+\_\+check\+\_\+size\+\_\+change (
\begin{DoxyParamCaption}
\item[{struct {\bf xwindow} $\ast$}]{wp}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{winmesg_8c_a593fc29a5580c1ec13755e9a98cb0165}


Definition at line 500 of file winmesg.\+c.



References set\+\_\+message\+\_\+slider(), mesg\+\_\+info\+\_\+t\+::viewport\+\_\+height, and mesg\+\_\+info\+\_\+t\+::viewport\+\_\+width.



Referenced by mesg\+\_\+exposed().


\begin{DoxyCode}
502 \{
503     \textcolor{keyword}{struct }\hyperlink{structmesg__info__t}{mesg\_info\_t} *mesg\_info = wp->mesg\_information;
504     Arg arg[2];
505     Dimension new\_width, new\_height;
506     Widget viewport;
507 
508     viewport = XtParent(wp->\hyperlink{structxwindow_a02c943a987ff220921a86f40fc5fdfda}{w});
509 
510     XtSetArg(arg[0], XtNwidth,  &new\_width);
511     XtSetArg(arg[1], XtNheight, &new\_height);
512     XtGetValues(viewport, arg, TWO);
513 
514     \textcolor{comment}{/* Only move slider to bottom if new size is smaller. */}
515     \textcolor{keywordflow}{if} (new\_width < mesg\_info->\hyperlink{structmesg__info__t_ae15ee1ff248f494358a3acafb446c19d}{viewport\_width}
516             || new\_height < mesg\_info->\hyperlink{structmesg__info__t_a305a331f90a384bcdd196ee554eb4402}{viewport\_height}) \{
517     \hyperlink{winmesg_8c_ad7d285ef036dcbb192b821ac4828a1ef}{set\_message\_slider}(wp);
518     \}
519 
520     mesg\_info->\hyperlink{structmesg__info__t_ae15ee1ff248f494358a3acafb446c19d}{viewport\_width} = new\_width;
521     mesg\_info->\hyperlink{structmesg__info__t_a305a331f90a384bcdd196ee554eb4402}{viewport\_height} = new\_height;
522 \}
\end{DoxyCode}
\hypertarget{winmesg_8c_a0a3efe518d04689f155ce4057a7d5a00}{\index{winmesg.\+c@{winmesg.\+c}!mesg\+\_\+exposed@{mesg\+\_\+exposed}}
\index{mesg\+\_\+exposed@{mesg\+\_\+exposed}!winmesg.\+c@{winmesg.\+c}}
\subsubsection[{mesg\+\_\+exposed}]{\setlength{\rightskip}{0pt plus 5cm}static void mesg\+\_\+exposed (
\begin{DoxyParamCaption}
\item[{Widget}]{w, }
\item[{Xt\+Pointer}]{client\+\_\+data, }
\item[{Xt\+Pointer}]{widget\+\_\+data}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{winmesg_8c_a0a3efe518d04689f155ce4057a7d5a00}


Definition at line 528 of file winmesg.\+c.



References find\+\_\+widget(), xwindow\+::keep\+\_\+window, mesg\+\_\+check\+\_\+size\+\_\+change(), and redraw\+\_\+message\+\_\+window().



Referenced by create\+\_\+message\+\_\+window(), and destroy\+\_\+message\+\_\+window().


\begin{DoxyCode}
532 \{
533     XExposeEvent *\textcolor{keyword}{event} = (XExposeEvent *) widget\_data;
534 
535     \textcolor{keywordflow}{if} (XtIsRealized(w) && \textcolor{keyword}{event}->count == 0) \{
536     \textcolor{keyword}{struct }\hyperlink{structxwindow}{xwindow} *wp;
537     Display *dpy;
538     Window   win;
539     XEvent   evt;
540 
541     \textcolor{comment}{/*}
542 \textcolor{comment}{     * Drain all pending expose events for the message window;}
543 \textcolor{comment}{     * we'll redraw the whole thing at once.}
544 \textcolor{comment}{     */}
545     dpy = XtDisplay(\hyperlink{structxwindow_a02c943a987ff220921a86f40fc5fdfda}{w});
546     win = XtWindow(\hyperlink{structxwindow_a02c943a987ff220921a86f40fc5fdfda}{w});
547     \textcolor{keywordflow}{while} (XCheckTypedWindowEvent(dpy, win, Expose, &evt)) \textcolor{keywordflow}{continue};
548 
549     wp = \hyperlink{winX_8c_a98c7f578b252486cfb7d3a91987a4291}{find\_widget}(\hyperlink{structxwindow_a02c943a987ff220921a86f40fc5fdfda}{w});
550     \textcolor{keywordflow}{if} (wp->\hyperlink{structxwindow_aa386fb9cd6e2a29ee3df76aa4307c401}{keep\_window} && !wp->mesg\_information) \textcolor{keywordflow}{return};
551     \hyperlink{winmesg_8c_a593fc29a5580c1ec13755e9a98cb0165}{mesg\_check\_size\_change}(wp);
552     \hyperlink{winmesg_8c_aeecf4e82f0405fcdf16e8791d593fa17}{redraw\_message\_window}(wp);
553     \}
554 \}
\end{DoxyCode}
\hypertarget{winmesg_8c_a0129966ae4cbb90cc410eed020eeefc0}{\index{winmesg.\+c@{winmesg.\+c}!mesg\+\_\+resized@{mesg\+\_\+resized}}
\index{mesg\+\_\+resized@{mesg\+\_\+resized}!winmesg.\+c@{winmesg.\+c}}
\subsubsection[{mesg\+\_\+resized}]{\setlength{\rightskip}{0pt plus 5cm}static void mesg\+\_\+resized (
\begin{DoxyParamCaption}
\item[{Widget}]{w, }
\item[{Xt\+Pointer}]{client\+\_\+data, }
\item[{Xt\+Pointer}]{call\+\_\+data}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{winmesg_8c_a0129966ae4cbb90cc410eed020eeefc0}


Definition at line 590 of file winmesg.\+c.



References find\+\_\+widget(), xwindow\+::pixel\+\_\+height, xwindow\+::pixel\+\_\+width, printf, and set\+\_\+circle\+\_\+buf().



Referenced by create\+\_\+message\+\_\+window().


\begin{DoxyCode}
593 \{
594     Arg args[4];
595     Cardinal num\_args;
596     Dimension \hyperlink{structxwindow_a8f270ead0a1ab2847febd35c4da5afe6}{pixel\_width}, \hyperlink{structxwindow_aab5493256f7f6baa33fe878ab6c403f5}{pixel\_height};
597     \textcolor{keyword}{struct }\hyperlink{structxwindow}{xwindow} *wp;
598 \textcolor{preprocessor}{#ifdef VERBOSE}
599     \textcolor{keywordtype}{int} old\_lines;
600 
601     old\_lines = wp->mesg\_information->num\_lines;;
602 \textcolor{preprocessor}{#endif}
603 
604     num\_args = 0;
605     XtSetArg(args[num\_args], XtNwidth,  &pixel\_width);   num\_args++;
606     XtSetArg(args[num\_args], XtNheight, &pixel\_height);  num\_args++;
607     XtGetValues(\hyperlink{structxwindow_a02c943a987ff220921a86f40fc5fdfda}{w}, args, num\_args);
608 
609     wp = \hyperlink{winX_8c_a98c7f578b252486cfb7d3a91987a4291}{find\_widget}(\hyperlink{structxwindow_a02c943a987ff220921a86f40fc5fdfda}{w});
610     wp->\hyperlink{structxwindow_a8f270ead0a1ab2847febd35c4da5afe6}{pixel\_width}  = \hyperlink{structxwindow_a8f270ead0a1ab2847febd35c4da5afe6}{pixel\_width};
611     wp->\hyperlink{structxwindow_aab5493256f7f6baa33fe878ab6c403f5}{pixel\_height} = \hyperlink{structxwindow_aab5493256f7f6baa33fe878ab6c403f5}{pixel\_height};
612 
613     \hyperlink{winmesg_8c_a65ce3fccba84081d03cea29d93f356d5}{set\_circle\_buf}(wp->mesg\_information,
614             (\textcolor{keywordtype}{int}) pixel\_height / wp->mesg\_information->char\_height);
615 
616 \textcolor{preprocessor}{#ifdef VERBOSE}
617     \hyperlink{sound_8c_a3cb9f0894fab1c8fbb0753c9c7c2a8d9}{printf}(\textcolor{stringliteral}{"Message resize.  Pixel: width = %d, height = %d;  Lines: old = %d, new = %d\(\backslash\)n"},
618     pixel\_width,
619     pixel\_height,
620     old\_lines,
621     wp->mesg\_information->num\_lines);
622 \textcolor{preprocessor}{#endif}
623 \}
\end{DoxyCode}
\hypertarget{winmesg_8c_aeecf4e82f0405fcdf16e8791d593fa17}{\index{winmesg.\+c@{winmesg.\+c}!redraw\+\_\+message\+\_\+window@{redraw\+\_\+message\+\_\+window}}
\index{redraw\+\_\+message\+\_\+window@{redraw\+\_\+message\+\_\+window}!winmesg.\+c@{winmesg.\+c}}
\subsubsection[{redraw\+\_\+message\+\_\+window}]{\setlength{\rightskip}{0pt plus 5cm}static void redraw\+\_\+message\+\_\+window (
\begin{DoxyParamCaption}
\item[{struct {\bf xwindow} $\ast$}]{wp}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{winmesg_8c_aeecf4e82f0405fcdf16e8791d593fa17}


Definition at line 448 of file winmesg.\+c.



References app\+Resources, mesg\+\_\+info\+\_\+t\+::char\+\_\+ascent, mesg\+\_\+info\+\_\+t\+::char\+\_\+height, mesg\+\_\+info\+\_\+t\+::char\+\_\+lbearing, mesg\+\_\+info\+\_\+t\+::dirty, mesg\+\_\+info\+\_\+t\+::gc, mesg\+\_\+info\+\_\+t\+::head, mesg\+\_\+info\+\_\+t\+::last\+\_\+pause, line\+\_\+element\+::line, mesg\+\_\+info\+\_\+t\+::line\+\_\+here, App\+Resources\+::message\+\_\+line, line\+\_\+element\+::next, and line\+\_\+element\+::str\+\_\+length.



Referenced by display\+\_\+message\+\_\+window(), mesg\+\_\+exposed(), and set\+\_\+last\+\_\+pause().


\begin{DoxyCode}
450 \{
451     \textcolor{keyword}{struct }\hyperlink{structmesg__info__t}{mesg\_info\_t} *mesg\_info = wp->mesg\_information;
452     \textcolor{keyword}{register} \textcolor{keyword}{struct }\hyperlink{structline__element}{line\_element} *curr;
453     \textcolor{keyword}{register} \textcolor{keywordtype}{int} row, y\_base;
454 
455     \textcolor{comment}{/*}
456 \textcolor{comment}{     * Do this the cheap and easy way.  Clear the window and just redraw}
457 \textcolor{comment}{     * the whole thing.}
458 \textcolor{comment}{     *}
459 \textcolor{comment}{     * This could be done more effecently with one call to XDrawText() instead}
460 \textcolor{comment}{     * of many calls to XDrawString().  Maybe later.}
461 \textcolor{comment}{     *}
462 \textcolor{comment}{     * Only need to clear if window has new text.}
463 \textcolor{comment}{     */}
464     \textcolor{keywordflow}{if} (mesg\_info->\hyperlink{structmesg__info__t_a08f16d5343387918e19cb9812303a4c7}{dirty}) \{
465     XClearWindow(XtDisplay(wp->\hyperlink{structxwindow_a02c943a987ff220921a86f40fc5fdfda}{w}), XtWindow(wp->\hyperlink{structxwindow_a02c943a987ff220921a86f40fc5fdfda}{w}));
466     mesg\_info->\hyperlink{structmesg__info__t_afd9b6c059ba606c7181a04036e0a1d56}{line\_here} = mesg\_info->\hyperlink{structmesg__info__t_a45ba0dcdbeb9c6492d19f4712b003254}{last\_pause};
467     \}
468 
469     \textcolor{comment}{/* For now, just update the whole shootn' match. */}
470     \textcolor{keywordflow}{for} (y\_base = row = 0, curr = mesg\_info->\hyperlink{structmesg__info__t_a9ec2627ed09c84d0871571ab1b004961}{head};
471         row < mesg\_info->num\_lines;
472         row++, y\_base += mesg\_info->\hyperlink{structmesg__info__t_af7ceb1e904683a4ef31352aa7697390e}{char\_height}, curr = curr->\hyperlink{structline__element_a1cdd40d4dd6f8b3fe87bd77df90afbaf}{next}) \{
473 
474     XDrawString(XtDisplay(wp->\hyperlink{structxwindow_a02c943a987ff220921a86f40fc5fdfda}{w}), XtWindow(wp->\hyperlink{structxwindow_a02c943a987ff220921a86f40fc5fdfda}{w}),
475         mesg\_info->\hyperlink{structmesg__info__t_ace94c43075742d8ba4d9109669ba078c}{gc},
476         mesg\_info->\hyperlink{structmesg__info__t_a8533deec9572890a70ba02b6cae67951}{char\_lbearing},
477         mesg\_info->\hyperlink{structmesg__info__t_a737e633cc653b3e01eaf308564d362c3}{char\_ascent} + y\_base,
478         curr->\hyperlink{structline__element_a684c95e23c7d50d2f2152c82c137d66b}{line},
479         curr->\hyperlink{structline__element_a6d24c9bca6243e9975bb8150ab0865e5}{str\_length});
480     \textcolor{comment}{/*}
481 \textcolor{comment}{     * This draws a line at the \_top\_ of the line of text pointed to by}
482 \textcolor{comment}{     * mesg\_info->last\_pause.}
483 \textcolor{comment}{     */}
484     \textcolor{keywordflow}{if} (\hyperlink{winX_8h_ade4731438ebdc0f73c31f52f6a64e032}{appResources}.\hyperlink{structAppResources_ab51e05aca21e80dd076c0d2b763dd987}{message\_line} && curr == mesg\_info->
      \hyperlink{structmesg__info__t_afd9b6c059ba606c7181a04036e0a1d56}{line\_here}) \{
485         XDrawLine(XtDisplay(wp->\hyperlink{structxwindow_a02c943a987ff220921a86f40fc5fdfda}{w}), XtWindow(wp->\hyperlink{structxwindow_a02c943a987ff220921a86f40fc5fdfda}{w}),
486         mesg\_info->\hyperlink{structmesg__info__t_ace94c43075742d8ba4d9109669ba078c}{gc},
487         0, y\_base, wp->\hyperlink{structxwindow_a8f270ead0a1ab2847febd35c4da5afe6}{pixel\_width}, y\_base);
488     \}
489     \}
490 
491     mesg\_info->\hyperlink{structmesg__info__t_a08f16d5343387918e19cb9812303a4c7}{dirty} = False;
492 \}
\end{DoxyCode}
\hypertarget{winmesg_8c_a65ce3fccba84081d03cea29d93f356d5}{\index{winmesg.\+c@{winmesg.\+c}!set\+\_\+circle\+\_\+buf@{set\+\_\+circle\+\_\+buf}}
\index{set\+\_\+circle\+\_\+buf@{set\+\_\+circle\+\_\+buf}!winmesg.\+c@{winmesg.\+c}}
\subsubsection[{set\+\_\+circle\+\_\+buf}]{\setlength{\rightskip}{0pt plus 5cm}static void set\+\_\+circle\+\_\+buf (
\begin{DoxyParamCaption}
\item[{struct {\bf mesg\+\_\+info\+\_\+t} $\ast$}]{mesg\+\_\+info, }
\item[{int}]{count}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{winmesg_8c_a65ce3fccba84081d03cea29d93f356d5}


Definition at line 281 of file winmesg.\+c.



References alloc(), line\+\_\+element\+::buf\+\_\+length, count, free(), get\+\_\+previous(), line\+\_\+element\+::line, line\+\_\+element\+::next, panic(), and line\+\_\+element\+::str\+\_\+length.



Referenced by create\+\_\+message\+\_\+window(), destroy\+\_\+message\+\_\+window(), and mesg\+\_\+resized().


\begin{DoxyCode}
284 \{
285     \textcolor{keywordtype}{int} i;
286     \textcolor{keyword}{struct }\hyperlink{structline__element}{line\_element} *tail, *curr, *head;
287 
288     \textcolor{keywordflow}{if} (\hyperlink{wingem1_8c_a66e3fedede6aa372e5196e55e5e8d5c1}{count} < 0) \hyperlink{txt2iff_8c_ab0824b6f5eb51db9371d2e9a222249d3}{panic}(\textcolor{stringliteral}{"set\_circle\_buf: bad count [= %d]"}, \hyperlink{wingem1_8c_a66e3fedede6aa372e5196e55e5e8d5c1}{count});
289     \textcolor{keywordflow}{if} (\hyperlink{wingem1_8c_a66e3fedede6aa372e5196e55e5e8d5c1}{count} == mesg\_info->\hyperlink{structmesg__info__t_aba23aab1261a0730bd4fef133f902d81}{num\_lines}) \textcolor{keywordflow}{return};    \textcolor{comment}{/* no change in size */}
290 
291     \textcolor{keywordflow}{if} (count < mesg\_info->num\_lines) \{
292     \textcolor{comment}{/*}
293 \textcolor{comment}{     * Toss num\_lines - count line entries from our circular list.}
294 \textcolor{comment}{     *}
295 \textcolor{comment}{     * We lose lines from the front (top) of the list.  We \_know\_}
296 \textcolor{comment}{     * the list is non\_empty.}
297 \textcolor{comment}{     */}
298     tail = \hyperlink{winmesg_8c_ae121b4ee3f79dc8afd622bf0b963c981}{get\_previous}(mesg\_info->\hyperlink{structmesg__info__t_a9ec2627ed09c84d0871571ab1b004961}{head});
299     \textcolor{keywordflow}{for} (i = mesg\_info->\hyperlink{structmesg__info__t_aba23aab1261a0730bd4fef133f902d81}{num\_lines} - \hyperlink{wingem1_8c_a66e3fedede6aa372e5196e55e5e8d5c1}{count}; i > 0; i--) \{
300         curr = mesg\_info->\hyperlink{structmesg__info__t_a9ec2627ed09c84d0871571ab1b004961}{head};
301         mesg\_info->\hyperlink{structmesg__info__t_a9ec2627ed09c84d0871571ab1b004961}{head} = curr->\hyperlink{structline__element_a1cdd40d4dd6f8b3fe87bd77df90afbaf}{next};
302         \textcolor{keywordflow}{if} (curr->\hyperlink{structline__element_a684c95e23c7d50d2f2152c82c137d66b}{line}) \hyperlink{winproto_8h_a4bbec68d324de17b99fecede64b383ba}{free}((\hyperlink{tradstdc_8h_ad4a7dab7269b4b00e3c7c7d2e66f31cd}{genericptr\_t})curr->\hyperlink{structline__element_a684c95e23c7d50d2f2152c82c137d66b}{line});
303         \hyperlink{winproto_8h_a4bbec68d324de17b99fecede64b383ba}{free}((\hyperlink{tradstdc_8h_ad4a7dab7269b4b00e3c7c7d2e66f31cd}{genericptr\_t})curr);
304     \}
305     \textcolor{keywordflow}{if} (\hyperlink{wingem1_8c_a66e3fedede6aa372e5196e55e5e8d5c1}{count} == 0) \{
306         \textcolor{comment}{/* make sure we don't have a dangling pointer */}
307         mesg\_info->\hyperlink{structmesg__info__t_a9ec2627ed09c84d0871571ab1b004961}{head} = (\textcolor{keyword}{struct }\hyperlink{structline__element}{line\_element} *) 0;
308     \} \textcolor{keywordflow}{else} \{
309         tail->\hyperlink{structline__element_a1cdd40d4dd6f8b3fe87bd77df90afbaf}{next} = mesg\_info->\hyperlink{structmesg__info__t_a9ec2627ed09c84d0871571ab1b004961}{head};   \textcolor{comment}{/* link the tail to the head */}
310     \}
311     \} \textcolor{keywordflow}{else} \{
312     \textcolor{comment}{/*}
313 \textcolor{comment}{     * Add count - num\_lines blank lines to the head of the list.}
314 \textcolor{comment}{     *}
315 \textcolor{comment}{     * Create a separate list, keeping track of the tail.}
316 \textcolor{comment}{     */}
317     \textcolor{keywordflow}{for} (head = tail = 0, i = 0; i < \hyperlink{wingem1_8c_a66e3fedede6aa372e5196e55e5e8d5c1}{count} - mesg\_info->\hyperlink{structmesg__info__t_aba23aab1261a0730bd4fef133f902d81}{num\_lines}; i++) \{
318         curr = (\textcolor{keyword}{struct }\hyperlink{structline__element}{line\_element} *) \hyperlink{txt2iff_8c_ae273cbdce4cd64a076220ad06c41a5a1}{alloc}(\textcolor{keyword}{sizeof}(\textcolor{keyword}{struct} 
      \hyperlink{structline__element}{line\_element}));
319         curr->\hyperlink{structline__element_a684c95e23c7d50d2f2152c82c137d66b}{line} = 0;
320         curr->\hyperlink{structline__element_a57475a80631202b2a3400477c182308d}{buf\_length} = 0;
321         curr->\hyperlink{structline__element_a6d24c9bca6243e9975bb8150ab0865e5}{str\_length} = 0;
322         \textcolor{keywordflow}{if} (tail) \{
323         tail->\hyperlink{structline__element_a1cdd40d4dd6f8b3fe87bd77df90afbaf}{next} = curr;
324         tail = curr;
325         \} \textcolor{keywordflow}{else} \{
326         head = tail = curr;
327         \}
328     \}
329     \textcolor{comment}{/*}
330 \textcolor{comment}{     * Complete the circle by making the new tail point to the old head}
331 \textcolor{comment}{     * and the old tail point to the new head.  If our line count was}
332 \textcolor{comment}{     * zero, then make the new list circular.}
333 \textcolor{comment}{     */}
334     \textcolor{keywordflow}{if} (mesg\_info->\hyperlink{structmesg__info__t_aba23aab1261a0730bd4fef133f902d81}{num\_lines}) \{
335         curr = \hyperlink{winmesg_8c_ae121b4ee3f79dc8afd622bf0b963c981}{get\_previous}(mesg\_info->\hyperlink{structmesg__info__t_a9ec2627ed09c84d0871571ab1b004961}{head});\textcolor{comment}{/* get end of old list */}
336 
337         tail->\hyperlink{structline__element_a1cdd40d4dd6f8b3fe87bd77df90afbaf}{next} = mesg\_info->\hyperlink{structmesg__info__t_a9ec2627ed09c84d0871571ab1b004961}{head};   \textcolor{comment}{/* new tail -> old head */}
338         curr->\hyperlink{structline__element_a1cdd40d4dd6f8b3fe87bd77df90afbaf}{next} = head;          \textcolor{comment}{/* old tail -> new head */}
339     \} \textcolor{keywordflow}{else} \{
340         tail->\hyperlink{structline__element_a1cdd40d4dd6f8b3fe87bd77df90afbaf}{next} = head;
341     \}
342     mesg\_info->\hyperlink{structmesg__info__t_a9ec2627ed09c84d0871571ab1b004961}{head} = head;
343     \}
344 
345     mesg\_info->\hyperlink{structmesg__info__t_aba23aab1261a0730bd4fef133f902d81}{num\_lines} = \hyperlink{wingem1_8c_a66e3fedede6aa372e5196e55e5e8d5c1}{count};
346     \textcolor{comment}{/* Erase the line on a resize. */}
347     mesg\_info->\hyperlink{structmesg__info__t_a45ba0dcdbeb9c6492d19f4712b003254}{last\_pause} = (\textcolor{keyword}{struct }\hyperlink{structline__element}{line\_element} *) 0;
348 \}
\end{DoxyCode}
\hypertarget{winmesg_8c_a031c4f45a4142522189f32dcdb5df12f}{\index{winmesg.\+c@{winmesg.\+c}!set\+\_\+last\+\_\+pause@{set\+\_\+last\+\_\+pause}}
\index{set\+\_\+last\+\_\+pause@{set\+\_\+last\+\_\+pause}!winmesg.\+c@{winmesg.\+c}}
\subsubsection[{set\+\_\+last\+\_\+pause}]{\setlength{\rightskip}{0pt plus 5cm}void set\+\_\+last\+\_\+pause (
\begin{DoxyParamCaption}
\item[{struct {\bf xwindow} $\ast$}]{wp}
\end{DoxyParamCaption}
)}}\label{winmesg_8c_a031c4f45a4142522189f32dcdb5df12f}


Definition at line 419 of file winmesg.\+c.



References mesg\+\_\+info\+\_\+t\+::head, mesg\+\_\+info\+\_\+t\+::last\+\_\+pause, mesg\+\_\+info\+\_\+t\+::last\+\_\+pause\+\_\+head, and redraw\+\_\+message\+\_\+window().



Referenced by input\+\_\+event().


\begin{DoxyCode}
421 \{
422     \textcolor{keyword}{register} \textcolor{keyword}{struct }\hyperlink{structmesg__info__t}{mesg\_info\_t} *mesg\_info = wp->mesg\_information;
423 
424 \textcolor{preprocessor}{#ifdef ERASE\_LINE}
425     \textcolor{comment}{/*}
426 \textcolor{comment}{     * If we've erased the pause line and haven't added any new lines,}
427 \textcolor{comment}{     * don't try to erase the line again.}
428 \textcolor{comment}{     */}
429     \textcolor{keywordflow}{if} (!mesg\_info->\hyperlink{structmesg__info__t_a45ba0dcdbeb9c6492d19f4712b003254}{last\_pause}
430                 && mesg\_info->\hyperlink{structmesg__info__t_af8c5f5bc77a707da17810c00e7dbb0a4}{last\_pause\_head} == mesg\_info->\hyperlink{structmesg__info__t_a9ec2627ed09c84d0871571ab1b004961}{head})
431     \textcolor{keywordflow}{return};
432 
433     \textcolor{keywordflow}{if} (mesg\_info->\hyperlink{structmesg__info__t_a45ba0dcdbeb9c6492d19f4712b003254}{last\_pause} == mesg\_info->\hyperlink{structmesg__info__t_a9ec2627ed09c84d0871571ab1b004961}{head}) \{
434     \textcolor{comment}{/* No new messages in last turn.  Redraw window to erase line. */}
435     mesg\_info->\hyperlink{structmesg__info__t_a45ba0dcdbeb9c6492d19f4712b003254}{last\_pause} = (\textcolor{keyword}{struct }\hyperlink{structline__element}{line\_element} *) 0;
436     mesg\_info->\hyperlink{structmesg__info__t_af8c5f5bc77a707da17810c00e7dbb0a4}{last\_pause\_head} = mesg\_info->\hyperlink{structmesg__info__t_a9ec2627ed09c84d0871571ab1b004961}{head};
437     \hyperlink{winmesg_8c_aeecf4e82f0405fcdf16e8791d593fa17}{redraw\_message\_window}(wp);
438     \} \textcolor{keywordflow}{else} \{
439 \textcolor{preprocessor}{#endif}
440     mesg\_info->\hyperlink{structmesg__info__t_a45ba0dcdbeb9c6492d19f4712b003254}{last\_pause} = mesg\_info->\hyperlink{structmesg__info__t_a9ec2627ed09c84d0871571ab1b004961}{head};
441 \textcolor{preprocessor}{#ifdef ERASE\_LINE}
442     \}
443 \textcolor{preprocessor}{#endif}
444 \}
\end{DoxyCode}
\hypertarget{winmesg_8c_ad7d285ef036dcbb192b821ac4828a1ef}{\index{winmesg.\+c@{winmesg.\+c}!set\+\_\+message\+\_\+slider@{set\+\_\+message\+\_\+slider}}
\index{set\+\_\+message\+\_\+slider@{set\+\_\+message\+\_\+slider}!winmesg.\+c@{winmesg.\+c}}
\subsubsection[{set\+\_\+message\+\_\+slider}]{\setlength{\rightskip}{0pt plus 5cm}void set\+\_\+message\+\_\+slider (
\begin{DoxyParamCaption}
\item[{struct {\bf xwindow} $\ast$}]{wp}
\end{DoxyParamCaption}
)}}\label{winmesg_8c_ad7d285ef036dcbb192b821ac4828a1ef}


Definition at line 55 of file winmesg.\+c.



Referenced by init\+\_\+standard\+\_\+windows(), and mesg\+\_\+check\+\_\+size\+\_\+change().


\begin{DoxyCode}
57 \{
58     Widget scrollbar;
59     \textcolor{keywordtype}{float} top;
60 
61     scrollbar = XtNameToWidget(XtParent(wp->\hyperlink{structxwindow_a02c943a987ff220921a86f40fc5fdfda}{w}), \textcolor{stringliteral}{"vertical"});
62 
63     \textcolor{keywordflow}{if} (scrollbar) \{
64     top = 1.0;
65     XtCallCallbacks(scrollbar, XtNjumpProc, &top);
66     \}
67 \}
\end{DoxyCode}
\hypertarget{winmesg_8c_a36c506c2cc6466ce8dc4939fe0093616}{\index{winmesg.\+c@{winmesg.\+c}!split@{split}}
\index{split@{split}!winmesg.\+c@{winmesg.\+c}}
\subsubsection[{split}]{\setlength{\rightskip}{0pt plus 5cm}static char$\ast$ split (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{s, }
\item[{X\+Font\+Struct $\ast$}]{fs, }
\item[{Dimension}]{pixel\+\_\+width}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{winmesg_8c_a36c506c2cc6466ce8dc4939fe0093616}


Definition at line 356 of file winmesg.\+c.



References eos(), and panic().



Referenced by append\+\_\+message().


\begin{DoxyCode}
360 \{
361     \textcolor{keywordtype}{char} save, *end, *remainder;
362 
363     save = \textcolor{charliteral}{'\(\backslash\)0'};
364     remainder = 0;
365     end = \hyperlink{makedefs_8c_a72563303ed4b67f2a7dd9f2d15a01558}{eos}(s);    \textcolor{comment}{/* point to null at end of string */}
366 
367     \textcolor{comment}{/* assume that if end == s, XXXXXX returns 0) */}
368     \textcolor{keywordflow}{while} ((Dimension) XTextWidth(fs, s, (\textcolor{keywordtype}{int}) strlen(s)) > pixel\_width) \{
369     *end-- = save;
370     \textcolor{keywordflow}{while} (*end != \textcolor{charliteral}{' '}) \{
371         \textcolor{keywordflow}{if} (end == s) \hyperlink{txt2iff_8c_ab0824b6f5eb51db9371d2e9a222249d3}{panic}(\textcolor{stringliteral}{"split: eos!"});
372         --end;
373     \}
374     save = *end;
375     *end = \textcolor{charliteral}{'\(\backslash\)0'};
376     remainder = end + 1;
377     \}
378     \textcolor{keywordflow}{return} remainder;
379 \}
\end{DoxyCode}


\subsection{Variable Documentation}
\hypertarget{winmesg_8c_a604b7c1e20a008ddafbae6aadeb37d33}{\index{winmesg.\+c@{winmesg.\+c}!mesg\+\_\+translations@{mesg\+\_\+translations}}
\index{mesg\+\_\+translations@{mesg\+\_\+translations}!winmesg.\+c@{winmesg.\+c}}
\subsubsection[{mesg\+\_\+translations}]{\setlength{\rightskip}{0pt plus 5cm}char mesg\+\_\+translations\mbox{[}$\,$\mbox{]}\hspace{0.3cm}{\ttfamily [static]}}}\label{winmesg_8c_a604b7c1e20a008ddafbae6aadeb37d33}
{\bfseries Initial value\+:}
\begin{DoxyCode}
=
\textcolor{stringliteral}{"#override\(\backslash\)n\(\backslash\)}
\textcolor{stringliteral}{ <Key>:     input() \(\backslash\)}
\textcolor{stringliteral}{"}
\end{DoxyCode}


Definition at line 48 of file winmesg.\+c.

