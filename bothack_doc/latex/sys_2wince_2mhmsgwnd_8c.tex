\hypertarget{sys_2wince_2mhmsgwnd_8c}{\section{nethack/sys/wince/mhmsgwnd.c File Reference}
\label{sys_2wince_2mhmsgwnd_8c}\index{nethack/sys/wince/mhmsgwnd.\+c@{nethack/sys/wince/mhmsgwnd.\+c}}
}
{\ttfamily \#include \char`\"{}win\+M\+S.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}mhmsgwnd.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}mhmsg.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}mhcmd.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}mhfont.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}mhcolor.\+h\char`\"{}}\\*
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structwindow__line}{window\+\_\+line}
\item 
struct \hyperlink{structmswin__nethack__message__window}{mswin\+\_\+nethack\+\_\+message\+\_\+window}
\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{sys_2wince_2mhmsgwnd_8c_aed04879f460c67483fee2c20648d35ff}{M\+S\+G\+\_\+\+W\+R\+A\+P\+\_\+\+T\+E\+X\+T}
\item 
\#define \hyperlink{sys_2wince_2mhmsgwnd_8c_ab4f3451af76d732aceaf36e3d3043dfb}{M\+S\+G\+\_\+\+V\+I\+S\+I\+B\+L\+E\+\_\+\+L\+I\+N\+E\+S}~\hyperlink{dialogs_8c_affe776513b24d84b39af8ab0930fef7f}{max}(iflags.\+wc\+\_\+vary\+\_\+msgcount, 2)
\item 
\#define \hyperlink{sys_2wince_2mhmsgwnd_8c_af62d3eba40911b9d82f6e377b48a50e2}{M\+A\+X\+\_\+\+M\+S\+G\+\_\+\+L\+I\+N\+E\+S}~32
\item 
\#define \hyperlink{sys_2wince_2mhmsgwnd_8c_aae28724cf681afbd0c0ce60297cfff1a}{M\+S\+G\+\_\+\+L\+I\+N\+E\+S}~(int)\hyperlink{tclib_8c_ac6afabdc09a49a433ee19d8a9486056d}{min}(iflags.\+msg\+\_\+history, \hyperlink{win_2win32_2mhmsgwnd_8c_af62d3eba40911b9d82f6e377b48a50e2}{M\+A\+X\+\_\+\+M\+S\+G\+\_\+\+L\+I\+N\+E\+S})
\item 
\#define \hyperlink{sys_2wince_2mhmsgwnd_8c_a7823f335c74115317a5e71c645dae320}{M\+A\+X\+W\+I\+N\+D\+O\+W\+T\+E\+X\+T}~200
\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \\*
\hyperlink{structmswin__nethack__message__window}{mswin\+\_\+nethack\+\_\+message\+\_\+window} \hyperlink{sys_2wince_2mhmsgwnd_8c_a33b3f8800200036e0f9a266a8ccb7ca5}{N\+H\+Message\+Window}
\item 
typedef struct \\*
\hyperlink{structmswin__nethack__message__window}{mswin\+\_\+nethack\+\_\+message\+\_\+window} $\ast$ \hyperlink{sys_2wince_2mhmsgwnd_8c_aeb30ef6a644f488174e92ff6962b1728}{P\+N\+H\+Message\+Window}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
L\+R\+E\+S\+U\+L\+T C\+A\+L\+L\+B\+A\+C\+K \hyperlink{sys_2wince_2mhmsgwnd_8c_a12c253cbd080ff7e808f935f2bdf7680}{N\+H\+Message\+Wnd\+Proc} (H\+W\+N\+D, \hyperlink{def__os2_8h_a36cb3b01d81ffd844bbbfb54003e06ec}{U\+I\+N\+T}, W\+P\+A\+R\+A\+M, L\+P\+A\+R\+A\+M)
\item 
static void \hyperlink{sys_2wince_2mhmsgwnd_8c_a97d883487d43019621db34a81921eb27}{register\+\_\+message\+\_\+window\+\_\+class} ()
\item 
static void \hyperlink{sys_2wince_2mhmsgwnd_8c_ab1f0aceef05a1dec643246c7cbf5353c}{on\+M\+S\+N\+H\+Command} (H\+W\+N\+D h\+Wnd, W\+P\+A\+R\+A\+M w\+Param, L\+P\+A\+R\+A\+M l\+Param)
\item 
static void \hyperlink{sys_2wince_2mhmsgwnd_8c_a1f270ab41a83935a7f1a12c1ebf960c1}{on\+M\+S\+N\+H\+\_\+\+V\+Scroll} (H\+W\+N\+D h\+Wnd, W\+P\+A\+R\+A\+M w\+Param, L\+P\+A\+R\+A\+M l\+Param)
\item 
static void \hyperlink{sys_2wince_2mhmsgwnd_8c_ad09a28d28eea324af31f4fdfa19a44b4}{on\+Paint} (H\+W\+N\+D h\+Wnd)
\item 
static void \hyperlink{sys_2wince_2mhmsgwnd_8c_a8d537e532190de086a8d3636c37c57a9}{on\+Create} (H\+W\+N\+D h\+Wnd, W\+P\+A\+R\+A\+M w\+Param, L\+P\+A\+R\+A\+M l\+Param)
\item 
H\+W\+N\+D \hyperlink{sys_2wince_2mhmsgwnd_8c_a1afe35c0c2ce82505b2146a9e4e3eb93}{mswin\+\_\+init\+\_\+message\+\_\+window} ()
\item 
void \hyperlink{sys_2wince_2mhmsgwnd_8c_a83f12dae73f3dbddc7af82b4cc3f90bf}{mswin\+\_\+message\+\_\+window\+\_\+size} (H\+W\+N\+D h\+Wnd, L\+P\+S\+I\+Z\+E sz)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static T\+C\+H\+A\+R \hyperlink{sys_2wince_2mhmsgwnd_8c_a787ab0593b5cdc6e80e8602488f03810}{sz\+Message\+Window\+Class} \mbox{[}$\,$\mbox{]} = T\+E\+X\+T(\char`\"{}M\+S\+N\+H\+Message\+Wnd\+Class\char`\"{})
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\hypertarget{sys_2wince_2mhmsgwnd_8c_af62d3eba40911b9d82f6e377b48a50e2}{\index{sys/wince/mhmsgwnd.\+c@{sys/wince/mhmsgwnd.\+c}!M\+A\+X\+\_\+\+M\+S\+G\+\_\+\+L\+I\+N\+E\+S@{M\+A\+X\+\_\+\+M\+S\+G\+\_\+\+L\+I\+N\+E\+S}}
\index{M\+A\+X\+\_\+\+M\+S\+G\+\_\+\+L\+I\+N\+E\+S@{M\+A\+X\+\_\+\+M\+S\+G\+\_\+\+L\+I\+N\+E\+S}!sys/wince/mhmsgwnd.\+c@{sys/wince/mhmsgwnd.\+c}}
\subsubsection[{M\+A\+X\+\_\+\+M\+S\+G\+\_\+\+L\+I\+N\+E\+S}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+A\+X\+\_\+\+M\+S\+G\+\_\+\+L\+I\+N\+E\+S~32}}\label{sys_2wince_2mhmsgwnd_8c_af62d3eba40911b9d82f6e377b48a50e2}


Definition at line 14 of file mhmsgwnd.\+c.

\hypertarget{sys_2wince_2mhmsgwnd_8c_a7823f335c74115317a5e71c645dae320}{\index{sys/wince/mhmsgwnd.\+c@{sys/wince/mhmsgwnd.\+c}!M\+A\+X\+W\+I\+N\+D\+O\+W\+T\+E\+X\+T@{M\+A\+X\+W\+I\+N\+D\+O\+W\+T\+E\+X\+T}}
\index{M\+A\+X\+W\+I\+N\+D\+O\+W\+T\+E\+X\+T@{M\+A\+X\+W\+I\+N\+D\+O\+W\+T\+E\+X\+T}!sys/wince/mhmsgwnd.\+c@{sys/wince/mhmsgwnd.\+c}}
\subsubsection[{M\+A\+X\+W\+I\+N\+D\+O\+W\+T\+E\+X\+T}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+A\+X\+W\+I\+N\+D\+O\+W\+T\+E\+X\+T~200}}\label{sys_2wince_2mhmsgwnd_8c_a7823f335c74115317a5e71c645dae320}


Definition at line 16 of file mhmsgwnd.\+c.



Referenced by on\+Create(), on\+M\+S\+N\+H\+Command(), and on\+Paint().

\hypertarget{sys_2wince_2mhmsgwnd_8c_aae28724cf681afbd0c0ce60297cfff1a}{\index{sys/wince/mhmsgwnd.\+c@{sys/wince/mhmsgwnd.\+c}!M\+S\+G\+\_\+\+L\+I\+N\+E\+S@{M\+S\+G\+\_\+\+L\+I\+N\+E\+S}}
\index{M\+S\+G\+\_\+\+L\+I\+N\+E\+S@{M\+S\+G\+\_\+\+L\+I\+N\+E\+S}!sys/wince/mhmsgwnd.\+c@{sys/wince/mhmsgwnd.\+c}}
\subsubsection[{M\+S\+G\+\_\+\+L\+I\+N\+E\+S}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+S\+G\+\_\+\+L\+I\+N\+E\+S~(int){\bf min}(iflags.\+msg\+\_\+history, {\bf M\+A\+X\+\_\+\+M\+S\+G\+\_\+\+L\+I\+N\+E\+S})}}\label{sys_2wince_2mhmsgwnd_8c_aae28724cf681afbd0c0ce60297cfff1a}


Definition at line 15 of file mhmsgwnd.\+c.



Referenced by N\+H\+Message\+Wnd\+Proc(), on\+M\+S\+N\+H\+Command(), and on\+Paint().

\hypertarget{sys_2wince_2mhmsgwnd_8c_ab4f3451af76d732aceaf36e3d3043dfb}{\index{sys/wince/mhmsgwnd.\+c@{sys/wince/mhmsgwnd.\+c}!M\+S\+G\+\_\+\+V\+I\+S\+I\+B\+L\+E\+\_\+\+L\+I\+N\+E\+S@{M\+S\+G\+\_\+\+V\+I\+S\+I\+B\+L\+E\+\_\+\+L\+I\+N\+E\+S}}
\index{M\+S\+G\+\_\+\+V\+I\+S\+I\+B\+L\+E\+\_\+\+L\+I\+N\+E\+S@{M\+S\+G\+\_\+\+V\+I\+S\+I\+B\+L\+E\+\_\+\+L\+I\+N\+E\+S}!sys/wince/mhmsgwnd.\+c@{sys/wince/mhmsgwnd.\+c}}
\subsubsection[{M\+S\+G\+\_\+\+V\+I\+S\+I\+B\+L\+E\+\_\+\+L\+I\+N\+E\+S}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+S\+G\+\_\+\+V\+I\+S\+I\+B\+L\+E\+\_\+\+L\+I\+N\+E\+S~{\bf max}(iflags.\+wc\+\_\+vary\+\_\+msgcount, 2)}}\label{sys_2wince_2mhmsgwnd_8c_ab4f3451af76d732aceaf36e3d3043dfb}


Definition at line 13 of file mhmsgwnd.\+c.



Referenced by mswin\+\_\+message\+\_\+window\+\_\+size(), N\+H\+Message\+Wnd\+Proc(), and on\+M\+S\+N\+H\+\_\+\+V\+Scroll().

\hypertarget{sys_2wince_2mhmsgwnd_8c_aed04879f460c67483fee2c20648d35ff}{\index{sys/wince/mhmsgwnd.\+c@{sys/wince/mhmsgwnd.\+c}!M\+S\+G\+\_\+\+W\+R\+A\+P\+\_\+\+T\+E\+X\+T@{M\+S\+G\+\_\+\+W\+R\+A\+P\+\_\+\+T\+E\+X\+T}}
\index{M\+S\+G\+\_\+\+W\+R\+A\+P\+\_\+\+T\+E\+X\+T@{M\+S\+G\+\_\+\+W\+R\+A\+P\+\_\+\+T\+E\+X\+T}!sys/wince/mhmsgwnd.\+c@{sys/wince/mhmsgwnd.\+c}}
\subsubsection[{M\+S\+G\+\_\+\+W\+R\+A\+P\+\_\+\+T\+E\+X\+T}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+S\+G\+\_\+\+W\+R\+A\+P\+\_\+\+T\+E\+X\+T}}\label{sys_2wince_2mhmsgwnd_8c_aed04879f460c67483fee2c20648d35ff}


Definition at line 11 of file mhmsgwnd.\+c.



\subsection{Typedef Documentation}
\hypertarget{sys_2wince_2mhmsgwnd_8c_a33b3f8800200036e0f9a266a8ccb7ca5}{\index{sys/wince/mhmsgwnd.\+c@{sys/wince/mhmsgwnd.\+c}!N\+H\+Message\+Window@{N\+H\+Message\+Window}}
\index{N\+H\+Message\+Window@{N\+H\+Message\+Window}!sys/wince/mhmsgwnd.\+c@{sys/wince/mhmsgwnd.\+c}}
\subsubsection[{N\+H\+Message\+Window}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf mswin\+\_\+nethack\+\_\+message\+\_\+window}  {\bf N\+H\+Message\+Window}}}\label{sys_2wince_2mhmsgwnd_8c_a33b3f8800200036e0f9a266a8ccb7ca5}
\hypertarget{sys_2wince_2mhmsgwnd_8c_aeb30ef6a644f488174e92ff6962b1728}{\index{sys/wince/mhmsgwnd.\+c@{sys/wince/mhmsgwnd.\+c}!P\+N\+H\+Message\+Window@{P\+N\+H\+Message\+Window}}
\index{P\+N\+H\+Message\+Window@{P\+N\+H\+Message\+Window}!sys/wince/mhmsgwnd.\+c@{sys/wince/mhmsgwnd.\+c}}
\subsubsection[{P\+N\+H\+Message\+Window}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf mswin\+\_\+nethack\+\_\+message\+\_\+window} $\ast$ {\bf P\+N\+H\+Message\+Window}}}\label{sys_2wince_2mhmsgwnd_8c_aeb30ef6a644f488174e92ff6962b1728}


\subsection{Function Documentation}
\hypertarget{sys_2wince_2mhmsgwnd_8c_a1afe35c0c2ce82505b2146a9e4e3eb93}{\index{sys/wince/mhmsgwnd.\+c@{sys/wince/mhmsgwnd.\+c}!mswin\+\_\+init\+\_\+message\+\_\+window@{mswin\+\_\+init\+\_\+message\+\_\+window}}
\index{mswin\+\_\+init\+\_\+message\+\_\+window@{mswin\+\_\+init\+\_\+message\+\_\+window}!sys/wince/mhmsgwnd.\+c@{sys/wince/mhmsgwnd.\+c}}
\subsubsection[{mswin\+\_\+init\+\_\+message\+\_\+window}]{\setlength{\rightskip}{0pt plus 5cm}H\+W\+N\+D mswin\+\_\+init\+\_\+message\+\_\+window (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{sys_2wince_2mhmsgwnd_8c_a1afe35c0c2ce82505b2146a9e4e3eb93}


Definition at line 54 of file mhmsgwnd.\+c.



Referenced by mswin\+\_\+create\+\_\+nhwindow().


\begin{DoxyCode}
54                                   \{
55     \textcolor{keyword}{static} \textcolor{keywordtype}{int} run\_once = 0;
56     HWND ret;
57     DWORD style;
58 
59     \textcolor{keywordflow}{if}( !run\_once ) \{
60         \hyperlink{sys_2wince_2mhmsgwnd_8c_a97d883487d43019621db34a81921eb27}{register\_message\_window\_class}( );
61         run\_once = 1;
62     \}
63 
64 \textcolor{preprocessor}{#ifdef MSG\_WRAP\_TEXT            }
65     style = WS\_BORDER | WS\_CHILD | WS\_CLIPSIBLINGS | WS\_VSCROLL;
66 \textcolor{preprocessor}{#else}
67     style = WS\_BORDER | WS\_CHILD | WS\_CLIPSIBLINGS | WS\_VSCROLL | WS\_HSCROLL;
68 \textcolor{preprocessor}{#endif}
69 
70     ret = CreateWindow(
71             \hyperlink{sys_2wince_2mhmsgwnd_8c_a787ab0593b5cdc6e80e8602488f03810}{szMessageWindowClass},   \textcolor{comment}{/* registered class name */}
72             \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL},                   \textcolor{comment}{/* window name */}           
73             style, \textcolor{comment}{/* window style */}
74             0,   \textcolor{comment}{/* horizontal position of window */}
75             0,   \textcolor{comment}{/* vertical position of window */}
76             0,   \textcolor{comment}{/* window width */}
77             0,   \textcolor{comment}{/* window height - set it later */}
78             \hyperlink{sys_2wince_2winhack_8c_ad72c8d80c9fc01eaf07a3c2463ab88bd}{GetNHApp}()->hMainWnd,   \textcolor{comment}{/* handle to parent or owner window */}
79             \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL},                   \textcolor{comment}{/* menu handle or child identifier */}
80             \hyperlink{sys_2wince_2winhack_8c_ad72c8d80c9fc01eaf07a3c2463ab88bd}{GetNHApp}()->hApp,       \textcolor{comment}{/* handle to application instance */}
81             \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} );                 \textcolor{comment}{/* window-creation data */}
82 
83     \textcolor{keywordflow}{if}( !ret ) \hyperlink{txt2iff_8c_ab0824b6f5eb51db9371d2e9a222249d3}{panic}(\textcolor{stringliteral}{"Cannot create message window"});
84 
85     \textcolor{keywordflow}{return} ret;
86 \}
\end{DoxyCode}
\hypertarget{sys_2wince_2mhmsgwnd_8c_a83f12dae73f3dbddc7af82b4cc3f90bf}{\index{sys/wince/mhmsgwnd.\+c@{sys/wince/mhmsgwnd.\+c}!mswin\+\_\+message\+\_\+window\+\_\+size@{mswin\+\_\+message\+\_\+window\+\_\+size}}
\index{mswin\+\_\+message\+\_\+window\+\_\+size@{mswin\+\_\+message\+\_\+window\+\_\+size}!sys/wince/mhmsgwnd.\+c@{sys/wince/mhmsgwnd.\+c}}
\subsubsection[{mswin\+\_\+message\+\_\+window\+\_\+size}]{\setlength{\rightskip}{0pt plus 5cm}void mswin\+\_\+message\+\_\+window\+\_\+size (
\begin{DoxyParamCaption}
\item[{H\+W\+N\+D}]{h\+Wnd, }
\item[{L\+P\+S\+I\+Z\+E}]{sz}
\end{DoxyParamCaption}
)}}\label{sys_2wince_2mhmsgwnd_8c_a83f12dae73f3dbddc7af82b4cc3f90bf}


Definition at line 572 of file mhmsgwnd.\+c.



Referenced by mswin\+\_\+layout\+\_\+main\+\_\+window(), and on\+Create().


\begin{DoxyCode}
573 \{
574     \hyperlink{structmswin__nethack__message__window}{PNHMessageWindow} data;
575     RECT rt, client\_rt;
576 
577     GetWindowRect(hWnd, &rt);
578 
579     sz->cx = rt.right - rt.left;
580     sz->cy = rt.bottom - rt.top;
581 
582     data = (\hyperlink{sys_2wince_2mhmsgwnd_8c_aeb30ef6a644f488174e92ff6962b1728}{PNHMessageWindow})GetWindowLong(hWnd, GWL\_USERDATA);
583     \textcolor{keywordflow}{if}(data) \{
584         \textcolor{comment}{/* set size to accomodate MSG\_VISIBLE\_LINES, highligh rectangle and}
585 \textcolor{comment}{           horizontal scroll bar (difference between window rect and client rect */}
586         GetClientRect(hWnd, &client\_rt);
587         sz->cy = sz->cy-(client\_rt.bottom - client\_rt.top) +
588                  data->\hyperlink{structmswin__nethack__message__window_abcddabdea03ae3f33b1459fb81075dae}{yChar} * \hyperlink{sys_2wince_2mhmsgwnd_8c_ab4f3451af76d732aceaf36e3d3043dfb}{MSG\_VISIBLE\_LINES} + 4;
589     \}
590 \}
\end{DoxyCode}
\hypertarget{sys_2wince_2mhmsgwnd_8c_a12c253cbd080ff7e808f935f2bdf7680}{\index{sys/wince/mhmsgwnd.\+c@{sys/wince/mhmsgwnd.\+c}!N\+H\+Message\+Wnd\+Proc@{N\+H\+Message\+Wnd\+Proc}}
\index{N\+H\+Message\+Wnd\+Proc@{N\+H\+Message\+Wnd\+Proc}!sys/wince/mhmsgwnd.\+c@{sys/wince/mhmsgwnd.\+c}}
\subsubsection[{N\+H\+Message\+Wnd\+Proc}]{\setlength{\rightskip}{0pt plus 5cm}L\+R\+E\+S\+U\+L\+T C\+A\+L\+L\+B\+A\+C\+K N\+H\+Message\+Wnd\+Proc (
\begin{DoxyParamCaption}
\item[{H\+W\+N\+D}]{h\+Wnd, }
\item[{{\bf U\+I\+N\+T}}]{message, }
\item[{W\+P\+A\+R\+A\+M}]{w\+Param, }
\item[{L\+P\+A\+R\+A\+M}]{l\+Param}
\end{DoxyParamCaption}
)}}\label{sys_2wince_2mhmsgwnd_8c_a12c253cbd080ff7e808f935f2bdf7680}


Definition at line 107 of file mhmsgwnd.\+c.



References free(), Get\+N\+H\+App(), max, mswin\+\_\+nethack\+\_\+message\+\_\+window\+::max\+\_\+text, min, M\+S\+G\+\_\+\+L\+I\+N\+E\+S, M\+S\+G\+\_\+\+V\+I\+S\+I\+B\+L\+E\+\_\+\+L\+I\+N\+E\+S, on\+Create(), on\+M\+S\+N\+H\+\_\+\+H\+Scroll(), on\+M\+S\+N\+H\+\_\+\+V\+Scroll(), on\+M\+S\+N\+H\+Command(), on\+Paint(), T\+R\+U\+E, W\+M\+\_\+\+M\+S\+N\+H\+\_\+\+C\+O\+M\+M\+A\+N\+D, mswin\+\_\+nethack\+\_\+message\+\_\+window\+::x\+Char, mswin\+\_\+nethack\+\_\+message\+\_\+window\+::x\+Max, mswin\+\_\+nethack\+\_\+message\+\_\+window\+::x\+Page, mswin\+\_\+nethack\+\_\+message\+\_\+window\+::x\+Pos, mswin\+\_\+nethack\+\_\+message\+\_\+window\+::y\+Max, and mswin\+\_\+nethack\+\_\+message\+\_\+window\+::y\+Pos.



Referenced by register\+\_\+message\+\_\+window\+\_\+class().


\begin{DoxyCode}
108 \{
109     \textcolor{keywordflow}{switch} (message) 
110     \{
111     \textcolor{keywordflow}{case} WM\_CREATE:
112         \hyperlink{sys_2wince_2mhmsgwnd_8c_a8d537e532190de086a8d3636c37c57a9}{onCreate}( hWnd, wParam, lParam );
113         \textcolor{keywordflow}{break};
114 
115     \textcolor{keywordflow}{case} \hyperlink{sys_2wince_2mhmsg_8h_a55eac656fabe0d462816201ac756eab6}{WM\_MSNH\_COMMAND}: 
116         \hyperlink{sys_2wince_2mhmsgwnd_8c_ab1f0aceef05a1dec643246c7cbf5353c}{onMSNHCommand}(hWnd, wParam, lParam);
117         \textcolor{keywordflow}{break};
118 
119     \textcolor{keywordflow}{case} WM\_PAINT: 
120         \hyperlink{sys_2wince_2mhmsgwnd_8c_ad09a28d28eea324af31f4fdfa19a44b4}{onPaint}(hWnd);
121         \textcolor{keywordflow}{break};
122 
123     \textcolor{keywordflow}{case} WM\_SETFOCUS:
124         SetFocus(\hyperlink{sys_2wince_2winhack_8c_ad72c8d80c9fc01eaf07a3c2463ab88bd}{GetNHApp}()->hMainWnd);
125         \textcolor{keywordflow}{break};
126 
127 \textcolor{preprocessor}{#ifndef MSG\_WRAP\_TEXT}
128     \textcolor{keywordflow}{case} WM\_HSCROLL:
129         \hyperlink{sys_2wince_2mhmap_8c_ad9a3e28d520ba0d767dd1b281c074ea6}{onMSNH\_HScroll}(hWnd, wParam, lParam);
130         \textcolor{keywordflow}{break};
131 \textcolor{preprocessor}{#endif}
132 
133     \textcolor{keywordflow}{case} WM\_VSCROLL:
134         \hyperlink{sys_2wince_2mhmsgwnd_8c_a1f270ab41a83935a7f1a12c1ebf960c1}{onMSNH\_VScroll}(hWnd, wParam, lParam);
135         \textcolor{keywordflow}{break};
136 
137     \textcolor{keywordflow}{case} WM\_DESTROY: 
138     \{
139         \hyperlink{structmswin__nethack__message__window}{PNHMessageWindow} data;
140         data = (\hyperlink{sys_2wince_2mhmsgwnd_8c_aeb30ef6a644f488174e92ff6962b1728}{PNHMessageWindow})GetWindowLong(hWnd, GWL\_USERDATA);
141         \hyperlink{winproto_8h_a4bbec68d324de17b99fecede64b383ba}{free}(data);
142         SetWindowLong(hWnd, GWL\_USERDATA, (LONG)0);
143     \}   \textcolor{keywordflow}{break};
144 
145     \textcolor{keywordflow}{case} WM\_SIZE: 
146     \{ 
147         SCROLLINFO si;
148         \textcolor{keywordtype}{int} xNewSize; 
149         \textcolor{keywordtype}{int} yNewSize; 
150         \hyperlink{structmswin__nethack__message__window}{PNHMessageWindow} data;
151     
152         data = (\hyperlink{sys_2wince_2mhmsgwnd_8c_aeb30ef6a644f488174e92ff6962b1728}{PNHMessageWindow})GetWindowLong(hWnd, GWL\_USERDATA);
153  
154         xNewSize = LOWORD(lParam); 
155         yNewSize = HIWORD(lParam); 
156 
157         \textcolor{keywordflow}{if}( xNewSize>0 || yNewSize>0 ) \{
158 
159 \textcolor{preprocessor}{#ifndef MSG\_WRAP\_TEXT}
160             data->\hyperlink{structmswin__nethack__message__window_ad9bd73638158de8be8fae776b862e639}{xPage} = xNewSize/data->\hyperlink{structmswin__nethack__message__window_a3a2ddfa2880d9e42fe99c727c9f52a6f}{xChar};
161             data->\hyperlink{structmswin__nethack__message__window_a4a4612686946a3904c34c050753583cb}{xMax} = \hyperlink{hack_8h_affe776513b24d84b39af8ab0930fef7f}{max}(0, (\textcolor{keywordtype}{int})(1 + data->\hyperlink{structmswin__nethack__message__window_aa5bff51a92ce67744b3df06ad74fbc92}{max\_text} - data->
      \hyperlink{structmswin__nethack__message__window_ad9bd73638158de8be8fae776b862e639}{xPage}));
162             data->\hyperlink{structmswin__nethack__message__window_a2d63ab3f820de7f35b50f99c982dbf55}{xPos} = \hyperlink{hack_8h_abb702d8b501669a23aa0ab3b281b9384}{min}(data->\hyperlink{structmswin__nethack__message__window_a2d63ab3f820de7f35b50f99c982dbf55}{xPos}, data->\hyperlink{structmswin__nethack__message__window_a4a4612686946a3904c34c050753583cb}{xMax});
163 
164             ZeroMemory(&si, \textcolor{keyword}{sizeof}(si));
165             si.cbSize = \textcolor{keyword}{sizeof}(si); 
166             si.fMask  = SIF\_RANGE | SIF\_PAGE | SIF\_POS; 
167             si.nMin   = 0; 
168             si.nMax   = data->\hyperlink{structmswin__nethack__message__window_aa5bff51a92ce67744b3df06ad74fbc92}{max\_text}; 
169             si.nPage  = data->\hyperlink{structmswin__nethack__message__window_ad9bd73638158de8be8fae776b862e639}{xPage}; 
170             si.nPos   = data->\hyperlink{structmswin__nethack__message__window_a2d63ab3f820de7f35b50f99c982dbf55}{xPos};
171             SetScrollInfo(hWnd, SB\_HORZ, &si, \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE}); 
172 \textcolor{preprocessor}{#endif}
173         
174             data->\hyperlink{structmswin__nethack__message__window_a89b10107b69dc753430b418076cb300f}{yMax} = \hyperlink{sys_2wince_2mhmsgwnd_8c_aae28724cf681afbd0c0ce60297cfff1a}{MSG\_LINES}-1;
175             data->\hyperlink{structmswin__nethack__message__window_aa0b66211653f6020214bb6e9ba806e39}{yPos} = \hyperlink{hack_8h_abb702d8b501669a23aa0ab3b281b9384}{min}(data->\hyperlink{structmswin__nethack__message__window_aa0b66211653f6020214bb6e9ba806e39}{yPos}, data->\hyperlink{structmswin__nethack__message__window_a89b10107b69dc753430b418076cb300f}{yMax});
176 
177             ZeroMemory(&si, \textcolor{keyword}{sizeof}(si));
178             si.cbSize = \textcolor{keyword}{sizeof}(si); 
179             si.fMask  = SIF\_RANGE | SIF\_PAGE | SIF\_POS; 
180             si.nMin   = \hyperlink{sys_2wince_2mhmsgwnd_8c_ab4f3451af76d732aceaf36e3d3043dfb}{MSG\_VISIBLE\_LINES}; 
181             si.nMax   = data->\hyperlink{structmswin__nethack__message__window_a89b10107b69dc753430b418076cb300f}{yMax} + \hyperlink{sys_2wince_2mhmsgwnd_8c_ab4f3451af76d732aceaf36e3d3043dfb}{MSG\_VISIBLE\_LINES} - 1; 
182             si.nPage  = \hyperlink{sys_2wince_2mhmsgwnd_8c_ab4f3451af76d732aceaf36e3d3043dfb}{MSG\_VISIBLE\_LINES};
183             si.nPos   = data->\hyperlink{structmswin__nethack__message__window_aa0b66211653f6020214bb6e9ba806e39}{yPos};
184             SetScrollInfo(hWnd, SB\_VERT, &si, \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE}); 
185         \}
186     \} 
187     \textcolor{keywordflow}{break}; 
188 
189     \textcolor{keywordflow}{default}:
190         \textcolor{keywordflow}{return} DefWindowProc(hWnd, message, wParam, lParam);
191    \}
192    \textcolor{keywordflow}{return} 0;
193 \}
\end{DoxyCode}
\hypertarget{sys_2wince_2mhmsgwnd_8c_a8d537e532190de086a8d3636c37c57a9}{\index{sys/wince/mhmsgwnd.\+c@{sys/wince/mhmsgwnd.\+c}!on\+Create@{on\+Create}}
\index{on\+Create@{on\+Create}!sys/wince/mhmsgwnd.\+c@{sys/wince/mhmsgwnd.\+c}}
\subsubsection[{on\+Create}]{\setlength{\rightskip}{0pt plus 5cm}void on\+Create (
\begin{DoxyParamCaption}
\item[{H\+W\+N\+D}]{h\+Wnd, }
\item[{W\+P\+A\+R\+A\+M}]{w\+Param, }
\item[{L\+P\+A\+R\+A\+M}]{l\+Param}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{sys_2wince_2mhmsgwnd_8c_a8d537e532190de086a8d3636c37c57a9}


Definition at line 542 of file mhmsgwnd.\+c.



References A\+T\+R\+\_\+\+N\+O\+N\+E, F\+A\+L\+S\+E, malloc(), mswin\+\_\+nethack\+\_\+message\+\_\+window\+::max\+\_\+text, M\+A\+X\+W\+I\+N\+D\+O\+W\+T\+E\+X\+T, mswin\+\_\+get\+\_\+font(), N\+H\+W\+\_\+\+M\+E\+S\+S\+A\+G\+E, and panic().



Referenced by N\+H\+Message\+Wnd\+Proc().


\begin{DoxyCode}
543 \{
544     HDC hdc;
545     TEXTMETRIC \hyperlink{structtm}{tm}; 
546     \hyperlink{structmswin__nethack__message__window}{PNHMessageWindow} data;
547     HGDIOBJ saveFont;
548 
549     \textcolor{comment}{/* set window data */}
550     data = (\hyperlink{sys_2wince_2mhmsgwnd_8c_aeb30ef6a644f488174e92ff6962b1728}{PNHMessageWindow})\hyperlink{winproto_8h_ab028c02ac00afc0c1d3c568ccad68869}{malloc}(\textcolor{keyword}{sizeof}(\hyperlink{structmswin__nethack__message__window}{NHMessageWindow}));
551     \textcolor{keywordflow}{if}( !data ) \hyperlink{txt2iff_8c_ab0824b6f5eb51db9371d2e9a222249d3}{panic}(\textcolor{stringliteral}{"out of memory"});
552     ZeroMemory(data, \textcolor{keyword}{sizeof}(\hyperlink{structmswin__nethack__message__window}{NHMessageWindow}));
553     data->\hyperlink{structmswin__nethack__message__window_aa5bff51a92ce67744b3df06ad74fbc92}{max\_text} = \hyperlink{sys_2wince_2mhmsgwnd_8c_a7823f335c74115317a5e71c645dae320}{MAXWINDOWTEXT};
554     SetWindowLong(hWnd, GWL\_USERDATA, (LONG)data);
555 
556     \textcolor{comment}{/* Get the handle to the client area's device context. */}
557     hdc = GetDC(hWnd); 
558     saveFont = SelectObject(hdc, \hyperlink{sys_2wince_2mhfont_8c_a480013e685b85460be07910c65a1ef51}{mswin\_get\_font}(\hyperlink{wintype_8h_ab3d471e84a363992b5a483392d0b2389}{NHW\_MESSAGE}, 
      \hyperlink{wintype_8h_a20a20b74e8cf84ecfbf3c8665c059636}{ATR\_NONE}, hdc, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}));
559 
560     \textcolor{comment}{/* Extract font dimensions from the text metrics. */}
561     GetTextMetrics (hdc, &tm); 
562     data->\hyperlink{structmswin__nethack__message__window_a3a2ddfa2880d9e42fe99c727c9f52a6f}{xChar} = tm.tmAveCharWidth; 
563     data->\hyperlink{structmswin__nethack__message__window_a78d9744ac68cb597f4917b871ba9f134}{xUpper} = (tm.tmPitchAndFamily & 1 ? 3 : 2) * data->\hyperlink{structmswin__nethack__message__window_a3a2ddfa2880d9e42fe99c727c9f52a6f}{xChar}/2; 
564     data->\hyperlink{structmswin__nethack__message__window_abcddabdea03ae3f33b1459fb81075dae}{yChar} = tm.tmHeight + tm.tmExternalLeading; 
565     data->\hyperlink{structmswin__nethack__message__window_ad9bd73638158de8be8fae776b862e639}{xPage} = 1;
566 
567     \textcolor{comment}{/* Free the device context.  */}
568     SelectObject(hdc, saveFont);
569     ReleaseDC (hWnd, hdc); 
570 \}
\end{DoxyCode}
\hypertarget{sys_2wince_2mhmsgwnd_8c_a1f270ab41a83935a7f1a12c1ebf960c1}{\index{sys/wince/mhmsgwnd.\+c@{sys/wince/mhmsgwnd.\+c}!on\+M\+S\+N\+H\+\_\+\+V\+Scroll@{on\+M\+S\+N\+H\+\_\+\+V\+Scroll}}
\index{on\+M\+S\+N\+H\+\_\+\+V\+Scroll@{on\+M\+S\+N\+H\+\_\+\+V\+Scroll}!sys/wince/mhmsgwnd.\+c@{sys/wince/mhmsgwnd.\+c}}
\subsubsection[{on\+M\+S\+N\+H\+\_\+\+V\+Scroll}]{\setlength{\rightskip}{0pt plus 5cm}void on\+M\+S\+N\+H\+\_\+\+V\+Scroll (
\begin{DoxyParamCaption}
\item[{H\+W\+N\+D}]{h\+Wnd, }
\item[{W\+P\+A\+R\+A\+M}]{w\+Param, }
\item[{L\+P\+A\+R\+A\+M}]{l\+Param}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{sys_2wince_2mhmsgwnd_8c_a1f270ab41a83935a7f1a12c1ebf960c1}


Definition at line 307 of file mhmsgwnd.\+c.



References max, min, M\+S\+G\+\_\+\+V\+I\+S\+I\+B\+L\+E\+\_\+\+L\+I\+N\+E\+S, N\+U\+L\+L, T\+R\+U\+E, mswin\+\_\+nethack\+\_\+message\+\_\+window\+::y\+Max, and mswin\+\_\+nethack\+\_\+message\+\_\+window\+::y\+Pos.



Referenced by N\+H\+Message\+Wnd\+Proc().


\begin{DoxyCode}
308 \{
309     \hyperlink{structmswin__nethack__message__window}{PNHMessageWindow} data;
310     SCROLLINFO si; 
311     \textcolor{keywordtype}{int} yInc;
312  
313     \textcolor{comment}{/* get window data */}
314     data = (\hyperlink{sys_2wince_2mhmsgwnd_8c_aeb30ef6a644f488174e92ff6962b1728}{PNHMessageWindow})GetWindowLong(hWnd, GWL\_USERDATA);
315     
316     ZeroMemory(&si, \textcolor{keyword}{sizeof}(si));
317     si.cbSize = \textcolor{keyword}{sizeof}(si);
318     si.fMask = SIF\_PAGE | SIF\_POS;
319     GetScrollInfo(hWnd, SB\_VERT, &si);
320 
321     \textcolor{keywordflow}{switch}(LOWORD (wParam)) 
322     \{ 
323     \textcolor{comment}{// User clicked the shaft above the scroll box. }
324 
325     \textcolor{keywordflow}{case} SB\_PAGEUP: 
326          yInc = -(int)si.nPage; 
327          \textcolor{keywordflow}{break}; 
328 
329     \textcolor{comment}{// User clicked the shaft below the scroll box. }
330 
331     \textcolor{keywordflow}{case} SB\_PAGEDOWN: 
332          yInc = si.nPage; 
333          \textcolor{keywordflow}{break}; 
334 
335     \textcolor{comment}{// User clicked the top arrow. }
336 
337     \textcolor{keywordflow}{case} SB\_LINEUP: 
338          yInc = -1; 
339          \textcolor{keywordflow}{break}; 
340 
341     \textcolor{comment}{// User clicked the bottom arrow. }
342 
343     \textcolor{keywordflow}{case} SB\_LINEDOWN: 
344          yInc = 1; 
345          \textcolor{keywordflow}{break}; 
346 
347     \textcolor{comment}{// User dragged the scroll box. }
348 
349     \textcolor{keywordflow}{case} SB\_THUMBTRACK: 
350          yInc = HIWORD(wParam) - data->\hyperlink{structmswin__nethack__message__window_aa0b66211653f6020214bb6e9ba806e39}{yPos}; 
351          \textcolor{keywordflow}{break}; 
352 
353     \textcolor{keywordflow}{default}: 
354          yInc = 0; 
355     \}
356 
357     \textcolor{comment}{// If applying the vertical scrolling increment does not }
358     \textcolor{comment}{// take the scrolling position out of the scrolling range, }
359     \textcolor{comment}{// increment the scrolling position, adjust the position }
360     \textcolor{comment}{// of the scroll box, and update the window. UpdateWindow }
361     \textcolor{comment}{// sends the WM\_PAINT message. }
362 
363     \textcolor{keywordflow}{if} (yInc = \hyperlink{hack_8h_affe776513b24d84b39af8ab0930fef7f}{max}( \hyperlink{sys_2wince_2mhmsgwnd_8c_ab4f3451af76d732aceaf36e3d3043dfb}{MSG\_VISIBLE\_LINES} - data->\hyperlink{structmswin__nethack__message__window_aa0b66211653f6020214bb6e9ba806e39}{yPos}, 
364                     \hyperlink{hack_8h_abb702d8b501669a23aa0ab3b281b9384}{min}(yInc, data->\hyperlink{structmswin__nethack__message__window_a89b10107b69dc753430b418076cb300f}{yMax} - data->\hyperlink{structmswin__nethack__message__window_aa0b66211653f6020214bb6e9ba806e39}{yPos}))) 
365     \{ 
366         data->\hyperlink{structmswin__nethack__message__window_aa0b66211653f6020214bb6e9ba806e39}{yPos} += yInc; 
367         \textcolor{comment}{/* ScrollWindowEx(hWnd, 0, -data->yChar * yInc, }
368 \textcolor{comment}{            (CONST RECT *) NULL, (CONST RECT *) NULL, }
369 \textcolor{comment}{            (HRGN) NULL, (LPRECT) NULL, SW\_INVALIDATE | SW\_ERASE); }
370 \textcolor{comment}{        */}
371         InvalidateRect(hWnd, \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE});
372 
373         ZeroMemory(&si, \textcolor{keyword}{sizeof}(si));
374         si.cbSize = \textcolor{keyword}{sizeof}(si); 
375         si.fMask  = SIF\_POS; 
376         si.nPos   = data->\hyperlink{structmswin__nethack__message__window_aa0b66211653f6020214bb6e9ba806e39}{yPos}; 
377         SetScrollInfo(hWnd, SB\_VERT, &si, \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE}); 
378 
379         UpdateWindow (hWnd); 
380     \} 
381 \}
\end{DoxyCode}
\hypertarget{sys_2wince_2mhmsgwnd_8c_ab1f0aceef05a1dec643246c7cbf5353c}{\index{sys/wince/mhmsgwnd.\+c@{sys/wince/mhmsgwnd.\+c}!on\+M\+S\+N\+H\+Command@{on\+M\+S\+N\+H\+Command}}
\index{on\+M\+S\+N\+H\+Command@{on\+M\+S\+N\+H\+Command}!sys/wince/mhmsgwnd.\+c@{sys/wince/mhmsgwnd.\+c}}
\subsubsection[{on\+M\+S\+N\+H\+Command}]{\setlength{\rightskip}{0pt plus 5cm}void on\+M\+S\+N\+H\+Command (
\begin{DoxyParamCaption}
\item[{H\+W\+N\+D}]{h\+Wnd, }
\item[{W\+P\+A\+R\+A\+M}]{w\+Param, }
\item[{L\+P\+A\+R\+A\+M}]{l\+Param}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{sys_2wince_2mhmsgwnd_8c_ab1f0aceef05a1dec643246c7cbf5353c}


Definition at line 195 of file mhmsgwnd.\+c.



References mswin\+\_\+nhmsg\+\_\+putstr\+::append, A\+T\+R\+\_\+\+N\+O\+N\+E, window\+\_\+line\+::attr, mswin\+\_\+nhmsg\+\_\+putstr\+::attr, done, mswin\+\_\+nethack\+\_\+message\+\_\+window\+::dont\+\_\+care, F\+A\+L\+S\+E, mswin\+\_\+nethack\+\_\+message\+\_\+window\+::lines\+\_\+last\+\_\+turn, M\+A\+X\+W\+I\+N\+D\+O\+W\+T\+E\+X\+T, M\+S\+G\+\_\+\+L\+I\+N\+E\+S, M\+S\+N\+H\+\_\+\+M\+S\+G\+\_\+\+C\+L\+E\+A\+R\+\_\+\+W\+I\+N\+D\+O\+W, M\+S\+N\+H\+\_\+\+M\+S\+G\+\_\+\+P\+U\+T\+S\+T\+R, mswin\+\_\+nh\+\_\+poskey(), N\+U\+L\+L, window\+\_\+line\+::text, mswin\+\_\+nhmsg\+\_\+putstr\+::text, T\+R\+U\+E, mswin\+\_\+nethack\+\_\+message\+\_\+window\+::window\+\_\+text, mswin\+\_\+nethack\+\_\+message\+\_\+window\+::y\+Max, and mswin\+\_\+nethack\+\_\+message\+\_\+window\+::y\+Pos.



Referenced by N\+H\+Message\+Wnd\+Proc().


\begin{DoxyCode}
196 \{
197     \hyperlink{structmswin__nethack__message__window}{PNHMessageWindow} data;
198     
199     data = (\hyperlink{sys_2wince_2mhmsgwnd_8c_aeb30ef6a644f488174e92ff6962b1728}{PNHMessageWindow})GetWindowLong(hWnd, GWL\_USERDATA);
200     \textcolor{keywordflow}{switch}( wParam ) \{
201     \textcolor{keywordflow}{case} \hyperlink{sys_2wince_2mhmsg_8h_a483b8d3a386f1c5d76da1dff6ed549a8}{MSNH\_MSG\_PUTSTR}: 
202     \{
203         \hyperlink{structmswin__nhmsg__putstr}{PMSNHMsgPutstr} msg\_data = (\hyperlink{sys_2wince_2mhmsg_8h_ad6db1f0e39180f07f00581a93dbdd846}{PMSNHMsgPutstr})lParam;
204         SCROLLINFO si;
205         \textcolor{keywordtype}{char}* p;
206 
207         \textcolor{keywordflow}{if}( msg\_data->\hyperlink{structmswin__nhmsg__putstr_af1e2c11564b34538c13ee0ec5c9dda56}{append} ) \{
208             strncat(data->\hyperlink{structmswin__nethack__message__window_a0e392ae401c1cc51fd7aa0cc8ecbae95}{window\_text}[\hyperlink{sys_2wince_2mhmsgwnd_8c_aae28724cf681afbd0c0ce60297cfff1a}{MSG\_LINES}-1].\hyperlink{structwindow__line_a080d799babb8e16480b257e64df3d660}{text}, msg\_data->
      \hyperlink{structmswin__nhmsg__putstr_a27f09d7286c01fe17c1289761b63502e}{text}, 
209                     \hyperlink{sys_2wince_2mhmsgwnd_8c_a7823f335c74115317a5e71c645dae320}{MAXWINDOWTEXT} - strlen(data->\hyperlink{structmswin__nethack__message__window_a0e392ae401c1cc51fd7aa0cc8ecbae95}{window\_text}[
      \hyperlink{sys_2wince_2mhmsgwnd_8c_aae28724cf681afbd0c0ce60297cfff1a}{MSG\_LINES}-1].\hyperlink{structwindow__line_a080d799babb8e16480b257e64df3d660}{text}));
210         \} \textcolor{keywordflow}{else} \{
211             \textcolor{comment}{/* check if the string is empty */}
212             \textcolor{keywordflow}{for}(p = data->\hyperlink{structmswin__nethack__message__window_a0e392ae401c1cc51fd7aa0cc8ecbae95}{window\_text}[\hyperlink{sys_2wince_2mhmsgwnd_8c_aae28724cf681afbd0c0ce60297cfff1a}{MSG\_LINES}-1].\hyperlink{structwindow__line_a080d799babb8e16480b257e64df3d660}{text}; *p && isspace(*p); p++);
213 
214             \textcolor{keywordflow}{if}( *p ) \{
215                 \textcolor{comment}{/* last string is not empty - scroll up */}
216                 memmove(&data->\hyperlink{structmswin__nethack__message__window_a0e392ae401c1cc51fd7aa0cc8ecbae95}{window\_text}[0],
217                         &data->\hyperlink{structmswin__nethack__message__window_a0e392ae401c1cc51fd7aa0cc8ecbae95}{window\_text}[1],
218                         (\hyperlink{sys_2wince_2mhmsgwnd_8c_aae28724cf681afbd0c0ce60297cfff1a}{MSG\_LINES}-1)*\textcolor{keyword}{sizeof}(data->\hyperlink{structmswin__nethack__message__window_a0e392ae401c1cc51fd7aa0cc8ecbae95}{window\_text}[0]));
219             \}
220 
221             \textcolor{comment}{/* append new text to the end of the array */}
222             data->\hyperlink{structmswin__nethack__message__window_a0e392ae401c1cc51fd7aa0cc8ecbae95}{window\_text}[\hyperlink{sys_2wince_2mhmsgwnd_8c_aae28724cf681afbd0c0ce60297cfff1a}{MSG\_LINES}-1].\hyperlink{structwindow__line_a58077cb852250ed547bc6cfd0310db23}{attr} = msg\_data->
      \hyperlink{structmswin__nhmsg__putstr_aefa22819f8c3ca3574cfbcfd583ded58}{attr};
223             strncpy(data->\hyperlink{structmswin__nethack__message__window_a0e392ae401c1cc51fd7aa0cc8ecbae95}{window\_text}[\hyperlink{sys_2wince_2mhmsgwnd_8c_aae28724cf681afbd0c0ce60297cfff1a}{MSG\_LINES}-1].\hyperlink{structwindow__line_a080d799babb8e16480b257e64df3d660}{text}, msg\_data->
      \hyperlink{structmswin__nhmsg__putstr_a27f09d7286c01fe17c1289761b63502e}{text}, \hyperlink{sys_2wince_2mhmsgwnd_8c_a7823f335c74115317a5e71c645dae320}{MAXWINDOWTEXT});
224         \}
225         
226         \textcolor{comment}{/* reset V-scroll position to display new text */}
227         data->\hyperlink{structmswin__nethack__message__window_aa0b66211653f6020214bb6e9ba806e39}{yPos} = data->\hyperlink{structmswin__nethack__message__window_a89b10107b69dc753430b418076cb300f}{yMax};
228 
229         ZeroMemory(&si, \textcolor{keyword}{sizeof}(si));
230         si.cbSize = \textcolor{keyword}{sizeof}(si);
231         si.fMask  = SIF\_POS; 
232         si.nPos   = data->\hyperlink{structmswin__nethack__message__window_aa0b66211653f6020214bb6e9ba806e39}{yPos}; 
233         SetScrollInfo(hWnd, SB\_VERT, &si, \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE});
234 
235         \textcolor{comment}{/* deal with overflows */}
236         data->\hyperlink{structmswin__nethack__message__window_a15ac3ae0e42d4bf54132068138905b66}{lines\_last\_turn}++;
237         \textcolor{keywordflow}{if}( !data->\hyperlink{structmswin__nethack__message__window_a2a4528b8e453d2d46e33c1d6262c64c5}{dont\_care} && data->\hyperlink{structmswin__nethack__message__window_a15ac3ae0e42d4bf54132068138905b66}{lines\_last\_turn}>=
      \hyperlink{sys_2wince_2mhmsgwnd_8c_aae28724cf681afbd0c0ce60297cfff1a}{MSG\_LINES}-2 ) \{
238             \textcolor{keywordtype}{char} c;
239             BOOL \hyperlink{winX_8c_a032589f4f70300762622fd253db008d0}{done};
240 
241             \textcolor{comment}{/* append "--More--" to the message window text (cannot call putstr }
242 \textcolor{comment}{               here - infinite recursion) */}
243             memmove(&data->\hyperlink{structmswin__nethack__message__window_a0e392ae401c1cc51fd7aa0cc8ecbae95}{window\_text}[0],
244                     &data->\hyperlink{structmswin__nethack__message__window_a0e392ae401c1cc51fd7aa0cc8ecbae95}{window\_text}[1],
245                     (\hyperlink{sys_2wince_2mhmsgwnd_8c_aae28724cf681afbd0c0ce60297cfff1a}{MSG\_LINES}-1)*\textcolor{keyword}{sizeof}(data->\hyperlink{structmswin__nethack__message__window_a0e392ae401c1cc51fd7aa0cc8ecbae95}{window\_text}[0]));
246             data->\hyperlink{structmswin__nethack__message__window_a0e392ae401c1cc51fd7aa0cc8ecbae95}{window\_text}[\hyperlink{sys_2wince_2mhmsgwnd_8c_aae28724cf681afbd0c0ce60297cfff1a}{MSG\_LINES}-1].\hyperlink{structwindow__line_a58077cb852250ed547bc6cfd0310db23}{attr} = 
      \hyperlink{wintype_8h_a20a20b74e8cf84ecfbf3c8665c059636}{ATR\_NONE};
247             strncpy(data->\hyperlink{structmswin__nethack__message__window_a0e392ae401c1cc51fd7aa0cc8ecbae95}{window\_text}[\hyperlink{sys_2wince_2mhmsgwnd_8c_aae28724cf681afbd0c0ce60297cfff1a}{MSG\_LINES}-1].\hyperlink{structwindow__line_a080d799babb8e16480b257e64df3d660}{text}, \textcolor{stringliteral}{"--More--"}, 
      \hyperlink{sys_2wince_2mhmsgwnd_8c_a7823f335c74115317a5e71c645dae320}{MAXWINDOWTEXT});
248             
249             \textcolor{comment}{/* update window content */}
250             InvalidateRect(hWnd, \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE});
251 
252 \textcolor{preprocessor}{#if defined(WIN\_CE\_SMARTPHONE)}
253             NHSPhoneSetKeypadFromString( \textcolor{stringliteral}{"\(\backslash\)033- <>"} );
254 \textcolor{preprocessor}{#endif}
255 
256             done = \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
257             \textcolor{keywordflow}{while}( !done ) \{
258                 \textcolor{keywordtype}{int} x, y, mod;
259                 c = \hyperlink{sys_2wince_2mswproc_8c_a090070d7e51913ace8e1949512da73ec}{mswin\_nh\_poskey}(&x, &y, &mod);
260                 \textcolor{keywordflow}{switch} (c) \{
261                     \textcolor{comment}{/* ESC indicates that we can safely discard any further messages during this turn */}
262                     \textcolor{keywordflow}{case} \textcolor{charliteral}{'\(\backslash\)033'}:
263                         data->\hyperlink{structmswin__nethack__message__window_a2a4528b8e453d2d46e33c1d6262c64c5}{dont\_care} = 1;
264                         done = \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
265                     \textcolor{keywordflow}{break};
266 
267                     \textcolor{keywordflow}{case} \textcolor{charliteral}{'<'}:
268                         SendMessage(hWnd, WM\_VSCROLL, MAKEWPARAM(SB\_LINEUP, 0), (LPARAM)
      \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}); 
269                     \textcolor{keywordflow}{break};
270 
271                     \textcolor{keywordflow}{case} \textcolor{charliteral}{'>'}:
272                         SendMessage(hWnd, WM\_VSCROLL, MAKEWPARAM(SB\_LINEDOWN, 0), (LPARAM)
      \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}); 
273                     \textcolor{keywordflow}{break};
274 
275                     \textcolor{comment}{/* continue scrolling on any key */}
276                     \textcolor{keywordflow}{default}:
277                         data->\hyperlink{structmswin__nethack__message__window_a15ac3ae0e42d4bf54132068138905b66}{lines\_last\_turn} = 0;
278                         done = \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
279                     \textcolor{keywordflow}{break};
280                 \}
281             \}
282 
283 \textcolor{preprocessor}{#if defined(WIN\_CE\_SMARTPHONE)}
284             NHSPhoneSetKeypadDefault();
285 \textcolor{preprocessor}{#endif}
286             \textcolor{comment}{/* remove "--More--" from the message window text */}
287             data->\hyperlink{structmswin__nethack__message__window_a0e392ae401c1cc51fd7aa0cc8ecbae95}{window\_text}[\hyperlink{sys_2wince_2mhmsgwnd_8c_aae28724cf681afbd0c0ce60297cfff1a}{MSG\_LINES}-1].\hyperlink{structwindow__line_a58077cb852250ed547bc6cfd0310db23}{attr} = 
      \hyperlink{wintype_8h_a20a20b74e8cf84ecfbf3c8665c059636}{ATR\_NONE};
288             strncpy(data->\hyperlink{structmswin__nethack__message__window_a0e392ae401c1cc51fd7aa0cc8ecbae95}{window\_text}[\hyperlink{sys_2wince_2mhmsgwnd_8c_aae28724cf681afbd0c0ce60297cfff1a}{MSG\_LINES}-1].\hyperlink{structwindow__line_a080d799babb8e16480b257e64df3d660}{text}, \textcolor{stringliteral}{" "}, 
      \hyperlink{sys_2wince_2mhmsgwnd_8c_a7823f335c74115317a5e71c645dae320}{MAXWINDOWTEXT});
289         \}
290             
291         \textcolor{comment}{/* update window content */}
292         InvalidateRect(hWnd, \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE});
293 
294 \textcolor{preprocessor}{#ifdef USER\_SOUNDS}
295         play\_sound\_for\_message(msg\_data->\hyperlink{structmswin__nhmsg__putstr_a27f09d7286c01fe17c1289761b63502e}{text});
296 \textcolor{preprocessor}{#endif}
297     \}
298     \textcolor{keywordflow}{break};
299 
300     \textcolor{keywordflow}{case} \hyperlink{sys_2wince_2mhmsg_8h_a569048188a906452ebb6b755cd9ac662}{MSNH\_MSG\_CLEAR\_WINDOW}:
301         data->\hyperlink{structmswin__nethack__message__window_a15ac3ae0e42d4bf54132068138905b66}{lines\_last\_turn} = 0;
302         data->\hyperlink{structmswin__nethack__message__window_a2a4528b8e453d2d46e33c1d6262c64c5}{dont\_care} = 0;
303     \textcolor{keywordflow}{break};
304     \}
305 \}
\end{DoxyCode}
\hypertarget{sys_2wince_2mhmsgwnd_8c_ad09a28d28eea324af31f4fdfa19a44b4}{\index{sys/wince/mhmsgwnd.\+c@{sys/wince/mhmsgwnd.\+c}!on\+Paint@{on\+Paint}}
\index{on\+Paint@{on\+Paint}!sys/wince/mhmsgwnd.\+c@{sys/wince/mhmsgwnd.\+c}}
\subsubsection[{on\+Paint}]{\setlength{\rightskip}{0pt plus 5cm}void on\+Paint (
\begin{DoxyParamCaption}
\item[{H\+W\+N\+D}]{h\+Wnd}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{sys_2wince_2mhmsgwnd_8c_ad09a28d28eea324af31f4fdfa19a44b4}


Definition at line 458 of file mhmsgwnd.\+c.



References window\+\_\+line\+::attr, F\+A\+L\+S\+E, max, M\+A\+X\+W\+I\+N\+D\+O\+W\+T\+E\+X\+T, min, M\+S\+G\+\_\+\+L\+I\+N\+E\+S, M\+S\+W\+I\+N\+\_\+\+C\+O\+L\+O\+R\+\_\+\+B\+G, M\+S\+W\+I\+N\+\_\+\+C\+O\+L\+O\+R\+\_\+\+F\+G, mswin\+\_\+get\+\_\+color(), mswin\+\_\+get\+\_\+font(), N\+H\+\_\+\+A2\+W, N\+H\+W\+\_\+\+M\+E\+S\+S\+A\+G\+E, window\+\_\+line\+::text, mswin\+\_\+nethack\+\_\+message\+\_\+window\+::window\+\_\+text, mswin\+\_\+nethack\+\_\+message\+\_\+window\+::x\+Char, mswin\+\_\+nethack\+\_\+message\+\_\+window\+::x\+Pos, mswin\+\_\+nethack\+\_\+message\+\_\+window\+::y\+Char, and mswin\+\_\+nethack\+\_\+message\+\_\+window\+::y\+Pos.



Referenced by N\+H\+Message\+Wnd\+Proc().


\begin{DoxyCode}
459 \{
460     PAINTSTRUCT ps;
461     HDC hdc;
462     \hyperlink{structmswin__nethack__message__window}{PNHMessageWindow} data;
463     RECT client\_rt, draw\_rt;
464     \textcolor{keywordtype}{int} FirstLine, LastLine;
465     \textcolor{keywordtype}{int} i, x, y;
466     HGDIOBJ oldFont;
467     TCHAR wbuf[\hyperlink{sys_2wince_2mhmsgwnd_8c_a7823f335c74115317a5e71c645dae320}{MAXWINDOWTEXT}+2];
468     \textcolor{keywordtype}{size\_t} wlen;
469     COLORREF OldBg, OldFg;
470 
471     hdc = BeginPaint(hWnd, &ps);
472 
473     OldBg = SetBkColor(hdc, \hyperlink{mhcolor_8c_ab1f83ed2725328b54f6d14fc76499f77}{mswin\_get\_color}(\hyperlink{wintype_8h_ab3d471e84a363992b5a483392d0b2389}{NHW\_MESSAGE}, 
      \hyperlink{mhcolor_8h_a95a6bcc0be3a6670574883b5814f5b53}{MSWIN\_COLOR\_BG}));
474     OldFg = SetTextColor(hdc, \hyperlink{mhcolor_8c_ab1f83ed2725328b54f6d14fc76499f77}{mswin\_get\_color}(\hyperlink{wintype_8h_ab3d471e84a363992b5a483392d0b2389}{NHW\_MESSAGE}, 
      \hyperlink{mhcolor_8h_adebe97ec6aadf867c14e22370fffe9d8}{MSWIN\_COLOR\_FG})); 
475 
476     data = (\hyperlink{sys_2wince_2mhmsgwnd_8c_aeb30ef6a644f488174e92ff6962b1728}{PNHMessageWindow})GetWindowLong(hWnd, GWL\_USERDATA);
477 
478     GetClientRect(hWnd, &client\_rt);
479 
480     \textcolor{keywordflow}{if}( !IsRectEmpty(&ps.rcPaint) ) \{
481         FirstLine = \hyperlink{hack_8h_affe776513b24d84b39af8ab0930fef7f}{max} (0, data->\hyperlink{structmswin__nethack__message__window_aa0b66211653f6020214bb6e9ba806e39}{yPos} - (client\_rt.bottom - ps.rcPaint.top)/data->
      \hyperlink{structmswin__nethack__message__window_abcddabdea03ae3f33b1459fb81075dae}{yChar} + 1); 
482         LastLine = \hyperlink{hack_8h_abb702d8b501669a23aa0ab3b281b9384}{min} (\hyperlink{sys_2wince_2mhmsgwnd_8c_aae28724cf681afbd0c0ce60297cfff1a}{MSG\_LINES}-1, data->\hyperlink{structmswin__nethack__message__window_aa0b66211653f6020214bb6e9ba806e39}{yPos} - (client\_rt.bottom - ps.rcPaint.bottom)/
      data->\hyperlink{structmswin__nethack__message__window_abcddabdea03ae3f33b1459fb81075dae}{yChar}); 
483         y = \hyperlink{hack_8h_abb702d8b501669a23aa0ab3b281b9384}{min}( ps.rcPaint.bottom, client\_rt.bottom - 2); 
484         \textcolor{keywordflow}{for} (i=LastLine; i>=FirstLine; i--) \{ 
485             \textcolor{keywordflow}{if}( i==\hyperlink{sys_2wince_2mhmsgwnd_8c_aae28724cf681afbd0c0ce60297cfff1a}{MSG\_LINES}-1 ) \{
486                 x = data->\hyperlink{structmswin__nethack__message__window_a3a2ddfa2880d9e42fe99c727c9f52a6f}{xChar} * (2 - data->\hyperlink{structmswin__nethack__message__window_a2d63ab3f820de7f35b50f99c982dbf55}{xPos}); 
487             \} \textcolor{keywordflow}{else} \{
488                 x = data->\hyperlink{structmswin__nethack__message__window_a3a2ddfa2880d9e42fe99c727c9f52a6f}{xChar} * (4 - data->\hyperlink{structmswin__nethack__message__window_a2d63ab3f820de7f35b50f99c982dbf55}{xPos}); 
489             \}
490 
491 
492             \textcolor{keywordflow}{if}( strlen(data->\hyperlink{structmswin__nethack__message__window_a0e392ae401c1cc51fd7aa0cc8ecbae95}{window\_text}[i].\hyperlink{structwindow__line_a080d799babb8e16480b257e64df3d660}{text})>0 ) \{
493                 \textcolor{comment}{/* convert to UNICODE */}
494                 \hyperlink{wceconf_8h_a2ed36c9ee770dfe5f2d0e3088a62adad}{NH\_A2W}(data->\hyperlink{structmswin__nethack__message__window_a0e392ae401c1cc51fd7aa0cc8ecbae95}{window\_text}[i].\hyperlink{structwindow__line_a080d799babb8e16480b257e64df3d660}{text}, wbuf, \textcolor{keyword}{sizeof}(wbuf));
495                 wlen = \_tcslen(wbuf);
496 
497                 \textcolor{comment}{/* calculate text height */}
498                 draw\_rt.left = x;
499                 draw\_rt.right = client\_rt.right;
500                 draw\_rt.top = y - data->\hyperlink{structmswin__nethack__message__window_abcddabdea03ae3f33b1459fb81075dae}{yChar};
501                 draw\_rt.bottom = y;
502 
503                 oldFont = SelectObject(hdc, \hyperlink{sys_2wince_2mhfont_8c_a480013e685b85460be07910c65a1ef51}{mswin\_get\_font}(
      \hyperlink{wintype_8h_ab3d471e84a363992b5a483392d0b2389}{NHW\_MESSAGE}, data->\hyperlink{structmswin__nethack__message__window_a0e392ae401c1cc51fd7aa0cc8ecbae95}{window\_text}[i].\hyperlink{structwindow__line_a58077cb852250ed547bc6cfd0310db23}{attr}, hdc, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}));
504 
505 \textcolor{preprocessor}{#ifdef MSG\_WRAP\_TEXT                }
506                 DrawText(hdc, wbuf, wlen, &draw\_rt, DT\_NOPREFIX | DT\_WORDBREAK | DT\_CALCRECT);
507                 draw\_rt.top = y - (draw\_rt.bottom - draw\_rt.top);
508                 draw\_rt.bottom = y;
509                 DrawText(hdc, wbuf, wlen, &draw\_rt, DT\_NOPREFIX | DT\_WORDBREAK);
510 \textcolor{preprocessor}{#else}
511                 DrawText(hdc, wbuf, wlen, &draw\_rt, DT\_NOPREFIX );
512 \textcolor{preprocessor}{#endif}
513                 SelectObject(hdc, oldFont);
514 
515                 y -= draw\_rt.bottom - draw\_rt.top;
516             \} \textcolor{keywordflow}{else} \{
517                 y -= data->\hyperlink{structmswin__nethack__message__window_abcddabdea03ae3f33b1459fb81075dae}{yChar};
518             \}
519 
520             \textcolor{comment}{/* highligh the last line */}
521             \textcolor{keywordflow}{if}( i==\hyperlink{sys_2wince_2mhmsgwnd_8c_aae28724cf681afbd0c0ce60297cfff1a}{MSG\_LINES}-1 ) \{
522                 draw\_rt.left = client\_rt.left;
523                 draw\_rt.right = draw\_rt.left + 2*data->\hyperlink{structmswin__nethack__message__window_a3a2ddfa2880d9e42fe99c727c9f52a6f}{xChar};
524                 DrawText(hdc, TEXT(\textcolor{stringliteral}{"> "}), 2, &draw\_rt, DT\_NOPREFIX );
525 
526                 y -= 2;
527                 draw\_rt.left = client\_rt.left;
528                 draw\_rt.right = client\_rt.right;
529                 draw\_rt.top -= 2;
530                 draw\_rt.bottom = client\_rt.bottom;
531                 DrawEdge(hdc, &draw\_rt, EDGE\_SUNKEN, BF\_TOP );
532                 DrawEdge(hdc, &draw\_rt, EDGE\_SUNKEN, BF\_BOTTOM );
533             \}
534         \}
535     \}
536 
537     SetTextColor (hdc, OldFg);
538     SetBkColor (hdc, OldBg);
539     EndPaint(hWnd, &ps);
540 \}
\end{DoxyCode}
\hypertarget{sys_2wince_2mhmsgwnd_8c_a97d883487d43019621db34a81921eb27}{\index{sys/wince/mhmsgwnd.\+c@{sys/wince/mhmsgwnd.\+c}!register\+\_\+message\+\_\+window\+\_\+class@{register\+\_\+message\+\_\+window\+\_\+class}}
\index{register\+\_\+message\+\_\+window\+\_\+class@{register\+\_\+message\+\_\+window\+\_\+class}!sys/wince/mhmsgwnd.\+c@{sys/wince/mhmsgwnd.\+c}}
\subsubsection[{register\+\_\+message\+\_\+window\+\_\+class}]{\setlength{\rightskip}{0pt plus 5cm}void register\+\_\+message\+\_\+window\+\_\+class (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{sys_2wince_2mhmsgwnd_8c_a97d883487d43019621db34a81921eb27}


Definition at line 88 of file mhmsgwnd.\+c.



References Get\+N\+H\+App(), mswin\+\_\+nhwindow\+\_\+app\+::h\+App, M\+S\+W\+I\+N\+\_\+\+C\+O\+L\+O\+R\+\_\+\+B\+G, mswin\+\_\+get\+\_\+brush(), N\+H\+Message\+Wnd\+Proc(), N\+H\+W\+\_\+\+M\+E\+S\+S\+A\+G\+E, N\+U\+L\+L, and sz\+Message\+Window\+Class.



Referenced by mswin\+\_\+init\+\_\+message\+\_\+window().


\begin{DoxyCode}
89 \{
90     WNDCLASS wcex;
91     ZeroMemory( &wcex, \textcolor{keyword}{sizeof}(wcex));
92 
93     wcex.style          = CS\_NOCLOSE;
94     wcex.lpfnWndProc    = (WNDPROC)\hyperlink{sys_2wince_2mhmsgwnd_8c_a12c253cbd080ff7e808f935f2bdf7680}{NHMessageWndProc};
95     wcex.cbClsExtra     = 0;
96     wcex.cbWndExtra     = 0;
97     wcex.hInstance      = \hyperlink{sys_2wince_2winhack_8c_ad72c8d80c9fc01eaf07a3c2463ab88bd}{GetNHApp}()->\hyperlink{structmswin__nhwindow__app_ae3a365ad66195c8e1d915242897c3f24}{hApp};
98     wcex.hIcon          = \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
99     wcex.hCursor        = LoadCursor(\hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, IDC\_ARROW);
100     wcex.hbrBackground  = \hyperlink{mhcolor_8c_ace6d2982c253de50f648605b5352e083}{mswin\_get\_brush}(\hyperlink{wintype_8h_ab3d471e84a363992b5a483392d0b2389}{NHW\_MESSAGE}, 
      \hyperlink{mhcolor_8h_a95a6bcc0be3a6670574883b5814f5b53}{MSWIN\_COLOR\_BG});
101     wcex.lpszMenuName   = \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
102     wcex.lpszClassName  = \hyperlink{sys_2wince_2mhmsgwnd_8c_a787ab0593b5cdc6e80e8602488f03810}{szMessageWindowClass};
103 
104     RegisterClass(&wcex);
105 \}
\end{DoxyCode}


\subsection{Variable Documentation}
\hypertarget{sys_2wince_2mhmsgwnd_8c_a787ab0593b5cdc6e80e8602488f03810}{\index{sys/wince/mhmsgwnd.\+c@{sys/wince/mhmsgwnd.\+c}!sz\+Message\+Window\+Class@{sz\+Message\+Window\+Class}}
\index{sz\+Message\+Window\+Class@{sz\+Message\+Window\+Class}!sys/wince/mhmsgwnd.\+c@{sys/wince/mhmsgwnd.\+c}}
\subsubsection[{sz\+Message\+Window\+Class}]{\setlength{\rightskip}{0pt plus 5cm}T\+C\+H\+A\+R sz\+Message\+Window\+Class\mbox{[}$\,$\mbox{]} = T\+E\+X\+T(\char`\"{}M\+S\+N\+H\+Message\+Wnd\+Class\char`\"{})\hspace{0.3cm}{\ttfamily [static]}}}\label{sys_2wince_2mhmsgwnd_8c_a787ab0593b5cdc6e80e8602488f03810}


Definition at line 39 of file mhmsgwnd.\+c.



Referenced by mswin\+\_\+init\+\_\+message\+\_\+window(), and register\+\_\+message\+\_\+window\+\_\+class().

