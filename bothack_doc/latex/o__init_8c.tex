\hypertarget{o__init_8c}{\section{nethack/src/o\+\_\+init.c File Reference}
\label{o__init_8c}\index{nethack/src/o\+\_\+init.\+c@{nethack/src/o\+\_\+init.\+c}}
}
{\ttfamily \#include \char`\"{}hack.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}lev.\+h\char`\"{}}\\*
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{o__init_8c_aa524dfeaf01fe85d285b82ca79925448}{C\+O\+P\+Y\+\_\+\+O\+B\+J\+\_\+\+D\+E\+S\+C\+R}(o\+\_\+dst, o\+\_\+src)~o\+\_\+dst.\+oc\+\_\+descr\+\_\+idx = o\+\_\+src.\+oc\+\_\+descr\+\_\+idx
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{hack_8h_a0c2ce0eef98596c51b3a10e50a29dd5e}{S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} void \hyperlink{o__init_8c_a258d73b38a2c332d22f445d07b3a4dd7}{F\+D\+E\+C\+L} (\hyperlink{o__init_8c_ae0cad4a407386545a7f08a0bf8f7aabc}{setgemprobs},(\hyperlink{structd__level}{d\+\_\+level} $\ast$))
\item 
\hyperlink{hack_8h_a0c2ce0eef98596c51b3a10e50a29dd5e}{S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} void \hyperlink{o__init_8c_a70256784553c5c848753b46a99791b20}{F\+D\+E\+C\+L} (\hyperlink{o__init_8c_a1eec227a492608baee9f1c80704b635c}{shuffle},(int, int, \hyperlink{wingem1_8c_aa2723cc3af18a5199ab4ce7cca84d82b}{B\+O\+O\+L\+E\+A\+N\+\_\+\+P}))
\item 
\hyperlink{hack_8h_a0c2ce0eef98596c51b3a10e50a29dd5e}{S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} void \hyperlink{o__init_8c_ae3e42bd8eb1ca0b5f810fee73951226d}{N\+D\+E\+C\+L} (\hyperlink{o__init_8c_afa72877a8cccbee09fd0aa3b5536f8c6}{shuffle\+\_\+all})
\item 
\hyperlink{hack_8h_a0c2ce0eef98596c51b3a10e50a29dd5e}{S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} \hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} \hyperlink{o__init_8c_ae0620c108eb3a7c3076c89a1397398f1}{F\+D\+E\+C\+L} (\hyperlink{o__init_8c_ac0ca3f9718fe40a62906cda6a2f73fc7}{interesting\+\_\+to\+\_\+discover},(int))
\item 
\hyperlink{hack_8h_a6584b0687fb4e0040a85bbcdaa3e0ee1}{S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} void \hyperlink{o__init_8c_ae0cad4a407386545a7f08a0bf8f7aabc}{setgemprobs} (\hyperlink{structd__level}{d\+\_\+level} $\ast$dlev)
\item 
\hyperlink{hack_8h_a6584b0687fb4e0040a85bbcdaa3e0ee1}{S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} void \hyperlink{o__init_8c_a1eec227a492608baee9f1c80704b635c}{shuffle} (int o\+\_\+low, int o\+\_\+high, \hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} domaterial)
\item 
void \hyperlink{o__init_8c_acaa33f79f89e4dacede48efcc3bd950a}{init\+\_\+objects} ()
\item 
\hyperlink{hack_8h_a6584b0687fb4e0040a85bbcdaa3e0ee1}{S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} void \hyperlink{o__init_8c_afa72877a8cccbee09fd0aa3b5536f8c6}{shuffle\+\_\+all} ()
\item 
int \hyperlink{o__init_8c_ad86d1a5ed7534420dedbb79b6fe8a20f}{find\+\_\+skates} ()
\item 
void \hyperlink{o__init_8c_a524e90921ab3f612ad9dac64f743c2c2}{oinit} ()
\item 
void \hyperlink{o__init_8c_acf5509243a1e3ffc44ba1e46a5b635c7}{savenames} (int fd, int mode)
\item 
void \hyperlink{o__init_8c_abbde51c65ac8cdf07f79c3cb648cf70e}{restnames} (int fd)
\item 
void \hyperlink{o__init_8c_a0f0f34a74cad20535d58823ed431b447}{discover\+\_\+object} (int oindx, \hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} mark\+\_\+as\+\_\+known, \hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} credit\+\_\+hero)
\item 
void \hyperlink{o__init_8c_ac1ce075c694df477bd0ea03fdc053da8}{undiscover\+\_\+object} (int oindx)
\item 
\hyperlink{hack_8h_a6584b0687fb4e0040a85bbcdaa3e0ee1}{S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} \hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} \hyperlink{o__init_8c_ac0ca3f9718fe40a62906cda6a2f73fc7}{interesting\+\_\+to\+\_\+discover} (int i)
\item 
int \hyperlink{o__init_8c_ae7f2bb7b8c94492b4038bf4bf0fcada7}{dodiscovered} ()
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{config1_8h_a9987bf629301f5fe76ddd96aa2717ca1}{N\+E\+A\+R\+D\+A\+T\+A} short \hyperlink{o__init_8c_a57a5ccdaa3a977cb82a16d7ec656f220}{disco} \mbox{[}N\+U\+M\+\_\+\+O\+B\+J\+E\+C\+T\+S\mbox{]} = \hyperlink{hack_8h_a35beee7b0f2f3e294c4a4a69a5f02df4}{D\+U\+M\+M\+Y}
\item 
static short \hyperlink{o__init_8c_aed4a1c28f7f8fc9c1f21046ffe22a118}{uniq\+\_\+objs} \mbox{[}$\,$\mbox{]}
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\hypertarget{o__init_8c_aa524dfeaf01fe85d285b82ca79925448}{\index{o\+\_\+init.\+c@{o\+\_\+init.\+c}!C\+O\+P\+Y\+\_\+\+O\+B\+J\+\_\+\+D\+E\+S\+C\+R@{C\+O\+P\+Y\+\_\+\+O\+B\+J\+\_\+\+D\+E\+S\+C\+R}}
\index{C\+O\+P\+Y\+\_\+\+O\+B\+J\+\_\+\+D\+E\+S\+C\+R@{C\+O\+P\+Y\+\_\+\+O\+B\+J\+\_\+\+D\+E\+S\+C\+R}!o\+\_\+init.\+c@{o\+\_\+init.\+c}}
\subsubsection[{C\+O\+P\+Y\+\_\+\+O\+B\+J\+\_\+\+D\+E\+S\+C\+R}]{\setlength{\rightskip}{0pt plus 5cm}\#define C\+O\+P\+Y\+\_\+\+O\+B\+J\+\_\+\+D\+E\+S\+C\+R(
\begin{DoxyParamCaption}
\item[{}]{o\+\_\+dst, }
\item[{}]{o\+\_\+src}
\end{DoxyParamCaption}
)~o\+\_\+dst.\+oc\+\_\+descr\+\_\+idx = o\+\_\+src.\+oc\+\_\+descr\+\_\+idx}}\label{o__init_8c_aa524dfeaf01fe85d285b82ca79925448}


Referenced by init\+\_\+objects().



\subsection{Function Documentation}
\hypertarget{o__init_8c_a0f0f34a74cad20535d58823ed431b447}{\index{o\+\_\+init.\+c@{o\+\_\+init.\+c}!discover\+\_\+object@{discover\+\_\+object}}
\index{discover\+\_\+object@{discover\+\_\+object}!o\+\_\+init.\+c@{o\+\_\+init.\+c}}
\subsubsection[{discover\+\_\+object}]{\setlength{\rightskip}{0pt plus 5cm}void discover\+\_\+object (
\begin{DoxyParamCaption}
\item[{int}]{oindx, }
\item[{{\bf boolean}}]{mark\+\_\+as\+\_\+known, }
\item[{{\bf boolean}}]{credit\+\_\+hero}
\end{DoxyParamCaption}
)}}\label{o__init_8c_a0f0f34a74cad20535d58823ed431b447}


Definition at line 301 of file o\+\_\+init.\+c.



References A\+\_\+\+W\+I\+S, bases, moves, objects, objclass\+::oc\+\_\+class, T\+R\+U\+E, and update\+\_\+inventory.



Referenced by ini\+\_\+inv(), and knows\+\_\+object().


\begin{DoxyCode}
305 \{
306     \textcolor{keywordflow}{if} (!\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[oindx].oc\_name\_known) \{
307     \textcolor{keyword}{register} \textcolor{keywordtype}{int} dindx, acls = \hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[oindx].\hyperlink{structobjclass_ae589e91e556e204c84f05597da510559}{oc\_class};
308 
309     \textcolor{comment}{/* Loop thru disco[] 'til we find the target (which may have been}
310 \textcolor{comment}{       uname'd) or the next open slot; one or the other will be found}
311 \textcolor{comment}{       before we reach the next class...}
312 \textcolor{comment}{     */}
313     \textcolor{keywordflow}{for} (dindx = \hyperlink{decl_8h_a6ebf295ea3e833b4a1e95f5a672e1821}{bases}[acls]; \hyperlink{o__init_8c_a57a5ccdaa3a977cb82a16d7ec656f220}{disco}[dindx] != 0; dindx++)
314         \textcolor{keywordflow}{if} (\hyperlink{o__init_8c_a57a5ccdaa3a977cb82a16d7ec656f220}{disco}[dindx] == oindx) \textcolor{keywordflow}{break};
315     \hyperlink{o__init_8c_a57a5ccdaa3a977cb82a16d7ec656f220}{disco}[dindx] = oindx;
316 
317     \textcolor{keywordflow}{if} (mark\_as\_known) \{
318         \hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[oindx].oc\_name\_known = 1;
319         \textcolor{keywordflow}{if} (credit\_hero) exercise(\hyperlink{attrib_8h_a4206d6431732a698ede8a237d5c17142}{A\_WIS}, \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE});
320     \}
321     \textcolor{keywordflow}{if} (\hyperlink{decl_8h_a2ccad6e8fb93740ed50c6d9a8f72ce2f}{moves} > 1L) \hyperlink{winprocs_8h_a12feb374290012aafc2340c5ba15f7e8}{update\_inventory}();
322     \}
323 \}
\end{DoxyCode}
\hypertarget{o__init_8c_ae7f2bb7b8c94492b4038bf4bf0fcada7}{\index{o\+\_\+init.\+c@{o\+\_\+init.\+c}!dodiscovered@{dodiscovered}}
\index{dodiscovered@{dodiscovered}!o\+\_\+init.\+c@{o\+\_\+init.\+c}}
\subsubsection[{dodiscovered}]{\setlength{\rightskip}{0pt plus 5cm}int dodiscovered (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{o__init_8c_ae7f2bb7b8c94492b4038bf4bf0fcada7}


Definition at line 368 of file o\+\_\+init.\+c.



References bases, buf, B\+U\+F\+S\+Z, create\+\_\+nhwindow, destroy\+\_\+nhwindow, display\+\_\+nhwindow, eos(), F\+A\+L\+S\+E, flags, iflags, index(), interesting\+\_\+to\+\_\+discover(), flag\+::inv\+\_\+order, M\+A\+X\+O\+C\+L\+A\+S\+S\+E\+S, instance\+\_\+flags\+::menu\+\_\+headings, N\+H\+W\+\_\+\+M\+E\+N\+U, O\+B\+J\+\_\+\+N\+A\+M\+E, objects, objclass\+::oc\+\_\+class, obj\+::oclass, putstr, S\+I\+Z\+E, Sprintf, Strcpy, T\+R\+U\+E, and V\+E\+N\+O\+M\+\_\+\+C\+L\+A\+S\+S.


\begin{DoxyCode}
369 \{
370     \textcolor{keyword}{register} \textcolor{keywordtype}{int} i, dis;
371     \textcolor{keywordtype}{int} ct = 0;
372     \textcolor{keywordtype}{char} *s, oclass, prev\_class, classes[\hyperlink{objclass_8h_af51133138bfb718b55aaa7f29711a10a}{MAXOCLASSES}];
373     \hyperlink{wintype_8h_adc2de956a3f084b1691cf080e1d1412b}{winid} tmpwin;
374     \textcolor{keywordtype}{char} \hyperlink{xpm2iff_8c_a6f4b9854141692d23b0d072176044ca6}{buf}[\hyperlink{global_8h_ab26c26cbf7a0c97d8960c3cfb413f882}{BUFSZ}];
375 
376     tmpwin = \hyperlink{winprocs_8h_aa13fb35379049d1836397492d10b6b0c}{create\_nhwindow}(\hyperlink{wintype_8h_a60a03e50aaeef35cd7cd3bf6f790791c}{NHW\_MENU});
377     \hyperlink{winprocs_8h_a2ab348888957358569f859127c0bc474}{putstr}(tmpwin, 0, \textcolor{stringliteral}{"Discoveries"});
378     \hyperlink{winprocs_8h_a2ab348888957358569f859127c0bc474}{putstr}(tmpwin, 0, \textcolor{stringliteral}{""});
379 
380     \textcolor{comment}{/* gather "unique objects" into a pseudo-class; note that they'll}
381 \textcolor{comment}{       also be displayed individually within their regular class */}
382     \textcolor{keywordflow}{for} (i = dis = 0; i < \hyperlink{global_8h_afd2537d19a3cb6556b0f727580ec6ee7}{SIZE}(\hyperlink{o__init_8c_aed4a1c28f7f8fc9c1f21046ffe22a118}{uniq\_objs}); i++)
383     \textcolor{keywordflow}{if} (\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[\hyperlink{o__init_8c_aed4a1c28f7f8fc9c1f21046ffe22a118}{uniq\_objs}[i]].oc\_name\_known) \{
384         \textcolor{keywordflow}{if} (!dis++)
385         \hyperlink{winprocs_8h_a2ab348888957358569f859127c0bc474}{putstr}(tmpwin, \hyperlink{flag_8h_ae9cd54937dcb00432131e49e5e324075}{iflags}.\hyperlink{structinstance__flags_a1640b6b04fb84038cf353a42d268b9be}{menu\_headings}, \textcolor{stringliteral}{"Unique Items"});
386         \hyperlink{global_8h_aa55ba8f4e3c82fe00035e6b51d6c7dee}{Sprintf}(buf, \textcolor{stringliteral}{"  %s"}, \hyperlink{objclass_8h_aaa71280f2bfe02894ab8c39af548d6ae}{OBJ\_NAME}(\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[\hyperlink{o__init_8c_aed4a1c28f7f8fc9c1f21046ffe22a118}{uniq\_objs}[i]]));
387         \hyperlink{winprocs_8h_a2ab348888957358569f859127c0bc474}{putstr}(tmpwin, 0, buf);
388         ++ct;
389     \}
390     \textcolor{comment}{/* display any known artifacts as another pseudo-class */}
391     ct += disp\_artifact\_discoveries(tmpwin);
392 
393     \textcolor{comment}{/* several classes are omitted from packorder; one is of interest here */}
394     \hyperlink{global_8h_add22f733d1f2c380499f495068e42b7c}{Strcpy}(classes, \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_afbbdabb7b1593b8ff0036a5c67ece86f}{inv\_order});
395     \textcolor{keywordflow}{if} (!\hyperlink{uudecode_8c_ac82f3cc16110a05458f2b2483236afb7}{index}(classes, \hyperlink{objclass_8h_a98f2a7a938be98ec0a18109f08491b57}{VENOM\_CLASS})) \{
396     s = \hyperlink{makedefs_8c_a72563303ed4b67f2a7dd9f2d15a01558}{eos}(classes);
397     *s++ = \hyperlink{objclass_8h_a98f2a7a938be98ec0a18109f08491b57}{VENOM\_CLASS};
398     *s = \textcolor{charliteral}{'\(\backslash\)0'};
399     \}
400 
401     \textcolor{keywordflow}{for} (s = classes; *s; s++) \{
402     oclass = *s;
403     prev\_class = oclass + 1;    \textcolor{comment}{/* forced different from oclass */}
404     \textcolor{keywordflow}{for} (i = \hyperlink{decl_8h_a6ebf295ea3e833b4a1e95f5a672e1821}{bases}[(\textcolor{keywordtype}{int})oclass];
405          i < NUM\_OBJECTS && \hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[i].\hyperlink{structobjclass_ae589e91e556e204c84f05597da510559}{oc\_class} == oclass; i++) \{
406         \textcolor{keywordflow}{if} ((dis = \hyperlink{o__init_8c_a57a5ccdaa3a977cb82a16d7ec656f220}{disco}[i]) && \hyperlink{o__init_8c_ac0ca3f9718fe40a62906cda6a2f73fc7}{interesting\_to\_discover}(dis)) \{
407         ct++;
408         \textcolor{keywordflow}{if} (oclass != prev\_class) \{
409             \hyperlink{winprocs_8h_a2ab348888957358569f859127c0bc474}{putstr}(tmpwin, \hyperlink{flag_8h_ae9cd54937dcb00432131e49e5e324075}{iflags}.\hyperlink{structinstance__flags_a1640b6b04fb84038cf353a42d268b9be}{menu\_headings}, let\_to\_name(oclass, 
      \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}));
410             prev\_class = oclass;
411         \}
412         \hyperlink{global_8h_aa55ba8f4e3c82fe00035e6b51d6c7dee}{Sprintf}(buf, \textcolor{stringliteral}{"%s %s"},(\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[dis].oc\_pre\_discovered ? \textcolor{stringliteral}{"*"} : \textcolor{stringliteral}{" "}),
413                 obj\_typename(dis));
414         \hyperlink{winprocs_8h_a2ab348888957358569f859127c0bc474}{putstr}(tmpwin, 0, buf);
415         \}
416     \}
417     \}
418     \textcolor{keywordflow}{if} (ct == 0) \{
419     You(\textcolor{stringliteral}{"haven't discovered anything yet..."});
420     \} \textcolor{keywordflow}{else}
421     \hyperlink{winprocs_8h_ac8e74d03fbb65b9f5651e63d79bebc60}{display\_nhwindow}(tmpwin, \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE});
422     \hyperlink{winprocs_8h_a77ac4f50de0eedeaead791812762c6a0}{destroy\_nhwindow}(tmpwin);
423 
424     \textcolor{keywordflow}{return} 0;
425 \}
\end{DoxyCode}
\hypertarget{o__init_8c_a258d73b38a2c332d22f445d07b3a4dd7}{\index{o\+\_\+init.\+c@{o\+\_\+init.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!o\+\_\+init.\+c@{o\+\_\+init.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} void F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf setgemprobs}}]{, }
\item[{({\bf d\+\_\+level} $\ast$)}]{}
\end{DoxyParamCaption}
)}}\label{o__init_8c_a258d73b38a2c332d22f445d07b3a4dd7}
\hypertarget{o__init_8c_a70256784553c5c848753b46a99791b20}{\index{o\+\_\+init.\+c@{o\+\_\+init.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!o\+\_\+init.\+c@{o\+\_\+init.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} void F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf shuffle}}]{, }
\item[{(int, int, {\bf B\+O\+O\+L\+E\+A\+N\+\_\+\+P})}]{}
\end{DoxyParamCaption}
)}}\label{o__init_8c_a70256784553c5c848753b46a99791b20}
\hypertarget{o__init_8c_ae0620c108eb3a7c3076c89a1397398f1}{\index{o\+\_\+init.\+c@{o\+\_\+init.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!o\+\_\+init.\+c@{o\+\_\+init.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} {\bf boolean} F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf interesting\+\_\+to\+\_\+discover}}]{, }
\item[{(int)}]{}
\end{DoxyParamCaption}
)}}\label{o__init_8c_ae0620c108eb3a7c3076c89a1397398f1}
\hypertarget{o__init_8c_ad86d1a5ed7534420dedbb79b6fe8a20f}{\index{o\+\_\+init.\+c@{o\+\_\+init.\+c}!find\+\_\+skates@{find\+\_\+skates}}
\index{find\+\_\+skates@{find\+\_\+skates}!o\+\_\+init.\+c@{o\+\_\+init.\+c}}
\subsubsection[{find\+\_\+skates}]{\setlength{\rightskip}{0pt plus 5cm}int find\+\_\+skates (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{o__init_8c_ad86d1a5ed7534420dedbb79b6fe8a20f}


Definition at line 230 of file o\+\_\+init.\+c.



References O\+B\+J\+\_\+\+D\+E\+S\+C\+R, and objects.


\begin{DoxyCode}
231 \{
232     \textcolor{keyword}{register} \textcolor{keywordtype}{int} i;
233     \textcolor{keyword}{register} \textcolor{keyword}{const} \textcolor{keywordtype}{char} *s;
234 
235     \textcolor{keywordflow}{for} (i = SPEED\_BOOTS; i <= LEVITATION\_BOOTS; i++)
236     \textcolor{keywordflow}{if} ((s = \hyperlink{objclass_8h_aeab69e2f227c2e8ac9c45dea8090ce38}{OBJ\_DESCR}(\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[i])) != 0 && !strcmp(s, \textcolor{stringliteral}{"snow boots"}))
237         \textcolor{keywordflow}{return} i;
238 
239     impossible(\textcolor{stringliteral}{"snow boots not found?"});
240     \textcolor{keywordflow}{return} -1;  \textcolor{comment}{/* not 0, or caller would try again each move */}
241 \}
\end{DoxyCode}
\hypertarget{o__init_8c_acaa33f79f89e4dacede48efcc3bd950a}{\index{o\+\_\+init.\+c@{o\+\_\+init.\+c}!init\+\_\+objects@{init\+\_\+objects}}
\index{init\+\_\+objects@{init\+\_\+objects}!o\+\_\+init.\+c@{o\+\_\+init.\+c}}
\subsubsection[{init\+\_\+objects}]{\setlength{\rightskip}{0pt plus 5cm}void init\+\_\+objects (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{o__init_8c_acaa33f79f89e4dacede48efcc3bd950a}


Definition at line 109 of file o\+\_\+init.\+c.



References bases, C\+O\+P\+Y\+\_\+\+O\+B\+J\+\_\+\+D\+E\+S\+C\+R, error(), G\+E\+M\+\_\+\+C\+L\+A\+S\+S, M\+A\+X\+O\+C\+L\+A\+S\+S\+E\+S, objects, objclass\+::oc\+\_\+class, obj\+::oclass, setgemprobs(), and shuffle\+\_\+all().


\begin{DoxyCode}
110 \{
111 \textcolor{keyword}{register} \textcolor{keywordtype}{int} i, first, last, sum;
112 \textcolor{keyword}{register} \textcolor{keywordtype}{char} oclass;
113 \textcolor{preprocessor}{#ifdef TEXTCOLOR}
114 \textcolor{preprocessor}{# define COPY\_OBJ\_DESCR(o\_dst,o\_src) \(\backslash\)}
115 \textcolor{preprocessor}{            o\_dst.oc\_descr\_idx = o\_src.oc\_descr\_idx,\(\backslash\)}
116 \textcolor{preprocessor}{            o\_dst.oc\_color = o\_src.oc\_color}
117 \textcolor{preprocessor}{#else}
118 \textcolor{preprocessor}{# define COPY\_OBJ\_DESCR(o\_dst,o\_src) o\_dst.oc\_descr\_idx = o\_src.oc\_descr\_idx}
119 \textcolor{preprocessor}{#endif}
120 
121     \textcolor{comment}{/* bug fix to prevent "initialization error" abort on Intel Xenix.}
122 \textcolor{comment}{     * reported by mikew@semike}
123 \textcolor{comment}{     */}
124     \textcolor{keywordflow}{for} (i = 0; i < \hyperlink{objclass_8h_af51133138bfb718b55aaa7f29711a10a}{MAXOCLASSES}; i++)
125         \hyperlink{decl_8h_a6ebf295ea3e833b4a1e95f5a672e1821}{bases}[i] = 0;
126     \textcolor{comment}{/* initialize object descriptions */}
127     \textcolor{keywordflow}{for} (i = 0; i < NUM\_OBJECTS; i++)
128         \hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[i].oc\_name\_idx = \hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[i].oc\_descr\_idx = i;
129     \textcolor{comment}{/* init base; if probs given check that they add up to 1000,}
130 \textcolor{comment}{       otherwise compute probs */}
131     first = 0;
132     \textcolor{keywordflow}{while}( first < NUM\_OBJECTS ) \{
133         oclass = \hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[first].\hyperlink{structobjclass_ae589e91e556e204c84f05597da510559}{oc\_class};
134         last = first+1;
135         \textcolor{keywordflow}{while} (last < NUM\_OBJECTS && \hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[last].oc\_class == oclass) last++;
136         \hyperlink{decl_8h_a6ebf295ea3e833b4a1e95f5a672e1821}{bases}[(int)oclass] = first;
137 
138         \textcolor{keywordflow}{if} (oclass == \hyperlink{objclass_8h_afc09c51ea922e9928f86a51177244796}{GEM\_CLASS}) \{
139             \hyperlink{o__init_8c_ae0cad4a407386545a7f08a0bf8f7aabc}{setgemprobs}((\hyperlink{structd__level}{d\_level} *)0);
140 
141             \textcolor{keywordflow}{if} (rn2(2)) \{ \textcolor{comment}{/* change turquoise from green to blue? */}
142                 \hyperlink{o__init_8c_aa524dfeaf01fe85d285b82ca79925448}{COPY\_OBJ\_DESCR}(\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[TURQUOISE],\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[SAPPHIRE]);
143             \}
144             \textcolor{keywordflow}{if} (rn2(2)) \{ \textcolor{comment}{/* change aquamarine from green to blue? */}
145                 \hyperlink{o__init_8c_aa524dfeaf01fe85d285b82ca79925448}{COPY\_OBJ\_DESCR}(\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[AQUAMARINE],\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[SAPPHIRE]);
146             \}
147             \textcolor{keywordflow}{switch} (rn2(4)) \{ \textcolor{comment}{/* change fluorite from violet? */}
148                 \textcolor{keywordflow}{case} 0:  \textcolor{keywordflow}{break};
149                 \textcolor{keywordflow}{case} 1: \textcolor{comment}{/* blue */}
150                 \hyperlink{o__init_8c_aa524dfeaf01fe85d285b82ca79925448}{COPY\_OBJ\_DESCR}(\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[FLUORITE],\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[SAPPHIRE]);
151                 \textcolor{keywordflow}{break};
152                 \textcolor{keywordflow}{case} 2: \textcolor{comment}{/* white */}
153                 \hyperlink{o__init_8c_aa524dfeaf01fe85d285b82ca79925448}{COPY\_OBJ\_DESCR}(\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[FLUORITE],\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[DIAMOND]);
154                 \textcolor{keywordflow}{break};
155                 \textcolor{keywordflow}{case} 3: \textcolor{comment}{/* green */}
156                 \hyperlink{o__init_8c_aa524dfeaf01fe85d285b82ca79925448}{COPY\_OBJ\_DESCR}(\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[FLUORITE],\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[EMERALD]);
157                 \textcolor{keywordflow}{break};
158             \}
159         \}
160     check:
161         sum = 0;
162         \textcolor{keywordflow}{for}(i = first; i < last; i++) sum += \hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[i].oc\_prob;
163         \textcolor{keywordflow}{if}(sum == 0) \{
164             \textcolor{keywordflow}{for}(i = first; i < last; i++)
165                 \hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[i].oc\_prob = (1000+i-first)/(last-first);
166             \textcolor{keywordflow}{goto} check;
167         \}
168         \textcolor{keywordflow}{if}(sum != 1000)
169             \hyperlink{txt2iff_8c_a64e632a682e311bde915784e6a17da31}{error}(\textcolor{stringliteral}{"init-prob error for class %d (%d%%)"}, oclass, sum);
170         first = last;
171     \}
172     \textcolor{comment}{/* shuffle descriptions */}
173     \hyperlink{o__init_8c_afa72877a8cccbee09fd0aa3b5536f8c6}{shuffle\_all}();
174 \textcolor{preprocessor}{#ifdef USE\_TILES}
175     shuffle\_tiles();
176 \textcolor{preprocessor}{#endif}
177 \}
\end{DoxyCode}
\hypertarget{o__init_8c_ac0ca3f9718fe40a62906cda6a2f73fc7}{\index{o\+\_\+init.\+c@{o\+\_\+init.\+c}!interesting\+\_\+to\+\_\+discover@{interesting\+\_\+to\+\_\+discover}}
\index{interesting\+\_\+to\+\_\+discover@{interesting\+\_\+to\+\_\+discover}!o\+\_\+init.\+c@{o\+\_\+init.\+c}}
\subsubsection[{interesting\+\_\+to\+\_\+discover}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} {\bf boolean} interesting\+\_\+to\+\_\+discover (
\begin{DoxyParamCaption}
\item[{int}]{i}
\end{DoxyParamCaption}
)}}\label{o__init_8c_ac0ca3f9718fe40a62906cda6a2f73fc7}


Definition at line 351 of file o\+\_\+init.\+c.



References O\+B\+J\+\_\+\+D\+E\+S\+C\+R, and objects.



Referenced by dodiscovered().


\begin{DoxyCode}
353 \{
354     \textcolor{comment}{/* Pre-discovered objects are now printed with a '*' */}
355     \textcolor{keywordflow}{return}((\textcolor{keywordtype}{boolean})(\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[i].oc\_uname != (\textcolor{keywordtype}{char} *)0 ||
356         (\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[i].oc\_name\_known && \hyperlink{objclass_8h_aeab69e2f227c2e8ac9c45dea8090ce38}{OBJ\_DESCR}(\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[i]) != (\textcolor{keywordtype}{char} *)0)));
357 \}
\end{DoxyCode}
\hypertarget{o__init_8c_ae3e42bd8eb1ca0b5f810fee73951226d}{\index{o\+\_\+init.\+c@{o\+\_\+init.\+c}!N\+D\+E\+C\+L@{N\+D\+E\+C\+L}}
\index{N\+D\+E\+C\+L@{N\+D\+E\+C\+L}!o\+\_\+init.\+c@{o\+\_\+init.\+c}}
\subsubsection[{N\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} void N\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf shuffle\+\_\+all}}]{}
\end{DoxyParamCaption}
)}}\label{o__init_8c_ae3e42bd8eb1ca0b5f810fee73951226d}
\hypertarget{o__init_8c_a524e90921ab3f612ad9dac64f743c2c2}{\index{o\+\_\+init.\+c@{o\+\_\+init.\+c}!oinit@{oinit}}
\index{oinit@{oinit}!o\+\_\+init.\+c@{o\+\_\+init.\+c}}
\subsubsection[{oinit}]{\setlength{\rightskip}{0pt plus 5cm}void oinit (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{o__init_8c_a524e90921ab3f612ad9dac64f743c2c2}


Definition at line 244 of file o\+\_\+init.\+c.



References setgemprobs(), u, and you\+::uz.



Referenced by makelevel().


\begin{DoxyCode}
245 \{
246     \hyperlink{o__init_8c_ae0cad4a407386545a7f08a0bf8f7aabc}{setgemprobs}(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz});
247 \}
\end{DoxyCode}
\hypertarget{o__init_8c_abbde51c65ac8cdf07f79c3cb648cf70e}{\index{o\+\_\+init.\+c@{o\+\_\+init.\+c}!restnames@{restnames}}
\index{restnames@{restnames}!o\+\_\+init.\+c@{o\+\_\+init.\+c}}
\subsubsection[{restnames}]{\setlength{\rightskip}{0pt plus 5cm}void restnames (
\begin{DoxyParamCaption}
\item[{int}]{fd}
\end{DoxyParamCaption}
)}}\label{o__init_8c_abbde51c65ac8cdf07f79c3cb648cf70e}


Definition at line 280 of file o\+\_\+init.\+c.



References alloc(), bases, mread(), and objects.



Referenced by restgamestate().


\begin{DoxyCode}
282 \{
283     \textcolor{keyword}{register} \textcolor{keywordtype}{int} i;
284     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} len;
285 
286     \hyperlink{restore_8c_a4ca409c62ced3355b984139d6499732c}{mread}(fd, (\hyperlink{tradstdc_8h_ad4a7dab7269b4b00e3c7c7d2e66f31cd}{genericptr\_t}) \hyperlink{decl_8h_a6ebf295ea3e833b4a1e95f5a672e1821}{bases}, \textcolor{keyword}{sizeof} bases);
287     \hyperlink{restore_8c_a4ca409c62ced3355b984139d6499732c}{mread}(fd, (\hyperlink{tradstdc_8h_ad4a7dab7269b4b00e3c7c7d2e66f31cd}{genericptr\_t}) \hyperlink{o__init_8c_a57a5ccdaa3a977cb82a16d7ec656f220}{disco}, \textcolor{keyword}{sizeof} disco);
288     \hyperlink{restore_8c_a4ca409c62ced3355b984139d6499732c}{mread}(fd, (\hyperlink{tradstdc_8h_ad4a7dab7269b4b00e3c7c7d2e66f31cd}{genericptr\_t}) \hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}, \textcolor{keyword}{sizeof}(\textcolor{keyword}{struct} 
      \hyperlink{structobjclass}{objclass}) * NUM\_OBJECTS);
289     \textcolor{keywordflow}{for} (i = 0; i < NUM\_OBJECTS; i++)
290         \textcolor{keywordflow}{if} (objects[i].oc\_uname) \{
291         \hyperlink{restore_8c_a4ca409c62ced3355b984139d6499732c}{mread}(fd, (\hyperlink{tradstdc_8h_ad4a7dab7269b4b00e3c7c7d2e66f31cd}{genericptr\_t}) &len, \textcolor{keyword}{sizeof} len);
292         objects[i].oc\_uname = (\textcolor{keywordtype}{char} *) \hyperlink{txt2iff_8c_ae273cbdce4cd64a076220ad06c41a5a1}{alloc}(len);
293         \hyperlink{restore_8c_a4ca409c62ced3355b984139d6499732c}{mread}(fd, (\hyperlink{tradstdc_8h_ad4a7dab7269b4b00e3c7c7d2e66f31cd}{genericptr\_t})objects[i].oc\_uname, len);
294         \}
295 \textcolor{preprocessor}{#ifdef USE\_TILES}
296     shuffle\_tiles();
297 \textcolor{preprocessor}{#endif}
298 \}
\end{DoxyCode}
\hypertarget{o__init_8c_acf5509243a1e3ffc44ba1e46a5b635c7}{\index{o\+\_\+init.\+c@{o\+\_\+init.\+c}!savenames@{savenames}}
\index{savenames@{savenames}!o\+\_\+init.\+c@{o\+\_\+init.\+c}}
\subsubsection[{savenames}]{\setlength{\rightskip}{0pt plus 5cm}void savenames (
\begin{DoxyParamCaption}
\item[{int}]{fd, }
\item[{int}]{mode}
\end{DoxyParamCaption}
)}}\label{o__init_8c_acf5509243a1e3ffc44ba1e46a5b635c7}


Definition at line 250 of file o\+\_\+init.\+c.



References bases, bwrite(), free(), objects, objclass\+::oc\+\_\+uname, perform\+\_\+bwrite, and release\+\_\+data.



Referenced by savegamestate().


\begin{DoxyCode}
252 \{
253     \textcolor{keyword}{register} \textcolor{keywordtype}{int} i;
254     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} len;
255 
256     \textcolor{keywordflow}{if} (\hyperlink{lev_8h_a4bb5a4c92746bd81c40d1452ca38dda7}{perform\_bwrite}(mode)) \{
257         \hyperlink{save_8c_a2e7663422968049372dd9cc6b325a84a}{bwrite}(fd, (\hyperlink{tradstdc_8h_ad4a7dab7269b4b00e3c7c7d2e66f31cd}{genericptr\_t})\hyperlink{decl_8h_a6ebf295ea3e833b4a1e95f5a672e1821}{bases}, \textcolor{keyword}{sizeof} bases);
258         \hyperlink{save_8c_a2e7663422968049372dd9cc6b325a84a}{bwrite}(fd, (\hyperlink{tradstdc_8h_ad4a7dab7269b4b00e3c7c7d2e66f31cd}{genericptr\_t})\hyperlink{o__init_8c_a57a5ccdaa3a977cb82a16d7ec656f220}{disco}, \textcolor{keyword}{sizeof} disco);
259         \hyperlink{save_8c_a2e7663422968049372dd9cc6b325a84a}{bwrite}(fd, (\hyperlink{tradstdc_8h_ad4a7dab7269b4b00e3c7c7d2e66f31cd}{genericptr\_t})\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects},
260            \textcolor{keyword}{sizeof}(\textcolor{keyword}{struct} \hyperlink{structobjclass}{objclass}) * NUM\_OBJECTS);
261     \}
262     \textcolor{comment}{/* as long as we use only one version of Hack we}
263 \textcolor{comment}{       need not save oc\_name and oc\_descr, but we must save}
264 \textcolor{comment}{       oc\_uname for all objects */}
265     \textcolor{keywordflow}{for} (i = 0; i < NUM\_OBJECTS; i++)
266         \textcolor{keywordflow}{if} (\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[i].oc\_uname) \{
267         \textcolor{keywordflow}{if} (\hyperlink{lev_8h_a4bb5a4c92746bd81c40d1452ca38dda7}{perform\_bwrite}(mode)) \{
268             len = strlen(\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[i].oc\_uname)+1;
269             \hyperlink{save_8c_a2e7663422968049372dd9cc6b325a84a}{bwrite}(fd, (\hyperlink{tradstdc_8h_ad4a7dab7269b4b00e3c7c7d2e66f31cd}{genericptr\_t})&len, \textcolor{keyword}{sizeof} len);
270             \hyperlink{save_8c_a2e7663422968049372dd9cc6b325a84a}{bwrite}(fd, (\hyperlink{tradstdc_8h_ad4a7dab7269b4b00e3c7c7d2e66f31cd}{genericptr\_t})\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[i].oc\_uname, len);
271         \}
272         \textcolor{keywordflow}{if} (\hyperlink{lev_8h_a3d5ce4c0a0247545f80a66eadddc6273}{release\_data}(mode)) \{
273             \hyperlink{winproto_8h_a4bbec68d324de17b99fecede64b383ba}{free}((\hyperlink{tradstdc_8h_ad4a7dab7269b4b00e3c7c7d2e66f31cd}{genericptr\_t})\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[i].oc\_uname);
274             \hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[i].\hyperlink{structobjclass_a2556428315c0776ce8f5c88ecf6508bc}{oc\_uname} = 0;
275         \}
276         \}
277 \}
\end{DoxyCode}
\hypertarget{o__init_8c_ae0cad4a407386545a7f08a0bf8f7aabc}{\index{o\+\_\+init.\+c@{o\+\_\+init.\+c}!setgemprobs@{setgemprobs}}
\index{setgemprobs@{setgemprobs}!o\+\_\+init.\+c@{o\+\_\+init.\+c}}
\subsubsection[{setgemprobs}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} void setgemprobs (
\begin{DoxyParamCaption}
\item[{{\bf d\+\_\+level} $\ast$}]{dlev}
\end{DoxyParamCaption}
)}}\label{o__init_8c_ae0cad4a407386545a7f08a0bf8f7aabc}


Definition at line 45 of file o\+\_\+init.\+c.



References bases, G\+E\+M\+\_\+\+C\+L\+A\+S\+S, O\+B\+J\+\_\+\+N\+A\+M\+E, objects, and wait\+\_\+synch.



Referenced by init\+\_\+objects(), and oinit().


\begin{DoxyCode}
47 \{
48     \textcolor{keywordtype}{int} j, first, lev;
49 
50     \textcolor{keywordflow}{if} (dlev)
51         lev = (ledger\_no(dlev) > maxledgerno())
52                 ? maxledgerno() : ledger\_no(dlev);
53     \textcolor{keywordflow}{else}
54         lev = 0;
55     first = \hyperlink{decl_8h_a6ebf295ea3e833b4a1e95f5a672e1821}{bases}[\hyperlink{objclass_8h_afc09c51ea922e9928f86a51177244796}{GEM\_CLASS}];
56 
57     \textcolor{keywordflow}{for}(j = 0; j < 9-lev/3; j++)
58         \hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[first+j].oc\_prob = 0;
59     first += j;
60     \textcolor{keywordflow}{if} (first > LAST\_GEM || \hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[first].oc\_class != \hyperlink{objclass_8h_afc09c51ea922e9928f86a51177244796}{GEM\_CLASS} ||
61         \hyperlink{objclass_8h_aaa71280f2bfe02894ab8c39af548d6ae}{OBJ\_NAME}(\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[first]) == (\textcolor{keywordtype}{char} *)0) \{
62         raw\_printf(\textcolor{stringliteral}{"Not enough gems? - first=%d j=%d LAST\_GEM=%d"},
63             first, j, LAST\_GEM);
64         \hyperlink{winprocs_8h_ab3dda14337c8ebd4fe496eab265a8483}{wait\_synch}();
65         \}
66     \textcolor{keywordflow}{for} (j = first; j <= LAST\_GEM; j++)
67         \hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[j].oc\_prob = (171+j-first)/(LAST\_GEM+1-first);
68 \}
\end{DoxyCode}
\hypertarget{o__init_8c_a1eec227a492608baee9f1c80704b635c}{\index{o\+\_\+init.\+c@{o\+\_\+init.\+c}!shuffle@{shuffle}}
\index{shuffle@{shuffle}!o\+\_\+init.\+c@{o\+\_\+init.\+c}}
\subsubsection[{shuffle}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} void shuffle (
\begin{DoxyParamCaption}
\item[{int}]{o\+\_\+low, }
\item[{int}]{o\+\_\+high, }
\item[{{\bf boolean}}]{domaterial}
\end{DoxyParamCaption}
)}}\label{o__init_8c_a1eec227a492608baee9f1c80704b635c}


Definition at line 72 of file o\+\_\+init.\+c.



References objects, objclass\+::oc\+\_\+color, and objclass\+::oc\+\_\+descr\+\_\+idx.



Referenced by shuffle\+\_\+all().


\begin{DoxyCode}
75 \{
76     \textcolor{keywordtype}{int} i, j, num\_to\_shuffle;
77     \textcolor{keywordtype}{short} sw;
78     \textcolor{keywordtype}{int} color;
79 
80     \textcolor{keywordflow}{for} (num\_to\_shuffle = 0, j=o\_low; j <= o\_high; j++)
81         \textcolor{keywordflow}{if} (!\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[j].oc\_name\_known) num\_to\_shuffle++;
82     \textcolor{keywordflow}{if} (num\_to\_shuffle < 2) \textcolor{keywordflow}{return};
83 
84     \textcolor{keywordflow}{for} (j=o\_low; j <= o\_high; j++) \{
85         \textcolor{keywordflow}{if} (\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[j].oc\_name\_known) \textcolor{keywordflow}{continue};
86         \textcolor{keywordflow}{do}
87             i = j + rn2(o\_high-j+1);
88         \textcolor{keywordflow}{while} (\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[i].oc\_name\_known);
89         sw = \hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[j].\hyperlink{structobjclass_a4b22aa20d7c87b250d6696e1614b86cc}{oc\_descr\_idx};
90         \hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[j].\hyperlink{structobjclass_a4b22aa20d7c87b250d6696e1614b86cc}{oc\_descr\_idx} = \hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[i].
      \hyperlink{structobjclass_a4b22aa20d7c87b250d6696e1614b86cc}{oc\_descr\_idx};
91         \hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[i].\hyperlink{structobjclass_a4b22aa20d7c87b250d6696e1614b86cc}{oc\_descr\_idx} = sw;
92         sw = \hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[j].oc\_tough;
93         \hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[j].oc\_tough = \hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[i].oc\_tough;
94         \hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[i].oc\_tough = sw;
95         color = \hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[j].\hyperlink{structobjclass_a85f741db040715f310a309de52bc1574}{oc\_color};
96         \hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[j].\hyperlink{structobjclass_a85f741db040715f310a309de52bc1574}{oc\_color} = \hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[i].\hyperlink{structobjclass_a85f741db040715f310a309de52bc1574}{oc\_color};
97         \hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[i].\hyperlink{structobjclass_a85f741db040715f310a309de52bc1574}{oc\_color} = color;
98 
99         \textcolor{comment}{/* shuffle material */}
100         \textcolor{keywordflow}{if} (domaterial) \{
101             sw = \hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[j].oc\_material;
102             \hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[j].oc\_material = \hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[i].oc\_material;
103             \hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[i].oc\_material = sw;
104         \}
105     \}
106 \}
\end{DoxyCode}
\hypertarget{o__init_8c_afa72877a8cccbee09fd0aa3b5536f8c6}{\index{o\+\_\+init.\+c@{o\+\_\+init.\+c}!shuffle\+\_\+all@{shuffle\+\_\+all}}
\index{shuffle\+\_\+all@{shuffle\+\_\+all}!o\+\_\+init.\+c@{o\+\_\+init.\+c}}
\subsubsection[{shuffle\+\_\+all}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} void shuffle\+\_\+all (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{o__init_8c_afa72877a8cccbee09fd0aa3b5536f8c6}


Definition at line 180 of file o\+\_\+init.\+c.



References A\+M\+U\+L\+E\+T\+\_\+\+C\+L\+A\+S\+S, A\+R\+M\+O\+R\+\_\+\+C\+L\+A\+S\+S, bases, F\+A\+L\+S\+E, G\+E\+M\+\_\+\+C\+L\+A\+S\+S, M\+A\+X\+O\+C\+L\+A\+S\+S\+E\+S, O\+B\+J\+\_\+\+D\+E\+S\+C\+R, objects, obj\+::oclass, P\+O\+T\+I\+O\+N\+\_\+\+C\+L\+A\+S\+S, S\+C\+R\+O\+L\+L\+\_\+\+C\+L\+A\+S\+S, shuffle(), S\+P\+B\+O\+O\+K\+\_\+\+C\+L\+A\+S\+S, T\+O\+O\+L\+\_\+\+C\+L\+A\+S\+S, T\+R\+U\+E, and W\+E\+A\+P\+O\+N\+\_\+\+C\+L\+A\+S\+S.



Referenced by init\+\_\+objects().


\begin{DoxyCode}
181 \{
182     \textcolor{keywordtype}{int} first, last, oclass;
183 
184     \textcolor{keywordflow}{for} (oclass = 1; oclass < \hyperlink{objclass_8h_af51133138bfb718b55aaa7f29711a10a}{MAXOCLASSES}; oclass++) \{
185         first = \hyperlink{decl_8h_a6ebf295ea3e833b4a1e95f5a672e1821}{bases}[oclass];
186         last = first+1;
187         \textcolor{keywordflow}{while} (last < NUM\_OBJECTS && \hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[last].oc\_class == oclass)
188             last++;
189 
190         \textcolor{keywordflow}{if} (\hyperlink{objclass_8h_aeab69e2f227c2e8ac9c45dea8090ce38}{OBJ\_DESCR}(\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[first]) != (\textcolor{keywordtype}{char} *)0 &&
191                 oclass != \hyperlink{objclass_8h_ad8e3b1b1f1bd8dff660c15840a3f2b03}{TOOL\_CLASS} &&
192                 oclass != \hyperlink{objclass_8h_a615c2dc6d3501d6b5e14c3373bc37ec1}{WEAPON\_CLASS} &&
193                 oclass != \hyperlink{objclass_8h_a038c650e790f05f72fa9204b1b82660b}{ARMOR\_CLASS} &&
194                 oclass != \hyperlink{objclass_8h_afc09c51ea922e9928f86a51177244796}{GEM\_CLASS}) \{
195             \textcolor{keywordtype}{int} j = last-1;
196 
197             \textcolor{keywordflow}{if} (oclass == \hyperlink{objclass_8h_a05335e5ee18dfa33af1c40056fe8fab9}{POTION\_CLASS})
198                 j -= 1;  \textcolor{comment}{/* only water has a fixed description */}
199             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (oclass == \hyperlink{objclass_8h_af05e45a3c94a4a19096ee4f048ee96cd}{AMULET\_CLASS} ||
200                  oclass == \hyperlink{objclass_8h_ac23f261da0f9e2a4c6afccecfc167a96}{SCROLL\_CLASS} ||
201                  oclass == \hyperlink{objclass_8h_aba5935524b39b0fdd148a3d466a5c580}{SPBOOK\_CLASS}) \{
202                 \textcolor{keywordflow}{while} (!\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[j].oc\_magic || \hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[j].oc\_unique)
203                 j--;
204             \}
205 
206             \textcolor{comment}{/* non-magical amulets, scrolls, and spellbooks}
207 \textcolor{comment}{             * (ex. imitation Amulets, blank, scrolls of mail)}
208 \textcolor{comment}{             * and one-of-a-kind magical artifacts at the end of}
209 \textcolor{comment}{             * their class in objects[] have fixed descriptions.}
210 \textcolor{comment}{             */}
211             \hyperlink{o__init_8c_a1eec227a492608baee9f1c80704b635c}{shuffle}(first, j, \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE});
212         \}
213     \}
214 
215     \textcolor{comment}{/* shuffle the helmets */}
216     \hyperlink{o__init_8c_a1eec227a492608baee9f1c80704b635c}{shuffle}(HELMET, HELM\_OF\_TELEPATHY, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE});
217 
218     \textcolor{comment}{/* shuffle the gloves */}
219     \hyperlink{o__init_8c_a1eec227a492608baee9f1c80704b635c}{shuffle}(LEATHER\_GLOVES, GAUNTLETS\_OF\_DEXTERITY, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE});
220 
221     \textcolor{comment}{/* shuffle the cloaks */}
222     \hyperlink{o__init_8c_a1eec227a492608baee9f1c80704b635c}{shuffle}(CLOAK\_OF\_PROTECTION, CLOAK\_OF\_DISPLACEMENT, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE});
223 
224     \textcolor{comment}{/* shuffle the boots [if they change, update find\_skates() below] */}
225     \hyperlink{o__init_8c_a1eec227a492608baee9f1c80704b635c}{shuffle}(SPEED\_BOOTS, LEVITATION\_BOOTS, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE});
226 \}
\end{DoxyCode}
\hypertarget{o__init_8c_ac1ce075c694df477bd0ea03fdc053da8}{\index{o\+\_\+init.\+c@{o\+\_\+init.\+c}!undiscover\+\_\+object@{undiscover\+\_\+object}}
\index{undiscover\+\_\+object@{undiscover\+\_\+object}!o\+\_\+init.\+c@{o\+\_\+init.\+c}}
\subsubsection[{undiscover\+\_\+object}]{\setlength{\rightskip}{0pt plus 5cm}void undiscover\+\_\+object (
\begin{DoxyParamCaption}
\item[{int}]{oindx}
\end{DoxyParamCaption}
)}}\label{o__init_8c_ac1ce075c694df477bd0ea03fdc053da8}


Definition at line 327 of file o\+\_\+init.\+c.



References bases, F\+A\+L\+S\+E, objects, objclass\+::oc\+\_\+class, T\+R\+U\+E, and update\+\_\+inventory.


\begin{DoxyCode}
329 \{
330     \textcolor{keywordflow}{if} (!\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[oindx].oc\_name\_known) \{
331     \textcolor{keyword}{register} \textcolor{keywordtype}{int} dindx, acls = \hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[oindx].\hyperlink{structobjclass_ae589e91e556e204c84f05597da510559}{oc\_class};
332     \textcolor{keyword}{register} \textcolor{keywordtype}{boolean} found = \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
333 
334     \textcolor{comment}{/* find the object; shift those behind it forward one slot */}
335     \textcolor{keywordflow}{for} (dindx = \hyperlink{decl_8h_a6ebf295ea3e833b4a1e95f5a672e1821}{bases}[acls];
336           dindx < NUM\_OBJECTS && \hyperlink{o__init_8c_a57a5ccdaa3a977cb82a16d7ec656f220}{disco}[dindx] != 0
337         && \hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[dindx].\hyperlink{structobjclass_ae589e91e556e204c84f05597da510559}{oc\_class} == acls; dindx++)
338         \textcolor{keywordflow}{if} (found)
339         \hyperlink{o__init_8c_a57a5ccdaa3a977cb82a16d7ec656f220}{disco}[dindx-1] = \hyperlink{o__init_8c_a57a5ccdaa3a977cb82a16d7ec656f220}{disco}[dindx];
340         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{o__init_8c_a57a5ccdaa3a977cb82a16d7ec656f220}{disco}[dindx] == oindx)
341         found = \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
342 
343     \textcolor{comment}{/* clear last slot */}
344     \textcolor{keywordflow}{if} (found) \hyperlink{o__init_8c_a57a5ccdaa3a977cb82a16d7ec656f220}{disco}[dindx-1] = 0;
345     \textcolor{keywordflow}{else} impossible(\textcolor{stringliteral}{"named object not in disco"});
346     \hyperlink{winprocs_8h_a12feb374290012aafc2340c5ba15f7e8}{update\_inventory}();
347     \}
348 \}
\end{DoxyCode}


\subsection{Variable Documentation}
\hypertarget{o__init_8c_a57a5ccdaa3a977cb82a16d7ec656f220}{\index{o\+\_\+init.\+c@{o\+\_\+init.\+c}!disco@{disco}}
\index{disco@{disco}!o\+\_\+init.\+c@{o\+\_\+init.\+c}}
\subsubsection[{disco}]{\setlength{\rightskip}{0pt plus 5cm}{\bf N\+E\+A\+R\+D\+A\+T\+A} short disco\mbox{[}N\+U\+M\+\_\+\+O\+B\+J\+E\+C\+T\+S\mbox{]} = {\bf D\+U\+M\+M\+Y}\hspace{0.3cm}{\ttfamily [static]}}}\label{o__init_8c_a57a5ccdaa3a977cb82a16d7ec656f220}


Definition at line 14 of file o\+\_\+init.\+c.

\hypertarget{o__init_8c_aed4a1c28f7f8fc9c1f21046ffe22a118}{\index{o\+\_\+init.\+c@{o\+\_\+init.\+c}!uniq\+\_\+objs@{uniq\+\_\+objs}}
\index{uniq\+\_\+objs@{uniq\+\_\+objs}!o\+\_\+init.\+c@{o\+\_\+init.\+c}}
\subsubsection[{uniq\+\_\+objs}]{\setlength{\rightskip}{0pt plus 5cm}short uniq\+\_\+objs\mbox{[}$\,$\mbox{]}\hspace{0.3cm}{\ttfamily [static]}}}\label{o__init_8c_aed4a1c28f7f8fc9c1f21046ffe22a118}
{\bfseries Initial value\+:}
\begin{DoxyCode}
= \{
    AMULET\_OF\_YENDOR,
    SPE\_BOOK\_OF\_THE\_DEAD,
    CANDELABRUM\_OF\_INVOCATION,
    BELL\_OF\_OPENING,
\}
\end{DoxyCode}


Definition at line 360 of file o\+\_\+init.\+c.

