\hypertarget{sys_2wince_2mhstatus_8c}{\section{nethack/sys/wince/mhstatus.c File Reference}
\label{sys_2wince_2mhstatus_8c}\index{nethack/sys/wince/mhstatus.\+c@{nethack/sys/wince/mhstatus.\+c}}
}
{\ttfamily \#include \char`\"{}win\+M\+S.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}mhstatus.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}mhmsg.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}mhfont.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}mhcolor.\+h\char`\"{}}\\*
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structmswin__nethack__status__window}{mswin\+\_\+nethack\+\_\+status\+\_\+window}
\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{sys_2wince_2mhstatus_8c_a7823f335c74115317a5e71c645dae320}{M\+A\+X\+W\+I\+N\+D\+O\+W\+T\+E\+X\+T}~255
\item 
\#define \hyperlink{sys_2wince_2mhstatus_8c_a57e5d66c533dfcfa72d5084433a59a75}{N\+H\+S\+T\+A\+T\+\_\+\+L\+I\+N\+E\+S\+\_\+2}~2
\item 
\#define \hyperlink{sys_2wince_2mhstatus_8c_aaa43e0a69b93a826ab8a03ef2a283e69}{N\+H\+S\+T\+A\+T\+\_\+\+L\+I\+N\+E\+S\+\_\+4}~4
\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \\*
\hyperlink{structmswin__nethack__status__window}{mswin\+\_\+nethack\+\_\+status\+\_\+window} \hyperlink{sys_2wince_2mhstatus_8c_a9ca4560918a0d146b6002f63d54d30c3}{N\+H\+Status\+Window}
\item 
typedef struct \\*
\hyperlink{structmswin__nethack__status__window}{mswin\+\_\+nethack\+\_\+status\+\_\+window} $\ast$ \hyperlink{sys_2wince_2mhstatus_8c_aeb0889e7a63d0e3137ccddc201bcbdcd}{P\+N\+H\+Status\+Window}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
L\+R\+E\+S\+U\+L\+T C\+A\+L\+L\+B\+A\+C\+K \hyperlink{sys_2wince_2mhstatus_8c_af278d268d7b7579f8b3974a6743423c3}{Status\+Wnd\+Proc} (H\+W\+N\+D, \hyperlink{def__os2_8h_a36cb3b01d81ffd844bbbfb54003e06ec}{U\+I\+N\+T}, W\+P\+A\+R\+A\+M, L\+P\+A\+R\+A\+M)
\item 
static void \hyperlink{sys_2wince_2mhstatus_8c_a031d6bc0c12d7a25fad5be40b431f48d}{register\+\_\+status\+\_\+window\+\_\+class} (void)
\item 
static void \hyperlink{sys_2wince_2mhstatus_8c_ab96d2c135574841b800648727b5b0d10}{Format\+Status\+String} (char $\ast$text, int format)
\item 
H\+W\+N\+D \hyperlink{sys_2wince_2mhstatus_8c_a9c3e8d6681671a0a19e6bd2fa94218e4}{mswin\+\_\+init\+\_\+status\+\_\+window} ()
\item 
void \hyperlink{sys_2wince_2mhstatus_8c_afe3299b041f27146f5608077f0dcf5f2}{mswin\+\_\+status\+\_\+window\+\_\+size} (H\+W\+N\+D h\+Wnd, L\+P\+S\+I\+Z\+E sz)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static T\+C\+H\+A\+R \hyperlink{sys_2wince_2mhstatus_8c_a82169a346a8ec1f3a8a134866cd80b48}{sz\+Status\+Window\+Class} \mbox{[}$\,$\mbox{]} = T\+E\+X\+T(\char`\"{}M\+S\+N\+H\+Status\+Wnd\+Class\char`\"{})
\item 
\hyperlink{tradstdc_8h_a2c212835823e3c54a8ab6d95c652660e}{const} char $\ast$ \hyperlink{sys_2wince_2mhstatus_8c_a3af488926df1efa13318d88448c2e7f5}{hu\+\_\+stat} \mbox{[}$\,$\mbox{]}
\item 
\hyperlink{tradstdc_8h_a2c212835823e3c54a8ab6d95c652660e}{const} char $\ast$ \hyperlink{sys_2wince_2mhstatus_8c_af6b2dd1e0df263200389ab9e886cf2c6}{enc\+\_\+stat} \mbox{[}$\,$\mbox{]}
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\hypertarget{sys_2wince_2mhstatus_8c_a7823f335c74115317a5e71c645dae320}{\index{sys/wince/mhstatus.\+c@{sys/wince/mhstatus.\+c}!M\+A\+X\+W\+I\+N\+D\+O\+W\+T\+E\+X\+T@{M\+A\+X\+W\+I\+N\+D\+O\+W\+T\+E\+X\+T}}
\index{M\+A\+X\+W\+I\+N\+D\+O\+W\+T\+E\+X\+T@{M\+A\+X\+W\+I\+N\+D\+O\+W\+T\+E\+X\+T}!sys/wince/mhstatus.\+c@{sys/wince/mhstatus.\+c}}
\subsubsection[{M\+A\+X\+W\+I\+N\+D\+O\+W\+T\+E\+X\+T}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+A\+X\+W\+I\+N\+D\+O\+W\+T\+E\+X\+T~255}}\label{sys_2wince_2mhstatus_8c_a7823f335c74115317a5e71c645dae320}


Definition at line 10 of file mhstatus.\+c.



Referenced by Status\+Wnd\+Proc().

\hypertarget{sys_2wince_2mhstatus_8c_a57e5d66c533dfcfa72d5084433a59a75}{\index{sys/wince/mhstatus.\+c@{sys/wince/mhstatus.\+c}!N\+H\+S\+T\+A\+T\+\_\+\+L\+I\+N\+E\+S\+\_\+2@{N\+H\+S\+T\+A\+T\+\_\+\+L\+I\+N\+E\+S\+\_\+2}}
\index{N\+H\+S\+T\+A\+T\+\_\+\+L\+I\+N\+E\+S\+\_\+2@{N\+H\+S\+T\+A\+T\+\_\+\+L\+I\+N\+E\+S\+\_\+2}!sys/wince/mhstatus.\+c@{sys/wince/mhstatus.\+c}}
\subsubsection[{N\+H\+S\+T\+A\+T\+\_\+\+L\+I\+N\+E\+S\+\_\+2}]{\setlength{\rightskip}{0pt plus 5cm}\#define N\+H\+S\+T\+A\+T\+\_\+\+L\+I\+N\+E\+S\+\_\+2~2}}\label{sys_2wince_2mhstatus_8c_a57e5d66c533dfcfa72d5084433a59a75}


Definition at line 12 of file mhstatus.\+c.



Referenced by Format\+Status\+String(), and mswin\+\_\+status\+\_\+window\+\_\+size().

\hypertarget{sys_2wince_2mhstatus_8c_aaa43e0a69b93a826ab8a03ef2a283e69}{\index{sys/wince/mhstatus.\+c@{sys/wince/mhstatus.\+c}!N\+H\+S\+T\+A\+T\+\_\+\+L\+I\+N\+E\+S\+\_\+4@{N\+H\+S\+T\+A\+T\+\_\+\+L\+I\+N\+E\+S\+\_\+4}}
\index{N\+H\+S\+T\+A\+T\+\_\+\+L\+I\+N\+E\+S\+\_\+4@{N\+H\+S\+T\+A\+T\+\_\+\+L\+I\+N\+E\+S\+\_\+4}!sys/wince/mhstatus.\+c@{sys/wince/mhstatus.\+c}}
\subsubsection[{N\+H\+S\+T\+A\+T\+\_\+\+L\+I\+N\+E\+S\+\_\+4}]{\setlength{\rightskip}{0pt plus 5cm}\#define N\+H\+S\+T\+A\+T\+\_\+\+L\+I\+N\+E\+S\+\_\+4~4}}\label{sys_2wince_2mhstatus_8c_aaa43e0a69b93a826ab8a03ef2a283e69}


Definition at line 13 of file mhstatus.\+c.



Referenced by Format\+Status\+String(), mswin\+\_\+init\+\_\+status\+\_\+window(), and mswin\+\_\+status\+\_\+window\+\_\+size().



\subsection{Typedef Documentation}
\hypertarget{sys_2wince_2mhstatus_8c_a9ca4560918a0d146b6002f63d54d30c3}{\index{sys/wince/mhstatus.\+c@{sys/wince/mhstatus.\+c}!N\+H\+Status\+Window@{N\+H\+Status\+Window}}
\index{N\+H\+Status\+Window@{N\+H\+Status\+Window}!sys/wince/mhstatus.\+c@{sys/wince/mhstatus.\+c}}
\subsubsection[{N\+H\+Status\+Window}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf mswin\+\_\+nethack\+\_\+status\+\_\+window}  {\bf N\+H\+Status\+Window}}}\label{sys_2wince_2mhstatus_8c_a9ca4560918a0d146b6002f63d54d30c3}
\hypertarget{sys_2wince_2mhstatus_8c_aeb0889e7a63d0e3137ccddc201bcbdcd}{\index{sys/wince/mhstatus.\+c@{sys/wince/mhstatus.\+c}!P\+N\+H\+Status\+Window@{P\+N\+H\+Status\+Window}}
\index{P\+N\+H\+Status\+Window@{P\+N\+H\+Status\+Window}!sys/wince/mhstatus.\+c@{sys/wince/mhstatus.\+c}}
\subsubsection[{P\+N\+H\+Status\+Window}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf mswin\+\_\+nethack\+\_\+status\+\_\+window} $\ast$ {\bf P\+N\+H\+Status\+Window}}}\label{sys_2wince_2mhstatus_8c_aeb0889e7a63d0e3137ccddc201bcbdcd}


\subsection{Function Documentation}
\hypertarget{sys_2wince_2mhstatus_8c_ab96d2c135574841b800648727b5b0d10}{\index{sys/wince/mhstatus.\+c@{sys/wince/mhstatus.\+c}!Format\+Status\+String@{Format\+Status\+String}}
\index{Format\+Status\+String@{Format\+Status\+String}!sys/wince/mhstatus.\+c@{sys/wince/mhstatus.\+c}}
\subsubsection[{Format\+Status\+String}]{\setlength{\rightskip}{0pt plus 5cm}void Format\+Status\+String (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{text, }
\item[{int}]{format}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{sys_2wince_2mhstatus_8c_ab96d2c135574841b800648727b5b0d10}


Definition at line 176 of file mhstatus.\+c.



References A\+\_\+\+C\+H\+A, A\+\_\+\+C\+H\+A\+O\+T\+I\+C, A\+\_\+\+C\+O\+N, A\+\_\+\+D\+E\+X, A\+\_\+\+I\+N\+T, A\+\_\+\+N\+E\+U\+T\+R\+A\+L, A\+\_\+\+S\+T\+R, A\+\_\+\+W\+I\+S, A\+C\+U\+R\+R, Blind, B\+U\+F\+S\+Z, C\+O\+I\+N\+\_\+\+C\+L\+A\+S\+S, Confusion, enc\+\_\+stat, eos(), flag\+::female, flags, Hallucination, hu\+\_\+stat, invent, you\+::mh, you\+::mhmax, permonst\+::mlevel, permonst\+::mname, mons, moves, N\+H\+S\+T\+A\+T\+\_\+\+L\+I\+N\+E\+S\+\_\+2, N\+H\+S\+T\+A\+T\+\_\+\+L\+I\+N\+E\+S\+\_\+4, oc\+\_\+syms, plname, Role\+\_\+switch, Sick, S\+I\+C\+K\+\_\+\+N\+O\+N\+V\+O\+M\+I\+T\+A\+B\+L\+E, S\+I\+C\+K\+\_\+\+V\+O\+M\+I\+T\+A\+B\+L\+E, Slimed, Sprintf, S\+T\+R18, Strcat, Strcpy, Stunned, flag\+::time, align\+::type, u, you\+::uac, you\+::ualign, you\+::uen, you\+::uenmax, you\+::uexp, you\+::ugold, you\+::uhp, you\+::uhpmax, you\+::uhs, you\+::ulevel, you\+::umonnum, U\+N\+E\+N\+C\+U\+M\+B\+E\+R\+E\+D, and Upolyd.



Referenced by Status\+Wnd\+Proc().


\begin{DoxyCode}
177 \{
178     \textcolor{keyword}{register} \textcolor{keywordtype}{char} *nb;
179     \textcolor{keywordtype}{int} hp, hpmax;
180     \textcolor{keywordtype}{int} cap = near\_capacity();
181 
182     \hyperlink{global_8h_add22f733d1f2c380499f495068e42b7c}{Strcpy}(text, \hyperlink{decl_8h_a362b24d8378ea9e5a611cc50d66e354b}{plname});
183     \textcolor{keywordflow}{if}(\textcolor{charliteral}{'a'} <= text[0] && text[0] <= \textcolor{charliteral}{'z'}) text[0] += \textcolor{charliteral}{'A'}-\textcolor{charliteral}{'a'};
184     text[10] = 0;
185     \hyperlink{global_8h_aa55ba8f4e3c82fe00035e6b51d6c7dee}{Sprintf}(nb = \hyperlink{makedefs_8c_a72563303ed4b67f2a7dd9f2d15a01558}{eos}(text),\textcolor{stringliteral}{" the "});
186 
187     \textcolor{keywordflow}{if} (\hyperlink{you_8h_ab869582031082f2c352b374dc0e0c3b3}{Upolyd}) \{
188         \textcolor{keywordtype}{char} mbot[\hyperlink{global_8h_ab26c26cbf7a0c97d8960c3cfb413f882}{BUFSZ}];
189         \textcolor{keywordtype}{int} k = 0;
190 
191         \hyperlink{global_8h_add22f733d1f2c380499f495068e42b7c}{Strcpy}(mbot, \hyperlink{permonst_8h_ab96e7c4682ea5ae4f83339a15c06f676}{mons}[\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ae0b7ade89d09cd3b6d5e05eb8c859b35}{umonnum}].\hyperlink{structpermonst_ae92da7d141243d7e37d4a12340bb248f}{mname});
192         \textcolor{keywordflow}{while}(mbot[k] != 0) \{
193             \textcolor{keywordflow}{if} ((k == 0 || (k > 0 && mbot[k-1] == \textcolor{charliteral}{' '})) &&
194                     \textcolor{charliteral}{'a'} <= mbot[k] && mbot[k] <= \textcolor{charliteral}{'z'})
195             mbot[k] += \textcolor{charliteral}{'A'} - \textcolor{charliteral}{'a'};
196             k++;
197         \}
198         \hyperlink{global_8h_aa55ba8f4e3c82fe00035e6b51d6c7dee}{Sprintf}(nb = \hyperlink{makedefs_8c_a72563303ed4b67f2a7dd9f2d15a01558}{eos}(nb), mbot);
199     \} \textcolor{keywordflow}{else}
200         \hyperlink{global_8h_aa55ba8f4e3c82fe00035e6b51d6c7dee}{Sprintf}(nb = \hyperlink{makedefs_8c_a72563303ed4b67f2a7dd9f2d15a01558}{eos}(nb), rank\_of(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a6c7263bb25b91825bf7ecaab470d771a}{ulevel}, \hyperlink{you_8h_a4e9c08c02937a7b0216c1ebdd3a3255d}{Role\_switch}, 
      \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_ae3f866c572c50c676ecadf8acccf0c50}{female}));
201 
202     \textcolor{keywordflow}{if}( format==\hyperlink{sys_2wince_2mhstatus_8c_aaa43e0a69b93a826ab8a03ef2a283e69}{NHSTAT\_LINES\_4} ) \hyperlink{global_8h_aa55ba8f4e3c82fe00035e6b51d6c7dee}{Sprintf}(nb = \hyperlink{makedefs_8c_a72563303ed4b67f2a7dd9f2d15a01558}{eos}(nb),\textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"});
203 
204     \textcolor{keywordflow}{if} (\hyperlink{attrib_8h_ab83869fac11f870c2193469440573f84}{ACURR}(\hyperlink{attrib_8h_ad53430e3d611a366ec4b5c457b4c67f7}{A\_STR}) > 18) \{
205         \textcolor{keywordflow}{if} (\hyperlink{attrib_8h_ab83869fac11f870c2193469440573f84}{ACURR}(\hyperlink{attrib_8h_ad53430e3d611a366ec4b5c457b4c67f7}{A\_STR}) > \hyperlink{attrib_8h_a66a5edfb2b1d12ca5d01ee986ce5cda8}{STR18}(100))
206             \hyperlink{global_8h_aa55ba8f4e3c82fe00035e6b51d6c7dee}{Sprintf}(nb = \hyperlink{makedefs_8c_a72563303ed4b67f2a7dd9f2d15a01558}{eos}(nb),\textcolor{stringliteral}{"St:%2d "},\hyperlink{attrib_8h_ab83869fac11f870c2193469440573f84}{ACURR}(\hyperlink{attrib_8h_ad53430e3d611a366ec4b5c457b4c67f7}{A\_STR})-100);
207         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{attrib_8h_ab83869fac11f870c2193469440573f84}{ACURR}(\hyperlink{attrib_8h_ad53430e3d611a366ec4b5c457b4c67f7}{A\_STR}) < \hyperlink{attrib_8h_a66a5edfb2b1d12ca5d01ee986ce5cda8}{STR18}(100))
208             \hyperlink{global_8h_aa55ba8f4e3c82fe00035e6b51d6c7dee}{Sprintf}(nb = \hyperlink{makedefs_8c_a72563303ed4b67f2a7dd9f2d15a01558}{eos}(nb), \textcolor{stringliteral}{"St:18/%02d "},\hyperlink{attrib_8h_ab83869fac11f870c2193469440573f84}{ACURR}(\hyperlink{attrib_8h_ad53430e3d611a366ec4b5c457b4c67f7}{A\_STR})-18);
209         \textcolor{keywordflow}{else}
210             \hyperlink{global_8h_aa55ba8f4e3c82fe00035e6b51d6c7dee}{Sprintf}(nb = \hyperlink{makedefs_8c_a72563303ed4b67f2a7dd9f2d15a01558}{eos}(nb),\textcolor{stringliteral}{"St:18/** "});
211     \} \textcolor{keywordflow}{else}
212         \hyperlink{global_8h_aa55ba8f4e3c82fe00035e6b51d6c7dee}{Sprintf}(nb = \hyperlink{makedefs_8c_a72563303ed4b67f2a7dd9f2d15a01558}{eos}(nb), \textcolor{stringliteral}{"St:%-1d "},\hyperlink{attrib_8h_ab83869fac11f870c2193469440573f84}{ACURR}(\hyperlink{attrib_8h_ad53430e3d611a366ec4b5c457b4c67f7}{A\_STR}));
213     \hyperlink{global_8h_aa55ba8f4e3c82fe00035e6b51d6c7dee}{Sprintf}(nb = \hyperlink{makedefs_8c_a72563303ed4b67f2a7dd9f2d15a01558}{eos}(nb),
214         \textcolor{stringliteral}{"Dx:%-1d Co:%-1d In:%-1d Wi:%-1d Ch:%-1d"},
215         \hyperlink{attrib_8h_ab83869fac11f870c2193469440573f84}{ACURR}(\hyperlink{attrib_8h_ad8117dfaac470310d7540a3e8dcc00e0}{A\_DEX}), \hyperlink{attrib_8h_ab83869fac11f870c2193469440573f84}{ACURR}(\hyperlink{attrib_8h_a82a29f9d3d2390f61fc68b2a352b5da3}{A\_CON}), \hyperlink{attrib_8h_ab83869fac11f870c2193469440573f84}{ACURR}(\hyperlink{attrib_8h_a583ef0a9b22ce89bcf0df81228b424b5}{A\_INT}), 
      \hyperlink{attrib_8h_ab83869fac11f870c2193469440573f84}{ACURR}(\hyperlink{attrib_8h_a4206d6431732a698ede8a237d5c17142}{A\_WIS}), \hyperlink{attrib_8h_ab83869fac11f870c2193469440573f84}{ACURR}(\hyperlink{attrib_8h_ae4773cfa1f5c2e5eeef1e23baa6e1c3f}{A\_CHA}));
216     \hyperlink{global_8h_aa55ba8f4e3c82fe00035e6b51d6c7dee}{Sprintf}(nb = \hyperlink{makedefs_8c_a72563303ed4b67f2a7dd9f2d15a01558}{eos}(nb), (\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a3f202dd89a837a9772a9eb1f1965f30c}{ualign}.\hyperlink{structalign_a0dadfa91b9ff06447f91ea8a2b898827}{type} == \hyperlink{align_8h_a1d8f0bc268ba9729ef2e1cb0d3ea763b}{A\_CHAOTIC}) ? \textcolor{stringliteral}{"  Chaotic"} :
217             (\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a3f202dd89a837a9772a9eb1f1965f30c}{ualign}.\hyperlink{structalign_a0dadfa91b9ff06447f91ea8a2b898827}{type} == \hyperlink{align_8h_a58fee99b3a5a5db767e86d4c6705c9a1}{A\_NEUTRAL}) ? \textcolor{stringliteral}{"  Neutral"} : \textcolor{stringliteral}{"  Lawful"});
218 \textcolor{preprocessor}{#ifdef SCORE\_ON\_BOTL}
219     \textcolor{keywordflow}{if} (\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.showscore)
220         \hyperlink{global_8h_aa55ba8f4e3c82fe00035e6b51d6c7dee}{Sprintf}(nb = \hyperlink{makedefs_8c_a72563303ed4b67f2a7dd9f2d15a01558}{eos}(nb), \textcolor{stringliteral}{" S:%ld"}, botl\_score());
221 \textcolor{preprocessor}{#endif}
222     \textcolor{keywordflow}{if}( format==\hyperlink{sys_2wince_2mhstatus_8c_aaa43e0a69b93a826ab8a03ef2a283e69}{NHSTAT\_LINES\_4} ||
223         format==\hyperlink{sys_2wince_2mhstatus_8c_a57e5d66c533dfcfa72d5084433a59a75}{NHSTAT\_LINES\_2} ) strcat(text, \textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"});
224 
225     \textcolor{comment}{/* third line */}
226     hp = \hyperlink{you_8h_ab869582031082f2c352b374dc0e0c3b3}{Upolyd} ? \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a2106fda1b357aa3395703a3abff426f8}{mh} : \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a94468a400f14da123d5160f8eefd7641}{uhp};
227     hpmax = \hyperlink{you_8h_ab869582031082f2c352b374dc0e0c3b3}{Upolyd} ? \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ad0eb213f6299ffa1529fc7864003a044}{mhmax} : \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ade36670a142a7d38051c74740d02002b}{uhpmax};
228 
229     \textcolor{keywordflow}{if}(hp < 0) hp = 0;
230     (void) describe\_level(nb=\hyperlink{makedefs_8c_a72563303ed4b67f2a7dd9f2d15a01558}{eos}(nb));
231     \hyperlink{global_8h_aa55ba8f4e3c82fe00035e6b51d6c7dee}{Sprintf}(nb = \hyperlink{makedefs_8c_a72563303ed4b67f2a7dd9f2d15a01558}{eos}(nb),
232         \textcolor{stringliteral}{"%c:%-2ld HP:%d(%d) Pw:%d(%d) AC:%-2d"}, \hyperlink{decl_8h_a56fccf5eb894981c31e2e5e3a99abf12}{oc\_syms}[\hyperlink{objclass_8h_a2999621925083659147349e261e4cb3d}{COIN\_CLASS}],
233 #ifndef GOLDOBJ
234         \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_af666e1fd44c5efe34df9053aef068245}{ugold},
235 #\textcolor{keywordflow}{else}
236         money\_cnt(\hyperlink{decl_8h_a65d03deeacf265a14fa3af961820b33f}{invent}),
237 #endif
238         hp, hpmax, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a3c465c4017dafc312188046dde2fc080}{uen}, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_aed246159794c7c780aeea2aca5adabe8}{uenmax}, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a4286c7d027f70b103209bb3406ea3d85}{uac});
239 
240     \textcolor{keywordflow}{if} (\hyperlink{you_8h_ab869582031082f2c352b374dc0e0c3b3}{Upolyd})
241         \hyperlink{global_8h_aa55ba8f4e3c82fe00035e6b51d6c7dee}{Sprintf}(nb = \hyperlink{makedefs_8c_a72563303ed4b67f2a7dd9f2d15a01558}{eos}(nb), \textcolor{stringliteral}{" HD:%d"}, \hyperlink{permonst_8h_ab96e7c4682ea5ae4f83339a15c06f676}{mons}[\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ae0b7ade89d09cd3b6d5e05eb8c859b35}{umonnum}].
      \hyperlink{structpermonst_aeed45d1ab54620bc7e5242b76f1c3c5f}{mlevel});
242 \textcolor{preprocessor}{#ifdef EXP\_ON\_BOTL}
243     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.showexp)
244         \hyperlink{global_8h_aa55ba8f4e3c82fe00035e6b51d6c7dee}{Sprintf}(nb = \hyperlink{makedefs_8c_a72563303ed4b67f2a7dd9f2d15a01558}{eos}(nb), \textcolor{stringliteral}{" Xp:%u/%-1ld"}, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a6c7263bb25b91825bf7ecaab470d771a}{ulevel},\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a3a113c432a2a47b28f746f9455907487}{uexp});
245 \textcolor{preprocessor}{#endif}
246     \textcolor{keywordflow}{else}
247         \hyperlink{global_8h_aa55ba8f4e3c82fe00035e6b51d6c7dee}{Sprintf}(nb = \hyperlink{makedefs_8c_a72563303ed4b67f2a7dd9f2d15a01558}{eos}(nb), \textcolor{stringliteral}{" Exp:%u"}, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a6c7263bb25b91825bf7ecaab470d771a}{ulevel});
248     \textcolor{keywordflow}{if}( format==\hyperlink{sys_2wince_2mhstatus_8c_aaa43e0a69b93a826ab8a03ef2a283e69}{NHSTAT\_LINES\_4} ) strcat(text, \textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"});
249     \textcolor{keywordflow}{else}                         strcat(text, \textcolor{stringliteral}{" "});
250 
251     \textcolor{comment}{/* forth line */}
252     \textcolor{keywordflow}{if}(\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_adacd6190247689360201f34b2aa9148a}{time})
253         \hyperlink{global_8h_aa55ba8f4e3c82fe00035e6b51d6c7dee}{Sprintf}(nb = \hyperlink{makedefs_8c_a72563303ed4b67f2a7dd9f2d15a01558}{eos}(nb), \textcolor{stringliteral}{"T:%ld "}, \hyperlink{decl_8h_a2ccad6e8fb93740ed50c6d9a8f72ce2f}{moves});
254 
255     \textcolor{keywordflow}{if}(strcmp(\hyperlink{sys_2wince_2mhstatus_8c_a3af488926df1efa13318d88448c2e7f5}{hu\_stat}[\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a4ba11c494ae99f9d1ba9d65ad07c5097}{uhs}], \textcolor{stringliteral}{"        "})) \{
256         \hyperlink{global_8h_a6d985a6c569a61be75fcacf7623f0988}{Strcat}(text, \hyperlink{sys_2wince_2mhstatus_8c_a3af488926df1efa13318d88448c2e7f5}{hu\_stat}[\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a4ba11c494ae99f9d1ba9d65ad07c5097}{uhs}]);
257         \hyperlink{global_8h_aa55ba8f4e3c82fe00035e6b51d6c7dee}{Sprintf}(nb = \hyperlink{makedefs_8c_a72563303ed4b67f2a7dd9f2d15a01558}{eos}(nb), \textcolor{stringliteral}{" "});
258     \}
259     \textcolor{keywordflow}{if}(\hyperlink{youprop_8h_a85174462efda5cc2dc2a49a0249801bb}{Confusion})     \hyperlink{global_8h_aa55ba8f4e3c82fe00035e6b51d6c7dee}{Sprintf}(nb = \hyperlink{makedefs_8c_a72563303ed4b67f2a7dd9f2d15a01558}{eos}(nb), \textcolor{stringliteral}{"Conf"});
260     \textcolor{keywordflow}{if}(\hyperlink{youprop_8h_a43a7dcd441841e6703322b8a2ea3b6a5}{Sick}) \{
261         \textcolor{keywordflow}{if} (\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.usick\_type & \hyperlink{you_8h_a08c3ee5d427967ad406c2706b3d7c929}{SICK\_VOMITABLE})
262                \hyperlink{global_8h_aa55ba8f4e3c82fe00035e6b51d6c7dee}{Sprintf}(nb = \hyperlink{makedefs_8c_a72563303ed4b67f2a7dd9f2d15a01558}{eos}(nb), \textcolor{stringliteral}{" FoodPois"});
263         \textcolor{keywordflow}{if} (\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.usick\_type & \hyperlink{you_8h_a17a4f65d7316d356ff7e6a292d2627bc}{SICK\_NONVOMITABLE})
264                \hyperlink{global_8h_aa55ba8f4e3c82fe00035e6b51d6c7dee}{Sprintf}(nb = \hyperlink{makedefs_8c_a72563303ed4b67f2a7dd9f2d15a01558}{eos}(nb), \textcolor{stringliteral}{" Ill"});
265     \}
266     \textcolor{keywordflow}{if}(\hyperlink{youprop_8h_a1b6e24068169af4177e15b48595c08c9}{Blind})     \hyperlink{global_8h_aa55ba8f4e3c82fe00035e6b51d6c7dee}{Sprintf}(nb = \hyperlink{makedefs_8c_a72563303ed4b67f2a7dd9f2d15a01558}{eos}(nb), \textcolor{stringliteral}{" Blind"});
267     \textcolor{keywordflow}{if}(\hyperlink{youprop_8h_afd7fdfec2109113244c347015bab4ad1}{Stunned})     \hyperlink{global_8h_aa55ba8f4e3c82fe00035e6b51d6c7dee}{Sprintf}(nb = \hyperlink{makedefs_8c_a72563303ed4b67f2a7dd9f2d15a01558}{eos}(nb), \textcolor{stringliteral}{" Stun"});
268     \textcolor{keywordflow}{if}(\hyperlink{youprop_8h_aa873f7ea0a3d096ef94ff651907f7a76}{Hallucination})  \hyperlink{global_8h_aa55ba8f4e3c82fe00035e6b51d6c7dee}{Sprintf}(nb = \hyperlink{makedefs_8c_a72563303ed4b67f2a7dd9f2d15a01558}{eos}(nb), \textcolor{stringliteral}{" Hallu"});
269     \textcolor{keywordflow}{if}(\hyperlink{youprop_8h_a1d6ced121072dc4fb35b71e5fdebe596}{Slimed})         \hyperlink{global_8h_aa55ba8f4e3c82fe00035e6b51d6c7dee}{Sprintf}(nb = \hyperlink{makedefs_8c_a72563303ed4b67f2a7dd9f2d15a01558}{eos}(nb), \textcolor{stringliteral}{" Slime"});
270     \textcolor{keywordflow}{if}(cap > \hyperlink{hack_8h_a10ca5b6266edcafafcefcbe4b08182cd}{UNENCUMBERED})
271         \hyperlink{global_8h_aa55ba8f4e3c82fe00035e6b51d6c7dee}{Sprintf}(nb = \hyperlink{makedefs_8c_a72563303ed4b67f2a7dd9f2d15a01558}{eos}(nb), \textcolor{stringliteral}{" %s"}, \hyperlink{sys_2wince_2mhstatus_8c_af6b2dd1e0df263200389ab9e886cf2c6}{enc\_stat}[cap]);
272 \}
\end{DoxyCode}
\hypertarget{sys_2wince_2mhstatus_8c_a9c3e8d6681671a0a19e6bd2fa94218e4}{\index{sys/wince/mhstatus.\+c@{sys/wince/mhstatus.\+c}!mswin\+\_\+init\+\_\+status\+\_\+window@{mswin\+\_\+init\+\_\+status\+\_\+window}}
\index{mswin\+\_\+init\+\_\+status\+\_\+window@{mswin\+\_\+init\+\_\+status\+\_\+window}!sys/wince/mhstatus.\+c@{sys/wince/mhstatus.\+c}}
\subsubsection[{mswin\+\_\+init\+\_\+status\+\_\+window}]{\setlength{\rightskip}{0pt plus 5cm}H\+W\+N\+D mswin\+\_\+init\+\_\+status\+\_\+window (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{sys_2wince_2mhstatus_8c_a9c3e8d6681671a0a19e6bd2fa94218e4}


Definition at line 24 of file mhstatus.\+c.



Referenced by mswin\+\_\+create\+\_\+nhwindow().


\begin{DoxyCode}
24                                  \{
25     \textcolor{keyword}{static} \textcolor{keywordtype}{int} run\_once = 0;
26     HWND ret;
27     \hyperlink{structmswin__nethack__status__window}{NHStatusWindow}* data;
28 
29     \textcolor{keywordflow}{if}( !run\_once ) \{
30         \hyperlink{sys_2wince_2mhstatus_8c_a031d6bc0c12d7a25fad5be40b431f48d}{register\_status\_window\_class}( );
31         run\_once = 1;
32     \}
33     
34     ret = CreateWindow(                                
35             \hyperlink{sys_2wince_2mhstatus_8c_a82169a346a8ec1f3a8a134866cd80b48}{szStatusWindowClass},
36             \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL},
37             WS\_CHILD | WS\_DISABLED | WS\_CLIPSIBLINGS,
38             0,  \textcolor{comment}{/* x position */}
39             0,  \textcolor{comment}{/* y position */}
40             0,  \textcolor{comment}{/* x-size - we will set it later */}
41             0,  \textcolor{comment}{/* y-size - we will set it later */}
42             \hyperlink{sys_2wince_2winhack_8c_ad72c8d80c9fc01eaf07a3c2463ab88bd}{GetNHApp}()->hMainWnd,
43             \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL},
44             \hyperlink{sys_2wince_2winhack_8c_ad72c8d80c9fc01eaf07a3c2463ab88bd}{GetNHApp}()->hApp,
45             \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} );
46     \textcolor{keywordflow}{if}( !ret ) \hyperlink{txt2iff_8c_ab0824b6f5eb51db9371d2e9a222249d3}{panic}(\textcolor{stringliteral}{"Cannot create status window"});
47     
48     EnableWindow(ret, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE});
49 
50     data = (\hyperlink{sys_2wince_2mhstatus_8c_aeb0889e7a63d0e3137ccddc201bcbdcd}{PNHStatusWindow})\hyperlink{winproto_8h_ab028c02ac00afc0c1d3c568ccad68869}{malloc}(\textcolor{keyword}{sizeof}(\hyperlink{structmswin__nethack__status__window}{NHStatusWindow}));
51     \textcolor{keywordflow}{if}( !data ) \hyperlink{txt2iff_8c_ab0824b6f5eb51db9371d2e9a222249d3}{panic}(\textcolor{stringliteral}{"out of memory"});
52 
53     ZeroMemory(data, \textcolor{keyword}{sizeof}(\hyperlink{structmswin__nethack__status__window}{NHStatusWindow}));
54     data->\hyperlink{structmswin__nethack__status__window_a09fc0b982f6cded2ee8cc2ab5771f473}{nhstat\_format} = \hyperlink{sys_2wince_2mhstatus_8c_aaa43e0a69b93a826ab8a03ef2a283e69}{NHSTAT\_LINES\_4};
55     SetWindowLong(ret, GWL\_USERDATA, (LONG)data);
56     \textcolor{keywordflow}{return} ret;
57 \}
\end{DoxyCode}
\hypertarget{sys_2wince_2mhstatus_8c_afe3299b041f27146f5608077f0dcf5f2}{\index{sys/wince/mhstatus.\+c@{sys/wince/mhstatus.\+c}!mswin\+\_\+status\+\_\+window\+\_\+size@{mswin\+\_\+status\+\_\+window\+\_\+size}}
\index{mswin\+\_\+status\+\_\+window\+\_\+size@{mswin\+\_\+status\+\_\+window\+\_\+size}!sys/wince/mhstatus.\+c@{sys/wince/mhstatus.\+c}}
\subsubsection[{mswin\+\_\+status\+\_\+window\+\_\+size}]{\setlength{\rightskip}{0pt plus 5cm}void mswin\+\_\+status\+\_\+window\+\_\+size (
\begin{DoxyParamCaption}
\item[{H\+W\+N\+D}]{h\+Wnd, }
\item[{L\+P\+S\+I\+Z\+E}]{sz}
\end{DoxyParamCaption}
)}}\label{sys_2wince_2mhstatus_8c_afe3299b041f27146f5608077f0dcf5f2}


Definition at line 146 of file mhstatus.\+c.



Referenced by mswin\+\_\+layout\+\_\+main\+\_\+window().


\begin{DoxyCode}
147 \{
148     TEXTMETRIC \hyperlink{structtm}{tm};
149     HGDIOBJ saveFont;
150     HDC hdc;
151     \hyperlink{structmswin__nethack__status__window}{PNHStatusWindow} data;
152     RECT rt;
153     GetWindowRect(hWnd, &rt);
154     sz->cx = rt.right - rt.left;
155     sz->cy = rt.bottom - rt.top;
156 
157     data = (\hyperlink{sys_2wince_2mhstatus_8c_aeb0889e7a63d0e3137ccddc201bcbdcd}{PNHStatusWindow})GetWindowLong(hWnd, GWL\_USERDATA);
158     \textcolor{keywordflow}{if}(data) \{
159         hdc = GetDC(hWnd);
160         saveFont = SelectObject(hdc, \hyperlink{sys_2wince_2mhfont_8c_a480013e685b85460be07910c65a1ef51}{mswin\_get\_font}(\hyperlink{wintype_8h_a8ed5b99ab7f854ace5f67f89aaae5404}{NHW\_STATUS}, 
      \hyperlink{wintype_8h_a20a20b74e8cf84ecfbf3c8665c059636}{ATR\_NONE}, hdc, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}));
161         GetTextMetrics(hdc, &tm);
162 
163         \textcolor{comment}{/* see if the status window can fit 80 characters per line */}
164         \textcolor{keywordflow}{if}( (80*tm.tmMaxCharWidth)>=sz->cx ) data->\hyperlink{structmswin__nethack__status__window_a09fc0b982f6cded2ee8cc2ab5771f473}{nhstat\_format} = 
      \hyperlink{sys_2wince_2mhstatus_8c_aaa43e0a69b93a826ab8a03ef2a283e69}{NHSTAT\_LINES\_4};
165         \textcolor{keywordflow}{else}                             data->\hyperlink{structmswin__nethack__status__window_a09fc0b982f6cded2ee8cc2ab5771f473}{nhstat\_format} = 
      \hyperlink{sys_2wince_2mhstatus_8c_a57e5d66c533dfcfa72d5084433a59a75}{NHSTAT\_LINES\_2};
166 
167         \textcolor{comment}{/* set height of the status box */}
168         sz->cy = tm.tmHeight * data->\hyperlink{structmswin__nethack__status__window_a09fc0b982f6cded2ee8cc2ab5771f473}{nhstat\_format};
169 
170         SelectObject(hdc, saveFont);
171         ReleaseDC(hWnd, hdc);
172     \}
173 \}
\end{DoxyCode}
\hypertarget{sys_2wince_2mhstatus_8c_a031d6bc0c12d7a25fad5be40b431f48d}{\index{sys/wince/mhstatus.\+c@{sys/wince/mhstatus.\+c}!register\+\_\+status\+\_\+window\+\_\+class@{register\+\_\+status\+\_\+window\+\_\+class}}
\index{register\+\_\+status\+\_\+window\+\_\+class@{register\+\_\+status\+\_\+window\+\_\+class}!sys/wince/mhstatus.\+c@{sys/wince/mhstatus.\+c}}
\subsubsection[{register\+\_\+status\+\_\+window\+\_\+class}]{\setlength{\rightskip}{0pt plus 5cm}void register\+\_\+status\+\_\+window\+\_\+class (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{sys_2wince_2mhstatus_8c_a031d6bc0c12d7a25fad5be40b431f48d}


Definition at line 59 of file mhstatus.\+c.



References Get\+N\+H\+App(), mswin\+\_\+nhwindow\+\_\+app\+::h\+App, M\+S\+W\+I\+N\+\_\+\+C\+O\+L\+O\+R\+\_\+\+B\+G, mswin\+\_\+get\+\_\+brush(), N\+H\+W\+\_\+\+S\+T\+A\+T\+U\+S, N\+U\+L\+L, Status\+Wnd\+Proc(), and sz\+Status\+Window\+Class.



Referenced by mswin\+\_\+init\+\_\+status\+\_\+window().


\begin{DoxyCode}
60 \{
61     WNDCLASS wcex;
62     
63     ZeroMemory( &wcex, \textcolor{keyword}{sizeof}(wcex));
64     wcex.style          = CS\_NOCLOSE;
65     wcex.lpfnWndProc    = (WNDPROC)\hyperlink{sys_2wince_2mhstatus_8c_af278d268d7b7579f8b3974a6743423c3}{StatusWndProc};
66     wcex.cbClsExtra     = 0;
67     wcex.cbWndExtra     = 0;
68     wcex.hInstance      = \hyperlink{sys_2wince_2winhack_8c_ad72c8d80c9fc01eaf07a3c2463ab88bd}{GetNHApp}()->\hyperlink{structmswin__nhwindow__app_ae3a365ad66195c8e1d915242897c3f24}{hApp};
69     wcex.hIcon          = \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
70     wcex.hCursor        = LoadCursor(\hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, IDC\_ARROW);
71     wcex.hbrBackground  = \hyperlink{mhcolor_8c_ace6d2982c253de50f648605b5352e083}{mswin\_get\_brush}(\hyperlink{wintype_8h_a8ed5b99ab7f854ace5f67f89aaae5404}{NHW\_STATUS}, 
      \hyperlink{mhcolor_8h_a95a6bcc0be3a6670574883b5814f5b53}{MSWIN\_COLOR\_BG});
72     wcex.lpszMenuName   = \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
73     wcex.lpszClassName  = \hyperlink{sys_2wince_2mhstatus_8c_a82169a346a8ec1f3a8a134866cd80b48}{szStatusWindowClass};
74 
75     RegisterClass(&wcex);
76 \}
\end{DoxyCode}
\hypertarget{sys_2wince_2mhstatus_8c_af278d268d7b7579f8b3974a6743423c3}{\index{sys/wince/mhstatus.\+c@{sys/wince/mhstatus.\+c}!Status\+Wnd\+Proc@{Status\+Wnd\+Proc}}
\index{Status\+Wnd\+Proc@{Status\+Wnd\+Proc}!sys/wince/mhstatus.\+c@{sys/wince/mhstatus.\+c}}
\subsubsection[{Status\+Wnd\+Proc}]{\setlength{\rightskip}{0pt plus 5cm}L\+R\+E\+S\+U\+L\+T C\+A\+L\+L\+B\+A\+C\+K Status\+Wnd\+Proc (
\begin{DoxyParamCaption}
\item[{H\+W\+N\+D}]{h\+Wnd, }
\item[{{\bf U\+I\+N\+T}}]{message, }
\item[{W\+P\+A\+R\+A\+M}]{w\+Param, }
\item[{L\+P\+A\+R\+A\+M}]{l\+Param}
\end{DoxyParamCaption}
)}}\label{sys_2wince_2mhstatus_8c_af278d268d7b7579f8b3974a6743423c3}


Definition at line 79 of file mhstatus.\+c.



References A\+T\+R\+\_\+\+N\+O\+N\+E, F\+A\+L\+S\+E, Format\+Status\+String(), free(), Get\+N\+H\+App(), M\+A\+X\+W\+I\+N\+D\+O\+W\+T\+E\+X\+T, M\+S\+N\+H\+\_\+\+M\+S\+G\+\_\+\+C\+L\+E\+A\+R\+\_\+\+W\+I\+N\+D\+O\+W, M\+S\+N\+H\+\_\+\+M\+S\+G\+\_\+\+C\+U\+R\+S\+O\+R, M\+S\+N\+H\+\_\+\+M\+S\+G\+\_\+\+P\+U\+T\+S\+T\+R, M\+S\+W\+I\+N\+\_\+\+C\+O\+L\+O\+R\+\_\+\+B\+G, M\+S\+W\+I\+N\+\_\+\+C\+O\+L\+O\+R\+\_\+\+F\+G, mswin\+\_\+get\+\_\+color(), mswin\+\_\+get\+\_\+font(), N\+H\+\_\+\+A2\+W, mswin\+\_\+nethack\+\_\+status\+\_\+window\+::nhstat\+\_\+format, N\+H\+W\+\_\+\+S\+T\+A\+T\+U\+S, N\+U\+L\+L, T\+R\+U\+E, mswin\+\_\+nethack\+\_\+status\+\_\+window\+::window\+\_\+text, W\+M\+\_\+\+M\+S\+N\+H\+\_\+\+C\+O\+M\+M\+A\+N\+D, and mswin\+\_\+nhmsg\+\_\+cursor\+::y.



Referenced by register\+\_\+status\+\_\+window\+\_\+class().


\begin{DoxyCode}
80 \{
81     RECT rt;
82     PAINTSTRUCT ps;
83     HDC hdc;
84     \hyperlink{structmswin__nethack__status__window}{PNHStatusWindow} data;
85     
86     data = (\hyperlink{sys_2wince_2mhstatus_8c_aeb0889e7a63d0e3137ccddc201bcbdcd}{PNHStatusWindow})GetWindowLong(hWnd, GWL\_USERDATA);
87     \textcolor{keywordflow}{switch} (message) 
88     \{
89     \textcolor{keywordflow}{case} \hyperlink{sys_2wince_2mhmsg_8h_a55eac656fabe0d462816201ac756eab6}{WM\_MSNH\_COMMAND}: \{
90         \textcolor{keywordflow}{switch}( wParam ) \{
91         
92         \textcolor{keywordflow}{case} \hyperlink{sys_2wince_2mhmsg_8h_a483b8d3a386f1c5d76da1dff6ed549a8}{MSNH\_MSG\_PUTSTR}:
93         \textcolor{keywordflow}{case} \hyperlink{sys_2wince_2mhmsg_8h_a569048188a906452ebb6b755cd9ac662}{MSNH\_MSG\_CLEAR\_WINDOW}:
94             ZeroMemory(data->\hyperlink{structmswin__nethack__status__window_afc39505634916f0cd93ca59544203033}{window\_text}, \textcolor{keyword}{sizeof}(data->\hyperlink{structmswin__nethack__status__window_afc39505634916f0cd93ca59544203033}{window\_text}));
95             \hyperlink{sys_2wince_2mhstatus_8c_ab96d2c135574841b800648727b5b0d10}{FormatStatusString}(data->\hyperlink{structmswin__nethack__status__window_afc39505634916f0cd93ca59544203033}{window\_text}, data->
      \hyperlink{structmswin__nethack__status__window_a09fc0b982f6cded2ee8cc2ab5771f473}{nhstat\_format});
96             \textcolor{keywordflow}{break};
97 
98         \textcolor{keywordflow}{case} \hyperlink{sys_2wince_2mhmsg_8h_ad4b0bf60c918e045e8511e014f64f021}{MSNH\_MSG\_CURSOR}: \{
99             \hyperlink{structmswin__nhmsg__cursor}{PMSNHMsgCursor} msg\_data = (\hyperlink{sys_2wince_2mhmsg_8h_a25f858d2772d0e451b737dc5cbed681a}{PMSNHMsgCursor})lParam;
100             \textcolor{keywordflow}{if}( msg\_data->\hyperlink{structmswin__nhmsg__cursor_a4ecc187448dc2dbd8806212e5f7a4a16}{y}==0 ) \{
101                 InvalidateRect(hWnd, \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE});
102             \}
103         \} \textcolor{keywordflow}{break};
104         \}
105     \} \textcolor{keywordflow}{break};
106 
107     \textcolor{keywordflow}{case} WM\_PAINT: \{
108             HGDIOBJ oldFont;
109             TCHAR wbuf[\hyperlink{sys_2wince_2mhstatus_8c_a7823f335c74115317a5e71c645dae320}{MAXWINDOWTEXT}];
110             COLORREF OldBg, OldFg;
111 
112             hdc = BeginPaint(hWnd, &ps);
113             GetClientRect(hWnd, &rt);
114             
115             oldFont = SelectObject(hdc, \hyperlink{sys_2wince_2mhfont_8c_a480013e685b85460be07910c65a1ef51}{mswin\_get\_font}(\hyperlink{wintype_8h_a8ed5b99ab7f854ace5f67f89aaae5404}{NHW\_STATUS}, 
      \hyperlink{wintype_8h_a20a20b74e8cf84ecfbf3c8665c059636}{ATR\_NONE}, hdc, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}));
116             OldBg = SetBkColor(hdc, \hyperlink{mhcolor_8c_ab1f83ed2725328b54f6d14fc76499f77}{mswin\_get\_color}(\hyperlink{wintype_8h_a8ed5b99ab7f854ace5f67f89aaae5404}{NHW\_STATUS}, 
      \hyperlink{mhcolor_8h_a95a6bcc0be3a6670574883b5814f5b53}{MSWIN\_COLOR\_BG}));
117             OldFg = SetTextColor(hdc, \hyperlink{mhcolor_8c_ab1f83ed2725328b54f6d14fc76499f77}{mswin\_get\_color}(\hyperlink{wintype_8h_a8ed5b99ab7f854ace5f67f89aaae5404}{NHW\_STATUS}, 
      \hyperlink{mhcolor_8h_adebe97ec6aadf867c14e22370fffe9d8}{MSWIN\_COLOR\_FG})); 
118 
119             DrawText(hdc, 
120                      \hyperlink{wceconf_8h_a2ed36c9ee770dfe5f2d0e3088a62adad}{NH\_A2W}(data->\hyperlink{structmswin__nethack__status__window_afc39505634916f0cd93ca59544203033}{window\_text}, wbuf, 
      \hyperlink{sys_2wince_2mhstatus_8c_a7823f335c74115317a5e71c645dae320}{MAXWINDOWTEXT}),
121                      strlen(data->\hyperlink{structmswin__nethack__status__window_afc39505634916f0cd93ca59544203033}{window\_text}), 
122                      &rt, 
123                      DT\_LEFT | DT\_NOPREFIX);
124 
125             SetTextColor (hdc, OldFg);
126             SetBkColor (hdc, OldBg);
127             SelectObject(hdc, oldFont);
128             EndPaint(hWnd, &ps);
129         \} \textcolor{keywordflow}{break};
130 
131     \textcolor{keywordflow}{case} WM\_DESTROY:
132         \hyperlink{winproto_8h_a4bbec68d324de17b99fecede64b383ba}{free}(data);
133         SetWindowLong(hWnd, GWL\_USERDATA, (LONG)0);
134         \textcolor{keywordflow}{break};
135 
136     \textcolor{keywordflow}{case} WM\_SETFOCUS:
137         SetFocus(\hyperlink{sys_2wince_2winhack_8c_ad72c8d80c9fc01eaf07a3c2463ab88bd}{GetNHApp}()->hMainWnd);
138         \textcolor{keywordflow}{break};
139 
140     \textcolor{keywordflow}{default}:
141         \textcolor{keywordflow}{return} DefWindowProc(hWnd, message, wParam, lParam);
142    \}
143    \textcolor{keywordflow}{return} 0;
144 \}
\end{DoxyCode}


\subsection{Variable Documentation}
\hypertarget{sys_2wince_2mhstatus_8c_af6b2dd1e0df263200389ab9e886cf2c6}{\index{sys/wince/mhstatus.\+c@{sys/wince/mhstatus.\+c}!enc\+\_\+stat@{enc\+\_\+stat}}
\index{enc\+\_\+stat@{enc\+\_\+stat}!sys/wince/mhstatus.\+c@{sys/wince/mhstatus.\+c}}
\subsubsection[{enc\+\_\+stat}]{\setlength{\rightskip}{0pt plus 5cm}{\bf const} char$\ast$ enc\+\_\+stat\mbox{[}$\,$\mbox{]}}}\label{sys_2wince_2mhstatus_8c_af6b2dd1e0df263200389ab9e886cf2c6}


Referenced by Format\+Status\+String().

\hypertarget{sys_2wince_2mhstatus_8c_a3af488926df1efa13318d88448c2e7f5}{\index{sys/wince/mhstatus.\+c@{sys/wince/mhstatus.\+c}!hu\+\_\+stat@{hu\+\_\+stat}}
\index{hu\+\_\+stat@{hu\+\_\+stat}!sys/wince/mhstatus.\+c@{sys/wince/mhstatus.\+c}}
\subsubsection[{hu\+\_\+stat}]{\setlength{\rightskip}{0pt plus 5cm}{\bf const} char$\ast$ hu\+\_\+stat\mbox{[}$\,$\mbox{]}}}\label{sys_2wince_2mhstatus_8c_a3af488926df1efa13318d88448c2e7f5}


Referenced by Format\+Status\+String().

\hypertarget{sys_2wince_2mhstatus_8c_a82169a346a8ec1f3a8a134866cd80b48}{\index{sys/wince/mhstatus.\+c@{sys/wince/mhstatus.\+c}!sz\+Status\+Window\+Class@{sz\+Status\+Window\+Class}}
\index{sz\+Status\+Window\+Class@{sz\+Status\+Window\+Class}!sys/wince/mhstatus.\+c@{sys/wince/mhstatus.\+c}}
\subsubsection[{sz\+Status\+Window\+Class}]{\setlength{\rightskip}{0pt plus 5cm}T\+C\+H\+A\+R sz\+Status\+Window\+Class\mbox{[}$\,$\mbox{]} = T\+E\+X\+T(\char`\"{}M\+S\+N\+H\+Status\+Wnd\+Class\char`\"{})\hspace{0.3cm}{\ttfamily [static]}}}\label{sys_2wince_2mhstatus_8c_a82169a346a8ec1f3a8a134866cd80b48}


Definition at line 19 of file mhstatus.\+c.



Referenced by mswin\+\_\+init\+\_\+status\+\_\+window(), and register\+\_\+status\+\_\+window\+\_\+class().

