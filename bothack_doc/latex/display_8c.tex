\hypertarget{display_8c}{\section{nethack/src/display.c File Reference}
\label{display_8c}\index{nethack/src/display.\+c@{nethack/src/display.\+c}}
}
{\ttfamily \#include \char`\"{}hack.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}region.\+h\char`\"{}}\\*
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structtmp__glyph}{tmp\+\_\+glyph}
\item 
struct \hyperlink{structgbuf__entry}{gbuf\+\_\+entry}
\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{display_8c_a890077edc6bf96b569530dca37b730de}{\+\_\+map\+\_\+location}(x, y, show)
\item 
\#define \hyperlink{display_8c_a6a3a39d7ab88e59eb6d2a8b034890075}{D\+E\+T\+E\+C\+T\+E\+D}~2
\item 
\#define \hyperlink{display_8c_a740e7b20ee4f653517c3152d5d689761}{P\+H\+Y\+S\+I\+C\+A\+L\+L\+Y\+\_\+\+S\+E\+E\+N}~1
\item 
\#define \hyperlink{display_8c_ae7e57543d287e1319134a08bf793a281}{is\+\_\+worm\+\_\+tail}(mon)~((mon) \&\& ((x != (mon)-\/$>$mx)  $\vert$$\vert$ (y != (mon)-\/$>$my)))
\item 
\#define \hyperlink{display_8c_af96d71995eda0c4d54b2d1eb2ea278ef}{reset\+\_\+glyph\+\_\+bbox}()
\item 
\#define \hyperlink{display_8c_aabde3c62495d5a79fcbf0a3d8784b7c3}{more\+\_\+than\+\_\+one}(x, y, a, b, c)~(((a) \&\& ((b)$\vert$(c))) $\vert$$\vert$ ((b) \&\& ((a)$\vert$(c))) $\vert$$\vert$ ((c) \&\& ((a)$\vert$(b))))
\item 
\#define \hyperlink{display_8c_ac26db4b03887fbc86becaab3cd49e1cd}{sign}(z)~((z) $<$ 0 ? -\/1 \+: ((z) $>$ 0 ? 1 \+: 0))
\item 
\#define \hyperlink{display_8c_ad4c5276f26296428048f604b9ec92e4e}{T\+\_\+d}~0
\item 
\#define \hyperlink{display_8c_ab567e983bd521e399d7dd5cb16d85f12}{T\+\_\+l}~1
\item 
\#define \hyperlink{display_8c_ae96d188345747de83922279736725499}{T\+\_\+u}~2
\item 
\#define \hyperlink{display_8c_ad5a2597d3f99cc31bb9bf4e0471f3a37}{T\+\_\+r}~3
\item 
\#define \hyperlink{display_8c_a2225d339242f472d2d7049f37315fffa}{T\+\_\+stone}~0
\item 
\#define \hyperlink{display_8c_a4d4a3c0500acd30c5ce7b333d1487b87}{T\+\_\+tlcorn}~1
\item 
\#define \hyperlink{display_8c_a2afacf5bb74d6b695b9a2fd4b4faa81e}{T\+\_\+trcorn}~2
\item 
\#define \hyperlink{display_8c_a04e95e14c0182c8ac328551e32d67e9d}{T\+\_\+hwall}~3
\item 
\#define \hyperlink{display_8c_a6ff4a38dd32a0cca1d71f44965c25f6a}{T\+\_\+tdwall}~4
\item 
\#define \hyperlink{display_8c_a59a9f1a9497ea88377e9fb1678ba0ecd}{C\+\_\+bl}~0
\item 
\#define \hyperlink{display_8c_aa68115ddaef5c0b70a083549f79fc391}{C\+\_\+tl}~1
\item 
\#define \hyperlink{display_8c_a1085c6285991418add10e5b0340d55c3}{C\+\_\+tr}~2
\item 
\#define \hyperlink{display_8c_a77aa1e598e5bd186e12b8c7b767b5783}{C\+\_\+br}~3
\item 
\#define \hyperlink{display_8c_ab3459fe041b29096140bc5f53eaaf0ff}{C\+\_\+trcorn}~0
\item 
\#define \hyperlink{display_8c_ac69f4eabf134059fbb5481f43cd3db25}{C\+\_\+brcorn}~1
\item 
\#define \hyperlink{display_8c_a3caf3f97bceff265f0da467647cd7185}{C\+\_\+blcorn}~2
\item 
\#define \hyperlink{display_8c_a208e2a1b5154719f970da12fda2c9722}{C\+\_\+tlwall}~3
\item 
\#define \hyperlink{display_8c_a820ced2bc4b834d8c05c04891f48579f}{C\+\_\+tuwall}~4
\item 
\#define \hyperlink{display_8c_a77211e230341600a1f3d17d0982d2a11}{C\+\_\+crwall}~5
\item 
\#define \hyperlink{display_8c_a75d2d8101c02fbe9b2ee7742a07a9f19}{only}(sv, bits)~(((sv) \& (bits)) \&\& ! ((sv) \& $\sim$(bits)))
\item 
\#define \hyperlink{display_8c_a4e6544c5de862c6f923bd077e42f571f}{set\+\_\+corner}(idx, lev, which, outer, inner, \hyperlink{lev__main_8c_a8f8f80d37794cde9472343e4487ba3eb}{name})
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{hack_8h_a0c2ce0eef98596c51b3a10e50a29dd5e}{S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} void \hyperlink{display_8c_a2711477ddf07bbcd6a3023a4bf56f78d}{F\+D\+E\+C\+L} (\hyperlink{display_8c_a2b2101c4c3468f56cd02c1e7538b9e55}{display\+\_\+monster},(\hyperlink{wingem1_8c_abea04566e20888dd08f477de5f4b9289}{X\+C\+H\+A\+R\+\_\+\+P}, \hyperlink{wingem1_8c_abea04566e20888dd08f477de5f4b9289}{X\+C\+H\+A\+R\+\_\+\+P}, struct \hyperlink{structmonst}{monst} $\ast$, int, \hyperlink{wingem1_8c_abea04566e20888dd08f477de5f4b9289}{X\+C\+H\+A\+R\+\_\+\+P}))
\item 
\hyperlink{hack_8h_a0c2ce0eef98596c51b3a10e50a29dd5e}{S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} int \hyperlink{display_8c_af9060cb844f89f3d9228ed4ebc0cd11f}{F\+D\+E\+C\+L} (\hyperlink{display_8c_a3d679e1d2180122bb463464b2a1c8af6}{swallow\+\_\+to\+\_\+glyph},(int, int))
\item 
\hyperlink{hack_8h_a0c2ce0eef98596c51b3a10e50a29dd5e}{S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} void \hyperlink{display_8c_ac8f66723d0dacc4086159c5c591c25a3}{F\+D\+E\+C\+L} (\hyperlink{display_8c_a1637cf77d1a360591ebfb5763286fe86}{display\+\_\+warning},(struct \hyperlink{structmonst}{monst} $\ast$))
\item 
\hyperlink{hack_8h_a0c2ce0eef98596c51b3a10e50a29dd5e}{S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} int \hyperlink{display_8c_aee00f6ddd0ce4aaf5102a104d0747a47}{F\+D\+E\+C\+L} (\hyperlink{display_8c_a6c49277033fb8f1150ad4fe3e95c8972}{check\+\_\+pos},(int, int, int))
\item 
\hyperlink{hack_8h_a0c2ce0eef98596c51b3a10e50a29dd5e}{S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} int \hyperlink{display_8c_a56b3d4171e8b18e8e611b43ab9c8a6db}{F\+D\+E\+C\+L} (\hyperlink{display_8c_aa39c3fdf28c99762b13a974a88c2392a}{set\+\_\+twall},(int, int, int, int, int, int, int, int))
\item 
\hyperlink{hack_8h_a0c2ce0eef98596c51b3a10e50a29dd5e}{S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} int \hyperlink{display_8c_a53174c47abe616d1032c9281530d4b92}{F\+D\+E\+C\+L} (\hyperlink{display_8c_a515e27b11b0fb8f59354401580af6a4a}{set\+\_\+wall},(int, int, int))
\item 
\hyperlink{hack_8h_a0c2ce0eef98596c51b3a10e50a29dd5e}{S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} int \hyperlink{display_8c_aacfa7543bd0ac1753ba463cb4ce0da17}{F\+D\+E\+C\+L} (\hyperlink{display_8c_acc3c2e523ed2fd502170c22237800cfe}{set\+\_\+corn},(int, int, int, int, int, int, int, int))
\item 
\hyperlink{hack_8h_a0c2ce0eef98596c51b3a10e50a29dd5e}{S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} int \hyperlink{display_8c_ac3208077aee9b474de05f32786a6907a}{F\+D\+E\+C\+L} (\hyperlink{display_8c_a448907a9e549a025c4c42beee65304bd}{set\+\_\+crosswall},(int, int))
\item 
\hyperlink{hack_8h_a0c2ce0eef98596c51b3a10e50a29dd5e}{S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} void \hyperlink{display_8c_afcd63a7e30e91b8db48ec88d23d3c962}{F\+D\+E\+C\+L} (\hyperlink{display_8c_aed31e6434cf32d4f5a20d9460172456f}{set\+\_\+seenv},(struct \hyperlink{structrm}{rm} $\ast$, int, int, int, int))
\item 
\hyperlink{hack_8h_a0c2ce0eef98596c51b3a10e50a29dd5e}{S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} void \hyperlink{display_8c_a1376bec7274d83aac8503e69200d7136}{F\+D\+E\+C\+L} (\hyperlink{display_8c_a9e332163925dc030909f8463542ca6d5}{t\+\_\+warn},(struct \hyperlink{structrm}{rm} $\ast$))
\item 
\hyperlink{hack_8h_a0c2ce0eef98596c51b3a10e50a29dd5e}{S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} int \hyperlink{display_8c_a88e14464bfd768ac1388faf7159cc35d}{F\+D\+E\+C\+L} (\hyperlink{display_8c_a3157db3be192096a6b81e45ddaa5a9e1}{wall\+\_\+angle},(struct \hyperlink{structrm}{rm} $\ast$))
\item 
void \hyperlink{display_8c_ad4037a0d6b3771e04ffab76d8dc25a65}{magic\+\_\+map\+\_\+background} (\hyperlink{global_8h_a2043b7d01ce89f4ee2fa6c345a752d32}{xchar} x, \hyperlink{global_8h_a2043b7d01ce89f4ee2fa6c345a752d32}{xchar} y, int show)
\item 
void \hyperlink{display_8c_abe2bc3c09d117e9c709ac1c01d73c8fb}{map\+\_\+background} (\hyperlink{global_8h_a2043b7d01ce89f4ee2fa6c345a752d32}{xchar} x, \hyperlink{global_8h_a2043b7d01ce89f4ee2fa6c345a752d32}{xchar} y, int show)
\item 
void \hyperlink{display_8c_ac74653df91c3a6b4f9c35d371bb55e6e}{map\+\_\+trap} (struct \hyperlink{structtrap}{trap} $\ast$\hyperlink{structtrap}{trap}, int show)
\item 
void \hyperlink{display_8c_a5c4fd462bd2806ee7e870039c75022e4}{map\+\_\+object} (struct \hyperlink{structobj}{obj} $\ast$\hyperlink{structobj}{obj}, int show)
\item 
void \hyperlink{display_8c_add21782d0389d23fbc5a470ef91d77e9}{map\+\_\+invisible} (\hyperlink{global_8h_a2043b7d01ce89f4ee2fa6c345a752d32}{xchar} x, \hyperlink{global_8h_a2043b7d01ce89f4ee2fa6c345a752d32}{xchar} y)
\item 
void \hyperlink{display_8c_ae4c63c21336f923f86fa95ca4c8055fb}{unmap\+\_\+object} (int x, int y)
\item 
void \hyperlink{display_8c_a9675dacd157a137b805dd9261524d7a8}{map\+\_\+location} (int x, int y, int show)
\item 
\hyperlink{hack_8h_a6584b0687fb4e0040a85bbcdaa3e0ee1}{S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} void \hyperlink{display_8c_a2b2101c4c3468f56cd02c1e7538b9e55}{display\+\_\+monster} (\hyperlink{global_8h_a2043b7d01ce89f4ee2fa6c345a752d32}{xchar} x, \hyperlink{global_8h_a2043b7d01ce89f4ee2fa6c345a752d32}{xchar} y, struct \hyperlink{structmonst}{monst} $\ast$mon, int sightflags, \hyperlink{global_8h_a2043b7d01ce89f4ee2fa6c345a752d32}{xchar} worm\+\_\+tail)
\item 
\hyperlink{hack_8h_a6584b0687fb4e0040a85bbcdaa3e0ee1}{S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} void \hyperlink{display_8c_a1637cf77d1a360591ebfb5763286fe86}{display\+\_\+warning} (struct \hyperlink{structmonst}{monst} $\ast$mon)
\item 
void \hyperlink{display_8c_aeec8e3135efbd85fa3a197a9f8f61d96}{feel\+\_\+location} (\hyperlink{global_8h_a2043b7d01ce89f4ee2fa6c345a752d32}{xchar} x, \hyperlink{global_8h_a2043b7d01ce89f4ee2fa6c345a752d32}{xchar} y)
\item 
void \hyperlink{display_8c_a185c6ad6e4c5a6be26a371b9aa17c32e}{newsym} (int x, int y)
\item 
void \hyperlink{display_8c_ac89f44ae626d79f05953e503312a939d}{shieldeff} (\hyperlink{global_8h_a2043b7d01ce89f4ee2fa6c345a752d32}{xchar} x, \hyperlink{global_8h_a2043b7d01ce89f4ee2fa6c345a752d32}{xchar} y)
\item 
void \hyperlink{display_8c_a0567746aec3aa9a3e8075d8eabb29846}{tmp\+\_\+at} (int x, int y)
\item 
void \hyperlink{display_8c_a2621d8769ad9f42389e6fa5f21227b82}{swallowed} (int first)
\item 
void \hyperlink{display_8c_a04df1dff0b7b4d1eafd5078265a3d451}{under\+\_\+water} (int mode)
\item 
void \hyperlink{display_8c_af14bb89d2638ab90083214d1f9ed19f4}{under\+\_\+ground} (int mode)
\item 
void \hyperlink{display_8c_aa9a8557e452301a77e67c6b9be801775}{see\+\_\+monsters} ()
\item 
void \hyperlink{display_8c_ad0ef5ff759a8e8fa247560918f852df5}{set\+\_\+mimic\+\_\+blocking} ()
\item 
void \hyperlink{display_8c_a8d668c23c515c669bfcc4dc578a45e71}{see\+\_\+objects} ()
\item 
void \hyperlink{display_8c_a4e16dd8dd8f402993d4fd2bbd9fa9267}{see\+\_\+traps} ()
\item 
void \hyperlink{display_8c_a8edd142a64cff572d19c484164e93755}{curs\+\_\+on\+\_\+u} ()
\item 
int \hyperlink{display_8c_abf432a93fec9c94db8570f8a2c01468e}{doredraw} ()
\item 
void \hyperlink{display_8c_aad46d5a3dee537d403163916114fd463}{docrt} ()
\item 
void \hyperlink{display_8c_a60d3cfb0df75b80c36125ce154da217f}{show\+\_\+glyph} (int x, int y, int glyph)
\item 
void \hyperlink{display_8c_acfbf4ff7302687666cd6720ab3e6e7ee}{clear\+\_\+glyph\+\_\+buffer} ()
\item 
void \hyperlink{display_8c_a8c3db71d219231c8e0f601bc0892a1fd}{row\+\_\+refresh} (int start, int stop, int y)
\item 
void \hyperlink{display_8c_a4826277cc150ddc0f4de4bd464a34909}{cls} ()
\item 
void \hyperlink{display_8c_a47cdbc8092c02ed856defd22a0952aeb}{flush\+\_\+screen} (int cursor\+\_\+on\+\_\+u)
\item 
int \hyperlink{display_8c_ae101ca833f1201ac08aee7ce16961449}{back\+\_\+to\+\_\+glyph} (\hyperlink{global_8h_a2043b7d01ce89f4ee2fa6c345a752d32}{xchar} x, \hyperlink{global_8h_a2043b7d01ce89f4ee2fa6c345a752d32}{xchar} y)
\item 
\hyperlink{hack_8h_a6584b0687fb4e0040a85bbcdaa3e0ee1}{S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} int \hyperlink{display_8c_a3d679e1d2180122bb463464b2a1c8af6}{swallow\+\_\+to\+\_\+glyph} (int mnum, int loc)
\item 
int \hyperlink{display_8c_af9ba4b8a8fda1ce47afbd972ad4af1f1}{zapdir\+\_\+to\+\_\+glyph} (int dx, int dy, int beam\+\_\+type)
\item 
int \hyperlink{display_8c_ad3c1a65cc5e35e90067cb04eaf397d8a}{glyph\+\_\+at} (\hyperlink{global_8h_a2043b7d01ce89f4ee2fa6c345a752d32}{xchar} x, \hyperlink{global_8h_a2043b7d01ce89f4ee2fa6c345a752d32}{xchar} y)
\item 
\hyperlink{hack_8h_a6584b0687fb4e0040a85bbcdaa3e0ee1}{S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} int \hyperlink{display_8c_a6c49277033fb8f1150ad4fe3e95c8972}{check\+\_\+pos} (int x, int y, int which)
\item 
\hyperlink{hack_8h_a6584b0687fb4e0040a85bbcdaa3e0ee1}{S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} int \hyperlink{display_8c_aa39c3fdf28c99762b13a974a88c2392a}{set\+\_\+twall} (int x0, int y0, int x1, int y1, int x2, int y2, int x3, int y3)
\item 
\hyperlink{hack_8h_a6584b0687fb4e0040a85bbcdaa3e0ee1}{S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} int \hyperlink{display_8c_a515e27b11b0fb8f59354401580af6a4a}{set\+\_\+wall} (int x, int y, int horiz)
\item 
\hyperlink{hack_8h_a6584b0687fb4e0040a85bbcdaa3e0ee1}{S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} int \hyperlink{display_8c_acc3c2e523ed2fd502170c22237800cfe}{set\+\_\+corn} (int x1, int y1, int x2, int y2, int x3, int y3, int x4, int y4)
\item 
\hyperlink{hack_8h_a6584b0687fb4e0040a85bbcdaa3e0ee1}{S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} int \hyperlink{display_8c_a448907a9e549a025c4c42beee65304bd}{set\+\_\+crosswall} (int x, int y)
\item 
void \hyperlink{display_8c_afd30b2beecc42ef4aef70835b2bb2f9b}{set\+\_\+wall\+\_\+state} ()
\item 
\hyperlink{hack_8h_a6584b0687fb4e0040a85bbcdaa3e0ee1}{S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} void \hyperlink{display_8c_aed31e6434cf32d4f5a20d9460172456f}{set\+\_\+seenv} (struct \hyperlink{structrm}{rm} $\ast$lev, int x0, int y0, int x, int y)
\item 
\hyperlink{hack_8h_a6584b0687fb4e0040a85bbcdaa3e0ee1}{S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} void \hyperlink{display_8c_a9e332163925dc030909f8463542ca6d5}{t\+\_\+warn} (struct \hyperlink{structrm}{rm} $\ast$lev)
\item 
\hyperlink{hack_8h_a6584b0687fb4e0040a85bbcdaa3e0ee1}{S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} int \hyperlink{display_8c_a3157db3be192096a6b81e45ddaa5a9e1}{wall\+\_\+angle} (struct \hyperlink{structrm}{rm} $\ast$lev)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static struct \hyperlink{structtmp__glyph}{tmp\+\_\+glyph} \hyperlink{display_8c_a495cf1fe6b86816cf07c64be2ad9d42c}{tgfirst}
\item 
static \hyperlink{structgbuf__entry}{gbuf\+\_\+entry} \hyperlink{display_8c_af05984f18ee6d5c6573afb061376c52c}{gbuf} \mbox{[}\hyperlink{gnmap_8c_a9cce134868d97b23c35bcf1ff4a343d8}{R\+O\+W\+N\+O}\mbox{]}\mbox{[}\hyperlink{gnmap_8c_a308dbfcc29f5a427c0315f3cbf03c3ed}{C\+O\+L\+N\+O}\mbox{]}
\item 
static char \hyperlink{display_8c_add164e66f147d7fd33fd941e4f445437}{gbuf\+\_\+start} \mbox{[}\hyperlink{gnmap_8c_a9cce134868d97b23c35bcf1ff4a343d8}{R\+O\+W\+N\+O}\mbox{]}
\item 
static char \hyperlink{display_8c_a456a879e037f6746dea8b5f7cad4b13d}{gbuf\+\_\+stop} \mbox{[}\hyperlink{gnmap_8c_a9cce134868d97b23c35bcf1ff4a343d8}{R\+O\+W\+N\+O}\mbox{]}
\item 
static \hyperlink{structgbuf__entry}{gbuf\+\_\+entry} \hyperlink{display_8c_abbaadd403de1a239b8289b085e1f9565}{nul\+\_\+gbuf} = \{ 0, \hyperlink{display_8h_a77e69d3b11c3296576f840c9d11ae8fb}{cmap\+\_\+to\+\_\+glyph}(\hyperlink{rm_8h_a342b42eb0fe3236adbc700b6e725d781}{S\+\_\+stone}) \}
\item 
unsigned char \hyperlink{display_8c_ab305833b5e361287ef704c02565aad89}{seenv\+\_\+matrix} \mbox{[}3\mbox{]}\mbox{[}3\mbox{]}
\item 
static \hyperlink{tradstdc_8h_a2c212835823e3c54a8ab6d95c652660e}{const} int \hyperlink{display_8c_a98d2bf40d5c38b479c230af0fac15cb4}{wall\+\_\+matrix} \mbox{[}4\mbox{]}\mbox{[}5\mbox{]}
\item 
static \hyperlink{tradstdc_8h_a2c212835823e3c54a8ab6d95c652660e}{const} int \hyperlink{display_8c_a24949d3786eea6028cf5c2858a6eaa8a}{cross\+\_\+matrix} \mbox{[}4\mbox{]}\mbox{[}6\mbox{]}
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\hypertarget{display_8c_a890077edc6bf96b569530dca37b730de}{\index{display.\+c@{display.\+c}!\+\_\+map\+\_\+location@{\+\_\+map\+\_\+location}}
\index{\+\_\+map\+\_\+location@{\+\_\+map\+\_\+location}!display.\+c@{display.\+c}}
\subsubsection[{\+\_\+map\+\_\+location}]{\setlength{\rightskip}{0pt plus 5cm}\#define \+\_\+map\+\_\+location(
\begin{DoxyParamCaption}
\item[{}]{x, }
\item[{}]{y, }
\item[{}]{show}
\end{DoxyParamCaption}
)}}\label{display_8c_a890077edc6bf96b569530dca37b730de}
{\bfseries Value\+:}
\begin{DoxyCode}
\{                                   \hyperlink{mkmaze_8c_a24ac627a7839caecddfc66f1d46033f0}{\(\backslash\)}
\hyperlink{mkmaze_8c_a24ac627a7839caecddfc66f1d46033f0}{    register} \textcolor{keyword}{struct }\hyperlink{structobj}{obj}   *\hyperlink{structobj}{obj};                       \hyperlink{mkmaze_8c_a24ac627a7839caecddfc66f1d46033f0}{\(\backslash\)}
\hyperlink{mkmaze_8c_a24ac627a7839caecddfc66f1d46033f0}{    register} \textcolor{keyword}{struct }\hyperlink{structtrap}{trap}  *\hyperlink{structtrap}{trap};                    \(\backslash\)
                                    \(\backslash\)
    if ((obj = \hyperlink{display_8h_acb0b91fd762d501452bc8436c5160ecc}{vobj\_at}(\hyperlink{structtrap_aed25254cf556e3eae09dd98576d98d45}{x},\hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y})) && !\hyperlink{display_8h_a7d08146240a091927e86396207b9f3dd}{covers\_objects}(\hyperlink{structtrap_aed25254cf556e3eae09dd98576d98d45}{x},\hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y}))          
      \hyperlink{display_8c_a5c4fd462bd2806ee7e870039c75022e4}{\(\backslash\)}
\hyperlink{display_8c_a5c4fd462bd2806ee7e870039c75022e4}{    map\_object}(obj,show);                        \(\backslash\)
    else \textcolor{keywordflow}{if} ((trap = t\_at(\hyperlink{structtrap_aed25254cf556e3eae09dd98576d98d45}{x},\hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y})) && trap->tseen && !\hyperlink{display_8h_a2d2c214a096fc0768048597220e79339}{covers\_traps}(\hyperlink{structtrap_aed25254cf556e3eae09dd98576d98d45}{x},
      \hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y}))    \hyperlink{display_8c_ac74653df91c3a6b4f9c35d371bb55e6e}{\(\backslash\)}
\hyperlink{display_8c_ac74653df91c3a6b4f9c35d371bb55e6e}{    map\_trap}(trap,show);                       \hyperlink{display_8c_abe2bc3c09d117e9c709ac1c01d73c8fb}{\(\backslash\)}
\hyperlink{display_8c_abe2bc3c09d117e9c709ac1c01d73c8fb}{    else                                \(\backslash\)}
\hyperlink{display_8c_abe2bc3c09d117e9c709ac1c01d73c8fb}{    map\_background}(\hyperlink{structtrap_aed25254cf556e3eae09dd98576d98d45}{x},\hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y},show);                  \(\backslash\)
\}
\end{DoxyCode}


Definition at line 323 of file display.\+c.



Referenced by feel\+\_\+location(), map\+\_\+location(), and newsym().

\hypertarget{display_8c_a59a9f1a9497ea88377e9fb1678ba0ecd}{\index{display.\+c@{display.\+c}!C\+\_\+bl@{C\+\_\+bl}}
\index{C\+\_\+bl@{C\+\_\+bl}!display.\+c@{display.\+c}}
\subsubsection[{C\+\_\+bl}]{\setlength{\rightskip}{0pt plus 5cm}\#define C\+\_\+bl~0}}\label{display_8c_a59a9f1a9497ea88377e9fb1678ba0ecd}


Definition at line 1845 of file display.\+c.



Referenced by wall\+\_\+angle().

\hypertarget{display_8c_a3caf3f97bceff265f0da467647cd7185}{\index{display.\+c@{display.\+c}!C\+\_\+blcorn@{C\+\_\+blcorn}}
\index{C\+\_\+blcorn@{C\+\_\+blcorn}!display.\+c@{display.\+c}}
\subsubsection[{C\+\_\+blcorn}]{\setlength{\rightskip}{0pt plus 5cm}\#define C\+\_\+blcorn~2}}\label{display_8c_a3caf3f97bceff265f0da467647cd7185}


Definition at line 1859 of file display.\+c.



Referenced by wall\+\_\+angle().

\hypertarget{display_8c_a77aa1e598e5bd186e12b8c7b767b5783}{\index{display.\+c@{display.\+c}!C\+\_\+br@{C\+\_\+br}}
\index{C\+\_\+br@{C\+\_\+br}!display.\+c@{display.\+c}}
\subsubsection[{C\+\_\+br}]{\setlength{\rightskip}{0pt plus 5cm}\#define C\+\_\+br~3}}\label{display_8c_a77aa1e598e5bd186e12b8c7b767b5783}


Definition at line 1848 of file display.\+c.



Referenced by wall\+\_\+angle().

\hypertarget{display_8c_ac69f4eabf134059fbb5481f43cd3db25}{\index{display.\+c@{display.\+c}!C\+\_\+brcorn@{C\+\_\+brcorn}}
\index{C\+\_\+brcorn@{C\+\_\+brcorn}!display.\+c@{display.\+c}}
\subsubsection[{C\+\_\+brcorn}]{\setlength{\rightskip}{0pt plus 5cm}\#define C\+\_\+brcorn~1}}\label{display_8c_ac69f4eabf134059fbb5481f43cd3db25}


Definition at line 1858 of file display.\+c.



Referenced by wall\+\_\+angle().

\hypertarget{display_8c_a77211e230341600a1f3d17d0982d2a11}{\index{display.\+c@{display.\+c}!C\+\_\+crwall@{C\+\_\+crwall}}
\index{C\+\_\+crwall@{C\+\_\+crwall}!display.\+c@{display.\+c}}
\subsubsection[{C\+\_\+crwall}]{\setlength{\rightskip}{0pt plus 5cm}\#define C\+\_\+crwall~5}}\label{display_8c_a77211e230341600a1f3d17d0982d2a11}


Definition at line 1862 of file display.\+c.



Referenced by wall\+\_\+angle().

\hypertarget{display_8c_aa68115ddaef5c0b70a083549f79fc391}{\index{display.\+c@{display.\+c}!C\+\_\+tl@{C\+\_\+tl}}
\index{C\+\_\+tl@{C\+\_\+tl}!display.\+c@{display.\+c}}
\subsubsection[{C\+\_\+tl}]{\setlength{\rightskip}{0pt plus 5cm}\#define C\+\_\+tl~1}}\label{display_8c_aa68115ddaef5c0b70a083549f79fc391}


Definition at line 1846 of file display.\+c.



Referenced by wall\+\_\+angle().

\hypertarget{display_8c_a208e2a1b5154719f970da12fda2c9722}{\index{display.\+c@{display.\+c}!C\+\_\+tlwall@{C\+\_\+tlwall}}
\index{C\+\_\+tlwall@{C\+\_\+tlwall}!display.\+c@{display.\+c}}
\subsubsection[{C\+\_\+tlwall}]{\setlength{\rightskip}{0pt plus 5cm}\#define C\+\_\+tlwall~3}}\label{display_8c_a208e2a1b5154719f970da12fda2c9722}


Definition at line 1860 of file display.\+c.



Referenced by wall\+\_\+angle().

\hypertarget{display_8c_a1085c6285991418add10e5b0340d55c3}{\index{display.\+c@{display.\+c}!C\+\_\+tr@{C\+\_\+tr}}
\index{C\+\_\+tr@{C\+\_\+tr}!display.\+c@{display.\+c}}
\subsubsection[{C\+\_\+tr}]{\setlength{\rightskip}{0pt plus 5cm}\#define C\+\_\+tr~2}}\label{display_8c_a1085c6285991418add10e5b0340d55c3}


Definition at line 1847 of file display.\+c.



Referenced by wall\+\_\+angle().

\hypertarget{display_8c_ab3459fe041b29096140bc5f53eaaf0ff}{\index{display.\+c@{display.\+c}!C\+\_\+trcorn@{C\+\_\+trcorn}}
\index{C\+\_\+trcorn@{C\+\_\+trcorn}!display.\+c@{display.\+c}}
\subsubsection[{C\+\_\+trcorn}]{\setlength{\rightskip}{0pt plus 5cm}\#define C\+\_\+trcorn~0}}\label{display_8c_ab3459fe041b29096140bc5f53eaaf0ff}


Definition at line 1857 of file display.\+c.



Referenced by wall\+\_\+angle().

\hypertarget{display_8c_a820ced2bc4b834d8c05c04891f48579f}{\index{display.\+c@{display.\+c}!C\+\_\+tuwall@{C\+\_\+tuwall}}
\index{C\+\_\+tuwall@{C\+\_\+tuwall}!display.\+c@{display.\+c}}
\subsubsection[{C\+\_\+tuwall}]{\setlength{\rightskip}{0pt plus 5cm}\#define C\+\_\+tuwall~4}}\label{display_8c_a820ced2bc4b834d8c05c04891f48579f}


Definition at line 1861 of file display.\+c.



Referenced by wall\+\_\+angle().

\hypertarget{display_8c_a6a3a39d7ab88e59eb6d2a8b034890075}{\index{display.\+c@{display.\+c}!D\+E\+T\+E\+C\+T\+E\+D@{D\+E\+T\+E\+C\+T\+E\+D}}
\index{D\+E\+T\+E\+C\+T\+E\+D@{D\+E\+T\+E\+C\+T\+E\+D}!display.\+c@{display.\+c}}
\subsubsection[{D\+E\+T\+E\+C\+T\+E\+D}]{\setlength{\rightskip}{0pt plus 5cm}\#define D\+E\+T\+E\+C\+T\+E\+D~2}}\label{display_8c_a6a3a39d7ab88e59eb6d2a8b034890075}


Definition at line 343 of file display.\+c.



Referenced by display\+\_\+monster(), feel\+\_\+location(), and newsym().

\hypertarget{display_8c_ae7e57543d287e1319134a08bf793a281}{\index{display.\+c@{display.\+c}!is\+\_\+worm\+\_\+tail@{is\+\_\+worm\+\_\+tail}}
\index{is\+\_\+worm\+\_\+tail@{is\+\_\+worm\+\_\+tail}!display.\+c@{display.\+c}}
\subsubsection[{is\+\_\+worm\+\_\+tail}]{\setlength{\rightskip}{0pt plus 5cm}\#define is\+\_\+worm\+\_\+tail(
\begin{DoxyParamCaption}
\item[{}]{mon}
\end{DoxyParamCaption}
)~((mon) \&\& ((x != (mon)-\/$>$mx)  $\vert$$\vert$ (y != (mon)-\/$>$my)))}}\label{display_8c_ae7e57543d287e1319134a08bf793a281}


Definition at line 345 of file display.\+c.



Referenced by feel\+\_\+location(), and newsym().

\hypertarget{display_8c_aabde3c62495d5a79fcbf0a3d8784b7c3}{\index{display.\+c@{display.\+c}!more\+\_\+than\+\_\+one@{more\+\_\+than\+\_\+one}}
\index{more\+\_\+than\+\_\+one@{more\+\_\+than\+\_\+one}!display.\+c@{display.\+c}}
\subsubsection[{more\+\_\+than\+\_\+one}]{\setlength{\rightskip}{0pt plus 5cm}\#define more\+\_\+than\+\_\+one(
\begin{DoxyParamCaption}
\item[{}]{x, }
\item[{}]{y, }
\item[{}]{a, }
\item[{}]{b, }
\item[{}]{c}
\end{DoxyParamCaption}
)~(((a) \&\& ((b)$\vert$(c))) $\vert$$\vert$ ((b) \&\& ((a)$\vert$(c))) $\vert$$\vert$ ((c) \&\& ((a)$\vert$(b))))}}\label{display_8c_aabde3c62495d5a79fcbf0a3d8784b7c3}


Definition at line 1614 of file display.\+c.



Referenced by do\+\_\+makedefs(), set\+\_\+twall(), and set\+\_\+wall().

\hypertarget{display_8c_a75d2d8101c02fbe9b2ee7742a07a9f19}{\index{display.\+c@{display.\+c}!only@{only}}
\index{only@{only}!display.\+c@{display.\+c}}
\subsubsection[{only}]{\setlength{\rightskip}{0pt plus 5cm}\#define only(
\begin{DoxyParamCaption}
\item[{}]{sv, }
\item[{}]{bits}
\end{DoxyParamCaption}
)~(((sv) \& (bits)) \&\& ! ((sv) \& $\sim$(bits)))}}\label{display_8c_a75d2d8101c02fbe9b2ee7742a07a9f19}


Referenced by wall\+\_\+angle().

\hypertarget{display_8c_a740e7b20ee4f653517c3152d5d689761}{\index{display.\+c@{display.\+c}!P\+H\+Y\+S\+I\+C\+A\+L\+L\+Y\+\_\+\+S\+E\+E\+N@{P\+H\+Y\+S\+I\+C\+A\+L\+L\+Y\+\_\+\+S\+E\+E\+N}}
\index{P\+H\+Y\+S\+I\+C\+A\+L\+L\+Y\+\_\+\+S\+E\+E\+N@{P\+H\+Y\+S\+I\+C\+A\+L\+L\+Y\+\_\+\+S\+E\+E\+N}!display.\+c@{display.\+c}}
\subsubsection[{P\+H\+Y\+S\+I\+C\+A\+L\+L\+Y\+\_\+\+S\+E\+E\+N}]{\setlength{\rightskip}{0pt plus 5cm}\#define P\+H\+Y\+S\+I\+C\+A\+L\+L\+Y\+\_\+\+S\+E\+E\+N~1}}\label{display_8c_a740e7b20ee4f653517c3152d5d689761}


Definition at line 344 of file display.\+c.



Referenced by display\+\_\+monster(), feel\+\_\+location(), and newsym().

\hypertarget{display_8c_af96d71995eda0c4d54b2d1eb2ea278ef}{\index{display.\+c@{display.\+c}!reset\+\_\+glyph\+\_\+bbox@{reset\+\_\+glyph\+\_\+bbox}}
\index{reset\+\_\+glyph\+\_\+bbox@{reset\+\_\+glyph\+\_\+bbox}!display.\+c@{display.\+c}}
\subsubsection[{reset\+\_\+glyph\+\_\+bbox}]{\setlength{\rightskip}{0pt plus 5cm}\#define reset\+\_\+glyph\+\_\+bbox(
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{display_8c_af96d71995eda0c4d54b2d1eb2ea278ef}
{\bfseries Value\+:}
\begin{DoxyCode}
\{                       \(\backslash\)
    int i;                  \(\backslash\)
                        \(\backslash\)
    for (i = 0; i < \hyperlink{global_8h_a9cce134868d97b23c35bcf1ff4a343d8}{ROWNO}; i++) \{      \hyperlink{display_8c_add164e66f147d7fd33fd941e4f445437}{\(\backslash\)}
\hyperlink{display_8c_add164e66f147d7fd33fd941e4f445437}{        gbuf\_start}[i] = \hyperlink{global_8h_a308dbfcc29f5a427c0315f3cbf03c3ed}{COLNO}-1;        \hyperlink{display_8c_a456a879e037f6746dea8b5f7cad4b13d}{\(\backslash\)}
\hyperlink{display_8c_a456a879e037f6746dea8b5f7cad4b13d}{        gbuf\_stop}[i]  = 0;            \(\backslash\)
    \}                   \(\backslash\)
    \}
\end{DoxyCode}


Definition at line 1282 of file display.\+c.



Referenced by clear\+\_\+glyph\+\_\+buffer(), and flush\+\_\+screen().

\hypertarget{display_8c_a4e6544c5de862c6f923bd077e42f571f}{\index{display.\+c@{display.\+c}!set\+\_\+corner@{set\+\_\+corner}}
\index{set\+\_\+corner@{set\+\_\+corner}!display.\+c@{display.\+c}}
\subsubsection[{set\+\_\+corner}]{\setlength{\rightskip}{0pt plus 5cm}\#define set\+\_\+corner(
\begin{DoxyParamCaption}
\item[{}]{idx, }
\item[{}]{lev, }
\item[{}]{which, }
\item[{}]{outer, }
\item[{}]{inner, }
\item[{}]{{\bf name}}
\end{DoxyParamCaption}
)}}\label{display_8c_a4e6544c5de862c6f923bd077e42f571f}
{\bfseries Value\+:}
\begin{DoxyCode}
\textcolor{keywordflow}{switch} ((lev)->\hyperlink{rm_8h_aab0cf35169aac941374078adc2ded190}{wall\_info} & \hyperlink{rm_8h_aa8daf0cc89d46c79b0af7a430c725d25}{WM\_MASK}) \{                   \(\backslash\)
    case 0:      idx = which; \textcolor{keywordflow}{break};                    \(\backslash\)
    case \hyperlink{rm_8h_afddfddf3b732caa82e920e68f19ca68f}{WM\_C\_OUTER}: idx = seenv &  (outer) ? which : \hyperlink{rm_8h_a342b42eb0fe3236adbc700b6e725d781}{S\_stone}; \textcolor{keywordflow}{break};   \(\backslash\)
    case \hyperlink{rm_8h_aa6fe640cec90227c8c5f8d2166f55e80}{WM\_C\_INNER}: idx = seenv & ~(inner) ? which : \hyperlink{rm_8h_a342b42eb0fe3236adbc700b6e725d781}{S\_stone}; \textcolor{keywordflow}{break};   \(\backslash\)
    default:                                \(\backslash\)
        impossible(\textcolor{stringliteral}{"wall\_angle: unknown %s mode %d"}, \hyperlink{lev__main_8c_a8f8f80d37794cde9472343e4487ba3eb}{name},          \(\backslash\)
        (lev)->\hyperlink{rm_8h_aab0cf35169aac941374078adc2ded190}{wall\_info} & WM\_MASK);                   \(\backslash\)
        idx = \hyperlink{rm_8h_a342b42eb0fe3236adbc700b6e725d781}{S\_stone};                           \(\backslash\)
        break;                              \(\backslash\)
    \}
\end{DoxyCode}


Referenced by wall\+\_\+angle().

\hypertarget{display_8c_ac26db4b03887fbc86becaab3cd49e1cd}{\index{display.\+c@{display.\+c}!sign@{sign}}
\index{sign@{sign}!display.\+c@{display.\+c}}
\subsubsection[{sign}]{\setlength{\rightskip}{0pt plus 5cm}\#define sign(
\begin{DoxyParamCaption}
\item[{}]{z}
\end{DoxyParamCaption}
)~((z) $<$ 0 ? -\/1 \+: ((z) $>$ 0 ? 1 \+: 0))}}\label{display_8c_ac26db4b03887fbc86becaab3cd49e1cd}


Definition at line 1803 of file display.\+c.



Referenced by set\+\_\+seenv().

\hypertarget{display_8c_ad4c5276f26296428048f604b9ec92e4e}{\index{display.\+c@{display.\+c}!T\+\_\+d@{T\+\_\+d}}
\index{T\+\_\+d@{T\+\_\+d}!display.\+c@{display.\+c}}
\subsubsection[{T\+\_\+d}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+\_\+d~0}}\label{display_8c_ad4c5276f26296428048f604b9ec92e4e}


Definition at line 1818 of file display.\+c.



Referenced by wall\+\_\+angle().

\hypertarget{display_8c_a04e95e14c0182c8ac328551e32d67e9d}{\index{display.\+c@{display.\+c}!T\+\_\+hwall@{T\+\_\+hwall}}
\index{T\+\_\+hwall@{T\+\_\+hwall}!display.\+c@{display.\+c}}
\subsubsection[{T\+\_\+hwall}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+\_\+hwall~3}}\label{display_8c_a04e95e14c0182c8ac328551e32d67e9d}


Definition at line 1833 of file display.\+c.



Referenced by wall\+\_\+angle().

\hypertarget{display_8c_ab567e983bd521e399d7dd5cb16d85f12}{\index{display.\+c@{display.\+c}!T\+\_\+l@{T\+\_\+l}}
\index{T\+\_\+l@{T\+\_\+l}!display.\+c@{display.\+c}}
\subsubsection[{T\+\_\+l}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+\_\+l~1}}\label{display_8c_ab567e983bd521e399d7dd5cb16d85f12}


Definition at line 1819 of file display.\+c.



Referenced by wall\+\_\+angle().

\hypertarget{display_8c_ad5a2597d3f99cc31bb9bf4e0471f3a37}{\index{display.\+c@{display.\+c}!T\+\_\+r@{T\+\_\+r}}
\index{T\+\_\+r@{T\+\_\+r}!display.\+c@{display.\+c}}
\subsubsection[{T\+\_\+r}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+\_\+r~3}}\label{display_8c_ad5a2597d3f99cc31bb9bf4e0471f3a37}


Definition at line 1821 of file display.\+c.



Referenced by wall\+\_\+angle().

\hypertarget{display_8c_a2225d339242f472d2d7049f37315fffa}{\index{display.\+c@{display.\+c}!T\+\_\+stone@{T\+\_\+stone}}
\index{T\+\_\+stone@{T\+\_\+stone}!display.\+c@{display.\+c}}
\subsubsection[{T\+\_\+stone}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+\_\+stone~0}}\label{display_8c_a2225d339242f472d2d7049f37315fffa}


Definition at line 1830 of file display.\+c.



Referenced by wall\+\_\+angle().

\hypertarget{display_8c_a6ff4a38dd32a0cca1d71f44965c25f6a}{\index{display.\+c@{display.\+c}!T\+\_\+tdwall@{T\+\_\+tdwall}}
\index{T\+\_\+tdwall@{T\+\_\+tdwall}!display.\+c@{display.\+c}}
\subsubsection[{T\+\_\+tdwall}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+\_\+tdwall~4}}\label{display_8c_a6ff4a38dd32a0cca1d71f44965c25f6a}


Definition at line 1834 of file display.\+c.



Referenced by wall\+\_\+angle().

\hypertarget{display_8c_a4d4a3c0500acd30c5ce7b333d1487b87}{\index{display.\+c@{display.\+c}!T\+\_\+tlcorn@{T\+\_\+tlcorn}}
\index{T\+\_\+tlcorn@{T\+\_\+tlcorn}!display.\+c@{display.\+c}}
\subsubsection[{T\+\_\+tlcorn}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+\_\+tlcorn~1}}\label{display_8c_a4d4a3c0500acd30c5ce7b333d1487b87}


Definition at line 1831 of file display.\+c.



Referenced by wall\+\_\+angle().

\hypertarget{display_8c_a2afacf5bb74d6b695b9a2fd4b4faa81e}{\index{display.\+c@{display.\+c}!T\+\_\+trcorn@{T\+\_\+trcorn}}
\index{T\+\_\+trcorn@{T\+\_\+trcorn}!display.\+c@{display.\+c}}
\subsubsection[{T\+\_\+trcorn}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+\_\+trcorn~2}}\label{display_8c_a2afacf5bb74d6b695b9a2fd4b4faa81e}


Definition at line 1832 of file display.\+c.



Referenced by wall\+\_\+angle().

\hypertarget{display_8c_ae96d188345747de83922279736725499}{\index{display.\+c@{display.\+c}!T\+\_\+u@{T\+\_\+u}}
\index{T\+\_\+u@{T\+\_\+u}!display.\+c@{display.\+c}}
\subsubsection[{T\+\_\+u}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+\_\+u~2}}\label{display_8c_ae96d188345747de83922279736725499}


Definition at line 1820 of file display.\+c.



Referenced by wall\+\_\+angle().



\subsection{Function Documentation}
\hypertarget{display_8c_ae101ca833f1201ac08aee7ce16961449}{\index{display.\+c@{display.\+c}!back\+\_\+to\+\_\+glyph@{back\+\_\+to\+\_\+glyph}}
\index{back\+\_\+to\+\_\+glyph@{back\+\_\+to\+\_\+glyph}!display.\+c@{display.\+c}}
\subsubsection[{back\+\_\+to\+\_\+glyph}]{\setlength{\rightskip}{0pt plus 5cm}int back\+\_\+to\+\_\+glyph (
\begin{DoxyParamCaption}
\item[{{\bf xchar}}]{x, }
\item[{{\bf xchar}}]{y}
\end{DoxyParamCaption}
)}}\label{display_8c_ae101ca833f1201ac08aee7ce16961449}


Definition at line 1389 of file display.\+c.



References A\+I\+R, A\+L\+T\+A\+R, B\+L\+C\+O\+R\+N\+E\+R, B\+R\+C\+O\+R\+N\+E\+R, C\+L\+O\+U\+D, cmap\+\_\+to\+\_\+glyph, C\+O\+R\+R, C\+R\+O\+S\+S\+W\+A\+L\+L, D\+\_\+\+B\+R\+O\+K\+E\+N, D\+\_\+\+I\+S\+O\+P\+E\+N, D\+B\+\_\+\+F\+L\+O\+O\+R, D\+B\+\_\+\+I\+C\+E, D\+B\+\_\+\+L\+A\+V\+A, D\+B\+\_\+\+M\+O\+A\+T, D\+B\+\_\+\+U\+N\+D\+E\+R, D\+B\+W\+A\+L\+L, D\+O\+O\+R, D\+R\+A\+W\+B\+R\+I\+D\+G\+E\+\_\+\+D\+O\+W\+N, D\+R\+A\+W\+B\+R\+I\+D\+G\+E\+\_\+\+U\+P, flags, dlevel\+\_\+t\+::flags, F\+O\+U\+N\+T\+A\+I\+N, G\+R\+A\+V\+E, H\+W\+A\+L\+L, I\+C\+E, I\+R\+O\+N\+B\+A\+R\+S, L\+A\+\_\+\+D\+O\+W\+N, L\+A\+D\+D\+E\+R, L\+A\+V\+A\+P\+O\+O\+L, level, levl, flag\+::lit\+\_\+corridor, M\+O\+A\+T, P\+O\+O\+L, R\+O\+O\+M, S\+\_\+air, S\+\_\+altar, S\+\_\+bars, S\+\_\+cloud, S\+\_\+corr, S\+\_\+dnladder, S\+\_\+dnstair, S\+\_\+fountain, S\+\_\+grave, S\+\_\+hcdbridge, S\+\_\+hcdoor, S\+\_\+hodbridge, S\+\_\+hodoor, S\+\_\+ice, S\+\_\+lava, S\+\_\+litcorr, S\+\_\+ndoor, S\+\_\+pool, S\+\_\+room, S\+\_\+sink, S\+\_\+stone, S\+\_\+throne, S\+\_\+tree, S\+\_\+upladder, S\+\_\+upstair, S\+\_\+vcdbridge, S\+\_\+vcdoor, S\+\_\+vodbridge, S\+\_\+vodoor, S\+\_\+water, S\+C\+O\+R\+R, S\+D\+O\+O\+R, rm\+::seenv, S\+I\+N\+K, S\+T\+A\+I\+R\+S, S\+T\+O\+N\+E, T\+D\+W\+A\+L\+L, T\+H\+R\+O\+N\+E, T\+L\+C\+O\+R\+N\+E\+R, T\+L\+W\+A\+L\+L, T\+R\+C\+O\+R\+N\+E\+R, T\+R\+E\+E, T\+R\+W\+A\+L\+L, T\+U\+W\+A\+L\+L, rm\+::typ, V\+W\+A\+L\+L, wall\+\_\+angle(), and W\+A\+T\+E\+R.



Referenced by magic\+\_\+map\+\_\+background(), and map\+\_\+background().


\begin{DoxyCode}
1391 \{
1392     \textcolor{keywordtype}{int} idx;
1393     \textcolor{keyword}{struct }\hyperlink{structrm}{rm} *ptr = &(\hyperlink{rm_8h_a8cd681fba60fdedbabfd71a0b4bbfc00}{levl}[x][y]);
1394 
1395     \textcolor{keywordflow}{switch} (ptr->\hyperlink{structrm_aa144ade377ba175f037c4e637329d4dc}{typ}) \{
1396     \textcolor{keywordflow}{case} \hyperlink{rm_8h_a35e6fdb78f87c982df30c7e9580ad95d}{SCORR}:
1397     \textcolor{keywordflow}{case} \hyperlink{rm_8h_a3a50d6c3dd0fbb5b801d6efe0279d267}{STONE}:
1398         idx = \hyperlink{rm_8h_a721c99bfa099c4225215ba102e91fa39}{level}.\hyperlink{structdlevel__t_ad52c01d015e2456cdae3300848115916}{flags}.arboreal ? \hyperlink{rm_8h_a285b35dc694fea024dffe5a5799fd8ff}{S\_tree} : \hyperlink{rm_8h_a342b42eb0fe3236adbc700b6e725d781}{S\_stone};
1399         \textcolor{keywordflow}{break};
1400     \textcolor{keywordflow}{case} \hyperlink{rm_8h_ae635489e987ae17a3bf884376cc2fe34}{ROOM}:      idx = \hyperlink{rm_8h_a1cbe62db5502d1ece3d5cce996ff8164}{S\_room};   \textcolor{keywordflow}{break};
1401     \textcolor{keywordflow}{case} \hyperlink{rm_8h_aeffd57885964c3a9a5c3ce0f81c06339}{CORR}:
1402         idx = (ptr->waslit || \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a59d21501a2f86108f46f1a523080eec2}{lit\_corridor}) ? \hyperlink{rm_8h_a399754b07fa79009fd0354abaf190e89}{S\_litcorr} : 
      \hyperlink{rm_8h_a3d0d27bd7691a72bc0b278df4d82ca02}{S\_corr};
1403         \textcolor{keywordflow}{break};
1404     \textcolor{keywordflow}{case} \hyperlink{rm_8h_a3fcd4705d7b0ac05a88302170fcc58f5}{HWALL}:
1405     \textcolor{keywordflow}{case} \hyperlink{rm_8h_a9a3afc2fb445bb43a1776de4ebe9852e}{VWALL}:
1406     \textcolor{keywordflow}{case} \hyperlink{rm_8h_ade633f6a4bac3d7c501e28d15c536d3d}{TLCORNER}:
1407     \textcolor{keywordflow}{case} \hyperlink{rm_8h_adc954c30dd37b0942000262623e9c76e}{TRCORNER}:
1408     \textcolor{keywordflow}{case} \hyperlink{rm_8h_a8e1e6f2e3453c3dd85fbc6f5a54c8c34}{BLCORNER}:
1409     \textcolor{keywordflow}{case} \hyperlink{rm_8h_a653f37db17c18d0f1f4f76ae3063b124}{BRCORNER}:
1410     \textcolor{keywordflow}{case} \hyperlink{rm_8h_ac2a0c94b5722b98d84af548563e71d2f}{CROSSWALL}:
1411     \textcolor{keywordflow}{case} \hyperlink{rm_8h_a618fa341dec5d9aeb5ac67deb7011d29}{TUWALL}:
1412     \textcolor{keywordflow}{case} \hyperlink{rm_8h_ab847e2347534eeb83217f5b36815b88d}{TDWALL}:
1413     \textcolor{keywordflow}{case} \hyperlink{rm_8h_abec53816dd76f979866fbb2926b7af64}{TLWALL}:
1414     \textcolor{keywordflow}{case} \hyperlink{rm_8h_a9290fa8691acb3539d3381fec0e4b24a}{TRWALL}:
1415     \textcolor{keywordflow}{case} \hyperlink{rm_8h_a03fd0fa1e0dbd19ea38dff0c79e656a5}{SDOOR}:
1416         idx = ptr->\hyperlink{structrm_a34555313c127be5f736123f994cb1770}{seenv} ? \hyperlink{display_8c_a3157db3be192096a6b81e45ddaa5a9e1}{wall\_angle}(ptr) : \hyperlink{rm_8h_a342b42eb0fe3236adbc700b6e725d781}{S\_stone};
1417         \textcolor{keywordflow}{break};
1418     \textcolor{keywordflow}{case} \hyperlink{rm_8h_aa19093eb0aa5c5af9c27464ae8f0d2de}{DOOR}:
1419         \textcolor{keywordflow}{if} (ptr->doormask) \{
1420         \textcolor{keywordflow}{if} (ptr->doormask & \hyperlink{rm_8h_a1e152f0e5964deb57688f7dbcb3e6a08}{D\_BROKEN})
1421             idx = \hyperlink{rm_8h_a656adef8620d2d84e33b64c8faed2c7e}{S\_ndoor};
1422         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (ptr->doormask & \hyperlink{rm_8h_a2b0c9bae4b5dacb4bf4dcd784655c55d}{D\_ISOPEN})
1423             idx = (ptr->horizontal) ? \hyperlink{rm_8h_a9bee2998334c35e457742ea217fa6c1c}{S\_hodoor} : \hyperlink{rm_8h_a6a673b5434f4ea14e7b235733046a00c}{S\_vodoor};
1424         \textcolor{keywordflow}{else}            \textcolor{comment}{/* else is closed */}
1425             idx = (ptr->horizontal) ? \hyperlink{rm_8h_aa2fb4b079e394b211180b9a57cff39ac}{S\_hcdoor} : \hyperlink{rm_8h_a48b567f0b941ec718d04a736f71da55f}{S\_vcdoor};
1426         \} \textcolor{keywordflow}{else}
1427         idx = \hyperlink{rm_8h_a656adef8620d2d84e33b64c8faed2c7e}{S\_ndoor};
1428         \textcolor{keywordflow}{break};
1429     \textcolor{keywordflow}{case} \hyperlink{rm_8h_a07f57c69899f8f8d0746fea20d262022}{IRONBARS}:  idx = \hyperlink{rm_8h_a83b16e09a14b3440ab5a91db62c00ea4}{S\_bars};     \textcolor{keywordflow}{break};
1430     \textcolor{keywordflow}{case} \hyperlink{rm_8h_abf5b8fbbeb8255336e401a15a80214a8}{TREE}:      idx = \hyperlink{rm_8h_a285b35dc694fea024dffe5a5799fd8ff}{S\_tree};     \textcolor{keywordflow}{break};
1431     \textcolor{keywordflow}{case} \hyperlink{rm_8h_abf0d5c9a865c02bf5cc94e5d5755997c}{POOL}:
1432     \textcolor{keywordflow}{case} \hyperlink{rm_8h_a5b1cd0104b71da0833219f0489c357d2}{MOAT}:      idx = \hyperlink{rm_8h_afdf2e704cfb7dadd6e53ca4c53077c97}{S\_pool};   \textcolor{keywordflow}{break};
1433     \textcolor{keywordflow}{case} \hyperlink{rm_8h_a814976bdce7e0d26e78d426fdb6f1b22}{STAIRS}:
1434         idx = (ptr->ladder & \hyperlink{rm_8h_a6ae800b588662120096274fda9aa68e2}{LA\_DOWN}) ? \hyperlink{rm_8h_a6388bf172af73ff09dd8df0676cb3cbb}{S\_dnstair} : \hyperlink{rm_8h_a804c47940a9f1925d324bed72b37f22a}{S\_upstair};
1435         \textcolor{keywordflow}{break};
1436     \textcolor{keywordflow}{case} \hyperlink{rm_8h_aa5a9eab5827d942490d37fdc9ca87ba3}{LADDER}:
1437         idx = (ptr->ladder & \hyperlink{rm_8h_a6ae800b588662120096274fda9aa68e2}{LA\_DOWN}) ? \hyperlink{rm_8h_af074b4ce64e8e07ad582fef5d8dbc5a2}{S\_dnladder} : \hyperlink{rm_8h_adf2b1547d9d46d36ae20bb7284bc0566}{S\_upladder};
1438         \textcolor{keywordflow}{break};
1439     \textcolor{keywordflow}{case} \hyperlink{rm_8h_a88fabf28d6285490fea11089d88167ca}{FOUNTAIN}:      idx = \hyperlink{rm_8h_ad4ca1095edc055a8d3e1debbdaff6b1a}{S\_fountain}; \textcolor{keywordflow}{break};
1440     \textcolor{keywordflow}{case} \hyperlink{rm_8h_adb1aacb84dbc34f3a142a9d7bc80f375}{SINK}:      idx = \hyperlink{rm_8h_aa1d8a331f96a3c7f3da657b4a0b1872a}{S\_sink};     \textcolor{keywordflow}{break};
1441     \textcolor{keywordflow}{case} \hyperlink{rm_8h_ae560558ed2367969c72e77c084a07ded}{ALTAR}:        idx = \hyperlink{rm_8h_a2c0fad3823618e2244411efd9cdb7049}{S\_altar};    \textcolor{keywordflow}{break};
1442     \textcolor{keywordflow}{case} \hyperlink{rm_8h_a32fd21ed4a83ac89900dd91a099a378d}{GRAVE}:        idx = \hyperlink{rm_8h_a89f1186dd588de46c4412d718133b358}{S\_grave};    \textcolor{keywordflow}{break};
1443     \textcolor{keywordflow}{case} \hyperlink{rm_8h_aae56aa7aee61c8438097a0958ace54f9}{THRONE}:      idx = \hyperlink{rm_8h_af6b56250d36de9841a66db539a09271f}{S\_throne};   \textcolor{keywordflow}{break};
1444     \textcolor{keywordflow}{case} \hyperlink{rm_8h_a610b535d9b5db82cd5617b7f2f1e06af}{LAVAPOOL}:      idx = \hyperlink{rm_8h_a3aab40f677d39374e03ec1910961cee1}{S\_lava};   \textcolor{keywordflow}{break};
1445     \textcolor{keywordflow}{case} \hyperlink{rm_8h_ae41036839f2ae39cee0898016a723674}{ICE}:        idx = \hyperlink{rm_8h_afb2a96e1766823793c4460855b6b7b52}{S\_ice};      \textcolor{keywordflow}{break};
1446     \textcolor{keywordflow}{case} \hyperlink{rm_8h_a9c9ed176f84de328afaf7f514ded7df3}{AIR}:        idx = \hyperlink{rm_8h_a98d4cbbdff96af269afd4bf6688e59e9}{S\_air};     \textcolor{keywordflow}{break};
1447     \textcolor{keywordflow}{case} \hyperlink{rm_8h_a3ad8406dabd3873689181ce17236586b}{CLOUD}:        idx = \hyperlink{rm_8h_af98109ffc75c4cff074cf96bc8b1bd04}{S\_cloud};     \textcolor{keywordflow}{break};
1448     \textcolor{keywordflow}{case} \hyperlink{rm_8h_a5c3fbf45abc4ee50d118d87aecfee212}{WATER}:        idx = \hyperlink{rm_8h_ac0869946494dcbd6263431120d15c0df}{S\_water};     \textcolor{keywordflow}{break};
1449     \textcolor{keywordflow}{case} \hyperlink{rm_8h_a289c10e08bd622348cd155d70012bf39}{DBWALL}:
1450         idx = (ptr->horizontal) ? \hyperlink{rm_8h_a324339e2c4fd4e0cbadb5713b10e4754}{S\_hcdbridge} : \hyperlink{rm_8h_a42b35c949d6d867606013ec434fb52e2}{S\_vcdbridge};
1451         \textcolor{keywordflow}{break};
1452     \textcolor{keywordflow}{case} \hyperlink{rm_8h_ac5e808217d90789d8256825e8989d859}{DRAWBRIDGE\_UP}:
1453         \textcolor{keywordflow}{switch}(ptr->drawbridgemask & \hyperlink{rm_8h_a4b833266091da4a31a81b968531120ec}{DB\_UNDER}) \{
1454         \textcolor{keywordflow}{case} \hyperlink{rm_8h_ac3e7705030e57e1fb884fdec185647c3}{DB\_MOAT}:  idx = \hyperlink{rm_8h_afdf2e704cfb7dadd6e53ca4c53077c97}{S\_pool}; \textcolor{keywordflow}{break};
1455         \textcolor{keywordflow}{case} \hyperlink{rm_8h_afb086518d5d4efcc21fe6800de64e240}{DB\_LAVA}:  idx = \hyperlink{rm_8h_a3aab40f677d39374e03ec1910961cee1}{S\_lava}; \textcolor{keywordflow}{break};
1456         \textcolor{keywordflow}{case} \hyperlink{rm_8h_a1d78a2581340714cd826545f1fea2df5}{DB\_ICE}:   idx = \hyperlink{rm_8h_afb2a96e1766823793c4460855b6b7b52}{S\_ice};  \textcolor{keywordflow}{break};
1457         \textcolor{keywordflow}{case} \hyperlink{rm_8h_adb35a61fa7bf610beb3ef715984a187c}{DB\_FLOOR}: idx = \hyperlink{rm_8h_a1cbe62db5502d1ece3d5cce996ff8164}{S\_room}; \textcolor{keywordflow}{break};
1458         \textcolor{keywordflow}{default}:
1459         impossible(\textcolor{stringliteral}{"Strange db-under: %d"},
1460                ptr->drawbridgemask & \hyperlink{rm_8h_a4b833266091da4a31a81b968531120ec}{DB\_UNDER});
1461         idx = \hyperlink{rm_8h_a1cbe62db5502d1ece3d5cce996ff8164}{S\_room}; \textcolor{comment}{/* something is better than nothing */}
1462         \textcolor{keywordflow}{break};
1463         \}
1464         \textcolor{keywordflow}{break};
1465     \textcolor{keywordflow}{case} \hyperlink{rm_8h_ab6103ae7f493570a01e00598434d3dd1}{DRAWBRIDGE\_DOWN}:
1466         idx = (ptr->horizontal) ? \hyperlink{rm_8h_a65908dd67be67408824a5cbebe86999a}{S\_hodbridge} : \hyperlink{rm_8h_a051db0d5be8881b77cd8e9a916ef1a8a}{S\_vodbridge};
1467         \textcolor{keywordflow}{break};
1468     \textcolor{keywordflow}{default}:
1469         impossible(\textcolor{stringliteral}{"back\_to\_glyph:  unknown level type [ = %d ]"},ptr->\hyperlink{structrm_aa144ade377ba175f037c4e637329d4dc}{typ});
1470         idx = \hyperlink{rm_8h_a1cbe62db5502d1ece3d5cce996ff8164}{S\_room};
1471         \textcolor{keywordflow}{break};
1472     \}
1473 
1474     \textcolor{keywordflow}{return} \hyperlink{display_8h_a77e69d3b11c3296576f840c9d11ae8fb}{cmap\_to\_glyph}(idx);
1475 \}
\end{DoxyCode}
\hypertarget{display_8c_a6c49277033fb8f1150ad4fe3e95c8972}{\index{display.\+c@{display.\+c}!check\+\_\+pos@{check\+\_\+pos}}
\index{check\+\_\+pos@{check\+\_\+pos}!display.\+c@{display.\+c}}
\subsubsection[{check\+\_\+pos}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} int check\+\_\+pos (
\begin{DoxyParamCaption}
\item[{int}]{x, }
\item[{int}]{y, }
\item[{int}]{which}
\end{DoxyParamCaption}
)}}\label{display_8c_a6c49277033fb8f1150ad4fe3e95c8972}


Definition at line 1590 of file display.\+c.



References C\+O\+R\+R, I\+S\+\_\+\+R\+O\+C\+K, levl, S\+C\+O\+R\+R, and type.



Referenced by set\+\_\+corn(), set\+\_\+crosswall(), set\+\_\+twall(), and set\+\_\+wall().


\begin{DoxyCode}
1592 \{
1593     \textcolor{keywordtype}{int} \hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type};
1594     \textcolor{keywordflow}{if} (!isok(x,y)) \textcolor{keywordflow}{return} which;
1595     type = \hyperlink{rm_8h_a8cd681fba60fdedbabfd71a0b4bbfc00}{levl}[x][y].typ;
1596     \textcolor{keywordflow}{if} (\hyperlink{rm_8h_a041df081d95aacdcbf31a3bbfdd36e0e}{IS\_ROCK}(type) || type == \hyperlink{rm_8h_aeffd57885964c3a9a5c3ce0f81c06339}{CORR} || type == \hyperlink{rm_8h_a35e6fdb78f87c982df30c7e9580ad95d}{SCORR}) \textcolor{keywordflow}{return} which;
1597     \textcolor{keywordflow}{return} 0;
1598 \}
\end{DoxyCode}
\hypertarget{display_8c_acfbf4ff7302687666cd6720ab3e6e7ee}{\index{display.\+c@{display.\+c}!clear\+\_\+glyph\+\_\+buffer@{clear\+\_\+glyph\+\_\+buffer}}
\index{clear\+\_\+glyph\+\_\+buffer@{clear\+\_\+glyph\+\_\+buffer}!display.\+c@{display.\+c}}
\subsubsection[{clear\+\_\+glyph\+\_\+buffer}]{\setlength{\rightskip}{0pt plus 5cm}void clear\+\_\+glyph\+\_\+buffer (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{display_8c_acfbf4ff7302687666cd6720ab3e6e7ee}


Definition at line 1298 of file display.\+c.



References C\+O\+L\+N\+O, nul\+\_\+gbuf, reset\+\_\+glyph\+\_\+bbox, and R\+O\+W\+N\+O.



Referenced by cls().


\begin{DoxyCode}
1299 \{
1300     \textcolor{keyword}{register} \textcolor{keywordtype}{int} x, y;
1301     \textcolor{keyword}{register} \hyperlink{structgbuf__entry}{gbuf\_entry} *gptr;
1302 
1303     \textcolor{keywordflow}{for} (y = 0; y < \hyperlink{global_8h_a9cce134868d97b23c35bcf1ff4a343d8}{ROWNO}; y++) \{
1304     gptr = &\hyperlink{display_8c_af05984f18ee6d5c6573afb061376c52c}{gbuf}[y][0];
1305     \textcolor{keywordflow}{for} (x = \hyperlink{global_8h_a308dbfcc29f5a427c0315f3cbf03c3ed}{COLNO}; x; x--) \{
1306         *gptr++ = \hyperlink{display_8c_abbaadd403de1a239b8289b085e1f9565}{nul\_gbuf};
1307     \}
1308     \}
1309     \hyperlink{display_8c_af96d71995eda0c4d54b2d1eb2ea278ef}{reset\_glyph\_bbox}();
1310 \}
\end{DoxyCode}
\hypertarget{display_8c_a4826277cc150ddc0f4de4bd464a34909}{\index{display.\+c@{display.\+c}!cls@{cls}}
\index{cls@{cls}!display.\+c@{display.\+c}}
\subsubsection[{cls}]{\setlength{\rightskip}{0pt plus 5cm}void cls (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{display_8c_a4826277cc150ddc0f4de4bd464a34909}


Definition at line 1327 of file display.\+c.



References flag\+::botlx, clear\+\_\+glyph\+\_\+buffer(), clear\+\_\+nhwindow, display\+\_\+nhwindow, F\+A\+L\+S\+E, flags, W\+I\+N\+\_\+\+M\+A\+P, and W\+I\+N\+\_\+\+M\+E\+S\+S\+A\+G\+E.



Referenced by docrt(), find\+\_\+trap(), food\+\_\+detect(), gold\+\_\+detect(), monster\+\_\+detect(), object\+\_\+detect(), swallowed(), trap\+\_\+detect(), under\+\_\+ground(), under\+\_\+water(), and you\+\_\+aggravate().


\begin{DoxyCode}
1328 \{
1329     \hyperlink{winprocs_8h_ac8e74d03fbb65b9f5651e63d79bebc60}{display\_nhwindow}(\hyperlink{decl_8h_a4a1cc9e693dbdfad3ea32b10ce19f337}{WIN\_MESSAGE}, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}); \textcolor{comment}{/* flush messages */}
1330     \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a4f41387168e1a58d95db3f635eec780e}{botlx} = 1;      \textcolor{comment}{/* force update of botl window */}
1331     \hyperlink{winprocs_8h_a177c23e23d7dafb484ad58f01ae1d063}{clear\_nhwindow}(\hyperlink{decl_8h_afa1f7dd312c4c1b72afe3d2c8c2af691}{WIN\_MAP});   \textcolor{comment}{/* clear physical screen */}
1332 
1333     \hyperlink{display_8c_acfbf4ff7302687666cd6720ab3e6e7ee}{clear\_glyph\_buffer}(); \textcolor{comment}{/* this is sort of an extra effort, but OK */}
1334 \}
\end{DoxyCode}
\hypertarget{display_8c_a8edd142a64cff572d19c484164e93755}{\index{display.\+c@{display.\+c}!curs\+\_\+on\+\_\+u@{curs\+\_\+on\+\_\+u}}
\index{curs\+\_\+on\+\_\+u@{curs\+\_\+on\+\_\+u}!display.\+c@{display.\+c}}
\subsubsection[{curs\+\_\+on\+\_\+u}]{\setlength{\rightskip}{0pt plus 5cm}void curs\+\_\+on\+\_\+u (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{display_8c_a8edd142a64cff572d19c484164e93755}


Definition at line 1137 of file display.\+c.



References flush\+\_\+screen().



Referenced by done1(), done2(), and savelife().


\begin{DoxyCode}
1138 \{
1139     \hyperlink{display_8c_a47cdbc8092c02ed856defd22a0952aeb}{flush\_screen}(1);    \textcolor{comment}{/* Flush waiting glyphs & put cursor on hero */}
1140 \}
\end{DoxyCode}
\hypertarget{display_8c_a2b2101c4c3468f56cd02c1e7538b9e55}{\index{display.\+c@{display.\+c}!display\+\_\+monster@{display\+\_\+monster}}
\index{display\+\_\+monster@{display\+\_\+monster}!display.\+c@{display.\+c}}
\subsubsection[{display\+\_\+monster}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} void display\+\_\+monster (
\begin{DoxyParamCaption}
\item[{{\bf xchar}}]{x, }
\item[{{\bf xchar}}]{y, }
\item[{struct {\bf monst} $\ast$}]{mon, }
\item[{int}]{sightflags, }
\item[{{\bf xchar}}]{worm\+\_\+tail}
\end{DoxyParamCaption}
)}}\label{display_8c_a2b2101c4c3468f56cd02c1e7538b9e55}


Definition at line 359 of file display.\+c.



References cmap\+\_\+to\+\_\+glyph, obj\+::corpsenm, D\+E\+T\+E\+C\+T\+E\+D, detected\+\_\+mon\+\_\+to\+\_\+glyph, detected\+\_\+monnum\+\_\+to\+\_\+glyph, rm\+::glyph, Hallucination, levl, M\+\_\+\+A\+P\+\_\+\+F\+U\+R\+N\+I\+T\+U\+R\+E, M\+\_\+\+A\+P\+\_\+\+M\+O\+N\+S\+T\+E\+R, M\+\_\+\+A\+P\+\_\+\+N\+O\+T\+H\+I\+N\+G, M\+\_\+\+A\+P\+\_\+\+O\+B\+J\+E\+C\+T, map\+\_\+object(), mon\+\_\+to\+\_\+glyph, monnum\+\_\+to\+\_\+glyph, obj\+::otyp, obj\+::ox, obj\+::oy, pet\+\_\+to\+\_\+glyph, petnum\+\_\+to\+\_\+glyph, P\+H\+Y\+S\+I\+C\+A\+L\+L\+Y\+\_\+\+S\+E\+E\+N, Protection\+\_\+from\+\_\+shape\+\_\+changers, sensemon, show\+\_\+glyph(), and what\+\_\+mon.



Referenced by feel\+\_\+location(), and newsym().


\begin{DoxyCode}
365 \{
366     \textcolor{keyword}{register} \textcolor{keywordtype}{boolean} mon\_mimic = (mon->\hyperlink{structmonst_aab8fc9a0be90b4db8333b09487e2620c}{m\_ap\_type} != \hyperlink{monst_8h_a58db2fb11cfd7427581d698582b9a386}{M\_AP\_NOTHING});
367     \textcolor{keyword}{register} \textcolor{keywordtype}{int} sensed = mon\_mimic &&
368     (\hyperlink{youprop_8h_a9e650a188eadc75d315da94987861e26}{Protection\_from\_shape\_changers} || \hyperlink{display_8h_a13881a5dc42ea2076abd050773eee913}{sensemon}(mon));
369     \textcolor{comment}{/*}
370 \textcolor{comment}{     * We must do the mimic check first.  If the mimic is mimicing something,}
371 \textcolor{comment}{     * and the location is in sight, we have to change the hero's memory}
372 \textcolor{comment}{     * so that when the position is out of sight, the hero remembers what}
373 \textcolor{comment}{     * the mimic was mimicing.}
374 \textcolor{comment}{     */}
375 
376     \textcolor{keywordflow}{if} (mon\_mimic && (sightflags == \hyperlink{display_8c_a740e7b20ee4f653517c3152d5d689761}{PHYSICALLY\_SEEN})) \{
377     \textcolor{keywordflow}{switch} (mon->\hyperlink{structmonst_aab8fc9a0be90b4db8333b09487e2620c}{m\_ap\_type}) \{
378         \textcolor{keywordflow}{default}:
379         impossible(\textcolor{stringliteral}{"display\_monster:  bad m\_ap\_type value [ = %d ]"},
380                             (\textcolor{keywordtype}{int}) mon->\hyperlink{structmonst_aab8fc9a0be90b4db8333b09487e2620c}{m\_ap\_type});
381         \textcolor{keywordflow}{case} \hyperlink{monst_8h_a58db2fb11cfd7427581d698582b9a386}{M\_AP\_NOTHING}:
382         \hyperlink{display_8c_a60d3cfb0df75b80c36125ce154da217f}{show\_glyph}(x, y, \hyperlink{display_8h_a1fa83f592d6dcf87df43743338ece721}{mon\_to\_glyph}(mon));
383         \textcolor{keywordflow}{break};
384 
385         \textcolor{keywordflow}{case} \hyperlink{monst_8h_a3470d5a82b5711ec2b38fb153c3eab2f}{M\_AP\_FURNITURE}: \{
386         \textcolor{comment}{/*}
387 \textcolor{comment}{         * This is a poor man's version of map\_background().  I can't}
388 \textcolor{comment}{         * use map\_background() because we are overriding what is in}
389 \textcolor{comment}{         * the 'typ' field.  Maybe have map\_background()'s parameters}
390 \textcolor{comment}{         * be (x,y,glyph) instead of just (x,y).}
391 \textcolor{comment}{         *}
392 \textcolor{comment}{         * mappearance is currently set to an S\_ index value in}
393 \textcolor{comment}{         * makemon.c.}
394 \textcolor{comment}{         */}
395         \textcolor{keyword}{register} \textcolor{keywordtype}{int} \hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} = \hyperlink{display_8h_a77e69d3b11c3296576f840c9d11ae8fb}{cmap\_to\_glyph}(mon->\hyperlink{structmonst_a60ba74caeb4e779b7ccdb99150823bb9}{mappearance});
396         \hyperlink{rm_8h_a8cd681fba60fdedbabfd71a0b4bbfc00}{levl}[x][y].glyph = \hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph};
397         \textcolor{keywordflow}{if} (!sensed) \hyperlink{display_8c_a60d3cfb0df75b80c36125ce154da217f}{show\_glyph}(x,y, glyph);
398         \textcolor{keywordflow}{break};
399         \}
400 
401         \textcolor{keywordflow}{case} \hyperlink{monst_8h_a398e3dada51d63d91d8d9a6fb3f90c62}{M\_AP\_OBJECT}: \{
402         \textcolor{keyword}{struct }\hyperlink{structobj}{obj} \hyperlink{structobj}{obj};   \textcolor{comment}{/* Make a fake object to send   */}
403                 \textcolor{comment}{/* to map\_object().     */}
404         \hyperlink{structobj}{obj}.\hyperlink{structobj_aac936c7da6b4f1eca0a94f75c242e5cc}{ox} = x;
405         \hyperlink{structobj}{obj}.\hyperlink{structobj_a72dace5e678b56ae42c3fb19292e5839}{oy} = y;
406         \hyperlink{structobj}{obj}.\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} = mon->\hyperlink{structmonst_a60ba74caeb4e779b7ccdb99150823bb9}{mappearance};
407         \hyperlink{structobj}{obj}.\hyperlink{structobj_ad5db7220e2b815d06c3c80027ab9924f}{corpsenm} = PM\_TENGU; \textcolor{comment}{/* if mimicing a corpse */}
408         \hyperlink{display_8c_a5c4fd462bd2806ee7e870039c75022e4}{map\_object}(&\hyperlink{structobj}{obj},!sensed);
409         \textcolor{keywordflow}{break};
410         \}
411 
412         \textcolor{keywordflow}{case} \hyperlink{monst_8h_ac3674020cb0ffbb50a783e53e76e21f4}{M\_AP\_MONSTER}:
413         \hyperlink{display_8c_a60d3cfb0df75b80c36125ce154da217f}{show\_glyph}(x,y, \hyperlink{display_8h_a560cc4daa0badc1538b75ff73d71a995}{monnum\_to\_glyph}(\hyperlink{display_8h_acff82933acc349b5ecf19a850d2e3005}{what\_mon}((\textcolor{keywordtype}{int})mon->
      \hyperlink{structmonst_a60ba74caeb4e779b7ccdb99150823bb9}{mappearance})));
414         \textcolor{keywordflow}{break};
415     \}
416     
417     \}
418 
419     \textcolor{comment}{/* If the mimic is unsucessfully mimicing something, display the monster */}
420     \textcolor{keywordflow}{if} (!mon\_mimic || sensed) \{
421     \textcolor{keywordtype}{int} num;
422 
423     \textcolor{comment}{/* [ALI] Only use detected glyphs when monster wouldn't be}
424 \textcolor{comment}{     * visible by any other means.}
425 \textcolor{comment}{     */}
426     \textcolor{keywordflow}{if} (sightflags == \hyperlink{display_8c_a6a3a39d7ab88e59eb6d2a8b034890075}{DETECTED}) \{
427         \textcolor{keywordflow}{if} (worm\_tail)
428         num = \hyperlink{display_8h_abb2c79319464d32507f14995191ab9c8}{detected\_monnum\_to\_glyph}(\hyperlink{display_8h_acff82933acc349b5ecf19a850d2e3005}{what\_mon}(PM\_LONG\_WORM\_TAIL));
429         \textcolor{keywordflow}{else}
430         num = \hyperlink{display_8h_ae2717e9b2518a649e2ff62f810b67dda}{detected\_mon\_to\_glyph}(mon);
431     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (mon->\hyperlink{structmonst_a6d525ec48f9d38cda6accbb0cb39efba}{mtame} && !\hyperlink{youprop_8h_aa873f7ea0a3d096ef94ff651907f7a76}{Hallucination}) \{
432         \textcolor{keywordflow}{if} (worm\_tail)
433         num = \hyperlink{display_8h_a42379ae0ce2a104ea12a2ffa1db0ba6a}{petnum\_to\_glyph}(PM\_LONG\_WORM\_TAIL);
434         \textcolor{keywordflow}{else}
435         num = \hyperlink{display_8h_a25bf02e3f0c5c97787395f922a6c2346}{pet\_to\_glyph}(mon);
436     \} \textcolor{keywordflow}{else} \{
437         \textcolor{keywordflow}{if} (worm\_tail)
438         num = \hyperlink{display_8h_a560cc4daa0badc1538b75ff73d71a995}{monnum\_to\_glyph}(\hyperlink{display_8h_acff82933acc349b5ecf19a850d2e3005}{what\_mon}(PM\_LONG\_WORM\_TAIL));
439         \textcolor{keywordflow}{else}
440         num = \hyperlink{display_8h_a1fa83f592d6dcf87df43743338ece721}{mon\_to\_glyph}(mon);
441     \}
442     \hyperlink{display_8c_a60d3cfb0df75b80c36125ce154da217f}{show\_glyph}(x,y,num);
443     \}
444 \}
\end{DoxyCode}
\hypertarget{display_8c_a1637cf77d1a360591ebfb5763286fe86}{\index{display.\+c@{display.\+c}!display\+\_\+warning@{display\+\_\+warning}}
\index{display\+\_\+warning@{display\+\_\+warning}!display.\+c@{display.\+c}}
\subsubsection[{display\+\_\+warning}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} void display\+\_\+warning (
\begin{DoxyParamCaption}
\item[{struct {\bf monst} $\ast$}]{mon}
\end{DoxyParamCaption}
)}}\label{display_8c_a1637cf77d1a360591ebfb5763286fe86}


Definition at line 456 of file display.\+c.



References Hallucination, M\+A\+T\+C\+H\+\_\+\+W\+A\+R\+N\+\_\+\+O\+F\+\_\+\+M\+O\+N, mon\+\_\+to\+\_\+glyph, mon\+\_\+warning, monst\+::mx, rn1, show\+\_\+glyph(), W\+A\+R\+N\+C\+O\+U\+N\+T, and warning\+\_\+to\+\_\+glyph.



Referenced by newsym().


\begin{DoxyCode}
458 \{
459     \textcolor{keywordtype}{int} x = mon->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, y = mon->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my};
460     \textcolor{keywordtype}{int} wl = (int) (mon->\hyperlink{structmonst_a80ec1118166ea76d347e47d088bd1f7c}{m\_lev} / 4);
461     \textcolor{keywordtype}{int} glyph;
462 
463     \textcolor{keywordflow}{if} (\hyperlink{display_8h_a0039b777fa34c7612336965a77e6bc30}{mon\_warning}(mon)) \{
464         \textcolor{keywordflow}{if} (wl > \hyperlink{decl_8h_aeee8b486e8dc54c672bc3af9eb3ef68d}{WARNCOUNT} - 1) wl = \hyperlink{decl_8h_aeee8b486e8dc54c672bc3af9eb3ef68d}{WARNCOUNT} - 1;
465     \textcolor{comment}{/* 3.4.1: this really ought to be rn2(WARNCOUNT), but value "0"}
466 \textcolor{comment}{       isn't handled correctly by the what\_is routine so avoid it */}
467     \textcolor{keywordflow}{if} (\hyperlink{youprop_8h_aa873f7ea0a3d096ef94ff651907f7a76}{Hallucination}) wl = \hyperlink{hack_8h_af107ca092682647f298989038020f9c8}{rn1}(\hyperlink{decl_8h_aeee8b486e8dc54c672bc3af9eb3ef68d}{WARNCOUNT}-1,1);
468         glyph = \hyperlink{display_8h_aea5a2cc2ac8dec477c98bf16a847e5c9}{warning\_to\_glyph}(wl);
469     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{hack_8h_a06971ec894f970d371a9cc7afc83e72c}{MATCH\_WARN\_OF\_MON}(mon)) \{
470     glyph = \hyperlink{display_8h_a1fa83f592d6dcf87df43743338ece721}{mon\_to\_glyph}(mon);
471     \} \textcolor{keywordflow}{else} \{
472         impossible(\textcolor{stringliteral}{"display\_warning did not match warning type?"});
473         \textcolor{keywordflow}{return};
474     \}
475     \hyperlink{display_8c_a60d3cfb0df75b80c36125ce154da217f}{show\_glyph}(x, y, glyph);
476 \}
\end{DoxyCode}
\hypertarget{display_8c_aad46d5a3dee537d403163916114fd463}{\index{display.\+c@{display.\+c}!docrt@{docrt}}
\index{docrt@{docrt}!display.\+c@{display.\+c}}
\subsubsection[{docrt}]{\setlength{\rightskip}{0pt plus 5cm}void docrt (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{display_8c_aad46d5a3dee537d403163916114fd463}


Definition at line 1150 of file display.\+c.



References flag\+::botlx, cls(), cmap\+\_\+to\+\_\+glyph, C\+O\+L\+N\+O, flags, rm\+::glyph, Is\+\_\+waterlevel, levl, R\+O\+W\+N\+O, S\+\_\+stone, see\+\_\+monsters(), show\+\_\+glyph(), swallowed(), u, under\+\_\+ground(), under\+\_\+water(), Underwater, you\+::ux, you\+::uz, vision\+\_\+recalc(), trap\+::x, and trap\+::y.



Referenced by do\+\_\+mapping(), do\+\_\+vicinity\+\_\+map(), dorecover(), doredraw(), find\+\_\+trap(), food\+\_\+detect(), gold\+\_\+detect(), monster\+\_\+detect(), object\+\_\+detect(), rloc\+\_\+to(), teleds(), trap\+\_\+detect(), and you\+\_\+aggravate().


\begin{DoxyCode}
1151 \{
1152     \textcolor{keyword}{register} \textcolor{keywordtype}{int} x,y;
1153     \textcolor{keyword}{register} \textcolor{keyword}{struct }\hyperlink{structrm}{rm} *lev;
1154 
1155     \textcolor{keywordflow}{if} (!\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux}) \textcolor{keywordflow}{return}; \textcolor{comment}{/* display isn't ready yet */}
1156 
1157     \textcolor{keywordflow}{if} (\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.uswallow) \{
1158     \hyperlink{display_8c_a2621d8769ad9f42389e6fa5f21227b82}{swallowed}(1);
1159     \textcolor{keywordflow}{return};
1160     \}
1161     \textcolor{keywordflow}{if} (\hyperlink{youprop_8h_a2eb59bdcba2c368fefd253bfcdaa3673}{Underwater} && !\hyperlink{dungeon_8h_a9fd7b21db47607a73332aa75ba8f4832}{Is\_waterlevel}(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz})) \{
1162     \hyperlink{display_8c_a04df1dff0b7b4d1eafd5078265a3d451}{under\_water}(1);
1163     \textcolor{keywordflow}{return};
1164     \}
1165     \textcolor{keywordflow}{if} (\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.uburied) \{
1166     \hyperlink{display_8c_af14bb89d2638ab90083214d1f9ed19f4}{under\_ground}(1);
1167     \textcolor{keywordflow}{return};
1168     \}
1169 
1170     \textcolor{comment}{/* shut down vision */}
1171     \hyperlink{vision_8c_a07b3acbfcca75497c31df8d8aee1ca53}{vision\_recalc}(2);
1172 
1173     \textcolor{comment}{/*}
1174 \textcolor{comment}{     * This routine assumes that cls() does the following:}
1175 \textcolor{comment}{     *      + fills the physical screen with the symbol for rock}
1176 \textcolor{comment}{     *      + clears the glyph buffer}
1177 \textcolor{comment}{     */}
1178     \hyperlink{display_8c_a4826277cc150ddc0f4de4bd464a34909}{cls}();
1179 
1180     \textcolor{comment}{/* display memory */}
1181     \textcolor{keywordflow}{for} (x = 1; x < \hyperlink{global_8h_a308dbfcc29f5a427c0315f3cbf03c3ed}{COLNO}; x++) \{
1182     lev = &\hyperlink{rm_8h_a8cd681fba60fdedbabfd71a0b4bbfc00}{levl}[x][0];
1183     \textcolor{keywordflow}{for} (y = 0; y < \hyperlink{global_8h_a9cce134868d97b23c35bcf1ff4a343d8}{ROWNO}; y++, lev++)
1184         \textcolor{keywordflow}{if} (lev->\hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} != \hyperlink{display_8h_a77e69d3b11c3296576f840c9d11ae8fb}{cmap\_to\_glyph}(\hyperlink{rm_8h_a342b42eb0fe3236adbc700b6e725d781}{S\_stone}))
1185         \hyperlink{display_8c_a60d3cfb0df75b80c36125ce154da217f}{show\_glyph}(x,y,lev->\hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph});
1186     \}
1187 
1188     \textcolor{comment}{/* see what is to be seen */}
1189     \hyperlink{vision_8c_a07b3acbfcca75497c31df8d8aee1ca53}{vision\_recalc}(0);
1190 
1191     \textcolor{comment}{/* overlay with monsters */}
1192     \hyperlink{display_8c_aa9a8557e452301a77e67c6b9be801775}{see\_monsters}();
1193 
1194     \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a4f41387168e1a58d95db3f635eec780e}{botlx} = 1;  \textcolor{comment}{/* force a redraw of the bottom line */}
1195 \}
\end{DoxyCode}
\hypertarget{display_8c_abf432a93fec9c94db8570f8a2c01468e}{\index{display.\+c@{display.\+c}!doredraw@{doredraw}}
\index{doredraw@{doredraw}!display.\+c@{display.\+c}}
\subsubsection[{doredraw}]{\setlength{\rightskip}{0pt plus 5cm}int doredraw (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{display_8c_abf432a93fec9c94db8570f8a2c01468e}


Definition at line 1143 of file display.\+c.



References docrt().



Referenced by amii\+\_\+cliparound(), dosave(), doset(), Edit\+Clipping(), ghack\+\_\+reinit\+\_\+map\+\_\+window(), and ghack\+\_\+save\+\_\+game().


\begin{DoxyCode}
1144 \{
1145     \hyperlink{display_8c_aad46d5a3dee537d403163916114fd463}{docrt}();
1146     \textcolor{keywordflow}{return} 0;
1147 \}
\end{DoxyCode}
\hypertarget{display_8c_a2711477ddf07bbcd6a3023a4bf56f78d}{\index{display.\+c@{display.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!display.\+c@{display.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} void F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf display\+\_\+monster}}]{, }
\item[{({\bf X\+C\+H\+A\+R\+\_\+\+P}, {\bf X\+C\+H\+A\+R\+\_\+\+P}, struct {\bf monst} $\ast$, int, {\bf X\+C\+H\+A\+R\+\_\+\+P})}]{}
\end{DoxyParamCaption}
)}}\label{display_8c_a2711477ddf07bbcd6a3023a4bf56f78d}
\hypertarget{display_8c_af9060cb844f89f3d9228ed4ebc0cd11f}{\index{display.\+c@{display.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!display.\+c@{display.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} int F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf swallow\+\_\+to\+\_\+glyph}}]{, }
\item[{(int, int)}]{}
\end{DoxyParamCaption}
)}}\label{display_8c_af9060cb844f89f3d9228ed4ebc0cd11f}
\hypertarget{display_8c_ac8f66723d0dacc4086159c5c591c25a3}{\index{display.\+c@{display.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!display.\+c@{display.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} void F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf display\+\_\+warning}}]{, }
\item[{(struct {\bf monst} $\ast$)}]{}
\end{DoxyParamCaption}
)}}\label{display_8c_ac8f66723d0dacc4086159c5c591c25a3}
\hypertarget{display_8c_aee00f6ddd0ce4aaf5102a104d0747a47}{\index{display.\+c@{display.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!display.\+c@{display.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} int F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf check\+\_\+pos}}]{, }
\item[{(int, int, int)}]{}
\end{DoxyParamCaption}
)}}\label{display_8c_aee00f6ddd0ce4aaf5102a104d0747a47}
\hypertarget{display_8c_a56b3d4171e8b18e8e611b43ab9c8a6db}{\index{display.\+c@{display.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!display.\+c@{display.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} int F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf set\+\_\+twall}}]{, }
\item[{(int, int, int, int, int, int, int, int)}]{}
\end{DoxyParamCaption}
)}}\label{display_8c_a56b3d4171e8b18e8e611b43ab9c8a6db}
\hypertarget{display_8c_a53174c47abe616d1032c9281530d4b92}{\index{display.\+c@{display.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!display.\+c@{display.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} int F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf set\+\_\+wall}}]{, }
\item[{(int, int, int)}]{}
\end{DoxyParamCaption}
)}}\label{display_8c_a53174c47abe616d1032c9281530d4b92}
\hypertarget{display_8c_aacfa7543bd0ac1753ba463cb4ce0da17}{\index{display.\+c@{display.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!display.\+c@{display.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} int F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf set\+\_\+corn}}]{, }
\item[{(int, int, int, int, int, int, int, int)}]{}
\end{DoxyParamCaption}
)}}\label{display_8c_aacfa7543bd0ac1753ba463cb4ce0da17}
\hypertarget{display_8c_ac3208077aee9b474de05f32786a6907a}{\index{display.\+c@{display.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!display.\+c@{display.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} int F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf set\+\_\+crosswall}}]{, }
\item[{(int, int)}]{}
\end{DoxyParamCaption}
)}}\label{display_8c_ac3208077aee9b474de05f32786a6907a}
\hypertarget{display_8c_afcd63a7e30e91b8db48ec88d23d3c962}{\index{display.\+c@{display.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!display.\+c@{display.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} void F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf set\+\_\+seenv}}]{, }
\item[{(struct {\bf rm} $\ast$, int, int, int, int)}]{}
\end{DoxyParamCaption}
)}}\label{display_8c_afcd63a7e30e91b8db48ec88d23d3c962}
\hypertarget{display_8c_a1376bec7274d83aac8503e69200d7136}{\index{display.\+c@{display.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!display.\+c@{display.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} void F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf t\+\_\+warn}}]{, }
\item[{(struct {\bf rm} $\ast$)}]{}
\end{DoxyParamCaption}
)}}\label{display_8c_a1376bec7274d83aac8503e69200d7136}
\hypertarget{display_8c_a88e14464bfd768ac1388faf7159cc35d}{\index{display.\+c@{display.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!display.\+c@{display.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} int F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf wall\+\_\+angle}}]{, }
\item[{(struct {\bf rm} $\ast$)}]{}
\end{DoxyParamCaption}
)}}\label{display_8c_a88e14464bfd768ac1388faf7159cc35d}
\hypertarget{display_8c_aeec8e3135efbd85fa3a197a9f8f61d96}{\index{display.\+c@{display.\+c}!feel\+\_\+location@{feel\+\_\+location}}
\index{feel\+\_\+location@{feel\+\_\+location}!display.\+c@{display.\+c}}
\subsubsection[{feel\+\_\+location}]{\setlength{\rightskip}{0pt plus 5cm}void feel\+\_\+location (
\begin{DoxyParamCaption}
\item[{{\bf xchar}}]{x, }
\item[{{\bf xchar}}]{y}
\end{DoxyParamCaption}
)}}\label{display_8c_aeec8e3135efbd85fa3a197a9f8f61d96}


Definition at line 489 of file display.\+c.



References \+\_\+map\+\_\+location, B\+C\+\_\+\+B\+A\+L\+L, B\+C\+\_\+\+C\+H\+A\+I\+N, you\+::bc\+\_\+felt, carried, cmap\+\_\+to\+\_\+glyph, C\+O\+R\+R, D\+\_\+\+C\+L\+O\+S\+E\+D, D\+\_\+\+L\+O\+C\+K\+E\+D, D\+E\+T\+E\+C\+T\+E\+D, display\+\_\+monster(), rm\+::glyph, glyph\+\_\+is\+\_\+invisible, Is\+\_\+airlevel, I\+S\+\_\+\+D\+O\+O\+R, I\+S\+\_\+\+P\+O\+O\+L, I\+S\+\_\+\+R\+O\+C\+K, I\+S\+\_\+\+R\+O\+O\+M, Is\+\_\+waterlevel, is\+\_\+worm\+\_\+tail, level, Levitation, levl, m\+\_\+at, map\+\_\+background(), map\+\_\+object(), M\+A\+T\+C\+H\+\_\+\+W\+A\+R\+N\+\_\+\+O\+F\+\_\+\+M\+O\+N, dlevel\+\_\+t\+::objects, objnum\+\_\+to\+\_\+glyph, obj\+::ox, obj\+::oy, P\+H\+Y\+S\+I\+C\+A\+L\+L\+Y\+\_\+\+S\+E\+E\+N, Punished, R\+O\+O\+M, S\+\_\+corr, S\+\_\+litcorr, S\+\_\+room, S\+\_\+stone, rm\+::seenv, sensemon, set\+\_\+seenv(), show\+\_\+glyph(), tp\+\_\+sensemon, rm\+::typ, u, uball, uchain, Underwater, you\+::ux, you\+::uy, and you\+::uz.



Referenced by dokick(), dosearch0(), find\+\_\+trap(), and newsym().


\begin{DoxyCode}
491 \{
492     \textcolor{keyword}{struct }\hyperlink{structrm}{rm} *lev = &(\hyperlink{rm_8h_a8cd681fba60fdedbabfd71a0b4bbfc00}{levl}[x][y]);
493     \textcolor{keyword}{struct }\hyperlink{structobj}{obj} *boulder;
494     \textcolor{keyword}{register} \textcolor{keyword}{struct }\hyperlink{structmonst}{monst} *mon;
495 
496     \textcolor{comment}{/* If the hero's memory of an invisible monster is accurate, we want to keep}
497 \textcolor{comment}{     * him from detecting the same monster over and over again on each turn.}
498 \textcolor{comment}{     * We must return (so we don't erase the monster).  (We must also, in the}
499 \textcolor{comment}{     * search function, be sure to skip over previously detected 'I's.)}
500 \textcolor{comment}{     */}
501     \textcolor{keywordflow}{if} (\hyperlink{display_8h_aab760a0bc2c5bad8dbfe7102628dafc6}{glyph\_is\_invisible}(\hyperlink{rm_8h_a8cd681fba60fdedbabfd71a0b4bbfc00}{levl}[x][y].glyph) && \hyperlink{rm_8h_a4d8dddf3df3fad65478980d2c8cbf53c}{m\_at}(x,y)) \textcolor{keywordflow}{return};
502 
503     \textcolor{comment}{/* The hero can't feel non pool locations while under water. */}
504     \textcolor{keywordflow}{if} (\hyperlink{youprop_8h_a2eb59bdcba2c368fefd253bfcdaa3673}{Underwater} && !\hyperlink{dungeon_8h_a9fd7b21db47607a73332aa75ba8f4832}{Is\_waterlevel}(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz}) && ! is\_pool(x,y))
505     \textcolor{keywordflow}{return};
506 
507     \textcolor{comment}{/* Set the seen vector as if the hero had seen it.  It doesn't matter */}
508     \textcolor{comment}{/* if the hero is levitating or not.                  */}
509     \hyperlink{display_8c_aed31e6434cf32d4f5a20d9460172456f}{set\_seenv}(lev, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux}, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy}, x, y);
510 
511     \textcolor{keywordflow}{if} (\hyperlink{youprop_8h_a3dbdc08291ccd1d6de010d72e4b180fb}{Levitation} && !\hyperlink{dungeon_8h_a2d9a2dcb88ded033c3305c7798f81c24}{Is\_airlevel}(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz}) && !
      \hyperlink{dungeon_8h_a9fd7b21db47607a73332aa75ba8f4832}{Is\_waterlevel}(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz})) \{
512     \textcolor{comment}{/*}
513 \textcolor{comment}{     * Levitation Rules.  It is assumed that the hero can feel the state}
514 \textcolor{comment}{     * of the walls around herself and can tell if she is in a corridor,}
515 \textcolor{comment}{     * room, or doorway.  Boulders are felt because they are large enough.}
516 \textcolor{comment}{     * Anything else is unknown because the hero can't reach the ground.}
517 \textcolor{comment}{     * This makes things difficult.}
518 \textcolor{comment}{     *}
519 \textcolor{comment}{     * Check (and display) in order:}
520 \textcolor{comment}{     *}
521 \textcolor{comment}{     *  + Stone, walls, and closed doors.}
522 \textcolor{comment}{     *  + Boulders.  [see a boulder before a doorway]}
523 \textcolor{comment}{     *  + Doors.}
524 \textcolor{comment}{     *  + Room/water positions}
525 \textcolor{comment}{     *  + Everything else (hallways!)}
526 \textcolor{comment}{     */}
527     \textcolor{keywordflow}{if} (\hyperlink{rm_8h_a041df081d95aacdcbf31a3bbfdd36e0e}{IS\_ROCK}(lev->\hyperlink{structrm_aa144ade377ba175f037c4e637329d4dc}{typ}) || (\hyperlink{rm_8h_a44de5677b6310b3b96cad756e24b59d9}{IS\_DOOR}(lev->\hyperlink{structrm_aa144ade377ba175f037c4e637329d4dc}{typ}) &&
528                 (lev->doormask & (\hyperlink{rm_8h_a0996530515217dfd9f5e12878cb1dc8b}{D\_LOCKED} | \hyperlink{rm_8h_a65f9ce7db71ac3d4c13edfe69732ec9a}{D\_CLOSED})))) \{
529         \hyperlink{display_8c_abe2bc3c09d117e9c709ac1c01d73c8fb}{map\_background}(x, y, 1);
530     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((boulder = sobj\_at(BOULDER,x,y)) != 0) \{
531         \hyperlink{display_8c_a5c4fd462bd2806ee7e870039c75022e4}{map\_object}(boulder, 1);
532     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{rm_8h_a44de5677b6310b3b96cad756e24b59d9}{IS\_DOOR}(lev->\hyperlink{structrm_aa144ade377ba175f037c4e637329d4dc}{typ})) \{
533         \hyperlink{display_8c_abe2bc3c09d117e9c709ac1c01d73c8fb}{map\_background}(x, y, 1);
534     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{rm_8h_af84b49fffdbf2780a5eb39f0203e4ffa}{IS\_ROOM}(lev->\hyperlink{structrm_aa144ade377ba175f037c4e637329d4dc}{typ}) || \hyperlink{rm_8h_af8646f234f17ac8ab9165330194fa775}{IS\_POOL}(lev->\hyperlink{structrm_aa144ade377ba175f037c4e637329d4dc}{typ})) \{
535         \textcolor{comment}{/*}
536 \textcolor{comment}{         * An open room or water location.  Normally we wouldn't touch}
537 \textcolor{comment}{         * this, but we have to get rid of remembered boulder symbols.}
538 \textcolor{comment}{         * This will only occur in rare occations when the hero goes}
539 \textcolor{comment}{         * blind and doesn't find a boulder where expected (something}
540 \textcolor{comment}{         * came along and picked it up).  We know that there is not a}
541 \textcolor{comment}{         * boulder at this location.  Show fountains, pools, etc.}
542 \textcolor{comment}{         * underneath if already seen.  Otherwise, show the appropriate}
543 \textcolor{comment}{         * floor symbol.}
544 \textcolor{comment}{         *}
545 \textcolor{comment}{         * Similarly, if the hero digs a hole in a wall or feels a location}
546 \textcolor{comment}{         * that used to contain an unseen monster.  In these cases,}
547 \textcolor{comment}{         * there's no reason to assume anything was underneath, so}
548 \textcolor{comment}{         * just show the appropriate floor symbol.  If something was}
549 \textcolor{comment}{         * embedded in the wall, the glyph will probably already}
550 \textcolor{comment}{         * reflect that.  Don't change the symbol in this case.}
551 \textcolor{comment}{         *}
552 \textcolor{comment}{         * This isn't quite correct.  If the boulder was on top of some}
553 \textcolor{comment}{         * other objects they should be seen once the boulder is removed.}
554 \textcolor{comment}{         * However, we have no way of knowing that what is there now}
555 \textcolor{comment}{         * was there then.  So we let the hero have a lapse of memory.}
556 \textcolor{comment}{         * We could also just display what is currently on the top of the}
557 \textcolor{comment}{         * object stack (if anything).}
558 \textcolor{comment}{         */}
559         \textcolor{keywordflow}{if} (lev->\hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} == \hyperlink{display_8h_af59a105c9b05e9d0531be67f59726b88}{objnum\_to\_glyph}(BOULDER)) \{
560         \textcolor{keywordflow}{if} (lev->\hyperlink{structrm_aa144ade377ba175f037c4e637329d4dc}{typ} != \hyperlink{rm_8h_ae635489e987ae17a3bf884376cc2fe34}{ROOM} && lev->\hyperlink{structrm_a34555313c127be5f736123f994cb1770}{seenv}) \{
561             \hyperlink{display_8c_abe2bc3c09d117e9c709ac1c01d73c8fb}{map\_background}(x, y, 1);
562         \} \textcolor{keywordflow}{else} \{
563             lev->\hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} = lev->waslit ? \hyperlink{display_8h_a77e69d3b11c3296576f840c9d11ae8fb}{cmap\_to\_glyph}(\hyperlink{rm_8h_a1cbe62db5502d1ece3d5cce996ff8164}{S\_room}) :
564                            \hyperlink{display_8h_a77e69d3b11c3296576f840c9d11ae8fb}{cmap\_to\_glyph}(\hyperlink{rm_8h_a342b42eb0fe3236adbc700b6e725d781}{S\_stone});
565             \hyperlink{display_8c_a60d3cfb0df75b80c36125ce154da217f}{show\_glyph}(x,y,lev->\hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph});
566         \}
567         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((lev->\hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} >= \hyperlink{display_8h_a77e69d3b11c3296576f840c9d11ae8fb}{cmap\_to\_glyph}(\hyperlink{rm_8h_a342b42eb0fe3236adbc700b6e725d781}{S\_stone}) &&
568             lev->\hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} < \hyperlink{display_8h_a77e69d3b11c3296576f840c9d11ae8fb}{cmap\_to\_glyph}(\hyperlink{rm_8h_a1cbe62db5502d1ece3d5cce996ff8164}{S\_room})) ||
569                \hyperlink{display_8h_aab760a0bc2c5bad8dbfe7102628dafc6}{glyph\_is\_invisible}(\hyperlink{rm_8h_a8cd681fba60fdedbabfd71a0b4bbfc00}{levl}[x][y].glyph)) \{
570         lev->\hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} = lev->waslit ? \hyperlink{display_8h_a77e69d3b11c3296576f840c9d11ae8fb}{cmap\_to\_glyph}(\hyperlink{rm_8h_a1cbe62db5502d1ece3d5cce996ff8164}{S\_room}) :
571                        \hyperlink{display_8h_a77e69d3b11c3296576f840c9d11ae8fb}{cmap\_to\_glyph}(\hyperlink{rm_8h_a342b42eb0fe3236adbc700b6e725d781}{S\_stone});
572         \hyperlink{display_8c_a60d3cfb0df75b80c36125ce154da217f}{show\_glyph}(x,y,lev->\hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph});
573         \}
574     \} \textcolor{keywordflow}{else} \{
575         \textcolor{comment}{/* We feel it (I think hallways are the only things left). */}
576         \hyperlink{display_8c_abe2bc3c09d117e9c709ac1c01d73c8fb}{map\_background}(x, y, 1);
577         \textcolor{comment}{/* Corridors are never felt as lit (unless remembered that way) */}
578         \textcolor{comment}{/* (lit\_corridor only).                     */}
579         \textcolor{keywordflow}{if} (lev->\hyperlink{structrm_aa144ade377ba175f037c4e637329d4dc}{typ} == \hyperlink{rm_8h_aeffd57885964c3a9a5c3ce0f81c06339}{CORR} &&
580             lev->\hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} == \hyperlink{display_8h_a77e69d3b11c3296576f840c9d11ae8fb}{cmap\_to\_glyph}(\hyperlink{rm_8h_a399754b07fa79009fd0354abaf190e89}{S\_litcorr}) && !lev->waslit)
581         \hyperlink{display_8c_a60d3cfb0df75b80c36125ce154da217f}{show\_glyph}(x, y, lev->\hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} = \hyperlink{display_8h_a77e69d3b11c3296576f840c9d11ae8fb}{cmap\_to\_glyph}(
      \hyperlink{rm_8h_a3d0d27bd7691a72bc0b278df4d82ca02}{S\_corr}));
582     \}
583     \} \textcolor{keywordflow}{else} \{
584     \hyperlink{display_8c_a890077edc6bf96b569530dca37b730de}{\_map\_location}(x, y, 1);
585 
586     \textcolor{keywordflow}{if} (\hyperlink{youprop_8h_ad76daf081117eb579839073bebe92b45}{Punished}) \{
587         \textcolor{comment}{/*}
588 \textcolor{comment}{         * A ball or chain is only felt if it is first on the object}
589 \textcolor{comment}{         * location list.  Otherwise, we need to clear the felt bit ---}
590 \textcolor{comment}{         * something has been dropped on the ball/chain.  If the bit is}
591 \textcolor{comment}{         * not cleared, then when the ball/chain is moved it will drop}
592 \textcolor{comment}{         * the wrong glyph.}
593 \textcolor{comment}{         */}
594         \textcolor{keywordflow}{if} (\hyperlink{decl_8h_ac83f46f409b88c6d6109ed04938ad52a}{uchain}->\hyperlink{structobj_aac936c7da6b4f1eca0a94f75c242e5cc}{ox} == x && \hyperlink{decl_8h_ac83f46f409b88c6d6109ed04938ad52a}{uchain}->\hyperlink{structobj_a72dace5e678b56ae42c3fb19292e5839}{oy} == y) \{
595         \textcolor{keywordflow}{if} (\hyperlink{rm_8h_a721c99bfa099c4225215ba102e91fa39}{level}.\hyperlink{structdlevel__t_ac128f805d01d7746b499596dd3b92a53}{objects}[x][y] == \hyperlink{decl_8h_ac83f46f409b88c6d6109ed04938ad52a}{uchain})
596             \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a3d3a16319933c6301b41ba9e1ed0fc3e}{bc\_felt} |= \hyperlink{you_8h_a472e93efe25244bcc845fd6dbcaee2c2}{BC\_CHAIN};
597         \textcolor{keywordflow}{else}
598             \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a3d3a16319933c6301b41ba9e1ed0fc3e}{bc\_felt} &= ~\hyperlink{you_8h_a472e93efe25244bcc845fd6dbcaee2c2}{BC\_CHAIN}; \textcolor{comment}{/* do not feel the chain */}
599         \}
600         \textcolor{keywordflow}{if} (!\hyperlink{obj_8h_a4adde9a5428fde9b6faf64253a1507e8}{carried}(\hyperlink{decl_8h_a043dece512e3c566986d7cfabc52d05e}{uball}) && \hyperlink{decl_8h_a043dece512e3c566986d7cfabc52d05e}{uball}->\hyperlink{structobj_aac936c7da6b4f1eca0a94f75c242e5cc}{ox} == x && \hyperlink{decl_8h_a043dece512e3c566986d7cfabc52d05e}{uball}->
      \hyperlink{structobj_a72dace5e678b56ae42c3fb19292e5839}{oy} == y) \{
601         \textcolor{keywordflow}{if} (\hyperlink{rm_8h_a721c99bfa099c4225215ba102e91fa39}{level}.\hyperlink{structdlevel__t_ac128f805d01d7746b499596dd3b92a53}{objects}[x][y] == \hyperlink{decl_8h_a043dece512e3c566986d7cfabc52d05e}{uball})
602             \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a3d3a16319933c6301b41ba9e1ed0fc3e}{bc\_felt} |= \hyperlink{you_8h_a6eb9e4ef3644799e6b7921c1a236a453}{BC\_BALL};
603         \textcolor{keywordflow}{else}
604             \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a3d3a16319933c6301b41ba9e1ed0fc3e}{bc\_felt} &= ~\hyperlink{you_8h_a6eb9e4ef3644799e6b7921c1a236a453}{BC\_BALL};   \textcolor{comment}{/* do not feel the ball */}
605         \}
606     \}
607 
608     \textcolor{comment}{/* Floor spaces are dark if unlit.  Corridors are dark if unlit. */}
609     \textcolor{keywordflow}{if} (lev->\hyperlink{structrm_aa144ade377ba175f037c4e637329d4dc}{typ} == \hyperlink{rm_8h_ae635489e987ae17a3bf884376cc2fe34}{ROOM} &&
610             lev->\hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} == \hyperlink{display_8h_a77e69d3b11c3296576f840c9d11ae8fb}{cmap\_to\_glyph}(\hyperlink{rm_8h_a1cbe62db5502d1ece3d5cce996ff8164}{S\_room}) && !lev->waslit)
611         \hyperlink{display_8c_a60d3cfb0df75b80c36125ce154da217f}{show\_glyph}(x,y, lev->\hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} = \hyperlink{display_8h_a77e69d3b11c3296576f840c9d11ae8fb}{cmap\_to\_glyph}(
      \hyperlink{rm_8h_a342b42eb0fe3236adbc700b6e725d781}{S\_stone}));
612     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (lev->\hyperlink{structrm_aa144ade377ba175f037c4e637329d4dc}{typ} == \hyperlink{rm_8h_aeffd57885964c3a9a5c3ce0f81c06339}{CORR} &&
613             lev->\hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} == \hyperlink{display_8h_a77e69d3b11c3296576f840c9d11ae8fb}{cmap\_to\_glyph}(\hyperlink{rm_8h_a399754b07fa79009fd0354abaf190e89}{S\_litcorr}) && !lev->waslit)
614         \hyperlink{display_8c_a60d3cfb0df75b80c36125ce154da217f}{show\_glyph}(x,y, lev->\hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} = \hyperlink{display_8h_a77e69d3b11c3296576f840c9d11ae8fb}{cmap\_to\_glyph}(
      \hyperlink{rm_8h_a3d0d27bd7691a72bc0b278df4d82ca02}{S\_corr}));
615     \}
616     \textcolor{comment}{/* draw monster on top if we can sense it */}
617     \textcolor{keywordflow}{if} ((x != \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux} || y != \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy}) && (mon = \hyperlink{rm_8h_a4d8dddf3df3fad65478980d2c8cbf53c}{m\_at}(x,y)) && \hyperlink{display_8h_a13881a5dc42ea2076abd050773eee913}{sensemon}(mon))
618     \hyperlink{display_8c_a2b2101c4c3468f56cd02c1e7538b9e55}{display\_monster}(x, y, mon,
619         (\hyperlink{display_8h_aba621a9a510ebdf4069498e6715444d1}{tp\_sensemon}(mon) || \hyperlink{hack_8h_a06971ec894f970d371a9cc7afc83e72c}{MATCH\_WARN\_OF\_MON}(mon)) ? 
      \hyperlink{display_8c_a740e7b20ee4f653517c3152d5d689761}{PHYSICALLY\_SEEN} : \hyperlink{display_8c_a6a3a39d7ab88e59eb6d2a8b034890075}{DETECTED},
620         \hyperlink{display_8c_ae7e57543d287e1319134a08bf793a281}{is\_worm\_tail}(mon));
621 \}
\end{DoxyCode}
\hypertarget{display_8c_a47cdbc8092c02ed856defd22a0952aeb}{\index{display.\+c@{display.\+c}!flush\+\_\+screen@{flush\+\_\+screen}}
\index{flush\+\_\+screen@{flush\+\_\+screen}!display.\+c@{display.\+c}}
\subsubsection[{flush\+\_\+screen}]{\setlength{\rightskip}{0pt plus 5cm}void flush\+\_\+screen (
\begin{DoxyParamCaption}
\item[{int}]{cursor\+\_\+on\+\_\+u}
\end{DoxyParamCaption}
)}}\label{display_8c_a47cdbc8092c02ed856defd22a0952aeb}


Definition at line 1340 of file display.\+c.



References flag\+::botl, flag\+::botlx, curs, display\+\_\+nhwindow, F\+A\+L\+S\+E, flags, gbuf\+\_\+entry\+::glyph, gbuf\+\_\+entry\+::new, print\+\_\+glyph, reset\+\_\+glyph\+\_\+bbox, R\+O\+W\+N\+O, u, you\+::ux, you\+::uy, and W\+I\+N\+\_\+\+M\+A\+P.



Referenced by check\+\_\+here(), curs\+\_\+on\+\_\+u(), do\+\_\+mapping(), do\+\_\+vicinity\+\_\+map(), hurtle\+\_\+step(), mkinvokearea(), shieldeff(), tmp\+\_\+at(), and X11\+\_\+getlin().


\begin{DoxyCode}
1342 \{
1343     \textcolor{comment}{/* Prevent infinite loops on errors:}
1344 \textcolor{comment}{     *      flush\_screen->print\_glyph->impossible->pline->flush\_screen}
1345 \textcolor{comment}{     */}
1346     \textcolor{keyword}{static}   \textcolor{keywordtype}{boolean} flushing = 0;
1347     \textcolor{keyword}{static}   \textcolor{keywordtype}{boolean} delay\_flushing = 0;
1348     \textcolor{keyword}{register} \textcolor{keywordtype}{int} x,y;
1349 
1350     \textcolor{keywordflow}{if} (cursor\_on\_u == -1) delay\_flushing = !delay\_flushing;
1351     \textcolor{keywordflow}{if} (delay\_flushing) \textcolor{keywordflow}{return};
1352     \textcolor{keywordflow}{if} (flushing) \textcolor{keywordflow}{return};   \textcolor{comment}{/* if already flushing then return */}
1353     flushing = 1;
1354 
1355     \textcolor{keywordflow}{for} (y = 0; y < \hyperlink{global_8h_a9cce134868d97b23c35bcf1ff4a343d8}{ROWNO}; y++) \{
1356     \textcolor{keyword}{register} \hyperlink{structgbuf__entry}{gbuf\_entry} *gptr = &\hyperlink{display_8c_af05984f18ee6d5c6573afb061376c52c}{gbuf}[y][x = \hyperlink{display_8c_add164e66f147d7fd33fd941e4f445437}{gbuf\_start}[y]];
1357     \textcolor{keywordflow}{for} (; x <= \hyperlink{display_8c_a456a879e037f6746dea8b5f7cad4b13d}{gbuf\_stop}[y]; gptr++, x++)
1358         \textcolor{keywordflow}{if} (gptr->\hyperlink{structgbuf__entry_a50390314322d581c9b80535ecca7d5c1}{new}) \{
1359         \hyperlink{winprocs_8h_a1ac4b20f9c220790e17ebeb3c220976c}{print\_glyph}(\hyperlink{decl_8h_afa1f7dd312c4c1b72afe3d2c8c2af691}{WIN\_MAP},x,y,gptr->\hyperlink{structgbuf__entry_a7fdd281e49e8feac519137fb4eb2be05}{glyph});
1360         gptr->\hyperlink{structgbuf__entry_a50390314322d581c9b80535ecca7d5c1}{new} = 0;
1361         \}
1362     \}
1363 
1364     \textcolor{keywordflow}{if} (cursor\_on\_u) \hyperlink{winprocs_8h_aa05861c1c269bc08d1ee7fcc3c9b85c5}{curs}(\hyperlink{decl_8h_afa1f7dd312c4c1b72afe3d2c8c2af691}{WIN\_MAP}, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux},\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy}); \textcolor{comment}{/* move cursor to the hero */}
1365     \hyperlink{winprocs_8h_ac8e74d03fbb65b9f5651e63d79bebc60}{display\_nhwindow}(\hyperlink{decl_8h_afa1f7dd312c4c1b72afe3d2c8c2af691}{WIN\_MAP}, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE});
1366     \hyperlink{display_8c_af96d71995eda0c4d54b2d1eb2ea278ef}{reset\_glyph\_bbox}();
1367     flushing = 0;
1368     \textcolor{keywordflow}{if}(\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a51f16d01a910b52fdf0c05a44739f7d8}{botl} || \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a4f41387168e1a58d95db3f635eec780e}{botlx}) bot();
1369 \}
\end{DoxyCode}
\hypertarget{display_8c_ad3c1a65cc5e35e90067cb04eaf397d8a}{\index{display.\+c@{display.\+c}!glyph\+\_\+at@{glyph\+\_\+at}}
\index{glyph\+\_\+at@{glyph\+\_\+at}!display.\+c@{display.\+c}}
\subsubsection[{glyph\+\_\+at}]{\setlength{\rightskip}{0pt plus 5cm}int glyph\+\_\+at (
\begin{DoxyParamCaption}
\item[{{\bf xchar}}]{x, }
\item[{{\bf xchar}}]{y}
\end{DoxyParamCaption}
)}}\label{display_8c_ad3c1a65cc5e35e90067cb04eaf397d8a}


Definition at line 1532 of file display.\+c.



References cmap\+\_\+to\+\_\+glyph, C\+O\+L\+N\+O, gbuf\+\_\+entry\+::glyph, R\+O\+W\+N\+O, and S\+\_\+room.



Referenced by attack\+\_\+checks(), check\+\_\+map\+\_\+spot(), do\+\_\+look(), ghack\+\_\+map\+\_\+print\+\_\+glyph(), lookat(), and see\+\_\+traps().


\begin{DoxyCode}
1534 \{
1535     \textcolor{keywordflow}{if}(x < 0 || y < 0 || x >= \hyperlink{global_8h_a308dbfcc29f5a427c0315f3cbf03c3ed}{COLNO} || y >= \hyperlink{global_8h_a9cce134868d97b23c35bcf1ff4a343d8}{ROWNO})
1536     \textcolor{keywordflow}{return} \hyperlink{display_8h_a77e69d3b11c3296576f840c9d11ae8fb}{cmap\_to\_glyph}(\hyperlink{rm_8h_a1cbe62db5502d1ece3d5cce996ff8164}{S\_room});            \textcolor{comment}{/* XXX */}
1537     \textcolor{keywordflow}{return} \hyperlink{display_8c_af05984f18ee6d5c6573afb061376c52c}{gbuf}[y][x].\hyperlink{structgbuf__entry_a7fdd281e49e8feac519137fb4eb2be05}{glyph};
1538 \}
\end{DoxyCode}
\hypertarget{display_8c_ad4037a0d6b3771e04ffab76d8dc25a65}{\index{display.\+c@{display.\+c}!magic\+\_\+map\+\_\+background@{magic\+\_\+map\+\_\+background}}
\index{magic\+\_\+map\+\_\+background@{magic\+\_\+map\+\_\+background}!display.\+c@{display.\+c}}
\subsubsection[{magic\+\_\+map\+\_\+background}]{\setlength{\rightskip}{0pt plus 5cm}void magic\+\_\+map\+\_\+background (
\begin{DoxyParamCaption}
\item[{{\bf xchar}}]{x, }
\item[{{\bf xchar}}]{y, }
\item[{int}]{show}
\end{DoxyParamCaption}
)}}\label{display_8c_ad4037a0d6b3771e04ffab76d8dc25a65}


Definition at line 168 of file display.\+c.



References back\+\_\+to\+\_\+glyph(), cansee, cmap\+\_\+to\+\_\+glyph, C\+O\+R\+R, dlevel\+\_\+t\+::flags, rm\+::glyph, level, levl, R\+O\+O\+M, S\+\_\+corr, S\+\_\+litcorr, S\+\_\+room, S\+\_\+stone, show\+\_\+glyph(), and rm\+::typ.



Referenced by findone(), and show\+\_\+map\+\_\+spot().


\begin{DoxyCode}
171 \{
172     \textcolor{keywordtype}{int} glyph = \hyperlink{display_8c_ae101ca833f1201ac08aee7ce16961449}{back\_to\_glyph}(x,y);    \textcolor{comment}{/* assumes hero can see x,y */}
173     \textcolor{keyword}{struct }\hyperlink{structrm}{rm} *lev = &\hyperlink{rm_8h_a8cd681fba60fdedbabfd71a0b4bbfc00}{levl}[x][y];
174 
175     \textcolor{comment}{/*}
176 \textcolor{comment}{     * Correct for out of sight lit corridors and rooms that the hero}
177 \textcolor{comment}{     * doesn't remember as lit.}
178 \textcolor{comment}{     */}
179     \textcolor{keywordflow}{if} (!\hyperlink{vision_8h_a857efc720262bc13a9e4b4bcbb079b5c}{cansee}(x,y) && !lev->waslit) \{
180     \textcolor{comment}{/* Floor spaces are dark if unlit.  Corridors are dark if unlit. */}
181     \textcolor{keywordflow}{if} (lev->\hyperlink{structrm_aa144ade377ba175f037c4e637329d4dc}{typ} == \hyperlink{rm_8h_ae635489e987ae17a3bf884376cc2fe34}{ROOM} && glyph == \hyperlink{display_8h_a77e69d3b11c3296576f840c9d11ae8fb}{cmap\_to\_glyph}(\hyperlink{rm_8h_a1cbe62db5502d1ece3d5cce996ff8164}{S\_room}))
182         glyph = \hyperlink{display_8h_a77e69d3b11c3296576f840c9d11ae8fb}{cmap\_to\_glyph}(\hyperlink{rm_8h_a342b42eb0fe3236adbc700b6e725d781}{S\_stone});
183     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (lev->\hyperlink{structrm_aa144ade377ba175f037c4e637329d4dc}{typ} == \hyperlink{rm_8h_aeffd57885964c3a9a5c3ce0f81c06339}{CORR} && glyph == \hyperlink{display_8h_a77e69d3b11c3296576f840c9d11ae8fb}{cmap\_to\_glyph}(
      \hyperlink{rm_8h_a399754b07fa79009fd0354abaf190e89}{S\_litcorr}))
184         glyph = \hyperlink{display_8h_a77e69d3b11c3296576f840c9d11ae8fb}{cmap\_to\_glyph}(\hyperlink{rm_8h_a3d0d27bd7691a72bc0b278df4d82ca02}{S\_corr});
185     \}
186     \textcolor{keywordflow}{if} (\hyperlink{rm_8h_a721c99bfa099c4225215ba102e91fa39}{level}.\hyperlink{structdlevel__t_ad52c01d015e2456cdae3300848115916}{flags}.hero\_memory)
187     lev->\hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} = \hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph};
188     \textcolor{keywordflow}{if} (show) \hyperlink{display_8c_a60d3cfb0df75b80c36125ce154da217f}{show\_glyph}(x,y, glyph);
189 \}
\end{DoxyCode}
\hypertarget{display_8c_abe2bc3c09d117e9c709ac1c01d73c8fb}{\index{display.\+c@{display.\+c}!map\+\_\+background@{map\+\_\+background}}
\index{map\+\_\+background@{map\+\_\+background}!display.\+c@{display.\+c}}
\subsubsection[{map\+\_\+background}]{\setlength{\rightskip}{0pt plus 5cm}void map\+\_\+background (
\begin{DoxyParamCaption}
\item[{{\bf xchar}}]{x, }
\item[{{\bf xchar}}]{y, }
\item[{int}]{show}
\end{DoxyParamCaption}
)}}\label{display_8c_abe2bc3c09d117e9c709ac1c01d73c8fb}


Definition at line 213 of file display.\+c.



References back\+\_\+to\+\_\+glyph(), dlevel\+\_\+t\+::flags, rm\+::glyph, level, levl, and show\+\_\+glyph().



Referenced by feel\+\_\+location(), sokoban\+\_\+detect(), and unmap\+\_\+object().


\begin{DoxyCode}
216 \{
217     \textcolor{keyword}{register} \textcolor{keywordtype}{int} \hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} = \hyperlink{display_8c_ae101ca833f1201ac08aee7ce16961449}{back\_to\_glyph}(x,y);
218 
219     \textcolor{keywordflow}{if} (\hyperlink{rm_8h_a721c99bfa099c4225215ba102e91fa39}{level}.\hyperlink{structdlevel__t_ad52c01d015e2456cdae3300848115916}{flags}.hero\_memory)
220     \hyperlink{rm_8h_a8cd681fba60fdedbabfd71a0b4bbfc00}{levl}[x][y].glyph = \hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph};
221     \textcolor{keywordflow}{if} (show) \hyperlink{display_8c_a60d3cfb0df75b80c36125ce154da217f}{show\_glyph}(x,y, glyph);
222 \}
\end{DoxyCode}
\hypertarget{display_8c_add21782d0389d23fbc5a470ef91d77e9}{\index{display.\+c@{display.\+c}!map\+\_\+invisible@{map\+\_\+invisible}}
\index{map\+\_\+invisible@{map\+\_\+invisible}!display.\+c@{display.\+c}}
\subsubsection[{map\+\_\+invisible}]{\setlength{\rightskip}{0pt plus 5cm}void map\+\_\+invisible (
\begin{DoxyParamCaption}
\item[{{\bf xchar}}]{x, }
\item[{{\bf xchar}}]{y}
\end{DoxyParamCaption}
)}}\label{display_8c_add21782d0389d23fbc5a470ef91d77e9}


Definition at line 272 of file display.\+c.



References dlevel\+\_\+t\+::flags, G\+L\+Y\+P\+H\+\_\+\+I\+N\+V\+I\+S\+I\+B\+L\+E, level, levl, show\+\_\+glyph(), u, you\+::ux, and you\+::uy.



Referenced by attack(), attack\+\_\+checks(), dokick(), dosearch0(), findone(), flash\+\_\+hits\+\_\+mon(), mbhit(), mbhitm(), newsym(), use\+\_\+offensive(), and you\+\_\+aggravate().


\begin{DoxyCode}
274 \{
275     \textcolor{keywordflow}{if} (x != \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux} || y != \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy}) \{ \textcolor{comment}{/* don't display I at hero's location */}
276     \textcolor{keywordflow}{if} (\hyperlink{rm_8h_a721c99bfa099c4225215ba102e91fa39}{level}.\hyperlink{structdlevel__t_ad52c01d015e2456cdae3300848115916}{flags}.hero\_memory)
277         \hyperlink{rm_8h_a8cd681fba60fdedbabfd71a0b4bbfc00}{levl}[x][y].glyph = \hyperlink{display_8h_a6a5526c0553046a9df8a3cc7e1c862b8}{GLYPH\_INVISIBLE};
278     \hyperlink{display_8c_a60d3cfb0df75b80c36125ce154da217f}{show\_glyph}(x, y, \hyperlink{display_8h_a6a5526c0553046a9df8a3cc7e1c862b8}{GLYPH\_INVISIBLE});
279     \}
280 \}
\end{DoxyCode}
\hypertarget{display_8c_a9675dacd157a137b805dd9261524d7a8}{\index{display.\+c@{display.\+c}!map\+\_\+location@{map\+\_\+location}}
\index{map\+\_\+location@{map\+\_\+location}!display.\+c@{display.\+c}}
\subsubsection[{map\+\_\+location}]{\setlength{\rightskip}{0pt plus 5cm}void map\+\_\+location (
\begin{DoxyParamCaption}
\item[{int}]{x, }
\item[{int}]{y, }
\item[{int}]{show}
\end{DoxyParamCaption}
)}}\label{display_8c_a9675dacd157a137b805dd9261524d7a8}


Definition at line 337 of file display.\+c.



References \+\_\+map\+\_\+location.



Referenced by start\+\_\+engulf().


\begin{DoxyCode}
339 \{
340     \hyperlink{display_8c_a890077edc6bf96b569530dca37b730de}{\_map\_location}(x,y,show);
341 \}
\end{DoxyCode}
\hypertarget{display_8c_a5c4fd462bd2806ee7e870039c75022e4}{\index{display.\+c@{display.\+c}!map\+\_\+object@{map\+\_\+object}}
\index{map\+\_\+object@{map\+\_\+object}!display.\+c@{display.\+c}}
\subsubsection[{map\+\_\+object}]{\setlength{\rightskip}{0pt plus 5cm}void map\+\_\+object (
\begin{DoxyParamCaption}
\item[{struct {\bf obj} $\ast$}]{obj, }
\item[{int}]{show}
\end{DoxyParamCaption}
)}}\label{display_8c_a5c4fd462bd2806ee7e870039c75022e4}


Definition at line 250 of file display.\+c.



References dlevel\+\_\+t\+::flags, rm\+::glyph, level, levl, obj\+\_\+to\+\_\+glyph, and show\+\_\+glyph().



Referenced by display\+\_\+monster(), feel\+\_\+location(), food\+\_\+detect(), gold\+\_\+detect(), move\+\_\+bc(), object\+\_\+detect(), sense\+\_\+trap(), and sokoban\+\_\+detect().


\begin{DoxyCode}
253 \{
254     \textcolor{keyword}{register} \textcolor{keywordtype}{int} x = obj->\hyperlink{structobj_aac936c7da6b4f1eca0a94f75c242e5cc}{ox}, y = obj->\hyperlink{structobj_a72dace5e678b56ae42c3fb19292e5839}{oy};
255     \textcolor{keyword}{register} \textcolor{keywordtype}{int} \hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} = \hyperlink{display_8h_a14ef77de0b1bfde06713088d7d9f53e8}{obj\_to\_glyph}(obj);
256 
257     \textcolor{keywordflow}{if} (\hyperlink{rm_8h_a721c99bfa099c4225215ba102e91fa39}{level}.\hyperlink{structdlevel__t_ad52c01d015e2456cdae3300848115916}{flags}.hero\_memory)
258     \hyperlink{rm_8h_a8cd681fba60fdedbabfd71a0b4bbfc00}{levl}[x][y].glyph = \hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph};
259     \textcolor{keywordflow}{if} (show) \hyperlink{display_8c_a60d3cfb0df75b80c36125ce154da217f}{show\_glyph}(x, y, glyph);
260 \}
\end{DoxyCode}
\hypertarget{display_8c_ac74653df91c3a6b4f9c35d371bb55e6e}{\index{display.\+c@{display.\+c}!map\+\_\+trap@{map\+\_\+trap}}
\index{map\+\_\+trap@{map\+\_\+trap}!display.\+c@{display.\+c}}
\subsubsection[{map\+\_\+trap}]{\setlength{\rightskip}{0pt plus 5cm}void map\+\_\+trap (
\begin{DoxyParamCaption}
\item[{struct {\bf trap} $\ast$}]{trap, }
\item[{int}]{show}
\end{DoxyParamCaption}
)}}\label{display_8c_ac74653df91c3a6b4f9c35d371bb55e6e}


Definition at line 231 of file display.\+c.



References dlevel\+\_\+t\+::flags, rm\+::glyph, level, levl, show\+\_\+glyph(), and trap\+\_\+to\+\_\+glyph.



Referenced by find\+\_\+trap(), sense\+\_\+trap(), sokoban\+\_\+detect(), and unmap\+\_\+object().


\begin{DoxyCode}
234 \{
235     \textcolor{keyword}{register} \textcolor{keywordtype}{int} x = trap->\hyperlink{structtrap_a8a3d31070852119ee66c8662b0c883c7}{tx}, y = trap->\hyperlink{structtrap_a579c4f0e2d31e3657c930d6741737b20}{ty};
236     \textcolor{keyword}{register} \textcolor{keywordtype}{int} \hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} = \hyperlink{display_8h_a29a24762d8eb2c98d7b90c0e7d294c7f}{trap\_to\_glyph}(trap);
237 
238     \textcolor{keywordflow}{if} (\hyperlink{rm_8h_a721c99bfa099c4225215ba102e91fa39}{level}.\hyperlink{structdlevel__t_ad52c01d015e2456cdae3300848115916}{flags}.hero\_memory)
239     \hyperlink{rm_8h_a8cd681fba60fdedbabfd71a0b4bbfc00}{levl}[x][y].glyph = \hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph};
240     \textcolor{keywordflow}{if} (show) \hyperlink{display_8c_a60d3cfb0df75b80c36125ce154da217f}{show\_glyph}(x, y, glyph);
241 \}
\end{DoxyCode}
\hypertarget{display_8c_a185c6ad6e4c5a6be26a371b9aa17c32e}{\index{display.\+c@{display.\+c}!newsym@{newsym}}
\index{newsym@{newsym}!display.\+c@{display.\+c}}
\subsubsection[{newsym}]{\setlength{\rightskip}{0pt plus 5cm}void newsym (
\begin{DoxyParamCaption}
\item[{int}]{x, }
\item[{int}]{y}
\end{DoxyParamCaption}
)}}\label{display_8c_a185c6ad6e4c5a6be26a371b9aa17c32e}


Definition at line 629 of file display.\+c.



References \+\_\+map\+\_\+location, A\+C\+C\+E\+S\+S\+I\+B\+L\+E, B\+E\+A\+R\+\_\+\+T\+R\+A\+P, cansee, cmap\+\_\+to\+\_\+glyph, C\+O\+R\+R, Detect\+\_\+monsters, D\+E\+T\+E\+C\+T\+E\+D, display\+\_\+monster(), display\+\_\+self, display\+\_\+warning(), feel\+\_\+location(), rm\+::glyph, glyph\+\_\+is\+\_\+invisible, in\+\_\+mklev, Is\+\_\+waterlevel, is\+\_\+worm\+\_\+tail, levl, m\+\_\+at, map\+\_\+invisible(), M\+A\+T\+C\+H\+\_\+\+W\+A\+R\+N\+\_\+\+O\+F\+\_\+\+M\+O\+N, mon\+\_\+visible, mon\+\_\+warning, N\+O\+\_\+\+T\+R\+A\+P, N\+U\+L\+L, P\+H\+Y\+S\+I\+C\+A\+L\+L\+Y\+\_\+\+S\+E\+E\+N, P\+I\+T, R\+O\+O\+M, S\+\_\+corr, S\+\_\+litcorr, S\+\_\+room, S\+\_\+stone, See\+\_\+invisible, see\+\_\+with\+\_\+infrared, senseself, show\+\_\+glyph(), show\+\_\+region(), S\+P\+I\+K\+E\+D\+\_\+\+P\+I\+T, tp\+\_\+sensemon, T\+R\+U\+E, rm\+::typ, u, Underwater, you\+::ux, you\+::uy, you\+::uz, visible\+\_\+region\+\_\+at(), and W\+E\+B.



Referenced by add\+\_\+region(), attack\+\_\+checks(), charm\+\_\+snakes(), clear\+\_\+bypasses(), demon\+\_\+talk(), dipfountain(), do\+\_\+earthquake(), dofindgem(), dokick(), dosacrifice(), dosearch0(), dosit(), dotele(), drag\+\_\+ball(), drinkfountain(), drop\+\_\+ball(), dryup(), end\+\_\+engulf(), find\+\_\+trap(), findone(), food\+\_\+detect(), gold\+\_\+detect(), gush(), hurtle\+\_\+step(), kick\+\_\+monster(), kick\+\_\+object(), kickdmg(), level\+\_\+tele\+\_\+trap(), m\+\_\+lose\+\_\+armor(), mhurtle\+\_\+step(), mkinvokearea(), mkinvpos(), mon\+\_\+set\+\_\+minvis(), move\+\_\+bc(), movebubbles(), mv\+\_\+bubble(), object\+\_\+detect(), openone(), pick\+\_\+obj(), pickup(), place\+\_\+worm\+\_\+tail\+\_\+randomly(), remove\+\_\+region(), remove\+\_\+worm(), rloc\+\_\+to(), rloco(), savebones(), see\+\_\+monsters(), see\+\_\+objects(), see\+\_\+traps(), see\+\_\+wsegs(), set\+\_\+bc(), shieldeff(), ship\+\_\+object(), show\+\_\+map\+\_\+spot(), tele\+\_\+trap(), teleds(), throw\+\_\+gold(), throwit(), tmp\+\_\+at(), toss\+\_\+wsegs(), trap\+\_\+detect(), under\+\_\+ground(), under\+\_\+water(), unplacebc(), update\+\_\+mon\+\_\+intrinsics(), use\+\_\+defensive(), use\+\_\+misc(), use\+\_\+offensive(), vision\+\_\+recalc(), worm\+\_\+move(), and you\+\_\+aggravate().


\begin{DoxyCode}
631 \{
632     \textcolor{keyword}{register} \textcolor{keyword}{struct }\hyperlink{structmonst}{monst} *mon;
633     \textcolor{keyword}{register} \textcolor{keyword}{struct }\hyperlink{structrm}{rm} *lev = &(\hyperlink{rm_8h_a8cd681fba60fdedbabfd71a0b4bbfc00}{levl}[x][y]);
634     \textcolor{keyword}{register} \textcolor{keywordtype}{int} see\_it;
635     \textcolor{keyword}{register} \hyperlink{global_8h_a2043b7d01ce89f4ee2fa6c345a752d32}{xchar} worm\_tail;
636 
637     \textcolor{keywordflow}{if} (\hyperlink{decl_8h_abb694ef5acb9945ca69679a8360df51a}{in\_mklev}) \textcolor{keywordflow}{return};
638 
639     \textcolor{comment}{/* only permit updating the hero when swallowed */}
640     \textcolor{keywordflow}{if} (\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.uswallow) \{
641     \textcolor{keywordflow}{if} (x == \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux} && y == \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy}) \hyperlink{display_8h_aa4ec7eb1f23db38f5e6bcbab8cb0c5e4}{display\_self}();
642     \textcolor{keywordflow}{return};
643     \}
644     \textcolor{keywordflow}{if} (\hyperlink{youprop_8h_a2eb59bdcba2c368fefd253bfcdaa3673}{Underwater} && !\hyperlink{dungeon_8h_a9fd7b21db47607a73332aa75ba8f4832}{Is\_waterlevel}(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz})) \{
645     \textcolor{comment}{/* don't do anything unless (x,y) is an adjacent underwater position */}
646     \textcolor{keywordtype}{int} dx, dy;
647     \textcolor{keywordflow}{if} (!is\_pool(x,y)) \textcolor{keywordflow}{return};
648     dx = x - \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux};   \textcolor{keywordflow}{if} (dx < 0) dx = -dx;
649     dy = y - \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy};   \textcolor{keywordflow}{if} (dy < 0) dy = -dy;
650     \textcolor{keywordflow}{if} (dx > 1 || dy > 1) \textcolor{keywordflow}{return};
651     \}
652 
653     \textcolor{comment}{/* Can physically see the location. */}
654     \textcolor{keywordflow}{if} (\hyperlink{vision_8h_a857efc720262bc13a9e4b4bcbb079b5c}{cansee}(x,y)) \{
655         \hyperlink{structNhRegion}{NhRegion}* \hyperlink{structreg}{reg} = \hyperlink{region_8c_ad2448764df1a831e33023c09f85b5efb}{visible\_region\_at}(x,y);
656     \textcolor{comment}{/*}
657 \textcolor{comment}{     * Don't use templit here:  E.g.}
658 \textcolor{comment}{     *}
659 \textcolor{comment}{     *  lev->waslit = !!(lev->lit || templit(x,y));}
660 \textcolor{comment}{     *}
661 \textcolor{comment}{     * Otherwise we have the "light pool" problem, where non-permanently}
662 \textcolor{comment}{     * lit areas just out of sight stay remembered as lit.  They should}
663 \textcolor{comment}{     * re-darken.}
664 \textcolor{comment}{     *}
665 \textcolor{comment}{     * Perhaps ALL areas should revert to their "unlit" look when}
666 \textcolor{comment}{     * out of sight.}
667 \textcolor{comment}{     */}
668     lev->waslit = (lev->lit!=0);    \textcolor{comment}{/* remember lit condition */}
669 
670     \textcolor{keywordflow}{if} (reg != \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} && \hyperlink{rm_8h_a66b14395f9e994a4539968352565bc38}{ACCESSIBLE}(lev->\hyperlink{structrm_aa144ade377ba175f037c4e637329d4dc}{typ})) \{
671         \hyperlink{region_8c_a7174f218af0821b5b14b871be883a6ac}{show\_region}(reg,x,y);
672         \textcolor{keywordflow}{return};
673     \}
674     \textcolor{keywordflow}{if} (x == \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux} && y == \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy}) \{
675         \textcolor{keywordflow}{if} (\hyperlink{display_8h_a52034fbad768549b2bfc598e6358019d}{senseself}()) \{
676         \hyperlink{display_8c_a890077edc6bf96b569530dca37b730de}{\_map\_location}(x,y,0);  \textcolor{comment}{/* map *under* self */}
677         \hyperlink{display_8h_aa4ec7eb1f23db38f5e6bcbab8cb0c5e4}{display\_self}();
678         \} \textcolor{keywordflow}{else}
679         \textcolor{comment}{/* we can see what is there */}
680         \hyperlink{display_8c_a890077edc6bf96b569530dca37b730de}{\_map\_location}(x,y,1);
681     \}
682     \textcolor{keywordflow}{else} \{
683         mon = \hyperlink{rm_8h_a4d8dddf3df3fad65478980d2c8cbf53c}{m\_at}(x,y);
684         worm\_tail = \hyperlink{display_8c_ae7e57543d287e1319134a08bf793a281}{is\_worm\_tail}(mon);
685         see\_it = mon && (worm\_tail
686         ? (!mon->minvis || \hyperlink{youprop_8h_ae00ea7702fa1870643d604364b0640c7}{See\_invisible})
687         : (\hyperlink{display_8h_ad69b6021d6de1f0a37fdbda54bc38bbf}{mon\_visible}(mon)) || \hyperlink{display_8h_aba621a9a510ebdf4069498e6715444d1}{tp\_sensemon}(mon) || 
      \hyperlink{hack_8h_a06971ec894f970d371a9cc7afc83e72c}{MATCH\_WARN\_OF\_MON}(mon));
688         \textcolor{keywordflow}{if} (mon && (see\_it || (!worm\_tail && \hyperlink{youprop_8h_a6837901e3b3c547cdea44d8504dda753}{Detect\_monsters}))) \{
689         \textcolor{keywordflow}{if} (mon->mtrapped) \{
690             \textcolor{keyword}{struct }\hyperlink{structtrap}{trap} *\hyperlink{structtrap}{trap} = t\_at(\hyperlink{structtrap_aed25254cf556e3eae09dd98576d98d45}{x}, \hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y});
691             \textcolor{keywordtype}{int} tt = trap ? trap->ttyp : \hyperlink{trap_8h_af68fb09f448cca56bc40378990469a58}{NO\_TRAP};
692 
693             \textcolor{comment}{/* if monster is in a physical trap, you see the trap too */}
694             \textcolor{keywordflow}{if} (tt == \hyperlink{trap_8h_a8e0f0f3d80f6253a98c39fe9e9ac1a1f}{BEAR\_TRAP} || tt == \hyperlink{trap_8h_af181c9e6602b6432a0bf1a9243808968}{PIT} ||
695             tt == \hyperlink{trap_8h_a813fa80e09de5d455e2af3743a95bad9}{SPIKED\_PIT} ||tt == \hyperlink{trap_8h_adea8244201fecbc9bef08ab08e99cdf3}{WEB}) \{
696             trap->tseen = \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
697             \}
698         \}
699         \hyperlink{display_8c_a890077edc6bf96b569530dca37b730de}{\_map\_location}(\hyperlink{structtrap_aed25254cf556e3eae09dd98576d98d45}{x},\hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y},0);    \textcolor{comment}{/* map under the monster */}
700         \textcolor{comment}{/* also gets rid of any invisibility glyph */}
701         \hyperlink{display_8c_a2b2101c4c3468f56cd02c1e7538b9e55}{display\_monster}(\hyperlink{structtrap_aed25254cf556e3eae09dd98576d98d45}{x}, \hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y}, mon, see\_it ? \hyperlink{display_8c_a740e7b20ee4f653517c3152d5d689761}{PHYSICALLY\_SEEN} : 
      \hyperlink{display_8c_a6a3a39d7ab88e59eb6d2a8b034890075}{DETECTED}, worm\_tail);
702         \}
703         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (mon && \hyperlink{display_8h_a0039b777fa34c7612336965a77e6bc30}{mon\_warning}(mon) && !\hyperlink{display_8c_ae7e57543d287e1319134a08bf793a281}{is\_worm\_tail}(mon))
704             \hyperlink{display_8c_a1637cf77d1a360591ebfb5763286fe86}{display\_warning}(mon);
705         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{display_8h_aab760a0bc2c5bad8dbfe7102628dafc6}{glyph\_is\_invisible}(\hyperlink{rm_8h_a8cd681fba60fdedbabfd71a0b4bbfc00}{levl}[\hyperlink{structtrap_aed25254cf556e3eae09dd98576d98d45}{x}][\hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y}].glyph))
706         \hyperlink{display_8c_add21782d0389d23fbc5a470ef91d77e9}{map\_invisible}(\hyperlink{structtrap_aed25254cf556e3eae09dd98576d98d45}{x}, \hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y});
707         \textcolor{keywordflow}{else}
708         \hyperlink{display_8c_a890077edc6bf96b569530dca37b730de}{\_map\_location}(\hyperlink{structtrap_aed25254cf556e3eae09dd98576d98d45}{x},\hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y},1);    \textcolor{comment}{/* map the location */}
709     \}
710     \}
711 
712     \textcolor{comment}{/* Can't see the location. */}
713     \textcolor{keywordflow}{else} \{
714     \textcolor{keywordflow}{if} (\hyperlink{structtrap_aed25254cf556e3eae09dd98576d98d45}{x} == \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux} && \hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y} == \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy}) \{
715         \hyperlink{display_8c_aeec8e3135efbd85fa3a197a9f8f61d96}{feel\_location}(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux}, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy});       \textcolor{comment}{/* forces an update */}
716 
717         \textcolor{keywordflow}{if} (\hyperlink{display_8h_a52034fbad768549b2bfc598e6358019d}{senseself}()) \hyperlink{display_8h_aa4ec7eb1f23db38f5e6bcbab8cb0c5e4}{display\_self}();
718     \}
719     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((mon = \hyperlink{rm_8h_a4d8dddf3df3fad65478980d2c8cbf53c}{m\_at}(\hyperlink{structtrap_aed25254cf556e3eae09dd98576d98d45}{x},\hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y}))
720         && ((see\_it = (\hyperlink{display_8h_aba621a9a510ebdf4069498e6715444d1}{tp\_sensemon}(mon) || \hyperlink{hack_8h_a06971ec894f970d371a9cc7afc83e72c}{MATCH\_WARN\_OF\_MON}(mon)
721                     || (\hyperlink{display_8h_aca54af1de4d5a3dafa947f481eea6a6a}{see\_with\_infrared}(mon) && \hyperlink{display_8h_ad69b6021d6de1f0a37fdbda54bc38bbf}{mon\_visible}(mon))))
722             || \hyperlink{youprop_8h_a6837901e3b3c547cdea44d8504dda753}{Detect\_monsters})
723         && !\hyperlink{display_8c_ae7e57543d287e1319134a08bf793a281}{is\_worm\_tail}(mon)) \{
724         \textcolor{comment}{/* Monsters are printed every time. */}
725         \textcolor{comment}{/* This also gets rid of any invisibility glyph */}
726         \hyperlink{display_8c_a2b2101c4c3468f56cd02c1e7538b9e55}{display\_monster}(\hyperlink{structtrap_aed25254cf556e3eae09dd98576d98d45}{x}, \hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y}, mon, see\_it ? 0 : \hyperlink{display_8c_a6a3a39d7ab88e59eb6d2a8b034890075}{DETECTED}, 0);
727     \}
728     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((mon = \hyperlink{rm_8h_a4d8dddf3df3fad65478980d2c8cbf53c}{m\_at}(\hyperlink{structtrap_aed25254cf556e3eae09dd98576d98d45}{x},\hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y})) && \hyperlink{display_8h_a0039b777fa34c7612336965a77e6bc30}{mon\_warning}(mon) &&
729          !\hyperlink{display_8c_ae7e57543d287e1319134a08bf793a281}{is\_worm\_tail}(mon)) \{
730             \hyperlink{display_8c_a1637cf77d1a360591ebfb5763286fe86}{display\_warning}(mon);
731     \}       
732 
733     \textcolor{comment}{/*}
734 \textcolor{comment}{     * If the location is remembered as being both dark (waslit is false)}
735 \textcolor{comment}{     * and lit (glyph is a lit room or lit corridor) then it was either:}
736 \textcolor{comment}{     *}
737 \textcolor{comment}{     *  (1) A dark location that the hero could see through night}
738 \textcolor{comment}{     *      vision.}
739 \textcolor{comment}{     *}
740 \textcolor{comment}{     *  (2) Darkened while out of the hero's sight.  This can happen}
741 \textcolor{comment}{     *      when cursed scroll of light is read.}
742 \textcolor{comment}{     *}
743 \textcolor{comment}{     * In either case, we have to manually correct the hero's memory to}
744 \textcolor{comment}{     * match waslit.  Deciding when to change waslit is non-trivial.}
745 \textcolor{comment}{     *}
746 \textcolor{comment}{     *  Note:  If flags.lit\_corridor is set, then corridors act like room}
747 \textcolor{comment}{     *     squares.  That is, they light up if in night vision range.}
748 \textcolor{comment}{     *     If flags.lit\_corridor is not set, then corridors will}
749 \textcolor{comment}{     *     remain dark unless lit by a light spell and may darken}
750 \textcolor{comment}{     *     again, as discussed above.}
751 \textcolor{comment}{     *}
752 \textcolor{comment}{     * These checks and changes must be here and not in back\_to\_glyph().}
753 \textcolor{comment}{     * They are dependent on the position being out of sight.}
754 \textcolor{comment}{     */}
755     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!lev->waslit) \{
756         \textcolor{keywordflow}{if} (lev->\hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} == \hyperlink{display_8h_a77e69d3b11c3296576f840c9d11ae8fb}{cmap\_to\_glyph}(\hyperlink{rm_8h_a399754b07fa79009fd0354abaf190e89}{S\_litcorr}) && lev->
      \hyperlink{structrm_aa144ade377ba175f037c4e637329d4dc}{typ} == \hyperlink{rm_8h_aeffd57885964c3a9a5c3ce0f81c06339}{CORR})
757         \hyperlink{display_8c_a60d3cfb0df75b80c36125ce154da217f}{show\_glyph}(\hyperlink{structtrap_aed25254cf556e3eae09dd98576d98d45}{x}, \hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y}, lev->\hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} = \hyperlink{display_8h_a77e69d3b11c3296576f840c9d11ae8fb}{cmap\_to\_glyph}(
      \hyperlink{rm_8h_a3d0d27bd7691a72bc0b278df4d82ca02}{S\_corr}));
758         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (lev->\hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} == \hyperlink{display_8h_a77e69d3b11c3296576f840c9d11ae8fb}{cmap\_to\_glyph}(\hyperlink{rm_8h_a1cbe62db5502d1ece3d5cce996ff8164}{S\_room}) && lev->
      \hyperlink{structrm_aa144ade377ba175f037c4e637329d4dc}{typ} == \hyperlink{rm_8h_ae635489e987ae17a3bf884376cc2fe34}{ROOM})
759         \hyperlink{display_8c_a60d3cfb0df75b80c36125ce154da217f}{show\_glyph}(\hyperlink{structtrap_aed25254cf556e3eae09dd98576d98d45}{x}, \hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y}, lev->\hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} = \hyperlink{display_8h_a77e69d3b11c3296576f840c9d11ae8fb}{cmap\_to\_glyph}(
      \hyperlink{rm_8h_a342b42eb0fe3236adbc700b6e725d781}{S\_stone}));
760         \textcolor{keywordflow}{else}
761         \textcolor{keywordflow}{goto} show\_mem;
762     \} \textcolor{keywordflow}{else} \{
763 show\_mem:
764         \hyperlink{display_8c_a60d3cfb0df75b80c36125ce154da217f}{show\_glyph}(\hyperlink{structtrap_aed25254cf556e3eae09dd98576d98d45}{x}, \hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y}, lev->\hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph});
765     \}
766     \}
767 \}
\end{DoxyCode}
\hypertarget{display_8c_a8c3db71d219231c8e0f601bc0892a1fd}{\index{display.\+c@{display.\+c}!row\+\_\+refresh@{row\+\_\+refresh}}
\index{row\+\_\+refresh@{row\+\_\+refresh}!display.\+c@{display.\+c}}
\subsubsection[{row\+\_\+refresh}]{\setlength{\rightskip}{0pt plus 5cm}void row\+\_\+refresh (
\begin{DoxyParamCaption}
\item[{int}]{start, }
\item[{int}]{stop, }
\item[{int}]{y}
\end{DoxyParamCaption}
)}}\label{display_8c_a8c3db71d219231c8e0f601bc0892a1fd}


Definition at line 1316 of file display.\+c.



References cmap\+\_\+to\+\_\+glyph, print\+\_\+glyph, S\+\_\+stone, and W\+I\+N\+\_\+\+M\+A\+P.


\begin{DoxyCode}
1318 \{
1319     \textcolor{keyword}{register} \textcolor{keywordtype}{int} \hyperlink{structtrap_aed25254cf556e3eae09dd98576d98d45}{x};
1320 
1321     \textcolor{keywordflow}{for} (x = start; x <= stop; x++)
1322     \textcolor{keywordflow}{if} (\hyperlink{display_8c_af05984f18ee6d5c6573afb061376c52c}{gbuf}[\hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y}][x].glyph != \hyperlink{display_8h_a77e69d3b11c3296576f840c9d11ae8fb}{cmap\_to\_glyph}(\hyperlink{rm_8h_a342b42eb0fe3236adbc700b6e725d781}{S\_stone}))
1323         \hyperlink{winprocs_8h_a1ac4b20f9c220790e17ebeb3c220976c}{print\_glyph}(\hyperlink{decl_8h_afa1f7dd312c4c1b72afe3d2c8c2af691}{WIN\_MAP},x,\hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y},\hyperlink{display_8c_af05984f18ee6d5c6573afb061376c52c}{gbuf}[\hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y}][x].glyph);
1324 \}
\end{DoxyCode}
\hypertarget{display_8c_aa9a8557e452301a77e67c6b9be801775}{\index{display.\+c@{display.\+c}!see\+\_\+monsters@{see\+\_\+monsters}}
\index{see\+\_\+monsters@{see\+\_\+monsters}!display.\+c@{display.\+c}}
\subsubsection[{see\+\_\+monsters}]{\setlength{\rightskip}{0pt plus 5cm}void see\+\_\+monsters (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{display_8c_aa9a8557e452301a77e67c6b9be801775}


Definition at line 1065 of file display.\+c.



References D\+E\+A\+D\+M\+O\+N\+S\+T\+E\+R, fmon, monst\+::mx, monst\+::my, newsym(), monst\+::nmon, see\+\_\+wsegs(), u, you\+::ux, and you\+::uy.



Referenced by attrcurse(), docrt(), pleased(), and teleds().


\begin{DoxyCode}
1066 \{
1067     \textcolor{keyword}{register} \textcolor{keyword}{struct }\hyperlink{structmonst}{monst} *mon;
1068 
1069     \textcolor{keywordflow}{for} (mon = \hyperlink{rm_8h_a9b7eba07f916406d6d62f5f82d273e40}{fmon}; mon; mon = mon->\hyperlink{structmonst_a4c4bcdcf3c4ec4a85313ade9f9c27b72}{nmon}) \{
1070     \textcolor{keywordflow}{if} (\hyperlink{monst_8h_a87ebcb12436dc12747fed36e83561249}{DEADMONSTER}(mon)) \textcolor{keywordflow}{continue};
1071     \hyperlink{display_8c_a185c6ad6e4c5a6be26a371b9aa17c32e}{newsym}(mon->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx},mon->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my});
1072     \textcolor{keywordflow}{if} (mon->wormno) \hyperlink{worm_8c_ae1052541ce10767f111a9d22e7761ebc}{see\_wsegs}(mon);
1073     \}
1074 \textcolor{preprocessor}{#ifdef STEED}
1075     \textcolor{comment}{/* when mounted, hero's location gets caught by monster loop */}
1076     \textcolor{keywordflow}{if} (!\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.usteed)
1077 \textcolor{preprocessor}{#endif}
1078     \hyperlink{display_8c_a185c6ad6e4c5a6be26a371b9aa17c32e}{newsym}(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux}, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy});
1079 \}
\end{DoxyCode}
\hypertarget{display_8c_a8d668c23c515c669bfcc4dc578a45e71}{\index{display.\+c@{display.\+c}!see\+\_\+objects@{see\+\_\+objects}}
\index{see\+\_\+objects@{see\+\_\+objects}!display.\+c@{display.\+c}}
\subsubsection[{see\+\_\+objects}]{\setlength{\rightskip}{0pt plus 5cm}void see\+\_\+objects (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{display_8c_a8d668c23c515c669bfcc4dc578a45e71}


Definition at line 1110 of file display.\+c.



References fobj, newsym(), obj\+::nobj, obj\+::ox, obj\+::oy, and vobj\+\_\+at.


\begin{DoxyCode}
1111 \{
1112     \textcolor{keyword}{register} \textcolor{keyword}{struct }\hyperlink{structobj}{obj} *\hyperlink{structobj}{obj};
1113     \textcolor{keywordflow}{for}(obj = \hyperlink{rm_8h_a4d2866bf9ebea1c08c26174b5c8cfbb7}{fobj}; obj; obj = obj->\hyperlink{structobj_ad1c5d790528ee1d8349ef302994789d8}{nobj})
1114     \textcolor{keywordflow}{if} (\hyperlink{display_8h_acb0b91fd762d501452bc8436c5160ecc}{vobj\_at}(obj->\hyperlink{structobj_aac936c7da6b4f1eca0a94f75c242e5cc}{ox},obj->\hyperlink{structobj_a72dace5e678b56ae42c3fb19292e5839}{oy}) == obj) \hyperlink{display_8c_a185c6ad6e4c5a6be26a371b9aa17c32e}{newsym}(obj->\hyperlink{structobj_aac936c7da6b4f1eca0a94f75c242e5cc}{ox}, obj->
      \hyperlink{structobj_a72dace5e678b56ae42c3fb19292e5839}{oy});
1115 \}
\end{DoxyCode}
\hypertarget{display_8c_a4e16dd8dd8f402993d4fd2bbd9fa9267}{\index{display.\+c@{display.\+c}!see\+\_\+traps@{see\+\_\+traps}}
\index{see\+\_\+traps@{see\+\_\+traps}!display.\+c@{display.\+c}}
\subsubsection[{see\+\_\+traps}]{\setlength{\rightskip}{0pt plus 5cm}void see\+\_\+traps (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{display_8c_a4e16dd8dd8f402993d4fd2bbd9fa9267}


Definition at line 1121 of file display.\+c.



References ftrap, glyph\+\_\+at(), glyph\+\_\+is\+\_\+trap, newsym(), trap\+::ntrap, trap\+::tx, and trap\+::ty.


\begin{DoxyCode}
1122 \{
1123     \textcolor{keyword}{struct }\hyperlink{structtrap}{trap} *\hyperlink{structtrap}{trap};
1124     \textcolor{keywordtype}{int} glyph;
1125 
1126     \textcolor{keywordflow}{for} (trap = \hyperlink{trap_8h_a442e327ae9fbb5d15e2df82e488de313}{ftrap}; trap; trap = trap->\hyperlink{structtrap_aef8ea4650dce701fde7f7f3e1310c892}{ntrap}) \{
1127     glyph = \hyperlink{display_8c_ad3c1a65cc5e35e90067cb04eaf397d8a}{glyph\_at}(trap->\hyperlink{structtrap_a8a3d31070852119ee66c8662b0c883c7}{tx}, trap->\hyperlink{structtrap_a579c4f0e2d31e3657c930d6741737b20}{ty});
1128     \textcolor{keywordflow}{if} (\hyperlink{display_8h_a495f25bc3868092a11dfa723c138b93b}{glyph\_is\_trap}(glyph))
1129         \hyperlink{display_8c_a185c6ad6e4c5a6be26a371b9aa17c32e}{newsym}(trap->\hyperlink{structtrap_a8a3d31070852119ee66c8662b0c883c7}{tx}, trap->\hyperlink{structtrap_a579c4f0e2d31e3657c930d6741737b20}{ty});
1130     \}
1131 \}
\end{DoxyCode}
\hypertarget{display_8c_acc3c2e523ed2fd502170c22237800cfe}{\index{display.\+c@{display.\+c}!set\+\_\+corn@{set\+\_\+corn}}
\index{set\+\_\+corn@{set\+\_\+corn}!display.\+c@{display.\+c}}
\subsubsection[{set\+\_\+corn}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} int set\+\_\+corn (
\begin{DoxyParamCaption}
\item[{int}]{x1, }
\item[{int}]{y1, }
\item[{int}]{x2, }
\item[{int}]{y2, }
\item[{int}]{x3, }
\item[{int}]{y3, }
\item[{int}]{x4, }
\item[{int}]{y4}
\end{DoxyParamCaption}
)}}\label{display_8c_acc3c2e523ed2fd502170c22237800cfe}


Definition at line 1660 of file display.\+c.



References check\+\_\+pos(), W\+M\+\_\+\+C\+\_\+\+I\+N\+N\+E\+R, and W\+M\+\_\+\+C\+\_\+\+O\+U\+T\+E\+R.



Referenced by set\+\_\+wall\+\_\+state().


\begin{DoxyCode}
1662 \{
1663     \textcolor{keywordtype}{int} wmode, is\_1, is\_2, is\_3, is\_4;
1664 
1665     is\_1 = \hyperlink{display_8c_a6c49277033fb8f1150ad4fe3e95c8972}{check\_pos}(x1, y1, 1);
1666     is\_2 = \hyperlink{display_8c_a6c49277033fb8f1150ad4fe3e95c8972}{check\_pos}(x2, y2, 1);
1667     is\_3 = \hyperlink{display_8c_a6c49277033fb8f1150ad4fe3e95c8972}{check\_pos}(x3, y3, 1);
1668     is\_4 = \hyperlink{display_8c_a6c49277033fb8f1150ad4fe3e95c8972}{check\_pos}(x4, y4, 1);   \textcolor{comment}{/* inner location */}
1669 
1670     \textcolor{comment}{/*}
1671 \textcolor{comment}{     * All 4 should not be true.  So if the inner location is rock,}
1672 \textcolor{comment}{     * use it.  If all of the outer 3 are true, use outer.  We currently}
1673 \textcolor{comment}{     * can't cover the case where only part of the outer is rock, so}
1674 \textcolor{comment}{     * we just say that all the walls are finished (if not overridden}
1675 \textcolor{comment}{     * by the inner section).}
1676 \textcolor{comment}{     */}
1677     \textcolor{keywordflow}{if} (is\_4) \{
1678     wmode = \hyperlink{rm_8h_aa6fe640cec90227c8c5f8d2166f55e80}{WM\_C\_INNER};
1679     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (is\_1 && is\_2 && is\_3)
1680     wmode = \hyperlink{rm_8h_afddfddf3b732caa82e920e68f19ca68f}{WM\_C\_OUTER};
1681      \textcolor{keywordflow}{else}
1682     wmode = 0;  \textcolor{comment}{/* finished walls on all sides */}
1683 
1684     \textcolor{keywordflow}{return} wmode;
1685 \}
\end{DoxyCode}
\hypertarget{display_8c_a448907a9e549a025c4c42beee65304bd}{\index{display.\+c@{display.\+c}!set\+\_\+crosswall@{set\+\_\+crosswall}}
\index{set\+\_\+crosswall@{set\+\_\+crosswall}!display.\+c@{display.\+c}}
\subsubsection[{set\+\_\+crosswall}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} int set\+\_\+crosswall (
\begin{DoxyParamCaption}
\item[{int}]{x, }
\item[{int}]{y}
\end{DoxyParamCaption}
)}}\label{display_8c_a448907a9e549a025c4c42beee65304bd}


Definition at line 1689 of file display.\+c.



References check\+\_\+pos(), W\+M\+\_\+\+X\+\_\+\+B\+L, W\+M\+\_\+\+X\+\_\+\+B\+L\+T\+R, W\+M\+\_\+\+X\+\_\+\+B\+R, W\+M\+\_\+\+X\+\_\+\+T\+L, W\+M\+\_\+\+X\+\_\+\+T\+L\+B\+R, and W\+M\+\_\+\+X\+\_\+\+T\+R.



Referenced by set\+\_\+wall\+\_\+state().


\begin{DoxyCode}
1691 \{
1692     \textcolor{keywordtype}{int} wmode, is\_1, is\_2, is\_3, is\_4;
1693 
1694     is\_1 = \hyperlink{display_8c_a6c49277033fb8f1150ad4fe3e95c8972}{check\_pos}(\hyperlink{structtrap_aed25254cf556e3eae09dd98576d98d45}{x}-1, \hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y}-1, 1);
1695     is\_2 = \hyperlink{display_8c_a6c49277033fb8f1150ad4fe3e95c8972}{check\_pos}(\hyperlink{structtrap_aed25254cf556e3eae09dd98576d98d45}{x}+1, \hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y}-1, 1);
1696     is\_3 = \hyperlink{display_8c_a6c49277033fb8f1150ad4fe3e95c8972}{check\_pos}(\hyperlink{structtrap_aed25254cf556e3eae09dd98576d98d45}{x}+1, \hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y}+1, 1);
1697     is\_4 = \hyperlink{display_8c_a6c49277033fb8f1150ad4fe3e95c8972}{check\_pos}(\hyperlink{structtrap_aed25254cf556e3eae09dd98576d98d45}{x}-1, \hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y}+1, 1);
1698 
1699     wmode = is\_1+is\_2+is\_3+is\_4;
1700     \textcolor{keywordflow}{if} (wmode > 1) \{
1701     \textcolor{keywordflow}{if} (is\_1 && is\_3 && (is\_2+is\_4 == 0)) \{
1702         wmode = \hyperlink{rm_8h_a7cfb224970e6b0eb823791639f88c750}{WM\_X\_TLBR};
1703     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (is\_2 && is\_4 && (is\_1+is\_3 == 0)) \{
1704         wmode = \hyperlink{rm_8h_aff85e86a0eb08fba6bf9c642e867e01c}{WM\_X\_BLTR};
1705     \} \textcolor{keywordflow}{else} \{
1706 \textcolor{preprocessor}{#ifdef WA\_VERBOSE}
1707         error4(\hyperlink{structtrap_aed25254cf556e3eae09dd98576d98d45}{x},\hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y},is\_1,is\_2,is\_3,is\_4);
1708 \textcolor{preprocessor}{#endif}
1709         wmode = 0;
1710     \}
1711     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (is\_1)
1712     wmode = \hyperlink{rm_8h_a15a4e9832e6eea4038219aad7b936961}{WM\_X\_TL};
1713     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (is\_2)
1714     wmode = \hyperlink{rm_8h_af2d27756fffe782f30d48fc059300993}{WM\_X\_TR};
1715     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (is\_3)
1716     wmode = \hyperlink{rm_8h_a02f15d34a3150c7809de1e0d401d24b6}{WM\_X\_BR};
1717     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (is\_4)
1718     wmode = \hyperlink{rm_8h_a04eaa003b80a83d7f658edada439087b}{WM\_X\_BL};
1719 
1720     \textcolor{keywordflow}{return} wmode;
1721 \}
\end{DoxyCode}
\hypertarget{display_8c_ad0ef5ff759a8e8fa247560918f852df5}{\index{display.\+c@{display.\+c}!set\+\_\+mimic\+\_\+blocking@{set\+\_\+mimic\+\_\+blocking}}
\index{set\+\_\+mimic\+\_\+blocking@{set\+\_\+mimic\+\_\+blocking}!display.\+c@{display.\+c}}
\subsubsection[{set\+\_\+mimic\+\_\+blocking}]{\setlength{\rightskip}{0pt plus 5cm}void set\+\_\+mimic\+\_\+blocking (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{display_8c_ad0ef5ff759a8e8fa247560918f852df5}


Definition at line 1087 of file display.\+c.



References block\+\_\+point(), D\+E\+A\+D\+M\+O\+N\+S\+T\+E\+R, fmon, M\+\_\+\+A\+P\+\_\+\+F\+U\+R\+N\+I\+T\+U\+R\+E, M\+\_\+\+A\+P\+\_\+\+O\+B\+J\+E\+C\+T, monst\+::m\+\_\+ap\+\_\+type, monst\+::mappearance, monst\+::mx, monst\+::my, monst\+::nmon, S\+\_\+hcdoor, S\+\_\+vcdoor, See\+\_\+invisible, and unblock\+\_\+point().


\begin{DoxyCode}
1088 \{
1089     \textcolor{keyword}{register} \textcolor{keyword}{struct }\hyperlink{structmonst}{monst} *mon;
1090 
1091     \textcolor{keywordflow}{for} (mon = \hyperlink{rm_8h_a9b7eba07f916406d6d62f5f82d273e40}{fmon}; mon; mon = mon->\hyperlink{structmonst_a4c4bcdcf3c4ec4a85313ade9f9c27b72}{nmon}) \{
1092     \textcolor{keywordflow}{if} (\hyperlink{monst_8h_a87ebcb12436dc12747fed36e83561249}{DEADMONSTER}(mon)) \textcolor{keywordflow}{continue};
1093     \textcolor{keywordflow}{if} (mon->minvis &&
1094        ((mon->\hyperlink{structmonst_aab8fc9a0be90b4db8333b09487e2620c}{m\_ap\_type} == \hyperlink{monst_8h_a3470d5a82b5711ec2b38fb153c3eab2f}{M\_AP\_FURNITURE} &&
1095          (mon->\hyperlink{structmonst_a60ba74caeb4e779b7ccdb99150823bb9}{mappearance} == \hyperlink{rm_8h_a48b567f0b941ec718d04a736f71da55f}{S\_vcdoor} || mon->\hyperlink{structmonst_a60ba74caeb4e779b7ccdb99150823bb9}{mappearance} == 
      \hyperlink{rm_8h_aa2fb4b079e394b211180b9a57cff39ac}{S\_hcdoor})) ||
1096         (mon->\hyperlink{structmonst_aab8fc9a0be90b4db8333b09487e2620c}{m\_ap\_type} == \hyperlink{monst_8h_a398e3dada51d63d91d8d9a6fb3f90c62}{M\_AP\_OBJECT} && mon->\hyperlink{structmonst_a60ba74caeb4e779b7ccdb99150823bb9}{mappearance} == BOULDER))) \{
1097         \textcolor{keywordflow}{if}(\hyperlink{youprop_8h_ae00ea7702fa1870643d604364b0640c7}{See\_invisible})
1098         \hyperlink{vision_8c_ae985a63b19aa1a0a81fa91b46972e27e}{block\_point}(mon->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mon->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my});
1099         \textcolor{keywordflow}{else}
1100         \hyperlink{vision_8c_ae35bdda13dee95d455874551be850a47}{unblock\_point}(mon->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mon->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my});
1101     \}
1102     \}
1103 \}
\end{DoxyCode}
\hypertarget{display_8c_aed31e6434cf32d4f5a20d9460172456f}{\index{display.\+c@{display.\+c}!set\+\_\+seenv@{set\+\_\+seenv}}
\index{set\+\_\+seenv@{set\+\_\+seenv}!display.\+c@{display.\+c}}
\subsubsection[{set\+\_\+seenv}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} void set\+\_\+seenv (
\begin{DoxyParamCaption}
\item[{struct {\bf rm} $\ast$}]{lev, }
\item[{int}]{x0, }
\item[{int}]{y0, }
\item[{int}]{x, }
\item[{int}]{y}
\end{DoxyParamCaption}
)}}\label{display_8c_aed31e6434cf32d4f5a20d9460172456f}


Definition at line 1807 of file display.\+c.



References rm\+::seenv, and sign.



Referenced by feel\+\_\+location().


\begin{DoxyCode}
1810 \{
1811     \textcolor{keywordtype}{int} dx = x-x0, dy = y0-y;
1812     lev->\hyperlink{structrm_a34555313c127be5f736123f994cb1770}{seenv} |= \hyperlink{display_8c_ab305833b5e361287ef704c02565aad89}{seenv\_matrix}[\hyperlink{display_8c_ac26db4b03887fbc86becaab3cd49e1cd}{sign}(dy)+1][\hyperlink{display_8c_ac26db4b03887fbc86becaab3cd49e1cd}{sign}(dx)+1];
1813 \}
\end{DoxyCode}
\hypertarget{display_8c_aa39c3fdf28c99762b13a974a88c2392a}{\index{display.\+c@{display.\+c}!set\+\_\+twall@{set\+\_\+twall}}
\index{set\+\_\+twall@{set\+\_\+twall}!display.\+c@{display.\+c}}
\subsubsection[{set\+\_\+twall}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} int set\+\_\+twall (
\begin{DoxyParamCaption}
\item[{int}]{x0, }
\item[{int}]{y0, }
\item[{int}]{x1, }
\item[{int}]{y1, }
\item[{int}]{x2, }
\item[{int}]{y2, }
\item[{int}]{x3, }
\item[{int}]{y3}
\end{DoxyParamCaption}
)}}\label{display_8c_aa39c3fdf28c99762b13a974a88c2392a}


Definition at line 1619 of file display.\+c.



References check\+\_\+pos(), more\+\_\+than\+\_\+one, W\+M\+\_\+\+T\+\_\+\+B\+L, W\+M\+\_\+\+T\+\_\+\+B\+R, and W\+M\+\_\+\+T\+\_\+\+L\+O\+N\+G.



Referenced by set\+\_\+wall\+\_\+state().


\begin{DoxyCode}
1621 \{
1622     \textcolor{keywordtype}{int} wmode, is\_1, is\_2, is\_3;
1623 
1624     is\_1 = \hyperlink{display_8c_a6c49277033fb8f1150ad4fe3e95c8972}{check\_pos}(x1, y1, \hyperlink{rm_8h_a7538ca54d4df412b00530ecb7f8a5531}{WM\_T\_LONG});
1625     is\_2 = \hyperlink{display_8c_a6c49277033fb8f1150ad4fe3e95c8972}{check\_pos}(x2, y2, \hyperlink{rm_8h_aaa301cfa42d419b8eb10045806ed94d8}{WM\_T\_BL});
1626     is\_3 = \hyperlink{display_8c_a6c49277033fb8f1150ad4fe3e95c8972}{check\_pos}(x3, y3, \hyperlink{rm_8h_a3010e8f9832289b0f6ea74a1da34bcf2}{WM\_T\_BR});
1627     \textcolor{keywordflow}{if} (\hyperlink{display_8c_aabde3c62495d5a79fcbf0a3d8784b7c3}{more\_than\_one}(x0, y0, is\_1, is\_2, is\_3)) \{
1628     wmode = 0;
1629     \} \textcolor{keywordflow}{else} \{
1630     wmode = is\_1 + is\_2 + is\_3;
1631     \}
1632     \textcolor{keywordflow}{return} wmode;
1633 \}
\end{DoxyCode}
\hypertarget{display_8c_a515e27b11b0fb8f59354401580af6a4a}{\index{display.\+c@{display.\+c}!set\+\_\+wall@{set\+\_\+wall}}
\index{set\+\_\+wall@{set\+\_\+wall}!display.\+c@{display.\+c}}
\subsubsection[{set\+\_\+wall}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} int set\+\_\+wall (
\begin{DoxyParamCaption}
\item[{int}]{x, }
\item[{int}]{y, }
\item[{int}]{horiz}
\end{DoxyParamCaption}
)}}\label{display_8c_a515e27b11b0fb8f59354401580af6a4a}


Definition at line 1637 of file display.\+c.



References check\+\_\+pos(), more\+\_\+than\+\_\+one, W\+M\+\_\+\+W\+\_\+\+B\+O\+T\+T\+O\+M, W\+M\+\_\+\+W\+\_\+\+L\+E\+F\+T, W\+M\+\_\+\+W\+\_\+\+R\+I\+G\+H\+T, and W\+M\+\_\+\+W\+\_\+\+T\+O\+P.



Referenced by set\+\_\+wall\+\_\+state().


\begin{DoxyCode}
1639 \{
1640     \textcolor{keywordtype}{int} wmode, is\_1, is\_2;
1641 
1642     \textcolor{keywordflow}{if} (horiz) \{
1643     is\_1 = \hyperlink{display_8c_a6c49277033fb8f1150ad4fe3e95c8972}{check\_pos}(x,y-1, \hyperlink{rm_8h_aedeba679e1bd84273f229f474e766c08}{WM\_W\_TOP});
1644     is\_2 = \hyperlink{display_8c_a6c49277033fb8f1150ad4fe3e95c8972}{check\_pos}(x,y+1, \hyperlink{rm_8h_a73f28918be83810b567644311ddcf784}{WM\_W\_BOTTOM});
1645     \} \textcolor{keywordflow}{else} \{
1646     is\_1 = \hyperlink{display_8c_a6c49277033fb8f1150ad4fe3e95c8972}{check\_pos}(x-1,y, \hyperlink{rm_8h_a74f53949018e78c9fd261e20243f288e}{WM\_W\_LEFT});
1647     is\_2 = \hyperlink{display_8c_a6c49277033fb8f1150ad4fe3e95c8972}{check\_pos}(x+1,y, \hyperlink{rm_8h_ab3123f4b19df9be67edcb76c9a4caff8}{WM\_W\_RIGHT});
1648     \}
1649     \textcolor{keywordflow}{if} (\hyperlink{display_8c_aabde3c62495d5a79fcbf0a3d8784b7c3}{more\_than\_one}(x, y, is\_1, is\_2, 0)) \{
1650     wmode = 0;
1651     \} \textcolor{keywordflow}{else} \{
1652     wmode = is\_1 + is\_2;
1653     \}
1654     \textcolor{keywordflow}{return} wmode;
1655 \}
\end{DoxyCode}
\hypertarget{display_8c_afd30b2beecc42ef4aef70835b2bb2f9b}{\index{display.\+c@{display.\+c}!set\+\_\+wall\+\_\+state@{set\+\_\+wall\+\_\+state}}
\index{set\+\_\+wall\+\_\+state@{set\+\_\+wall\+\_\+state}!display.\+c@{display.\+c}}
\subsubsection[{set\+\_\+wall\+\_\+state}]{\setlength{\rightskip}{0pt plus 5cm}void set\+\_\+wall\+\_\+state (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{display_8c_afd30b2beecc42ef4aef70835b2bb2f9b}


Definition at line 1725 of file display.\+c.



References B\+L\+C\+O\+R\+N\+E\+R, B\+R\+C\+O\+R\+N\+E\+R, C\+O\+L\+N\+O, C\+R\+O\+S\+S\+W\+A\+L\+L, H\+W\+A\+L\+L, levl, M\+A\+X\+\_\+\+T\+Y\+P\+E, R\+O\+W\+N\+O, S\+D\+O\+O\+R, set\+\_\+corn(), set\+\_\+crosswall(), set\+\_\+twall(), set\+\_\+wall(), T\+D\+W\+A\+L\+L, T\+L\+C\+O\+R\+N\+E\+R, T\+L\+W\+A\+L\+L, T\+R\+C\+O\+R\+N\+E\+R, T\+R\+W\+A\+L\+L, T\+U\+W\+A\+L\+L, rm\+::typ, V\+W\+A\+L\+L, and W\+M\+\_\+\+M\+A\+S\+K.



Referenced by mklev().


\begin{DoxyCode}
1726 \{
1727     \textcolor{keywordtype}{int} x, y;
1728     \textcolor{keywordtype}{int} wmode;
1729     \textcolor{keyword}{struct }\hyperlink{structrm}{rm} *lev;
1730 
1731 \textcolor{preprocessor}{#ifdef WA\_VERBOSE}
1732     \textcolor{keywordflow}{for} (x = 0; x < \hyperlink{rm_8h_a5acd8ca9bc6199921957a2363589304e}{MAX\_TYPE}; x++) bad\_count[x] = 0;
1733 \textcolor{preprocessor}{#endif}
1734 
1735     \textcolor{keywordflow}{for} (x = 0; x < \hyperlink{global_8h_a308dbfcc29f5a427c0315f3cbf03c3ed}{COLNO}; x++)
1736     \textcolor{keywordflow}{for} (lev = &\hyperlink{rm_8h_a8cd681fba60fdedbabfd71a0b4bbfc00}{levl}[x][0], y = 0; y < \hyperlink{global_8h_a9cce134868d97b23c35bcf1ff4a343d8}{ROWNO}; y++, lev++) \{
1737         \textcolor{keywordflow}{switch} (lev->\hyperlink{structrm_aa144ade377ba175f037c4e637329d4dc}{typ}) \{
1738         \textcolor{keywordflow}{case} \hyperlink{rm_8h_a03fd0fa1e0dbd19ea38dff0c79e656a5}{SDOOR}:
1739             wmode = \hyperlink{display_8c_a515e27b11b0fb8f59354401580af6a4a}{set\_wall}(x, y, (\textcolor{keywordtype}{int}) lev->horizontal);
1740             \textcolor{keywordflow}{break};
1741         \textcolor{keywordflow}{case} \hyperlink{rm_8h_a9a3afc2fb445bb43a1776de4ebe9852e}{VWALL}:
1742             wmode = \hyperlink{display_8c_a515e27b11b0fb8f59354401580af6a4a}{set\_wall}(x, y, 0);
1743             \textcolor{keywordflow}{break};
1744         \textcolor{keywordflow}{case} \hyperlink{rm_8h_a3fcd4705d7b0ac05a88302170fcc58f5}{HWALL}:
1745             wmode = \hyperlink{display_8c_a515e27b11b0fb8f59354401580af6a4a}{set\_wall}(x, y, 1);
1746             \textcolor{keywordflow}{break};
1747         \textcolor{keywordflow}{case} \hyperlink{rm_8h_ab847e2347534eeb83217f5b36815b88d}{TDWALL}:
1748             wmode = \hyperlink{display_8c_aa39c3fdf28c99762b13a974a88c2392a}{set\_twall}(x,y, x,y-1, x-1,y+1, x+1,y+1);
1749             \textcolor{keywordflow}{break};
1750         \textcolor{keywordflow}{case} \hyperlink{rm_8h_a618fa341dec5d9aeb5ac67deb7011d29}{TUWALL}:
1751             wmode = \hyperlink{display_8c_aa39c3fdf28c99762b13a974a88c2392a}{set\_twall}(x,y, x,y+1, x+1,y-1, x-1,y-1);
1752             \textcolor{keywordflow}{break};
1753         \textcolor{keywordflow}{case} \hyperlink{rm_8h_abec53816dd76f979866fbb2926b7af64}{TLWALL}:
1754             wmode = \hyperlink{display_8c_aa39c3fdf28c99762b13a974a88c2392a}{set\_twall}(x,y, x+1,y, x-1,y-1, x-1,y+1);
1755             \textcolor{keywordflow}{break};
1756         \textcolor{keywordflow}{case} \hyperlink{rm_8h_a9290fa8691acb3539d3381fec0e4b24a}{TRWALL}:
1757             wmode = \hyperlink{display_8c_aa39c3fdf28c99762b13a974a88c2392a}{set\_twall}(x,y, x-1,y, x+1,y+1, x+1,y-1);
1758             \textcolor{keywordflow}{break};
1759         \textcolor{keywordflow}{case} \hyperlink{rm_8h_ade633f6a4bac3d7c501e28d15c536d3d}{TLCORNER}:
1760             wmode = \hyperlink{display_8c_acc3c2e523ed2fd502170c22237800cfe}{set\_corn}(x-1,y-1, x,y-1, x-1,y, x+1,y+1);
1761             \textcolor{keywordflow}{break};
1762         \textcolor{keywordflow}{case} \hyperlink{rm_8h_adc954c30dd37b0942000262623e9c76e}{TRCORNER}:
1763             wmode = \hyperlink{display_8c_acc3c2e523ed2fd502170c22237800cfe}{set\_corn}(x,y-1, x+1,y-1, x+1,y, x-1,y+1);
1764             \textcolor{keywordflow}{break};
1765         \textcolor{keywordflow}{case} \hyperlink{rm_8h_a8e1e6f2e3453c3dd85fbc6f5a54c8c34}{BLCORNER}:
1766             wmode = \hyperlink{display_8c_acc3c2e523ed2fd502170c22237800cfe}{set\_corn}(x,y+1, x-1,y+1, x-1,y, x+1,y-1);
1767             \textcolor{keywordflow}{break};
1768         \textcolor{keywordflow}{case} \hyperlink{rm_8h_a653f37db17c18d0f1f4f76ae3063b124}{BRCORNER}:
1769             wmode = \hyperlink{display_8c_acc3c2e523ed2fd502170c22237800cfe}{set\_corn}(x+1,y, x+1,y+1, x,y+1, x-1,y-1);
1770             \textcolor{keywordflow}{break};
1771         \textcolor{keywordflow}{case} \hyperlink{rm_8h_ac2a0c94b5722b98d84af548563e71d2f}{CROSSWALL}:
1772             wmode = \hyperlink{display_8c_a448907a9e549a025c4c42beee65304bd}{set\_crosswall}(x, y);
1773             \textcolor{keywordflow}{break};
1774 
1775         \textcolor{keywordflow}{default}:
1776             wmode = -1; \textcolor{comment}{/* don't set wall info */}
1777             \textcolor{keywordflow}{break};
1778         \}
1779 
1780     \textcolor{keywordflow}{if} (wmode >= 0)
1781         lev->wall\_info = (lev->wall\_info & ~\hyperlink{rm_8h_aa8daf0cc89d46c79b0af7a430c725d25}{WM\_MASK}) | wmode;
1782     \}
1783 
1784 \textcolor{preprocessor}{#ifdef WA\_VERBOSE}
1785     \textcolor{comment}{/* check if any bad positions found */}
1786     \textcolor{keywordflow}{for} (x = y = 0; x < \hyperlink{rm_8h_a5acd8ca9bc6199921957a2363589304e}{MAX\_TYPE}; x++)
1787     \textcolor{keywordflow}{if} (bad\_count[x]) \{
1788         \textcolor{keywordflow}{if} (y == 0) \{
1789         y = 1;  \textcolor{comment}{/* only print once */}
1790         pline(\textcolor{stringliteral}{"set\_wall\_type: wall mode problems with: "});
1791         \}
1792         pline(\textcolor{stringliteral}{"%s %d;"}, type\_names[x], bad\_count[x]);
1793     \}
1794 \textcolor{preprocessor}{#endif }\textcolor{comment}{/* WA\_VERBOSE */}\textcolor{preprocessor}{}
1795 \}
\end{DoxyCode}
\hypertarget{display_8c_ac89f44ae626d79f05953e503312a939d}{\index{display.\+c@{display.\+c}!shieldeff@{shieldeff}}
\index{shieldeff@{shieldeff}!display.\+c@{display.\+c}}
\subsubsection[{shieldeff}]{\setlength{\rightskip}{0pt plus 5cm}void shieldeff (
\begin{DoxyParamCaption}
\item[{{\bf xchar}}]{x, }
\item[{{\bf xchar}}]{y}
\end{DoxyParamCaption}
)}}\label{display_8c_ac89f44ae626d79f05953e503312a939d}


Definition at line 778 of file display.\+c.



References cansee, cmap\+\_\+to\+\_\+glyph, delay\+\_\+output, flags, flush\+\_\+screen(), newsym(), S\+H\+I\+E\+L\+D\+\_\+\+C\+O\+U\+N\+T, shield\+\_\+static, show\+\_\+glyph(), and flag\+::sparkle.



Referenced by cursed\+\_\+book(), damageum(), explum(), god\+\_\+zaps\+\_\+you(), level\+\_\+tele\+\_\+trap(), mbhitm(), passive(), rndcurse(), tele\+\_\+trap(), and use\+\_\+offensive().


\begin{DoxyCode}
780 \{
781     \textcolor{keyword}{register} \textcolor{keywordtype}{int} i;
782 
783     \textcolor{keywordflow}{if} (!\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_aad9ec28d2a285d53e5ef9a6eb9696183}{sparkle}) \textcolor{keywordflow}{return};
784     \textcolor{keywordflow}{if} (\hyperlink{vision_8h_a857efc720262bc13a9e4b4bcbb079b5c}{cansee}(x,y)) \{    \textcolor{comment}{/* Don't see anything if can't see the location */}
785     \textcolor{keywordflow}{for} (i = 0; i < \hyperlink{display_8h_ae66dd4051608b66893e66a32b513fc8d}{SHIELD\_COUNT}; i++) \{
786         \hyperlink{display_8c_a60d3cfb0df75b80c36125ce154da217f}{show\_glyph}(x, y, \hyperlink{display_8h_a77e69d3b11c3296576f840c9d11ae8fb}{cmap\_to\_glyph}(\hyperlink{decl_8h_a9ae61543a0a40748955e9750148cf2bf}{shield\_static}[i]));
787         \hyperlink{display_8c_a47cdbc8092c02ed856defd22a0952aeb}{flush\_screen}(1);    \textcolor{comment}{/* make sure the glyph shows up */}
788         \hyperlink{winprocs_8h_a52ac0892dec99e42da526fda2126d9e9}{delay\_output}();
789     \}
790     \hyperlink{display_8c_a185c6ad6e4c5a6be26a371b9aa17c32e}{newsym}(x,y);      \textcolor{comment}{/* restore the old information */}
791     \}
792 \}
\end{DoxyCode}
\hypertarget{display_8c_a60d3cfb0df75b80c36125ce154da217f}{\index{display.\+c@{display.\+c}!show\+\_\+glyph@{show\+\_\+glyph}}
\index{show\+\_\+glyph@{show\+\_\+glyph}!display.\+c@{display.\+c}}
\subsubsection[{show\+\_\+glyph}]{\setlength{\rightskip}{0pt plus 5cm}void show\+\_\+glyph (
\begin{DoxyParamCaption}
\item[{int}]{x, }
\item[{int}]{y, }
\item[{int}]{glyph}
\end{DoxyParamCaption}
)}}\label{display_8c_a60d3cfb0df75b80c36125ce154da217f}


Definition at line 1214 of file display.\+c.



References gbuf\+\_\+entry\+::glyph, G\+L\+Y\+P\+H\+\_\+\+B\+O\+D\+Y\+\_\+\+O\+F\+F, G\+L\+Y\+P\+H\+\_\+\+C\+M\+A\+P\+\_\+\+O\+F\+F, G\+L\+Y\+P\+H\+\_\+\+D\+E\+T\+E\+C\+T\+\_\+\+O\+F\+F, G\+L\+Y\+P\+H\+\_\+\+E\+X\+P\+L\+O\+D\+E\+\_\+\+O\+F\+F, G\+L\+Y\+P\+H\+\_\+\+I\+N\+V\+I\+S\+\_\+\+O\+F\+F, G\+L\+Y\+P\+H\+\_\+\+O\+B\+J\+\_\+\+O\+F\+F, G\+L\+Y\+P\+H\+\_\+\+P\+E\+T\+\_\+\+O\+F\+F, G\+L\+Y\+P\+H\+\_\+\+R\+I\+D\+D\+E\+N\+\_\+\+O\+F\+F, G\+L\+Y\+P\+H\+\_\+\+S\+W\+A\+L\+L\+O\+W\+\_\+\+O\+F\+F, G\+L\+Y\+P\+H\+\_\+\+W\+A\+R\+N\+I\+N\+G\+\_\+\+O\+F\+F, G\+L\+Y\+P\+H\+\_\+\+Z\+A\+P\+\_\+\+O\+F\+F, M\+A\+X\+\_\+\+G\+L\+Y\+P\+H, gbuf\+\_\+entry\+::new, and offset.



Referenced by detect\+\_\+wsegs(), display\+\_\+monster(), display\+\_\+warning(), docrt(), feel\+\_\+location(), magic\+\_\+map\+\_\+background(), map\+\_\+background(), map\+\_\+invisible(), map\+\_\+object(), map\+\_\+trap(), monster\+\_\+detect(), newsym(), shieldeff(), show\+\_\+region(), swallowed(), tmp\+\_\+at(), under\+\_\+water(), and you\+\_\+aggravate().


\begin{DoxyCode}
1216 \{
1217     \textcolor{comment}{/*}
1218 \textcolor{comment}{     * Check for bad positions and glyphs.}
1219 \textcolor{comment}{     */}
1220     \textcolor{keywordflow}{if} (!isok(x, y)) \{
1221     \textcolor{keyword}{const} \textcolor{keywordtype}{char} *text;
1222     \textcolor{keywordtype}{int}  \hyperlink{Window_8c_a6313d4fad4381a8c1cd37bac963cec12}{offset};
1223 
1224     \textcolor{comment}{/* column 0 is invalid, but it's often used as a flag, so ignore it */}
1225     \textcolor{keywordflow}{if} (x == 0) \textcolor{keywordflow}{return};
1226 
1227     \textcolor{comment}{/*}
1228 \textcolor{comment}{     *  This assumes an ordering of the offsets.  See display.h for}
1229 \textcolor{comment}{     *  the definition.}
1230 \textcolor{comment}{     */}
1231 
1232     \textcolor{keywordflow}{if} (\hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} >= \hyperlink{display_8h_a576bb53ad5713142683ac37a22ae0f94}{GLYPH\_WARNING\_OFF}) \{ \textcolor{comment}{/* a warning */}
1233         text = \textcolor{stringliteral}{"warning"};       offset = \hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} - \hyperlink{display_8h_a576bb53ad5713142683ac37a22ae0f94}{GLYPH\_WARNING\_OFF};
1234     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} >= \hyperlink{display_8h_a12c3dedb11601c5df592451fca014723}{GLYPH\_SWALLOW\_OFF}) \{  \textcolor{comment}{/* swallow border */}
1235         text = \textcolor{stringliteral}{"swallow border"};    offset = \hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} - \hyperlink{display_8h_a12c3dedb11601c5df592451fca014723}{GLYPH\_SWALLOW\_OFF};
1236     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} >= \hyperlink{display_8h_a51ca2fc1986619ae2d009cfdc555a7e4}{GLYPH\_ZAP\_OFF}) \{      \textcolor{comment}{/* zap beam */}
1237         text = \textcolor{stringliteral}{"zap beam"};      offset = \hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} - \hyperlink{display_8h_a51ca2fc1986619ae2d009cfdc555a7e4}{GLYPH\_ZAP\_OFF};
1238     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} >= \hyperlink{display_8h_a117d3d8a6719732c252bac7f968a8028}{GLYPH\_EXPLODE\_OFF}) \{  \textcolor{comment}{/* explosion */}
1239         text = \textcolor{stringliteral}{"explosion"};     offset = \hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} - \hyperlink{display_8h_a117d3d8a6719732c252bac7f968a8028}{GLYPH\_EXPLODE\_OFF};
1240     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} >= \hyperlink{display_8h_a80bd11da4029e7e4a70a1eb525121458}{GLYPH\_CMAP\_OFF}) \{        \textcolor{comment}{/* cmap */}
1241         text = \textcolor{stringliteral}{"cmap\_index"};    offset = \hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} - \hyperlink{display_8h_a80bd11da4029e7e4a70a1eb525121458}{GLYPH\_CMAP\_OFF};
1242     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} >= \hyperlink{display_8h_afdd6729aca80c4ecb3cc89f77e70968c}{GLYPH\_OBJ\_OFF}) \{      \textcolor{comment}{/* object */}
1243         text = \textcolor{stringliteral}{"object"};        offset = \hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} - \hyperlink{display_8h_afdd6729aca80c4ecb3cc89f77e70968c}{GLYPH\_OBJ\_OFF};
1244     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} >= \hyperlink{display_8h_a0b14de6e22bd8913fd0034c34a4a26c2}{GLYPH\_RIDDEN\_OFF}) \{        \textcolor{comment}{/* ridden mon */}
1245         text = \textcolor{stringliteral}{"ridden mon"};    offset = \hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} - \hyperlink{display_8h_a0b14de6e22bd8913fd0034c34a4a26c2}{GLYPH\_RIDDEN\_OFF};
1246     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} >= \hyperlink{display_8h_a5b5531a8309865f07de98109cb3e0307}{GLYPH\_BODY\_OFF}) \{        \textcolor{comment}{/* a corpse */}
1247         text = \textcolor{stringliteral}{"corpse"};        offset = \hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} - \hyperlink{display_8h_a5b5531a8309865f07de98109cb3e0307}{GLYPH\_BODY\_OFF};
1248     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} >= \hyperlink{display_8h_a592a5d63676e9bd8ad0983cf5145934b}{GLYPH\_DETECT\_OFF}) \{        \textcolor{comment}{/* detected mon */}
1249         text = \textcolor{stringliteral}{"detected mon"};  offset = \hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} - \hyperlink{display_8h_a592a5d63676e9bd8ad0983cf5145934b}{GLYPH\_DETECT\_OFF};
1250     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} >= \hyperlink{display_8h_acee15075719911ed96b44eb1850c1759}{GLYPH\_INVIS\_OFF}) \{      \textcolor{comment}{/* invisible mon */}
1251         text = \textcolor{stringliteral}{"invisible mon"}; offset = \hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} - \hyperlink{display_8h_acee15075719911ed96b44eb1850c1759}{GLYPH\_INVIS\_OFF};
1252     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} >= \hyperlink{display_8h_a6419de72cae8e55fc00371ae9a7abec1}{GLYPH\_PET\_OFF}) \{      \textcolor{comment}{/* a pet */}
1253         text = \textcolor{stringliteral}{"pet"};       offset = \hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} - \hyperlink{display_8h_a6419de72cae8e55fc00371ae9a7abec1}{GLYPH\_PET\_OFF};
1254     \} \textcolor{keywordflow}{else} \{                    \textcolor{comment}{/* a monster */}
1255         text = \textcolor{stringliteral}{"monster"};       offset = \hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph};
1256     \}
1257 
1258     impossible(\textcolor{stringliteral}{"show\_glyph:  bad pos %d %d with glyph %d [%s %d]."},
1259                         x, y, \hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph}, text, offset);
1260     \textcolor{keywordflow}{return};
1261     \}
1262 
1263     \textcolor{keywordflow}{if} (\hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} >= \hyperlink{display_8h_a4195fd83b99331da1a956454b7346c01}{MAX\_GLYPH}) \{
1264     impossible(\textcolor{stringliteral}{"show\_glyph:  bad glyph %d [max %d] at (%d,%d)."},
1265                     \hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph}, \hyperlink{display_8h_a4195fd83b99331da1a956454b7346c01}{MAX\_GLYPH}, x, y);
1266     \textcolor{keywordflow}{return};
1267     \}
1268 
1269     \textcolor{keywordflow}{if} (\hyperlink{display_8c_af05984f18ee6d5c6573afb061376c52c}{gbuf}[y][x].\hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} != \hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph}) \{
1270     \hyperlink{display_8c_af05984f18ee6d5c6573afb061376c52c}{gbuf}[y][x].\hyperlink{structgbuf__entry_a7fdd281e49e8feac519137fb4eb2be05}{glyph} = \hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph};
1271     \hyperlink{display_8c_af05984f18ee6d5c6573afb061376c52c}{gbuf}[y][x].\hyperlink{structgbuf__entry_a50390314322d581c9b80535ecca7d5c1}{new}   = 1;
1272     \textcolor{keywordflow}{if} (\hyperlink{display_8c_add164e66f147d7fd33fd941e4f445437}{gbuf\_start}[y] > x) \hyperlink{display_8c_add164e66f147d7fd33fd941e4f445437}{gbuf\_start}[y] = x;
1273     \textcolor{keywordflow}{if} (\hyperlink{display_8c_a456a879e037f6746dea8b5f7cad4b13d}{gbuf\_stop}[y]  < x) \hyperlink{display_8c_a456a879e037f6746dea8b5f7cad4b13d}{gbuf\_stop}[y]  = x;
1274     \}
1275 \}
\end{DoxyCode}
\hypertarget{display_8c_a3d679e1d2180122bb463464b2a1c8af6}{\index{display.\+c@{display.\+c}!swallow\+\_\+to\+\_\+glyph@{swallow\+\_\+to\+\_\+glyph}}
\index{swallow\+\_\+to\+\_\+glyph@{swallow\+\_\+to\+\_\+glyph}!display.\+c@{display.\+c}}
\subsubsection[{swallow\+\_\+to\+\_\+glyph}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} int swallow\+\_\+to\+\_\+glyph (
\begin{DoxyParamCaption}
\item[{int}]{mnum, }
\item[{int}]{loc}
\end{DoxyParamCaption}
)}}\label{display_8c_a3d679e1d2180122bb463464b2a1c8af6}


Definition at line 1486 of file display.\+c.



References G\+L\+Y\+P\+H\+\_\+\+S\+W\+A\+L\+L\+O\+W\+\_\+\+O\+F\+F, S\+\_\+sw\+\_\+br, S\+\_\+sw\+\_\+tl, and what\+\_\+mon.



Referenced by swallowed().


\begin{DoxyCode}
1489 \{
1490     \textcolor{keywordflow}{if} (loc < \hyperlink{rm_8h_a7f752e26209b6ce4093e0602a91bc8c5}{S\_sw\_tl} || \hyperlink{rm_8h_ac7fd8b00ed593d0abfcf9256be0b5c3e}{S\_sw\_br} < loc) \{
1491     impossible(\textcolor{stringliteral}{"swallow\_to\_glyph: bad swallow location"});
1492     loc = \hyperlink{rm_8h_ac7fd8b00ed593d0abfcf9256be0b5c3e}{S\_sw\_br};
1493     \}
1494     \textcolor{keywordflow}{return} ((\textcolor{keywordtype}{int}) (\hyperlink{display_8h_acff82933acc349b5ecf19a850d2e3005}{what\_mon}(mnum)<<3) | (loc - \hyperlink{rm_8h_a7f752e26209b6ce4093e0602a91bc8c5}{S\_sw\_tl})) + 
      \hyperlink{display_8h_a12c3dedb11601c5df592451fca014723}{GLYPH\_SWALLOW\_OFF};
1495 \}
\end{DoxyCode}
\hypertarget{display_8c_a2621d8769ad9f42389e6fa5f21227b82}{\index{display.\+c@{display.\+c}!swallowed@{swallowed}}
\index{swallowed@{swallowed}!display.\+c@{display.\+c}}
\subsubsection[{swallowed}]{\setlength{\rightskip}{0pt plus 5cm}void swallowed (
\begin{DoxyParamCaption}
\item[{int}]{first}
\end{DoxyParamCaption}
)}}\label{display_8c_a2621d8769ad9f42389e6fa5f21227b82}


Definition at line 921 of file display.\+c.



References cls(), cmap\+\_\+to\+\_\+glyph, monst\+::data, display\+\_\+self, S\+\_\+stone, S\+\_\+sw\+\_\+bc, S\+\_\+sw\+\_\+bl, S\+\_\+sw\+\_\+br, S\+\_\+sw\+\_\+ml, S\+\_\+sw\+\_\+mr, S\+\_\+sw\+\_\+tc, S\+\_\+sw\+\_\+tl, S\+\_\+sw\+\_\+tr, show\+\_\+glyph(), swallow\+\_\+to\+\_\+glyph(), u, you\+::ustuck, you\+::ux, and you\+::uy.



Referenced by docrt().


\begin{DoxyCode}
923 \{
924     \textcolor{keyword}{static} \hyperlink{global_8h_a2043b7d01ce89f4ee2fa6c345a752d32}{xchar} lastx, lasty; \textcolor{comment}{/* last swallowed position */}
925     \textcolor{keywordtype}{int} swallower, left\_ok, rght\_ok;
926 
927     \textcolor{keywordflow}{if} (first)
928     \hyperlink{display_8c_a4826277cc150ddc0f4de4bd464a34909}{cls}();
929     \textcolor{keywordflow}{else} \{
930     \textcolor{keyword}{register} \textcolor{keywordtype}{int} x, y;
931 
932     \textcolor{comment}{/* Clear old location */}
933     \textcolor{keywordflow}{for} (y = lasty-1; y <= lasty+1; y++)
934         \textcolor{keywordflow}{for} (x = lastx-1; x <= lastx+1; x++)
935         \textcolor{keywordflow}{if} (isok(x,y)) \hyperlink{display_8c_a60d3cfb0df75b80c36125ce154da217f}{show\_glyph}(x,y,\hyperlink{display_8h_a77e69d3b11c3296576f840c9d11ae8fb}{cmap\_to\_glyph}(
      \hyperlink{rm_8h_a342b42eb0fe3236adbc700b6e725d781}{S\_stone}));
936     \}
937 
938     swallower = monsndx(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a774d4dad2da130ec9ed1d2e6c5e0fa80}{ustuck}->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data});
939     \textcolor{comment}{/* assume isok(u.ux,u.uy) */}
940     left\_ok = isok(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux}-1,\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy});
941     rght\_ok = isok(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux}+1,\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy});
942     \textcolor{comment}{/*}
943 \textcolor{comment}{     *  Display the hero surrounded by the monster's stomach.}
944 \textcolor{comment}{     */}
945     \textcolor{keywordflow}{if}(isok(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux}, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy}-1)) \{
946     \textcolor{keywordflow}{if} (left\_ok)
947     \hyperlink{display_8c_a60d3cfb0df75b80c36125ce154da217f}{show\_glyph}(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux}-1, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy}-1, \hyperlink{display_8c_a3d679e1d2180122bb463464b2a1c8af6}{swallow\_to\_glyph}(swallower, 
      \hyperlink{rm_8h_a7f752e26209b6ce4093e0602a91bc8c5}{S\_sw\_tl}));
948     \hyperlink{display_8c_a60d3cfb0df75b80c36125ce154da217f}{show\_glyph}(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux}  , \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy}-1, \hyperlink{display_8c_a3d679e1d2180122bb463464b2a1c8af6}{swallow\_to\_glyph}(swallower, 
      \hyperlink{rm_8h_ad6025614a640aa483e9b6e4bb25f825f}{S\_sw\_tc}));
949     \textcolor{keywordflow}{if} (rght\_ok)
950     \hyperlink{display_8c_a60d3cfb0df75b80c36125ce154da217f}{show\_glyph}(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux}+1, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy}-1, \hyperlink{display_8c_a3d679e1d2180122bb463464b2a1c8af6}{swallow\_to\_glyph}(swallower, 
      \hyperlink{rm_8h_ad3fc53e4f85779d7a90edac646da70a3}{S\_sw\_tr}));
951     \}
952 
953     \textcolor{keywordflow}{if} (left\_ok)
954     \hyperlink{display_8c_a60d3cfb0df75b80c36125ce154da217f}{show\_glyph}(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux}-1, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy}  , \hyperlink{display_8c_a3d679e1d2180122bb463464b2a1c8af6}{swallow\_to\_glyph}(swallower, 
      \hyperlink{rm_8h_abc36e3c904419a85f659fa99ec850c85}{S\_sw\_ml}));
955     \hyperlink{display_8h_aa4ec7eb1f23db38f5e6bcbab8cb0c5e4}{display\_self}();
956     \textcolor{keywordflow}{if} (rght\_ok)
957     \hyperlink{display_8c_a60d3cfb0df75b80c36125ce154da217f}{show\_glyph}(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux}+1, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy}  , \hyperlink{display_8c_a3d679e1d2180122bb463464b2a1c8af6}{swallow\_to\_glyph}(swallower, 
      \hyperlink{rm_8h_af4be9be6e5bdebb5f21ebfaef5eb02ab}{S\_sw\_mr}));
958 
959     \textcolor{keywordflow}{if}(isok(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux}, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy}+1)) \{
960     \textcolor{keywordflow}{if} (left\_ok)
961     \hyperlink{display_8c_a60d3cfb0df75b80c36125ce154da217f}{show\_glyph}(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux}-1, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy}+1, \hyperlink{display_8c_a3d679e1d2180122bb463464b2a1c8af6}{swallow\_to\_glyph}(swallower, 
      \hyperlink{rm_8h_a6a54c475f71124b7b4ca04e3829a7949}{S\_sw\_bl}));
962     \hyperlink{display_8c_a60d3cfb0df75b80c36125ce154da217f}{show\_glyph}(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux}  , \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy}+1, \hyperlink{display_8c_a3d679e1d2180122bb463464b2a1c8af6}{swallow\_to\_glyph}(swallower, 
      \hyperlink{rm_8h_acdfee9c30982d19e83fb0827c470da8f}{S\_sw\_bc}));
963     \textcolor{keywordflow}{if} (rght\_ok)
964     \hyperlink{display_8c_a60d3cfb0df75b80c36125ce154da217f}{show\_glyph}(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux}+1, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy}+1, \hyperlink{display_8c_a3d679e1d2180122bb463464b2a1c8af6}{swallow\_to\_glyph}(swallower, 
      \hyperlink{rm_8h_ac7fd8b00ed593d0abfcf9256be0b5c3e}{S\_sw\_br}));
965     \}
966 
967     \textcolor{comment}{/* Update the swallowed position. */}
968     lastx = \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux};
969     lasty = \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy};
970 \}
\end{DoxyCode}
\hypertarget{display_8c_a9e332163925dc030909f8463542ca6d5}{\index{display.\+c@{display.\+c}!t\+\_\+warn@{t\+\_\+warn}}
\index{t\+\_\+warn@{t\+\_\+warn}!display.\+c@{display.\+c}}
\subsubsection[{t\+\_\+warn}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} void t\+\_\+warn (
\begin{DoxyParamCaption}
\item[{struct {\bf rm} $\ast$}]{lev}
\end{DoxyParamCaption}
)}}\label{display_8c_a9e332163925dc030909f8463542ca6d5}


Definition at line 1874 of file display.\+c.



References T\+D\+W\+A\+L\+L, T\+L\+W\+A\+L\+L, T\+R\+W\+A\+L\+L, T\+U\+W\+A\+L\+L, and W\+M\+\_\+\+M\+A\+S\+K.



Referenced by wall\+\_\+angle().


\begin{DoxyCode}
1876 \{
1877     \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{char} warn\_str[] = \textcolor{stringliteral}{"wall\_angle: %s: case %d: seenv = 0x%x"};
1878     \textcolor{keyword}{const} \textcolor{keywordtype}{char} *wname;
1879 
1880     \textcolor{keywordflow}{if} (lev->\hyperlink{structrm_aa144ade377ba175f037c4e637329d4dc}{typ} == \hyperlink{rm_8h_a618fa341dec5d9aeb5ac67deb7011d29}{TUWALL}) wname = \textcolor{stringliteral}{"tuwall"};
1881     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (lev->\hyperlink{structrm_aa144ade377ba175f037c4e637329d4dc}{typ} == \hyperlink{rm_8h_abec53816dd76f979866fbb2926b7af64}{TLWALL}) wname = \textcolor{stringliteral}{"tlwall"};
1882     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (lev->\hyperlink{structrm_aa144ade377ba175f037c4e637329d4dc}{typ} == \hyperlink{rm_8h_a9290fa8691acb3539d3381fec0e4b24a}{TRWALL}) wname = \textcolor{stringliteral}{"trwall"};
1883     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (lev->\hyperlink{structrm_aa144ade377ba175f037c4e637329d4dc}{typ} == \hyperlink{rm_8h_ab847e2347534eeb83217f5b36815b88d}{TDWALL}) wname = \textcolor{stringliteral}{"tdwall"};
1884     \textcolor{keywordflow}{else} wname = \textcolor{stringliteral}{"unknown"};
1885     impossible(warn\_str, wname, lev->wall\_info & \hyperlink{rm_8h_aa8daf0cc89d46c79b0af7a430c725d25}{WM\_MASK},
1886     (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}) lev->\hyperlink{structrm_a34555313c127be5f736123f994cb1770}{seenv});
1887 \}
\end{DoxyCode}
\hypertarget{display_8c_a0567746aec3aa9a3e8075d8eabb29846}{\index{display.\+c@{display.\+c}!tmp\+\_\+at@{tmp\+\_\+at}}
\index{tmp\+\_\+at@{tmp\+\_\+at}!display.\+c@{display.\+c}}
\subsubsection[{tmp\+\_\+at}]{\setlength{\rightskip}{0pt plus 5cm}void tmp\+\_\+at (
\begin{DoxyParamCaption}
\item[{int}]{x, }
\item[{int}]{y}
\end{DoxyParamCaption}
)}}\label{display_8c_a0567746aec3aa9a3e8075d8eabb29846}


Definition at line 829 of file display.\+c.



References alloc(), cansee, D\+I\+S\+P\+\_\+\+A\+L\+W\+A\+Y\+S, D\+I\+S\+P\+\_\+\+B\+E\+A\+M, D\+I\+S\+P\+\_\+\+C\+H\+A\+N\+G\+E, D\+I\+S\+P\+\_\+\+E\+N\+D, D\+I\+S\+P\+\_\+\+F\+L\+A\+S\+H, D\+I\+S\+P\+\_\+\+F\+R\+E\+E\+M\+E\+M, flush\+\_\+screen(), free(), tmp\+\_\+glyph\+::glyph, newsym(), panic(), tmp\+\_\+glyph\+::prev, tmp\+\_\+glyph\+::saved, show\+\_\+glyph(), tmp\+\_\+glyph\+::sidx, tmp\+\_\+glyph\+::style, tgfirst, coord\+::x, and coord\+::y.



Referenced by end\+\_\+engulf(), freedynamicdata(), sho\+\_\+obj\+\_\+return\+\_\+to\+\_\+u(), start\+\_\+engulf(), and throwit().


\begin{DoxyCode}
831 \{
832     \textcolor{keyword}{static} \textcolor{keyword}{struct }\hyperlink{structtmp__glyph}{tmp\_glyph} *tglyph = (\textcolor{keyword}{struct }\hyperlink{structtmp__glyph}{tmp\_glyph} *)0;
833     \textcolor{keyword}{struct }\hyperlink{structtmp__glyph}{tmp\_glyph} *tmp;
834 
835     \textcolor{keywordflow}{switch} (x) \{
836     \textcolor{keywordflow}{case} \hyperlink{display_8h_a9c17fd88e339ed28053bba97fbbff6cb}{DISP\_BEAM}:
837     \textcolor{keywordflow}{case} \hyperlink{display_8h_a34b949cb0446b7600233da12c14f5e52}{DISP\_FLASH}:
838     \textcolor{keywordflow}{case} \hyperlink{display_8h_a649697258eb2dc5242572b7722f93ac6}{DISP\_ALWAYS}:
839         \textcolor{keywordflow}{if} (!tglyph)
840         tmp = &\hyperlink{display_8c_a495cf1fe6b86816cf07c64be2ad9d42c}{tgfirst};
841         \textcolor{keywordflow}{else}    \textcolor{comment}{/* nested effect; we need dynamic memory */}
842         tmp = (\textcolor{keyword}{struct }\hyperlink{structtmp__glyph}{tmp\_glyph} *)\hyperlink{txt2iff_8c_ae273cbdce4cd64a076220ad06c41a5a1}{alloc}(\textcolor{keyword}{sizeof} (\textcolor{keyword}{struct} \hyperlink{structtmp__glyph}{tmp\_glyph}));
843         tmp->\hyperlink{structtmp__glyph_a6766a3de9a941b007ad6908f10b1a296}{prev} = tglyph;
844         tglyph = tmp;
845         tglyph->\hyperlink{structtmp__glyph_acc72da60bdb24619fb87687d4575269a}{sidx} = 0;
846         tglyph->\hyperlink{structtmp__glyph_ac6a6f9a0c1bf366f610a0195d9168d36}{style} = x;
847         tglyph->\hyperlink{structtmp__glyph_af4743a6cc16459f8e4ef775e5ebbc96a}{glyph} = y;
848         \hyperlink{display_8c_a47cdbc8092c02ed856defd22a0952aeb}{flush\_screen}(0);    \textcolor{comment}{/* flush buffered glyphs */}
849         \textcolor{keywordflow}{return};
850 
851     \textcolor{keywordflow}{case} \hyperlink{display_8h_a04bf882074111f4d4ceabd3696f789c4}{DISP\_FREEMEM}:  \textcolor{comment}{/* in case game ends with tmp\_at() in progress */}
852         \textcolor{keywordflow}{while} (tglyph) \{
853         tmp = tglyph->\hyperlink{structtmp__glyph_a6766a3de9a941b007ad6908f10b1a296}{prev};
854         \textcolor{keywordflow}{if} (tglyph != &\hyperlink{display_8c_a495cf1fe6b86816cf07c64be2ad9d42c}{tgfirst}) \hyperlink{winproto_8h_a4bbec68d324de17b99fecede64b383ba}{free}((\hyperlink{tradstdc_8h_ad4a7dab7269b4b00e3c7c7d2e66f31cd}{genericptr\_t})tglyph);
855         tglyph = tmp;
856         \}
857         \textcolor{keywordflow}{return};
858 
859     \textcolor{keywordflow}{default}:
860         \textcolor{keywordflow}{break};
861     \}
862 
863     \textcolor{keywordflow}{if} (!tglyph) \hyperlink{txt2iff_8c_ab0824b6f5eb51db9371d2e9a222249d3}{panic}(\textcolor{stringliteral}{"tmp\_at: tglyph not initialized"});
864 
865     \textcolor{keywordflow}{switch} (x) \{
866     \textcolor{keywordflow}{case} \hyperlink{display_8h_a05acd9491c79b4b507e670f3956f993b}{DISP\_CHANGE}:
867         tglyph->\hyperlink{structtmp__glyph_af4743a6cc16459f8e4ef775e5ebbc96a}{glyph} = y;
868         \textcolor{keywordflow}{break};
869 
870     \textcolor{keywordflow}{case} \hyperlink{display_8h_a6b799a763b3dbf2977bfe7c90951ab53}{DISP\_END}:
871         \textcolor{keywordflow}{if} (tglyph->\hyperlink{structtmp__glyph_ac6a6f9a0c1bf366f610a0195d9168d36}{style} == \hyperlink{display_8h_a9c17fd88e339ed28053bba97fbbff6cb}{DISP\_BEAM}) \{
872         \textcolor{keyword}{register} \textcolor{keywordtype}{int} i;
873 
874         \textcolor{comment}{/* Erase (reset) from source to end */}
875         \textcolor{keywordflow}{for} (i = 0; i < tglyph->\hyperlink{structtmp__glyph_acc72da60bdb24619fb87687d4575269a}{sidx}; i++)
876             \hyperlink{display_8c_a185c6ad6e4c5a6be26a371b9aa17c32e}{newsym}(tglyph->\hyperlink{structtmp__glyph_a8db5e1fe6036daa9a46d8ce11cff5ef2}{saved}[i].\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x}, tglyph->\hyperlink{structtmp__glyph_a8db5e1fe6036daa9a46d8ce11cff5ef2}{saved}[i].\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y});
877         \} \textcolor{keywordflow}{else} \{        \textcolor{comment}{/* DISP\_FLASH or DISP\_ALWAYS */}
878         \textcolor{keywordflow}{if} (tglyph->\hyperlink{structtmp__glyph_acc72da60bdb24619fb87687d4575269a}{sidx})   \textcolor{comment}{/* been called at least once */}
879             \hyperlink{display_8c_a185c6ad6e4c5a6be26a371b9aa17c32e}{newsym}(tglyph->\hyperlink{structtmp__glyph_a8db5e1fe6036daa9a46d8ce11cff5ef2}{saved}[0].\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x}, tglyph->\hyperlink{structtmp__glyph_a8db5e1fe6036daa9a46d8ce11cff5ef2}{saved}[0].\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y});
880         \}
881      \textcolor{comment}{/* tglyph->sidx = 0; -- about to be freed, so not necessary */}
882         tmp = tglyph->\hyperlink{structtmp__glyph_a6766a3de9a941b007ad6908f10b1a296}{prev};
883         \textcolor{keywordflow}{if} (tglyph != &\hyperlink{display_8c_a495cf1fe6b86816cf07c64be2ad9d42c}{tgfirst}) \hyperlink{winproto_8h_a4bbec68d324de17b99fecede64b383ba}{free}((\hyperlink{tradstdc_8h_ad4a7dab7269b4b00e3c7c7d2e66f31cd}{genericptr\_t})tglyph);
884         tglyph = tmp;
885         \textcolor{keywordflow}{break};
886 
887     \textcolor{keywordflow}{default}:    \textcolor{comment}{/* do it */}
888         \textcolor{keywordflow}{if} (tglyph->\hyperlink{structtmp__glyph_ac6a6f9a0c1bf366f610a0195d9168d36}{style} == \hyperlink{display_8h_a9c17fd88e339ed28053bba97fbbff6cb}{DISP\_BEAM}) \{
889         \textcolor{keywordflow}{if} (!\hyperlink{vision_8h_a857efc720262bc13a9e4b4bcbb079b5c}{cansee}(x,y)) \textcolor{keywordflow}{break};
890         \textcolor{comment}{/* save pos for later erasing */}
891         tglyph->\hyperlink{structtmp__glyph_a8db5e1fe6036daa9a46d8ce11cff5ef2}{saved}[tglyph->\hyperlink{structtmp__glyph_acc72da60bdb24619fb87687d4575269a}{sidx}].\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x} = x;
892         tglyph->\hyperlink{structtmp__glyph_a8db5e1fe6036daa9a46d8ce11cff5ef2}{saved}[tglyph->\hyperlink{structtmp__glyph_acc72da60bdb24619fb87687d4575269a}{sidx}].\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y} = y;
893         tglyph->\hyperlink{structtmp__glyph_acc72da60bdb24619fb87687d4575269a}{sidx} += 1;
894         \} \textcolor{keywordflow}{else} \{    \textcolor{comment}{/* DISP\_FLASH/ALWAYS */}
895         \textcolor{keywordflow}{if} (tglyph->\hyperlink{structtmp__glyph_acc72da60bdb24619fb87687d4575269a}{sidx}) \{ \textcolor{comment}{/* not first call, so reset previous pos */}
896             \hyperlink{display_8c_a185c6ad6e4c5a6be26a371b9aa17c32e}{newsym}(tglyph->\hyperlink{structtmp__glyph_a8db5e1fe6036daa9a46d8ce11cff5ef2}{saved}[0].\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x}, tglyph->\hyperlink{structtmp__glyph_a8db5e1fe6036daa9a46d8ce11cff5ef2}{saved}[0].\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y});
897             tglyph->\hyperlink{structtmp__glyph_acc72da60bdb24619fb87687d4575269a}{sidx} = 0;   \textcolor{comment}{/* display is presently up to date */}
898         \}
899         \textcolor{keywordflow}{if} (!\hyperlink{vision_8h_a857efc720262bc13a9e4b4bcbb079b5c}{cansee}(x,y) && tglyph->\hyperlink{structtmp__glyph_ac6a6f9a0c1bf366f610a0195d9168d36}{style} != \hyperlink{display_8h_a649697258eb2dc5242572b7722f93ac6}{DISP\_ALWAYS}) \textcolor{keywordflow}{break};
900         tglyph->\hyperlink{structtmp__glyph_a8db5e1fe6036daa9a46d8ce11cff5ef2}{saved}[0].\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x} = x;
901         tglyph->\hyperlink{structtmp__glyph_a8db5e1fe6036daa9a46d8ce11cff5ef2}{saved}[0].\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y} = y;
902         tglyph->\hyperlink{structtmp__glyph_acc72da60bdb24619fb87687d4575269a}{sidx} = 1;
903         \}
904 
905         \hyperlink{display_8c_a60d3cfb0df75b80c36125ce154da217f}{show\_glyph}(x, y, tglyph->\hyperlink{structtmp__glyph_af4743a6cc16459f8e4ef775e5ebbc96a}{glyph}); \textcolor{comment}{/* show it */}
906         \hyperlink{display_8c_a47cdbc8092c02ed856defd22a0952aeb}{flush\_screen}(0);            \textcolor{comment}{/* make sure it shows up */}
907         \textcolor{keywordflow}{break};
908     \} \textcolor{comment}{/* end case */}
909 \}
\end{DoxyCode}
\hypertarget{display_8c_af14bb89d2638ab90083214d1f9ed19f4}{\index{display.\+c@{display.\+c}!under\+\_\+ground@{under\+\_\+ground}}
\index{under\+\_\+ground@{under\+\_\+ground}!display.\+c@{display.\+c}}
\subsubsection[{under\+\_\+ground}]{\setlength{\rightskip}{0pt plus 5cm}void under\+\_\+ground (
\begin{DoxyParamCaption}
\item[{int}]{mode}
\end{DoxyParamCaption}
)}}\label{display_8c_af14bb89d2638ab90083214d1f9ed19f4}


Definition at line 1024 of file display.\+c.



References cls(), F\+A\+L\+S\+E, newsym(), T\+R\+U\+E, u, you\+::ux, and you\+::uy.



Referenced by docrt(), food\+\_\+detect(), gold\+\_\+detect(), monster\+\_\+detect(), object\+\_\+detect(), and trap\+\_\+detect().


\begin{DoxyCode}
1026 \{
1027     \textcolor{keyword}{static} \textcolor{keywordtype}{boolean} dela;
1028 
1029     \textcolor{comment}{/* swallowing has a higher precedence than under ground */}
1030     \textcolor{keywordflow}{if} (\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.uswallow) \textcolor{keywordflow}{return};
1031 
1032     \textcolor{comment}{/* full update */}
1033     \textcolor{keywordflow}{if} (mode == 1 || dela) \{
1034     \hyperlink{display_8c_a4826277cc150ddc0f4de4bd464a34909}{cls}();
1035     dela = \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
1036     \}
1037     \textcolor{comment}{/* delayed full update */}
1038     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (mode == 2) \{
1039     dela = \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
1040     \textcolor{keywordflow}{return};
1041     \}
1042     \textcolor{comment}{/* limited update */}
1043     \textcolor{keywordflow}{else}
1044     \hyperlink{display_8c_a185c6ad6e4c5a6be26a371b9aa17c32e}{newsym}(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux},\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy});
1045 \}
\end{DoxyCode}
\hypertarget{display_8c_a04df1dff0b7b4d1eafd5078265a3d451}{\index{display.\+c@{display.\+c}!under\+\_\+water@{under\+\_\+water}}
\index{under\+\_\+water@{under\+\_\+water}!display.\+c@{display.\+c}}
\subsubsection[{under\+\_\+water}]{\setlength{\rightskip}{0pt plus 5cm}void under\+\_\+water (
\begin{DoxyParamCaption}
\item[{int}]{mode}
\end{DoxyParamCaption}
)}}\label{display_8c_a04df1dff0b7b4d1eafd5078265a3d451}


Definition at line 979 of file display.\+c.



References Blind, cls(), cmap\+\_\+to\+\_\+glyph, F\+A\+L\+S\+E, Is\+\_\+waterlevel, newsym(), S\+\_\+stone, show\+\_\+glyph(), T\+R\+U\+E, u, you\+::ux, you\+::uy, and you\+::uz.



Referenced by docrt(), food\+\_\+detect(), gold\+\_\+detect(), monster\+\_\+detect(), object\+\_\+detect(), and trap\+\_\+detect().


\begin{DoxyCode}
981 \{
982     \textcolor{keyword}{static} \hyperlink{global_8h_a2043b7d01ce89f4ee2fa6c345a752d32}{xchar} lastx, lasty;
983     \textcolor{keyword}{static} \textcolor{keywordtype}{boolean} dela;
984     \textcolor{keyword}{register} \textcolor{keywordtype}{int} x, y;
985 
986     \textcolor{comment}{/* swallowing has a higher precedence than under water */}
987     \textcolor{keywordflow}{if} (\hyperlink{dungeon_8h_a9fd7b21db47607a73332aa75ba8f4832}{Is\_waterlevel}(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz}) || \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.uswallow) \textcolor{keywordflow}{return};
988 
989     \textcolor{comment}{/* full update */}
990     \textcolor{keywordflow}{if} (mode == 1 || dela) \{
991     \hyperlink{display_8c_a4826277cc150ddc0f4de4bd464a34909}{cls}();
992     dela = \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
993     \}
994     \textcolor{comment}{/* delayed full update */}
995     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (mode == 2) \{
996     dela = \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
997     \textcolor{keywordflow}{return};
998     \}
999     \textcolor{comment}{/* limited update */}
1000     \textcolor{keywordflow}{else} \{
1001     \textcolor{keywordflow}{for} (y = lasty-1; y <= lasty+1; y++)
1002         \textcolor{keywordflow}{for} (x = lastx-1; x <= lastx+1; x++)
1003         \textcolor{keywordflow}{if} (isok(x,y))
1004             \hyperlink{display_8c_a60d3cfb0df75b80c36125ce154da217f}{show\_glyph}(x,y,\hyperlink{display_8h_a77e69d3b11c3296576f840c9d11ae8fb}{cmap\_to\_glyph}(\hyperlink{rm_8h_a342b42eb0fe3236adbc700b6e725d781}{S\_stone}));
1005     \}
1006     \textcolor{keywordflow}{for} (x = \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux}-1; x <= \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux}+1; x++)
1007     \textcolor{keywordflow}{for} (y = \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy}-1; y <= \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy}+1; y++)
1008         \textcolor{keywordflow}{if} (isok(x,y) && is\_pool(x,y)) \{
1009         \textcolor{keywordflow}{if} (\hyperlink{youprop_8h_a1b6e24068169af4177e15b48595c08c9}{Blind} && !(x == \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux} && y == \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy}))
1010             \hyperlink{display_8c_a60d3cfb0df75b80c36125ce154da217f}{show\_glyph}(x,y,\hyperlink{display_8h_a77e69d3b11c3296576f840c9d11ae8fb}{cmap\_to\_glyph}(\hyperlink{rm_8h_a342b42eb0fe3236adbc700b6e725d781}{S\_stone}));
1011         \textcolor{keywordflow}{else}    
1012             \hyperlink{display_8c_a185c6ad6e4c5a6be26a371b9aa17c32e}{newsym}(x,y);
1013         \}
1014     lastx = \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux};
1015     lasty = \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy};
1016 \}
\end{DoxyCode}
\hypertarget{display_8c_ae4c63c21336f923f86fa95ca4c8055fb}{\index{display.\+c@{display.\+c}!unmap\+\_\+object@{unmap\+\_\+object}}
\index{unmap\+\_\+object@{unmap\+\_\+object}!display.\+c@{display.\+c}}
\subsubsection[{unmap\+\_\+object}]{\setlength{\rightskip}{0pt plus 5cm}void unmap\+\_\+object (
\begin{DoxyParamCaption}
\item[{int}]{x, }
\item[{int}]{y}
\end{DoxyParamCaption}
)}}\label{display_8c_ae4c63c21336f923f86fa95ca4c8055fb}


Definition at line 292 of file display.\+c.



References cmap\+\_\+to\+\_\+glyph, covers\+\_\+traps, dlevel\+\_\+t\+::flags, rm\+::glyph, level, levl, map\+\_\+background(), map\+\_\+trap(), R\+O\+O\+M, S\+\_\+room, S\+\_\+stone, and rm\+::typ.



Referenced by clear\+\_\+stale\+\_\+map(), dokick(), dosearch0(), findone(), and kick\+\_\+monster().


\begin{DoxyCode}
294 \{
295     \textcolor{keyword}{register} \textcolor{keyword}{struct }\hyperlink{structtrap}{trap} *\hyperlink{structtrap}{trap};
296 
297     \textcolor{keywordflow}{if} (!\hyperlink{rm_8h_a721c99bfa099c4225215ba102e91fa39}{level}.\hyperlink{structdlevel__t_ad52c01d015e2456cdae3300848115916}{flags}.hero\_memory) \textcolor{keywordflow}{return};
298 
299     \textcolor{keywordflow}{if} ((trap = t\_at(\hyperlink{structtrap_aed25254cf556e3eae09dd98576d98d45}{x},\hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y})) != 0 && trap->tseen && !\hyperlink{display_8h_a2d2c214a096fc0768048597220e79339}{covers\_traps}(\hyperlink{structtrap_aed25254cf556e3eae09dd98576d98d45}{x},
      \hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y}))
300     \hyperlink{display_8c_ac74653df91c3a6b4f9c35d371bb55e6e}{map\_trap}(trap, 0);
301     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{rm_8h_a8cd681fba60fdedbabfd71a0b4bbfc00}{levl}[\hyperlink{structtrap_aed25254cf556e3eae09dd98576d98d45}{x}][\hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y}].seenv) \{
302     \textcolor{keyword}{struct }\hyperlink{structrm}{rm} *lev = &\hyperlink{rm_8h_a8cd681fba60fdedbabfd71a0b4bbfc00}{levl}[x][y];
303 
304     \hyperlink{display_8c_abe2bc3c09d117e9c709ac1c01d73c8fb}{map\_background}(x, y, 0);
305 
306     \textcolor{comment}{/* turn remembered dark room squares dark */}
307     \textcolor{keywordflow}{if} (!lev->waslit && lev->\hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} == \hyperlink{display_8h_a77e69d3b11c3296576f840c9d11ae8fb}{cmap\_to\_glyph}(\hyperlink{rm_8h_a1cbe62db5502d1ece3d5cce996ff8164}{S\_room}) &&
308                                 lev->\hyperlink{structrm_aa144ade377ba175f037c4e637329d4dc}{typ} == \hyperlink{rm_8h_ae635489e987ae17a3bf884376cc2fe34}{ROOM})
309         lev->\hyperlink{structrm_a35df3d254aba2b97739aed75313cbe5c}{glyph} = \hyperlink{display_8h_a77e69d3b11c3296576f840c9d11ae8fb}{cmap\_to\_glyph}(\hyperlink{rm_8h_a342b42eb0fe3236adbc700b6e725d781}{S\_stone});
310     \} \textcolor{keywordflow}{else}
311     \hyperlink{rm_8h_a8cd681fba60fdedbabfd71a0b4bbfc00}{levl}[x][y].glyph = \hyperlink{display_8h_a77e69d3b11c3296576f840c9d11ae8fb}{cmap\_to\_glyph}(\hyperlink{rm_8h_a342b42eb0fe3236adbc700b6e725d781}{S\_stone});  \textcolor{comment}{/* default val */}
312 \}
\end{DoxyCode}
\hypertarget{display_8c_a3157db3be192096a6b81e45ddaa5a9e1}{\index{display.\+c@{display.\+c}!wall\+\_\+angle@{wall\+\_\+angle}}
\index{wall\+\_\+angle@{wall\+\_\+angle}!display.\+c@{display.\+c}}
\subsubsection[{wall\+\_\+angle}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} int wall\+\_\+angle (
\begin{DoxyParamCaption}
\item[{struct {\bf rm} $\ast$}]{lev}
\end{DoxyParamCaption}
)}}\label{display_8c_a3157db3be192096a6b81e45ddaa5a9e1}


Definition at line 1903 of file display.\+c.



References B\+L\+C\+O\+R\+N\+E\+R, B\+R\+C\+O\+R\+N\+E\+R, C\+\_\+bl, C\+\_\+blcorn, C\+\_\+br, C\+\_\+brcorn, C\+\_\+crwall, C\+\_\+tl, C\+\_\+tlwall, C\+\_\+tr, C\+\_\+trcorn, C\+\_\+tuwall, C\+R\+O\+S\+S\+W\+A\+L\+L, H\+W\+A\+L\+L, only, S\+\_\+blcorn, S\+\_\+brcorn, S\+\_\+crwall, S\+\_\+hwall, S\+\_\+stone, S\+\_\+tdwall, S\+\_\+tlcorn, S\+\_\+tlwall, S\+\_\+trcorn, S\+\_\+trwall, S\+\_\+tuwall, S\+\_\+vwall, S\+D\+O\+O\+R, rm\+::seenv, set\+\_\+corner, S\+V0, S\+V1, S\+V2, S\+V3, S\+V4, S\+V5, S\+V6, S\+V7, T\+\_\+d, T\+\_\+hwall, T\+\_\+l, T\+\_\+r, T\+\_\+stone, T\+\_\+tdwall, T\+\_\+tlcorn, T\+\_\+trcorn, T\+\_\+u, t\+\_\+warn(), T\+D\+W\+A\+L\+L, T\+L\+C\+O\+R\+N\+E\+R, T\+L\+W\+A\+L\+L, T\+R\+C\+O\+R\+N\+E\+R, T\+R\+W\+A\+L\+L, T\+U\+W\+A\+L\+L, V\+W\+A\+L\+L, W\+M\+\_\+\+M\+A\+S\+K, W\+M\+\_\+\+T\+\_\+\+B\+L, W\+M\+\_\+\+T\+\_\+\+B\+R, W\+M\+\_\+\+T\+\_\+\+L\+O\+N\+G, W\+M\+\_\+\+X\+\_\+\+B\+L, W\+M\+\_\+\+X\+\_\+\+B\+L\+T\+R, W\+M\+\_\+\+X\+\_\+\+B\+R, W\+M\+\_\+\+X\+\_\+\+T\+L, W\+M\+\_\+\+X\+\_\+\+T\+L\+B\+R, and W\+M\+\_\+\+X\+\_\+\+T\+R.



Referenced by back\+\_\+to\+\_\+glyph().


\begin{DoxyCode}
1905 \{
1906     \textcolor{keyword}{register} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \hyperlink{structrm_a34555313c127be5f736123f994cb1770}{seenv} = lev->\hyperlink{structrm_a34555313c127be5f736123f994cb1770}{seenv} & 0xff;
1907     \textcolor{keyword}{const} \textcolor{keywordtype}{int} *row;
1908     \textcolor{keywordtype}{int} col, idx;
1909 
1910 \textcolor{preprocessor}{#define only(sv, bits)  (((sv) & (bits)) && ! ((sv) & ~(bits)))}
1911     \textcolor{keywordflow}{switch} (lev->\hyperlink{structrm_aa144ade377ba175f037c4e637329d4dc}{typ}) \{
1912     \textcolor{keywordflow}{case} \hyperlink{rm_8h_a618fa341dec5d9aeb5ac67deb7011d29}{TUWALL}:
1913         row = \hyperlink{display_8c_a98d2bf40d5c38b479c230af0fac15cb4}{wall\_matrix}[\hyperlink{display_8c_ae96d188345747de83922279736725499}{T\_u}];
1914         seenv = (seenv >> 4 | seenv << 4) & 0xff;\textcolor{comment}{/* rotate to tdwall */}
1915         \textcolor{keywordflow}{goto} do\_twall;
1916     \textcolor{keywordflow}{case} \hyperlink{rm_8h_abec53816dd76f979866fbb2926b7af64}{TLWALL}:
1917         row = \hyperlink{display_8c_a98d2bf40d5c38b479c230af0fac15cb4}{wall\_matrix}[\hyperlink{display_8c_ab567e983bd521e399d7dd5cb16d85f12}{T\_l}];
1918         seenv = (seenv >> 2 | seenv << 6) & 0xff;\textcolor{comment}{/* rotate to tdwall */}
1919         \textcolor{keywordflow}{goto} do\_twall;
1920     \textcolor{keywordflow}{case} \hyperlink{rm_8h_a9290fa8691acb3539d3381fec0e4b24a}{TRWALL}:
1921         row = \hyperlink{display_8c_a98d2bf40d5c38b479c230af0fac15cb4}{wall\_matrix}[\hyperlink{display_8c_ad5a2597d3f99cc31bb9bf4e0471f3a37}{T\_r}];
1922         seenv = (seenv >> 6 | seenv << 2) & 0xff;\textcolor{comment}{/* rotate to tdwall */}
1923         \textcolor{keywordflow}{goto} do\_twall;
1924     \textcolor{keywordflow}{case} \hyperlink{rm_8h_ab847e2347534eeb83217f5b36815b88d}{TDWALL}:
1925         row = \hyperlink{display_8c_a98d2bf40d5c38b479c230af0fac15cb4}{wall\_matrix}[\hyperlink{display_8c_ad4c5276f26296428048f604b9ec92e4e}{T\_d}];
1926 do\_twall:
1927         \textcolor{keywordflow}{switch} (lev->wall\_info & \hyperlink{rm_8h_aa8daf0cc89d46c79b0af7a430c725d25}{WM\_MASK}) \{
1928             \textcolor{keywordflow}{case} 0:
1929             \textcolor{keywordflow}{if} (seenv == \hyperlink{rm_8h_ae57ff0e480bf6bab952b20b368a18614}{SV4}) \{
1930                 col = \hyperlink{display_8c_a4d4a3c0500acd30c5ce7b333d1487b87}{T\_tlcorn};
1931             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (seenv == \hyperlink{rm_8h_aea098a8a86ed3a356662737b68566f6e}{SV6}) \{
1932                 col = \hyperlink{display_8c_a2afacf5bb74d6b695b9a2fd4b4faa81e}{T\_trcorn};
1933             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (seenv & (\hyperlink{rm_8h_a2896ce71c80010541ba60ce40bc742a6}{SV3}|\hyperlink{rm_8h_abf049e3dceefda229233b30710c3c356}{SV5}|\hyperlink{rm_8h_a7305767259b5f96ed18cd7e7f491b0e4}{SV7}) ||
1934                         ((seenv & \hyperlink{rm_8h_ae57ff0e480bf6bab952b20b368a18614}{SV4}) && (seenv & \hyperlink{rm_8h_aea098a8a86ed3a356662737b68566f6e}{SV6}))) \{
1935                 col = \hyperlink{display_8c_a6ff4a38dd32a0cca1d71f44965c25f6a}{T\_tdwall};
1936             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (seenv & (\hyperlink{rm_8h_a765db608a4b2d0b1ee5d0e038de7b656}{SV0}|\hyperlink{rm_8h_a4ad1c11449b99b2eb20ceebcafc87eff}{SV1}|\hyperlink{rm_8h_a54023c46e5e913847c6e57d720312e97}{SV2})) \{
1937                 col = (seenv & (\hyperlink{rm_8h_ae57ff0e480bf6bab952b20b368a18614}{SV4}|\hyperlink{rm_8h_aea098a8a86ed3a356662737b68566f6e}{SV6}) ? \hyperlink{display_8c_a6ff4a38dd32a0cca1d71f44965c25f6a}{T\_tdwall} : \hyperlink{display_8c_a04e95e14c0182c8ac328551e32d67e9d}{T\_hwall});
1938             \} \textcolor{keywordflow}{else} \{
1939                 \hyperlink{display_8c_a9e332163925dc030909f8463542ca6d5}{t\_warn}(lev);
1940                 col = \hyperlink{display_8c_a2225d339242f472d2d7049f37315fffa}{T\_stone};
1941             \}
1942             \textcolor{keywordflow}{break};
1943             \textcolor{keywordflow}{case} \hyperlink{rm_8h_a7538ca54d4df412b00530ecb7f8a5531}{WM\_T\_LONG}:
1944             \textcolor{keywordflow}{if} (seenv & (\hyperlink{rm_8h_a2896ce71c80010541ba60ce40bc742a6}{SV3}|\hyperlink{rm_8h_ae57ff0e480bf6bab952b20b368a18614}{SV4}) && !(seenv & (\hyperlink{rm_8h_abf049e3dceefda229233b30710c3c356}{SV5}|SV6|\hyperlink{rm_8h_a7305767259b5f96ed18cd7e7f491b0e4}{SV7}))) \{
1945                 col = \hyperlink{display_8c_a4d4a3c0500acd30c5ce7b333d1487b87}{T\_tlcorn};
1946             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (seenv&(SV6|\hyperlink{rm_8h_a7305767259b5f96ed18cd7e7f491b0e4}{SV7}) && !(seenv&(\hyperlink{rm_8h_a2896ce71c80010541ba60ce40bc742a6}{SV3}|\hyperlink{rm_8h_ae57ff0e480bf6bab952b20b368a18614}{SV4}|\hyperlink{rm_8h_abf049e3dceefda229233b30710c3c356}{SV5}))) \{
1947                 col = \hyperlink{display_8c_a2afacf5bb74d6b695b9a2fd4b4faa81e}{T\_trcorn};
1948             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((seenv & \hyperlink{rm_8h_abf049e3dceefda229233b30710c3c356}{SV5}) ||
1949                 ((seenv & (\hyperlink{rm_8h_a2896ce71c80010541ba60ce40bc742a6}{SV3}|\hyperlink{rm_8h_ae57ff0e480bf6bab952b20b368a18614}{SV4})) && (seenv & (SV6|\hyperlink{rm_8h_a7305767259b5f96ed18cd7e7f491b0e4}{SV7})))) \{
1950                 col = \hyperlink{display_8c_a6ff4a38dd32a0cca1d71f44965c25f6a}{T\_tdwall};
1951             \} \textcolor{keywordflow}{else} \{
1952                 \textcolor{comment}{/* only SV0|SV1|SV2 */}
1953                 \textcolor{keywordflow}{if} (! \hyperlink{display_8c_a75d2d8101c02fbe9b2ee7742a07a9f19}{only}(seenv, \hyperlink{rm_8h_a765db608a4b2d0b1ee5d0e038de7b656}{SV0}|\hyperlink{rm_8h_a4ad1c11449b99b2eb20ceebcafc87eff}{SV1}|\hyperlink{rm_8h_a54023c46e5e913847c6e57d720312e97}{SV2}) )
1954                 \hyperlink{display_8c_a9e332163925dc030909f8463542ca6d5}{t\_warn}(lev);
1955                 col = \hyperlink{display_8c_a2225d339242f472d2d7049f37315fffa}{T\_stone};
1956             \}
1957             \textcolor{keywordflow}{break};
1958             \textcolor{keywordflow}{case} \hyperlink{rm_8h_aaa301cfa42d419b8eb10045806ed94d8}{WM\_T\_BL}:
1959 \textcolor{preprocessor}{#if 0   }\textcolor{comment}{/* older method, fixed */}\textcolor{preprocessor}{}
1960             \textcolor{keywordflow}{if} (\hyperlink{display_8c_a75d2d8101c02fbe9b2ee7742a07a9f19}{only}(seenv, \hyperlink{rm_8h_ae57ff0e480bf6bab952b20b368a18614}{SV4}|SV5)) \{
1961                 col = \hyperlink{display_8c_a4d4a3c0500acd30c5ce7b333d1487b87}{T\_tlcorn};
1962             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((seenv & (\hyperlink{rm_8h_a765db608a4b2d0b1ee5d0e038de7b656}{SV0}|\hyperlink{rm_8h_a4ad1c11449b99b2eb20ceebcafc87eff}{SV1}|\hyperlink{rm_8h_a54023c46e5e913847c6e57d720312e97}{SV2})) &&
1963                     \hyperlink{display_8c_a75d2d8101c02fbe9b2ee7742a07a9f19}{only}(seenv, \hyperlink{rm_8h_a765db608a4b2d0b1ee5d0e038de7b656}{SV0}|\hyperlink{rm_8h_a4ad1c11449b99b2eb20ceebcafc87eff}{SV1}|\hyperlink{rm_8h_a54023c46e5e913847c6e57d720312e97}{SV2}|SV6|\hyperlink{rm_8h_a7305767259b5f96ed18cd7e7f491b0e4}{SV7})) \{
1964                 col = \hyperlink{display_8c_a04e95e14c0182c8ac328551e32d67e9d}{T\_hwall};
1965             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (seenv & \hyperlink{rm_8h_a2896ce71c80010541ba60ce40bc742a6}{SV3} ||
1966                 ((seenv & (\hyperlink{rm_8h_a765db608a4b2d0b1ee5d0e038de7b656}{SV0}|\hyperlink{rm_8h_a4ad1c11449b99b2eb20ceebcafc87eff}{SV1}|\hyperlink{rm_8h_a54023c46e5e913847c6e57d720312e97}{SV2})) && (seenv & (\hyperlink{rm_8h_ae57ff0e480bf6bab952b20b368a18614}{SV4}|SV5)))) \{
1967                 col = \hyperlink{display_8c_a6ff4a38dd32a0cca1d71f44965c25f6a}{T\_tdwall};
1968             \} \textcolor{keywordflow}{else} \{
1969                 \textcolor{keywordflow}{if} (seenv != SV6)
1970                 \hyperlink{display_8c_a9e332163925dc030909f8463542ca6d5}{t\_warn}(lev);
1971                 col = \hyperlink{display_8c_a2225d339242f472d2d7049f37315fffa}{T\_stone};
1972             \}
1973 \textcolor{preprocessor}{#endif  }\textcolor{comment}{/* 0 */}\textcolor{preprocessor}{}
1974             \textcolor{keywordflow}{if} (\hyperlink{display_8c_a75d2d8101c02fbe9b2ee7742a07a9f19}{only}(seenv, \hyperlink{rm_8h_ae57ff0e480bf6bab952b20b368a18614}{SV4}|SV5))
1975                 col = \hyperlink{display_8c_a4d4a3c0500acd30c5ce7b333d1487b87}{T\_tlcorn};
1976             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((seenv & (\hyperlink{rm_8h_a765db608a4b2d0b1ee5d0e038de7b656}{SV0}|\hyperlink{rm_8h_a4ad1c11449b99b2eb20ceebcafc87eff}{SV1}|\hyperlink{rm_8h_a54023c46e5e913847c6e57d720312e97}{SV2}|\hyperlink{rm_8h_a7305767259b5f96ed18cd7e7f491b0e4}{SV7})) &&
1977                     !(seenv & (\hyperlink{rm_8h_a2896ce71c80010541ba60ce40bc742a6}{SV3}|\hyperlink{rm_8h_ae57ff0e480bf6bab952b20b368a18614}{SV4}|SV5)))
1978                 col = \hyperlink{display_8c_a04e95e14c0182c8ac328551e32d67e9d}{T\_hwall};
1979             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{display_8c_a75d2d8101c02fbe9b2ee7742a07a9f19}{only}(seenv, SV6))
1980                 col = \hyperlink{display_8c_a2225d339242f472d2d7049f37315fffa}{T\_stone};
1981             \textcolor{keywordflow}{else}
1982                 col = \hyperlink{display_8c_a6ff4a38dd32a0cca1d71f44965c25f6a}{T\_tdwall};
1983             \textcolor{keywordflow}{break};
1984             \textcolor{keywordflow}{case} \hyperlink{rm_8h_a3010e8f9832289b0f6ea74a1da34bcf2}{WM\_T\_BR}:
1985 \textcolor{preprocessor}{#if 0   }\textcolor{comment}{/* older method, fixed */}\textcolor{preprocessor}{}
1986             \textcolor{keywordflow}{if} (\hyperlink{display_8c_a75d2d8101c02fbe9b2ee7742a07a9f19}{only}(seenv, SV5|SV6)) \{
1987                 col = \hyperlink{display_8c_a2afacf5bb74d6b695b9a2fd4b4faa81e}{T\_trcorn};
1988             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((seenv & (\hyperlink{rm_8h_a765db608a4b2d0b1ee5d0e038de7b656}{SV0}|\hyperlink{rm_8h_a4ad1c11449b99b2eb20ceebcafc87eff}{SV1}|\hyperlink{rm_8h_a54023c46e5e913847c6e57d720312e97}{SV2})) &&
1989                         \hyperlink{display_8c_a75d2d8101c02fbe9b2ee7742a07a9f19}{only}(seenv, \hyperlink{rm_8h_a765db608a4b2d0b1ee5d0e038de7b656}{SV0}|\hyperlink{rm_8h_a4ad1c11449b99b2eb20ceebcafc87eff}{SV1}|\hyperlink{rm_8h_a54023c46e5e913847c6e57d720312e97}{SV2}|\hyperlink{rm_8h_a2896ce71c80010541ba60ce40bc742a6}{SV3}|\hyperlink{rm_8h_ae57ff0e480bf6bab952b20b368a18614}{SV4})) \{
1990                 col = \hyperlink{display_8c_a04e95e14c0182c8ac328551e32d67e9d}{T\_hwall};
1991             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (seenv & \hyperlink{rm_8h_a7305767259b5f96ed18cd7e7f491b0e4}{SV7} ||
1992                 ((seenv & (\hyperlink{rm_8h_a765db608a4b2d0b1ee5d0e038de7b656}{SV0}|\hyperlink{rm_8h_a4ad1c11449b99b2eb20ceebcafc87eff}{SV1}|\hyperlink{rm_8h_a54023c46e5e913847c6e57d720312e97}{SV2})) && (seenv & (SV5|SV6)))) \{
1993                 col = \hyperlink{display_8c_a6ff4a38dd32a0cca1d71f44965c25f6a}{T\_tdwall};
1994             \} \textcolor{keywordflow}{else} \{
1995                 \textcolor{keywordflow}{if} (seenv != \hyperlink{rm_8h_ae57ff0e480bf6bab952b20b368a18614}{SV4})
1996                 \hyperlink{display_8c_a9e332163925dc030909f8463542ca6d5}{t\_warn}(lev);
1997                 col = \hyperlink{display_8c_a2225d339242f472d2d7049f37315fffa}{T\_stone};
1998             \}
1999 \textcolor{preprocessor}{#endif  }\textcolor{comment}{/* 0 */}\textcolor{preprocessor}{}
2000             \textcolor{keywordflow}{if} (\hyperlink{display_8c_a75d2d8101c02fbe9b2ee7742a07a9f19}{only}(seenv, SV5|SV6))
2001                 col = \hyperlink{display_8c_a2afacf5bb74d6b695b9a2fd4b4faa81e}{T\_trcorn};
2002             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((seenv & (\hyperlink{rm_8h_a765db608a4b2d0b1ee5d0e038de7b656}{SV0}|\hyperlink{rm_8h_a4ad1c11449b99b2eb20ceebcafc87eff}{SV1}|\hyperlink{rm_8h_a54023c46e5e913847c6e57d720312e97}{SV2}|\hyperlink{rm_8h_a2896ce71c80010541ba60ce40bc742a6}{SV3})) &&
2003                     !(seenv & (SV5|SV6|\hyperlink{rm_8h_a7305767259b5f96ed18cd7e7f491b0e4}{SV7})))
2004                 col = \hyperlink{display_8c_a04e95e14c0182c8ac328551e32d67e9d}{T\_hwall};
2005             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{display_8c_a75d2d8101c02fbe9b2ee7742a07a9f19}{only}(seenv, \hyperlink{rm_8h_ae57ff0e480bf6bab952b20b368a18614}{SV4}))
2006                 col = \hyperlink{display_8c_a2225d339242f472d2d7049f37315fffa}{T\_stone};
2007             \textcolor{keywordflow}{else}
2008                 col = \hyperlink{display_8c_a6ff4a38dd32a0cca1d71f44965c25f6a}{T\_tdwall};
2009 
2010             \textcolor{keywordflow}{break};
2011             \textcolor{keywordflow}{default}:
2012             impossible(\textcolor{stringliteral}{"wall\_angle: unknown T wall mode %d"},
2013                 lev->wall\_info & \hyperlink{rm_8h_aa8daf0cc89d46c79b0af7a430c725d25}{WM\_MASK});
2014             col = \hyperlink{display_8c_a2225d339242f472d2d7049f37315fffa}{T\_stone};
2015             \textcolor{keywordflow}{break};
2016         \}
2017         idx = row[col];
2018         \textcolor{keywordflow}{break};
2019 
2020     \textcolor{keywordflow}{case} \hyperlink{rm_8h_a03fd0fa1e0dbd19ea38dff0c79e656a5}{SDOOR}:
2021         \textcolor{keywordflow}{if} (lev->horizontal) \textcolor{keywordflow}{goto} horiz;
2022         \textcolor{comment}{/* fall through */}
2023     \textcolor{keywordflow}{case} \hyperlink{rm_8h_a9a3afc2fb445bb43a1776de4ebe9852e}{VWALL}:
2024         \textcolor{keywordflow}{switch} (lev->wall\_info & \hyperlink{rm_8h_aa8daf0cc89d46c79b0af7a430c725d25}{WM\_MASK}) \{
2025             \textcolor{keywordflow}{case} 0: idx = seenv ? \hyperlink{rm_8h_a635ec6ccc74b900ac3150afe85bdfdf0}{S\_vwall} : \hyperlink{rm_8h_a342b42eb0fe3236adbc700b6e725d781}{S\_stone}; \textcolor{keywordflow}{break};
2026             \textcolor{keywordflow}{case} 1: idx = seenv & (\hyperlink{rm_8h_a4ad1c11449b99b2eb20ceebcafc87eff}{SV1}|\hyperlink{rm_8h_a54023c46e5e913847c6e57d720312e97}{SV2}|\hyperlink{rm_8h_a2896ce71c80010541ba60ce40bc742a6}{SV3}|\hyperlink{rm_8h_ae57ff0e480bf6bab952b20b368a18614}{SV4}|\hyperlink{rm_8h_abf049e3dceefda229233b30710c3c356}{SV5}) ? \hyperlink{rm_8h_a635ec6ccc74b900ac3150afe85bdfdf0}{S\_vwall} :
2027                                   \hyperlink{rm_8h_a342b42eb0fe3236adbc700b6e725d781}{S\_stone};
2028                 \textcolor{keywordflow}{break};
2029             \textcolor{keywordflow}{case} 2: idx = seenv & (\hyperlink{rm_8h_a765db608a4b2d0b1ee5d0e038de7b656}{SV0}|\hyperlink{rm_8h_a4ad1c11449b99b2eb20ceebcafc87eff}{SV1}|SV5|SV6|\hyperlink{rm_8h_a7305767259b5f96ed18cd7e7f491b0e4}{SV7}) ? \hyperlink{rm_8h_a635ec6ccc74b900ac3150afe85bdfdf0}{S\_vwall} :
2030                                   \hyperlink{rm_8h_a342b42eb0fe3236adbc700b6e725d781}{S\_stone};
2031                 \textcolor{keywordflow}{break};
2032             \textcolor{keywordflow}{default}:
2033             impossible(\textcolor{stringliteral}{"wall\_angle: unknown vwall mode %d"},
2034                 lev->wall\_info & \hyperlink{rm_8h_aa8daf0cc89d46c79b0af7a430c725d25}{WM\_MASK});
2035             idx = \hyperlink{rm_8h_a342b42eb0fe3236adbc700b6e725d781}{S\_stone};
2036             \textcolor{keywordflow}{break};
2037         \}
2038         \textcolor{keywordflow}{break};
2039 
2040     \textcolor{keywordflow}{case} \hyperlink{rm_8h_a3fcd4705d7b0ac05a88302170fcc58f5}{HWALL}:
2041 horiz:
2042         \textcolor{keywordflow}{switch} (lev->wall\_info & \hyperlink{rm_8h_aa8daf0cc89d46c79b0af7a430c725d25}{WM\_MASK}) \{
2043             \textcolor{keywordflow}{case} 0: idx = seenv ? \hyperlink{rm_8h_a0f1cd29cae28adce681b483b0418769d}{S\_hwall} : \hyperlink{rm_8h_a342b42eb0fe3236adbc700b6e725d781}{S\_stone}; \textcolor{keywordflow}{break};
2044             \textcolor{keywordflow}{case} 1: idx = seenv & (\hyperlink{rm_8h_a2896ce71c80010541ba60ce40bc742a6}{SV3}|\hyperlink{rm_8h_ae57ff0e480bf6bab952b20b368a18614}{SV4}|SV5|SV6|\hyperlink{rm_8h_a7305767259b5f96ed18cd7e7f491b0e4}{SV7}) ? \hyperlink{rm_8h_a0f1cd29cae28adce681b483b0418769d}{S\_hwall} :
2045                                   \hyperlink{rm_8h_a342b42eb0fe3236adbc700b6e725d781}{S\_stone};
2046                 \textcolor{keywordflow}{break};
2047             \textcolor{keywordflow}{case} 2: idx = seenv & (\hyperlink{rm_8h_a765db608a4b2d0b1ee5d0e038de7b656}{SV0}|\hyperlink{rm_8h_a4ad1c11449b99b2eb20ceebcafc87eff}{SV1}|\hyperlink{rm_8h_a54023c46e5e913847c6e57d720312e97}{SV2}|\hyperlink{rm_8h_a2896ce71c80010541ba60ce40bc742a6}{SV3}|\hyperlink{rm_8h_a7305767259b5f96ed18cd7e7f491b0e4}{SV7}) ? \hyperlink{rm_8h_a0f1cd29cae28adce681b483b0418769d}{S\_hwall} :
2048                                   \hyperlink{rm_8h_a342b42eb0fe3236adbc700b6e725d781}{S\_stone};
2049                 \textcolor{keywordflow}{break};
2050             \textcolor{keywordflow}{default}:
2051             impossible(\textcolor{stringliteral}{"wall\_angle: unknown hwall mode %d"},
2052                 lev->wall\_info & \hyperlink{rm_8h_aa8daf0cc89d46c79b0af7a430c725d25}{WM\_MASK});
2053             idx = \hyperlink{rm_8h_a342b42eb0fe3236adbc700b6e725d781}{S\_stone};
2054             \textcolor{keywordflow}{break};
2055         \}
2056         \textcolor{keywordflow}{break};
2057 
2058 \textcolor{preprocessor}{#define set\_corner(idx, lev, which, outer, inner, name) \(\backslash\)}
2059 \textcolor{preprocessor}{    switch ((lev)->wall\_info & WM\_MASK) \{                   \(\backslash\)}
2060 \textcolor{preprocessor}{    case 0:      idx = which; break;                    \(\backslash\)}
2061 \textcolor{preprocessor}{    case WM\_C\_OUTER: idx = seenv &  (outer) ? which : S\_stone; break;   \(\backslash\)}
2062 \textcolor{preprocessor}{    case WM\_C\_INNER: idx = seenv & ~(inner) ? which : S\_stone; break;   \(\backslash\)}
2063 \textcolor{preprocessor}{    default:                                \(\backslash\)}
2064 \textcolor{preprocessor}{        impossible("wall\_angle: unknown %s mode %d", name,          \(\backslash\)}
2065 \textcolor{preprocessor}{        (lev)->wall\_info & WM\_MASK);                    \(\backslash\)}
2066 \textcolor{preprocessor}{        idx = S\_stone;                          \(\backslash\)}
2067 \textcolor{preprocessor}{        break;                              \(\backslash\)}
2068 \textcolor{preprocessor}{    \}}
2069 
2070     \textcolor{keywordflow}{case} \hyperlink{rm_8h_ade633f6a4bac3d7c501e28d15c536d3d}{TLCORNER}:
2071         \hyperlink{display_8c_a4e6544c5de862c6f923bd077e42f571f}{set\_corner}(idx, lev, \hyperlink{rm_8h_abb0c9b2dd7ac4ed21d280e9b7bcb8168}{S\_tlcorn}, (\hyperlink{rm_8h_a2896ce71c80010541ba60ce40bc742a6}{SV3}|\hyperlink{rm_8h_ae57ff0e480bf6bab952b20b368a18614}{SV4}|SV5), 
      \hyperlink{rm_8h_ae57ff0e480bf6bab952b20b368a18614}{SV4}, \textcolor{stringliteral}{"tlcorn"});
2072         \textcolor{keywordflow}{break};
2073     \textcolor{keywordflow}{case} \hyperlink{rm_8h_adc954c30dd37b0942000262623e9c76e}{TRCORNER}:
2074         \hyperlink{display_8c_a4e6544c5de862c6f923bd077e42f571f}{set\_corner}(idx, lev, \hyperlink{rm_8h_a7e5f5333bbad9631225f2ce6716f08a3}{S\_trcorn}, (SV5|SV6|\hyperlink{rm_8h_a7305767259b5f96ed18cd7e7f491b0e4}{SV7}), SV6, \textcolor{stringliteral}{"trcorn"});
2075         \textcolor{keywordflow}{break};
2076     \textcolor{keywordflow}{case} \hyperlink{rm_8h_a8e1e6f2e3453c3dd85fbc6f5a54c8c34}{BLCORNER}:
2077         \hyperlink{display_8c_a4e6544c5de862c6f923bd077e42f571f}{set\_corner}(idx, lev, \hyperlink{rm_8h_a0360f5f667f22810fe7e13f9cbad4126}{S\_blcorn}, (\hyperlink{rm_8h_a4ad1c11449b99b2eb20ceebcafc87eff}{SV1}|\hyperlink{rm_8h_a54023c46e5e913847c6e57d720312e97}{SV2}|\hyperlink{rm_8h_a2896ce71c80010541ba60ce40bc742a6}{SV3}), 
      \hyperlink{rm_8h_a54023c46e5e913847c6e57d720312e97}{SV2}, \textcolor{stringliteral}{"blcorn"});
2078         \textcolor{keywordflow}{break};
2079     \textcolor{keywordflow}{case} \hyperlink{rm_8h_a653f37db17c18d0f1f4f76ae3063b124}{BRCORNER}:
2080         \hyperlink{display_8c_a4e6544c5de862c6f923bd077e42f571f}{set\_corner}(idx, lev, \hyperlink{rm_8h_abfe0a81a1635619dc9aa01ae451192a3}{S\_brcorn}, (\hyperlink{rm_8h_a7305767259b5f96ed18cd7e7f491b0e4}{SV7}|\hyperlink{rm_8h_a765db608a4b2d0b1ee5d0e038de7b656}{SV0}|\hyperlink{rm_8h_a4ad1c11449b99b2eb20ceebcafc87eff}{SV1}), 
      \hyperlink{rm_8h_a765db608a4b2d0b1ee5d0e038de7b656}{SV0}, \textcolor{stringliteral}{"brcorn"});
2081         \textcolor{keywordflow}{break};
2082 
2083 
2084     \textcolor{keywordflow}{case} \hyperlink{rm_8h_ac2a0c94b5722b98d84af548563e71d2f}{CROSSWALL}:
2085         \textcolor{keywordflow}{switch} (lev->wall\_info & \hyperlink{rm_8h_aa8daf0cc89d46c79b0af7a430c725d25}{WM\_MASK}) \{
2086             \textcolor{keywordflow}{case} 0:
2087             \textcolor{keywordflow}{if} (seenv == \hyperlink{rm_8h_a765db608a4b2d0b1ee5d0e038de7b656}{SV0})
2088                 idx = \hyperlink{rm_8h_abfe0a81a1635619dc9aa01ae451192a3}{S\_brcorn};
2089             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (seenv == \hyperlink{rm_8h_a54023c46e5e913847c6e57d720312e97}{SV2})
2090                 idx = \hyperlink{rm_8h_a0360f5f667f22810fe7e13f9cbad4126}{S\_blcorn};
2091             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (seenv == \hyperlink{rm_8h_ae57ff0e480bf6bab952b20b368a18614}{SV4})
2092                 idx = \hyperlink{rm_8h_abb0c9b2dd7ac4ed21d280e9b7bcb8168}{S\_tlcorn};
2093             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (seenv == SV6)
2094                 idx = \hyperlink{rm_8h_a7e5f5333bbad9631225f2ce6716f08a3}{S\_trcorn};
2095             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!(seenv & ~(\hyperlink{rm_8h_a765db608a4b2d0b1ee5d0e038de7b656}{SV0}|\hyperlink{rm_8h_a4ad1c11449b99b2eb20ceebcafc87eff}{SV1}|\hyperlink{rm_8h_a54023c46e5e913847c6e57d720312e97}{SV2})) &&
2096                     (seenv & \hyperlink{rm_8h_a4ad1c11449b99b2eb20ceebcafc87eff}{SV1} || seenv == (\hyperlink{rm_8h_a765db608a4b2d0b1ee5d0e038de7b656}{SV0}|\hyperlink{rm_8h_a54023c46e5e913847c6e57d720312e97}{SV2})))
2097                 idx = \hyperlink{rm_8h_ad381a8361efd5e18ae061cfb9ca84cf2}{S\_tuwall};
2098             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!(seenv & ~(\hyperlink{rm_8h_a54023c46e5e913847c6e57d720312e97}{SV2}|\hyperlink{rm_8h_a2896ce71c80010541ba60ce40bc742a6}{SV3}|\hyperlink{rm_8h_ae57ff0e480bf6bab952b20b368a18614}{SV4})) &&
2099                     (seenv & \hyperlink{rm_8h_a2896ce71c80010541ba60ce40bc742a6}{SV3} || seenv == (\hyperlink{rm_8h_a54023c46e5e913847c6e57d720312e97}{SV2}|\hyperlink{rm_8h_ae57ff0e480bf6bab952b20b368a18614}{SV4})))
2100                 idx = \hyperlink{rm_8h_a0bf8302200fce26beed4cf8aa970ebb1}{S\_trwall};
2101             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!(seenv & ~(\hyperlink{rm_8h_ae57ff0e480bf6bab952b20b368a18614}{SV4}|SV5|SV6)) &&
2102                     (seenv & SV5 || seenv == (\hyperlink{rm_8h_ae57ff0e480bf6bab952b20b368a18614}{SV4}|SV6)))
2103                 idx = \hyperlink{rm_8h_a493d50f4132b60153f1532b992d352a2}{S\_tdwall};
2104             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!(seenv & ~(\hyperlink{rm_8h_a765db608a4b2d0b1ee5d0e038de7b656}{SV0}|SV6|\hyperlink{rm_8h_a7305767259b5f96ed18cd7e7f491b0e4}{SV7})) &&
2105                     (seenv & \hyperlink{rm_8h_a7305767259b5f96ed18cd7e7f491b0e4}{SV7} || seenv == (\hyperlink{rm_8h_a765db608a4b2d0b1ee5d0e038de7b656}{SV0}|SV6)))
2106                 idx = \hyperlink{rm_8h_afb809aab84284a921ee4c86c108ffa89}{S\_tlwall};
2107             \textcolor{keywordflow}{else}
2108                 idx = \hyperlink{rm_8h_ade86fa2a0bc83d67037da7142e054749}{S\_crwall};
2109             \textcolor{keywordflow}{break};
2110 
2111             \textcolor{keywordflow}{case} \hyperlink{rm_8h_a15a4e9832e6eea4038219aad7b936961}{WM\_X\_TL}:
2112             row = \hyperlink{display_8c_a24949d3786eea6028cf5c2858a6eaa8a}{cross\_matrix}[\hyperlink{display_8c_aa68115ddaef5c0b70a083549f79fc391}{C\_tl}];
2113             seenv = (seenv >> 4 | seenv << 4) & 0xff;
2114             \textcolor{keywordflow}{goto} do\_crwall;
2115             \textcolor{keywordflow}{case} \hyperlink{rm_8h_af2d27756fffe782f30d48fc059300993}{WM\_X\_TR}:
2116             row = \hyperlink{display_8c_a24949d3786eea6028cf5c2858a6eaa8a}{cross\_matrix}[\hyperlink{display_8c_a1085c6285991418add10e5b0340d55c3}{C\_tr}];
2117             seenv = (seenv >> 6 | seenv << 2) & 0xff;
2118             \textcolor{keywordflow}{goto} do\_crwall;
2119             \textcolor{keywordflow}{case} \hyperlink{rm_8h_a04eaa003b80a83d7f658edada439087b}{WM\_X\_BL}:
2120             row = \hyperlink{display_8c_a24949d3786eea6028cf5c2858a6eaa8a}{cross\_matrix}[\hyperlink{display_8c_a59a9f1a9497ea88377e9fb1678ba0ecd}{C\_bl}];
2121             seenv = (seenv >> 2 | seenv << 6) & 0xff;
2122             \textcolor{keywordflow}{goto} do\_crwall;
2123             \textcolor{keywordflow}{case} \hyperlink{rm_8h_a02f15d34a3150c7809de1e0d401d24b6}{WM\_X\_BR}:
2124             row = \hyperlink{display_8c_a24949d3786eea6028cf5c2858a6eaa8a}{cross\_matrix}[\hyperlink{display_8c_a77aa1e598e5bd186e12b8c7b767b5783}{C\_br}];
2125 do\_crwall:
2126             \textcolor{keywordflow}{if} (seenv == \hyperlink{rm_8h_ae57ff0e480bf6bab952b20b368a18614}{SV4})
2127                 idx = \hyperlink{rm_8h_a342b42eb0fe3236adbc700b6e725d781}{S\_stone};
2128             \textcolor{keywordflow}{else} \{
2129                 seenv = seenv & ~\hyperlink{rm_8h_ae57ff0e480bf6bab952b20b368a18614}{SV4};    \textcolor{comment}{/* strip SV4 */}
2130                 \textcolor{keywordflow}{if} (seenv == \hyperlink{rm_8h_a765db608a4b2d0b1ee5d0e038de7b656}{SV0}) \{
2131                 col = \hyperlink{display_8c_ac69f4eabf134059fbb5481f43cd3db25}{C\_brcorn};
2132                 \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (seenv & (\hyperlink{rm_8h_a54023c46e5e913847c6e57d720312e97}{SV2}|\hyperlink{rm_8h_a2896ce71c80010541ba60ce40bc742a6}{SV3})) \{
2133                 \textcolor{keywordflow}{if} (seenv & (SV5|SV6|\hyperlink{rm_8h_a7305767259b5f96ed18cd7e7f491b0e4}{SV7}))
2134                     col = \hyperlink{display_8c_a77211e230341600a1f3d17d0982d2a11}{C\_crwall};
2135                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (seenv & (\hyperlink{rm_8h_a765db608a4b2d0b1ee5d0e038de7b656}{SV0}|\hyperlink{rm_8h_a4ad1c11449b99b2eb20ceebcafc87eff}{SV1}))
2136                     col = \hyperlink{display_8c_a820ced2bc4b834d8c05c04891f48579f}{C\_tuwall};
2137                 \textcolor{keywordflow}{else}
2138                     col = \hyperlink{display_8c_a3caf3f97bceff265f0da467647cd7185}{C\_blcorn};
2139                 \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (seenv & (SV5|SV6)) \{
2140                 \textcolor{keywordflow}{if} (seenv & (\hyperlink{rm_8h_a4ad1c11449b99b2eb20ceebcafc87eff}{SV1}|\hyperlink{rm_8h_a54023c46e5e913847c6e57d720312e97}{SV2}|\hyperlink{rm_8h_a2896ce71c80010541ba60ce40bc742a6}{SV3}))
2141                     col = \hyperlink{display_8c_a77211e230341600a1f3d17d0982d2a11}{C\_crwall};
2142                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (seenv & (\hyperlink{rm_8h_a765db608a4b2d0b1ee5d0e038de7b656}{SV0}|\hyperlink{rm_8h_a7305767259b5f96ed18cd7e7f491b0e4}{SV7}))
2143                     col = \hyperlink{display_8c_a208e2a1b5154719f970da12fda2c9722}{C\_tlwall};
2144                 \textcolor{keywordflow}{else}
2145                     col = \hyperlink{display_8c_ab3459fe041b29096140bc5f53eaaf0ff}{C\_trcorn};
2146                 \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (seenv & \hyperlink{rm_8h_a4ad1c11449b99b2eb20ceebcafc87eff}{SV1}) \{
2147                 col = seenv & \hyperlink{rm_8h_a7305767259b5f96ed18cd7e7f491b0e4}{SV7} ? \hyperlink{display_8c_a77211e230341600a1f3d17d0982d2a11}{C\_crwall} : \hyperlink{display_8c_a820ced2bc4b834d8c05c04891f48579f}{C\_tuwall};
2148                 \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (seenv & \hyperlink{rm_8h_a7305767259b5f96ed18cd7e7f491b0e4}{SV7}) \{
2149                 col = seenv & SV1 ? \hyperlink{display_8c_a77211e230341600a1f3d17d0982d2a11}{C\_crwall} : \hyperlink{display_8c_a208e2a1b5154719f970da12fda2c9722}{C\_tlwall};
2150                 \} \textcolor{keywordflow}{else} \{
2151                 impossible(
2152                     \textcolor{stringliteral}{"wall\_angle: bottom of crwall check"});
2153                 col = \hyperlink{display_8c_a77211e230341600a1f3d17d0982d2a11}{C\_crwall};
2154                 \}
2155 
2156                 idx = row[col];
2157             \}
2158             \textcolor{keywordflow}{break};
2159 
2160             \textcolor{keywordflow}{case} \hyperlink{rm_8h_a7cfb224970e6b0eb823791639f88c750}{WM\_X\_TLBR}:
2161             \textcolor{keywordflow}{if} ( \hyperlink{display_8c_a75d2d8101c02fbe9b2ee7742a07a9f19}{only}(seenv, SV1|\hyperlink{rm_8h_a54023c46e5e913847c6e57d720312e97}{SV2}|\hyperlink{rm_8h_a2896ce71c80010541ba60ce40bc742a6}{SV3}) )
2162                 idx = \hyperlink{rm_8h_a0360f5f667f22810fe7e13f9cbad4126}{S\_blcorn};
2163             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( \hyperlink{display_8c_a75d2d8101c02fbe9b2ee7742a07a9f19}{only}(seenv, SV5|SV6|\hyperlink{rm_8h_a7305767259b5f96ed18cd7e7f491b0e4}{SV7}) )
2164                 idx = \hyperlink{rm_8h_a7e5f5333bbad9631225f2ce6716f08a3}{S\_trcorn};
2165             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( \hyperlink{display_8c_a75d2d8101c02fbe9b2ee7742a07a9f19}{only}(seenv, \hyperlink{rm_8h_a765db608a4b2d0b1ee5d0e038de7b656}{SV0}|\hyperlink{rm_8h_ae57ff0e480bf6bab952b20b368a18614}{SV4}) )
2166                 idx = \hyperlink{rm_8h_a342b42eb0fe3236adbc700b6e725d781}{S\_stone};
2167             \textcolor{keywordflow}{else}
2168                 idx = \hyperlink{rm_8h_ade86fa2a0bc83d67037da7142e054749}{S\_crwall};
2169             \textcolor{keywordflow}{break};
2170 
2171             \textcolor{keywordflow}{case} \hyperlink{rm_8h_aff85e86a0eb08fba6bf9c642e867e01c}{WM\_X\_BLTR}:
2172             \textcolor{keywordflow}{if} ( \hyperlink{display_8c_a75d2d8101c02fbe9b2ee7742a07a9f19}{only}(seenv, \hyperlink{rm_8h_a765db608a4b2d0b1ee5d0e038de7b656}{SV0}|SV1|\hyperlink{rm_8h_a7305767259b5f96ed18cd7e7f491b0e4}{SV7}) )
2173                 idx = \hyperlink{rm_8h_abfe0a81a1635619dc9aa01ae451192a3}{S\_brcorn};
2174             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( \hyperlink{display_8c_a75d2d8101c02fbe9b2ee7742a07a9f19}{only}(seenv, \hyperlink{rm_8h_a2896ce71c80010541ba60ce40bc742a6}{SV3}|\hyperlink{rm_8h_ae57ff0e480bf6bab952b20b368a18614}{SV4}|SV5) )
2175                 idx = \hyperlink{rm_8h_abb0c9b2dd7ac4ed21d280e9b7bcb8168}{S\_tlcorn};
2176             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ( \hyperlink{display_8c_a75d2d8101c02fbe9b2ee7742a07a9f19}{only}(seenv, \hyperlink{rm_8h_a54023c46e5e913847c6e57d720312e97}{SV2}|SV6) )
2177                 idx = \hyperlink{rm_8h_a342b42eb0fe3236adbc700b6e725d781}{S\_stone};
2178             \textcolor{keywordflow}{else}
2179                 idx = \hyperlink{rm_8h_ade86fa2a0bc83d67037da7142e054749}{S\_crwall};
2180             \textcolor{keywordflow}{break};
2181 
2182             \textcolor{keywordflow}{default}:
2183             impossible(\textcolor{stringliteral}{"wall\_angle: unknown crosswall mode"});
2184             idx = \hyperlink{rm_8h_a342b42eb0fe3236adbc700b6e725d781}{S\_stone};
2185             \textcolor{keywordflow}{break};
2186         \}
2187         \textcolor{keywordflow}{break};
2188 
2189     \textcolor{keywordflow}{default}:
2190         impossible(\textcolor{stringliteral}{"wall\_angle: unexpected wall type %d"}, lev->\hyperlink{structrm_aa144ade377ba175f037c4e637329d4dc}{typ});
2191         idx = \hyperlink{rm_8h_a342b42eb0fe3236adbc700b6e725d781}{S\_stone};
2192     \}
2193     \textcolor{keywordflow}{return} idx;
2194 \}
\end{DoxyCode}
\hypertarget{display_8c_af9ba4b8a8fda1ce47afbd972ad4af1f1}{\index{display.\+c@{display.\+c}!zapdir\+\_\+to\+\_\+glyph@{zapdir\+\_\+to\+\_\+glyph}}
\index{zapdir\+\_\+to\+\_\+glyph@{zapdir\+\_\+to\+\_\+glyph}!display.\+c@{display.\+c}}
\subsubsection[{zapdir\+\_\+to\+\_\+glyph}]{\setlength{\rightskip}{0pt plus 5cm}int zapdir\+\_\+to\+\_\+glyph (
\begin{DoxyParamCaption}
\item[{int}]{dx, }
\item[{int}]{dy, }
\item[{int}]{beam\+\_\+type}
\end{DoxyParamCaption}
)}}\label{display_8c_af9ba4b8a8fda1ce47afbd972ad4af1f1}


Definition at line 1512 of file display.\+c.



References G\+L\+Y\+P\+H\+\_\+\+Z\+A\+P\+\_\+\+O\+F\+F, and N\+U\+M\+\_\+\+Z\+A\+P.


\begin{DoxyCode}
1515 \{
1516     \textcolor{keywordflow}{if} (beam\_type >= \hyperlink{display_8h_a6e466b4787e73d717f84861437530e9e}{NUM\_ZAP}) \{
1517     impossible(\textcolor{stringliteral}{"zapdir\_to\_glyph:  illegal beam type"});
1518     beam\_type = 0;
1519     \}
1520     dx = (dx == dy) ? 2 : (dx && dy) ? 3 : dx ? 1 : 0;
1521 
1522     \textcolor{keywordflow}{return} ((\textcolor{keywordtype}{int}) ((beam\_type << 2) | dx)) + \hyperlink{display_8h_a51ca2fc1986619ae2d009cfdc555a7e4}{GLYPH\_ZAP\_OFF};
1523 \}
\end{DoxyCode}


\subsection{Variable Documentation}
\hypertarget{display_8c_a24949d3786eea6028cf5c2858a6eaa8a}{\index{display.\+c@{display.\+c}!cross\+\_\+matrix@{cross\+\_\+matrix}}
\index{cross\+\_\+matrix@{cross\+\_\+matrix}!display.\+c@{display.\+c}}
\subsubsection[{cross\+\_\+matrix}]{\setlength{\rightskip}{0pt plus 5cm}{\bf const} int cross\+\_\+matrix\mbox{[}4\mbox{]}\mbox{[}6\mbox{]}\hspace{0.3cm}{\ttfamily [static]}}}\label{display_8c_a24949d3786eea6028cf5c2858a6eaa8a}
{\bfseries Initial value\+:}
\begin{DoxyCode}
= \{
    \{ \hyperlink{rm_8h_abfe0a81a1635619dc9aa01ae451192a3}{S\_brcorn}, \hyperlink{rm_8h_a0360f5f667f22810fe7e13f9cbad4126}{S\_blcorn}, \hyperlink{rm_8h_abb0c9b2dd7ac4ed21d280e9b7bcb8168}{S\_tlcorn}, \hyperlink{rm_8h_ad381a8361efd5e18ae061cfb9ca84cf2}{S\_tuwall}, 
      \hyperlink{rm_8h_a0bf8302200fce26beed4cf8aa970ebb1}{S\_trwall}, \hyperlink{rm_8h_ade86fa2a0bc83d67037da7142e054749}{S\_crwall} \},
    \{ \hyperlink{rm_8h_a0360f5f667f22810fe7e13f9cbad4126}{S\_blcorn}, \hyperlink{rm_8h_abb0c9b2dd7ac4ed21d280e9b7bcb8168}{S\_tlcorn}, \hyperlink{rm_8h_a7e5f5333bbad9631225f2ce6716f08a3}{S\_trcorn}, \hyperlink{rm_8h_a0bf8302200fce26beed4cf8aa970ebb1}{S\_trwall}, 
      \hyperlink{rm_8h_a493d50f4132b60153f1532b992d352a2}{S\_tdwall}, \hyperlink{rm_8h_ade86fa2a0bc83d67037da7142e054749}{S\_crwall} \},
    \{ \hyperlink{rm_8h_abb0c9b2dd7ac4ed21d280e9b7bcb8168}{S\_tlcorn}, \hyperlink{rm_8h_a7e5f5333bbad9631225f2ce6716f08a3}{S\_trcorn}, \hyperlink{rm_8h_abfe0a81a1635619dc9aa01ae451192a3}{S\_brcorn}, \hyperlink{rm_8h_a493d50f4132b60153f1532b992d352a2}{S\_tdwall}, 
      \hyperlink{rm_8h_afb809aab84284a921ee4c86c108ffa89}{S\_tlwall}, \hyperlink{rm_8h_ade86fa2a0bc83d67037da7142e054749}{S\_crwall} \},
    \{ \hyperlink{rm_8h_a7e5f5333bbad9631225f2ce6716f08a3}{S\_trcorn}, \hyperlink{rm_8h_abfe0a81a1635619dc9aa01ae451192a3}{S\_brcorn}, \hyperlink{rm_8h_a0360f5f667f22810fe7e13f9cbad4126}{S\_blcorn}, \hyperlink{rm_8h_afb809aab84284a921ee4c86c108ffa89}{S\_tlwall}, 
      \hyperlink{rm_8h_ad381a8361efd5e18ae061cfb9ca84cf2}{S\_tuwall}, \hyperlink{rm_8h_ade86fa2a0bc83d67037da7142e054749}{S\_crwall} \},
\}
\end{DoxyCode}


Definition at line 1864 of file display.\+c.

\hypertarget{display_8c_af05984f18ee6d5c6573afb061376c52c}{\index{display.\+c@{display.\+c}!gbuf@{gbuf}}
\index{gbuf@{gbuf}!display.\+c@{display.\+c}}
\subsubsection[{gbuf}]{\setlength{\rightskip}{0pt plus 5cm}{\bf gbuf\+\_\+entry} gbuf\mbox{[}{\bf R\+O\+W\+N\+O}\mbox{]}\mbox{[}{\bf C\+O\+L\+N\+O}\mbox{]}\hspace{0.3cm}{\ttfamily [static]}}}\label{display_8c_af05984f18ee6d5c6573afb061376c52c}


Definition at line 1206 of file display.\+c.

\hypertarget{display_8c_add164e66f147d7fd33fd941e4f445437}{\index{display.\+c@{display.\+c}!gbuf\+\_\+start@{gbuf\+\_\+start}}
\index{gbuf\+\_\+start@{gbuf\+\_\+start}!display.\+c@{display.\+c}}
\subsubsection[{gbuf\+\_\+start}]{\setlength{\rightskip}{0pt plus 5cm}char gbuf\+\_\+start\mbox{[}{\bf R\+O\+W\+N\+O}\mbox{]}\hspace{0.3cm}{\ttfamily [static]}}}\label{display_8c_add164e66f147d7fd33fd941e4f445437}


Definition at line 1207 of file display.\+c.

\hypertarget{display_8c_a456a879e037f6746dea8b5f7cad4b13d}{\index{display.\+c@{display.\+c}!gbuf\+\_\+stop@{gbuf\+\_\+stop}}
\index{gbuf\+\_\+stop@{gbuf\+\_\+stop}!display.\+c@{display.\+c}}
\subsubsection[{gbuf\+\_\+stop}]{\setlength{\rightskip}{0pt plus 5cm}char gbuf\+\_\+stop\mbox{[}{\bf R\+O\+W\+N\+O}\mbox{]}\hspace{0.3cm}{\ttfamily [static]}}}\label{display_8c_a456a879e037f6746dea8b5f7cad4b13d}


Definition at line 1208 of file display.\+c.

\hypertarget{display_8c_abbaadd403de1a239b8289b085e1f9565}{\index{display.\+c@{display.\+c}!nul\+\_\+gbuf@{nul\+\_\+gbuf}}
\index{nul\+\_\+gbuf@{nul\+\_\+gbuf}!display.\+c@{display.\+c}}
\subsubsection[{nul\+\_\+gbuf}]{\setlength{\rightskip}{0pt plus 5cm}{\bf gbuf\+\_\+entry} nul\+\_\+gbuf = \{ 0, {\bf cmap\+\_\+to\+\_\+glyph}({\bf S\+\_\+stone}) \}\hspace{0.3cm}{\ttfamily [static]}}}\label{display_8c_abbaadd403de1a239b8289b085e1f9565}


Definition at line 1293 of file display.\+c.



Referenced by clear\+\_\+glyph\+\_\+buffer().

\hypertarget{display_8c_ab305833b5e361287ef704c02565aad89}{\index{display.\+c@{display.\+c}!seenv\+\_\+matrix@{seenv\+\_\+matrix}}
\index{seenv\+\_\+matrix@{seenv\+\_\+matrix}!display.\+c@{display.\+c}}
\subsubsection[{seenv\+\_\+matrix}]{\setlength{\rightskip}{0pt plus 5cm}unsigned char seenv\+\_\+matrix\mbox{[}3\mbox{]}\mbox{[}3\mbox{]}}}\label{display_8c_ab305833b5e361287ef704c02565aad89}
{\bfseries Initial value\+:}
\begin{DoxyCode}
= \{ \{\hyperlink{rm_8h_a54023c46e5e913847c6e57d720312e97}{SV2},   \hyperlink{rm_8h_a4ad1c11449b99b2eb20ceebcafc87eff}{SV1}, \hyperlink{rm_8h_a765db608a4b2d0b1ee5d0e038de7b656}{SV0}\},
                     \{\hyperlink{rm_8h_a2896ce71c80010541ba60ce40bc742a6}{SV3}, \hyperlink{rm_8h_a7371c7cf9793ebc9f7b14bc8a0309abc}{SVALL}, \hyperlink{rm_8h_a7305767259b5f96ed18cd7e7f491b0e4}{SV7}\},
                     \{\hyperlink{rm_8h_ae57ff0e480bf6bab952b20b368a18614}{SV4},   \hyperlink{rm_8h_abf049e3dceefda229233b30710c3c356}{SV5}, \hyperlink{rm_8h_aea098a8a86ed3a356662737b68566f6e}{SV6}\} \}
\end{DoxyCode}


Definition at line 1799 of file display.\+c.



Referenced by vision\+\_\+recalc().

\hypertarget{display_8c_a495cf1fe6b86816cf07c64be2ad9d42c}{\index{display.\+c@{display.\+c}!tgfirst@{tgfirst}}
\index{tgfirst@{tgfirst}!display.\+c@{display.\+c}}
\subsubsection[{tgfirst}]{\setlength{\rightskip}{0pt plus 5cm}struct {\bf tmp\+\_\+glyph}  tgfirst\hspace{0.3cm}{\ttfamily [static]}}}\label{display_8c_a495cf1fe6b86816cf07c64be2ad9d42c}


Referenced by tmp\+\_\+at().

\hypertarget{display_8c_a98d2bf40d5c38b479c230af0fac15cb4}{\index{display.\+c@{display.\+c}!wall\+\_\+matrix@{wall\+\_\+matrix}}
\index{wall\+\_\+matrix@{wall\+\_\+matrix}!display.\+c@{display.\+c}}
\subsubsection[{wall\+\_\+matrix}]{\setlength{\rightskip}{0pt plus 5cm}{\bf const} int wall\+\_\+matrix\mbox{[}4\mbox{]}\mbox{[}5\mbox{]}\hspace{0.3cm}{\ttfamily [static]}}}\label{display_8c_a98d2bf40d5c38b479c230af0fac15cb4}
{\bfseries Initial value\+:}
\begin{DoxyCode}
= \{
    \{ \hyperlink{rm_8h_a342b42eb0fe3236adbc700b6e725d781}{S\_stone}, \hyperlink{rm_8h_abb0c9b2dd7ac4ed21d280e9b7bcb8168}{S\_tlcorn}, \hyperlink{rm_8h_a7e5f5333bbad9631225f2ce6716f08a3}{S\_trcorn}, \hyperlink{rm_8h_a0f1cd29cae28adce681b483b0418769d}{S\_hwall}, 
      \hyperlink{rm_8h_a493d50f4132b60153f1532b992d352a2}{S\_tdwall} \}, 
    \{ \hyperlink{rm_8h_a342b42eb0fe3236adbc700b6e725d781}{S\_stone}, \hyperlink{rm_8h_a7e5f5333bbad9631225f2ce6716f08a3}{S\_trcorn}, \hyperlink{rm_8h_abfe0a81a1635619dc9aa01ae451192a3}{S\_brcorn}, \hyperlink{rm_8h_a635ec6ccc74b900ac3150afe85bdfdf0}{S\_vwall}, 
      \hyperlink{rm_8h_afb809aab84284a921ee4c86c108ffa89}{S\_tlwall} \}, 
    \{ \hyperlink{rm_8h_a342b42eb0fe3236adbc700b6e725d781}{S\_stone}, \hyperlink{rm_8h_abfe0a81a1635619dc9aa01ae451192a3}{S\_brcorn}, \hyperlink{rm_8h_a0360f5f667f22810fe7e13f9cbad4126}{S\_blcorn}, \hyperlink{rm_8h_a0f1cd29cae28adce681b483b0418769d}{S\_hwall}, 
      \hyperlink{rm_8h_ad381a8361efd5e18ae061cfb9ca84cf2}{S\_tuwall} \}, 
    \{ \hyperlink{rm_8h_a342b42eb0fe3236adbc700b6e725d781}{S\_stone}, \hyperlink{rm_8h_a0360f5f667f22810fe7e13f9cbad4126}{S\_blcorn}, \hyperlink{rm_8h_abb0c9b2dd7ac4ed21d280e9b7bcb8168}{S\_tlcorn}, \hyperlink{rm_8h_a635ec6ccc74b900ac3150afe85bdfdf0}{S\_vwall}, 
      \hyperlink{rm_8h_a0bf8302200fce26beed4cf8aa970ebb1}{S\_trwall} \}, 
\}
\end{DoxyCode}


Definition at line 1836 of file display.\+c.

