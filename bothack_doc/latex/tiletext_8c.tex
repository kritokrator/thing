\hypertarget{tiletext_8c}{\section{nethack/win/share/tiletext.c File Reference}
\label{tiletext_8c}\index{nethack/win/share/tiletext.\+c@{nethack/win/share/tiletext.\+c}}
}
{\ttfamily \#include \char`\"{}config.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}tile.\+h\char`\"{}}\\*
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{tiletext_8c_a4610636f10e4604ba296cbf9287b0c7b}{F\+O\+R\+M\+A\+T\+\_\+\+S\+T\+R\+I\+N\+G}~\char`\"{}\%\mbox{[}A\+B\+C\+D\+E\+F\+G\+H\+I\+J\+K\+L\+M\+N\+O\+P\+Q\+R\+S\+T\+U\+V\+W\+X\+Y\+Zabcdefghijklmnopqrstuvwxyz0123456789\mbox{]} = (\%d, \%d, \%d) \char`\"{}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{tradstdc_8h_a2c212835823e3c54a8ab6d95c652660e}{const} char $\ast$ \hyperlink{tiletext_8c_a1fc7aefe4f80d8b5852e9e6cb54da240}{F\+D\+E\+C\+L} (tilename,(int, int))
\item 
static void \hyperlink{tiletext_8c_a2f03bf35491ba31d3406beecab3d05e1}{F\+D\+E\+C\+L} (\hyperlink{tiletext_8c_abdf69d609dbfe6043fee54ed4278dbfc}{read\+\_\+text\+\_\+colormap},(F\+I\+L\+E $\ast$))
\item 
static \hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} \hyperlink{tiletext_8c_a2ac280178d9d2bb22345df3702d82c3a}{F\+D\+E\+C\+L} (\hyperlink{tiletext_8c_a0ba88f814e1084e989e12dd45812045d}{write\+\_\+text\+\_\+colormap},(F\+I\+L\+E $\ast$))
\item 
static \hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} \hyperlink{tiletext_8c_a818b95bb8f9476ec5bc519f0be265f15}{F\+D\+E\+C\+L} (\hyperlink{tiletext_8c_a9ec81549b65847945c0ae6872730cb61}{read\+\_\+txttile},(F\+I\+L\+E $\ast$, \hyperlink{structpixel}{pixel}($\ast$)\mbox{[}\hyperlink{win_2win32_2winMS_8h_a9f3fae6a9058d02850af5deba9be4544}{T\+I\+L\+E\+\_\+\+X}\mbox{]}))
\item 
static void \hyperlink{tiletext_8c_aa14a0f4f9a7f2af8aa78fb7835500a4e}{F\+D\+E\+C\+L} (\hyperlink{tiletext_8c_afe35c2d34a3f4e1cc3bb317607dd782f}{write\+\_\+txttile},(F\+I\+L\+E $\ast$, \hyperlink{structpixel}{pixel}($\ast$)\mbox{[}\hyperlink{win_2win32_2winMS_8h_a9f3fae6a9058d02850af5deba9be4544}{T\+I\+L\+E\+\_\+\+X}\mbox{]}))
\item 
static void \hyperlink{tiletext_8c_abdf69d609dbfe6043fee54ed4278dbfc}{read\+\_\+text\+\_\+colormap} (F\+I\+L\+E $\ast$txtfile)
\item 
static \hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} \hyperlink{tiletext_8c_a0ba88f814e1084e989e12dd45812045d}{write\+\_\+text\+\_\+colormap} (F\+I\+L\+E $\ast$txtfile)
\item 
static \hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} \hyperlink{tiletext_8c_a9ec81549b65847945c0ae6872730cb61}{read\+\_\+txttile} (F\+I\+L\+E $\ast$txtfile, \hyperlink{structpixel}{pixel} $\ast$\hyperlink{thintile_8c_ad8f8da6572831b2f4d59c3ac23043b69}{pixels})
\item 
static void \hyperlink{tiletext_8c_afe35c2d34a3f4e1cc3bb317607dd782f}{write\+\_\+txttile} (F\+I\+L\+E $\ast$txtfile, \hyperlink{structpixel}{pixel} $\ast$\hyperlink{thintile_8c_ad8f8da6572831b2f4d59c3ac23043b69}{pixels})
\item 
void \hyperlink{tiletext_8c_a2cb5731b96aae136b97a319e6f4d9c6d}{init\+\_\+colormap} ()
\item 
void \hyperlink{tiletext_8c_a61cd42dc61bcb7404d69cda4d9e580cf}{merge\+\_\+colormap} ()
\item 
\hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} \hyperlink{tiletext_8c_afd96856d9b9d8dd587b735c54e9c2765}{fopen\+\_\+text\+\_\+file} (char $\ast$\hyperlink{makedefs_8c_ac1ccfd52478f58f8d268ad6bb486bef0}{filename}, \hyperlink{tradstdc_8h_a2c212835823e3c54a8ab6d95c652660e}{const} char $\ast$\hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type}) \hyperlink{tradstdc_8h_a2c212835823e3c54a8ab6d95c652660e}{const}
\item 
\hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} \hyperlink{tiletext_8c_a8bfc171583fff7761a8ae79103b6aa89}{read\+\_\+text\+\_\+tile} (\hyperlink{structpixel}{pixel} $\ast$\hyperlink{thintile_8c_ad8f8da6572831b2f4d59c3ac23043b69}{pixels})
\item 
\hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} \hyperlink{tiletext_8c_a74b64750c419ae14d3af399325ff644a}{write\+\_\+text\+\_\+tile} (\hyperlink{structpixel}{pixel} $\ast$\hyperlink{thintile_8c_ad8f8da6572831b2f4d59c3ac23043b69}{pixels})
\item 
int \hyperlink{tiletext_8c_a52166aa84ff4882399d7699bb074b55b}{fclose\+\_\+text\+\_\+file} ()
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hyperlink{tile_8h_aa6367451fcfe2de81dffaeb485b7a59c}{pixval} \hyperlink{tiletext_8c_ac98705c791dbc9a1ce4ed91dbf5ae5bf}{Color\+Map} \mbox{[}3\mbox{]}\mbox{[}\hyperlink{tile_8h_a321fcd6ec582309d0779ddc457ec5d62}{M\+A\+X\+C\+O\+L\+O\+R\+M\+A\+P\+S\+I\+Z\+E}\mbox{]}
\item 
int \hyperlink{tiletext_8c_aff516215666b583bb7940b37a907fb6d}{colorsinmap}
\item 
\hyperlink{tile_8h_aa6367451fcfe2de81dffaeb485b7a59c}{pixval} \hyperlink{tiletext_8c_a25a1fd9c3ee244370c7fb669509c889e}{Main\+Color\+Map} \mbox{[}3\mbox{]}\mbox{[}\hyperlink{tile_8h_a321fcd6ec582309d0779ddc457ec5d62}{M\+A\+X\+C\+O\+L\+O\+R\+M\+A\+P\+S\+I\+Z\+E}\mbox{]}
\item 
int \hyperlink{tiletext_8c_ab105f0242e3bd09f3d953cd20700645a}{colorsinmainmap}
\item 
static short \hyperlink{tiletext_8c_ab4cc0e0b57e1c74c77467ab8ab596e3e}{color\+\_\+index} \mbox{[}\hyperlink{tile_8h_a321fcd6ec582309d0779ddc457ec5d62}{M\+A\+X\+C\+O\+L\+O\+R\+M\+A\+P\+S\+I\+Z\+E}\mbox{]}
\item 
static int \hyperlink{tiletext_8c_a5dd47736942141b628a52481f0f37ab4}{num\+\_\+colors}
\item 
static char \hyperlink{tiletext_8c_ad6f4abfbfd788414871238864167a50e}{charcolors} \mbox{[}\hyperlink{tile_8h_a321fcd6ec582309d0779ddc457ec5d62}{M\+A\+X\+C\+O\+L\+O\+R\+M\+A\+P\+S\+I\+Z\+E}\mbox{]}
\item 
static int \hyperlink{tiletext_8c_a886411e3d0da13b7d86644f059fdb47c}{placeholder\+\_\+init} = 0
\item 
static \hyperlink{structpixel}{pixel} \hyperlink{tiletext_8c_af4237a65bc71d23957fa13a85dd329f8}{placeholder} \mbox{[}\hyperlink{win_2win32_2winMS_8h_a4a62524a49a9be02996b8e667b45abc9}{T\+I\+L\+E\+\_\+\+Y}\mbox{]}\mbox{[}\hyperlink{win_2win32_2winMS_8h_a9f3fae6a9058d02850af5deba9be4544}{T\+I\+L\+E\+\_\+\+X}\mbox{]}
\item 
static F\+I\+L\+E $\ast$ \hyperlink{tiletext_8c_a77e0eb3cef80617761a35b843368e1fe}{tile\+\_\+file}
\item 
static int \hyperlink{tiletext_8c_a42501c03e6e9f74ffad73a9a903316eb}{tile\+\_\+set}
\item 
static int \hyperlink{tiletext_8c_a6c4fd49f1ac99f5157590bbea3af4221}{tile\+\_\+set\+\_\+indx}
\item 
static \hyperlink{tradstdc_8h_a2c212835823e3c54a8ab6d95c652660e}{const} char $\ast$ \hyperlink{tiletext_8c_af03bdd9338949becb59305ea9b6e8fde}{text\+\_\+sets} \mbox{[}$\,$\mbox{]} = \{ \char`\"{}monsters.\+txt\char`\"{}, \char`\"{}objects.\+txt\char`\"{}, \char`\"{}other.\+txt\char`\"{} \}
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\hypertarget{tiletext_8c_a4610636f10e4604ba296cbf9287b0c7b}{\index{tiletext.\+c@{tiletext.\+c}!F\+O\+R\+M\+A\+T\+\_\+\+S\+T\+R\+I\+N\+G@{F\+O\+R\+M\+A\+T\+\_\+\+S\+T\+R\+I\+N\+G}}
\index{F\+O\+R\+M\+A\+T\+\_\+\+S\+T\+R\+I\+N\+G@{F\+O\+R\+M\+A\+T\+\_\+\+S\+T\+R\+I\+N\+G}!tiletext.\+c@{tiletext.\+c}}
\subsubsection[{F\+O\+R\+M\+A\+T\+\_\+\+S\+T\+R\+I\+N\+G}]{\setlength{\rightskip}{0pt plus 5cm}\#define F\+O\+R\+M\+A\+T\+\_\+\+S\+T\+R\+I\+N\+G~\char`\"{}\%\mbox{[}A\+B\+C\+D\+E\+F\+G\+H\+I\+J\+K\+L\+M\+N\+O\+P\+Q\+R\+S\+T\+U\+V\+W\+X\+Y\+Zabcdefghijklmnopqrstuvwxyz0123456789\mbox{]} = (\%d, \%d, \%d) \char`\"{}}}\label{tiletext_8c_a4610636f10e4604ba296cbf9287b0c7b}


Definition at line 33 of file tiletext.\+c.



Referenced by read\+\_\+text\+\_\+colormap().



\subsection{Function Documentation}
\hypertarget{tiletext_8c_a52166aa84ff4882399d7699bb074b55b}{\index{tiletext.\+c@{tiletext.\+c}!fclose\+\_\+text\+\_\+file@{fclose\+\_\+text\+\_\+file}}
\index{fclose\+\_\+text\+\_\+file@{fclose\+\_\+text\+\_\+file}!tiletext.\+c@{tiletext.\+c}}
\subsubsection[{fclose\+\_\+text\+\_\+file}]{\setlength{\rightskip}{0pt plus 5cm}int fclose\+\_\+text\+\_\+file (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{tiletext_8c_a52166aa84ff4882399d7699bb074b55b}


Definition at line 325 of file tiletext.\+c.



References tile\+\_\+file.



Referenced by main(), and process\+\_\+file().


\begin{DoxyCode}
326 \{
327     \textcolor{keywordtype}{int} ret;
328 
329     ret = fclose(\hyperlink{tiletext_8c_a77e0eb3cef80617761a35b843368e1fe}{tile\_file});
330     \hyperlink{tiletext_8c_a77e0eb3cef80617761a35b843368e1fe}{tile\_file} = (FILE *)0;
331     \textcolor{keywordflow}{return} ret;
332 \}
\end{DoxyCode}
\hypertarget{tiletext_8c_a1fc7aefe4f80d8b5852e9e6cb54da240}{\index{tiletext.\+c@{tiletext.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!tiletext.\+c@{tiletext.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}{\bf const} char$\ast$ F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{tilename}]{, }
\item[{(int, int)}]{}
\end{DoxyParamCaption}
)}}\label{tiletext_8c_a1fc7aefe4f80d8b5852e9e6cb54da240}
\hypertarget{tiletext_8c_a2f03bf35491ba31d3406beecab3d05e1}{\index{tiletext.\+c@{tiletext.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!tiletext.\+c@{tiletext.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}static void F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf read\+\_\+text\+\_\+colormap}}]{, }
\item[{(F\+I\+L\+E $\ast$)}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{tiletext_8c_a2f03bf35491ba31d3406beecab3d05e1}
\hypertarget{tiletext_8c_a2ac280178d9d2bb22345df3702d82c3a}{\index{tiletext.\+c@{tiletext.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!tiletext.\+c@{tiletext.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf boolean} F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf write\+\_\+text\+\_\+colormap}}]{, }
\item[{(F\+I\+L\+E $\ast$)}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{tiletext_8c_a2ac280178d9d2bb22345df3702d82c3a}
\hypertarget{tiletext_8c_a818b95bb8f9476ec5bc519f0be265f15}{\index{tiletext.\+c@{tiletext.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!tiletext.\+c@{tiletext.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf boolean} F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf read\+\_\+txttile}}]{, }
\item[{(F\+I\+L\+E $\ast$, {\bf pixel}($\ast$)\mbox{[}{\bf T\+I\+L\+E\+\_\+\+X}\mbox{]})}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{tiletext_8c_a818b95bb8f9476ec5bc519f0be265f15}
\hypertarget{tiletext_8c_aa14a0f4f9a7f2af8aa78fb7835500a4e}{\index{tiletext.\+c@{tiletext.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!tiletext.\+c@{tiletext.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}static void F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf write\+\_\+txttile}}]{, }
\item[{(F\+I\+L\+E $\ast$, {\bf pixel}($\ast$)\mbox{[}{\bf T\+I\+L\+E\+\_\+\+X}\mbox{]})}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{tiletext_8c_aa14a0f4f9a7f2af8aa78fb7835500a4e}
\hypertarget{tiletext_8c_afd96856d9b9d8dd587b735c54e9c2765}{\index{tiletext.\+c@{tiletext.\+c}!fopen\+\_\+text\+\_\+file@{fopen\+\_\+text\+\_\+file}}
\index{fopen\+\_\+text\+\_\+file@{fopen\+\_\+text\+\_\+file}!tiletext.\+c@{tiletext.\+c}}
\subsubsection[{fopen\+\_\+text\+\_\+file}]{\setlength{\rightskip}{0pt plus 5cm}{\bf boolean} fopen\+\_\+text\+\_\+file (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{filename, }
\item[{{\bf const} char $\ast$}]{type}
\end{DoxyParamCaption}
) const}}\label{tiletext_8c_afd96856d9b9d8dd587b735c54e9c2765}


Definition at line 254 of file tiletext.\+c.



References colorsinmainmap, F\+A\+L\+S\+E, filename, Fprintf, init\+\_\+colormap(), merge\+\_\+colormap(), placeholder, placeholder\+\_\+init, R\+D\+T\+M\+O\+D\+E, read\+\_\+text\+\_\+colormap(), rindex, S\+I\+Z\+E, text\+\_\+sets, tile\+\_\+file, tile\+\_\+set, tile\+\_\+set\+\_\+indx, T\+R\+U\+E, write\+\_\+text\+\_\+colormap(), and W\+R\+T\+M\+O\+D\+E.



Referenced by main(), and process\+\_\+file().


\begin{DoxyCode}
257 \{
258     \textcolor{keyword}{const} \textcolor{keywordtype}{char} *p;
259     \textcolor{keywordtype}{int} i;
260 
261     \textcolor{keywordflow}{if} (\hyperlink{tiletext_8c_a77e0eb3cef80617761a35b843368e1fe}{tile\_file} != (FILE *)0) \{
262         \hyperlink{dgn__main_8c_afdc08699807b888a15fe28a2647ed466}{Fprintf}(stderr, \textcolor{stringliteral}{"can only open one text file at at time\(\backslash\)n"});
263         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
264     \}
265 
266     \hyperlink{tiletext_8c_a77e0eb3cef80617761a35b843368e1fe}{tile\_file} = fopen(\hyperlink{makedefs_8c_ac1ccfd52478f58f8d268ad6bb486bef0}{filename}, \hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type});
267     \textcolor{keywordflow}{if} (\hyperlink{tiletext_8c_a77e0eb3cef80617761a35b843368e1fe}{tile\_file} == (FILE *)0) \{
268         \hyperlink{dgn__main_8c_afdc08699807b888a15fe28a2647ed466}{Fprintf}(stderr, \textcolor{stringliteral}{"cannot open text file %s\(\backslash\)n"}, \hyperlink{makedefs_8c_ac1ccfd52478f58f8d268ad6bb486bef0}{filename});
269         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
270     \}
271 
272     p = \hyperlink{beconf_8h_a8c35ae4e83034731f6aecfb34c883ecf}{rindex}(\hyperlink{makedefs_8c_ac1ccfd52478f58f8d268ad6bb486bef0}{filename}, \textcolor{charliteral}{'/'});
273     \textcolor{keywordflow}{if} (p) p++;
274     \textcolor{keywordflow}{else} p = \hyperlink{makedefs_8c_ac1ccfd52478f58f8d268ad6bb486bef0}{filename};
275 
276     \hyperlink{tiletext_8c_a42501c03e6e9f74ffad73a9a903316eb}{tile\_set} = 0;
277     \textcolor{keywordflow}{for} (i = 0; i < \hyperlink{global_8h_afd2537d19a3cb6556b0f727580ec6ee7}{SIZE}(\hyperlink{tiletext_8c_af03bdd9338949becb59305ea9b6e8fde}{text\_sets}); i++) \{
278         \textcolor{keywordflow}{if} (!strcmp(p, \hyperlink{tiletext_8c_af03bdd9338949becb59305ea9b6e8fde}{text\_sets}[i]))
279             \hyperlink{tiletext_8c_a42501c03e6e9f74ffad73a9a903316eb}{tile\_set} = i+1;
280     \}
281     \hyperlink{tiletext_8c_a6c4fd49f1ac99f5157590bbea3af4221}{tile\_set\_indx} = 0;
282 
283     \textcolor{keywordflow}{if} (!strcmp(\hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type}, \hyperlink{dlb_8h_a52b55e796a44079bc56afab59e8c0c89}{RDTMODE})) \{
284         \textcolor{comment}{/* Fill placeholder with noise */}
285         \textcolor{keywordflow}{if} ( !\hyperlink{tiletext_8c_a886411e3d0da13b7d86644f059fdb47c}{placeholder\_init} ) \{
286             \hyperlink{tiletext_8c_a886411e3d0da13b7d86644f059fdb47c}{placeholder\_init}++;
287             \textcolor{keywordflow}{for} ( i=0; i<\textcolor{keyword}{sizeof}(\hyperlink{tiletext_8c_af4237a65bc71d23957fa13a85dd329f8}{placeholder}); i++ )
288             ((\textcolor{keywordtype}{char}*)\hyperlink{tiletext_8c_af4237a65bc71d23957fa13a85dd329f8}{placeholder})[i]=i%256;
289         \}
290 
291         \hyperlink{tiletext_8c_abdf69d609dbfe6043fee54ed4278dbfc}{read\_text\_colormap}(\hyperlink{tiletext_8c_a77e0eb3cef80617761a35b843368e1fe}{tile\_file});
292         \textcolor{keywordflow}{if} (!\hyperlink{tiletext_8c_ab105f0242e3bd09f3d953cd20700645a}{colorsinmainmap})
293             \hyperlink{tiletext_8c_a2cb5731b96aae136b97a319e6f4d9c6d}{init\_colormap}();
294         \textcolor{keywordflow}{else}
295             \hyperlink{tiletext_8c_a61cd42dc61bcb7404d69cda4d9e580cf}{merge\_colormap}();
296         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
297     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!strcmp(\hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type}, \hyperlink{dlb_8h_a157992706d1f539fba42c6ff1af07764}{WRTMODE})) \{
298         \textcolor{keywordflow}{if} (!\hyperlink{tiletext_8c_ab105f0242e3bd09f3d953cd20700645a}{colorsinmainmap}) \{
299             \hyperlink{dgn__main_8c_afdc08699807b888a15fe28a2647ed466}{Fprintf}(stderr, \textcolor{stringliteral}{"no colormap set yet\(\backslash\)n"});
300             \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
301         \}
302         \textcolor{keywordflow}{return}(\hyperlink{tiletext_8c_a0ba88f814e1084e989e12dd45812045d}{write\_text\_colormap}(\hyperlink{tiletext_8c_a77e0eb3cef80617761a35b843368e1fe}{tile\_file}));
303     \} \textcolor{keywordflow}{else} \{
304         \hyperlink{dgn__main_8c_afdc08699807b888a15fe28a2647ed466}{Fprintf}(stderr, \textcolor{stringliteral}{"bad mode (%s) for fopen\_text\_file\(\backslash\)n"}, \hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type});
305         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
306     \}
307 \}
\end{DoxyCode}
\hypertarget{tiletext_8c_a2cb5731b96aae136b97a319e6f4d9c6d}{\index{tiletext.\+c@{tiletext.\+c}!init\+\_\+colormap@{init\+\_\+colormap}}
\index{init\+\_\+colormap@{init\+\_\+colormap}!tiletext.\+c@{tiletext.\+c}}
\subsubsection[{init\+\_\+colormap}]{\setlength{\rightskip}{0pt plus 5cm}void init\+\_\+colormap (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{tiletext_8c_a2cb5731b96aae136b97a319e6f4d9c6d}


Definition at line 214 of file tiletext.\+c.



References C\+M\+\_\+\+B\+L\+U\+E, C\+M\+\_\+\+G\+R\+E\+E\+N, C\+M\+\_\+\+R\+E\+D, Color\+Map, colorsinmainmap, colorsinmap, and Main\+Color\+Map.



Referenced by fopen\+\_\+text\+\_\+file(), and main().


\begin{DoxyCode}
215 \{
216     \textcolor{keywordtype}{int} i;
217 
218     \hyperlink{tiletext_8c_ab105f0242e3bd09f3d953cd20700645a}{colorsinmainmap} = \hyperlink{tiletext_8c_aff516215666b583bb7940b37a907fb6d}{colorsinmap};
219     \textcolor{keywordflow}{for} (i = 0; i < \hyperlink{tiletext_8c_aff516215666b583bb7940b37a907fb6d}{colorsinmap}; i++) \{
220         \hyperlink{tiletext_8c_a25a1fd9c3ee244370c7fb669509c889e}{MainColorMap}[\hyperlink{tile_8h_a0704a976b5a1827d9a560581409000a0}{CM\_RED}][i] = \hyperlink{tiletext_8c_ac98705c791dbc9a1ce4ed91dbf5ae5bf}{ColorMap}[\hyperlink{tile_8h_a0704a976b5a1827d9a560581409000a0}{CM\_RED}][i];
221         \hyperlink{tiletext_8c_a25a1fd9c3ee244370c7fb669509c889e}{MainColorMap}[\hyperlink{tile_8h_aae81d11012fc6e1d32b3adda0d8b9ba9}{CM\_GREEN}][i] = \hyperlink{tiletext_8c_ac98705c791dbc9a1ce4ed91dbf5ae5bf}{ColorMap}[
      \hyperlink{tile_8h_aae81d11012fc6e1d32b3adda0d8b9ba9}{CM\_GREEN}][i];
222         \hyperlink{tiletext_8c_a25a1fd9c3ee244370c7fb669509c889e}{MainColorMap}[\hyperlink{tile_8h_a28a45eb8e065997866d101928d36d1bc}{CM\_BLUE}][i] = \hyperlink{tiletext_8c_ac98705c791dbc9a1ce4ed91dbf5ae5bf}{ColorMap}[\hyperlink{tile_8h_a28a45eb8e065997866d101928d36d1bc}{CM\_BLUE}][i];
223     \}
224 \}
\end{DoxyCode}
\hypertarget{tiletext_8c_a61cd42dc61bcb7404d69cda4d9e580cf}{\index{tiletext.\+c@{tiletext.\+c}!merge\+\_\+colormap@{merge\+\_\+colormap}}
\index{merge\+\_\+colormap@{merge\+\_\+colormap}!tiletext.\+c@{tiletext.\+c}}
\subsubsection[{merge\+\_\+colormap}]{\setlength{\rightskip}{0pt plus 5cm}void merge\+\_\+colormap (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{tiletext_8c_a61cd42dc61bcb7404d69cda4d9e580cf}


Definition at line 228 of file tiletext.\+c.



References C\+M\+\_\+\+B\+L\+U\+E, C\+M\+\_\+\+G\+R\+E\+E\+N, C\+M\+\_\+\+R\+E\+D, Color\+Map, colorsinmainmap, colorsinmap, Fprintf, Main\+Color\+Map, and M\+A\+X\+C\+O\+L\+O\+R\+M\+A\+P\+S\+I\+Z\+E.



Referenced by fopen\+\_\+text\+\_\+file().


\begin{DoxyCode}
229 \{
230     \textcolor{keywordtype}{int} i, j;
231 
232     \textcolor{keywordflow}{for} (i = 0; i < \hyperlink{tiletext_8c_aff516215666b583bb7940b37a907fb6d}{colorsinmap}; i++) \{
233         \textcolor{keywordflow}{for} (j = 0; j < \hyperlink{tiletext_8c_ab105f0242e3bd09f3d953cd20700645a}{colorsinmainmap}; j++) \{
234             \textcolor{keywordflow}{if} (\hyperlink{tiletext_8c_a25a1fd9c3ee244370c7fb669509c889e}{MainColorMap}[\hyperlink{tile_8h_a0704a976b5a1827d9a560581409000a0}{CM\_RED}][j] == \hyperlink{tiletext_8c_ac98705c791dbc9a1ce4ed91dbf5ae5bf}{ColorMap}[
      \hyperlink{tile_8h_a0704a976b5a1827d9a560581409000a0}{CM\_RED}][i] &&
235             \hyperlink{tiletext_8c_a25a1fd9c3ee244370c7fb669509c889e}{MainColorMap}[\hyperlink{tile_8h_aae81d11012fc6e1d32b3adda0d8b9ba9}{CM\_GREEN}][j] == \hyperlink{tiletext_8c_ac98705c791dbc9a1ce4ed91dbf5ae5bf}{ColorMap}[
      \hyperlink{tile_8h_aae81d11012fc6e1d32b3adda0d8b9ba9}{CM\_GREEN}][i] &&
236             \hyperlink{tiletext_8c_a25a1fd9c3ee244370c7fb669509c889e}{MainColorMap}[\hyperlink{tile_8h_a28a45eb8e065997866d101928d36d1bc}{CM\_BLUE}][j] == \hyperlink{tiletext_8c_ac98705c791dbc9a1ce4ed91dbf5ae5bf}{ColorMap}[
      \hyperlink{tile_8h_a28a45eb8e065997866d101928d36d1bc}{CM\_BLUE}][i])
237                 \textcolor{keywordflow}{break};
238         \}
239         \textcolor{keywordflow}{if} (j >= colorsinmainmap) \{ \textcolor{comment}{/* new color */}
240             \textcolor{keywordflow}{if} (colorsinmainmap >= \hyperlink{tile_8h_a321fcd6ec582309d0779ddc457ec5d62}{MAXCOLORMAPSIZE}) \{
241             \hyperlink{dgn__main_8c_afdc08699807b888a15fe28a2647ed466}{Fprintf}(stderr,
242                 \textcolor{stringliteral}{"Too many colors to merge -- excess ignored.\(\backslash\)n"});
243             \}
244             j = \hyperlink{tiletext_8c_ab105f0242e3bd09f3d953cd20700645a}{colorsinmainmap};
245             \hyperlink{tiletext_8c_a25a1fd9c3ee244370c7fb669509c889e}{MainColorMap}[\hyperlink{tile_8h_a0704a976b5a1827d9a560581409000a0}{CM\_RED}][j] = \hyperlink{tiletext_8c_ac98705c791dbc9a1ce4ed91dbf5ae5bf}{ColorMap}[\hyperlink{tile_8h_a0704a976b5a1827d9a560581409000a0}{CM\_RED}][i];
246             \hyperlink{tiletext_8c_a25a1fd9c3ee244370c7fb669509c889e}{MainColorMap}[\hyperlink{tile_8h_aae81d11012fc6e1d32b3adda0d8b9ba9}{CM\_GREEN}][j] = \hyperlink{tiletext_8c_ac98705c791dbc9a1ce4ed91dbf5ae5bf}{ColorMap}[
      \hyperlink{tile_8h_aae81d11012fc6e1d32b3adda0d8b9ba9}{CM\_GREEN}][i];
247             \hyperlink{tiletext_8c_a25a1fd9c3ee244370c7fb669509c889e}{MainColorMap}[\hyperlink{tile_8h_a28a45eb8e065997866d101928d36d1bc}{CM\_BLUE}][j] = \hyperlink{tiletext_8c_ac98705c791dbc9a1ce4ed91dbf5ae5bf}{ColorMap}[
      \hyperlink{tile_8h_a28a45eb8e065997866d101928d36d1bc}{CM\_BLUE}][i];
248             colorsinmainmap++;
249         \}
250     \}
251 \}
\end{DoxyCode}
\hypertarget{tiletext_8c_abdf69d609dbfe6043fee54ed4278dbfc}{\index{tiletext.\+c@{tiletext.\+c}!read\+\_\+text\+\_\+colormap@{read\+\_\+text\+\_\+colormap}}
\index{read\+\_\+text\+\_\+colormap@{read\+\_\+text\+\_\+colormap}!tiletext.\+c@{tiletext.\+c}}
\subsubsection[{read\+\_\+text\+\_\+colormap}]{\setlength{\rightskip}{0pt plus 5cm}static void read\+\_\+text\+\_\+colormap (
\begin{DoxyParamCaption}
\item[{F\+I\+L\+E $\ast$}]{txtfile}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{tiletext_8c_abdf69d609dbfe6043fee54ed4278dbfc}


Definition at line 37 of file tiletext.\+c.



References C\+M\+\_\+\+B\+L\+U\+E, C\+M\+\_\+\+G\+R\+E\+E\+N, C\+M\+\_\+\+R\+E\+D, color\+\_\+index, Color\+Map, colorsinmap, F\+O\+R\+M\+A\+T\+\_\+\+S\+T\+R\+I\+N\+G, M\+A\+X\+C\+O\+L\+O\+R\+M\+A\+P\+S\+I\+Z\+E, and num\+\_\+colors.



Referenced by fopen\+\_\+text\+\_\+file().


\begin{DoxyCode}
39 \{
40     \textcolor{keywordtype}{int} i, r, g, b;
41     \textcolor{keywordtype}{char} c[2];
42 
43     \textcolor{keywordflow}{for} (i = 0; i < \hyperlink{tile_8h_a321fcd6ec582309d0779ddc457ec5d62}{MAXCOLORMAPSIZE}; i++)
44         \hyperlink{tiletext_8c_ab4cc0e0b57e1c74c77467ab8ab596e3e}{color\_index}[i] = -1;
45 
46     \hyperlink{tiletext_8c_a5dd47736942141b628a52481f0f37ab4}{num\_colors} = 0;
47     \textcolor{keywordflow}{while} (fscanf(txtfile, \hyperlink{tiletext_8c_a4610636f10e4604ba296cbf9287b0c7b}{FORMAT\_STRING}, c, &r, &g, &b) == 4) \{
48         \hyperlink{tiletext_8c_ab4cc0e0b57e1c74c77467ab8ab596e3e}{color\_index}[(int) c[0]] = \hyperlink{tiletext_8c_a5dd47736942141b628a52481f0f37ab4}{num\_colors};
49         \hyperlink{tiletext_8c_ac98705c791dbc9a1ce4ed91dbf5ae5bf}{ColorMap}[\hyperlink{tile_8h_a0704a976b5a1827d9a560581409000a0}{CM\_RED}][\hyperlink{tiletext_8c_a5dd47736942141b628a52481f0f37ab4}{num\_colors}] = r;
50         ColorMap[\hyperlink{tile_8h_aae81d11012fc6e1d32b3adda0d8b9ba9}{CM\_GREEN}][\hyperlink{tiletext_8c_a5dd47736942141b628a52481f0f37ab4}{num\_colors}] = g;
51         ColorMap[\hyperlink{tile_8h_a28a45eb8e065997866d101928d36d1bc}{CM\_BLUE}][\hyperlink{tiletext_8c_a5dd47736942141b628a52481f0f37ab4}{num\_colors}] = b;
52         \hyperlink{tiletext_8c_a5dd47736942141b628a52481f0f37ab4}{num\_colors}++;
53     \}
54     \hyperlink{tiletext_8c_aff516215666b583bb7940b37a907fb6d}{colorsinmap} = \hyperlink{tiletext_8c_a5dd47736942141b628a52481f0f37ab4}{num\_colors};
55 \}
\end{DoxyCode}
\hypertarget{tiletext_8c_a8bfc171583fff7761a8ae79103b6aa89}{\index{tiletext.\+c@{tiletext.\+c}!read\+\_\+text\+\_\+tile@{read\+\_\+text\+\_\+tile}}
\index{read\+\_\+text\+\_\+tile@{read\+\_\+text\+\_\+tile}!tiletext.\+c@{tiletext.\+c}}
\subsubsection[{read\+\_\+text\+\_\+tile}]{\setlength{\rightskip}{0pt plus 5cm}{\bf boolean} read\+\_\+text\+\_\+tile (
\begin{DoxyParamCaption}
\item[{{\bf pixel} $\ast$}]{pixels}
\end{DoxyParamCaption}
)}}\label{tiletext_8c_a8bfc171583fff7761a8ae79103b6aa89}


Definition at line 310 of file tiletext.\+c.



References pixels, read\+\_\+txttile(), and tile\+\_\+file.



Referenced by convert\+\_\+tiles(), and main().


\begin{DoxyCode}
312 \{
313     \textcolor{keywordflow}{return}(\hyperlink{tiletext_8c_a9ec81549b65847945c0ae6872730cb61}{read\_txttile}(\hyperlink{tiletext_8c_a77e0eb3cef80617761a35b843368e1fe}{tile\_file}, pixels));
314 \}
\end{DoxyCode}
\hypertarget{tiletext_8c_a9ec81549b65847945c0ae6872730cb61}{\index{tiletext.\+c@{tiletext.\+c}!read\+\_\+txttile@{read\+\_\+txttile}}
\index{read\+\_\+txttile@{read\+\_\+txttile}!tiletext.\+c@{tiletext.\+c}}
\subsubsection[{read\+\_\+txttile}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf boolean} read\+\_\+txttile (
\begin{DoxyParamCaption}
\item[{F\+I\+L\+E $\ast$}]{txtfile, }
\item[{{\bf pixel} $\ast$}]{pixels}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{tiletext_8c_a9ec81549b65847945c0ae6872730cb61}


Definition at line 86 of file tiletext.\+c.



References pixel\+::b, buf, B\+U\+F\+S\+Z, C\+M\+\_\+\+B\+L\+U\+E, C\+M\+\_\+\+G\+R\+E\+E\+N, C\+M\+\_\+\+R\+E\+D, color\+\_\+index, Color\+Map, F\+A\+L\+S\+E, Fprintf, pixel\+::g, pixels, pixel\+::r, text\+\_\+sets, tile\+\_\+set, tile\+\_\+set\+\_\+indx, T\+I\+L\+E\+\_\+\+X, T\+I\+L\+E\+\_\+\+Y, and T\+R\+U\+E.



Referenced by read\+\_\+text\+\_\+tile().


\begin{DoxyCode}
89 \{
90     \textcolor{keywordtype}{int} ph, i, j, k;
91     \textcolor{keywordtype}{char} \hyperlink{xpm2iff_8c_a6f4b9854141692d23b0d072176044ca6}{buf}[\hyperlink{global_8h_ab26c26cbf7a0c97d8960c3cfb413f882}{BUFSZ}], ttype[\hyperlink{global_8h_ab26c26cbf7a0c97d8960c3cfb413f882}{BUFSZ}];
92     \textcolor{keyword}{const} \textcolor{keywordtype}{char} *p;
93     \textcolor{keywordtype}{char} c[2];
94 
95     \textcolor{keywordflow}{if} (fscanf(txtfile, \textcolor{stringliteral}{"# %s %d (%[^)])"}, ttype, &i, buf) <= 0)
96         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
97     
98     ph = strcmp(ttype, \textcolor{stringliteral}{"placeholder"}) == 0;
99 
100     \textcolor{keywordflow}{if} (!ph && strcmp(ttype,\textcolor{stringliteral}{"tile"}) != 0)
101         \hyperlink{dgn__main_8c_afdc08699807b888a15fe28a2647ed466}{Fprintf}(stderr,
102             \textcolor{stringliteral}{"Keyword \(\backslash\)"%s\(\backslash\)" unexpected for entry %d\(\backslash\)n"},
103             ttype, i);
104 
105     \textcolor{keywordflow}{if} (\hyperlink{tiletext_8c_a42501c03e6e9f74ffad73a9a903316eb}{tile\_set} != 0) \{
106         \textcolor{comment}{/* check tile name, but not relative number, which will}
107 \textcolor{comment}{         * change when tiles are added}
108 \textcolor{comment}{         */}
109         p = tilename(\hyperlink{tiletext_8c_a42501c03e6e9f74ffad73a9a903316eb}{tile\_set}, \hyperlink{tiletext_8c_a6c4fd49f1ac99f5157590bbea3af4221}{tile\_set\_indx});
110         \textcolor{keywordflow}{if} (p && strcmp(p, buf)) \{
111         \hyperlink{dgn__main_8c_afdc08699807b888a15fe28a2647ed466}{Fprintf}(stderr, \textcolor{stringliteral}{"warning: for tile %d (numbered %d) of %s,\(\backslash\)n"},
112                 \hyperlink{tiletext_8c_a6c4fd49f1ac99f5157590bbea3af4221}{tile\_set\_indx}, i, \hyperlink{tiletext_8c_af03bdd9338949becb59305ea9b6e8fde}{text\_sets}[\hyperlink{tiletext_8c_a42501c03e6e9f74ffad73a9a903316eb}{tile\_set}-1]);
113         \hyperlink{dgn__main_8c_afdc08699807b888a15fe28a2647ed466}{Fprintf}(stderr, \textcolor{stringliteral}{"\(\backslash\)tfound '%s' while expecting '%s'\(\backslash\)n"},
114                 buf, p);
115         \}
116     \}
117     \hyperlink{tiletext_8c_a6c4fd49f1ac99f5157590bbea3af4221}{tile\_set\_indx}++;
118         
119     \textcolor{comment}{/* look for non-whitespace at each stage */}
120     \textcolor{keywordflow}{if} (fscanf(txtfile, \textcolor{stringliteral}{"%1s"}, c) < 0) \{
121         \hyperlink{dgn__main_8c_afdc08699807b888a15fe28a2647ed466}{Fprintf}(stderr, \textcolor{stringliteral}{"unexpected EOF\(\backslash\)n"});
122         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
123     \}
124     \textcolor{keywordflow}{if} (c[0] != \textcolor{charliteral}{'\{'}) \{
125         \hyperlink{dgn__main_8c_afdc08699807b888a15fe28a2647ed466}{Fprintf}(stderr, \textcolor{stringliteral}{"didn't find expected '\{'\(\backslash\)n"});
126         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
127     \}
128     \textcolor{keywordflow}{for} (j = 0; j < \hyperlink{sys_2wince_2winMS_8h_a4a62524a49a9be02996b8e667b45abc9}{TILE\_Y}; j++) \{
129         \textcolor{keywordflow}{for} (i = 0; i < \hyperlink{sys_2wince_2winMS_8h_a9f3fae6a9058d02850af5deba9be4544}{TILE\_X}; i++) \{
130             \textcolor{keywordflow}{if} (fscanf(txtfile, \textcolor{stringliteral}{"%1s"}, c) < 0) \{
131                 \hyperlink{dgn__main_8c_afdc08699807b888a15fe28a2647ed466}{Fprintf}(stderr, \textcolor{stringliteral}{"unexpected EOF\(\backslash\)n"});
132                 \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
133             \}
134             k = \hyperlink{tiletext_8c_ab4cc0e0b57e1c74c77467ab8ab596e3e}{color\_index}[(int) c[0]];
135             \textcolor{keywordflow}{if} (k == -1)
136                 \hyperlink{dgn__main_8c_afdc08699807b888a15fe28a2647ed466}{Fprintf}(stderr,
137                     \textcolor{stringliteral}{"color %c not in colormap!\(\backslash\)n"}, c[0]);
138             \textcolor{keywordflow}{else} \{
139                 pixels[j][i].\hyperlink{structpixel_aa54a32268c2ddf156577cfc79a858d58}{r} = \hyperlink{tiletext_8c_ac98705c791dbc9a1ce4ed91dbf5ae5bf}{ColorMap}[\hyperlink{tile_8h_a0704a976b5a1827d9a560581409000a0}{CM\_RED}][k];
140                 pixels[j][i].\hyperlink{structpixel_ade1a7e5fcb9d3e9756669a559f654958}{g} = \hyperlink{tiletext_8c_ac98705c791dbc9a1ce4ed91dbf5ae5bf}{ColorMap}[\hyperlink{tile_8h_aae81d11012fc6e1d32b3adda0d8b9ba9}{CM\_GREEN}][k];
141                 pixels[j][i].\hyperlink{structpixel_ae12c7adf966c6aa301af45c395925d05}{b} = \hyperlink{tiletext_8c_ac98705c791dbc9a1ce4ed91dbf5ae5bf}{ColorMap}[\hyperlink{tile_8h_a28a45eb8e065997866d101928d36d1bc}{CM\_BLUE}][k];
142             \}
143         \}
144     \}
145     \textcolor{keywordflow}{if} ( ph ) \{
146         \textcolor{comment}{/* remember it for later */}
147         memcpy( \hyperlink{tiletext_8c_af4237a65bc71d23957fa13a85dd329f8}{placeholder}, pixels, \textcolor{keyword}{sizeof}(\hyperlink{tiletext_8c_af4237a65bc71d23957fa13a85dd329f8}{placeholder}) );
148     \}
149     \textcolor{keywordflow}{if} (fscanf(txtfile, \textcolor{stringliteral}{"%1s "}, c) < 0) \{
150         \hyperlink{dgn__main_8c_afdc08699807b888a15fe28a2647ed466}{Fprintf}(stderr, \textcolor{stringliteral}{"unexpected EOF\(\backslash\)n"});
151         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
152     \}
153     \textcolor{keywordflow}{if} (c[0] != \textcolor{charliteral}{'\}'}) \{
154         \hyperlink{dgn__main_8c_afdc08699807b888a15fe28a2647ed466}{Fprintf}(stderr, \textcolor{stringliteral}{"didn't find expected '\}'\(\backslash\)n"});
155         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
156     \}
157 \textcolor{preprocessor}{#ifdef \_DCC}
158     \textcolor{comment}{/* DICE again... it doesn't seem to eat whitespace after the \} like}
159 \textcolor{comment}{     * it should, so we have to do so manually.}
160 \textcolor{comment}{     */}
161     \textcolor{keywordflow}{while} ((*c = fgetc(txtfile)) != EOF && isspace(*c))
162         ;
163     ungetc(*c, txtfile);
164 \textcolor{preprocessor}{#endif}
165     \textcolor{keywordflow}{return} \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
166 \}
\end{DoxyCode}
\hypertarget{tiletext_8c_a0ba88f814e1084e989e12dd45812045d}{\index{tiletext.\+c@{tiletext.\+c}!write\+\_\+text\+\_\+colormap@{write\+\_\+text\+\_\+colormap}}
\index{write\+\_\+text\+\_\+colormap@{write\+\_\+text\+\_\+colormap}!tiletext.\+c@{tiletext.\+c}}
\subsubsection[{write\+\_\+text\+\_\+colormap}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf boolean} write\+\_\+text\+\_\+colormap (
\begin{DoxyParamCaption}
\item[{F\+I\+L\+E $\ast$}]{txtfile}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{tiletext_8c_a0ba88f814e1084e989e12dd45812045d}


Definition at line 60 of file tiletext.\+c.



References charcolors, C\+M\+\_\+\+B\+L\+U\+E, C\+M\+\_\+\+G\+R\+E\+E\+N, C\+M\+\_\+\+R\+E\+D, colorsinmainmap, F\+A\+L\+S\+E, Fprintf, Main\+Color\+Map, num\+\_\+colors, and T\+R\+U\+E.



Referenced by fopen\+\_\+text\+\_\+file().


\begin{DoxyCode}
62 \{
63     \textcolor{keywordtype}{int} i;
64     \textcolor{keywordtype}{char} c;
65 
66     \hyperlink{tiletext_8c_a5dd47736942141b628a52481f0f37ab4}{num\_colors} = \hyperlink{tiletext_8c_ab105f0242e3bd09f3d953cd20700645a}{colorsinmainmap};
67     \textcolor{keywordflow}{if} (\hyperlink{tiletext_8c_a5dd47736942141b628a52481f0f37ab4}{num\_colors} > 62) \{
68         \hyperlink{dgn__main_8c_afdc08699807b888a15fe28a2647ed466}{Fprintf}(stderr, \textcolor{stringliteral}{"too many colors (%d)\(\backslash\)n"}, \hyperlink{tiletext_8c_a5dd47736942141b628a52481f0f37ab4}{num\_colors});
69         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
70     \}
71     \textcolor{keywordflow}{for} (i = 0; i < \hyperlink{tiletext_8c_a5dd47736942141b628a52481f0f37ab4}{num\_colors}; i++) \{
72         \textcolor{keywordflow}{if} (i < 26) c = \textcolor{charliteral}{'A'} + i;
73         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (i < 52) c = \textcolor{charliteral}{'a'} + i - 26;
74         \textcolor{keywordflow}{else} c = \textcolor{charliteral}{'0'} + i - 52;
75 
76         \hyperlink{tiletext_8c_ad6f4abfbfd788414871238864167a50e}{charcolors}[i] = c;
77         \hyperlink{dgn__main_8c_afdc08699807b888a15fe28a2647ed466}{Fprintf}(txtfile, \textcolor{stringliteral}{"%c = (%d, %d, %d)\(\backslash\)n"}, c,
78                         (\textcolor{keywordtype}{int})\hyperlink{tiletext_8c_a25a1fd9c3ee244370c7fb669509c889e}{MainColorMap}[\hyperlink{tile_8h_a0704a976b5a1827d9a560581409000a0}{CM\_RED}][i],
79                         (\textcolor{keywordtype}{int})\hyperlink{tiletext_8c_a25a1fd9c3ee244370c7fb669509c889e}{MainColorMap}[\hyperlink{tile_8h_aae81d11012fc6e1d32b3adda0d8b9ba9}{CM\_GREEN}][i],
80                         (\textcolor{keywordtype}{int})\hyperlink{tiletext_8c_a25a1fd9c3ee244370c7fb669509c889e}{MainColorMap}[\hyperlink{tile_8h_a28a45eb8e065997866d101928d36d1bc}{CM\_BLUE}][i]);
81     \}
82     \textcolor{keywordflow}{return} \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
83 \}
\end{DoxyCode}
\hypertarget{tiletext_8c_a74b64750c419ae14d3af399325ff644a}{\index{tiletext.\+c@{tiletext.\+c}!write\+\_\+text\+\_\+tile@{write\+\_\+text\+\_\+tile}}
\index{write\+\_\+text\+\_\+tile@{write\+\_\+text\+\_\+tile}!tiletext.\+c@{tiletext.\+c}}
\subsubsection[{write\+\_\+text\+\_\+tile}]{\setlength{\rightskip}{0pt plus 5cm}{\bf boolean} write\+\_\+text\+\_\+tile (
\begin{DoxyParamCaption}
\item[{{\bf pixel} $\ast$}]{pixels}
\end{DoxyParamCaption}
)}}\label{tiletext_8c_a74b64750c419ae14d3af399325ff644a}


Definition at line 317 of file tiletext.\+c.



References pixels, tile\+\_\+file, T\+R\+U\+E, and write\+\_\+txttile().



Referenced by main().


\begin{DoxyCode}
319 \{
320     \hyperlink{tiletext_8c_afe35c2d34a3f4e1cc3bb317607dd782f}{write\_txttile}(\hyperlink{tiletext_8c_a77e0eb3cef80617761a35b843368e1fe}{tile\_file}, pixels);
321     \textcolor{keywordflow}{return} \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
322 \}
\end{DoxyCode}
\hypertarget{tiletext_8c_afe35c2d34a3f4e1cc3bb317607dd782f}{\index{tiletext.\+c@{tiletext.\+c}!write\+\_\+txttile@{write\+\_\+txttile}}
\index{write\+\_\+txttile@{write\+\_\+txttile}!tiletext.\+c@{tiletext.\+c}}
\subsubsection[{write\+\_\+txttile}]{\setlength{\rightskip}{0pt plus 5cm}static void write\+\_\+txttile (
\begin{DoxyParamCaption}
\item[{F\+I\+L\+E $\ast$}]{txtfile, }
\item[{{\bf pixel} $\ast$}]{pixels}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{tiletext_8c_afe35c2d34a3f4e1cc3bb317607dd782f}


Definition at line 169 of file tiletext.\+c.



References charcolors, C\+M\+\_\+\+B\+L\+U\+E, C\+M\+\_\+\+G\+R\+E\+E\+N, C\+M\+\_\+\+R\+E\+D, Color\+Map, Fprintf, num\+\_\+colors, pixels, tile\+\_\+set, tile\+\_\+set\+\_\+indx, T\+I\+L\+E\+\_\+\+X, T\+I\+L\+E\+\_\+\+Y, and type.



Referenced by write\+\_\+text\+\_\+tile().


\begin{DoxyCode}
172 \{
173     \textcolor{keyword}{const} \textcolor{keywordtype}{char} *p;
174     \textcolor{keyword}{const} \textcolor{keywordtype}{char} *\hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type};
175     \textcolor{keywordtype}{int} i, j, k;
176 
177     \textcolor{keywordflow}{if} ( memcmp(\hyperlink{tiletext_8c_af4237a65bc71d23957fa13a85dd329f8}{placeholder}, pixels, \textcolor{keyword}{sizeof}(\hyperlink{tiletext_8c_af4237a65bc71d23957fa13a85dd329f8}{placeholder})) == 0 )
178         type = \textcolor{stringliteral}{"placeholder"};
179     \textcolor{keywordflow}{else}
180         type = \textcolor{stringliteral}{"tile"};
181 
182     \textcolor{keywordflow}{if} (\hyperlink{tiletext_8c_a42501c03e6e9f74ffad73a9a903316eb}{tile\_set} == 0)
183         \hyperlink{dgn__main_8c_afdc08699807b888a15fe28a2647ed466}{Fprintf}(txtfile, \textcolor{stringliteral}{"# %s %d (unknown)\(\backslash\)n"}, type, \hyperlink{tiletext_8c_a6c4fd49f1ac99f5157590bbea3af4221}{tile\_set\_indx});
184     \textcolor{keywordflow}{else} \{
185         p = tilename(\hyperlink{tiletext_8c_a42501c03e6e9f74ffad73a9a903316eb}{tile\_set}, \hyperlink{tiletext_8c_a6c4fd49f1ac99f5157590bbea3af4221}{tile\_set\_indx});
186         \textcolor{keywordflow}{if} (p)
187             \hyperlink{dgn__main_8c_afdc08699807b888a15fe28a2647ed466}{Fprintf}(txtfile, \textcolor{stringliteral}{"# %s %d (%s)\(\backslash\)n"}, type, \hyperlink{tiletext_8c_a6c4fd49f1ac99f5157590bbea3af4221}{tile\_set\_indx}, p);
188         \textcolor{keywordflow}{else}
189             \hyperlink{dgn__main_8c_afdc08699807b888a15fe28a2647ed466}{Fprintf}(txtfile, \textcolor{stringliteral}{"# %s %d (null)\(\backslash\)n"}, type, \hyperlink{tiletext_8c_a6c4fd49f1ac99f5157590bbea3af4221}{tile\_set\_indx});
190     \}
191     \hyperlink{tiletext_8c_a6c4fd49f1ac99f5157590bbea3af4221}{tile\_set\_indx}++;
192 
193     \hyperlink{dgn__main_8c_afdc08699807b888a15fe28a2647ed466}{Fprintf}(txtfile, \textcolor{stringliteral}{"\{\(\backslash\)n"});
194     \textcolor{keywordflow}{for} (j = 0; j < \hyperlink{sys_2wince_2winMS_8h_a4a62524a49a9be02996b8e667b45abc9}{TILE\_Y}; j++) \{
195         \hyperlink{dgn__main_8c_afdc08699807b888a15fe28a2647ed466}{Fprintf}(txtfile, \textcolor{stringliteral}{"  "});
196         \textcolor{keywordflow}{for} (i = 0; i < \hyperlink{sys_2wince_2winMS_8h_a9f3fae6a9058d02850af5deba9be4544}{TILE\_X}; i++) \{
197             \textcolor{keywordflow}{for} (k = 0; k < \hyperlink{tiletext_8c_a5dd47736942141b628a52481f0f37ab4}{num\_colors}; k++) \{
198                 \textcolor{keywordflow}{if} (\hyperlink{tiletext_8c_ac98705c791dbc9a1ce4ed91dbf5ae5bf}{ColorMap}[\hyperlink{tile_8h_a0704a976b5a1827d9a560581409000a0}{CM\_RED}][k] == pixels[j][i].r &&
199                     \hyperlink{tiletext_8c_ac98705c791dbc9a1ce4ed91dbf5ae5bf}{ColorMap}[\hyperlink{tile_8h_aae81d11012fc6e1d32b3adda0d8b9ba9}{CM\_GREEN}][k] == pixels[j][i].g &&
200                     \hyperlink{tiletext_8c_ac98705c791dbc9a1ce4ed91dbf5ae5bf}{ColorMap}[\hyperlink{tile_8h_a28a45eb8e065997866d101928d36d1bc}{CM\_BLUE}][k] == pixels[j][i].b)
201                     \textcolor{keywordflow}{break};
202             \}
203             \textcolor{keywordflow}{if} (k >= num\_colors)
204                 \hyperlink{dgn__main_8c_afdc08699807b888a15fe28a2647ed466}{Fprintf}(stderr, \textcolor{stringliteral}{"color not in colormap!\(\backslash\)n"});
205             (void) fputc(\hyperlink{tiletext_8c_ad6f4abfbfd788414871238864167a50e}{charcolors}[k], txtfile);
206         \}
207         \hyperlink{dgn__main_8c_afdc08699807b888a15fe28a2647ed466}{Fprintf}(txtfile, \textcolor{stringliteral}{"\(\backslash\)n"});
208     \}
209     \hyperlink{dgn__main_8c_afdc08699807b888a15fe28a2647ed466}{Fprintf}(txtfile, \textcolor{stringliteral}{"\}\(\backslash\)n"});
210 \}
\end{DoxyCode}


\subsection{Variable Documentation}
\hypertarget{tiletext_8c_ad6f4abfbfd788414871238864167a50e}{\index{tiletext.\+c@{tiletext.\+c}!charcolors@{charcolors}}
\index{charcolors@{charcolors}!tiletext.\+c@{tiletext.\+c}}
\subsubsection[{charcolors}]{\setlength{\rightskip}{0pt plus 5cm}char charcolors\mbox{[}{\bf M\+A\+X\+C\+O\+L\+O\+R\+M\+A\+P\+S\+I\+Z\+E}\mbox{]}\hspace{0.3cm}{\ttfamily [static]}}}\label{tiletext_8c_ad6f4abfbfd788414871238864167a50e}


Definition at line 14 of file tiletext.\+c.



Referenced by write\+\_\+text\+\_\+colormap(), and write\+\_\+txttile().

\hypertarget{tiletext_8c_ab4cc0e0b57e1c74c77467ab8ab596e3e}{\index{tiletext.\+c@{tiletext.\+c}!color\+\_\+index@{color\+\_\+index}}
\index{color\+\_\+index@{color\+\_\+index}!tiletext.\+c@{tiletext.\+c}}
\subsubsection[{color\+\_\+index}]{\setlength{\rightskip}{0pt plus 5cm}short color\+\_\+index\mbox{[}{\bf M\+A\+X\+C\+O\+L\+O\+R\+M\+A\+P\+S\+I\+Z\+E}\mbox{]}\hspace{0.3cm}{\ttfamily [static]}}}\label{tiletext_8c_ab4cc0e0b57e1c74c77467ab8ab596e3e}


Definition at line 12 of file tiletext.\+c.



Referenced by read\+\_\+text\+\_\+colormap(), and read\+\_\+txttile().

\hypertarget{tiletext_8c_ac98705c791dbc9a1ce4ed91dbf5ae5bf}{\index{tiletext.\+c@{tiletext.\+c}!Color\+Map@{Color\+Map}}
\index{Color\+Map@{Color\+Map}!tiletext.\+c@{tiletext.\+c}}
\subsubsection[{Color\+Map}]{\setlength{\rightskip}{0pt plus 5cm}{\bf pixval} Color\+Map\mbox{[}3\mbox{]}\mbox{[}{\bf M\+A\+X\+C\+O\+L\+O\+R\+M\+A\+P\+S\+I\+Z\+E}\mbox{]}}}\label{tiletext_8c_ac98705c791dbc9a1ce4ed91dbf5ae5bf}


Definition at line 7 of file tiletext.\+c.



Referenced by Best\+Match(), build\+\_\+bmptile(), build\+\_\+tibtile(), build\+\_\+ximgtile(), findcolor(), get\+\_\+color(), init\+\_\+colormap(), main(), merge\+\_\+colormap(), merge\+\_\+text\+\_\+colormap(), pix\+\_\+to\+\_\+colormap(), read\+\_\+gif\+\_\+tile(), read\+\_\+text\+\_\+colormap(), read\+\_\+txttile(), Read\+Color\+Map(), Read\+Interleaved\+Image(), Read\+Tile\+Strip(), and write\+\_\+txttile().

\hypertarget{tiletext_8c_ab105f0242e3bd09f3d953cd20700645a}{\index{tiletext.\+c@{tiletext.\+c}!colorsinmainmap@{colorsinmainmap}}
\index{colorsinmainmap@{colorsinmainmap}!tiletext.\+c@{tiletext.\+c}}
\subsubsection[{colorsinmainmap}]{\setlength{\rightskip}{0pt plus 5cm}int colorsinmainmap}}\label{tiletext_8c_ab105f0242e3bd09f3d953cd20700645a}


Definition at line 10 of file tiletext.\+c.



Referenced by fopen\+\_\+ppm\+\_\+file(), fopen\+\_\+text\+\_\+file(), init\+\_\+colormap(), merge\+\_\+colormap(), and write\+\_\+text\+\_\+colormap().

\hypertarget{tiletext_8c_aff516215666b583bb7940b37a907fb6d}{\index{tiletext.\+c@{tiletext.\+c}!colorsinmap@{colorsinmap}}
\index{colorsinmap@{colorsinmap}!tiletext.\+c@{tiletext.\+c}}
\subsubsection[{colorsinmap}]{\setlength{\rightskip}{0pt plus 5cm}int colorsinmap}}\label{tiletext_8c_aff516215666b583bb7940b37a907fb6d}


Definition at line 8 of file tiletext.\+c.



Referenced by init\+\_\+colormap(), main(), merge\+\_\+colormap(), merge\+\_\+text\+\_\+colormap(), read\+\_\+text\+\_\+colormap(), and Read\+Color\+Map().

\hypertarget{tiletext_8c_a25a1fd9c3ee244370c7fb669509c889e}{\index{tiletext.\+c@{tiletext.\+c}!Main\+Color\+Map@{Main\+Color\+Map}}
\index{Main\+Color\+Map@{Main\+Color\+Map}!tiletext.\+c@{tiletext.\+c}}
\subsubsection[{Main\+Color\+Map}]{\setlength{\rightskip}{0pt plus 5cm}{\bf pixval} Main\+Color\+Map\mbox{[}3\mbox{]}\mbox{[}{\bf M\+A\+X\+C\+O\+L\+O\+R\+M\+A\+P\+S\+I\+Z\+E}\mbox{]}}}\label{tiletext_8c_a25a1fd9c3ee244370c7fb669509c889e}


Definition at line 9 of file tiletext.\+c.



Referenced by fclose\+\_\+ppm\+\_\+file(), init\+\_\+colormap(), merge\+\_\+colormap(), and write\+\_\+text\+\_\+colormap().

\hypertarget{tiletext_8c_a5dd47736942141b628a52481f0f37ab4}{\index{tiletext.\+c@{tiletext.\+c}!num\+\_\+colors@{num\+\_\+colors}}
\index{num\+\_\+colors@{num\+\_\+colors}!tiletext.\+c@{tiletext.\+c}}
\subsubsection[{num\+\_\+colors}]{\setlength{\rightskip}{0pt plus 5cm}int num\+\_\+colors\hspace{0.3cm}{\ttfamily [static]}}}\label{tiletext_8c_a5dd47736942141b628a52481f0f37ab4}


Definition at line 13 of file tiletext.\+c.



Referenced by read\+\_\+text\+\_\+colormap(), write\+\_\+text\+\_\+colormap(), and write\+\_\+txttile().

\hypertarget{tiletext_8c_af4237a65bc71d23957fa13a85dd329f8}{\index{tiletext.\+c@{tiletext.\+c}!placeholder@{placeholder}}
\index{placeholder@{placeholder}!tiletext.\+c@{tiletext.\+c}}
\subsubsection[{placeholder}]{\setlength{\rightskip}{0pt plus 5cm}{\bf pixel} placeholder\mbox{[}{\bf T\+I\+L\+E\+\_\+\+Y}\mbox{]}\mbox{[}{\bf T\+I\+L\+E\+\_\+\+X}\mbox{]}\hspace{0.3cm}{\ttfamily [static]}}}\label{tiletext_8c_af4237a65bc71d23957fa13a85dd329f8}


Definition at line 17 of file tiletext.\+c.



Referenced by fopen\+\_\+text\+\_\+file().

\hypertarget{tiletext_8c_a886411e3d0da13b7d86644f059fdb47c}{\index{tiletext.\+c@{tiletext.\+c}!placeholder\+\_\+init@{placeholder\+\_\+init}}
\index{placeholder\+\_\+init@{placeholder\+\_\+init}!tiletext.\+c@{tiletext.\+c}}
\subsubsection[{placeholder\+\_\+init}]{\setlength{\rightskip}{0pt plus 5cm}int placeholder\+\_\+init = 0\hspace{0.3cm}{\ttfamily [static]}}}\label{tiletext_8c_a886411e3d0da13b7d86644f059fdb47c}


Definition at line 16 of file tiletext.\+c.



Referenced by fopen\+\_\+text\+\_\+file().

\hypertarget{tiletext_8c_af03bdd9338949becb59305ea9b6e8fde}{\index{tiletext.\+c@{tiletext.\+c}!text\+\_\+sets@{text\+\_\+sets}}
\index{text\+\_\+sets@{text\+\_\+sets}!tiletext.\+c@{tiletext.\+c}}
\subsubsection[{text\+\_\+sets}]{\setlength{\rightskip}{0pt plus 5cm}{\bf const} char$\ast$ text\+\_\+sets\mbox{[}$\,$\mbox{]} = \{ \char`\"{}monsters.\+txt\char`\"{}, \char`\"{}objects.\+txt\char`\"{}, \char`\"{}other.\+txt\char`\"{} \}\hspace{0.3cm}{\ttfamily [static]}}}\label{tiletext_8c_af03bdd9338949becb59305ea9b6e8fde}


Definition at line 23 of file tiletext.\+c.



Referenced by fopen\+\_\+text\+\_\+file(), and read\+\_\+txttile().

\hypertarget{tiletext_8c_a77e0eb3cef80617761a35b843368e1fe}{\index{tiletext.\+c@{tiletext.\+c}!tile\+\_\+file@{tile\+\_\+file}}
\index{tile\+\_\+file@{tile\+\_\+file}!tiletext.\+c@{tiletext.\+c}}
\subsubsection[{tile\+\_\+file}]{\setlength{\rightskip}{0pt plus 5cm}F\+I\+L\+E$\ast$ tile\+\_\+file\hspace{0.3cm}{\ttfamily [static]}}}\label{tiletext_8c_a77e0eb3cef80617761a35b843368e1fe}


Definition at line 18 of file tiletext.\+c.



Referenced by fclose\+\_\+text\+\_\+file(), fopen\+\_\+text\+\_\+file(), read\+\_\+text\+\_\+tile(), and write\+\_\+text\+\_\+tile().

\hypertarget{tiletext_8c_a42501c03e6e9f74ffad73a9a903316eb}{\index{tiletext.\+c@{tiletext.\+c}!tile\+\_\+set@{tile\+\_\+set}}
\index{tile\+\_\+set@{tile\+\_\+set}!tiletext.\+c@{tiletext.\+c}}
\subsubsection[{tile\+\_\+set}]{\setlength{\rightskip}{0pt plus 5cm}int tile\+\_\+set\hspace{0.3cm}{\ttfamily [static]}}}\label{tiletext_8c_a42501c03e6e9f74ffad73a9a903316eb}


Definition at line 19 of file tiletext.\+c.



Referenced by fopen\+\_\+text\+\_\+file(), read\+\_\+txttile(), and write\+\_\+txttile().

\hypertarget{tiletext_8c_a6c4fd49f1ac99f5157590bbea3af4221}{\index{tiletext.\+c@{tiletext.\+c}!tile\+\_\+set\+\_\+indx@{tile\+\_\+set\+\_\+indx}}
\index{tile\+\_\+set\+\_\+indx@{tile\+\_\+set\+\_\+indx}!tiletext.\+c@{tiletext.\+c}}
\subsubsection[{tile\+\_\+set\+\_\+indx}]{\setlength{\rightskip}{0pt plus 5cm}int tile\+\_\+set\+\_\+indx\hspace{0.3cm}{\ttfamily [static]}}}\label{tiletext_8c_a6c4fd49f1ac99f5157590bbea3af4221}


Definition at line 19 of file tiletext.\+c.



Referenced by fopen\+\_\+text\+\_\+file(), read\+\_\+txttile(), and write\+\_\+txttile().

