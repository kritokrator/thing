\hypertarget{mapglyph_8c}{\section{nethack/src/mapglyph.c File Reference}
\label{mapglyph_8c}\index{nethack/src/mapglyph.\+c@{nethack/src/mapglyph.\+c}}
}
{\ttfamily \#include \char`\"{}hack.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}color.\+h\char`\"{}}\\*
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{mapglyph_8c_a88092bbea2ee7927e544556be2c7e641}{H\+I\+\_\+\+D\+O\+M\+E\+S\+T\+I\+C}~\hyperlink{color_8h_a200fd50f64e8a7777954547ef30798a1}{C\+L\+R\+\_\+\+W\+H\+I\+T\+E}	/$\ast$ monst.\+c $\ast$/
\item 
\#define \hyperlink{mapglyph_8c_a2f630e112d734334a67238e7f6e72c8c}{has\+\_\+color}(n)~\hyperlink{xpm2img_8c_aa8cecfc5c5c054d2875c03e77b7be15d}{T\+R\+U\+E}
\item 
\#define \hyperlink{mapglyph_8c_a21594d0d7a347c8a66fb45ddd84260ee}{zap\+\_\+color}(n)
\item 
\#define \hyperlink{mapglyph_8c_a7af6c3375df7db9c0a656e950e173112}{cmap\+\_\+color}(n)
\item 
\#define \hyperlink{mapglyph_8c_a416b5979efb02c985539d51e0a9d620e}{obj\+\_\+color}(n)
\item 
\#define \hyperlink{mapglyph_8c_a440d023c793bae7397f872d8f79803f0}{mon\+\_\+color}(n)
\item 
\#define \hyperlink{mapglyph_8c_a57c293ee662b661559378dc803c4fde5}{invis\+\_\+color}(n)
\item 
\#define \hyperlink{mapglyph_8c_abfd7f07931aaf9517da205d2831b1eb6}{pet\+\_\+color}(c)
\item 
\#define \hyperlink{mapglyph_8c_ac15819cdfa7286740579947df801fbff}{warn\+\_\+color}(n)
\item 
\#define \hyperlink{mapglyph_8c_a542617eea886b0426ac6765884d8685d}{explode\+\_\+color}(n)
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{mapglyph_8c_a41586afa30d047782223d168f8912784}{mapglyph} (int glyph, int $\ast$ochar, int $\ast$ocolor, unsigned $\ast$ospecial, int x, int y)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{mapglyph_8c_a4e43c1e3d9bdf5d278bf6ed4d11124c7}{explcolors} \mbox{[}$\,$\mbox{]}
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\hypertarget{mapglyph_8c_a7af6c3375df7db9c0a656e950e173112}{\index{mapglyph.\+c@{mapglyph.\+c}!cmap\+\_\+color@{cmap\+\_\+color}}
\index{cmap\+\_\+color@{cmap\+\_\+color}!mapglyph.\+c@{mapglyph.\+c}}
\subsubsection[{cmap\+\_\+color}]{\setlength{\rightskip}{0pt plus 5cm}\#define cmap\+\_\+color(
\begin{DoxyParamCaption}
\item[{}]{n}
\end{DoxyParamCaption}
)}}\label{mapglyph_8c_a7af6c3375df7db9c0a656e950e173112}


Definition at line 42 of file mapglyph.\+c.



Referenced by mapglyph().

\hypertarget{mapglyph_8c_a542617eea886b0426ac6765884d8685d}{\index{mapglyph.\+c@{mapglyph.\+c}!explode\+\_\+color@{explode\+\_\+color}}
\index{explode\+\_\+color@{explode\+\_\+color}!mapglyph.\+c@{mapglyph.\+c}}
\subsubsection[{explode\+\_\+color}]{\setlength{\rightskip}{0pt plus 5cm}\#define explode\+\_\+color(
\begin{DoxyParamCaption}
\item[{}]{n}
\end{DoxyParamCaption}
)}}\label{mapglyph_8c_a542617eea886b0426ac6765884d8685d}


Definition at line 48 of file mapglyph.\+c.



Referenced by mapglyph().

\hypertarget{mapglyph_8c_a2f630e112d734334a67238e7f6e72c8c}{\index{mapglyph.\+c@{mapglyph.\+c}!has\+\_\+color@{has\+\_\+color}}
\index{has\+\_\+color@{has\+\_\+color}!mapglyph.\+c@{mapglyph.\+c}}
\subsubsection[{has\+\_\+color}]{\setlength{\rightskip}{0pt plus 5cm}\#define has\+\_\+color(
\begin{DoxyParamCaption}
\item[{}]{n}
\end{DoxyParamCaption}
)~{\bf T\+R\+U\+E}}}\label{mapglyph_8c_a2f630e112d734334a67238e7f6e72c8c}


Definition at line 23 of file mapglyph.\+c.



Referenced by mapglyph().

\hypertarget{mapglyph_8c_a88092bbea2ee7927e544556be2c7e641}{\index{mapglyph.\+c@{mapglyph.\+c}!H\+I\+\_\+\+D\+O\+M\+E\+S\+T\+I\+C@{H\+I\+\_\+\+D\+O\+M\+E\+S\+T\+I\+C}}
\index{H\+I\+\_\+\+D\+O\+M\+E\+S\+T\+I\+C@{H\+I\+\_\+\+D\+O\+M\+E\+S\+T\+I\+C}!mapglyph.\+c@{mapglyph.\+c}}
\subsubsection[{H\+I\+\_\+\+D\+O\+M\+E\+S\+T\+I\+C}]{\setlength{\rightskip}{0pt plus 5cm}\#define H\+I\+\_\+\+D\+O\+M\+E\+S\+T\+I\+C~{\bf C\+L\+R\+\_\+\+W\+H\+I\+T\+E}	/$\ast$ monst.\+c $\ast$/}}\label{mapglyph_8c_a88092bbea2ee7927e544556be2c7e641}


Definition at line 10 of file mapglyph.\+c.



Referenced by mapglyph().

\hypertarget{mapglyph_8c_a57c293ee662b661559378dc803c4fde5}{\index{mapglyph.\+c@{mapglyph.\+c}!invis\+\_\+color@{invis\+\_\+color}}
\index{invis\+\_\+color@{invis\+\_\+color}!mapglyph.\+c@{mapglyph.\+c}}
\subsubsection[{invis\+\_\+color}]{\setlength{\rightskip}{0pt plus 5cm}\#define invis\+\_\+color(
\begin{DoxyParamCaption}
\item[{}]{n}
\end{DoxyParamCaption}
)}}\label{mapglyph_8c_a57c293ee662b661559378dc803c4fde5}


Definition at line 45 of file mapglyph.\+c.



Referenced by mapglyph().

\hypertarget{mapglyph_8c_a440d023c793bae7397f872d8f79803f0}{\index{mapglyph.\+c@{mapglyph.\+c}!mon\+\_\+color@{mon\+\_\+color}}
\index{mon\+\_\+color@{mon\+\_\+color}!mapglyph.\+c@{mapglyph.\+c}}
\subsubsection[{mon\+\_\+color}]{\setlength{\rightskip}{0pt plus 5cm}\#define mon\+\_\+color(
\begin{DoxyParamCaption}
\item[{}]{n}
\end{DoxyParamCaption}
)}}\label{mapglyph_8c_a440d023c793bae7397f872d8f79803f0}


Definition at line 44 of file mapglyph.\+c.



Referenced by mapglyph().

\hypertarget{mapglyph_8c_a416b5979efb02c985539d51e0a9d620e}{\index{mapglyph.\+c@{mapglyph.\+c}!obj\+\_\+color@{obj\+\_\+color}}
\index{obj\+\_\+color@{obj\+\_\+color}!mapglyph.\+c@{mapglyph.\+c}}
\subsubsection[{obj\+\_\+color}]{\setlength{\rightskip}{0pt plus 5cm}\#define obj\+\_\+color(
\begin{DoxyParamCaption}
\item[{}]{n}
\end{DoxyParamCaption}
)}}\label{mapglyph_8c_a416b5979efb02c985539d51e0a9d620e}


Definition at line 43 of file mapglyph.\+c.



Referenced by mapglyph().

\hypertarget{mapglyph_8c_abfd7f07931aaf9517da205d2831b1eb6}{\index{mapglyph.\+c@{mapglyph.\+c}!pet\+\_\+color@{pet\+\_\+color}}
\index{pet\+\_\+color@{pet\+\_\+color}!mapglyph.\+c@{mapglyph.\+c}}
\subsubsection[{pet\+\_\+color}]{\setlength{\rightskip}{0pt plus 5cm}\#define pet\+\_\+color(
\begin{DoxyParamCaption}
\item[{}]{c}
\end{DoxyParamCaption}
)}}\label{mapglyph_8c_abfd7f07931aaf9517da205d2831b1eb6}


Definition at line 46 of file mapglyph.\+c.



Referenced by mapglyph().

\hypertarget{mapglyph_8c_ac15819cdfa7286740579947df801fbff}{\index{mapglyph.\+c@{mapglyph.\+c}!warn\+\_\+color@{warn\+\_\+color}}
\index{warn\+\_\+color@{warn\+\_\+color}!mapglyph.\+c@{mapglyph.\+c}}
\subsubsection[{warn\+\_\+color}]{\setlength{\rightskip}{0pt plus 5cm}\#define warn\+\_\+color(
\begin{DoxyParamCaption}
\item[{}]{n}
\end{DoxyParamCaption}
)}}\label{mapglyph_8c_ac15819cdfa7286740579947df801fbff}


Definition at line 47 of file mapglyph.\+c.



Referenced by mapglyph().

\hypertarget{mapglyph_8c_a21594d0d7a347c8a66fb45ddd84260ee}{\index{mapglyph.\+c@{mapglyph.\+c}!zap\+\_\+color@{zap\+\_\+color}}
\index{zap\+\_\+color@{zap\+\_\+color}!mapglyph.\+c@{mapglyph.\+c}}
\subsubsection[{zap\+\_\+color}]{\setlength{\rightskip}{0pt plus 5cm}\#define zap\+\_\+color(
\begin{DoxyParamCaption}
\item[{}]{n}
\end{DoxyParamCaption}
)}}\label{mapglyph_8c_a21594d0d7a347c8a66fb45ddd84260ee}


Definition at line 41 of file mapglyph.\+c.



Referenced by mapglyph().



\subsection{Function Documentation}
\hypertarget{mapglyph_8c_a41586afa30d047782223d168f8912784}{\index{mapglyph.\+c@{mapglyph.\+c}!mapglyph@{mapglyph}}
\index{mapglyph@{mapglyph}!mapglyph.\+c@{mapglyph.\+c}}
\subsubsection[{mapglyph}]{\setlength{\rightskip}{0pt plus 5cm}void mapglyph (
\begin{DoxyParamCaption}
\item[{int}]{glyph, }
\item[{int $\ast$}]{ochar, }
\item[{int $\ast$}]{ocolor, }
\item[{unsigned $\ast$}]{ospecial, }
\item[{int}]{x, }
\item[{int}]{y}
\end{DoxyParamCaption}
)}}\label{mapglyph_8c_a41586afa30d047782223d168f8912784}


Definition at line 62 of file mapglyph.\+c.



References instance\+\_\+flags\+::bouldersym, C\+L\+R\+\_\+\+B\+R\+I\+G\+H\+T\+\_\+\+B\+L\+U\+E, C\+L\+R\+\_\+\+B\+R\+O\+W\+N, C\+L\+R\+\_\+\+G\+R\+A\+Y, C\+L\+R\+\_\+\+G\+R\+E\+E\+N, C\+L\+R\+\_\+\+M\+A\+G\+E\+N\+T\+A, C\+L\+R\+\_\+\+R\+E\+D, C\+L\+R\+\_\+\+W\+H\+I\+T\+E, C\+L\+R\+\_\+\+Y\+E\+L\+L\+O\+W, cmap\+\_\+color, C\+O\+I\+N\+\_\+\+C\+L\+A\+S\+S, D\+E\+F\+\_\+\+I\+N\+V\+I\+S\+I\+B\+L\+E, explode\+\_\+color, F\+O\+O\+D\+\_\+\+C\+L\+A\+S\+S, G\+L\+Y\+P\+H\+\_\+\+B\+O\+D\+Y\+\_\+\+O\+F\+F, G\+L\+Y\+P\+H\+\_\+\+C\+M\+A\+P\+\_\+\+O\+F\+F, G\+L\+Y\+P\+H\+\_\+\+D\+E\+T\+E\+C\+T\+\_\+\+O\+F\+F, G\+L\+Y\+P\+H\+\_\+\+E\+X\+P\+L\+O\+D\+E\+\_\+\+O\+F\+F, G\+L\+Y\+P\+H\+\_\+\+I\+N\+V\+I\+S\+\_\+\+O\+F\+F, G\+L\+Y\+P\+H\+\_\+\+O\+B\+J\+\_\+\+O\+F\+F, G\+L\+Y\+P\+H\+\_\+\+P\+E\+T\+\_\+\+O\+F\+F, G\+L\+Y\+P\+H\+\_\+\+R\+I\+D\+D\+E\+N\+\_\+\+O\+F\+F, G\+L\+Y\+P\+H\+\_\+\+S\+W\+A\+L\+L\+O\+W\+\_\+\+O\+F\+F, G\+L\+Y\+P\+H\+\_\+\+W\+A\+R\+N\+I\+N\+G\+\_\+\+O\+F\+F, G\+L\+Y\+P\+H\+\_\+\+Z\+A\+P\+\_\+\+O\+F\+F, has\+\_\+color, H\+I\+\_\+\+D\+O\+M\+E\+S\+T\+I\+C, iflags, invis\+\_\+color, Is\+\_\+rogue\+\_\+level, M\+A\+X\+E\+X\+P\+C\+H\+A\+R\+S, M\+G\+\_\+\+C\+O\+R\+P\+S\+E, M\+G\+\_\+\+D\+E\+T\+E\+C\+T, M\+G\+\_\+\+I\+N\+V\+I\+S, M\+G\+\_\+\+P\+E\+T, M\+G\+\_\+\+R\+I\+D\+D\+E\+N, mon\+\_\+color, mons, monsyms, N\+O\+\_\+\+C\+O\+L\+O\+R, obj\+\_\+color, objects, oc\+\_\+syms, offset, pet\+\_\+color, S\+\_\+arrow\+\_\+trap, S\+\_\+corr, S\+\_\+explode1, S\+\_\+hcdoor, S\+\_\+litcorr, S\+\_\+polymorph\+\_\+trap, S\+\_\+room, S\+\_\+sw\+\_\+tl, S\+\_\+vbeam, S\+\_\+vwall, S\+\_\+water, instance\+\_\+flags\+::showrace, showsyms, u, Upolyd, you\+::ux, you\+::uy, you\+::uz, warn\+\_\+color, warnsyms, and zap\+\_\+color.



Referenced by amii\+\_\+print\+\_\+glyph(), on\+Paint(), and X11\+\_\+print\+\_\+glyph().


\begin{DoxyCode}
66 \{
67     \textcolor{keyword}{register} \textcolor{keywordtype}{int} \hyperlink{Window_8c_a6313d4fad4381a8c1cd37bac963cec12}{offset};
68 \textcolor{preprocessor}{#if defined(TEXTCOLOR) || defined(ROGUE\_COLOR)}
69     \textcolor{keywordtype}{int} color = \hyperlink{color_8h_a69d859e537f858ca285d77a66755ded6}{NO\_COLOR};
70 \textcolor{preprocessor}{#endif}
71     \hyperlink{config_8h_a65f85814a8290f9797005d3b28e7e5fc}{uchar} ch;
72     \textcolor{keywordtype}{unsigned} special = 0;
73 
74     \textcolor{comment}{/*}
75 \textcolor{comment}{     *  Map the glyph back to a character and color.}
76 \textcolor{comment}{     *}
77 \textcolor{comment}{     *  Warning:  For speed, this makes an assumption on the order of}
78 \textcolor{comment}{     *        offsets.  The order is set in display.h.}
79 \textcolor{comment}{     */}
80     \textcolor{keywordflow}{if} ((offset = (glyph - \hyperlink{display_8h_a576bb53ad5713142683ac37a22ae0f94}{GLYPH\_WARNING\_OFF})) >= 0) \{ \textcolor{comment}{/* a warning flash */}
81         ch = \hyperlink{decl_8h_a4724feb39c4f688d499f9db8c3c21adc}{warnsyms}[\hyperlink{Window_8c_a6313d4fad4381a8c1cd37bac963cec12}{offset}];
82 \textcolor{preprocessor}{# ifdef ROGUE\_COLOR}
83     \textcolor{keywordflow}{if} (HAS\_ROGUE\_IBM\_GRAPHICS)
84         color = \hyperlink{color_8h_a69d859e537f858ca285d77a66755ded6}{NO\_COLOR};
85     \textcolor{keywordflow}{else}
86 \textcolor{preprocessor}{# endif}
87         \hyperlink{mapglyph_8c_ac15819cdfa7286740579947df801fbff}{warn\_color}(offset);
88     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((offset = (glyph - \hyperlink{display_8h_a12c3dedb11601c5df592451fca014723}{GLYPH\_SWALLOW\_OFF})) >= 0) \{  \textcolor{comment}{/* swallow */}
89     \textcolor{comment}{/* see swallow\_to\_glyph() in display.c */}
90     ch = (\hyperlink{config_8h_a65f85814a8290f9797005d3b28e7e5fc}{uchar}) \hyperlink{rm_8h_ad8e71cd12d6e4d48b240325f0a5f9758}{showsyms}[\hyperlink{rm_8h_a7f752e26209b6ce4093e0602a91bc8c5}{S\_sw\_tl} + (offset & 0x7)];
91 \textcolor{preprocessor}{#ifdef ROGUE\_COLOR}
92     \textcolor{keywordflow}{if} (HAS\_ROGUE\_IBM\_GRAPHICS && \hyperlink{flag_8h_ae9cd54937dcb00432131e49e5e324075}{iflags}.use\_color)
93         color = \hyperlink{color_8h_a69d859e537f858ca285d77a66755ded6}{NO\_COLOR};
94     \textcolor{keywordflow}{else}
95 \textcolor{preprocessor}{#endif}
96         \hyperlink{mapglyph_8c_a440d023c793bae7397f872d8f79803f0}{mon\_color}(offset >> 3);
97     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((offset = (glyph - \hyperlink{display_8h_a51ca2fc1986619ae2d009cfdc555a7e4}{GLYPH\_ZAP\_OFF})) >= 0) \{  \textcolor{comment}{/* zap beam */}
98     \textcolor{comment}{/* see zapdir\_to\_glyph() in display.c */}
99     ch = \hyperlink{rm_8h_ad8e71cd12d6e4d48b240325f0a5f9758}{showsyms}[\hyperlink{rm_8h_a9a6a555a394bf6a8896eb455f38bdf77}{S\_vbeam} + (offset & 0x3)];
100 \textcolor{preprocessor}{#ifdef ROGUE\_COLOR}
101     \textcolor{keywordflow}{if} (HAS\_ROGUE\_IBM\_GRAPHICS && \hyperlink{flag_8h_ae9cd54937dcb00432131e49e5e324075}{iflags}.use\_color)
102         color = \hyperlink{color_8h_a69d859e537f858ca285d77a66755ded6}{NO\_COLOR};
103     \textcolor{keywordflow}{else}
104 \textcolor{preprocessor}{#endif}
105         \hyperlink{mapglyph_8c_a21594d0d7a347c8a66fb45ddd84260ee}{zap\_color}((offset >> 2));
106     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((offset = (glyph - \hyperlink{display_8h_a117d3d8a6719732c252bac7f968a8028}{GLYPH\_EXPLODE\_OFF})) >= 0) \{  \textcolor{comment}{/* explosion */}
107     ch = \hyperlink{rm_8h_ad8e71cd12d6e4d48b240325f0a5f9758}{showsyms}[(offset % \hyperlink{rm_8h_a4e1804efd3f2af28c5ace4afca6d9011}{MAXEXPCHARS}) + \hyperlink{rm_8h_a0a65d30eb88de4be481544d3a0629250}{S\_explode1}];
108     \hyperlink{mapglyph_8c_a542617eea886b0426ac6765884d8685d}{explode\_color}(offset / \hyperlink{rm_8h_a4e1804efd3f2af28c5ace4afca6d9011}{MAXEXPCHARS});
109     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((offset = (glyph - \hyperlink{display_8h_a80bd11da4029e7e4a70a1eb525121458}{GLYPH\_CMAP\_OFF})) >= 0) \{    \textcolor{comment}{/* cmap */}
110     ch = \hyperlink{rm_8h_ad8e71cd12d6e4d48b240325f0a5f9758}{showsyms}[\hyperlink{Window_8c_a6313d4fad4381a8c1cd37bac963cec12}{offset}];
111 \textcolor{preprocessor}{#ifdef ROGUE\_COLOR}
112     \textcolor{keywordflow}{if} (HAS\_ROGUE\_IBM\_GRAPHICS && \hyperlink{flag_8h_ae9cd54937dcb00432131e49e5e324075}{iflags}.use\_color) \{
113         \textcolor{keywordflow}{if} (offset >= \hyperlink{rm_8h_a635ec6ccc74b900ac3150afe85bdfdf0}{S\_vwall} && offset <= \hyperlink{rm_8h_aa2fb4b079e394b211180b9a57cff39ac}{S\_hcdoor})
114         color = \hyperlink{color_8h_ae6183033e0a87a0dc8f345aad0ceb94f}{CLR\_BROWN};
115         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (offset >= \hyperlink{rm_8h_a40949ea08727cb0154cc945e53ebb174}{S\_arrow\_trap} && offset <= 
      \hyperlink{rm_8h_a3daac7b07d9710bad9fe903e937a00b2}{S\_polymorph\_trap})
116         color = \hyperlink{color_8h_ab6d8d8f1ba06b04bc27ec83e59fad1eb}{CLR\_MAGENTA};
117         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (offset == \hyperlink{rm_8h_a3d0d27bd7691a72bc0b278df4d82ca02}{S\_corr} || offset == \hyperlink{rm_8h_a399754b07fa79009fd0354abaf190e89}{S\_litcorr})
118         color = \hyperlink{color_8h_ae6bc9ef7ab884321d5aed99e40b8bfbf}{CLR\_GRAY};
119         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (offset >= \hyperlink{rm_8h_a1cbe62db5502d1ece3d5cce996ff8164}{S\_room} && offset <= \hyperlink{rm_8h_ac0869946494dcbd6263431120d15c0df}{S\_water})
120         color = \hyperlink{color_8h_a0c8c42824dd44b52d4289558804a128a}{CLR\_GREEN};
121         \textcolor{keywordflow}{else}
122         color = \hyperlink{color_8h_a69d859e537f858ca285d77a66755ded6}{NO\_COLOR};
123     \} \textcolor{keywordflow}{else}
124 \textcolor{preprocessor}{#endif}
125 \textcolor{preprocessor}{#ifdef TEXTCOLOR}
126         \textcolor{comment}{/* provide a visible difference if normal and lit corridor}
127 \textcolor{comment}{         * use the same symbol */}
128         \textcolor{keywordflow}{if} (\hyperlink{flag_8h_ae9cd54937dcb00432131e49e5e324075}{iflags}.use\_color &&
129         offset == \hyperlink{rm_8h_a399754b07fa79009fd0354abaf190e89}{S\_litcorr} && ch == \hyperlink{rm_8h_ad8e71cd12d6e4d48b240325f0a5f9758}{showsyms}[\hyperlink{rm_8h_a3d0d27bd7691a72bc0b278df4d82ca02}{S\_corr}])
130         color = \hyperlink{color_8h_a200fd50f64e8a7777954547ef30798a1}{CLR\_WHITE};
131         \textcolor{keywordflow}{else}
132 \textcolor{preprocessor}{#endif}
133         \hyperlink{mapglyph_8c_a7af6c3375df7db9c0a656e950e173112}{cmap\_color}(offset);
134     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((offset = (glyph - \hyperlink{display_8h_afdd6729aca80c4ecb3cc89f77e70968c}{GLYPH\_OBJ\_OFF})) >= 0) \{  \textcolor{comment}{/* object */}
135     \textcolor{keywordflow}{if} (offset == BOULDER && \hyperlink{flag_8h_ae9cd54937dcb00432131e49e5e324075}{iflags}.\hyperlink{structinstance__flags_a13b4941aee2fefcb8d1d6a24b77396a3}{bouldersym}) ch = \hyperlink{flag_8h_ae9cd54937dcb00432131e49e5e324075}{iflags}.
      \hyperlink{structinstance__flags_a13b4941aee2fefcb8d1d6a24b77396a3}{bouldersym};
136     \textcolor{keywordflow}{else} ch = \hyperlink{decl_8h_a56fccf5eb894981c31e2e5e3a99abf12}{oc\_syms}[(int)\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[offset].oc\_class];
137 \textcolor{preprocessor}{#ifdef ROGUE\_COLOR}
138     \textcolor{keywordflow}{if} (HAS\_ROGUE\_IBM\_GRAPHICS && \hyperlink{flag_8h_ae9cd54937dcb00432131e49e5e324075}{iflags}.use\_color) \{
139         \textcolor{keywordflow}{switch}(\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[offset].oc\_class) \{
140         \textcolor{keywordflow}{case} \hyperlink{objclass_8h_a2999621925083659147349e261e4cb3d}{COIN\_CLASS}: color = \hyperlink{color_8h_ae0a5a80f5e963a782350b12e9cfcc9f3}{CLR\_YELLOW}; \textcolor{keywordflow}{break};
141         \textcolor{keywordflow}{case} \hyperlink{objclass_8h_a98c4704dea5f0606fe545294b44f8fd6}{FOOD\_CLASS}: color = \hyperlink{color_8h_a440726f8973da46eba779f170566b4cc}{CLR\_RED}; \textcolor{keywordflow}{break};
142         \textcolor{keywordflow}{default}: color = \hyperlink{color_8h_a5dfd5b39ea9035f71a7054e066c76093}{CLR\_BRIGHT\_BLUE}; \textcolor{keywordflow}{break};
143         \}
144     \} \textcolor{keywordflow}{else}
145 \textcolor{preprocessor}{#endif}
146         \hyperlink{mapglyph_8c_a416b5979efb02c985539d51e0a9d620e}{obj\_color}(offset);
147     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((offset = (glyph - \hyperlink{display_8h_a0b14de6e22bd8913fd0034c34a4a26c2}{GLYPH\_RIDDEN\_OFF})) >= 0) \{    \textcolor{comment}{/* mon ridden */}
148     ch = \hyperlink{decl_8h_a1a4e60e91ff456eebe6d55281f01f852}{monsyms}[(int)\hyperlink{permonst_8h_ab96e7c4682ea5ae4f83339a15c06f676}{mons}[offset].mlet];
149 \textcolor{preprocessor}{#ifdef ROGUE\_COLOR}
150     \textcolor{keywordflow}{if} (HAS\_ROGUE\_IBM\_GRAPHICS)
151         \textcolor{comment}{/* This currently implies that the hero is here -- monsters */}
152         \textcolor{comment}{/* don't ride (yet...).  Should we set it to yellow like in */}
153         \textcolor{comment}{/* the monster case below?  There is no equivalent in rogue. */}
154         color = \hyperlink{color_8h_a69d859e537f858ca285d77a66755ded6}{NO\_COLOR};   \textcolor{comment}{/* no need to check iflags.use\_color */}
155     \textcolor{keywordflow}{else}
156 \textcolor{preprocessor}{#endif}
157         \hyperlink{mapglyph_8c_a440d023c793bae7397f872d8f79803f0}{mon\_color}(offset);
158         special |= \hyperlink{hack_8h_a6151d6d18ff62537dfd2615a3b2761a9}{MG\_RIDDEN};
159     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((offset = (glyph - \hyperlink{display_8h_a5b5531a8309865f07de98109cb3e0307}{GLYPH\_BODY\_OFF})) >= 0) \{    \textcolor{comment}{/* a corpse */}
160     ch = \hyperlink{decl_8h_a56fccf5eb894981c31e2e5e3a99abf12}{oc\_syms}[(int)\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[CORPSE].oc\_class];
161 \textcolor{preprocessor}{#ifdef ROGUE\_COLOR}
162     \textcolor{keywordflow}{if} (HAS\_ROGUE\_IBM\_GRAPHICS && \hyperlink{flag_8h_ae9cd54937dcb00432131e49e5e324075}{iflags}.use\_color)
163         color = \hyperlink{color_8h_a440726f8973da46eba779f170566b4cc}{CLR\_RED};
164     \textcolor{keywordflow}{else}
165 \textcolor{preprocessor}{#endif}
166         \hyperlink{mapglyph_8c_a440d023c793bae7397f872d8f79803f0}{mon\_color}(offset);
167         special |= \hyperlink{hack_8h_a1729412ac5eb71a3b857691b53c40ebc}{MG\_CORPSE};
168     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((offset = (glyph - \hyperlink{display_8h_a592a5d63676e9bd8ad0983cf5145934b}{GLYPH\_DETECT\_OFF})) >= 0) \{    \textcolor{comment}{/* mon detect */}
169     ch = \hyperlink{decl_8h_a1a4e60e91ff456eebe6d55281f01f852}{monsyms}[(int)\hyperlink{permonst_8h_ab96e7c4682ea5ae4f83339a15c06f676}{mons}[offset].mlet];
170 \textcolor{preprocessor}{#ifdef ROGUE\_COLOR}
171     \textcolor{keywordflow}{if} (HAS\_ROGUE\_IBM\_GRAPHICS)
172         color = \hyperlink{color_8h_a69d859e537f858ca285d77a66755ded6}{NO\_COLOR};   \textcolor{comment}{/* no need to check iflags.use\_color */}
173     \textcolor{keywordflow}{else}
174 \textcolor{preprocessor}{#endif}
175         \hyperlink{mapglyph_8c_a440d023c793bae7397f872d8f79803f0}{mon\_color}(offset);
176     \textcolor{comment}{/* Disabled for now; anyone want to get reverse video to work? */}
177     \textcolor{comment}{/* is\_reverse = TRUE; */}
178         special |= \hyperlink{hack_8h_a79a8c30f938b77ed9cc08dcec5c6f08c}{MG\_DETECT};
179     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((offset = (glyph - \hyperlink{display_8h_acee15075719911ed96b44eb1850c1759}{GLYPH\_INVIS\_OFF})) >= 0) \{  \textcolor{comment}{/* invisible */}
180     ch = \hyperlink{monsym_8h_a831daaff23b1904a50f3900da2a7fce5}{DEF\_INVISIBLE};
181 \textcolor{preprocessor}{#ifdef ROGUE\_COLOR}
182     \textcolor{keywordflow}{if} (HAS\_ROGUE\_IBM\_GRAPHICS)
183         color = \hyperlink{color_8h_a69d859e537f858ca285d77a66755ded6}{NO\_COLOR};   \textcolor{comment}{/* no need to check iflags.use\_color */}
184     \textcolor{keywordflow}{else}
185 \textcolor{preprocessor}{#endif}
186         \hyperlink{mapglyph_8c_a57c293ee662b661559378dc803c4fde5}{invis\_color}(offset);
187         special |= \hyperlink{hack_8h_a42bdc3c62728695f1096f15d684afbf2}{MG\_INVIS};
188     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((offset = (glyph - \hyperlink{display_8h_a6419de72cae8e55fc00371ae9a7abec1}{GLYPH\_PET\_OFF})) >= 0) \{  \textcolor{comment}{/* a pet */}
189     ch = \hyperlink{decl_8h_a1a4e60e91ff456eebe6d55281f01f852}{monsyms}[(int)\hyperlink{permonst_8h_ab96e7c4682ea5ae4f83339a15c06f676}{mons}[offset].mlet];
190 \textcolor{preprocessor}{#ifdef ROGUE\_COLOR}
191     \textcolor{keywordflow}{if} (HAS\_ROGUE\_IBM\_GRAPHICS)
192         color = \hyperlink{color_8h_a69d859e537f858ca285d77a66755ded6}{NO\_COLOR};   \textcolor{comment}{/* no need to check iflags.use\_color */}
193     \textcolor{keywordflow}{else}
194 \textcolor{preprocessor}{#endif}
195         \hyperlink{mapglyph_8c_abfd7f07931aaf9517da205d2831b1eb6}{pet\_color}(offset);
196         special |= \hyperlink{hack_8h_a12128ae3dc4b1934065104f4bb945ca5}{MG\_PET};
197     \} \textcolor{keywordflow}{else} \{                            \textcolor{comment}{/* a monster */}
198     ch = \hyperlink{decl_8h_a1a4e60e91ff456eebe6d55281f01f852}{monsyms}[(int)\hyperlink{permonst_8h_ab96e7c4682ea5ae4f83339a15c06f676}{mons}[glyph].mlet];
199 \textcolor{preprocessor}{#ifdef ROGUE\_COLOR}
200     \textcolor{keywordflow}{if} (HAS\_ROGUE\_IBM\_GRAPHICS && \hyperlink{flag_8h_ae9cd54937dcb00432131e49e5e324075}{iflags}.use\_color) \{
201         \textcolor{keywordflow}{if} (\hyperlink{structtrap_aed25254cf556e3eae09dd98576d98d45}{x} == \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux} && \hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y} == \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy})
202         \textcolor{comment}{/* actually player should be yellow-on-gray if in a corridor */}
203         color = \hyperlink{color_8h_ae0a5a80f5e963a782350b12e9cfcc9f3}{CLR\_YELLOW};
204         \textcolor{keywordflow}{else}
205         color = \hyperlink{color_8h_a69d859e537f858ca285d77a66755ded6}{NO\_COLOR};
206     \} \textcolor{keywordflow}{else}
207 \textcolor{preprocessor}{#endif}
208     \{
209         \hyperlink{mapglyph_8c_a440d023c793bae7397f872d8f79803f0}{mon\_color}(glyph);
210         \textcolor{comment}{/* special case the hero for `showrace' option */}
211 \textcolor{preprocessor}{#ifdef TEXTCOLOR}
212         \textcolor{keywordflow}{if} (\hyperlink{flag_8h_ae9cd54937dcb00432131e49e5e324075}{iflags}.use\_color && \hyperlink{structtrap_aed25254cf556e3eae09dd98576d98d45}{x} == \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux} && \hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y} == \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy} &&
213             \hyperlink{flag_8h_ae9cd54937dcb00432131e49e5e324075}{iflags}.\hyperlink{structinstance__flags_ab12d17fe0bcca460f333ef2b29f1d249}{showrace} && !\hyperlink{you_8h_ab869582031082f2c352b374dc0e0c3b3}{Upolyd})
214         color = \hyperlink{mapglyph_8c_a88092bbea2ee7927e544556be2c7e641}{HI\_DOMESTIC};
215 \textcolor{preprocessor}{#endif}
216     \}
217     \}
218 
219 \textcolor{preprocessor}{#ifdef TEXTCOLOR}
220     \textcolor{comment}{/* Turn off color if no color defined, or rogue level w/o PC graphics. */}
221 \textcolor{preprocessor}{# ifdef REINCARNATION}
222 \textcolor{preprocessor}{#  ifdef ASCIIGRAPH}
223     \textcolor{keywordflow}{if} (!\hyperlink{mapglyph_8c_a2f630e112d734334a67238e7f6e72c8c}{has\_color}(color) || (\hyperlink{dungeon_8h_a2732117523c8540638daf4315dda16b9}{Is\_rogue\_level}(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz}) && !HAS\_ROGUE\_IBM\_GRAPHICS))
224 \textcolor{preprocessor}{#  else}
225     \textcolor{keywordflow}{if} (!\hyperlink{mapglyph_8c_a2f630e112d734334a67238e7f6e72c8c}{has\_color}(color) || \hyperlink{dungeon_8h_a2732117523c8540638daf4315dda16b9}{Is\_rogue\_level}(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz}))
226 \textcolor{preprocessor}{#  endif}
227 \textcolor{preprocessor}{# else}
228     \textcolor{keywordflow}{if} (!\hyperlink{mapglyph_8c_a2f630e112d734334a67238e7f6e72c8c}{has\_color}(color))
229 \textcolor{preprocessor}{# endif}
230     color = \hyperlink{color_8h_a69d859e537f858ca285d77a66755ded6}{NO\_COLOR};
231 \textcolor{preprocessor}{#endif}
232 
233     *ochar = (int)ch;
234     *ospecial = special;
235 \textcolor{preprocessor}{#ifdef TEXTCOLOR}
236     *ocolor = color;
237 \textcolor{preprocessor}{#endif}
238     \textcolor{keywordflow}{return};
239 \}
\end{DoxyCode}


\subsection{Variable Documentation}
\hypertarget{mapglyph_8c_a4e43c1e3d9bdf5d278bf6ed4d11124c7}{\index{mapglyph.\+c@{mapglyph.\+c}!explcolors@{explcolors}}
\index{explcolors@{explcolors}!mapglyph.\+c@{mapglyph.\+c}}
\subsubsection[{explcolors}]{\setlength{\rightskip}{0pt plus 5cm}int explcolors\mbox{[}$\,$\mbox{]}}}\label{mapglyph_8c_a4e43c1e3d9bdf5d278bf6ed4d11124c7}
{\bfseries Initial value\+:}
\begin{DoxyCode}
= \{
    \hyperlink{color_8h_ad8fc23ac0b5f8e6292135c5647486d5a}{CLR\_BLACK}, 
    \hyperlink{color_8h_a0c8c42824dd44b52d4289558804a128a}{CLR\_GREEN}, 
    \hyperlink{color_8h_ae6183033e0a87a0dc8f345aad0ceb94f}{CLR\_BROWN}, 
    \hyperlink{color_8h_a0dab0df401c468a1012750cc6331dbe4}{CLR\_BLUE},   
    \hyperlink{color_8h_ab6d8d8f1ba06b04bc27ec83e59fad1eb}{CLR\_MAGENTA}, 
    \hyperlink{color_8h_a82bbec903d4fb5d640e1730763a59427}{CLR\_ORANGE},   
    \hyperlink{color_8h_a200fd50f64e8a7777954547ef30798a1}{CLR\_WHITE}, 
\}
\end{DoxyCode}


Definition at line 12 of file mapglyph.\+c.

