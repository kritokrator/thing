\hypertarget{winfuncs_8c}{\section{nethack/sys/amiga/winfuncs.c File Reference}
\label{winfuncs_8c}\index{nethack/sys/amiga/winfuncs.\+c@{nethack/sys/amiga/winfuncs.\+c}}
}
{\ttfamily \#include \char`\"{}N\+H\+:sys/amiga/windefs.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}N\+H\+:sys/amiga/winext.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}N\+H\+:sys/amiga/winproto.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}patchlevel.\+h\char`\"{}}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
static void \hyperlink{winfuncs_8c_aa443a8fd869c4d68918b828581a2f025}{cursor\+\_\+common} (struct Rast\+Port $\ast$, int, int)
\item 
void \hyperlink{winfuncs_8c_ae84f0314267faad0f07cd9f754fe4eb4}{ami\+\_\+wininit\+\_\+data} (void)
\item 
void \hyperlink{winfuncs_8c_aa650954bd0e8c4a5ef3b283050cd646c}{amii\+\_\+destroy\+\_\+nhwindow} (\hyperlink{wintype_8h_adc2de956a3f084b1691cf080e1d1412b}{winid} win)
\item 
\hyperlink{winfuncs_8c_accd860a04364dbcccc55022ee713e9d4}{amii\+\_\+create\+\_\+nhwindow} (int \hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type})
\item 
int \+\_\+\+\_\+interrupt \+\_\+\+\_\+saveds \+\_\+\+\_\+asm \hyperlink{winfuncs_8c_a49e0e4d194d63d3aadfdc40401701b06}{S\+M\+\_\+\+Filter} (\hyperlink{mkmaze_8c_a24ac627a7839caecddfc66f1d46033f0}{register} \+\_\+\+\_\+a0 struct Hook $\ast$hk, \hyperlink{mkmaze_8c_a24ac627a7839caecddfc66f1d46033f0}{register} \+\_\+\+\_\+a1 \hyperlink{def__os2_8h_af632da489ebc3708ec3ab6791ee53fa4}{U\+L\+O\+N\+G} mode\+I\+D, \hyperlink{mkmaze_8c_a24ac627a7839caecddfc66f1d46033f0}{register} \+\_\+\+\_\+a2 struct Screen\+Mode\+Requester $\ast$smr)
\item 
void \hyperlink{winfuncs_8c_af781a3da36dbe34ce749435c2b4853fd}{amii\+\_\+init\+\_\+nhwindows} (int $\ast$argcp, char $\ast$$\ast$argv)
\item 
void \hyperlink{winfuncs_8c_af3f6522f0bcc54d4a193d32ff11ec28b}{amii\+\_\+sethipens} (struct Window $\ast$w, int \hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type}, int attr)
\item 
void \hyperlink{winfuncs_8c_a4df453dcf15e61612e6e06b40279d5d8}{amii\+\_\+setfillpens} (struct Window $\ast$w, int \hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type})
\item 
void \hyperlink{winfuncs_8c_a2c51c999c9751e89fcdcbf313d741da7}{amii\+\_\+setdrawpens} (struct Window $\ast$w, int \hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type})
\item 
void \hyperlink{winfuncs_8c_ac2b43ff5e6b6394438fd8fde2008d264}{amii\+\_\+clear\+\_\+nhwindow} (\hyperlink{wintype_8h_adc2de956a3f084b1691cf080e1d1412b}{winid} win)
\item 
void \hyperlink{winfuncs_8c_ac946cc5b4c43a936e168ddc80b74c4bd}{dismiss\+\_\+nhwindow} (\hyperlink{wintype_8h_adc2de956a3f084b1691cf080e1d1412b}{winid} win)
\item 
void \hyperlink{winfuncs_8c_a14c4eb72e7af39f2de1d7d9d1ce78c4a}{amii\+\_\+exit\+\_\+nhwindows} (char $\ast$str) \hyperlink{tradstdc_8h_a2c212835823e3c54a8ab6d95c652660e}{const}
\item 
void \hyperlink{winfuncs_8c_a743c0fb6beb3516ba3022d5680276991}{amii\+\_\+display\+\_\+nhwindow} (\hyperlink{wintype_8h_adc2de956a3f084b1691cf080e1d1412b}{winid} win, \hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} blocking)
\item 
void \hyperlink{winfuncs_8c_ad16d76372b2790f7b6926dc6174e4111}{amii\+\_\+curs} (\hyperlink{wintype_8h_adc2de956a3f084b1691cf080e1d1412b}{winid} window, int x, int y)
\item 
void \hyperlink{winfuncs_8c_a626a95e77f3432e0ed9eb6e21193fdbf}{amii\+\_\+set\+\_\+text\+\_\+font} (char $\ast$\hyperlink{lev__main_8c_a8f8f80d37794cde9472343e4487ba3eb}{name}, int \hyperlink{structsize}{size})
\item 
void \hyperlink{winfuncs_8c_a72b5bc3695faa88e00240b100758f23a}{kill\+\_\+nhwindows} (int all)
\item 
void \hyperlink{winfuncs_8c_ace7ed7ac165d8e68bbc3df59a8ac5ec6}{amii\+\_\+cl\+\_\+end} (struct \hyperlink{structamii__WinDesc}{amii\+\_\+\+Win\+Desc} $\ast$cw, int \hyperlink{mactty_8c_a583dba93dfd738ae8a11a49b9b8e6085}{curs\+\_\+pos})
\item 
void \hyperlink{winfuncs_8c_a21dcf06b1e3a62331c49092d9911f189}{cursor\+\_\+off} (\hyperlink{wintype_8h_adc2de956a3f084b1691cf080e1d1412b}{winid} window)
\item 
void \hyperlink{winfuncs_8c_ae43c0ee78599c3fa7f2fe2fe4c2b71a1}{cursor\+\_\+on} (\hyperlink{wintype_8h_adc2de956a3f084b1691cf080e1d1412b}{winid} window)
\item 
void \hyperlink{winfuncs_8c_ad6a6c5e1b2ab1259187688b96e4e7a74}{amii\+\_\+suspend\+\_\+nhwindows} (char $\ast$str) \hyperlink{tradstdc_8h_a2c212835823e3c54a8ab6d95c652660e}{const}
\item 
void \hyperlink{winfuncs_8c_a894fdf3f213b71cbb585d85e153d7bff}{amii\+\_\+resume\+\_\+nhwindows} ()
\item 
void \hyperlink{winfuncs_8c_a2b12c79e005b70ff702a2c9d7ab0b409}{amii\+\_\+bell} ()
\item 
void \hyperlink{winfuncs_8c_a286a3e794d3dba209062e7862565e70f}{removetopl} (int cnt)
\item 
void \hyperlink{winfuncs_8c_ad2513d411f99ff1bb783473275fedd1a}{amii\+\_\+print\+\_\+glyph} (\hyperlink{wintype_8h_adc2de956a3f084b1691cf080e1d1412b}{winid} win, \hyperlink{global_8h_a2043b7d01ce89f4ee2fa6c345a752d32}{xchar} x, \hyperlink{global_8h_a2043b7d01ce89f4ee2fa6c345a752d32}{xchar} y, int glyph)
\item 
void \hyperlink{winfuncs_8c_aab47181efcfda8c085c6739aca882b94}{amii\+\_\+raw\+\_\+print} (\hyperlink{tradstdc_8h_a2c212835823e3c54a8ab6d95c652660e}{const} char $\ast$s)
\item 
void \hyperlink{winfuncs_8c_a7c303cbf1af1f00c78362eef85bbfa64}{amii\+\_\+raw\+\_\+print\+\_\+bold} (\hyperlink{tradstdc_8h_a2c212835823e3c54a8ab6d95c652660e}{const} char $\ast$s)
\item 
void \hyperlink{winfuncs_8c_acc8f4aa5abffe473b4c2e6ffe5c285f4}{amii\+\_\+update\+\_\+inventory} ()
\item 
void \hyperlink{winfuncs_8c_af8feaba4b73730f44a8f97fa829c5dc9}{amii\+\_\+mark\+\_\+synch} ()
\item 
void \hyperlink{winfuncs_8c_afb9466b9fae84cc64fbe79fcf6467c06}{amii\+\_\+wait\+\_\+synch} ()
\item 
void \hyperlink{winfuncs_8c_a2876464c6431712b2c89e8066669c311}{amii\+\_\+setclipped} ()
\item 
void \hyperlink{winfuncs_8c_ab842f92a372d2e1e20a0538937488950}{amii\+\_\+cliparound} (int x, int y)
\item 
void \hyperlink{winfuncs_8c_ae8d6b32a14e062f051d36de0fab26495}{flush\+I\+D\+C\+M\+P} (struct Msg\+Port $\ast$port)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
struct Tag\+Item \hyperlink{winfuncs_8c_a3196b72476cb71b37649e1b48a7470e4}{scrntags} \mbox{[}$\,$\mbox{]}
\item 
static \hyperlink{structBitMapHeader}{Bit\+Map\+Header} \hyperlink{winfuncs_8c_a3ddc62e44fb01a556d409b3082c78a7a}{amii\+\_\+bmhd}
\item 
int \hyperlink{winfuncs_8c_afba9a8d2cd024c7010eae489091d11d6}{mxsize}
\item 
int \hyperlink{winfuncs_8c_a9703aea67c83633a25beaa737dad2b65}{mysize}
\item 
struct Rectangle \hyperlink{winfuncs_8c_a0a7c9ea82e04a8326edfd11f48eae0aa}{amii\+\_\+oldover}
\item 
struct Rectangle \hyperlink{winfuncs_8c_abf1a8ff4e563d7d084463a3b9c8a4171}{amii\+\_\+oldmsg}
\item 
struct Text\+Font $\ast$ \hyperlink{winfuncs_8c_ab4180a3dac152c2cdb9d0debce284a33}{Rogue\+Font}
\item 
int \hyperlink{winfuncs_8c_acc9bd89041e1021df5e8d898dda9968c}{amii\+\_\+msg\+A\+Pen}
\item 
int \hyperlink{winfuncs_8c_ab8d29ceb31e5059cc2430e47bfba87c8}{amii\+\_\+msg\+B\+Pen}
\item 
int \hyperlink{winfuncs_8c_abd477ff7ec6eba516c641ea5ae9af420}{amii\+\_\+stat\+A\+Pen}
\item 
int \hyperlink{winfuncs_8c_aacd31bf4b410f0502df1519ddb6822ab}{amii\+\_\+stat\+B\+Pen}
\item 
int \hyperlink{winfuncs_8c_a14ab17c151206a4245022490c76255ec}{amii\+\_\+menu\+A\+Pen}
\item 
int \hyperlink{winfuncs_8c_a26ac45dc44f3d41edc95bc99e0b788d8}{amii\+\_\+menu\+B\+Pen}
\item 
int \hyperlink{winfuncs_8c_a87c9b725a8d1a308419408002c9eed2d}{amii\+\_\+text\+A\+Pen}
\item 
int \hyperlink{winfuncs_8c_a9ba6c6ce5bc8ca526739e615566abde0}{amii\+\_\+text\+B\+Pen}
\item 
int \hyperlink{winfuncs_8c_a0d0a78803f21bcbdb86d788acde92972}{amii\+\_\+other\+A\+Pen}
\item 
int \hyperlink{winfuncs_8c_a111dca2a2ad69484b4c949424caa4ffa}{amii\+\_\+other\+B\+Pen}
\item 
long \hyperlink{winfuncs_8c_a671ae6e85756b2cbd50580e85216e311}{amii\+\_\+libvers} = \hyperlink{windefs_8h_a52e85708181c7f693a2f9b315007e00d}{L\+I\+B\+R\+A\+R\+Y\+\_\+\+F\+O\+N\+T\+\_\+\+V\+E\+R\+S\+I\+O\+N}
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\hypertarget{winfuncs_8c_ae84f0314267faad0f07cd9f754fe4eb4}{\index{winfuncs.\+c@{winfuncs.\+c}!ami\+\_\+wininit\+\_\+data@{ami\+\_\+wininit\+\_\+data}}
\index{ami\+\_\+wininit\+\_\+data@{ami\+\_\+wininit\+\_\+data}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{ami\+\_\+wininit\+\_\+data}]{\setlength{\rightskip}{0pt plus 5cm}void ami\+\_\+wininit\+\_\+data (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{winfuncs_8c_ae84f0314267faad0f07cd9f754fe4eb4}


Definition at line 44 of file winfuncs.\+c.



References amii\+\_\+defpens, amii\+\_\+init\+\_\+map, amii\+\_\+initmap, amii\+\_\+libvers, A\+M\+I\+I\+\_\+\+M\+A\+X\+C\+O\+L\+O\+R\+S, amii\+\_\+menu\+A\+Pen, amii\+\_\+menu\+B\+Pen, amii\+\_\+msg\+A\+Pen, amii\+\_\+msg\+B\+Pen, amii\+\_\+numcolors, amii\+\_\+other\+A\+Pen, amii\+\_\+other\+B\+Pen, amii\+\_\+stat\+A\+Pen, amii\+\_\+stat\+B\+Pen, amii\+\_\+text\+A\+Pen, amii\+\_\+text\+B\+Pen, amiv\+\_\+init\+\_\+map, C\+\_\+\+B\+L\+A\+C\+K, C\+\_\+\+B\+L\+U\+E, C\+\_\+\+B\+R\+O\+W\+N, C\+\_\+\+C\+Y\+A\+N, C\+\_\+\+G\+R\+E\+Y\+B\+L\+U\+E, C\+\_\+\+L\+T\+G\+R\+E\+Y, C\+\_\+\+R\+E\+D, C\+\_\+\+W\+H\+I\+T\+E, flags, L\+I\+B\+R\+A\+R\+Y\+\_\+\+F\+O\+N\+T\+\_\+\+V\+E\+R\+S\+I\+O\+N, L\+I\+B\+R\+A\+R\+Y\+\_\+\+T\+I\+L\+E\+\_\+\+V\+E\+R\+S\+I\+O\+N, mxsize, mysize, and W\+I\+N\+V\+E\+R\+S\+\_\+\+A\+M\+I\+V.


\begin{DoxyCode}
45 \{
46     \textcolor{keyword}{extern} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} \hyperlink{winext_8h_a46e6dbfbaf847bf2f317972ba86aaed3}{amii\_init\_map}[ \hyperlink{amiconf_8h_a551015331d3f91ae1ca3cb425e24e5ea}{AMII\_MAXCOLORS} ];
47     \textcolor{keyword}{extern} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} \hyperlink{winext_8h_af758a476f0474858372e67facd78c5c4}{amiv\_init\_map}[ \hyperlink{amiconf_8h_a551015331d3f91ae1ca3cb425e24e5ea}{AMII\_MAXCOLORS} ];
48     \textcolor{keywordflow}{if}( !\hyperlink{windefs_8h_aa0b90aaeb74b2488a95f0902cef09cbf}{WINVERS\_AMIV} )
49     \{
50 \textcolor{preprocessor}{# ifdef TEXTCOLOR}
51     \hyperlink{winext_8h_ae3cfaa8053fd2f089c9fe1ba90289e98}{amii\_numcolors} = 8;
52 \textcolor{preprocessor}{# else}
53     \hyperlink{winext_8h_ae3cfaa8053fd2f089c9fe1ba90289e98}{amii\_numcolors} = 4;
54 \textcolor{preprocessor}{# endif}
55     \hyperlink{winext_8h_ad05c56b93fcfad535403a74d5b395eed}{amii\_defpens}[ 0 ] = \hyperlink{windefs_8h_a22a9543e081938a146a8bce60a84200a}{C\_BLACK}; \textcolor{comment}{/* DETAILPEN        */}
56     \hyperlink{winext_8h_ad05c56b93fcfad535403a74d5b395eed}{amii\_defpens}[ 1 ] = \hyperlink{windefs_8h_a2e4dd0b4af70107f36c2aa60b1195f01}{C\_BLUE};   \textcolor{comment}{/* BLOCKPEN         */}
57     \hyperlink{winext_8h_ad05c56b93fcfad535403a74d5b395eed}{amii\_defpens}[ 2 ] = \hyperlink{windefs_8h_aaef6f569991f8a1af310b82b0371dd4c}{C\_BROWN}; \textcolor{comment}{/* TEXTPEN          */}
58     \hyperlink{winext_8h_ad05c56b93fcfad535403a74d5b395eed}{amii\_defpens}[ 3 ] = \hyperlink{windefs_8h_a67fead37547ff67ca0a269d712e87822}{C\_WHITE}; \textcolor{comment}{/* SHINEPEN         */}
59     \hyperlink{winext_8h_ad05c56b93fcfad535403a74d5b395eed}{amii\_defpens}[ 4 ] = \hyperlink{windefs_8h_a2e4dd0b4af70107f36c2aa60b1195f01}{C\_BLUE};   \textcolor{comment}{/* SHADOWPEN        */}
60     \hyperlink{winext_8h_ad05c56b93fcfad535403a74d5b395eed}{amii\_defpens}[ 5 ] = \hyperlink{windefs_8h_a8318e037c99fbf82089b68ba5d603cd0}{C\_CYAN};   \textcolor{comment}{/* FILLPEN          */}
61     \hyperlink{winext_8h_ad05c56b93fcfad535403a74d5b395eed}{amii\_defpens}[ 6 ] = \hyperlink{windefs_8h_a67fead37547ff67ca0a269d712e87822}{C\_WHITE}; \textcolor{comment}{/* FILLTEXTPEN      */}
62     \hyperlink{winext_8h_ad05c56b93fcfad535403a74d5b395eed}{amii\_defpens}[ 7 ] = \hyperlink{windefs_8h_a8318e037c99fbf82089b68ba5d603cd0}{C\_CYAN};   \textcolor{comment}{/* BACKGROUNDPEN    */}
63     \hyperlink{winext_8h_ad05c56b93fcfad535403a74d5b395eed}{amii\_defpens}[ 8 ] = \hyperlink{windefs_8h_a7adb9aaa1eed15caecd92e3837581b53}{C\_RED}; \textcolor{comment}{/* HIGHLIGHTTEXTPEN */}
64     \hyperlink{winext_8h_ad05c56b93fcfad535403a74d5b395eed}{amii\_defpens}[ 9 ] = \hyperlink{windefs_8h_a67fead37547ff67ca0a269d712e87822}{C\_WHITE}; \textcolor{comment}{/* BARDETAILPEN     */}
65     \hyperlink{winext_8h_ad05c56b93fcfad535403a74d5b395eed}{amii\_defpens}[ 10 ] = \hyperlink{windefs_8h_a8318e037c99fbf82089b68ba5d603cd0}{C\_CYAN};  \textcolor{comment}{/* BARBLOCKPEN      */}
66     \hyperlink{winext_8h_ad05c56b93fcfad535403a74d5b395eed}{amii\_defpens}[ 11 ] = \hyperlink{windefs_8h_a2e4dd0b4af70107f36c2aa60b1195f01}{C\_BLUE};  \textcolor{comment}{/* BARTRIMPEN       */}
67     \hyperlink{winext_8h_ad05c56b93fcfad535403a74d5b395eed}{amii\_defpens}[ 12 ] = (\textcolor{keywordtype}{unsigned} short) ~0;
68 
69     \hyperlink{winfuncs_8c_acc9bd89041e1021df5e8d898dda9968c}{amii\_msgAPen} = \hyperlink{windefs_8h_a67fead37547ff67ca0a269d712e87822}{C\_WHITE};
70     \hyperlink{winfuncs_8c_ab8d29ceb31e5059cc2430e47bfba87c8}{amii\_msgBPen} = \hyperlink{windefs_8h_a22a9543e081938a146a8bce60a84200a}{C\_BLACK};
71     \hyperlink{winfuncs_8c_abd477ff7ec6eba516c641ea5ae9af420}{amii\_statAPen} = \hyperlink{windefs_8h_a67fead37547ff67ca0a269d712e87822}{C\_WHITE};
72     \hyperlink{winfuncs_8c_aacd31bf4b410f0502df1519ddb6822ab}{amii\_statBPen} = \hyperlink{windefs_8h_a22a9543e081938a146a8bce60a84200a}{C\_BLACK};
73     \hyperlink{winfuncs_8c_a14ab17c151206a4245022490c76255ec}{amii\_menuAPen} = \hyperlink{windefs_8h_a67fead37547ff67ca0a269d712e87822}{C\_WHITE};
74     \hyperlink{winfuncs_8c_a26ac45dc44f3d41edc95bc99e0b788d8}{amii\_menuBPen} = \hyperlink{windefs_8h_a22a9543e081938a146a8bce60a84200a}{C\_BLACK};
75     \hyperlink{winfuncs_8c_a87c9b725a8d1a308419408002c9eed2d}{amii\_textAPen} = \hyperlink{windefs_8h_a67fead37547ff67ca0a269d712e87822}{C\_WHITE};
76     \hyperlink{winfuncs_8c_a9ba6c6ce5bc8ca526739e615566abde0}{amii\_textBPen} = \hyperlink{windefs_8h_a22a9543e081938a146a8bce60a84200a}{C\_BLACK};
77     \hyperlink{winfuncs_8c_a0d0a78803f21bcbdb86d788acde92972}{amii\_otherAPen} = \hyperlink{windefs_8h_a7adb9aaa1eed15caecd92e3837581b53}{C\_RED};
78     \hyperlink{winfuncs_8c_a111dca2a2ad69484b4c949424caa4ffa}{amii\_otherBPen} = \hyperlink{windefs_8h_a22a9543e081938a146a8bce60a84200a}{C\_BLACK};
79 
80     \hyperlink{winfuncs_8c_afba9a8d2cd024c7010eae489091d11d6}{mxsize} = 8;
81     \hyperlink{winfuncs_8c_a9703aea67c83633a25beaa737dad2b65}{mysize} = 8;
82 
83     \hyperlink{winfuncs_8c_a671ae6e85756b2cbd50580e85216e311}{amii\_libvers} = \hyperlink{windefs_8h_a52e85708181c7f693a2f9b315007e00d}{LIBRARY\_FONT\_VERSION};
84     memcpy( \hyperlink{winext_8h_a1b12e8b2fa45f0d58b47b42d920c641c}{amii\_initmap}, amii\_init\_map, \textcolor{keyword}{sizeof}( \hyperlink{winext_8h_a1b12e8b2fa45f0d58b47b42d920c641c}{amii\_initmap} ) );
85     \}
86     \textcolor{keywordflow}{else}
87     \{
88     \hyperlink{winfuncs_8c_afba9a8d2cd024c7010eae489091d11d6}{mxsize} = 16;
89     \hyperlink{winfuncs_8c_a9703aea67c83633a25beaa737dad2b65}{mysize} = 16;
90 
91     \hyperlink{winext_8h_ae3cfaa8053fd2f089c9fe1ba90289e98}{amii\_numcolors} = 16;
92 
93     \hyperlink{winext_8h_ad05c56b93fcfad535403a74d5b395eed}{amii\_defpens}[ 0 ] = \hyperlink{windefs_8h_a22a9543e081938a146a8bce60a84200a}{C\_BLACK}; \textcolor{comment}{/* DETAILPEN        */}
94     \hyperlink{winext_8h_ad05c56b93fcfad535403a74d5b395eed}{amii\_defpens}[ 1 ] = \hyperlink{windefs_8h_a67fead37547ff67ca0a269d712e87822}{C\_WHITE}; \textcolor{comment}{/* BLOCKPEN         */}
95     \hyperlink{winext_8h_ad05c56b93fcfad535403a74d5b395eed}{amii\_defpens}[ 2 ] = \hyperlink{windefs_8h_a22a9543e081938a146a8bce60a84200a}{C\_BLACK}; \textcolor{comment}{/* TEXTPEN          */}
96     \hyperlink{winext_8h_ad05c56b93fcfad535403a74d5b395eed}{amii\_defpens}[ 3 ] = \hyperlink{windefs_8h_a8318e037c99fbf82089b68ba5d603cd0}{C\_CYAN};   \textcolor{comment}{/* SHINEPEN         */}
97     \hyperlink{winext_8h_ad05c56b93fcfad535403a74d5b395eed}{amii\_defpens}[ 4 ] = \hyperlink{windefs_8h_a2e4dd0b4af70107f36c2aa60b1195f01}{C\_BLUE};   \textcolor{comment}{/* SHADOWPEN        */}
98     \hyperlink{winext_8h_ad05c56b93fcfad535403a74d5b395eed}{amii\_defpens}[ 5 ] = \hyperlink{windefs_8h_ac90add32f96ca4f82528fd6195b47157}{C\_GREYBLUE};   \textcolor{comment}{/* FILLPEN          */}
99     \hyperlink{winext_8h_ad05c56b93fcfad535403a74d5b395eed}{amii\_defpens}[ 6 ] = \hyperlink{windefs_8h_a9b5d9421580af189c4b8acf8e19d583d}{C\_LTGREY};   \textcolor{comment}{/* FILLTEXTPEN      */}
100     \hyperlink{winext_8h_ad05c56b93fcfad535403a74d5b395eed}{amii\_defpens}[ 7 ] = \hyperlink{windefs_8h_ac90add32f96ca4f82528fd6195b47157}{C\_GREYBLUE};   \textcolor{comment}{/* BACKGROUNDPEN    */}
101     \hyperlink{winext_8h_ad05c56b93fcfad535403a74d5b395eed}{amii\_defpens}[ 8 ] = \hyperlink{windefs_8h_a7adb9aaa1eed15caecd92e3837581b53}{C\_RED}; \textcolor{comment}{/* HIGHLIGHTTEXTPEN */}
102     \hyperlink{winext_8h_ad05c56b93fcfad535403a74d5b395eed}{amii\_defpens}[ 9 ] = \hyperlink{windefs_8h_a67fead37547ff67ca0a269d712e87822}{C\_WHITE}; \textcolor{comment}{/* BARDETAILPEN     */}
103     \hyperlink{winext_8h_ad05c56b93fcfad535403a74d5b395eed}{amii\_defpens}[ 10] = \hyperlink{windefs_8h_ac90add32f96ca4f82528fd6195b47157}{C\_GREYBLUE};   \textcolor{comment}{/* BARBLOCKPEN      */}
104     \hyperlink{winext_8h_ad05c56b93fcfad535403a74d5b395eed}{amii\_defpens}[ 11] = \hyperlink{windefs_8h_a2e4dd0b4af70107f36c2aa60b1195f01}{C\_BLUE};   \textcolor{comment}{/* BARTRIMPEN       */}
105     \hyperlink{winext_8h_ad05c56b93fcfad535403a74d5b395eed}{amii\_defpens}[ 12] = (\textcolor{keywordtype}{unsigned} short) ~0;
106 
107     \hyperlink{winfuncs_8c_acc9bd89041e1021df5e8d898dda9968c}{amii\_msgAPen} = \hyperlink{windefs_8h_a67fead37547ff67ca0a269d712e87822}{C\_WHITE};
108     \hyperlink{winfuncs_8c_ab8d29ceb31e5059cc2430e47bfba87c8}{amii\_msgBPen} = \hyperlink{windefs_8h_ac90add32f96ca4f82528fd6195b47157}{C\_GREYBLUE};
109     \hyperlink{winfuncs_8c_abd477ff7ec6eba516c641ea5ae9af420}{amii\_statAPen} = \hyperlink{windefs_8h_a67fead37547ff67ca0a269d712e87822}{C\_WHITE};
110     \hyperlink{winfuncs_8c_aacd31bf4b410f0502df1519ddb6822ab}{amii\_statBPen} = \hyperlink{windefs_8h_ac90add32f96ca4f82528fd6195b47157}{C\_GREYBLUE};
111     \hyperlink{winfuncs_8c_a14ab17c151206a4245022490c76255ec}{amii\_menuAPen} = \hyperlink{windefs_8h_a22a9543e081938a146a8bce60a84200a}{C\_BLACK};
112     \hyperlink{winfuncs_8c_a26ac45dc44f3d41edc95bc99e0b788d8}{amii\_menuBPen} = \hyperlink{windefs_8h_a9b5d9421580af189c4b8acf8e19d583d}{C\_LTGREY};
113     \hyperlink{winfuncs_8c_a87c9b725a8d1a308419408002c9eed2d}{amii\_textAPen} = \hyperlink{windefs_8h_a22a9543e081938a146a8bce60a84200a}{C\_BLACK};
114     \hyperlink{winfuncs_8c_a9ba6c6ce5bc8ca526739e615566abde0}{amii\_textBPen} = \hyperlink{windefs_8h_a9b5d9421580af189c4b8acf8e19d583d}{C\_LTGREY};
115     \hyperlink{winfuncs_8c_a0d0a78803f21bcbdb86d788acde92972}{amii\_otherAPen} = \hyperlink{windefs_8h_a7adb9aaa1eed15caecd92e3837581b53}{C\_RED};
116     \hyperlink{winfuncs_8c_a111dca2a2ad69484b4c949424caa4ffa}{amii\_otherBPen} = \hyperlink{windefs_8h_a22a9543e081938a146a8bce60a84200a}{C\_BLACK};
117     \hyperlink{winfuncs_8c_a671ae6e85756b2cbd50580e85216e311}{amii\_libvers} = \hyperlink{windefs_8h_a966c6459f9f27dc4a1e1522e38cd9ade}{LIBRARY\_TILE\_VERSION};
118 
119     memcpy( \hyperlink{winext_8h_a1b12e8b2fa45f0d58b47b42d920c641c}{amii\_initmap}, amiv\_init\_map, \textcolor{keyword}{sizeof}( \hyperlink{winext_8h_a1b12e8b2fa45f0d58b47b42d920c641c}{amii\_initmap} ) );
120     \}
121 \textcolor{preprocessor}{#ifdef OPT\_DISPMAP}
122     dispmap\_sanity();
123 \textcolor{preprocessor}{#endif}
124     memcpy(\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.amii\_dripens,\hyperlink{winext_8h_ad05c56b93fcfad535403a74d5b395eed}{amii\_defpens},\textcolor{keyword}{sizeof}(\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.amii\_dripens));
125 \}
\end{DoxyCode}
\hypertarget{winfuncs_8c_a2b12c79e005b70ff702a2c9d7ab0b409}{\index{winfuncs.\+c@{winfuncs.\+c}!amii\+\_\+bell@{amii\+\_\+bell}}
\index{amii\+\_\+bell@{amii\+\_\+bell}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{amii\+\_\+bell}]{\setlength{\rightskip}{0pt plus 5cm}void amii\+\_\+bell (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{winfuncs_8c_a2b12c79e005b70ff702a2c9d7ab0b409}


Definition at line 2000 of file winfuncs.\+c.



References N\+U\+L\+L.


\begin{DoxyCode}
2001 \{
2002     DisplayBeep( \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} );
2003 \}
\end{DoxyCode}
\hypertarget{winfuncs_8c_ace7ed7ac165d8e68bbc3df59a8ac5ec6}{\index{winfuncs.\+c@{winfuncs.\+c}!amii\+\_\+cl\+\_\+end@{amii\+\_\+cl\+\_\+end}}
\index{amii\+\_\+cl\+\_\+end@{amii\+\_\+cl\+\_\+end}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{amii\+\_\+cl\+\_\+end}]{\setlength{\rightskip}{0pt plus 5cm}void amii\+\_\+cl\+\_\+end (
\begin{DoxyParamCaption}
\item[{struct {\bf amii\+\_\+\+Win\+Desc} $\ast$}]{cw, }
\item[{int}]{curs\+\_\+pos}
\end{DoxyParamCaption}
)}}\label{winfuncs_8c_ace7ed7ac165d8e68bbc3df59a8ac5ec6}


Definition at line 1817 of file winfuncs.\+c.



References panic(), and Text\+Spaces().



Referenced by amii\+\_\+doprev\+\_\+message(), amii\+\_\+putstr(), Display\+Data(), outmore(), and removetopl().


\begin{DoxyCode}
1820 \{
1821     \textcolor{keyword}{register} \textcolor{keyword}{struct }Window *w = cw->\hyperlink{structamii__WinDesc_a9835faa4d66643cd889203e26edee8ae}{win};
1822     \textcolor{keyword}{register} \textcolor{keywordtype}{int} oy, ox;
1823 
1824     \textcolor{keywordflow}{if}( !w )
1825     \hyperlink{txt2iff_8c_ab0824b6f5eb51db9371d2e9a222249d3}{panic}(\textcolor{stringliteral}{"NULL window pointer in amii\_cl\_end()"});
1826 
1827     oy = w->RPort->cp\_y;
1828     ox = w->RPort->cp\_x;
1829 
1830     \hyperlink{winproto_8h_a948e00a84111ca94231f9b411ed7ec42}{TextSpaces}( w->RPort, cw->\hyperlink{structamii__WinDesc_a8ef9da0197015f48920307f3692f2a54}{cols} - \hyperlink{mactty_8c_a583dba93dfd738ae8a11a49b9b8e6085}{curs\_pos} );
1831 
1832     Move( w->RPort, ox, oy );
1833 \}
\end{DoxyCode}
\hypertarget{winfuncs_8c_ac2b43ff5e6b6394438fd8fde2008d264}{\index{winfuncs.\+c@{winfuncs.\+c}!amii\+\_\+clear\+\_\+nhwindow@{amii\+\_\+clear\+\_\+nhwindow}}
\index{amii\+\_\+clear\+\_\+nhwindow@{amii\+\_\+clear\+\_\+nhwindow}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{amii\+\_\+clear\+\_\+nhwindow}]{\setlength{\rightskip}{0pt plus 5cm}void amii\+\_\+clear\+\_\+nhwindow (
\begin{DoxyParamCaption}
\item[{{\bf winid}}]{win}
\end{DoxyParamCaption}
)}}\label{winfuncs_8c_ac2b43ff5e6b6394438fd8fde2008d264}


Definition at line 1414 of file winfuncs.\+c.



References amii\+\_\+clear\+\_\+nhwindow(), amii\+\_\+curs(), amii\+\_\+setfillpens(), amii\+\_\+wins, amii\+\_\+\+Win\+Desc\+::cols, cursor\+\_\+off(), amii\+\_\+\+Win\+Desc\+::curx, amii\+\_\+\+Win\+Desc\+::cury, F\+L\+M\+A\+P\+\_\+\+C\+U\+R\+S\+U\+P, N\+H\+W\+\_\+\+M\+A\+P, N\+H\+W\+\_\+\+M\+E\+N\+U, N\+H\+W\+\_\+\+M\+E\+S\+S\+A\+G\+E, N\+H\+W\+\_\+\+T\+E\+X\+T, N\+U\+L\+L, panic(), reclip, scrollmsg, Text\+Spaces(), amii\+\_\+\+Win\+Desc\+::type, amii\+\_\+\+Win\+Desc\+::wflags, amii\+\_\+\+Win\+Desc\+::win, W\+I\+N\+\_\+\+E\+R\+R, W\+I\+N\+\_\+\+M\+A\+P, W\+I\+N\+\_\+\+O\+V\+E\+R, winpanicstr, and W\+I\+N\+V\+E\+R\+S\+\_\+\+A\+M\+I\+V.



Referenced by amii\+\_\+clear\+\_\+nhwindow(), amii\+\_\+init\+\_\+nhwindows(), and amii\+\_\+start\+\_\+menu().


\begin{DoxyCode}
1416 \{
1417     \textcolor{keyword}{register} \textcolor{keyword}{struct }\hyperlink{structamii__WinDesc}{amii\_WinDesc} *cw;
1418     \textcolor{keyword}{register} \textcolor{keyword}{struct }Window *w;
1419 
1420     \textcolor{keywordflow}{if}( \hyperlink{winchar_8c_abaef652f2ecc14cf7257f91b8f5f0527}{reclip} == 2 ) \textcolor{keywordflow}{return};
1421 
1422     \textcolor{keywordflow}{if}( win == \hyperlink{wintype_8h_a56d1f4f2e517a4e81be0b7593e35e681}{WIN\_ERR} || ( cw = \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[win] ) == \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} )
1423     \hyperlink{txt2iff_8c_ab0824b6f5eb51db9371d2e9a222249d3}{panic}( \hyperlink{winext_8h_a4264157ee8930111caf21b62c212e08c}{winpanicstr}, win, \textcolor{stringliteral}{"clear\_nhwindow"} );
1424 
1425     \textcolor{comment}{/* Clear the overview window too if it is displayed */}
1426     \textcolor{keywordflow}{if}( \hyperlink{windefs_8h_aa0b90aaeb74b2488a95f0902cef09cbf}{WINVERS\_AMIV} && ( cw->\hyperlink{structamii__WinDesc_ab90130f7f09b474842877b2f71d708e0}{type} == \hyperlink{decl_8h_afa1f7dd312c4c1b72afe3d2c8c2af691}{WIN\_MAP} && \hyperlink{winami_8h_a6a2b237abaae6aafe05c90be6d49d72e}{WIN\_OVER} != 
      \hyperlink{wintype_8h_a56d1f4f2e517a4e81be0b7593e35e681}{WIN\_ERR} && \hyperlink{winchar_8c_abaef652f2ecc14cf7257f91b8f5f0527}{reclip} == 0 ) )
1427     \{
1428     \hyperlink{winfuncs_8c_ac2b43ff5e6b6394438fd8fde2008d264}{amii\_clear\_nhwindow}( \hyperlink{winami_8h_a6a2b237abaae6aafe05c90be6d49d72e}{WIN\_OVER} );
1429     \}
1430 
1431     \textcolor{keywordflow}{if}( w = cw->\hyperlink{structamii__WinDesc_a9835faa4d66643cd889203e26edee8ae}{win} )
1432     SetDrMd( w->RPort, JAM2);
1433     \textcolor{keywordflow}{else}
1434         \textcolor{keywordflow}{return};
1435 
1436     \textcolor{keywordflow}{if}( (cw->\hyperlink{structamii__WinDesc_a4400afb6488c6a7b1f70f27ee0371963}{wflags} & \hyperlink{winami_8h_a7273e3f6e628faf1db9b852fc1c56729}{FLMAP\_CURSUP} ) )
1437     \{
1438     \textcolor{keywordflow}{if}( cw->\hyperlink{structamii__WinDesc_ab90130f7f09b474842877b2f71d708e0}{type} != \hyperlink{wintype_8h_a756172f2e22a3d287cfaf6bc771df606}{NHW\_MAP} )
1439         \hyperlink{winfuncs_8c_a21dcf06b1e3a62331c49092d9911f189}{cursor\_off}( win );
1440     \textcolor{keywordflow}{else}
1441         cw->\hyperlink{structamii__WinDesc_a4400afb6488c6a7b1f70f27ee0371963}{wflags} &= ~\hyperlink{winami_8h_a7273e3f6e628faf1db9b852fc1c56729}{FLMAP\_CURSUP};
1442     \}
1443 
1444     \hyperlink{winfuncs_8c_a4df453dcf15e61612e6e06b40279d5d8}{amii\_setfillpens}( w, cw->\hyperlink{structamii__WinDesc_ab90130f7f09b474842877b2f71d708e0}{type} );
1445     SetDrMd( w->RPort, JAM2 );
1446 
1447     \textcolor{keywordflow}{if}( cw->\hyperlink{structamii__WinDesc_ab90130f7f09b474842877b2f71d708e0}{type} == \hyperlink{wintype_8h_a60a03e50aaeef35cd7cd3bf6f790791c}{NHW\_MENU} || cw->\hyperlink{structamii__WinDesc_ab90130f7f09b474842877b2f71d708e0}{type} == \hyperlink{wintype_8h_a7e2bcc8531c4c62e8d8f1c5279c5789b}{NHW\_TEXT} )
1448     \{
1449     RectFill( w->RPort, w->BorderLeft, w->BorderTop,
1450       w->Width - w->BorderRight-1,
1451       w->Height - w->BorderBottom-1 );
1452     \}
1453     \textcolor{keywordflow}{else}
1454     \{
1455     \textcolor{keywordflow}{if}( cw->\hyperlink{structamii__WinDesc_ab90130f7f09b474842877b2f71d708e0}{type} == \hyperlink{wintype_8h_ab3d471e84a363992b5a483392d0b2389}{NHW\_MESSAGE} )
1456     \{
1457         \hyperlink{winfuncs_8c_ad16d76372b2790f7b6926dc6174e4111}{amii\_curs}( win, 1, 0 );
1458         \textcolor{keywordflow}{if}( !\hyperlink{winext_8h_a3b783f5f077454f156585be54b99746b}{scrollmsg} )
1459         \hyperlink{winproto_8h_a948e00a84111ca94231f9b411ed7ec42}{TextSpaces}( w->RPort, cw->\hyperlink{structamii__WinDesc_a8ef9da0197015f48920307f3692f2a54}{cols} );
1460     \}
1461     \textcolor{keywordflow}{else}
1462     \{
1463         RectFill( w->RPort, w->BorderLeft, w->BorderTop,
1464           w->Width - w->BorderRight-1,
1465           w->Height - w->BorderBottom-1 );
1466     \}
1467     \}
1468 
1469     cw->\hyperlink{structamii__WinDesc_aee07cf405ea0e78eb6b82c339360a0f8}{cury} = 0;
1470     cw->\hyperlink{structamii__WinDesc_a4ae862475cf0a2f6aed98394d3ac12bd}{curx} = 0;
1471     \hyperlink{winfuncs_8c_ad16d76372b2790f7b6926dc6174e4111}{amii\_curs}( win, 1, 0 );
1472 \}
\end{DoxyCode}
\hypertarget{winfuncs_8c_ab842f92a372d2e1e20a0538937488950}{\index{winfuncs.\+c@{winfuncs.\+c}!amii\+\_\+cliparound@{amii\+\_\+cliparound}}
\index{amii\+\_\+cliparound@{amii\+\_\+cliparound}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{amii\+\_\+cliparound}]{\setlength{\rightskip}{0pt plus 5cm}void amii\+\_\+cliparound (
\begin{DoxyParamCaption}
\item[{int}]{x, }
\item[{int}]{y}
\end{DoxyParamCaption}
)}}\label{winfuncs_8c_ab842f92a372d2e1e20a0538937488950}


Definition at line 2249 of file winfuncs.\+c.



References amii\+\_\+wins, C\+O, C\+O\+L\+N\+O, cursor\+\_\+off(), doredraw(), flush\+\_\+glyph\+\_\+buffer(), Is\+\_\+rogue\+\_\+level, L\+I, max, min, moves, mxsize, mysize, reclip, restoring, R\+O\+W\+N\+O, u, you\+::uz, you\+::uz0, amii\+\_\+\+Win\+Desc\+::win, and W\+I\+N\+\_\+\+M\+A\+P.


\begin{DoxyCode}
2251 \{
2252     \textcolor{keyword}{extern} \textcolor{keywordtype}{boolean} \hyperlink{decl_8h_a7033dc2d60ad2928ce6551e80e98372d}{restoring};
2253 \textcolor{preprocessor}{#ifdef  CLIPPING}
2254     \textcolor{keywordtype}{int} oldx = clipx, oldy = clipy;
2255     \textcolor{keywordtype}{int} oldxmax = clipxmax, oldymax = clipymax;
2256     \textcolor{keywordtype}{int} COx, LIx;
2257 \textcolor{preprocessor}{#define SCROLLCNT   1   }\textcolor{comment}{/* Get there in 3 moves... */}\textcolor{preprocessor}{}
2258     \textcolor{keywordtype}{int} scrollcnt = SCROLLCNT;  \textcolor{comment}{/* ...or 1 if we changed level */}
2259     \textcolor{keywordflow}{if} (!clipping)      \textcolor{comment}{/* And 1 in anycase, cleaner, simpler, quicker */}
2260     \textcolor{keywordflow}{return};
2261 
2262     \textcolor{keywordflow}{if}(\hyperlink{dungeon_8h_a2732117523c8540638daf4315dda16b9}{Is\_rogue\_level}(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz}))\{
2263     \textcolor{keyword}{struct }Window *w = \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[\hyperlink{decl_8h_afa1f7dd312c4c1b72afe3d2c8c2af691}{WIN\_MAP}]->\hyperlink{structamii__WinDesc_a9835faa4d66643cd889203e26edee8ae}{win};
2264     \textcolor{keyword}{struct }RastPort *\hyperlink{amirip_8c_aa0639b6491ec144930d14703053f32a4}{rp} = w->RPort;
2265 
2266     COx = (w->Width-w->BorderLeft-w->BorderRight)/rp->TxWidth;
2267     LIx = (w->Height-w->BorderTop-w->BorderBottom)/rp->TxHeight;
2268     \}\textcolor{keywordflow}{else}\{
2269     COx = \hyperlink{winext_8h_abdcb66bae1fc240beb333f1932bdc30d}{CO};
2270     LIx = \hyperlink{winext_8h_a4952935dee70ae06274495dcddf10856}{LI};
2271     \}
2272         \textcolor{comment}{/*}
2273 \textcolor{comment}{         * On a level change, move the clipping region so that for a}
2274 \textcolor{comment}{         * reasonablely large window extra motion is avoided; for}
2275 \textcolor{comment}{         * the rogue level hopefully this means no motion at all.}
2276 \textcolor{comment}{         */}
2277     \{
2278     \textcolor{keyword}{static} \hyperlink{structd__level}{d\_level} saved\_level = \{127,127\};      \textcolor{comment}{/* XXX */}
2279 
2280     \textcolor{keywordflow}{if}(!on\_level(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz}, &saved\_level))\{
2281         scrollcnt = 1;  \textcolor{comment}{/* jump with blanking */}
2282         clipx=clipy=0;
2283         clipxmax = COx; clipymax = LIx;
2284         saved\_level = \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz};      \textcolor{comment}{/* save as new current level */}
2285     \}
2286     \}
2287 
2288     \textcolor{keywordflow}{if} (x <= clipx + xclipbord ) \{
2289     clipx = \hyperlink{hack_8h_affe776513b24d84b39af8ab0930fef7f}{max}(0, x - (clipxmax - clipx)/2 );
2290     clipxmax = clipx + COx;
2291     \}
2292     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (x > clipxmax - xclipbord ) \{
2293     clipxmax = \hyperlink{hack_8h_abb702d8b501669a23aa0ab3b281b9384}{min}(\hyperlink{global_8h_a308dbfcc29f5a427c0315f3cbf03c3ed}{COLNO}, x + (clipxmax - clipx)/2 );
2294     clipx = clipxmax - COx;
2295     \}
2296 
2297     \textcolor{keywordflow}{if} (y <= clipy + yclipbord ) \{
2298     clipy = \hyperlink{hack_8h_affe776513b24d84b39af8ab0930fef7f}{max}(0, y - (clipymax - clipy) / 2);
2299     clipymax = clipy + LIx;
2300     \}
2301     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (y > clipymax - yclipbord ) \{
2302     clipymax = \hyperlink{hack_8h_abb702d8b501669a23aa0ab3b281b9384}{min}(\hyperlink{global_8h_a9cce134868d97b23c35bcf1ff4a343d8}{ROWNO}, y + (clipymax - clipy) / 2);
2303     clipy = clipymax - LIx;
2304     \}
2305 
2306     \hyperlink{winchar_8c_abaef652f2ecc14cf7257f91b8f5f0527}{reclip} = 1;
2307     \textcolor{keywordflow}{if} (clipx != oldx || clipy != oldy || clipxmax != oldxmax || clipymax != oldymax )
2308     \{
2309 \textcolor{preprocessor}{#ifndef NOSCROLLRASTER}
2310         \textcolor{keyword}{struct }Window *w = \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[ \hyperlink{decl_8h_afa1f7dd312c4c1b72afe3d2c8c2af691}{WIN\_MAP} ]->\hyperlink{structamii__WinDesc_a9835faa4d66643cd889203e26edee8ae}{win};
2311         \textcolor{keyword}{struct }RastPort *\hyperlink{amirip_8c_aa0639b6491ec144930d14703053f32a4}{rp} = w->RPort;
2312         \textcolor{keywordtype}{int} xdelta, ydelta, xmod, ymod, i;
2313         \textcolor{keywordtype}{int} incx, incy, mincx, mincy;
2314         \textcolor{keywordtype}{int} savex, savey, savexmax, saveymax;
2315     \textcolor{keywordtype}{int} scrx, scry;
2316 
2317     \textcolor{keywordflow}{if}(\hyperlink{dungeon_8h_a2732117523c8540638daf4315dda16b9}{Is\_rogue\_level}(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz}))\{
2318         scrx = rp->TxWidth;
2319         scry = rp->TxHeight;
2320     \} \textcolor{keywordflow}{else} \{
2321         scrx = \hyperlink{winfuncs_8c_afba9a8d2cd024c7010eae489091d11d6}{mxsize};
2322         scry = \hyperlink{winfuncs_8c_a9703aea67c83633a25beaa737dad2b65}{mysize};
2323     \}
2324 
2325     \textcolor{comment}{/* Ask that the glyph routines not draw the overview window */}
2326     \hyperlink{winchar_8c_abaef652f2ecc14cf7257f91b8f5f0527}{reclip} = 2;
2327     \hyperlink{winfuncs_8c_a21dcf06b1e3a62331c49092d9911f189}{cursor\_off}( \hyperlink{decl_8h_afa1f7dd312c4c1b72afe3d2c8c2af691}{WIN\_MAP} );
2328 
2329     \textcolor{comment}{/* Compute how far we are moving in terms of tiles */}
2330     mincx = clipx - oldx ;
2331     mincy = clipy - oldy ;
2332 
2333     \textcolor{comment}{/* How many tiles to get there in SCROLLCNT moves */}
2334     incx = ( clipx - oldx )/scrollcnt;
2335     incy = ( clipy - oldy )/scrollcnt;
2336 
2337     \textcolor{comment}{/* If less than SCROLLCNT tiles, then move by 1 tile if moving at all */}
2338     \textcolor{keywordflow}{if}( incx == 0 ) incx = (mincx != 0);
2339     \textcolor{keywordflow}{if}( incy == 0 ) incy = (mincy != 0);
2340 
2341     \textcolor{comment}{/* Get count of pixels to move each iteration and final pixel count */}
2342         xdelta = ((clipx-oldx )*scrx) / scrollcnt;
2343         xmod = ((clipx-oldx )*scrx) % scrollcnt;
2344         ydelta = ((clipy-oldy )*scry) / scrollcnt;
2345         ymod = ((clipy-oldy )*scry) % scrollcnt;
2346 
2347     \textcolor{comment}{/* Preserve the final move location */}
2348         savex = clipx;
2349         savey = clipy;
2350     saveymax = clipymax;
2351     savexmax = clipxmax;
2352 
2353     \textcolor{comment}{/*}
2354 \textcolor{comment}{     * Set clipping rectangle to be just the region that will be exposed so}
2355 \textcolor{comment}{     * that drawing will be faster}
2356 \textcolor{comment}{     */}
2357 \textcolor{preprocessor}{#if 0   }\textcolor{comment}{/* Doesn't seem to work quite the way it should */}\textcolor{preprocessor}{}
2358     \textcolor{comment}{/* In some cases hero is 'centered' offscreen */}
2359     \textcolor{keywordflow}{if}( xdelta < 0 )
2360     \{
2361         clipx = oldx;
2362         clipxmax = clipx + incx;
2363     \}
2364     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( xdelta > 0 )
2365     \{
2366         clipxmax = oldxmax;
2367         clipx = clipxmax - incx;
2368     \}
2369     \textcolor{keywordflow}{else}
2370     \{
2371         clipx = oldx;
2372         clipxmax = oldxmax;
2373     \}
2374 
2375     \textcolor{keywordflow}{if}( ydelta < 0 )
2376     \{
2377         clipy = oldy;
2378         clipymax = clipy + incy;
2379     \}
2380     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( ydelta > 0 )
2381     \{
2382         clipymax = oldymax;
2383         clipy = clipymax - incy;
2384     \}
2385     \textcolor{keywordflow}{else}
2386     \{
2387         clipy = oldy;
2388         clipymax = oldymax;
2389     \}
2390 \textcolor{preprocessor}{#endif}
2391     \textcolor{comment}{/* Now, in scrollcnt moves, move the picture toward the final view */}
2392         \textcolor{keywordflow}{for}( i = 0; i < scrollcnt; ++i )
2393         \{
2394 \textcolor{preprocessor}{#ifdef  DISPMAP}
2395         \textcolor{keywordflow}{if}( i == scrollcnt - 1 && (xmod != 0 || ymod != 0) &&
2396             (xdelta != 0 || ydelta != 0) )
2397         \{
2398         incx += (clipx - oldx)%scrollcnt;
2399         incy += (clipy - oldy)%scrollcnt;
2400         xdelta += xmod;
2401         ydelta += ymod;
2402         \}
2403 \textcolor{preprocessor}{#endif}
2404         \textcolor{comment}{/* Scroll the raster if we are scrolling */}
2405         \textcolor{keywordflow}{if}( xdelta != 0 || ydelta != 0 )
2406         \{
2407         ScrollRaster( rp, xdelta, ydelta,
2408                 w->BorderLeft, w->BorderTop,
2409                 w->Width - w->BorderRight - 1,
2410                 w->Height - w->BorderBottom - 1 );
2411 
2412         \textcolor{keywordflow}{if}( mincx == 0 ) incx = 0;
2413         \textcolor{keywordflow}{else} mincx -= incx;
2414 
2415         clipx += incx;
2416         clipxmax += incx;
2417 
2418         \textcolor{keywordflow}{if}( mincy == 0 ) incy = 0;
2419         \textcolor{keywordflow}{else} mincy -= incy;
2420 
2421         clipy += incy;
2422         clipymax += incy;
2423 
2424         \textcolor{comment}{/* Draw the exposed portion */}
2425         \textcolor{keywordflow}{if} (on\_level(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a91637ade745880be0af66e4c0b0ff1c1}{uz0}, &\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz}) && !restoring)
2426             (void) \hyperlink{display_8c_abf432a93fec9c94db8570f8a2c01468e}{doredraw}();
2427         \hyperlink{winchar_8c_aedd7ad0350a58b8fca664bcbdc5f1f35}{flush\_glyph\_buffer}( \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[ \hyperlink{decl_8h_afa1f7dd312c4c1b72afe3d2c8c2af691}{WIN\_MAP} ]->win );
2428         \}
2429         \}
2430 
2431         clipx = savex;
2432         clipy = savey;
2433     clipymax = saveymax;
2434     clipxmax = savexmax;
2435 \textcolor{preprocessor}{#endif}
2436     \textcolor{keywordflow}{if} (on\_level(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a91637ade745880be0af66e4c0b0ff1c1}{uz0}, &\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz}) && !restoring && \hyperlink{decl_8h_a2ccad6e8fb93740ed50c6d9a8f72ce2f}{moves} > 1)
2437         (void) \hyperlink{display_8c_abf432a93fec9c94db8570f8a2c01468e}{doredraw}();
2438     \hyperlink{winchar_8c_aedd7ad0350a58b8fca664bcbdc5f1f35}{flush\_glyph\_buffer}( \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[ \hyperlink{decl_8h_afa1f7dd312c4c1b72afe3d2c8c2af691}{WIN\_MAP} ]->win );
2439     \}
2440     \hyperlink{winchar_8c_abaef652f2ecc14cf7257f91b8f5f0527}{reclip} = 0;
2441 \textcolor{preprocessor}{#endif}
2442 \}
\end{DoxyCode}
\hypertarget{winfuncs_8c_accd860a04364dbcccc55022ee713e9d4}{\index{winfuncs.\+c@{winfuncs.\+c}!amii\+\_\+create\+\_\+nhwindow@{amii\+\_\+create\+\_\+nhwindow}}
\index{amii\+\_\+create\+\_\+nhwindow@{amii\+\_\+create\+\_\+nhwindow}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{amii\+\_\+create\+\_\+nhwindow}]{\setlength{\rightskip}{0pt plus 5cm}amii\+\_\+create\+\_\+nhwindow (
\begin{DoxyParamCaption}
\item[{int}]{type}
\end{DoxyParamCaption}
)}}\label{winfuncs_8c_accd860a04364dbcccc55022ee713e9d4}


Definition at line 317 of file winfuncs.\+c.



References Abort(), amii\+\_\+\+Win\+Desc\+::active, alloc(), amii\+\_\+oldmsg, amii\+\_\+oldover, amii\+\_\+setclipped(), amii\+\_\+wins, ami\+I\+Display, bigscreen, buf, C\+\_\+\+B\+L\+A\+C\+K, C\+\_\+\+G\+R\+E\+Y\+B\+L\+U\+E, C\+\_\+\+W\+H\+I\+T\+E, amii\+\_\+\+Win\+Desc\+::canresp, C\+O, amii\+\_\+\+Win\+Desc\+::cols, amii\+\_\+\+Display\+Desc\+::cols, Console\+I\+O, amii\+\_\+\+Win\+Desc\+::curx, amii\+\_\+\+Win\+Desc\+::cury, amii\+\_\+\+Win\+Desc\+::data, F\+A\+L\+S\+E, fillhook, Hack\+Font, H\+A\+C\+K\+F\+O\+N\+T, Hack\+Port, Hack\+Screen, Height, amii\+\_\+\+Win\+Desc\+::hook, iflags, Kbd\+Buffered, Layer\+Fill\+Hook(), L\+I, amii\+\_\+\+Win\+Desc\+::maxcol, win\+\_\+setup\+::maxcol, amii\+\_\+\+Win\+Desc\+::maxrow, win\+\_\+setup\+::maxrow, M\+A\+X\+W\+I\+N, Menu\+Scroll, Menu\+Strip, amii\+\_\+\+Win\+Desc\+::morestr, instance\+\_\+flags\+::msg\+\_\+history, Msg\+Prop\+Scroll, Msg\+Scroll, mxsize, mysize, new\+\_\+wins, amii\+\_\+\+Win\+Desc\+::newwin, win\+\_\+setup\+::newwin, N\+H\+W\+\_\+\+B\+A\+S\+E, N\+H\+W\+\_\+\+M\+A\+P, N\+H\+W\+\_\+\+M\+E\+N\+U, N\+H\+W\+\_\+\+M\+E\+S\+S\+A\+G\+E, N\+H\+W\+\_\+\+O\+V\+E\+R, N\+H\+W\+\_\+\+S\+T\+A\+T\+U\+S, N\+H\+W\+\_\+\+T\+E\+X\+T, N\+U\+L\+L, Open\+Sh\+Window(), panic(), pr\+\_\+\+Window\+Ptr, Prop\+Scroll, raw\+\_\+print, amii\+\_\+\+Win\+Desc\+::resp, Rogue\+Font, amii\+\_\+\+Win\+Desc\+::rows, scrollmsg, Texts\+Font, T\+R\+U\+E, txbaseline, txheight, txwidth, amii\+\_\+\+Win\+Desc\+::type, type, wd, amii\+\_\+\+Win\+Desc\+::wflags, amii\+\_\+\+Win\+Desc\+::win, W\+I\+N\+\_\+\+B\+A\+S\+E, W\+I\+N\+\_\+\+E\+R\+R, W\+I\+N\+\_\+\+M\+A\+P, W\+I\+N\+\_\+\+M\+E\+S\+S\+A\+G\+E, W\+I\+N\+\_\+\+S\+T\+A\+T\+U\+S, wincnt, instance\+\_\+flags\+::window\+\_\+inited, amii\+\_\+\+Win\+Desc\+::wintags, wintags, W\+I\+N\+V\+E\+R\+S\+\_\+\+A\+M\+I\+I, W\+I\+N\+V\+E\+R\+S\+\_\+\+A\+M\+I\+V, amii\+\_\+\+Display\+Desc\+::xpix, and amii\+\_\+\+Display\+Desc\+::ypix.



Referenced by amii\+\_\+init\+\_\+nhwindows(), and amii\+\_\+putstr().


\begin{DoxyCode}
319 \{
320     \textcolor{keyword}{register} \textcolor{keyword}{struct }Window *w = \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
321     \textcolor{keyword}{register} \textcolor{keyword}{struct }NewWindow *nw = \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
322     \textcolor{keyword}{register} \textcolor{keyword}{struct }\hyperlink{structamii__WinDesc}{amii\_WinDesc} *\hyperlink{celib_8c_a083a2d27d21ee31bc447f1d4260b94ba}{wd} = \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
323     \textcolor{keyword}{struct }Window *mapwin = \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, *stwin = \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, *msgwin = \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
324     \textcolor{keyword}{register} \textcolor{keywordtype}{int} newid;
325     \textcolor{keywordtype}{int} maph, stath, scrfontysize;
326 
327     scrfontysize = \hyperlink{winext_8h_ad92207d95deab9f96588451c7ed34419}{HackScreen}->Font->ta\_YSize;
328 
329     \textcolor{comment}{/*}
330 \textcolor{comment}{     * Initial mapwindow height, this might change later in tilemode}
331 \textcolor{comment}{     * and low screen}
332 \textcolor{comment}{     */}
333     maph = ( 21 * \hyperlink{winfuncs_8c_afba9a8d2cd024c7010eae489091d11d6}{mxsize} ) + 2 + (\hyperlink{winext_8h_a686d780b14cde5aa754adc1baa2d6cfe}{bigscreen} ?
334     \hyperlink{winext_8h_ad92207d95deab9f96588451c7ed34419}{HackScreen}->WBorTop + \hyperlink{winext_8h_ad92207d95deab9f96588451c7ed34419}{HackScreen}->WBorBottom + scrfontysize + 1 : 0);
335 
336     \textcolor{comment}{/* Status window height, avoids having to calculate many times */}
337     stath = \hyperlink{winext_8h_afdf567214d70875e5c17efe40a02b53a}{txheight} * 2 + 2 + (\hyperlink{windefs_8h_aa0b90aaeb74b2488a95f0902cef09cbf}{WINVERS\_AMIV} || \hyperlink{winext_8h_a686d780b14cde5aa754adc1baa2d6cfe}{bigscreen} ?
338     \hyperlink{winext_8h_ad92207d95deab9f96588451c7ed34419}{HackScreen}->WBorTop + \hyperlink{winext_8h_ad92207d95deab9f96588451c7ed34419}{HackScreen}->WBorBottom +
339     ( \hyperlink{winext_8h_a686d780b14cde5aa754adc1baa2d6cfe}{bigscreen} ? scrfontysize + 1 : 0 ) : 0);
340 
341     \textcolor{keywordflow}{if}( \hyperlink{decl_8h_ae0690a38fd295760409995ce03b88329}{WIN\_STATUS} != \hyperlink{wintype_8h_a56d1f4f2e517a4e81be0b7593e35e681}{WIN\_ERR} && \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[ \hyperlink{decl_8h_ae0690a38fd295760409995ce03b88329}{WIN\_STATUS} ] )
342     stwin = \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[ \hyperlink{decl_8h_ae0690a38fd295760409995ce03b88329}{WIN\_STATUS} ]->\hyperlink{structamii__WinDesc_a9835faa4d66643cd889203e26edee8ae}{win};
343 
344     \textcolor{keywordflow}{if}( \hyperlink{decl_8h_a4a1cc9e693dbdfad3ea32b10ce19f337}{WIN\_MESSAGE} != \hyperlink{wintype_8h_a56d1f4f2e517a4e81be0b7593e35e681}{WIN\_ERR} && \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[ 
      \hyperlink{decl_8h_a4a1cc9e693dbdfad3ea32b10ce19f337}{WIN\_MESSAGE} ] )
345     msgwin = \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[ \hyperlink{decl_8h_a4a1cc9e693dbdfad3ea32b10ce19f337}{WIN\_MESSAGE} ]->\hyperlink{structamii__WinDesc_a9835faa4d66643cd889203e26edee8ae}{win};
346 
347     \textcolor{keywordflow}{if}( \hyperlink{decl_8h_afa1f7dd312c4c1b72afe3d2c8c2af691}{WIN\_MAP} != \hyperlink{wintype_8h_a56d1f4f2e517a4e81be0b7593e35e681}{WIN\_ERR} && \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[ \hyperlink{decl_8h_afa1f7dd312c4c1b72afe3d2c8c2af691}{WIN\_MAP} ] )
348     mapwin = \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[ \hyperlink{decl_8h_afa1f7dd312c4c1b72afe3d2c8c2af691}{WIN\_MAP} ]->\hyperlink{structamii__WinDesc_a9835faa4d66643cd889203e26edee8ae}{win};
349 
350     \textcolor{comment}{/* Create Port anytime that we need it */}
351 
352     \textcolor{keywordflow}{if}( \hyperlink{winext_8h_a392c49118e04b9257df71fca005829e0}{HackPort} == \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} )
353     \{
354     \hyperlink{winext_8h_a392c49118e04b9257df71fca005829e0}{HackPort} = CreateMsgPort();
355     \textcolor{keywordflow}{if}( !\hyperlink{winext_8h_a392c49118e04b9257df71fca005829e0}{HackPort} )
356         \hyperlink{txt2iff_8c_ab0824b6f5eb51db9371d2e9a222249d3}{panic}( \textcolor{stringliteral}{"no memory for msg port"} );
357     \}
358 
359     nw = &\hyperlink{winext_8h_a2b4f8d028c6b8c047e86aa0c49348f36}{new\_wins}[ \hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type} ].\hyperlink{structwin__setup_a274eccbc444f827a7db33a83c4f4ec70}{newwin};
360     nw->Width = \hyperlink{winami_8h_a0ecec29922f9b6272c2b5344ce40b283}{amiIDisplay}->\hyperlink{structamii__DisplayDesc_af95f6ae98ff1f0ccc96b06fdd296530e}{xpix};
361     nw->Screen = \hyperlink{winext_8h_ad92207d95deab9f96588451c7ed34419}{HackScreen};
362 
363     \textcolor{keywordflow}{if}( \hyperlink{windefs_8h_aa0b90aaeb74b2488a95f0902cef09cbf}{WINVERS\_AMIV} )
364     \{
365     nw->DetailPen = \hyperlink{windefs_8h_a67fead37547ff67ca0a269d712e87822}{C\_WHITE};
366     nw->BlockPen = \hyperlink{windefs_8h_ac90add32f96ca4f82528fd6195b47157}{C\_GREYBLUE};
367     \}
368     \textcolor{keywordflow}{else}
369     \{
370     nw->DetailPen = \hyperlink{windefs_8h_a67fead37547ff67ca0a269d712e87822}{C\_WHITE};
371     nw->BlockPen = \hyperlink{windefs_8h_a22a9543e081938a146a8bce60a84200a}{C\_BLACK};
372     \}
373 
374     \textcolor{keywordflow}{if} ( \hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type} == \hyperlink{macwin_8h_ab575e634e51462bf534b7ee541cefc46}{NHW\_BASE} ) \{
375     nw->LeftEdge = 0;
376     nw->TopEdge = \hyperlink{winext_8h_ad92207d95deab9f96588451c7ed34419}{HackScreen}->BarHeight+1;
377     nw->Width = \hyperlink{winext_8h_ad92207d95deab9f96588451c7ed34419}{HackScreen}->Width;
378     nw->Height = \hyperlink{winext_8h_ad92207d95deab9f96588451c7ed34419}{HackScreen}->Height - nw->TopEdge;
379     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( !\hyperlink{windefs_8h_aa0b90aaeb74b2488a95f0902cef09cbf}{WINVERS\_AMIV} && \hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type} == \hyperlink{wintype_8h_a756172f2e22a3d287cfaf6bc771df606}{NHW\_MAP} ) \{
380     nw->LeftEdge = 0;
381     nw->Height = maph;
382 
383     \textcolor{keywordflow}{if}( msgwin && stwin ) \{
384         nw->TopEdge = stwin->TopEdge - maph;
385     \} \textcolor{keywordflow}{else} \{
386         \hyperlink{txt2iff_8c_ab0824b6f5eb51db9371d2e9a222249d3}{panic}( \textcolor{stringliteral}{"msgwin and stwin must open before map"} );
387     \}
388     \textcolor{keywordflow}{if} (nw->TopEdge < 0)
389         \hyperlink{txt2iff_8c_ab0824b6f5eb51db9371d2e9a222249d3}{panic}( \textcolor{stringliteral}{"Too small screen to fit map"} );
390     \}
391     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( \hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type} == \hyperlink{wintype_8h_a756172f2e22a3d287cfaf6bc771df606}{NHW\_MAP} && \hyperlink{windefs_8h_aa0b90aaeb74b2488a95f0902cef09cbf}{WINVERS\_AMIV} )
392     \{
393     \textcolor{keyword}{struct }Window *w;
394 
395     w = \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[ \hyperlink{decl_8h_a4a1cc9e693dbdfad3ea32b10ce19f337}{WIN\_MESSAGE} ]->\hyperlink{structamii__WinDesc_a9835faa4d66643cd889203e26edee8ae}{win};
396     nw->LeftEdge = 0;
397     nw->TopEdge = w->TopEdge + w->Height;
398     nw->Width = \hyperlink{winami_8h_a0ecec29922f9b6272c2b5344ce40b283}{amiIDisplay}->\hyperlink{structamii__DisplayDesc_af95f6ae98ff1f0ccc96b06fdd296530e}{xpix} - nw->LeftEdge;
399 
400     w = \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[ \hyperlink{decl_8h_ae0690a38fd295760409995ce03b88329}{WIN\_STATUS} ]->\hyperlink{structamii__WinDesc_a9835faa4d66643cd889203e26edee8ae}{win};
401     nw->Height = w->TopEdge - nw->TopEdge;
402     nw->MaxHeight = 0xffff;
403     nw->MaxWidth = 0xffff;
404 
405     \textcolor{keywordflow}{if}( nw->TopEdge + nw->Height > \hyperlink{winami_8h_a0ecec29922f9b6272c2b5344ce40b283}{amiIDisplay}->\hyperlink{structamii__DisplayDesc_a24ab4ee31424d8d41235227d2d919b4e}{ypix} - 1 )
406         nw->Height = \hyperlink{winami_8h_a0ecec29922f9b6272c2b5344ce40b283}{amiIDisplay}->\hyperlink{structamii__DisplayDesc_a24ab4ee31424d8d41235227d2d919b4e}{ypix} - nw->TopEdge - 1;
407     \}
408     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( \hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type} == \hyperlink{wintype_8h_a8ed5b99ab7f854ace5f67f89aaae5404}{NHW\_STATUS} )
409     \{
410     \textcolor{keywordflow}{if}( !\hyperlink{windefs_8h_aa0b90aaeb74b2488a95f0902cef09cbf}{WINVERS\_AMIV} && ( WIN\_MAP != \hyperlink{wintype_8h_a56d1f4f2e517a4e81be0b7593e35e681}{WIN\_ERR} && \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[ WIN\_MAP ] ) )
411         w = \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[ \hyperlink{decl_8h_afa1f7dd312c4c1b72afe3d2c8c2af691}{WIN\_MAP} ]->\hyperlink{structamii__WinDesc_a9835faa4d66643cd889203e26edee8ae}{win};
412     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( \hyperlink{winami_8h_a5a32a2aaab2d6b517c4afde059621c35}{WIN\_BASE} != \hyperlink{wintype_8h_a56d1f4f2e517a4e81be0b7593e35e681}{WIN\_ERR} && \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[ \hyperlink{winami_8h_a5a32a2aaab2d6b517c4afde059621c35}{WIN\_BASE} ] )
413         w = \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[ \hyperlink{winami_8h_a5a32a2aaab2d6b517c4afde059621c35}{WIN\_BASE} ]->\hyperlink{structamii__WinDesc_a9835faa4d66643cd889203e26edee8ae}{win};
414     \textcolor{keywordflow}{else}
415         \hyperlink{txt2iff_8c_ab0824b6f5eb51db9371d2e9a222249d3}{panic}( \textcolor{stringliteral}{"No window to base STATUS location from"} );
416 
417     nw->Height = stath;
418     nw->TopEdge = \hyperlink{winami_8h_a0ecec29922f9b6272c2b5344ce40b283}{amiIDisplay}->\hyperlink{structamii__DisplayDesc_a24ab4ee31424d8d41235227d2d919b4e}{ypix} - nw->Height;
419     nw->LeftEdge = w->LeftEdge;
420 
421     \textcolor{keywordflow}{if}( nw->LeftEdge + nw->Width >= \hyperlink{winami_8h_a0ecec29922f9b6272c2b5344ce40b283}{amiIDisplay}->\hyperlink{structamii__DisplayDesc_af95f6ae98ff1f0ccc96b06fdd296530e}{xpix} )
422         nw->LeftEdge = 0;
423 
424     \textcolor{keywordflow}{if}( nw->Width >= \hyperlink{winami_8h_a0ecec29922f9b6272c2b5344ce40b283}{amiIDisplay}->\hyperlink{structamii__DisplayDesc_af95f6ae98ff1f0ccc96b06fdd296530e}{xpix} - nw->LeftEdge )
425         nw->Width = \hyperlink{winami_8h_a0ecec29922f9b6272c2b5344ce40b283}{amiIDisplay}->\hyperlink{structamii__DisplayDesc_af95f6ae98ff1f0ccc96b06fdd296530e}{xpix} - nw->LeftEdge;
426     \}
427     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( \hyperlink{windefs_8h_aa0b90aaeb74b2488a95f0902cef09cbf}{WINVERS\_AMIV} && \hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type} == \hyperlink{winami_8h_ade6ff25a1de12300d538d40c306f4b2a}{NHW\_OVER} )
428     \{
429     nw->Flags |= WINDOWSIZING|WINDOWDRAG|WINDOWCLOSE;
430     nw->IDCMPFlags |= CLOSEWINDOW;
431     \textcolor{comment}{/* Bring up window as half the width of the message window, and make}
432 \textcolor{comment}{     * the message window change to one half the width...}
433 \textcolor{comment}{     */}
434     \textcolor{keywordflow}{if}( \hyperlink{winfuncs_8c_a0a7c9ea82e04a8326edfd11f48eae0aa}{amii\_oldover}.MaxX != 0 )
435     \{
436         nw->LeftEdge = \hyperlink{winfuncs_8c_a0a7c9ea82e04a8326edfd11f48eae0aa}{amii\_oldover}.MinX;
437         nw->TopEdge = \hyperlink{winfuncs_8c_a0a7c9ea82e04a8326edfd11f48eae0aa}{amii\_oldover}.MinY;
438         nw->Width = \hyperlink{winfuncs_8c_a0a7c9ea82e04a8326edfd11f48eae0aa}{amii\_oldover}.MaxX;
439         nw->Height = \hyperlink{winfuncs_8c_a0a7c9ea82e04a8326edfd11f48eae0aa}{amii\_oldover}.MaxY;
440         ChangeWindowBox( \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[ WIN\_MESSAGE ]->win,
441             \hyperlink{winfuncs_8c_abf1a8ff4e563d7d084463a3b9c8a4171}{amii\_oldmsg}.MinX, \hyperlink{winfuncs_8c_abf1a8ff4e563d7d084463a3b9c8a4171}{amii\_oldmsg}.MinY,
442             \hyperlink{winfuncs_8c_abf1a8ff4e563d7d084463a3b9c8a4171}{amii\_oldmsg}.MaxX, \hyperlink{winfuncs_8c_abf1a8ff4e563d7d084463a3b9c8a4171}{amii\_oldmsg}.MaxY );
443     \}
444     \textcolor{keywordflow}{else}
445     \{
446         nw->LeftEdge = (\hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[ \hyperlink{decl_8h_a4a1cc9e693dbdfad3ea32b10ce19f337}{WIN\_MESSAGE} ]->\hyperlink{structamii__WinDesc_a9835faa4d66643cd889203e26edee8ae}{win}->Width*4)/9;
447         nw->TopEdge = \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[ \hyperlink{decl_8h_a4a1cc9e693dbdfad3ea32b10ce19f337}{WIN\_MESSAGE} ]->\hyperlink{structamii__WinDesc_a9835faa4d66643cd889203e26edee8ae}{win}->TopEdge;
448         nw->Width = \hyperlink{winami_8h_a0ecec29922f9b6272c2b5344ce40b283}{amiIDisplay}->\hyperlink{structamii__DisplayDesc_af95f6ae98ff1f0ccc96b06fdd296530e}{xpix} - nw->LeftEdge;
449         nw->Height = \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[ \hyperlink{decl_8h_a4a1cc9e693dbdfad3ea32b10ce19f337}{WIN\_MESSAGE} ]->\hyperlink{structamii__WinDesc_a9835faa4d66643cd889203e26edee8ae}{win}->Height;
450         SizeWindow( \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[ WIN\_MESSAGE ]->win,
451             nw->LeftEdge - \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[ WIN\_MESSAGE ]->\hyperlink{structamii__WinDesc_a9835faa4d66643cd889203e26edee8ae}{win}->Width, 0 );
452     \}
453     \}
454     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( \hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type} == \hyperlink{wintype_8h_ab3d471e84a363992b5a483392d0b2389}{NHW\_MESSAGE} )
455     \{
456     \textcolor{keywordflow}{if}( !\hyperlink{windefs_8h_aa0b90aaeb74b2488a95f0902cef09cbf}{WINVERS\_AMIV} && ( WIN\_MAP != \hyperlink{wintype_8h_a56d1f4f2e517a4e81be0b7593e35e681}{WIN\_ERR} && \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[ WIN\_MAP ] ) )
457         w = \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[ \hyperlink{decl_8h_afa1f7dd312c4c1b72afe3d2c8c2af691}{WIN\_MAP} ]->\hyperlink{structamii__WinDesc_a9835faa4d66643cd889203e26edee8ae}{win};
458     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( WIN\_BASE != \hyperlink{wintype_8h_a56d1f4f2e517a4e81be0b7593e35e681}{WIN\_ERR} && \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[ WIN\_BASE ] )
459         w = \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[ \hyperlink{winami_8h_a5a32a2aaab2d6b517c4afde059621c35}{WIN\_BASE} ]->\hyperlink{structamii__WinDesc_a9835faa4d66643cd889203e26edee8ae}{win};
460     \textcolor{keywordflow}{else}
461         \hyperlink{txt2iff_8c_ab0824b6f5eb51db9371d2e9a222249d3}{panic}( \textcolor{stringliteral}{"No window to base STATUS location from"} );
462 
463     nw->TopEdge = \hyperlink{winext_8h_a686d780b14cde5aa754adc1baa2d6cfe}{bigscreen} ? \hyperlink{winext_8h_ad92207d95deab9f96588451c7ed34419}{HackScreen}->BarHeight+1 : 0;
464 
465     \textcolor{comment}{/* Assume highest possible message window */}
466     nw->Height = \hyperlink{winext_8h_ad92207d95deab9f96588451c7ed34419}{HackScreen}->Height - nw->TopEdge - maph - stath;
467 
468     \textcolor{comment}{/* In tilemode we can cope with this */}
469     \textcolor{keywordflow}{if} (\hyperlink{windefs_8h_aa0b90aaeb74b2488a95f0902cef09cbf}{WINVERS\_AMIV} && nw->Height < 0)
470         nw->Height = 0;
471 
472     \textcolor{comment}{/* If in fontmode messagewindow is too small, open it with 3 lines}
473 \textcolor{comment}{       and overlap it with map */}
474     \textcolor{keywordflow}{if} (nw->Height < \hyperlink{winext_8h_afdf567214d70875e5c17efe40a02b53a}{txheight}+2) \{
475         nw->Height = \hyperlink{winext_8h_afdf567214d70875e5c17efe40a02b53a}{txheight}*4 + 3 + \hyperlink{winext_8h_ad92207d95deab9f96588451c7ed34419}{HackScreen}->WBorTop + 
      \hyperlink{winext_8h_ad92207d95deab9f96588451c7ed34419}{HackScreen}->WBorBottom;
476     \}
477 
478     \textcolor{keywordflow}{if} ((nw->Height-2)/\hyperlink{winext_8h_afdf567214d70875e5c17efe40a02b53a}{txheight} < 3) \{
479         \hyperlink{winext_8h_a3b783f5f077454f156585be54b99746b}{scrollmsg} = 0;
480         nw->Title = 0;
481     \} \textcolor{keywordflow}{else} \{
482         nw->FirstGadget = &\hyperlink{winext_8h_a7714cdb5ca9e060cae6bfc059f1973f4}{MsgScroll};
483         nw->Flags |= WINDOWSIZING|WINDOWDRAG;
484         nw->Flags &= ~BORDERLESS;
485 
486         \textcolor{keywordflow}{if}( \hyperlink{windefs_8h_aa0b90aaeb74b2488a95f0902cef09cbf}{WINVERS\_AMIV} || nw->Height == 0) \{
487         \textcolor{keywordflow}{if}( \hyperlink{windefs_8h_aa0b90aaeb74b2488a95f0902cef09cbf}{WINVERS\_AMIV} ) \{
488             nw->Height = \hyperlink{winext_8h_a5ba89c525a49d1190a1a5ecdf5f65aa6}{TextsFont}->tf\_YSize + \hyperlink{winext_8h_ad92207d95deab9f96588451c7ed34419}{HackScreen}->WBorTop + 3 +
489                 \hyperlink{winext_8h_ad92207d95deab9f96588451c7ed34419}{HackScreen}->WBorBottom;
490             \textcolor{keywordflow}{if}( \hyperlink{winext_8h_a686d780b14cde5aa754adc1baa2d6cfe}{bigscreen} )
491             nw->Height += ( \hyperlink{winext_8h_afdf567214d70875e5c17efe40a02b53a}{txheight} * 6 );
492             \textcolor{keywordflow}{else}
493             nw->Height += ( \hyperlink{winext_8h_afdf567214d70875e5c17efe40a02b53a}{txheight} * 3 );
494         \}
495         \textcolor{keywordflow}{else}
496         \{
497             nw->Height = \hyperlink{winext_8h_ad92207d95deab9f96588451c7ed34419}{HackScreen}->Height - nw->TopEdge - stath - maph;
498         \}
499         \}
500     \}
501 
502     \textcolor{comment}{/* Do we have room for larger message window ?}
503 \textcolor{comment}{     * This is possible if we can show full height map in tile}
504 \textcolor{comment}{     * mode with default scaling.}
505 \textcolor{comment}{     */}
506     \textcolor{keywordflow}{if} (nw->Height + stath + maph < HackScreen->\hyperlink{txt2iff_8c_aaadefba794062a2ca7e58ceb10b955a1}{Height} - nw->TopEdge )
507         nw->Height = \hyperlink{winext_8h_ad92207d95deab9f96588451c7ed34419}{HackScreen}->Height - nw->TopEdge - 1 - maph - stath;
508 
509 \textcolor{preprocessor}{#ifdef  INTUI\_NEW\_LOOK}
510     \textcolor{keywordflow}{if}( IntuitionBase->LibNode.lib\_Version >= 37 )
511     \{
512         \hyperlink{winext_8h_acdba525e6ace0e1086dd878da6fd4cd7}{MsgPropScroll}.Flags |= PROPNEWLOOK;
513         \hyperlink{winext_8h_ac03b382c1a8a8d6748fc7bfe920e0ec2}{PropScroll}.Flags |= PROPNEWLOOK;
514     \}
515 \textcolor{preprocessor}{#endif}
516     \}
517 
518     nw->IDCMPFlags |= MENUPICK;
519 
520     \textcolor{comment}{/* Check if there is "Room" for all this stuff... */}
521     \textcolor{keywordflow}{if}( ( \hyperlink{windefs_8h_aa0b90aaeb74b2488a95f0902cef09cbf}{WINVERS\_AMIV} || \hyperlink{winext_8h_a686d780b14cde5aa754adc1baa2d6cfe}{bigscreen} ) &&
522     \hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type} != \hyperlink{macwin_8h_ab575e634e51462bf534b7ee541cefc46}{NHW\_BASE} )
523     \{
524     nw->Flags &= ~( BORDERLESS | BACKDROP );
525 
526     \textcolor{keywordflow}{if}( \hyperlink{windefs_8h_aa0b90aaeb74b2488a95f0902cef09cbf}{WINVERS\_AMIV} )
527     \{
528         \textcolor{keywordflow}{if}( \hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type} == \hyperlink{wintype_8h_a8ed5b99ab7f854ace5f67f89aaae5404}{NHW\_STATUS} )
529         \{
530         nw->Flags &= ~( WINDOWDRAG | WINDOWDEPTH | SIZEBRIGHT | WINDOWSIZING );
531         nw->IDCMPFlags &= ~NEWSIZE;
532         \}
533         \textcolor{keywordflow}{else}
534         \{
535         nw->Flags |= ( WINDOWDRAG | WINDOWDEPTH | SIZEBRIGHT | WINDOWSIZING );
536         nw->IDCMPFlags |= NEWSIZE;
537         \}
538     \}
539     \textcolor{keywordflow}{else}
540     \{
541         \textcolor{keywordflow}{if}( \hyperlink{winext_8h_ad92207d95deab9f96588451c7ed34419}{HackScreen}->Width < 657 )
542         \{
543         nw->Flags |= ( WINDOWDRAG | WINDOWDEPTH );
544         \}
545         \textcolor{keywordflow}{else}
546         \{
547         nw->Flags |= ( WINDOWDRAG | WINDOWDEPTH | SIZEBRIGHT );
548         \}
549     \}
550     \}
551 
552     \textcolor{keywordflow}{if} ( \hyperlink{windefs_8h_adf1601afd1e2d6555110cd79bbbf4705}{WINVERS\_AMII} && \hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type} == \hyperlink{wintype_8h_a756172f2e22a3d287cfaf6bc771df606}{NHW\_MAP} )
553     nw->Flags &= ~WINDOWSIZING;
554 
555     \textcolor{keywordflow}{if} ( \hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type} == \hyperlink{wintype_8h_ab3d471e84a363992b5a483392d0b2389}{NHW\_MESSAGE} && \hyperlink{winext_8h_a3b783f5f077454f156585be54b99746b}{scrollmsg} ) \{
556     nw->Flags |= WINDOWDRAG|WINDOWDEPTH|SIZEBRIGHT|WINDOWSIZING;
557     nw->Flags &= ~BORDERLESS;
558     \}
559 
560     \textcolor{comment}{/* No titles on a hires only screen except for messagewindow */}
561     \textcolor{keywordflow}{if}( !(\hyperlink{windefs_8h_aa0b90aaeb74b2488a95f0902cef09cbf}{WINVERS\_AMIV} && \hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type} == \hyperlink{wintype_8h_a756172f2e22a3d287cfaf6bc771df606}{NHW\_MAP}) && !\hyperlink{winext_8h_a686d780b14cde5aa754adc1baa2d6cfe}{bigscreen} && 
      \hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type} != \hyperlink{wintype_8h_ab3d471e84a363992b5a483392d0b2389}{NHW\_MESSAGE} )
562     nw->Title = 0;
563 
564     wd = (\textcolor{keyword}{struct} \hyperlink{structamii__WinDesc}{amii\_WinDesc} *)\hyperlink{txt2iff_8c_ae273cbdce4cd64a076220ad06c41a5a1}{alloc}(\textcolor{keyword}{sizeof}(\textcolor{keyword}{struct} 
      \hyperlink{structamii__WinDesc}{amii\_WinDesc}));
565     memset( wd, 0, \textcolor{keyword}{sizeof}( \textcolor{keyword}{struct} \hyperlink{structamii__WinDesc}{amii\_WinDesc} ) );
566 
567     \textcolor{comment}{/* Both, since user may have changed the pen settings so respect those */}
568     \textcolor{keywordflow}{if}( \hyperlink{windefs_8h_adf1601afd1e2d6555110cd79bbbf4705}{WINVERS\_AMII} || \hyperlink{windefs_8h_aa0b90aaeb74b2488a95f0902cef09cbf}{WINVERS\_AMIV} )
569     \{
570     \textcolor{comment}{/* Special backfill for these types of layers */}
571     \textcolor{keywordflow}{switch}( \hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type} )
572     \{
573     \textcolor{keywordflow}{case} \hyperlink{wintype_8h_ab3d471e84a363992b5a483392d0b2389}{NHW\_MESSAGE}:
574     \textcolor{keywordflow}{case} \hyperlink{wintype_8h_a8ed5b99ab7f854ace5f67f89aaae5404}{NHW\_STATUS}:
575     \textcolor{keywordflow}{case} \hyperlink{wintype_8h_a7e2bcc8531c4c62e8d8f1c5279c5789b}{NHW\_TEXT}:
576     \textcolor{keywordflow}{case} \hyperlink{wintype_8h_a60a03e50aaeef35cd7cd3bf6f790791c}{NHW\_MENU}:
577     \textcolor{keywordflow}{case} \hyperlink{macwin_8h_ab575e634e51462bf534b7ee541cefc46}{NHW\_BASE}:
578     \textcolor{keywordflow}{case} \hyperlink{winami_8h_ade6ff25a1de12300d538d40c306f4b2a}{NHW\_OVER}:
579     \textcolor{keywordflow}{case} \hyperlink{wintype_8h_a756172f2e22a3d287cfaf6bc771df606}{NHW\_MAP}:
580         \textcolor{keywordflow}{if}( wd )
581         \{
582 \textcolor{preprocessor}{#ifdef \_\_GNUC\_\_}
583         \hyperlink{winext_8h_a6ff9485e071d0a750346503394100a89}{fillhook}.h\_Entry = (\textcolor{keywordtype}{void} *)&\hyperlink{winext_8h_a9e524533351c8e043ccc43941ad1055f}{LayerFillHook};
584 \textcolor{preprocessor}{#else}
585         \hyperlink{winext_8h_a6ff9485e071d0a750346503394100a89}{fillhook}.h\_Entry = (\hyperlink{def__os2_8h_af632da489ebc3708ec3ab6791ee53fa4}{ULONG}(*)())\hyperlink{winext_8h_a9e524533351c8e043ccc43941ad1055f}{LayerFillHook};
586 \textcolor{preprocessor}{#endif}
587         \hyperlink{winext_8h_a6ff9485e071d0a750346503394100a89}{fillhook}.h\_Data = (\textcolor{keywordtype}{void} *)\hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type};
588         \hyperlink{winext_8h_a6ff9485e071d0a750346503394100a89}{fillhook}.h\_SubEntry = 0;
589         wd->\hyperlink{structamii__WinDesc_a95adbcba37257f02f7d9b3e5ef4c8411}{hook} = \hyperlink{txt2iff_8c_ae273cbdce4cd64a076220ad06c41a5a1}{alloc}( \textcolor{keyword}{sizeof}( \hyperlink{winext_8h_a6ff9485e071d0a750346503394100a89}{fillhook} ) );
590         memcpy( wd->\hyperlink{structamii__WinDesc_a95adbcba37257f02f7d9b3e5ef4c8411}{hook}, &\hyperlink{winext_8h_a6ff9485e071d0a750346503394100a89}{fillhook}, \textcolor{keyword}{sizeof}( \hyperlink{winext_8h_a6ff9485e071d0a750346503394100a89}{fillhook} ) );
591         memcpy( wd->\hyperlink{structamii__WinDesc_a982df47148570e92162c13c1d158ef1b}{wintags}, \hyperlink{winext_8h_af89b1b4ca5e09b3b019caabfbf2243cd}{wintags}, \textcolor{keyword}{sizeof}( wd->\hyperlink{structamii__WinDesc_a982df47148570e92162c13c1d158ef1b}{wintags}) );
592         wd->\hyperlink{structamii__WinDesc_a982df47148570e92162c13c1d158ef1b}{wintags}[0].ti\_Data = (long)wd->\hyperlink{structamii__WinDesc_a95adbcba37257f02f7d9b3e5ef4c8411}{hook};
593         nw->Extension = (\textcolor{keywordtype}{void} *)wd->\hyperlink{structamii__WinDesc_a982df47148570e92162c13c1d158ef1b}{wintags};
594         \}
595         \textcolor{keywordflow}{break};
596     \}
597     \}
598 
599     \textcolor{comment}{/* Don't open MENU or TEXT windows yet */}
600 
601     \textcolor{keywordflow}{if}( \hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type} == \hyperlink{wintype_8h_a60a03e50aaeef35cd7cd3bf6f790791c}{NHW\_MENU} || \hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type} == \hyperlink{wintype_8h_a7e2bcc8531c4c62e8d8f1c5279c5789b}{NHW\_TEXT} )
602     w = \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
603     \textcolor{keywordflow}{else}
604     w=\hyperlink{winproto_8h_a4fbda1b274fbd7f990be789cfbb8fd52}{OpenShWindow}( (\textcolor{keywordtype}{void} *)nw );
605 
606     \textcolor{keywordflow}{if}( w == \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} && \hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type} != \hyperlink{wintype_8h_a60a03e50aaeef35cd7cd3bf6f790791c}{NHW\_MENU} && \hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type} != \hyperlink{wintype_8h_a7e2bcc8531c4c62e8d8f1c5279c5789b}{NHW\_TEXT} )
607     \{
608     \textcolor{keywordtype}{char} \hyperlink{xpm2iff_8c_a6f4b9854141692d23b0d072176044ca6}{buf}[ 100 ];
609 
610     sprintf( buf, \textcolor{stringliteral}{"nw type (%d) dims l: %d, t: %d, w: %d, h: %d"},
611         \hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type},
612         nw->LeftEdge, nw->TopEdge,
613         nw->Width, nw->Height );
614     \hyperlink{winprocs_8h_a49dffdcae248bae8b370f76b434ce744}{raw\_print}( buf );
615     \hyperlink{txt2iff_8c_ab0824b6f5eb51db9371d2e9a222249d3}{panic}(\textcolor{stringliteral}{"bad openwin %d"},\hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type});
616     \}
617 
618     \textcolor{comment}{/* Check for an empty slot */}
619 
620     \textcolor{keywordflow}{for}(newid = 0; newid<\hyperlink{winami_8h_a0882b20213d1ebf14d860e611d06cf36}{MAXWIN} + 1; newid++)
621     \{
622     \textcolor{keywordflow}{if}(\hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[newid] == 0)
623         \textcolor{keywordflow}{break};
624     \}
625 
626     \textcolor{keywordflow}{if}(newid==MAXWIN+1)
627     \hyperlink{txt2iff_8c_ab0824b6f5eb51db9371d2e9a222249d3}{panic}(\textcolor{stringliteral}{"time to write re-alloc code\(\backslash\)n"});
628 
629     \textcolor{comment}{/* Set wincnt accordingly */}
630 
631     \textcolor{keywordflow}{if}( newid > \hyperlink{winext_8h_a30dc3fadf33c084cd14b5632ce7a4002}{wincnt} )
632     \hyperlink{winext_8h_a30dc3fadf33c084cd14b5632ce7a4002}{wincnt} = newid;
633 
634     \textcolor{comment}{/* Do common initialization */}
635 
636     \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[newid] = \hyperlink{celib_8c_a083a2d27d21ee31bc447f1d4260b94ba}{wd};
637 
638     wd->\hyperlink{structamii__WinDesc_a96e2d1e26527cec8fe44903009a365a8}{newwin} = \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
639     wd->\hyperlink{structamii__WinDesc_a9835faa4d66643cd889203e26edee8ae}{win} = w;
640     wd->\hyperlink{structamii__WinDesc_ab90130f7f09b474842877b2f71d708e0}{type} = \hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type};
641     wd->\hyperlink{structamii__WinDesc_a4400afb6488c6a7b1f70f27ee0371963}{wflags} = 0;
642     wd->\hyperlink{structamii__WinDesc_a0977c321f7baae08763a4f998c2e2c3b}{active} = \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
643     wd->\hyperlink{structamii__WinDesc_a4ae862475cf0a2f6aed98394d3ac12bd}{curx}=wd->\hyperlink{structamii__WinDesc_aee07cf405ea0e78eb6b82c339360a0f8}{cury} = 0;
644     wd->\hyperlink{structamii__WinDesc_a7c77cae36fa87a80e7c5b0cf9ed8284f}{resp} = wd->\hyperlink{structamii__WinDesc_ac8c4b6085649b349a4d36d38d3c4344d}{canresp} = wd->\hyperlink{structamii__WinDesc_a18f1ba88dadd6f00144ad9f0b16a2b20}{morestr} = 0;   \textcolor{comment}{/* CHECK THESE */}
645     wd->\hyperlink{structamii__WinDesc_a1ca7af4b595bf7bb077ed78546548670}{maxrow} = \hyperlink{winext_8h_a2b4f8d028c6b8c047e86aa0c49348f36}{new\_wins}[\hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type}].\hyperlink{structwin__setup_aa8dc4df6c1d1b3ba409d0b81d3bb3f94}{maxrow};
646     wd->\hyperlink{structamii__WinDesc_a7abaf7568c45c6f6efabdfdc13164a4c}{maxcol} = \hyperlink{winext_8h_a2b4f8d028c6b8c047e86aa0c49348f36}{new\_wins}[\hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type}].\hyperlink{structwin__setup_a672999163c8dad3dd4e1a68bc8ec2604}{maxcol};
647 
648     \textcolor{keywordflow}{if}( \hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type} != \hyperlink{wintype_8h_a7e2bcc8531c4c62e8d8f1c5279c5789b}{NHW\_TEXT} && \hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type} != \hyperlink{wintype_8h_a60a03e50aaeef35cd7cd3bf6f790791c}{NHW\_MENU} )
649     \{
650     \textcolor{keywordflow}{if}( \hyperlink{winext_8h_a5ba89c525a49d1190a1a5ecdf5f65aa6}{TextsFont} && ( \hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type} == \hyperlink{wintype_8h_ab3d471e84a363992b5a483392d0b2389}{NHW\_MESSAGE} || \hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type} == 
      \hyperlink{wintype_8h_a8ed5b99ab7f854ace5f67f89aaae5404}{NHW\_STATUS} ) )
651     \{
652         SetFont(w->RPort, \hyperlink{winext_8h_a5ba89c525a49d1190a1a5ecdf5f65aa6}{TextsFont});
653         \hyperlink{winext_8h_afdf567214d70875e5c17efe40a02b53a}{txheight} = w->RPort->TxHeight;
654         \hyperlink{winext_8h_a017c6ef07f078c21f903ea8942bb43b3}{txwidth} = w->RPort->TxWidth;
655         \hyperlink{winext_8h_aceba433f8539ff3b9ea76a9484290a5a}{txbaseline} = w->RPort->TxBaseline;
656         \textcolor{keywordflow}{if}( \hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type} == \hyperlink{wintype_8h_ab3d471e84a363992b5a483392d0b2389}{NHW\_MESSAGE} )
657         \{
658         \textcolor{keywordflow}{if} (\hyperlink{winext_8h_a3b783f5f077454f156585be54b99746b}{scrollmsg} )
659         \{
660             \textcolor{keywordflow}{if}( \hyperlink{windefs_8h_aa0b90aaeb74b2488a95f0902cef09cbf}{WINVERS\_AMIV} )
661             \{
662             WindowLimits( w, 100, w->BorderTop +
663                 w->BorderBottom +
664                 ((\hyperlink{winext_8h_afdf567214d70875e5c17efe40a02b53a}{txheight}+1)*2) + 1, 0, 0 );
665             \}
666             \textcolor{keywordflow}{else}
667             \{
668             WindowLimits( w, w->Width, w->BorderTop +
669                 w->BorderBottom +
670                 ((\hyperlink{winext_8h_afdf567214d70875e5c17efe40a02b53a}{txheight}+1)*2) + 1, 0, 0 );
671             \}
672         \}
673         \textcolor{keywordflow}{else}
674         \{
675             WindowLimits( w, w->Width, w->BorderTop +
676                 w->BorderBottom +
677                 \hyperlink{winext_8h_afdf567214d70875e5c17efe40a02b53a}{txheight} + 2, 0, 0 );
678         \}
679         \}
680     \}
681     \textcolor{keywordflow}{if} ( \hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type} != \hyperlink{wintype_8h_a756172f2e22a3d287cfaf6bc771df606}{NHW\_MAP}) \{
682         SetFont(w->RPort, \hyperlink{winext_8h_a5ba89c525a49d1190a1a5ecdf5f65aa6}{TextsFont});
683     \}
684 \textcolor{preprocessor}{#ifdef HACKFONT}
685     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( \hyperlink{winext_8h_addd84e576afd1379e2aa7fa9921de0a5}{HackFont} )
686         SetFont(w->RPort, \hyperlink{winext_8h_addd84e576afd1379e2aa7fa9921de0a5}{HackFont});
687 \textcolor{preprocessor}{#endif}
688     \}
689 
690     \textcolor{comment}{/* Text and menu windows are not opened yet */}
691     \textcolor{keywordflow}{if}( w )
692     \{
693     wd->\hyperlink{structamii__WinDesc_a465b4a9c04b3c325f2af2722aac9c5f3}{rows} = ( w->Height - w->BorderTop -
694         w->BorderBottom - 2 ) / w->RPort->TxHeight;
695     wd->\hyperlink{structamii__WinDesc_a8ef9da0197015f48920307f3692f2a54}{cols} = ( w->Width - w->BorderLeft -
696         w->BorderRight - 2 ) / w->RPort->TxWidth;
697     \}
698 
699     \textcolor{comment}{/* Okay, now do the individual type initialization */}
700 
701     \textcolor{keywordflow}{switch}(\hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type})
702     \{
703     \textcolor{comment}{/* History lines for MESSAGE windows are stored in cw->data[?].}
704 \textcolor{comment}{     * maxcol and maxrow are used as cursors.  maxrow is the count}
705 \textcolor{comment}{     * of the number of history lines stored.  maxcol is the cursor}
706 \textcolor{comment}{     * to the last line that was displayed by ^P.}
707 \textcolor{comment}{     */}
708     \textcolor{keywordflow}{case} \hyperlink{wintype_8h_ab3d471e84a363992b5a483392d0b2389}{NHW\_MESSAGE}:
709         SetMenuStrip(w, \hyperlink{winext_8h_a53bb7c231eb4b4a1df2f0a7e3b21786a}{MenuStrip});
710         \hyperlink{winext_8h_a7714cdb5ca9e060cae6bfc059f1973f4}{MsgScroll}.TopEdge = \hyperlink{winext_8h_ad92207d95deab9f96588451c7ed34419}{HackScreen}->WBorTop + scrfontysize + 1;
711         \hyperlink{flag_8h_ae9cd54937dcb00432131e49e5e324075}{iflags}.\hyperlink{structinstance__flags_adbf4e331046e9ace346e832fc8a59074}{msg\_history} = wd->\hyperlink{structamii__WinDesc_a465b4a9c04b3c325f2af2722aac9c5f3}{rows}*10;
712         \textcolor{keywordflow}{if} (\hyperlink{flag_8h_ae9cd54937dcb00432131e49e5e324075}{iflags}.\hyperlink{structinstance__flags_adbf4e331046e9ace346e832fc8a59074}{msg\_history} < 40)
713         \hyperlink{flag_8h_ae9cd54937dcb00432131e49e5e324075}{iflags}.\hyperlink{structinstance__flags_adbf4e331046e9ace346e832fc8a59074}{msg\_history} = 40;
714         \textcolor{keywordflow}{if} (\hyperlink{flag_8h_ae9cd54937dcb00432131e49e5e324075}{iflags}.\hyperlink{structinstance__flags_adbf4e331046e9ace346e832fc8a59074}{msg\_history} > 400)
715         \hyperlink{flag_8h_ae9cd54937dcb00432131e49e5e324075}{iflags}.\hyperlink{structinstance__flags_adbf4e331046e9ace346e832fc8a59074}{msg\_history} = 400;
716         \hyperlink{flag_8h_ae9cd54937dcb00432131e49e5e324075}{iflags}.\hyperlink{structinstance__flags_a2fc6c78c4c5f6e1d0027ac575135426f}{window\_inited}=\hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
717         wd->\hyperlink{structamii__WinDesc_a1be96ba5842aef93cb36e73173277ad6}{data} = (\textcolor{keywordtype}{char} **)\hyperlink{txt2iff_8c_ae273cbdce4cd64a076220ad06c41a5a1}{alloc}( \hyperlink{flag_8h_ae9cd54937dcb00432131e49e5e324075}{iflags}.\hyperlink{structinstance__flags_adbf4e331046e9ace346e832fc8a59074}{msg\_history}*\textcolor{keyword}{sizeof}( \textcolor{keywordtype}{char} * ) );
718         memset( wd->\hyperlink{structamii__WinDesc_a1be96ba5842aef93cb36e73173277ad6}{data}, 0, \hyperlink{flag_8h_ae9cd54937dcb00432131e49e5e324075}{iflags}.\hyperlink{structinstance__flags_adbf4e331046e9ace346e832fc8a59074}{msg\_history} * \textcolor{keyword}{sizeof}( \textcolor{keywordtype}{char} * ) );
719         wd->\hyperlink{structamii__WinDesc_a1ca7af4b595bf7bb077ed78546548670}{maxrow} = wd->\hyperlink{structamii__WinDesc_a7abaf7568c45c6f6efabdfdc13164a4c}{maxcol} = 0;
720         \textcolor{comment}{/* Indicate that we have not positioned the cursor yet */}
721         wd->\hyperlink{structamii__WinDesc_a4ae862475cf0a2f6aed98394d3ac12bd}{curx} = -1;
722         \textcolor{keywordflow}{break};
723 
724         \textcolor{comment}{/* A MENU contains a list of lines in wd->data[?].  These}
725 \textcolor{comment}{         * lines are created in amii\_putstr() by reallocating the size}
726 \textcolor{comment}{         * of wd->data to hold enough (char *)'s.  wd->rows is the}
727 \textcolor{comment}{         * number of (char *)'s allocated.  wd->maxrow is the number}
728 \textcolor{comment}{         * used.  wd->maxcol is used to track how wide the menu needs}
729 \textcolor{comment}{         * to be.  wd->resp[x] contains the characters that correspond}
730 \textcolor{comment}{         * to selecting wd->data[x].  wd->resp[x] corresponds to}
731 \textcolor{comment}{         * wd->data[x] for any x. Elements of wd->data[?] that are not}
732 \textcolor{comment}{         * valid selections have the corresponding element of}
733 \textcolor{comment}{         * wd->resp[] set to a value of '\(\backslash\)01';  i.e. a ^A which is}
734 \textcolor{comment}{         * not currently a valid keystroke for responding to any}
735 \textcolor{comment}{         * MENU or TEXT window.}
736 \textcolor{comment}{         */}
737     \textcolor{keywordflow}{case} \hyperlink{wintype_8h_a60a03e50aaeef35cd7cd3bf6f790791c}{NHW\_MENU}:
738         \hyperlink{winext_8h_a0be771971036f589c1013474c1fcd264}{MenuScroll}.TopEdge = \hyperlink{winext_8h_ad92207d95deab9f96588451c7ed34419}{HackScreen}->WBorTop + scrfontysize + 1;
739         wd->\hyperlink{structamii__WinDesc_a7c77cae36fa87a80e7c5b0cf9ed8284f}{resp}=(\textcolor{keywordtype}{char}*)\hyperlink{txt2iff_8c_ae273cbdce4cd64a076220ad06c41a5a1}{alloc}(256);
740         wd->\hyperlink{structamii__WinDesc_a7c77cae36fa87a80e7c5b0cf9ed8284f}{resp}[0]=0;
741         wd->\hyperlink{structamii__WinDesc_a465b4a9c04b3c325f2af2722aac9c5f3}{rows} = wd->\hyperlink{structamii__WinDesc_a1ca7af4b595bf7bb077ed78546548670}{maxrow} = 0;
742         wd->\hyperlink{structamii__WinDesc_a8ef9da0197015f48920307f3692f2a54}{cols} = wd->\hyperlink{structamii__WinDesc_a7abaf7568c45c6f6efabdfdc13164a4c}{maxcol} = 0;
743         wd->\hyperlink{structamii__WinDesc_a1be96ba5842aef93cb36e73173277ad6}{data} = \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
744         \textcolor{keywordflow}{break};
745 
746         \textcolor{comment}{/* See the explanation of MENU above.  Except, wd->resp[] is not}
747 \textcolor{comment}{         * used for TEXT windows since there is no selection of a}
748 \textcolor{comment}{         * a line performed/allowed.  The window is always full}
749 \textcolor{comment}{         * screen width.}
750 \textcolor{comment}{         */}
751     \textcolor{keywordflow}{case} \hyperlink{wintype_8h_a7e2bcc8531c4c62e8d8f1c5279c5789b}{NHW\_TEXT}:
752         \hyperlink{winext_8h_a0be771971036f589c1013474c1fcd264}{MenuScroll}.TopEdge = \hyperlink{winext_8h_ad92207d95deab9f96588451c7ed34419}{HackScreen}->WBorTop + scrfontysize + 1;
753         wd->\hyperlink{structamii__WinDesc_a465b4a9c04b3c325f2af2722aac9c5f3}{rows} = wd->\hyperlink{structamii__WinDesc_a1ca7af4b595bf7bb077ed78546548670}{maxrow} = 0;
754         wd->\hyperlink{structamii__WinDesc_a8ef9da0197015f48920307f3692f2a54}{cols} = wd->\hyperlink{structamii__WinDesc_a7abaf7568c45c6f6efabdfdc13164a4c}{maxcol} = \hyperlink{winami_8h_a0ecec29922f9b6272c2b5344ce40b283}{amiIDisplay}->\hyperlink{structamii__DisplayDesc_a3f8803e91afede713625203f1cb22b80}{cols};
755         wd->\hyperlink{structamii__WinDesc_a1be96ba5842aef93cb36e73173277ad6}{data} = \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
756         wd->\hyperlink{structamii__WinDesc_a18f1ba88dadd6f00144ad9f0b16a2b20}{morestr} = \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
757         \textcolor{keywordflow}{break};
758 
759         \textcolor{comment}{/* The status window has only two lines.  These are stored in}
760 \textcolor{comment}{         * wd->data[], and here we allocate the space for them.}
761 \textcolor{comment}{         */}
762     \textcolor{keywordflow}{case} \hyperlink{wintype_8h_a8ed5b99ab7f854ace5f67f89aaae5404}{NHW\_STATUS}:
763         SetMenuStrip(w, \hyperlink{winext_8h_a53bb7c231eb4b4a1df2f0a7e3b21786a}{MenuStrip});
764         \textcolor{comment}{/* wd->cols is the number of characters which fit across the}
765 \textcolor{comment}{         * screen.}
766 \textcolor{comment}{         */}
767         wd->\hyperlink{structamii__WinDesc_a1be96ba5842aef93cb36e73173277ad6}{data}=(\textcolor{keywordtype}{char} **)\hyperlink{txt2iff_8c_ae273cbdce4cd64a076220ad06c41a5a1}{alloc}(3*\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{char} *));
768         wd->\hyperlink{structamii__WinDesc_a1be96ba5842aef93cb36e73173277ad6}{data}[0] = (\textcolor{keywordtype}{char} *)\hyperlink{txt2iff_8c_ae273cbdce4cd64a076220ad06c41a5a1}{alloc}(wd->\hyperlink{structamii__WinDesc_a8ef9da0197015f48920307f3692f2a54}{cols} + 10);
769         wd->\hyperlink{structamii__WinDesc_a1be96ba5842aef93cb36e73173277ad6}{data}[1] = (\textcolor{keywordtype}{char} *)\hyperlink{txt2iff_8c_ae273cbdce4cd64a076220ad06c41a5a1}{alloc}(wd->\hyperlink{structamii__WinDesc_a8ef9da0197015f48920307f3692f2a54}{cols} + 10);
770         wd->\hyperlink{structamii__WinDesc_a1be96ba5842aef93cb36e73173277ad6}{data}[2] = \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
771         \textcolor{keywordflow}{break};
772 
773         \textcolor{comment}{/* NHW\_OVER does not use wd->data[] or the other text}
774 \textcolor{comment}{         * manipulating members of the amii\_WinDesc structure.}
775 \textcolor{comment}{         */}
776     \textcolor{keywordflow}{case} \hyperlink{winami_8h_ade6ff25a1de12300d538d40c306f4b2a}{NHW\_OVER}:
777         SetMenuStrip(w, \hyperlink{winext_8h_a53bb7c231eb4b4a1df2f0a7e3b21786a}{MenuStrip});
778         \textcolor{keywordflow}{break};
779 
780         \textcolor{comment}{/* NHW\_MAP does not use wd->data[] or the other text}
781 \textcolor{comment}{         * manipulating members of the amii\_WinDesc structure.}
782 \textcolor{comment}{         */}
783     \textcolor{keywordflow}{case} \hyperlink{wintype_8h_a756172f2e22a3d287cfaf6bc771df606}{NHW\_MAP}:
784         SetMenuStrip(w, \hyperlink{winext_8h_a53bb7c231eb4b4a1df2f0a7e3b21786a}{MenuStrip});
785         \textcolor{keywordflow}{if}( \hyperlink{windefs_8h_aa0b90aaeb74b2488a95f0902cef09cbf}{WINVERS\_AMIV} )
786         \{
787         \hyperlink{winext_8h_abdcb66bae1fc240beb333f1932bdc30d}{CO} = (w->Width-w->BorderLeft-w->BorderRight)/\hyperlink{winfuncs_8c_afba9a8d2cd024c7010eae489091d11d6}{mxsize};
788         \hyperlink{winext_8h_a4952935dee70ae06274495dcddf10856}{LI} = (w->Height-w->BorderTop-w->BorderBottom)/\hyperlink{winfuncs_8c_a9703aea67c83633a25beaa737dad2b65}{mysize};
789         \hyperlink{winfuncs_8c_a2876464c6431712b2c89e8066669c311}{amii\_setclipped}();
790         SetFont( w->RPort, \hyperlink{winfuncs_8c_ab4180a3dac152c2cdb9d0debce284a33}{RogueFont});
791         SetAPen( w->RPort, \hyperlink{windefs_8h_a67fead37547ff67ca0a269d712e87822}{C\_WHITE}); \textcolor{comment}{/* XXX not sufficient */}
792         SetBPen( w->RPort, \hyperlink{windefs_8h_a22a9543e081938a146a8bce60a84200a}{C\_BLACK});
793         SetDrMd( w->RPort, JAM2);
794         \}
795         \textcolor{keywordflow}{else}
796         \{
797         \textcolor{keywordflow}{if}( \hyperlink{winext_8h_addd84e576afd1379e2aa7fa9921de0a5}{HackFont} )
798             SetFont( w->RPort, \hyperlink{winext_8h_addd84e576afd1379e2aa7fa9921de0a5}{HackFont} );
799         \}
800         \textcolor{keywordflow}{break};
801 
802         \textcolor{comment}{/* The base window must exist until CleanUp() deletes it. */}
803     \textcolor{keywordflow}{case} \hyperlink{macwin_8h_ab575e634e51462bf534b7ee541cefc46}{NHW\_BASE}:
804         SetMenuStrip(w, \hyperlink{winext_8h_a53bb7c231eb4b4a1df2f0a7e3b21786a}{MenuStrip});
805         \textcolor{comment}{/* Make our requesters come to our screen */}
806         \{
807         \textcolor{keyword}{register} \textcolor{keyword}{struct }Process *myProcess =
808                     (\textcolor{keyword}{struct }Process *) FindTask(\hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL});
809         \hyperlink{winext_8h_a6c86952ac4734bcf73b0ecac2e01bb14}{pr\_WindowPtr} = (\textcolor{keyword}{struct }Window *)(myProcess->pr\_WindowPtr);
810         myProcess->pr\_WindowPtr = (APTR) w;
811         \}
812 
813         \textcolor{comment}{/* Need this for RawKeyConvert() */}
814 
815         \hyperlink{winext_8h_ae3c14d8be57ba57c37740ecc37d0f917}{ConsoleIO}.io\_Data = (APTR) w;
816         \hyperlink{winext_8h_ae3c14d8be57ba57c37740ecc37d0f917}{ConsoleIO}.io\_Length = \textcolor{keyword}{sizeof}( \textcolor{keyword}{struct }Window );
817         \hyperlink{winext_8h_ae3c14d8be57ba57c37740ecc37d0f917}{ConsoleIO}.io\_Message.mn\_ReplyPort = CreateMsgPort();
818         \textcolor{keywordflow}{if}( OpenDevice(\textcolor{stringliteral}{"console.device"}, -1L,
819                 (\textcolor{keyword}{struct} IORequest *) &\hyperlink{winext_8h_ae3c14d8be57ba57c37740ecc37d0f917}{ConsoleIO}, 0L) != 0)
820         \{
821         \hyperlink{amiwind_8c_acd807e8b552ad939e3ae2fcb45e14c46}{Abort}(AG\_OpenDev | AO\_ConsoleDev);
822         \}
823 
824         ConsoleDevice = (\textcolor{keyword}{struct }Library *) \hyperlink{winext_8h_ae3c14d8be57ba57c37740ecc37d0f917}{ConsoleIO}.io\_Device;
825 
826         \hyperlink{winext_8h_a1f7c852742582b3b9a76ea350f6976d7}{KbdBuffered} = 0;
827 
828 #ifdef \hyperlink{amiconf_8h_a5f0f0bf01f686f59bc540578a50f3432}{HACKFONT}
829         \textcolor{keywordflow}{if}( \hyperlink{winext_8h_a5ba89c525a49d1190a1a5ecdf5f65aa6}{TextsFont} )
830         SetFont( w->RPort, \hyperlink{winext_8h_a5ba89c525a49d1190a1a5ecdf5f65aa6}{TextsFont} );
831         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( \hyperlink{winext_8h_addd84e576afd1379e2aa7fa9921de0a5}{HackFont} )
832         SetFont( w->RPort, \hyperlink{winext_8h_addd84e576afd1379e2aa7fa9921de0a5}{HackFont} );
833 \textcolor{preprocessor}{#endif}
834         \hyperlink{winext_8h_a017c6ef07f078c21f903ea8942bb43b3}{txwidth} = w->RPort->TxWidth;
835         \hyperlink{winext_8h_afdf567214d70875e5c17efe40a02b53a}{txheight} = w->RPort->TxHeight;
836         \hyperlink{winext_8h_aceba433f8539ff3b9ea76a9484290a5a}{txbaseline} = w->RPort->TxBaseline;
837         \textcolor{keywordflow}{break};
838 
839     \textcolor{keywordflow}{default}:
840         \hyperlink{txt2iff_8c_ab0824b6f5eb51db9371d2e9a222249d3}{panic}(\textcolor{stringliteral}{"bad create\_nhwindow( %d )\(\backslash\)n"},\hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type});
841         \textcolor{keywordflow}{return} \hyperlink{wintype_8h_a56d1f4f2e517a4e81be0b7593e35e681}{WIN\_ERR};
842     \}
843 
844     \textcolor{keywordflow}{return}( newid );
845 \}
\end{DoxyCode}
\hypertarget{winfuncs_8c_ad16d76372b2790f7b6926dc6174e4111}{\index{winfuncs.\+c@{winfuncs.\+c}!amii\+\_\+curs@{amii\+\_\+curs}}
\index{amii\+\_\+curs@{amii\+\_\+curs}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{amii\+\_\+curs}]{\setlength{\rightskip}{0pt plus 5cm}void amii\+\_\+curs (
\begin{DoxyParamCaption}
\item[{{\bf winid}}]{window, }
\item[{int}]{x, }
\item[{int}]{y}
\end{DoxyParamCaption}
)}}\label{winfuncs_8c_ad16d76372b2790f7b6926dc6174e4111}


Definition at line 1584 of file winfuncs.\+c.



References amii\+\_\+wins, ami\+I\+Display, C\+\_\+\+W\+H\+I\+T\+E, amii\+\_\+\+Win\+Desc\+::cols, amii\+\_\+\+Win\+Desc\+::curx, amii\+\_\+\+Win\+Desc\+::cury, flush\+\_\+glyph\+\_\+buffer(), Is\+\_\+rogue\+\_\+level, amii\+\_\+\+Display\+Desc\+::lastwin, max, mxsize, mysize, N\+H\+W\+\_\+\+B\+A\+S\+E, N\+H\+W\+\_\+\+M\+A\+P, N\+H\+W\+\_\+\+M\+E\+N\+U, N\+H\+W\+\_\+\+M\+E\+S\+S\+A\+G\+E, N\+H\+W\+\_\+\+O\+V\+E\+R, N\+H\+W\+\_\+\+S\+T\+A\+T\+U\+S, N\+H\+W\+\_\+\+T\+E\+X\+T, N\+U\+L\+L, panic(), pictdata, printf, amii\+\_\+\+Win\+Desc\+::rows, rp, scrollmsg, amii\+\_\+\+Win\+Desc\+::type, u, you\+::uz, amii\+\_\+\+Win\+Desc\+::win, W\+I\+N\+\_\+\+E\+R\+R, W\+I\+N\+\_\+\+I\+N\+V\+E\+N, winpanicstr, W\+I\+N\+V\+E\+R\+S\+\_\+\+A\+M\+I\+V, P\+D\+A\+T\+::xsize, and P\+D\+A\+T\+::ysize.



Referenced by amii\+\_\+clear\+\_\+nhwindow(), amii\+\_\+doprev\+\_\+message(), amii\+\_\+print\+\_\+glyph(), amii\+\_\+putstr(), amii\+\_\+putsym(), amii\+\_\+scrollmsg(), Display\+Data(), outmore(), and removetopl().


\begin{DoxyCode}
1588 \{
1589     \textcolor{keyword}{register} \textcolor{keyword}{struct }\hyperlink{structamii__WinDesc}{amii\_WinDesc} *cw;
1590     \textcolor{keyword}{register} \textcolor{keyword}{struct }Window *w;
1591     \textcolor{keyword}{register} \textcolor{keyword}{struct }RastPort *\hyperlink{amirip_8c_aa0639b6491ec144930d14703053f32a4}{rp};
1592 
1593     \textcolor{keywordflow}{if}( window == \hyperlink{wintype_8h_a56d1f4f2e517a4e81be0b7593e35e681}{WIN\_ERR} || ( cw = \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[window] ) == \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} )
1594     \hyperlink{txt2iff_8c_ab0824b6f5eb51db9371d2e9a222249d3}{panic}(\hyperlink{winext_8h_a4264157ee8930111caf21b62c212e08c}{winpanicstr},  window, \textcolor{stringliteral}{"curs"});
1595     \textcolor{keywordflow}{if}( (w = cw->\hyperlink{structamii__WinDesc_a9835faa4d66643cd889203e26edee8ae}{win}) == \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} )
1596     \{
1597     \textcolor{keywordflow}{if}( cw->\hyperlink{structamii__WinDesc_ab90130f7f09b474842877b2f71d708e0}{type} == \hyperlink{wintype_8h_a60a03e50aaeef35cd7cd3bf6f790791c}{NHW\_MENU} || cw->\hyperlink{structamii__WinDesc_ab90130f7f09b474842877b2f71d708e0}{type} == \hyperlink{wintype_8h_a7e2bcc8531c4c62e8d8f1c5279c5789b}{NHW\_TEXT} )
1598         \textcolor{keywordflow}{return};
1599     \textcolor{keywordflow}{else}
1600         \hyperlink{txt2iff_8c_ab0824b6f5eb51db9371d2e9a222249d3}{panic}( \textcolor{stringliteral}{"No window open yet in curs() for winid %d\(\backslash\)n"}, window );
1601     \}
1602     \hyperlink{winami_8h_a0ecec29922f9b6272c2b5344ce40b283}{amiIDisplay}->\hyperlink{structamii__DisplayDesc_a7cba815a57de07b72960832e3e454fb2}{lastwin} = window;
1603 
1604     \textcolor{comment}{/* Make sure x is within bounds */}
1605     \textcolor{keywordflow}{if}( x > 0 )
1606     --x;    \textcolor{comment}{/* column 0 is never used */}
1607     \textcolor{keywordflow}{else}
1608     x = 0;
1609 
1610     cw->\hyperlink{structamii__WinDesc_a4ae862475cf0a2f6aed98394d3ac12bd}{curx} = x;
1611     cw->\hyperlink{structamii__WinDesc_aee07cf405ea0e78eb6b82c339360a0f8}{cury} = y;
1612 
1613 \textcolor{preprocessor}{#ifdef DEBUG}
1614     \textcolor{keywordflow}{if}( x<0 || y<0 || y >= cw->\hyperlink{structamii__WinDesc_a465b4a9c04b3c325f2af2722aac9c5f3}{rows} || x >= cw->\hyperlink{structamii__WinDesc_a8ef9da0197015f48920307f3692f2a54}{cols} )
1615     \{
1616     \textcolor{keywordtype}{char} *s = \textcolor{stringliteral}{"[unknown type]"};
1617     \textcolor{keywordflow}{switch}(cw->\hyperlink{structamii__WinDesc_ab90130f7f09b474842877b2f71d708e0}{type})
1618     \{
1619         \textcolor{keywordflow}{case} \hyperlink{wintype_8h_ab3d471e84a363992b5a483392d0b2389}{NHW\_MESSAGE}: s = \textcolor{stringliteral}{"[topl window]"}; \textcolor{keywordflow}{break};
1620         \textcolor{keywordflow}{case} \hyperlink{wintype_8h_a8ed5b99ab7f854ace5f67f89aaae5404}{NHW\_STATUS}: s = \textcolor{stringliteral}{"[status window]"}; \textcolor{keywordflow}{break};
1621         \textcolor{keywordflow}{case} \hyperlink{wintype_8h_a756172f2e22a3d287cfaf6bc771df606}{NHW\_MAP}: s = \textcolor{stringliteral}{"[map window]"}; \textcolor{keywordflow}{break};
1622         \textcolor{keywordflow}{case} \hyperlink{wintype_8h_a60a03e50aaeef35cd7cd3bf6f790791c}{NHW\_MENU}: s = \textcolor{stringliteral}{"[menu window]"}; \textcolor{keywordflow}{break};
1623         \textcolor{keywordflow}{case} \hyperlink{wintype_8h_a7e2bcc8531c4c62e8d8f1c5279c5789b}{NHW\_TEXT}: s = \textcolor{stringliteral}{"[text window]"}; \textcolor{keywordflow}{break};
1624         \textcolor{keywordflow}{case} \hyperlink{macwin_8h_ab575e634e51462bf534b7ee541cefc46}{NHW\_BASE}: s = \textcolor{stringliteral}{"[base window]"}; \textcolor{keywordflow}{break};
1625         \textcolor{keywordflow}{case} \hyperlink{winami_8h_ade6ff25a1de12300d538d40c306f4b2a}{NHW\_OVER}: s = \textcolor{stringliteral}{"[overview window]"}; \textcolor{keywordflow}{break};
1626     \}
1627     impossible(\textcolor{stringliteral}{"bad curs positioning win %d %s (%d,%d)"}, window, s, x, y);
1628     \textcolor{keywordflow}{return};
1629     \}
1630 \textcolor{preprocessor}{#endif}
1631 
1632 \textcolor{preprocessor}{#ifdef CLIPPING}
1633     \textcolor{keywordflow}{if}(clipping && cw->\hyperlink{structamii__WinDesc_ab90130f7f09b474842877b2f71d708e0}{type} == \hyperlink{wintype_8h_a756172f2e22a3d287cfaf6bc771df606}{NHW\_MAP})
1634     \{
1635     x -= clipx;
1636     y -= clipy;
1637     \}
1638 \textcolor{preprocessor}{#endif}
1639 
1640     \textcolor{comment}{/* Output all saved output before doing cursor movements for MAP */}
1641 
1642     \textcolor{keywordflow}{if}( cw->\hyperlink{structamii__WinDesc_ab90130f7f09b474842877b2f71d708e0}{type} == \hyperlink{wintype_8h_a756172f2e22a3d287cfaf6bc771df606}{NHW\_MAP} )
1643     \{
1644     \hyperlink{winchar_8c_aedd7ad0350a58b8fca664bcbdc5f1f35}{flush\_glyph\_buffer}( w );
1645     \}
1646 
1647     \textcolor{comment}{/* Actually do it */}
1648 
1649     rp = w->RPort;
1650     \textcolor{keywordflow}{if}( cw->\hyperlink{structamii__WinDesc_ab90130f7f09b474842877b2f71d708e0}{type} == \hyperlink{wintype_8h_a60a03e50aaeef35cd7cd3bf6f790791c}{NHW\_MENU} )
1651     \{
1652     \textcolor{keywordflow}{if}( \hyperlink{windefs_8h_aa0b90aaeb74b2488a95f0902cef09cbf}{WINVERS\_AMIV} )
1653     \{
1654         \textcolor{keywordflow}{if}( window == \hyperlink{decl_8h_aabd3637304d093f7077c788661a0a5fd}{WIN\_INVEN} )
1655         \{
1656         Move( rp, (x * rp->TxWidth) + w->BorderLeft + 1 + \hyperlink{winchar_8c_a00763f280fa207a0cf085c6d52246c8c}{pictdata}.\hyperlink{structPDAT_a957fade03cbfb4ce4de9df4e09be7fc7}{xsize} + 4,
1657             (y * \hyperlink{hack_8h_affe776513b24d84b39af8ab0930fef7f}{max}(rp->TxHeight,\hyperlink{winchar_8c_a00763f280fa207a0cf085c6d52246c8c}{pictdata}.\hyperlink{structPDAT_ad7ef994c367e747b85e09149fdccff1b}{ysize} + 3) ) +
1658              rp->TxBaseline + \hyperlink{winchar_8c_a00763f280fa207a0cf085c6d52246c8c}{pictdata}.\hyperlink{structPDAT_ad7ef994c367e747b85e09149fdccff1b}{ysize} - rp->TxHeight + w->BorderTop + 4 );
1659         \}
1660         \textcolor{keywordflow}{else}
1661         \{
1662         Move( rp, (x * rp->TxWidth) + w->BorderLeft + 1,
1663             (y * rp->TxHeight) + rp->TxBaseline + w->BorderTop + 1 );
1664         \}
1665     \}
1666     \textcolor{keywordflow}{else}
1667     \{
1668         Move( rp, (x * rp->TxWidth) + w->BorderLeft + 1,
1669         (y*rp->TxHeight ) + rp->TxBaseline + w->BorderTop + 1 );
1670     \}
1671     \}
1672     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( cw->\hyperlink{structamii__WinDesc_ab90130f7f09b474842877b2f71d708e0}{type} == \hyperlink{wintype_8h_a7e2bcc8531c4c62e8d8f1c5279c5789b}{NHW\_TEXT} )
1673     \{
1674     Move( rp, (x * rp->TxWidth) + w->BorderLeft + 1,
1675         (y*rp->TxHeight ) + rp->TxBaseline + w->BorderTop + 1 );
1676     \}
1677     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( cw->\hyperlink{structamii__WinDesc_ab90130f7f09b474842877b2f71d708e0}{type} == \hyperlink{wintype_8h_a756172f2e22a3d287cfaf6bc771df606}{NHW\_MAP} || cw->\hyperlink{structamii__WinDesc_ab90130f7f09b474842877b2f71d708e0}{type} == \hyperlink{macwin_8h_ab575e634e51462bf534b7ee541cefc46}{NHW\_BASE} )
1678     \{
1679     \textcolor{comment}{/* These coordinate calculations must be synced with those}
1680 \textcolor{comment}{     * in flush\_glyph\_buffer() in winchar.c.  curs\_on\_u() will}
1681 \textcolor{comment}{     * use this code, all other drawing occurs through the glyph}
1682 \textcolor{comment}{     * code.  In order for the cursor to appear on top of the hero,}
1683 \textcolor{comment}{     * the code must compute X,Y in the same manner relative to}
1684 \textcolor{comment}{     * the RastPort coordinates.}
1685 \textcolor{comment}{     *}
1686 \textcolor{comment}{     * y = w->BorderTop + (g\_nodes[i].y-2) * rp->TxHeight +}
1687 \textcolor{comment}{     *   rp->TxBaseline + 1;}
1688 \textcolor{comment}{     * x = g\_nodes[i].x * rp->TxWidth + w->BorderLeft;}
1689 \textcolor{comment}{     */}
1690 
1691     \textcolor{keywordflow}{if}( \hyperlink{windefs_8h_aa0b90aaeb74b2488a95f0902cef09cbf}{WINVERS\_AMIV} )
1692     \{
1693         \textcolor{keywordflow}{if}( cw->\hyperlink{structamii__WinDesc_ab90130f7f09b474842877b2f71d708e0}{type} == \hyperlink{wintype_8h_a756172f2e22a3d287cfaf6bc771df606}{NHW\_MAP} )
1694         \{
1695           \textcolor{keywordflow}{if}(\hyperlink{dungeon_8h_a2732117523c8540638daf4315dda16b9}{Is\_rogue\_level}(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz}))\{
1696 \textcolor{preprocessor}{#if 0}
1697 \textcolor{keywordtype}{int} qqx= (x * w->RPort->TxWidth) + w->BorderLeft;
1698 \textcolor{keywordtype}{int} qqy= w->BorderTop + ( (y+1) * w->RPort->TxHeight ) + 1;
1699 \hyperlink{sound_8c_a3cb9f0894fab1c8fbb0753c9c7c2a8d9}{printf}(\textcolor{stringliteral}{"pos: (%d,%d)->(%d,%d)\(\backslash\)n"},x,y,qqx,qqy);
1700 \textcolor{preprocessor}{#endif}
1701         SetAPen(w->RPort,\hyperlink{windefs_8h_a67fead37547ff67ca0a269d712e87822}{C\_WHITE}); \textcolor{comment}{/* XXX should be elsewhere (was 4)*/}
1702         Move( rp, (x * w->RPort->TxWidth) + w->BorderLeft,
1703             w->BorderTop + ( (y+1) * w->RPort->TxHeight ) + 1 );
1704           \} \textcolor{keywordflow}{else} \{
1705         Move( rp, (x * \hyperlink{winfuncs_8c_afba9a8d2cd024c7010eae489091d11d6}{mxsize}) + w->BorderLeft,
1706                 w->BorderTop + ( (y+1) * \hyperlink{winfuncs_8c_a9703aea67c83633a25beaa737dad2b65}{mysize} ) + 1 );
1707           \}
1708         \}
1709         \textcolor{keywordflow}{else}
1710         \{
1711         Move( rp, (x * w->RPort->TxWidth) + w->BorderLeft,
1712                 w->BorderTop + ( (y + 1) * w->RPort->TxHeight ) +
1713                 w->RPort->TxBaseline + 1 );
1714         \}
1715     \}
1716     \textcolor{keywordflow}{else}
1717     \{
1718         Move( rp, (x * w->RPort->TxWidth) + w->BorderLeft,
1719             w->BorderTop + ( y * w->RPort->TxHeight ) +
1720             w->RPort->TxBaseline + 1 );
1721     \}
1722     \}
1723     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( \hyperlink{windefs_8h_aa0b90aaeb74b2488a95f0902cef09cbf}{WINVERS\_AMIV} && cw->\hyperlink{structamii__WinDesc_ab90130f7f09b474842877b2f71d708e0}{type} == \hyperlink{winami_8h_ade6ff25a1de12300d538d40c306f4b2a}{NHW\_OVER} )
1724     \{
1725     Move( rp, (x * w->RPort->TxWidth) + w->BorderLeft + 2,
1726             w->BorderTop + w->RPort->TxBaseline + 3 );
1727     \}
1728     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( cw->\hyperlink{structamii__WinDesc_ab90130f7f09b474842877b2f71d708e0}{type} == \hyperlink{wintype_8h_ab3d471e84a363992b5a483392d0b2389}{NHW\_MESSAGE} && !\hyperlink{winext_8h_a3b783f5f077454f156585be54b99746b}{scrollmsg} )
1729     \{
1730     Move( rp, (x * w->RPort->TxWidth) + w->BorderLeft + 2,
1731             w->BorderTop + w->RPort->TxBaseline + 3 );
1732     \}
1733     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( cw->\hyperlink{structamii__WinDesc_ab90130f7f09b474842877b2f71d708e0}{type} == \hyperlink{wintype_8h_a8ed5b99ab7f854ace5f67f89aaae5404}{NHW\_STATUS} )
1734     \{
1735     Move( rp, (x * w->RPort->TxWidth) + w->BorderLeft + 2,
1736             (y*(w->RPort->TxHeight+1)) + w->BorderTop +
1737             w->RPort->TxBaseline + 1 );
1738     \}
1739     \textcolor{keywordflow}{else}
1740     \{
1741     Move( rp, (x * w->RPort->TxWidth) + w->BorderLeft + 2,
1742             (y*w->RPort->TxHeight) + w->BorderTop +
1743             w->RPort->TxBaseline + 1 );
1744     \}
1745 \}
\end{DoxyCode}
\hypertarget{winfuncs_8c_aa650954bd0e8c4a5ef3b283050cd646c}{\index{winfuncs.\+c@{winfuncs.\+c}!amii\+\_\+destroy\+\_\+nhwindow@{amii\+\_\+destroy\+\_\+nhwindow}}
\index{amii\+\_\+destroy\+\_\+nhwindow@{amii\+\_\+destroy\+\_\+nhwindow}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{amii\+\_\+destroy\+\_\+nhwindow}]{\setlength{\rightskip}{0pt plus 5cm}void amii\+\_\+destroy\+\_\+nhwindow (
\begin{DoxyParamCaption}
\item[{{\bf winid}}]{win}
\end{DoxyParamCaption}
)}}\label{winfuncs_8c_aa650954bd0e8c4a5ef3b283050cd646c}


Definition at line 139 of file winfuncs.\+c.



References alwaysinvent, amii\+\_\+destroy\+\_\+nhwindow(), amii\+\_\+oldmsg, amii\+\_\+oldover, amii\+\_\+wins, ami\+I\+Display, amii\+\_\+\+Win\+Desc\+::canresp, amii\+\_\+\+Win\+Desc\+::data, dismiss\+\_\+nhwindow(), free(), amii\+\_\+\+Win\+Desc\+::hook, amii\+\_\+\+Win\+Desc\+::maxrow, amii\+\_\+\+Win\+Desc\+::morestr, N\+H\+W\+\_\+\+M\+A\+P, N\+H\+W\+\_\+\+M\+E\+N\+U, N\+H\+W\+\_\+\+M\+E\+S\+S\+A\+G\+E, N\+H\+W\+\_\+\+O\+V\+E\+R, N\+H\+W\+\_\+\+T\+E\+X\+T, N\+U\+L\+L, panic(), amii\+\_\+\+Win\+Desc\+::resp, amii\+\_\+\+Win\+Desc\+::type, type, amii\+\_\+\+Win\+Desc\+::win, W\+I\+N\+\_\+\+E\+R\+R, W\+I\+N\+\_\+\+I\+N\+V\+E\+N, W\+I\+N\+\_\+\+M\+A\+P, W\+I\+N\+\_\+\+M\+E\+S\+S\+A\+G\+E, W\+I\+N\+\_\+\+O\+V\+E\+R, W\+I\+N\+\_\+\+S\+T\+A\+T\+U\+S, winpanicstr, W\+I\+N\+V\+E\+R\+S\+\_\+\+A\+M\+I\+V, and amii\+\_\+\+Display\+Desc\+::xpix.



Referenced by amii\+\_\+destroy\+\_\+nhwindow(), and kill\+\_\+nhwindows().


\begin{DoxyCode}
141 \{
142     \textcolor{keywordtype}{int} i;
143     \textcolor{keywordtype}{int} \hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type};
144     \textcolor{keyword}{register} \textcolor{keyword}{struct }\hyperlink{structamii__WinDesc}{amii\_WinDesc} *cw;
145 
146     \textcolor{keywordflow}{if}( \hyperlink{structamii__WinDesc_a9835faa4d66643cd889203e26edee8ae}{win} == \hyperlink{wintype_8h_a56d1f4f2e517a4e81be0b7593e35e681}{WIN\_ERR} || ( cw = \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[\hyperlink{structamii__WinDesc_a9835faa4d66643cd889203e26edee8ae}{win}] ) == \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} )
147     \{
148     \hyperlink{txt2iff_8c_ab0824b6f5eb51db9371d2e9a222249d3}{panic}(\hyperlink{winext_8h_a4264157ee8930111caf21b62c212e08c}{winpanicstr},win,\textcolor{stringliteral}{"destroy\_nhwindow"});
149     \}
150 
151     \textcolor{keywordflow}{if}( \hyperlink{windefs_8h_aa0b90aaeb74b2488a95f0902cef09cbf}{WINVERS\_AMIV} )
152     \{
153     \textcolor{keywordflow}{if}( cw->\hyperlink{structamii__WinDesc_ab90130f7f09b474842877b2f71d708e0}{type} == \hyperlink{wintype_8h_a756172f2e22a3d287cfaf6bc771df606}{NHW\_MAP} )
154     \{
155         \textcolor{comment}{/* If inventory is up, close it now, it will be freed later */}
156         \textcolor{keywordflow}{if}( \hyperlink{winext_8h_a5f7057e3372d8abeddf1df4f99752979}{alwaysinvent} && \hyperlink{decl_8h_aabd3637304d093f7077c788661a0a5fd}{WIN\_INVEN} != \hyperlink{wintype_8h_a56d1f4f2e517a4e81be0b7593e35e681}{WIN\_ERR} &&
157                 \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[ \hyperlink{decl_8h_aabd3637304d093f7077c788661a0a5fd}{WIN\_INVEN} ] &&
158                 \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[ \hyperlink{decl_8h_aabd3637304d093f7077c788661a0a5fd}{WIN\_INVEN} ]->win )
159         \{
160         \hyperlink{winfuncs_8c_ac946cc5b4c43a936e168ddc80b74c4bd}{dismiss\_nhwindow}( \hyperlink{decl_8h_aabd3637304d093f7077c788661a0a5fd}{WIN\_INVEN} );
161         \}
162 
163         \textcolor{comment}{/* Tear down overview window if it is up */}
164         \textcolor{keywordflow}{if}( \hyperlink{winami_8h_a6a2b237abaae6aafe05c90be6d49d72e}{WIN\_OVER} != \hyperlink{wintype_8h_a56d1f4f2e517a4e81be0b7593e35e681}{WIN\_ERR} )
165         \{
166         \hyperlink{winfuncs_8c_aa650954bd0e8c4a5ef3b283050cd646c}{amii\_destroy\_nhwindow}( \hyperlink{winami_8h_a6a2b237abaae6aafe05c90be6d49d72e}{WIN\_OVER} );
167         \hyperlink{winami_8h_a6a2b237abaae6aafe05c90be6d49d72e}{WIN\_OVER} = \hyperlink{wintype_8h_a56d1f4f2e517a4e81be0b7593e35e681}{WIN\_ERR};
168         \}
169     \}
170     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( cw->\hyperlink{structamii__WinDesc_ab90130f7f09b474842877b2f71d708e0}{type} == \hyperlink{winami_8h_ade6ff25a1de12300d538d40c306f4b2a}{NHW\_OVER} )
171     \{
172         \textcolor{keyword}{struct }Window *w = \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[ \hyperlink{winami_8h_a6a2b237abaae6aafe05c90be6d49d72e}{WIN\_OVER} ]->\hyperlink{structamii__WinDesc_a9835faa4d66643cd889203e26edee8ae}{win};
173         \hyperlink{winfuncs_8c_a0a7c9ea82e04a8326edfd11f48eae0aa}{amii\_oldover}.MinX = w->LeftEdge;
174         \hyperlink{winfuncs_8c_a0a7c9ea82e04a8326edfd11f48eae0aa}{amii\_oldover}.MinY = w->TopEdge;
175         \hyperlink{winfuncs_8c_a0a7c9ea82e04a8326edfd11f48eae0aa}{amii\_oldover}.MaxX = w->Width;
176         \hyperlink{winfuncs_8c_a0a7c9ea82e04a8326edfd11f48eae0aa}{amii\_oldover}.MaxY = w->Height;
177 
178         \textcolor{keywordflow}{if}( \hyperlink{decl_8h_a4a1cc9e693dbdfad3ea32b10ce19f337}{WIN\_MESSAGE} != \hyperlink{wintype_8h_a56d1f4f2e517a4e81be0b7593e35e681}{WIN\_ERR} && \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[ 
      \hyperlink{decl_8h_a4a1cc9e693dbdfad3ea32b10ce19f337}{WIN\_MESSAGE} ] )
179         \{
180         w = \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[ \hyperlink{decl_8h_a4a1cc9e693dbdfad3ea32b10ce19f337}{WIN\_MESSAGE} ]->\hyperlink{structamii__WinDesc_a9835faa4d66643cd889203e26edee8ae}{win};
181         \hyperlink{winfuncs_8c_abf1a8ff4e563d7d084463a3b9c8a4171}{amii\_oldmsg}.MinX = w->LeftEdge;
182         \hyperlink{winfuncs_8c_abf1a8ff4e563d7d084463a3b9c8a4171}{amii\_oldmsg}.MinY = w->TopEdge;
183         \hyperlink{winfuncs_8c_abf1a8ff4e563d7d084463a3b9c8a4171}{amii\_oldmsg}.MaxX = w->Width;
184         \hyperlink{winfuncs_8c_abf1a8ff4e563d7d084463a3b9c8a4171}{amii\_oldmsg}.MaxY = w->Height;
185         SizeWindow( \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[ WIN\_MESSAGE ]->win,
186             (\hyperlink{winami_8h_a0ecec29922f9b6272c2b5344ce40b283}{amiIDisplay}->\hyperlink{structamii__DisplayDesc_af95f6ae98ff1f0ccc96b06fdd296530e}{xpix} -
187             \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[ WIN\_MESSAGE ]->\hyperlink{structamii__WinDesc_a9835faa4d66643cd889203e26edee8ae}{win}->LeftEdge) -
188             \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[ WIN\_MESSAGE ]->\hyperlink{structamii__WinDesc_a9835faa4d66643cd889203e26edee8ae}{win}->Width,
189             0 );
190         \}
191     \}
192     \}
193 
194     \textcolor{comment}{/* Tear down the Intuition stuff */}
195     \hyperlink{winfuncs_8c_ac946cc5b4c43a936e168ddc80b74c4bd}{dismiss\_nhwindow}(win);
196     type = cw->\hyperlink{structamii__WinDesc_ab90130f7f09b474842877b2f71d708e0}{type};
197 
198     \textcolor{keywordflow}{if}( cw->\hyperlink{structamii__WinDesc_a7c77cae36fa87a80e7c5b0cf9ed8284f}{resp} ) \{
199     \hyperlink{winproto_8h_a4bbec68d324de17b99fecede64b383ba}{free}( cw->\hyperlink{structamii__WinDesc_a7c77cae36fa87a80e7c5b0cf9ed8284f}{resp} );
200     cw->\hyperlink{structamii__WinDesc_a7c77cae36fa87a80e7c5b0cf9ed8284f}{resp} = \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
201     \}
202     \textcolor{keywordflow}{if}( cw->\hyperlink{structamii__WinDesc_ac8c4b6085649b349a4d36d38d3c4344d}{canresp} ) \{
203     \hyperlink{winproto_8h_a4bbec68d324de17b99fecede64b383ba}{free}( cw->\hyperlink{structamii__WinDesc_ac8c4b6085649b349a4d36d38d3c4344d}{canresp} );
204     cw->\hyperlink{structamii__WinDesc_ac8c4b6085649b349a4d36d38d3c4344d}{canresp} = \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
205     \}
206     \textcolor{keywordflow}{if}( cw->\hyperlink{structamii__WinDesc_a18f1ba88dadd6f00144ad9f0b16a2b20}{morestr} ) \{
207     \hyperlink{winproto_8h_a4bbec68d324de17b99fecede64b383ba}{free}( cw->\hyperlink{structamii__WinDesc_a18f1ba88dadd6f00144ad9f0b16a2b20}{morestr} );
208     cw->\hyperlink{structamii__WinDesc_a18f1ba88dadd6f00144ad9f0b16a2b20}{morestr} = \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
209     \}
210     \textcolor{keywordflow}{if}( cw->\hyperlink{structamii__WinDesc_a95adbcba37257f02f7d9b3e5ef4c8411}{hook} ) \{
211     \hyperlink{winproto_8h_a4bbec68d324de17b99fecede64b383ba}{free}( cw->\hyperlink{structamii__WinDesc_a95adbcba37257f02f7d9b3e5ef4c8411}{hook} );
212     cw->\hyperlink{structamii__WinDesc_a95adbcba37257f02f7d9b3e5ef4c8411}{hook} = \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
213     \}
214 
215     \textcolor{keywordflow}{if}( cw->\hyperlink{structamii__WinDesc_a1be96ba5842aef93cb36e73173277ad6}{data} && ( cw->\hyperlink{structamii__WinDesc_ab90130f7f09b474842877b2f71d708e0}{type} == \hyperlink{wintype_8h_ab3d471e84a363992b5a483392d0b2389}{NHW\_MESSAGE} ||
216                 cw->\hyperlink{structamii__WinDesc_ab90130f7f09b474842877b2f71d708e0}{type} == \hyperlink{wintype_8h_a60a03e50aaeef35cd7cd3bf6f790791c}{NHW\_MENU} || cw->\hyperlink{structamii__WinDesc_ab90130f7f09b474842877b2f71d708e0}{type} == \hyperlink{wintype_8h_a7e2bcc8531c4c62e8d8f1c5279c5789b}{NHW\_TEXT} ) )
217     \{
218     \textcolor{keywordflow}{for}( i = 0; i < cw->\hyperlink{structamii__WinDesc_a1ca7af4b595bf7bb077ed78546548670}{maxrow}; ++i )
219     \{
220         \textcolor{keywordflow}{if}( cw->\hyperlink{structamii__WinDesc_a1be96ba5842aef93cb36e73173277ad6}{data}[ i ] )
221         \hyperlink{winproto_8h_a4bbec68d324de17b99fecede64b383ba}{free}( cw->\hyperlink{structamii__WinDesc_a1be96ba5842aef93cb36e73173277ad6}{data}[ i ] );
222     \}
223     \hyperlink{winproto_8h_a4bbec68d324de17b99fecede64b383ba}{free}( cw->\hyperlink{structamii__WinDesc_a1be96ba5842aef93cb36e73173277ad6}{data} );
224     \}
225 
226     \hyperlink{winproto_8h_a4bbec68d324de17b99fecede64b383ba}{free}( cw );
227     \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[win] = \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
228 
229     \textcolor{comment}{/* Set globals to WIN\_ERR for known one-of-a-kind windows. */}
230     \textcolor{keywordflow}{if}( win == \hyperlink{decl_8h_afa1f7dd312c4c1b72afe3d2c8c2af691}{WIN\_MAP}) \hyperlink{decl_8h_afa1f7dd312c4c1b72afe3d2c8c2af691}{WIN\_MAP} = \hyperlink{wintype_8h_a56d1f4f2e517a4e81be0b7593e35e681}{WIN\_ERR};
231     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( win == \hyperlink{decl_8h_ae0690a38fd295760409995ce03b88329}{WIN\_STATUS}) \hyperlink{decl_8h_ae0690a38fd295760409995ce03b88329}{WIN\_STATUS} = \hyperlink{wintype_8h_a56d1f4f2e517a4e81be0b7593e35e681}{WIN\_ERR};
232     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( win == \hyperlink{decl_8h_a4a1cc9e693dbdfad3ea32b10ce19f337}{WIN\_MESSAGE}) \hyperlink{decl_8h_a4a1cc9e693dbdfad3ea32b10ce19f337}{WIN\_MESSAGE} = \hyperlink{wintype_8h_a56d1f4f2e517a4e81be0b7593e35e681}{WIN\_ERR};
233     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( win == \hyperlink{decl_8h_aabd3637304d093f7077c788661a0a5fd}{WIN\_INVEN}) \hyperlink{decl_8h_aabd3637304d093f7077c788661a0a5fd}{WIN\_INVEN} = \hyperlink{wintype_8h_a56d1f4f2e517a4e81be0b7593e35e681}{WIN\_ERR};
234 
235 \}
\end{DoxyCode}
\hypertarget{winfuncs_8c_a743c0fb6beb3516ba3022d5680276991}{\index{winfuncs.\+c@{winfuncs.\+c}!amii\+\_\+display\+\_\+nhwindow@{amii\+\_\+display\+\_\+nhwindow}}
\index{amii\+\_\+display\+\_\+nhwindow@{amii\+\_\+display\+\_\+nhwindow}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{amii\+\_\+display\+\_\+nhwindow}]{\setlength{\rightskip}{0pt plus 5cm}void amii\+\_\+display\+\_\+nhwindow (
\begin{DoxyParamCaption}
\item[{{\bf winid}}]{win, }
\item[{{\bf boolean}}]{blocking}
\end{DoxyParamCaption}
)}}\label{winfuncs_8c_a743c0fb6beb3516ba3022d5680276991}


Definition at line 1541 of file winfuncs.\+c.



References amii\+\_\+end\+\_\+glyphout(), amii\+\_\+wins, amii\+\_\+\+Win\+Desc\+::curx, Do\+Menu\+Scroll(), F\+L\+M\+A\+P\+\_\+\+S\+K\+I\+P, flush\+\_\+glyph\+\_\+buffer(), Initialized, N\+H\+W\+\_\+\+M\+A\+P, N\+H\+W\+\_\+\+M\+E\+N\+U, N\+H\+W\+\_\+\+M\+E\+S\+S\+A\+G\+E, N\+H\+W\+\_\+\+S\+T\+A\+T\+U\+S, N\+H\+W\+\_\+\+T\+E\+X\+T, N\+U\+L\+L, outmore(), panic(), P\+I\+C\+K\+\_\+\+O\+N\+E, T\+R\+U\+E, amii\+\_\+\+Win\+Desc\+::type, amii\+\_\+\+Win\+Desc\+::wflags, amii\+\_\+\+Win\+Desc\+::win, W\+I\+N\+\_\+\+E\+R\+R, W\+I\+N\+\_\+\+M\+A\+P, W\+I\+N\+\_\+\+M\+E\+S\+S\+A\+G\+E, and winpanicstr.


\begin{DoxyCode}
1544 \{
1545     \hyperlink{structmi}{menu\_item} *mip;
1546     \textcolor{keywordtype}{int} cnt;
1547     \textcolor{keyword}{static} \textcolor{keywordtype}{int} lastwin = -1;
1548     \textcolor{keyword}{struct }\hyperlink{structamii__WinDesc}{amii\_WinDesc} *cw;
1549 
1550     \textcolor{keywordflow}{if}( !\hyperlink{amidos_8c_a55b41cec1916f4628807321204d03d9f}{Initialized} )
1551     \textcolor{keywordflow}{return};
1552     lastwin = \hyperlink{structamii__WinDesc_a9835faa4d66643cd889203e26edee8ae}{win};
1553 
1554     \textcolor{keywordflow}{if}( \hyperlink{structamii__WinDesc_a9835faa4d66643cd889203e26edee8ae}{win} == \hyperlink{wintype_8h_a56d1f4f2e517a4e81be0b7593e35e681}{WIN\_ERR} || ( cw = \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[\hyperlink{structamii__WinDesc_a9835faa4d66643cd889203e26edee8ae}{win}] ) == \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} )
1555     \hyperlink{txt2iff_8c_ab0824b6f5eb51db9371d2e9a222249d3}{panic}(\hyperlink{winext_8h_a4264157ee8930111caf21b62c212e08c}{winpanicstr},win,\textcolor{stringliteral}{"display\_nhwindow"});
1556 
1557     \textcolor{keywordflow}{if}( cw->\hyperlink{structamii__WinDesc_ab90130f7f09b474842877b2f71d708e0}{type} == \hyperlink{wintype_8h_ab3d471e84a363992b5a483392d0b2389}{NHW\_MESSAGE} )
1558     cw->\hyperlink{structamii__WinDesc_a4400afb6488c6a7b1f70f27ee0371963}{wflags} &= ~\hyperlink{winami_8h_a20db85ff854e288c5f3b7c380e6ceb91}{FLMAP\_SKIP};
1559 
1560     \textcolor{keywordflow}{if}( cw->\hyperlink{structamii__WinDesc_ab90130f7f09b474842877b2f71d708e0}{type} == \hyperlink{wintype_8h_ab3d471e84a363992b5a483392d0b2389}{NHW\_MESSAGE} || cw->\hyperlink{structamii__WinDesc_ab90130f7f09b474842877b2f71d708e0}{type} == \hyperlink{wintype_8h_a8ed5b99ab7f854ace5f67f89aaae5404}{NHW\_STATUS} )
1561     \textcolor{keywordflow}{return};
1562 
1563     \textcolor{keywordflow}{if}( \hyperlink{decl_8h_afa1f7dd312c4c1b72afe3d2c8c2af691}{WIN\_MAP} != \hyperlink{wintype_8h_a56d1f4f2e517a4e81be0b7593e35e681}{WIN\_ERR} && \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[ \hyperlink{decl_8h_afa1f7dd312c4c1b72afe3d2c8c2af691}{WIN\_MAP} ] )
1564     \{
1565     \hyperlink{winchar_8c_aedd7ad0350a58b8fca664bcbdc5f1f35}{flush\_glyph\_buffer}( \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[ WIN\_MAP ]->win );
1566     \}
1567 
1568     \textcolor{keywordflow}{if}( cw->\hyperlink{structamii__WinDesc_ab90130f7f09b474842877b2f71d708e0}{type} == \hyperlink{wintype_8h_a60a03e50aaeef35cd7cd3bf6f790791c}{NHW\_MENU} || cw->\hyperlink{structamii__WinDesc_ab90130f7f09b474842877b2f71d708e0}{type} == \hyperlink{wintype_8h_a7e2bcc8531c4c62e8d8f1c5279c5789b}{NHW\_TEXT} )
1569     \{
1570     cnt = \hyperlink{sys_2amiga_2winmenu_8c_a2ab7ed911fa9e298491912256dad69be}{DoMenuScroll}( win, blocking, \hyperlink{wintype_8h_a53377e7b2fddfaf7cc2351dab3b2b139}{PICK\_ONE}, &mip );
1571     \}
1572     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( cw->\hyperlink{structamii__WinDesc_ab90130f7f09b474842877b2f71d708e0}{type}==\hyperlink{wintype_8h_a756172f2e22a3d287cfaf6bc771df606}{NHW\_MAP} )
1573     \{
1574     \hyperlink{winchar_8c_ad2db856235b6b0b57afd73a5dd1e286d}{amii\_end\_glyphout}( win );
1575     \textcolor{comment}{/* Do more if it is time... */}
1576     \textcolor{keywordflow}{if}( blocking == \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE} && \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[ \hyperlink{decl_8h_a4a1cc9e693dbdfad3ea32b10ce19f337}{WIN\_MESSAGE} ]->
      \hyperlink{structamii__WinDesc_a4ae862475cf0a2f6aed98394d3ac12bd}{curx} )
1577     \{
1578         \hyperlink{winproto_8h_a55e9e9c33e29d3698d29ff252bf2aae8}{outmore}( \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[ \hyperlink{decl_8h_a4a1cc9e693dbdfad3ea32b10ce19f337}{WIN\_MESSAGE} ] );
1579     \}
1580     \}
1581 \}
\end{DoxyCode}
\hypertarget{winfuncs_8c_a14c4eb72e7af39f2de1d7d9d1ce78c4a}{\index{winfuncs.\+c@{winfuncs.\+c}!amii\+\_\+exit\+\_\+nhwindows@{amii\+\_\+exit\+\_\+nhwindows}}
\index{amii\+\_\+exit\+\_\+nhwindows@{amii\+\_\+exit\+\_\+nhwindows}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{amii\+\_\+exit\+\_\+nhwindows}]{\setlength{\rightskip}{0pt plus 5cm}void amii\+\_\+exit\+\_\+nhwindows (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{str}
\end{DoxyParamCaption}
) const}}\label{winfuncs_8c_a14c4eb72e7af39f2de1d7d9d1ce78c4a}


Definition at line 1523 of file winfuncs.\+c.



References Free\+Tile\+Image\+Files(), kill\+\_\+nhwindows(), raw\+\_\+print, and W\+I\+N\+V\+E\+R\+S\+\_\+\+A\+M\+I\+V.


\begin{DoxyCode}
1525 \{
1526     \textcolor{comment}{/* Seems strange to have to do this... but we need the BASE window}
1527 \textcolor{comment}{     * left behind...}
1528 \textcolor{comment}{     */}
1529     \hyperlink{winfuncs_8c_a72b5bc3695faa88e00240b100758f23a}{kill\_nhwindows}( 0 );
1530     \textcolor{keywordflow}{if}( \hyperlink{windefs_8h_aa0b90aaeb74b2488a95f0902cef09cbf}{WINVERS\_AMIV} )
1531     \hyperlink{winchar_8c_a52004e01e897470f11cc048fc78f4649}{FreeTileImageFiles}( );
1532 
1533     \textcolor{keywordflow}{if}( str )
1534     \{
1535     \hyperlink{winprocs_8h_a49dffdcae248bae8b370f76b434ce744}{raw\_print}( \textcolor{stringliteral}{""} );   \textcolor{comment}{/* be sure we're not under the top margin */}
1536     \hyperlink{winprocs_8h_a49dffdcae248bae8b370f76b434ce744}{raw\_print}( str );
1537     \}
1538 \}
\end{DoxyCode}
\hypertarget{winfuncs_8c_af781a3da36dbe34ce749435c2b4853fd}{\index{winfuncs.\+c@{winfuncs.\+c}!amii\+\_\+init\+\_\+nhwindows@{amii\+\_\+init\+\_\+nhwindows}}
\index{amii\+\_\+init\+\_\+nhwindows@{amii\+\_\+init\+\_\+nhwindows}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{amii\+\_\+init\+\_\+nhwindows}]{\setlength{\rightskip}{0pt plus 5cm}void amii\+\_\+init\+\_\+nhwindows (
\begin{DoxyParamCaption}
\item[{int $\ast$}]{argcp, }
\item[{char $\ast$$\ast$}]{argv}
\end{DoxyParamCaption}
)}}\label{winfuncs_8c_af781a3da36dbe34ce749435c2b4853fd}


Definition at line 892 of file winfuncs.\+c.



References Abort(), alloc(), alwaysinvent, amii\+\_\+clear\+\_\+nhwindow(), amii\+\_\+create\+\_\+nhwindow(), amii\+\_\+init\+\_\+map, amii\+\_\+initmap, amii\+\_\+libvers, amii\+\_\+numcolors, amii\+\_\+putstr(), amii\+\_\+scrnmode, ami\+I\+Display, bigscreen, Border\+Vectors1, Border\+Vectors2, C\+\_\+\+B\+L\+A\+C\+K, C\+\_\+\+W\+H\+I\+T\+E, amii\+\_\+\+Display\+Desc\+::cols, C\+O\+P\+Y\+R\+I\+G\+H\+T\+\_\+\+B\+A\+N\+N\+E\+R\+\_\+\+A, C\+O\+P\+Y\+R\+I\+G\+H\+T\+\_\+\+B\+A\+N\+N\+E\+R\+\_\+\+B, C\+O\+P\+Y\+R\+I\+G\+H\+T\+\_\+\+B\+A\+N\+N\+E\+R\+\_\+\+C, flags, fname, F\+O\+N\+T\+H\+E\+I\+G\+H\+T, F\+O\+N\+T\+W\+I\+D\+T\+H, Gfx\+Base, G\+T\+Hack\+Menu, Hack80, Hack\+Font, Hack\+Screen, Initialized, amii\+\_\+\+Display\+Desc\+::lastwin, max, Menu\+Strip, New\+Hack\+Screen, N\+H\+W\+\_\+\+B\+A\+S\+E, N\+U\+L\+L, panic(), P\+A\+T\+C\+H\+L\+E\+V\+E\+L, amii\+\_\+\+Display\+Desc\+::rawprint, Read\+Tile\+Image\+Files(), Rogue\+Font, amii\+\_\+\+Display\+Desc\+::rows, S\+C\+R\+E\+E\+N\+H\+E\+I\+G\+H\+T, scrntags, S\+I\+Z\+E\+O\+F\+\_\+\+D\+I\+S\+K\+N\+A\+M\+E, S\+M\+\_\+\+Filter(), Texts\+Font, Texts\+Font13, amii\+\_\+\+Display\+Desc\+::toplin, T\+R\+U\+E, V\+E\+R\+S\+I\+O\+N\+\_\+\+M\+A\+J\+O\+R, V\+E\+R\+S\+I\+O\+N\+\_\+\+M\+I\+N\+O\+R, Visual\+Info, W\+I\+D\+T\+H, W\+I\+N\+\_\+\+B\+A\+S\+E, W\+I\+N\+\_\+\+E\+R\+R, W\+I\+N\+\_\+\+I\+N\+V\+E\+N, W\+I\+N\+\_\+\+M\+A\+P, W\+I\+N\+\_\+\+M\+E\+S\+S\+A\+G\+E, W\+I\+N\+\_\+\+O\+V\+E\+R, W\+I\+N\+\_\+\+S\+T\+A\+T\+U\+S, W\+I\+N\+V\+E\+R\+S\+\_\+\+A\+M\+I\+V, amii\+\_\+\+Display\+Desc\+::xpix, and amii\+\_\+\+Display\+Desc\+::ypix.


\begin{DoxyCode}
895 \{
896     \textcolor{keywordtype}{int} i;
897     \textcolor{keyword}{struct }Screen *wbscr;
898     \textcolor{keywordtype}{int} forcenobig = 0;
899 
900     \textcolor{keywordflow}{if}( \hyperlink{winext_8h_ad92207d95deab9f96588451c7ed34419}{HackScreen} )
901     \hyperlink{txt2iff_8c_ab0824b6f5eb51db9371d2e9a222249d3}{panic}( \textcolor{stringliteral}{"init\_nhwindows() called twice"}, 0 );
902 
903     \textcolor{comment}{/* run args & set bigscreen from -L(1)/-l(-1) */}
904     \{
905     \textcolor{keywordtype}{int} lclargc = *argcp;
906     \textcolor{keywordtype}{int} t;
907     \textcolor{keywordtype}{char} **argv\_in = argv;
908     \textcolor{keywordtype}{char} **argv\_out = argv;
909 
910     \textcolor{keywordflow}{for}(t=1;t<=lclargc;t++)\{
911         \textcolor{keywordflow}{if}(!strcmp(\textcolor{stringliteral}{"-L"},*argv\_in) || !strcmp(\textcolor{stringliteral}{"-l"},*argv\_in))\{
912         \hyperlink{winext_8h_a686d780b14cde5aa754adc1baa2d6cfe}{bigscreen} = (*argv\_in[1]==\textcolor{charliteral}{'l'}) ? -1 : 1;
913         \textcolor{comment}{/* and eat the flag */}
914         (*argcp)--;
915         \} \textcolor{keywordflow}{else} \{
916         *argv\_out = *argv\_in;   \textcolor{comment}{/* keep the flag */}
917         argv\_out++;
918         \}
919         argv\_in++;
920     \}
921     *argv\_out = 0;
922     \}
923 
924     \hyperlink{decl_8h_a4a1cc9e693dbdfad3ea32b10ce19f337}{WIN\_MESSAGE} = \hyperlink{wintype_8h_a56d1f4f2e517a4e81be0b7593e35e681}{WIN\_ERR};
925     \hyperlink{decl_8h_afa1f7dd312c4c1b72afe3d2c8c2af691}{WIN\_MAP} = \hyperlink{wintype_8h_a56d1f4f2e517a4e81be0b7593e35e681}{WIN\_ERR};
926     \hyperlink{decl_8h_ae0690a38fd295760409995ce03b88329}{WIN\_STATUS} = \hyperlink{wintype_8h_a56d1f4f2e517a4e81be0b7593e35e681}{WIN\_ERR};
927     \hyperlink{decl_8h_aabd3637304d093f7077c788661a0a5fd}{WIN\_INVEN} = \hyperlink{wintype_8h_a56d1f4f2e517a4e81be0b7593e35e681}{WIN\_ERR};
928     \hyperlink{winami_8h_a5a32a2aaab2d6b517c4afde059621c35}{WIN\_BASE} = \hyperlink{wintype_8h_a56d1f4f2e517a4e81be0b7593e35e681}{WIN\_ERR};
929     \hyperlink{winami_8h_a6a2b237abaae6aafe05c90be6d49d72e}{WIN\_OVER} = \hyperlink{wintype_8h_a56d1f4f2e517a4e81be0b7593e35e681}{WIN\_ERR};
930 
931     \textcolor{keywordflow}{if} ( (IntuitionBase = (\textcolor{keyword}{struct} IntuitionBase *)
932       OpenLibrary(\textcolor{stringliteral}{"intuition.library"}, \hyperlink{winfuncs_8c_a671ae6e85756b2cbd50580e85216e311}{amii\_libvers} )) == \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
933     \{
934     \hyperlink{amiwind_8c_acd807e8b552ad939e3ae2fcb45e14c46}{Abort}(AG\_OpenLib | AO\_Intuition);
935     \}
936 
937     \textcolor{keywordflow}{if} ( (\hyperlink{amisnd_8c_a27b8182e2ba664f425ed01cbb790f0ad}{GfxBase} = (\textcolor{keyword}{struct} \hyperlink{amisnd_8c_a27b8182e2ba664f425ed01cbb790f0ad}{GfxBase} *)
938           OpenLibrary(\textcolor{stringliteral}{"graphics.library"}, \hyperlink{winfuncs_8c_a671ae6e85756b2cbd50580e85216e311}{amii\_libvers} )) == \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
939     \{
940     \hyperlink{amiwind_8c_acd807e8b552ad939e3ae2fcb45e14c46}{Abort}(AG\_OpenLib | AO\_GraphicsLib);
941     \}
942 
943     \textcolor{keywordflow}{if}( (LayersBase = (\textcolor{keyword}{struct} Library *)
944         OpenLibrary(\textcolor{stringliteral}{"layers.library"}, \hyperlink{winfuncs_8c_a671ae6e85756b2cbd50580e85216e311}{amii\_libvers} )) == \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
945     \{
946     \hyperlink{amiwind_8c_acd807e8b552ad939e3ae2fcb45e14c46}{Abort}(AG\_OpenLib | AO\_LayersLib);
947     \}
948 
949     \textcolor{keywordflow}{if} ((GadToolsBase = OpenLibrary(\textcolor{stringliteral}{"gadtools.library"}, \hyperlink{winfuncs_8c_a671ae6e85756b2cbd50580e85216e311}{amii\_libvers})) == 
      \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}) \{
950     \hyperlink{amiwind_8c_acd807e8b552ad939e3ae2fcb45e14c46}{Abort}(AG\_OpenLib | AO\_GadTools);
951     \}
952 
953     \textcolor{keywordflow}{if} ((AslBase = OpenLibrary(\textcolor{stringliteral}{"asl.library"}, \hyperlink{winfuncs_8c_a671ae6e85756b2cbd50580e85216e311}{amii\_libvers})) == \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}) \{
954     \hyperlink{amiwind_8c_acd807e8b552ad939e3ae2fcb45e14c46}{Abort}(AG\_OpenLib);
955     \}
956 
957     \hyperlink{winami_8h_a0ecec29922f9b6272c2b5344ce40b283}{amiIDisplay}=(\textcolor{keyword}{struct }\hyperlink{structamii__DisplayDesc}{amii\_DisplayDesc} *)\hyperlink{txt2iff_8c_ae273cbdce4cd64a076220ad06c41a5a1}{alloc}(\textcolor{keyword}{sizeof}(\textcolor{keyword}{struct} 
      \hyperlink{structamii__DisplayDesc}{amii\_DisplayDesc}));
958     memset( \hyperlink{winami_8h_a0ecec29922f9b6272c2b5344ce40b283}{amiIDisplay}, 0, \textcolor{keyword}{sizeof}( \textcolor{keyword}{struct} \hyperlink{structamii__DisplayDesc}{amii\_DisplayDesc} ) );
959 
960     \textcolor{comment}{/* Use Intuition sizes for overscan screens... */}
961 
962     \hyperlink{winami_8h_a0ecec29922f9b6272c2b5344ce40b283}{amiIDisplay}->\hyperlink{structamii__DisplayDesc_af95f6ae98ff1f0ccc96b06fdd296530e}{xpix} = 0;
963 \textcolor{preprocessor}{#ifdef  INTUI\_NEW\_LOOK}
964     \textcolor{keywordflow}{if}( IntuitionBase->LibNode.lib\_Version >= 37 )
965     \{
966     \textcolor{keywordflow}{if}( wbscr = LockPubScreen( \textcolor{stringliteral}{"Workbench"} ) )
967     \{
968         \hyperlink{winami_8h_a0ecec29922f9b6272c2b5344ce40b283}{amiIDisplay}->\hyperlink{structamii__DisplayDesc_af95f6ae98ff1f0ccc96b06fdd296530e}{xpix} = wbscr->Width;
969         \hyperlink{winami_8h_a0ecec29922f9b6272c2b5344ce40b283}{amiIDisplay}->\hyperlink{structamii__DisplayDesc_a24ab4ee31424d8d41235227d2d919b4e}{ypix} = wbscr->Height;
970         UnlockPubScreen( \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, wbscr );
971     \}
972     \}
973 \textcolor{preprocessor}{#endif}
974     \textcolor{keywordflow}{if}( \hyperlink{winami_8h_a0ecec29922f9b6272c2b5344ce40b283}{amiIDisplay}->\hyperlink{structamii__DisplayDesc_af95f6ae98ff1f0ccc96b06fdd296530e}{xpix} == 0 )
975     \{
976     \hyperlink{winami_8h_a0ecec29922f9b6272c2b5344ce40b283}{amiIDisplay}->\hyperlink{structamii__DisplayDesc_a24ab4ee31424d8d41235227d2d919b4e}{ypix} = \hyperlink{amisnd_8c_a27b8182e2ba664f425ed01cbb790f0ad}{GfxBase}->NormalDisplayRows;
977     \hyperlink{winami_8h_a0ecec29922f9b6272c2b5344ce40b283}{amiIDisplay}->\hyperlink{structamii__DisplayDesc_af95f6ae98ff1f0ccc96b06fdd296530e}{xpix} = \hyperlink{amisnd_8c_a27b8182e2ba664f425ed01cbb790f0ad}{GfxBase}->NormalDisplayColumns;
978     \}
979 
980     \hyperlink{winami_8h_a0ecec29922f9b6272c2b5344ce40b283}{amiIDisplay}->\hyperlink{structamii__DisplayDesc_a3f8803e91afede713625203f1cb22b80}{cols} = \hyperlink{winami_8h_a0ecec29922f9b6272c2b5344ce40b283}{amiIDisplay}->\hyperlink{structamii__DisplayDesc_af95f6ae98ff1f0ccc96b06fdd296530e}{xpix} / 
      \hyperlink{windefs_8h_a187fc573e9da24a6e0d86b11ed520fb3}{FONTWIDTH};
981 
982     \hyperlink{winami_8h_a0ecec29922f9b6272c2b5344ce40b283}{amiIDisplay}->\hyperlink{structamii__DisplayDesc_ae1f6917b2fc9ca142cd05d6fb615845d}{toplin}=0;
983     \hyperlink{winami_8h_a0ecec29922f9b6272c2b5344ce40b283}{amiIDisplay}->\hyperlink{structamii__DisplayDesc_aaee7b747d7620b0e53252edc0bfc5782}{rawprint}=0;
984     \hyperlink{winami_8h_a0ecec29922f9b6272c2b5344ce40b283}{amiIDisplay}->\hyperlink{structamii__DisplayDesc_a7cba815a57de07b72960832e3e454fb2}{lastwin}=0;
985 
986     \textcolor{keywordflow}{if}( \hyperlink{winext_8h_a686d780b14cde5aa754adc1baa2d6cfe}{bigscreen} == 0 )
987     \{
988     \textcolor{keywordflow}{if}( ( \hyperlink{amisnd_8c_a27b8182e2ba664f425ed01cbb790f0ad}{GfxBase}->ActiView->ViewPort->Modes & LACE ) == LACE )
989     \{
990         \hyperlink{winami_8h_a0ecec29922f9b6272c2b5344ce40b283}{amiIDisplay}->\hyperlink{structamii__DisplayDesc_a24ab4ee31424d8d41235227d2d919b4e}{ypix} *= 2;
991         \hyperlink{winext_8h_aa1d9d5d32edf678e70a63a35504983bd}{NewHackScreen}.ViewModes |= LACE;
992         \hyperlink{winext_8h_a686d780b14cde5aa754adc1baa2d6cfe}{bigscreen} = 1;
993     \}
994     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( \hyperlink{amisnd_8c_a27b8182e2ba664f425ed01cbb790f0ad}{GfxBase}->NormalDisplayRows >= 300 ||
995          \hyperlink{winami_8h_a0ecec29922f9b6272c2b5344ce40b283}{amiIDisplay}->\hyperlink{structamii__DisplayDesc_a24ab4ee31424d8d41235227d2d919b4e}{ypix} >= 300 )
996     \{
997         \hyperlink{winext_8h_a686d780b14cde5aa754adc1baa2d6cfe}{bigscreen} = 1;
998     \}
999     \}
1000     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( \hyperlink{winext_8h_a686d780b14cde5aa754adc1baa2d6cfe}{bigscreen} == -1 )
1001     \{
1002     \hyperlink{winext_8h_a686d780b14cde5aa754adc1baa2d6cfe}{bigscreen} = 0;
1003     forcenobig = 1;
1004     \}
1005     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( \hyperlink{winext_8h_a686d780b14cde5aa754adc1baa2d6cfe}{bigscreen} )
1006     \{
1007     \textcolor{comment}{/* If bigscreen requested and we don't have enough rows in}
1008 \textcolor{comment}{     * noninterlaced mode, switch to interlaced...}
1009 \textcolor{comment}{     */}
1010     \textcolor{keywordflow}{if}( \hyperlink{amisnd_8c_a27b8182e2ba664f425ed01cbb790f0ad}{GfxBase}->NormalDisplayRows < 300 )
1011     \{
1012         \hyperlink{winami_8h_a0ecec29922f9b6272c2b5344ce40b283}{amiIDisplay}->\hyperlink{structamii__DisplayDesc_a24ab4ee31424d8d41235227d2d919b4e}{ypix} *= 2;
1013         \hyperlink{winext_8h_aa1d9d5d32edf678e70a63a35504983bd}{NewHackScreen}.ViewModes |= LACE;
1014     \}
1015     \}
1016 
1017     \textcolor{keywordflow}{if}( !\hyperlink{winext_8h_a686d780b14cde5aa754adc1baa2d6cfe}{bigscreen} )
1018     \{
1019         \hyperlink{winext_8h_a5f7057e3372d8abeddf1df4f99752979}{alwaysinvent} = 0;
1020     \}
1021     \hyperlink{winami_8h_a0ecec29922f9b6272c2b5344ce40b283}{amiIDisplay}->\hyperlink{structamii__DisplayDesc_aff6e45d6e31f2217bb6ba101207b74a2}{rows} = \hyperlink{winami_8h_a0ecec29922f9b6272c2b5344ce40b283}{amiIDisplay}->\hyperlink{structamii__DisplayDesc_a24ab4ee31424d8d41235227d2d919b4e}{ypix} / 
      \hyperlink{windefs_8h_afb76020ea3a049e31eef16a4bf89bdd1}{FONTHEIGHT};
1022 
1023 \textcolor{preprocessor}{#ifdef HACKFONT}
1024     \textcolor{comment}{/*}
1025 \textcolor{comment}{     *  Load the fonts that we need.}
1026 \textcolor{comment}{     */}
1027 
1028     \textcolor{keywordflow}{if}( DiskfontBase =
1029         OpenLibrary( \textcolor{stringliteral}{"diskfont.library"}, \hyperlink{winfuncs_8c_a671ae6e85756b2cbd50580e85216e311}{amii\_libvers}  ) )
1030     \{
1031     \hyperlink{winext_8h_a7d3f60d4b667890526b20253da680106}{Hack80}.ta\_Name -= \hyperlink{windefs_8h_a71491b072ff6b37324925cbd32099ec5}{SIZEOF\_DISKNAME};
1032     \hyperlink{winext_8h_addd84e576afd1379e2aa7fa9921de0a5}{HackFont} = OpenDiskFont( &\hyperlink{winext_8h_a7d3f60d4b667890526b20253da680106}{Hack80} );
1033     \hyperlink{winext_8h_a7d3f60d4b667890526b20253da680106}{Hack80}.ta\_Name += \hyperlink{windefs_8h_a71491b072ff6b37324925cbd32099ec5}{SIZEOF\_DISKNAME};
1034 
1035     \textcolor{comment}{/* Textsfont13 is filled in with "FONT=" settings. The default is}
1036 \textcolor{comment}{     * courier/13.}
1037 \textcolor{comment}{     */}
1038     \hyperlink{winext_8h_a5ba89c525a49d1190a1a5ecdf5f65aa6}{TextsFont} = \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
1039     \textcolor{keywordflow}{if}( \hyperlink{winext_8h_a686d780b14cde5aa754adc1baa2d6cfe}{bigscreen} )
1040         \hyperlink{winext_8h_a5ba89c525a49d1190a1a5ecdf5f65aa6}{TextsFont} = OpenDiskFont( &\hyperlink{winext_8h_ae025c8071639e4d9dc591d74e997ed7d}{TextsFont13} );
1041 
1042     \textcolor{comment}{/* Try hack/8 for texts if no user specified font */}
1043     \textcolor{keywordflow}{if}( \hyperlink{winext_8h_a5ba89c525a49d1190a1a5ecdf5f65aa6}{TextsFont} == \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} )
1044     \{
1045         \hyperlink{winext_8h_a7d3f60d4b667890526b20253da680106}{Hack80}.ta\_Name -= \hyperlink{windefs_8h_a71491b072ff6b37324925cbd32099ec5}{SIZEOF\_DISKNAME};
1046         \hyperlink{winext_8h_a5ba89c525a49d1190a1a5ecdf5f65aa6}{TextsFont} = OpenDiskFont( &\hyperlink{winext_8h_a7d3f60d4b667890526b20253da680106}{Hack80} );
1047         \hyperlink{winext_8h_a7d3f60d4b667890526b20253da680106}{Hack80}.ta\_Name += \hyperlink{windefs_8h_a71491b072ff6b37324925cbd32099ec5}{SIZEOF\_DISKNAME};
1048     \}
1049 
1050     \textcolor{comment}{/* If no fonts, make everything topaz 8 for non-view windows.}
1051 \textcolor{comment}{     */}
1052     \hyperlink{winext_8h_a7d3f60d4b667890526b20253da680106}{Hack80}.ta\_Name = \textcolor{stringliteral}{"topaz.font"};
1053     \hyperlink{winfuncs_8c_ab4180a3dac152c2cdb9d0debce284a33}{RogueFont} = OpenFont( &\hyperlink{winext_8h_a7d3f60d4b667890526b20253da680106}{Hack80} );
1054     \textcolor{keywordflow}{if}(!\hyperlink{winfuncs_8c_ab4180a3dac152c2cdb9d0debce284a33}{RogueFont}) \hyperlink{txt2iff_8c_ab0824b6f5eb51db9371d2e9a222249d3}{panic}(\textcolor{stringliteral}{"Can't get topaz:8"});
1055     \textcolor{keywordflow}{if}( !\hyperlink{winext_8h_addd84e576afd1379e2aa7fa9921de0a5}{HackFont} || !\hyperlink{winext_8h_a5ba89c525a49d1190a1a5ecdf5f65aa6}{TextsFont} )
1056     \{
1057         \textcolor{keywordflow}{if}( !\hyperlink{winext_8h_addd84e576afd1379e2aa7fa9921de0a5}{HackFont} )
1058         \{
1059         \hyperlink{winext_8h_addd84e576afd1379e2aa7fa9921de0a5}{HackFont} = OpenFont( &\hyperlink{winext_8h_a7d3f60d4b667890526b20253da680106}{Hack80} );
1060         \textcolor{keywordflow}{if}( !\hyperlink{winext_8h_addd84e576afd1379e2aa7fa9921de0a5}{HackFont} )
1061             \hyperlink{txt2iff_8c_ab0824b6f5eb51db9371d2e9a222249d3}{panic}( \textcolor{stringliteral}{"Can't get a map font, topaz:8"} );
1062         \}
1063 
1064         \textcolor{keywordflow}{if}( !\hyperlink{winext_8h_a5ba89c525a49d1190a1a5ecdf5f65aa6}{TextsFont} )
1065         \{
1066         \hyperlink{winext_8h_a5ba89c525a49d1190a1a5ecdf5f65aa6}{TextsFont} = OpenFont( &\hyperlink{winext_8h_a7d3f60d4b667890526b20253da680106}{Hack80} );
1067         \textcolor{keywordflow}{if}( !\hyperlink{winext_8h_a5ba89c525a49d1190a1a5ecdf5f65aa6}{TextsFont} )
1068             \hyperlink{txt2iff_8c_ab0824b6f5eb51db9371d2e9a222249d3}{panic}( \textcolor{stringliteral}{"Can't open text font"} );
1069         \}
1070     \}
1071     CloseLibrary(DiskfontBase);
1072     DiskfontBase = \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
1073     \}
1074 \textcolor{preprocessor}{#endif}
1075 
1076     \textcolor{comment}{/* Adjust getlin window size to font */}
1077 
1078     \textcolor{keywordflow}{if} (\hyperlink{winext_8h_a5ba89c525a49d1190a1a5ecdf5f65aa6}{TextsFont}) \{
1079     \textcolor{keyword}{extern} SHORT \hyperlink{winreq_8c_a1381d91aade7627f31ecd17317b7c353}{BorderVectors1}[];
1080     \textcolor{keyword}{extern} SHORT \hyperlink{winreq_8c_a84e8d4156ff66493213a02bcdc659a50}{BorderVectors2}[];
1081     \textcolor{keyword}{extern} \textcolor{keyword}{struct }Gadget \hyperlink{winreq_8c_ae33165f9a2f6158045b42e35c9b17ad9}{Gadget2};
1082     \textcolor{keyword}{extern} \textcolor{keyword}{struct }Gadget \hyperlink{winreq_8c_a390a5f3d86203009670d84592ac44102}{String};
1083     \textcolor{keyword}{extern} \textcolor{keyword}{struct }NewWindow \hyperlink{winreq_8c_ae265d659b782e056634b435548b53c1e}{StrWindow};
1084     BorderVectors1[2] += (\hyperlink{winext_8h_a5ba89c525a49d1190a1a5ecdf5f65aa6}{TextsFont}->tf\_XSize-8)*6; \textcolor{comment}{/* strlen("Cancel") == 6 */}
1085     BorderVectors1[4] += (\hyperlink{winext_8h_a5ba89c525a49d1190a1a5ecdf5f65aa6}{TextsFont}->tf\_XSize-8)*6;
1086     BorderVectors1[5] += \hyperlink{winext_8h_a5ba89c525a49d1190a1a5ecdf5f65aa6}{TextsFont}->tf\_YSize-8;
1087     BorderVectors1[7] += \hyperlink{winext_8h_a5ba89c525a49d1190a1a5ecdf5f65aa6}{TextsFont}->tf\_YSize-8;
1088     BorderVectors2[2] += (\hyperlink{winext_8h_a5ba89c525a49d1190a1a5ecdf5f65aa6}{TextsFont}->tf\_XSize-8)*6;
1089     BorderVectors2[4] += (\hyperlink{winext_8h_a5ba89c525a49d1190a1a5ecdf5f65aa6}{TextsFont}->tf\_XSize-8)*6;
1090     BorderVectors2[5] += \hyperlink{winext_8h_a5ba89c525a49d1190a1a5ecdf5f65aa6}{TextsFont}->tf\_YSize-8;
1091     BorderVectors2[7] += \hyperlink{winext_8h_a5ba89c525a49d1190a1a5ecdf5f65aa6}{TextsFont}->tf\_YSize-8;
1092     \hyperlink{winreq_8c_ae33165f9a2f6158045b42e35c9b17ad9}{Gadget2}.TopEdge += \hyperlink{winext_8h_a5ba89c525a49d1190a1a5ecdf5f65aa6}{TextsFont}->tf\_YSize-8;
1093     \hyperlink{winreq_8c_ae33165f9a2f6158045b42e35c9b17ad9}{Gadget2}.Width += (\hyperlink{winext_8h_a5ba89c525a49d1190a1a5ecdf5f65aa6}{TextsFont}->tf\_XSize-8)*6;
1094     \hyperlink{winreq_8c_ae33165f9a2f6158045b42e35c9b17ad9}{Gadget2}.Height += \hyperlink{winext_8h_a5ba89c525a49d1190a1a5ecdf5f65aa6}{TextsFont}->tf\_YSize-8;
1095     \hyperlink{winreq_8c_a390a5f3d86203009670d84592ac44102}{String}.LeftEdge += (\hyperlink{winext_8h_a5ba89c525a49d1190a1a5ecdf5f65aa6}{TextsFont}->tf\_XSize-8)*6;
1096     \hyperlink{winreq_8c_a390a5f3d86203009670d84592ac44102}{String}.TopEdge += \hyperlink{winext_8h_a5ba89c525a49d1190a1a5ecdf5f65aa6}{TextsFont}->tf\_YSize-8;
1097     \hyperlink{winreq_8c_a390a5f3d86203009670d84592ac44102}{String}.Width += \hyperlink{winext_8h_a5ba89c525a49d1190a1a5ecdf5f65aa6}{TextsFont}->tf\_XSize-8;
1098     \hyperlink{winreq_8c_a390a5f3d86203009670d84592ac44102}{String}.Height += \hyperlink{winext_8h_a5ba89c525a49d1190a1a5ecdf5f65aa6}{TextsFont}->tf\_YSize-8;
1099     \hyperlink{winreq_8c_ae265d659b782e056634b435548b53c1e}{StrWindow}.Width += (\hyperlink{winext_8h_a5ba89c525a49d1190a1a5ecdf5f65aa6}{TextsFont}->tf\_XSize-8)*7;
1100     \hyperlink{winreq_8c_ae265d659b782e056634b435548b53c1e}{StrWindow}.Height += (\hyperlink{winext_8h_a5ba89c525a49d1190a1a5ecdf5f65aa6}{TextsFont}->tf\_YSize-8)*2; \textcolor{comment}{/* Titlebar + 1 row of gadgets */}
1101     \}
1102 
1103     \textcolor{comment}{/* This is the size screen we want to open, within reason... */}
1104 
1105     \hyperlink{winext_8h_aa1d9d5d32edf678e70a63a35504983bd}{NewHackScreen}.Width = \hyperlink{hack_8h_affe776513b24d84b39af8ab0930fef7f}{max}( \hyperlink{mkmap_8c_a241aeeb764887ae5e3de58b98f04b16d}{WIDTH}, \hyperlink{winami_8h_a0ecec29922f9b6272c2b5344ce40b283}{amiIDisplay}->
      \hyperlink{structamii__DisplayDesc_af95f6ae98ff1f0ccc96b06fdd296530e}{xpix} );
1106     \hyperlink{winext_8h_aa1d9d5d32edf678e70a63a35504983bd}{NewHackScreen}.Height = \hyperlink{hack_8h_affe776513b24d84b39af8ab0930fef7f}{max}( \hyperlink{windefs_8h_ae189e98d0ef9263c37869ce1ff3710a5}{SCREENHEIGHT}, 
      \hyperlink{winami_8h_a0ecec29922f9b6272c2b5344ce40b283}{amiIDisplay}->\hyperlink{structamii__DisplayDesc_a24ab4ee31424d8d41235227d2d919b4e}{ypix} );
1107     \{
1108     \textcolor{keyword}{static} \textcolor{keywordtype}{char} \hyperlink{dgn__yacc_8c_a6a2fc0c236288b07ce5bd1335ca89fa2}{fname}[18];
1109     sprintf(fname,\textcolor{stringliteral}{"NetHack %d.%d.%d"}, \hyperlink{patchlevel_8h_a1a53b724b6de666faa8a9e0d06d1055f}{VERSION\_MAJOR}, \hyperlink{patchlevel_8h_ae0cb52afb79b185b1bf82c7e235f682b}{VERSION\_MINOR}, 
      \hyperlink{patchlevel_8h_a0e36fabb240fb841cc1df19b076f45c9}{PATCHLEVEL});
1110     \hyperlink{winext_8h_aa1d9d5d32edf678e70a63a35504983bd}{NewHackScreen}.DefaultTitle=\hyperlink{dgn__yacc_8c_a6a2fc0c236288b07ce5bd1335ca89fa2}{fname};
1111     \}
1112 \textcolor{preprocessor}{#if 0}
1113     \hyperlink{winext_8h_aa1d9d5d32edf678e70a63a35504983bd}{NewHackScreen}.BlockPen = \hyperlink{windefs_8h_a22a9543e081938a146a8bce60a84200a}{C\_BLACK};
1114     \hyperlink{winext_8h_aa1d9d5d32edf678e70a63a35504983bd}{NewHackScreen}.DetailPen = \hyperlink{windefs_8h_a67fead37547ff67ca0a269d712e87822}{C\_WHITE};
1115 \textcolor{preprocessor}{#endif}
1116 \textcolor{preprocessor}{#ifdef  INTUI\_NEW\_LOOK}
1117     \textcolor{keywordflow}{if}( IntuitionBase->LibNode.lib\_Version >= 37 )
1118     \{
1119         \textcolor{keywordtype}{int} i;
1120     \textcolor{keyword}{struct }DimensionInfo dims;
1121     DisplayInfoHandle handle;
1122     \textcolor{keyword}{struct }DisplayInfo disp;
1123     \hyperlink{def__os2_8h_af632da489ebc3708ec3ab6791ee53fa4}{ULONG} modeid = DEFAULT\_MONITOR\_ID|HIRES\_KEY;
1124 
1125     \hyperlink{winext_8h_aa1d9d5d32edf678e70a63a35504983bd}{NewHackScreen}.Width = STDSCREENWIDTH;
1126     \hyperlink{winext_8h_aa1d9d5d32edf678e70a63a35504983bd}{NewHackScreen}.Height = STDSCREENHEIGHT;
1127 
1128 \textcolor{preprocessor}{#ifdef HACKFONT}
1129     \textcolor{keywordflow}{if} (\hyperlink{winext_8h_a5ba89c525a49d1190a1a5ecdf5f65aa6}{TextsFont}) \{
1130         \hyperlink{winext_8h_aa1d9d5d32edf678e70a63a35504983bd}{NewHackScreen}.Font = &\hyperlink{winext_8h_ae025c8071639e4d9dc591d74e997ed7d}{TextsFont13};
1131     \}
1132 \textcolor{preprocessor}{#endif}
1133 
1134     \textcolor{keywordflow}{if} ( \hyperlink{winext_8h_adb4cf3b576bf85b4faa561cc99b62e84}{amii\_scrnmode} == 0xffffffff ) \{
1135         \textcolor{keyword}{struct }ScreenModeRequester *SMR;
1136 \textcolor{preprocessor}{#ifdef \_\_GNUC\_\_}
1137         SM\_FilterHook.h\_Entry = (\textcolor{keywordtype}{void} *)&\hyperlink{winfuncs_8c_a49e0e4d194d63d3aadfdc40401701b06}{SM\_Filter};
1138 \textcolor{preprocessor}{#else}
1139         SM\_FilterHook.h\_Entry = (\hyperlink{def__os2_8h_af632da489ebc3708ec3ab6791ee53fa4}{ULONG}(*)())\hyperlink{winfuncs_8c_a49e0e4d194d63d3aadfdc40401701b06}{SM\_Filter};
1140 \textcolor{preprocessor}{#endif}
1141         SM\_FilterHook.h\_Data = 0;
1142         SM\_FilterHook.h\_SubEntry = 0;
1143         SMR = AllocAslRequest(ASL\_ScreenModeRequest,\hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL});
1144         \textcolor{keywordflow}{if} (AslRequestTags(SMR,
1145                 ASLSM\_FilterFunc, (\hyperlink{def__os2_8h_af632da489ebc3708ec3ab6791ee53fa4}{ULONG})&SM\_FilterHook,
1146                 TAG\_END))
1147         \hyperlink{winext_8h_adb4cf3b576bf85b4faa561cc99b62e84}{amii\_scrnmode} = SMR->sm\_DisplayID;
1148         \textcolor{keywordflow}{else}
1149         \hyperlink{winext_8h_adb4cf3b576bf85b4faa561cc99b62e84}{amii\_scrnmode} = 0;
1150         FreeAslRequest(SMR);
1151     \}
1152 
1153     \textcolor{keywordflow}{if}( forcenobig == 0 )
1154     \{
1155         \textcolor{keywordflow}{if}( ( wbscr = LockPubScreen( \textcolor{stringliteral}{"Workbench"} ) ) != \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} ||
1156         ( wbscr = LockPubScreen( \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} ) ) != \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} )
1157         \{
1158         \textcolor{comment}{/* Get the default pub screen's size */}
1159         modeid = GetVPModeID( &wbscr->ViewPort );
1160         \textcolor{keywordflow}{if}( modeid == INVALID\_ID ||
1161             ModeNotAvailable( modeid ) ||
1162             ( handle = FindDisplayInfo( modeid ) ) == \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} ||
1163             GetDisplayInfoData( handle, (\textcolor{keywordtype}{char} *)&dims, \textcolor{keyword}{sizeof}( dims ),
1164             DTAG\_DIMS, modeid ) <= 0 ||
1165             GetDisplayInfoData( handle, (\textcolor{keywordtype}{char} *)&disp, \textcolor{keyword}{sizeof}( disp ),
1166             DTAG\_DISP, modeid ) <= 0 )
1167         \{
1168             modeid = DEFAULT\_MONITOR\_ID|HIRES\_KEY;
1169             \textcolor{comment}{/* If the display database seems to not work, use the screen}
1170 \textcolor{comment}{             * dimensions}
1171 \textcolor{comment}{             */}
1172             \hyperlink{winext_8h_aa1d9d5d32edf678e70a63a35504983bd}{NewHackScreen}.Height = wbscr->Height;
1173             \hyperlink{winext_8h_aa1d9d5d32edf678e70a63a35504983bd}{NewHackScreen}.Width = wbscr->Width;
1174         
1175             \textcolor{comment}{/*}
1176 \textcolor{comment}{             * Request LACE if it looks laced.  For 2.1/3.0, we will get}
1177 \textcolor{comment}{             * promoted to the users choice of modes (if promotion is allowed)}
1178 \textcolor{comment}{             * If the user is using a dragable screen, things will get hosed}
1179 \textcolor{comment}{             * but that is life...}
1180 \textcolor{comment}{             */}
1181             \textcolor{keywordflow}{if}( wbscr->ViewPort.Modes & LACE )
1182             \hyperlink{winext_8h_aa1d9d5d32edf678e70a63a35504983bd}{NewHackScreen}.ViewModes |= LACE;
1183             modeid = -1;
1184         \}
1185         \textcolor{keywordflow}{else}
1186         \{
1187             \textcolor{comment}{/* Use the display database to get the correct information */}
1188             \textcolor{keywordflow}{if}( disp.PropertyFlags & DIPF\_IS\_LACE )
1189             \hyperlink{winext_8h_aa1d9d5d32edf678e70a63a35504983bd}{NewHackScreen}.ViewModes |= LACE;
1190             \hyperlink{winext_8h_aa1d9d5d32edf678e70a63a35504983bd}{NewHackScreen}.Height = dims.StdOScan.MaxY+1;
1191             \hyperlink{winext_8h_aa1d9d5d32edf678e70a63a35504983bd}{NewHackScreen}.Width = dims.StdOScan.MaxX+1;
1192         \}
1193         \hyperlink{winext_8h_aa1d9d5d32edf678e70a63a35504983bd}{NewHackScreen}.TopEdge = 0;
1194         \hyperlink{winext_8h_aa1d9d5d32edf678e70a63a35504983bd}{NewHackScreen}.LeftEdge = 0;
1195 
1196         UnlockPubScreen( \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, wbscr );
1197         \}
1198     \}
1199 
1200     \textcolor{keywordflow}{for}( i = 0; \hyperlink{winfuncs_8c_a3196b72476cb71b37649e1b48a7470e4}{scrntags}[i].ti\_Tag != TAG\_DONE; ++i )
1201     \{
1202         \textcolor{keywordflow}{switch}( \hyperlink{winfuncs_8c_a3196b72476cb71b37649e1b48a7470e4}{scrntags}[i].ti\_Tag )
1203         \{
1204         \textcolor{keywordflow}{case} SA\_DisplayID:
1205             \textcolor{keywordflow}{if}( !\hyperlink{winext_8h_adb4cf3b576bf85b4faa561cc99b62e84}{amii\_scrnmode} || ModeNotAvailable( \hyperlink{winext_8h_adb4cf3b576bf85b4faa561cc99b62e84}{amii\_scrnmode} ) )
1206             \{
1207             \textcolor{keywordflow}{if}( ModeNotAvailable( modeid ) )
1208             \{
1209                 \hyperlink{winfuncs_8c_a3196b72476cb71b37649e1b48a7470e4}{scrntags}[i].ti\_Tag = TAG\_IGNORE;
1210                 \textcolor{keywordflow}{break};
1211             \}
1212             \textcolor{keywordflow}{else}
1213                 \hyperlink{winfuncs_8c_a3196b72476cb71b37649e1b48a7470e4}{scrntags}[i].ti\_Data = (long)modeid;
1214             \}
1215             \textcolor{keywordflow}{else}
1216             modeid = \hyperlink{winfuncs_8c_a3196b72476cb71b37649e1b48a7470e4}{scrntags}[i].ti\_Data = (long)\hyperlink{winext_8h_adb4cf3b576bf85b4faa561cc99b62e84}{amii\_scrnmode};
1217             \textcolor{keywordflow}{if}( ( handle = FindDisplayInfo( modeid ) ) != \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} &&
1218             GetDisplayInfoData( handle, (\textcolor{keywordtype}{char} *)&dims, \textcolor{keyword}{sizeof}( dims ),
1219                 DTAG\_DIMS, modeid ) > 0 &&
1220             GetDisplayInfoData( handle, (\textcolor{keywordtype}{char} *)&disp, \textcolor{keyword}{sizeof}( disp ),
1221                 DTAG\_DISP, modeid ) > 0 )
1222             \{
1223             \textcolor{keywordflow}{if}( disp.PropertyFlags & DIPF\_IS\_LACE )
1224                 \hyperlink{winext_8h_aa1d9d5d32edf678e70a63a35504983bd}{NewHackScreen}.ViewModes |= LACE;
1225             \hyperlink{winext_8h_aa1d9d5d32edf678e70a63a35504983bd}{NewHackScreen}.Height = dims.StdOScan.MaxY+1;
1226             \hyperlink{winext_8h_aa1d9d5d32edf678e70a63a35504983bd}{NewHackScreen}.Width = dims.StdOScan.MaxX+1;
1227             \}
1228             \textcolor{keywordflow}{break};
1229 
1230         \textcolor{keywordflow}{case} SA\_Pens:
1231             \hyperlink{winfuncs_8c_a3196b72476cb71b37649e1b48a7470e4}{scrntags}[i].ti\_Data = (long)\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.amii\_dripens;
1232             \textcolor{keywordflow}{break};
1233         \}
1234     \}
1235     \}
1236 \textcolor{preprocessor}{#endif}
1237 
1238     \textcolor{keywordflow}{if}( \hyperlink{windefs_8h_aa0b90aaeb74b2488a95f0902cef09cbf}{WINVERS\_AMIV} )
1239     \hyperlink{winfuncs_8c_a3ddc62e44fb01a556d409b3082c78a7a}{amii\_bmhd} = \hyperlink{winchar_8c_a12a3108f5619672ce857bcbaec0fac12}{ReadTileImageFiles}( );
1240     \textcolor{keywordflow}{else}
1241     memcpy( \hyperlink{winext_8h_a1b12e8b2fa45f0d58b47b42d920c641c}{amii\_initmap}, \hyperlink{winext_8h_a46e6dbfbaf847bf2f317972ba86aaed3}{amii\_init\_map}, \textcolor{keyword}{sizeof}( 
      \hyperlink{winext_8h_a1b12e8b2fa45f0d58b47b42d920c641c}{amii\_initmap} ) );
1242     memcpy(\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.amii\_curmap,\hyperlink{winext_8h_a1b12e8b2fa45f0d58b47b42d920c641c}{amii\_initmap},\textcolor{keyword}{sizeof}(\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.amii\_curmap));
1243 
1244     \textcolor{comment}{/* Find out how deep the screen needs to be, 32 planes is enough! */}
1245     \textcolor{keywordflow}{for}( i = 0; i < 32; ++i )
1246     \{
1247     \textcolor{keywordflow}{if}( ( 1L << i ) >= \hyperlink{winext_8h_ae3cfaa8053fd2f089c9fe1ba90289e98}{amii\_numcolors} )
1248         \textcolor{keywordflow}{break};
1249     \}
1250 
1251     \hyperlink{winext_8h_aa1d9d5d32edf678e70a63a35504983bd}{NewHackScreen}.Depth = i;
1252 
1253     \textcolor{comment}{/* If for some reason Height/Width became smaller than the required,}
1254 \textcolor{comment}{    have the required one */}
1255     \textcolor{keywordflow}{if} (\hyperlink{winext_8h_aa1d9d5d32edf678e70a63a35504983bd}{NewHackScreen}.Height < \hyperlink{windefs_8h_ae189e98d0ef9263c37869ce1ff3710a5}{SCREENHEIGHT})
1256     \hyperlink{winext_8h_aa1d9d5d32edf678e70a63a35504983bd}{NewHackScreen}.Height = \hyperlink{windefs_8h_ae189e98d0ef9263c37869ce1ff3710a5}{SCREENHEIGHT};
1257     \textcolor{keywordflow}{if} (\hyperlink{winext_8h_aa1d9d5d32edf678e70a63a35504983bd}{NewHackScreen}.Width < \hyperlink{mkmap_8c_a241aeeb764887ae5e3de58b98f04b16d}{WIDTH})
1258     \hyperlink{winext_8h_aa1d9d5d32edf678e70a63a35504983bd}{NewHackScreen}.Width = \hyperlink{mkmap_8c_a241aeeb764887ae5e3de58b98f04b16d}{WIDTH};
1259 \textcolor{preprocessor}{#ifdef HACKFONT}
1260     i = \hyperlink{hack_8h_affe776513b24d84b39af8ab0930fef7f}{max}(\hyperlink{winext_8h_a5ba89c525a49d1190a1a5ecdf5f65aa6}{TextsFont}->tf\_XSize, \hyperlink{winext_8h_addd84e576afd1379e2aa7fa9921de0a5}{HackFont}->tf\_XSize);
1261     \textcolor{keywordflow}{if} (\hyperlink{winext_8h_aa1d9d5d32edf678e70a63a35504983bd}{NewHackScreen}.Width < 80*i+4)
1262     \hyperlink{winext_8h_aa1d9d5d32edf678e70a63a35504983bd}{NewHackScreen}.Width = 80*i+4;
1263 \textcolor{preprocessor}{#endif}
1264 
1265     \textcolor{comment}{/* While openscreen fails try fewer colors to see if that is the problem. */}
1266     \textcolor{keywordflow}{while}( ( \hyperlink{winext_8h_ad92207d95deab9f96588451c7ed34419}{HackScreen} = OpenScreen( (\textcolor{keywordtype}{void} *)&\hyperlink{winext_8h_aa1d9d5d32edf678e70a63a35504983bd}{NewHackScreen} ) ) == 
      \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} )
1267     \{
1268 \textcolor{preprocessor}{#ifdef  TEXTCOLOR}
1269     \textcolor{keywordflow}{if}( --\hyperlink{winext_8h_aa1d9d5d32edf678e70a63a35504983bd}{NewHackScreen}.Depth < 3 )
1270 \textcolor{preprocessor}{#else}
1271     \textcolor{keywordflow}{if}( --\hyperlink{winext_8h_aa1d9d5d32edf678e70a63a35504983bd}{NewHackScreen}.Depth < 2 )
1272 \textcolor{preprocessor}{#endif}
1273         \hyperlink{amiwind_8c_acd807e8b552ad939e3ae2fcb45e14c46}{Abort}( AN\_OpenScreen & ~AT\_DeadEnd );
1274     \}
1275     \hyperlink{winext_8h_ae3cfaa8053fd2f089c9fe1ba90289e98}{amii\_numcolors} = 1L << \hyperlink{winext_8h_aa1d9d5d32edf678e70a63a35504983bd}{NewHackScreen}.Depth;
1276     \textcolor{keywordflow}{if}( \hyperlink{winext_8h_ad92207d95deab9f96588451c7ed34419}{HackScreen}->Height > 300 && forcenobig == 0 )
1277     \hyperlink{winext_8h_a686d780b14cde5aa754adc1baa2d6cfe}{bigscreen} = 1;
1278     \textcolor{keywordflow}{else}
1279     \hyperlink{winext_8h_a686d780b14cde5aa754adc1baa2d6cfe}{bigscreen} = 0;
1280 
1281 \textcolor{preprocessor}{#ifdef  INTUI\_NEW\_LOOK}
1282     \textcolor{keywordflow}{if}( IntuitionBase->LibNode.lib\_Version >= 37 )
1283     PubScreenStatus( \hyperlink{winext_8h_ad92207d95deab9f96588451c7ed34419}{HackScreen}, 0 );
1284 \textcolor{preprocessor}{#endif}
1285 
1286     \hyperlink{winami_8h_a0ecec29922f9b6272c2b5344ce40b283}{amiIDisplay}->\hyperlink{structamii__DisplayDesc_a24ab4ee31424d8d41235227d2d919b4e}{ypix} = \hyperlink{winext_8h_ad92207d95deab9f96588451c7ed34419}{HackScreen}->Height;
1287     \hyperlink{winami_8h_a0ecec29922f9b6272c2b5344ce40b283}{amiIDisplay}->\hyperlink{structamii__DisplayDesc_af95f6ae98ff1f0ccc96b06fdd296530e}{xpix} = \hyperlink{winext_8h_ad92207d95deab9f96588451c7ed34419}{HackScreen}->Width;
1288 
1289     LoadRGB4(&\hyperlink{winext_8h_ad92207d95deab9f96588451c7ed34419}{HackScreen}->ViewPort, \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.amii\_curmap, 
      \hyperlink{winext_8h_ae3cfaa8053fd2f089c9fe1ba90289e98}{amii\_numcolors} );
1290 
1291     \hyperlink{winext_8h_a2600aa64e49452deedad3f3d1e2e7977}{VisualInfo} = GetVisualInfo(\hyperlink{winext_8h_ad92207d95deab9f96588451c7ed34419}{HackScreen}, TAG\_END);
1292     \hyperlink{winext_8h_a53bb7c231eb4b4a1df2f0a7e3b21786a}{MenuStrip} = CreateMenus(\hyperlink{amimenu_8c_acd7767411f6f7ed30ebd817e7180ebee}{GTHackMenu}, TAG\_END);
1293     LayoutMenus(\hyperlink{winext_8h_a53bb7c231eb4b4a1df2f0a7e3b21786a}{MenuStrip}, \hyperlink{winext_8h_a2600aa64e49452deedad3f3d1e2e7977}{VisualInfo}, GTMN\_NewLookMenus, 
      \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE}, TAG\_END);
1294 
1295     \textcolor{comment}{/* Display the copyright etc... */}
1296 
1297     \textcolor{keywordflow}{if}( \hyperlink{winami_8h_a5a32a2aaab2d6b517c4afde059621c35}{WIN\_BASE} == \hyperlink{wintype_8h_a56d1f4f2e517a4e81be0b7593e35e681}{WIN\_ERR} )
1298     \hyperlink{winami_8h_a5a32a2aaab2d6b517c4afde059621c35}{WIN\_BASE} = \hyperlink{winfuncs_8c_accd860a04364dbcccc55022ee713e9d4}{amii\_create\_nhwindow}( \hyperlink{macwin_8h_ab575e634e51462bf534b7ee541cefc46}{NHW\_BASE} );
1299     \hyperlink{winfuncs_8c_ac2b43ff5e6b6394438fd8fde2008d264}{amii\_clear\_nhwindow}( \hyperlink{winami_8h_a5a32a2aaab2d6b517c4afde059621c35}{WIN\_BASE} );
1300     \hyperlink{winproto_8h_a9fdbf76005ec3ae5b77b3002366c04d3}{amii\_putstr}( \hyperlink{winami_8h_a5a32a2aaab2d6b517c4afde059621c35}{WIN\_BASE}, 0, \textcolor{stringliteral}{""} );
1301     \hyperlink{winproto_8h_a9fdbf76005ec3ae5b77b3002366c04d3}{amii\_putstr}( \hyperlink{winami_8h_a5a32a2aaab2d6b517c4afde059621c35}{WIN\_BASE}, 0, \textcolor{stringliteral}{""} );
1302     \hyperlink{winproto_8h_a9fdbf76005ec3ae5b77b3002366c04d3}{amii\_putstr}( \hyperlink{winami_8h_a5a32a2aaab2d6b517c4afde059621c35}{WIN\_BASE}, 0, \textcolor{stringliteral}{""} );
1303     \hyperlink{winproto_8h_a9fdbf76005ec3ae5b77b3002366c04d3}{amii\_putstr}( \hyperlink{winami_8h_a5a32a2aaab2d6b517c4afde059621c35}{WIN\_BASE}, 0, \hyperlink{patchlevel_8h_a31bf6260dfee590f28735d5a27134912}{COPYRIGHT\_BANNER\_A});
1304     \hyperlink{winproto_8h_a9fdbf76005ec3ae5b77b3002366c04d3}{amii\_putstr}( \hyperlink{winami_8h_a5a32a2aaab2d6b517c4afde059621c35}{WIN\_BASE}, 0, \hyperlink{patchlevel_8h_a991809ab96e6f409bbf21d0d6e81d633}{COPYRIGHT\_BANNER\_B});
1305     \hyperlink{winproto_8h_a9fdbf76005ec3ae5b77b3002366c04d3}{amii\_putstr}( \hyperlink{winami_8h_a5a32a2aaab2d6b517c4afde059621c35}{WIN\_BASE}, 0, \hyperlink{patchlevel_8h_a4eb1b20c11643715355dbf210025037f}{COPYRIGHT\_BANNER\_C});
1306     \hyperlink{winproto_8h_a9fdbf76005ec3ae5b77b3002366c04d3}{amii\_putstr}( \hyperlink{winami_8h_a5a32a2aaab2d6b517c4afde059621c35}{WIN\_BASE}, 0, \textcolor{stringliteral}{""});
1307 
1308     \hyperlink{amidos_8c_a55b41cec1916f4628807321204d03d9f}{Initialized} = 1;
1309 \}
\end{DoxyCode}
\hypertarget{winfuncs_8c_af8feaba4b73730f44a8f97fa829c5dc9}{\index{winfuncs.\+c@{winfuncs.\+c}!amii\+\_\+mark\+\_\+synch@{amii\+\_\+mark\+\_\+synch}}
\index{amii\+\_\+mark\+\_\+synch@{amii\+\_\+mark\+\_\+synch}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{amii\+\_\+mark\+\_\+synch}]{\setlength{\rightskip}{0pt plus 5cm}void amii\+\_\+mark\+\_\+synch (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{winfuncs_8c_af8feaba4b73730f44a8f97fa829c5dc9}


Definition at line 2206 of file winfuncs.\+c.



References ami\+I\+Display.


\begin{DoxyCode}
2207 \{
2208     \textcolor{keywordflow}{if}(!\hyperlink{winami_8h_a0ecec29922f9b6272c2b5344ce40b283}{amiIDisplay})
2209     fflush(stderr);
2210 \textcolor{comment}{/* anything else?  do we need this much? */}
2211 \}
\end{DoxyCode}
\hypertarget{winfuncs_8c_ad2513d411f99ff1bb783473275fedd1a}{\index{winfuncs.\+c@{winfuncs.\+c}!amii\+\_\+print\+\_\+glyph@{amii\+\_\+print\+\_\+glyph}}
\index{amii\+\_\+print\+\_\+glyph@{amii\+\_\+print\+\_\+glyph}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{amii\+\_\+print\+\_\+glyph}]{\setlength{\rightskip}{0pt plus 5cm}void amii\+\_\+print\+\_\+glyph (
\begin{DoxyParamCaption}
\item[{{\bf winid}}]{win, }
\item[{{\bf xchar}}]{x, }
\item[{{\bf xchar}}]{y, }
\item[{int}]{glyph}
\end{DoxyParamCaption}
)}}\label{winfuncs_8c_ad2513d411f99ff1bb783473275fedd1a}


Definition at line 2039 of file winfuncs.\+c.



References amiga\+\_\+print\+\_\+glyph(), amii\+\_\+curs(), amii\+\_\+wins, amii\+\_\+\+Win\+Desc\+::curx, d\+\_\+level\+::dlevel, Is\+\_\+rogue\+\_\+level, mapglyph(), N\+H\+W\+\_\+\+M\+A\+P, N\+O\+\_\+\+C\+O\+L\+O\+R, N\+U\+L\+L, panic(), R\+E\+I\+N\+C\+A\+R\+N\+A\+T\+I\+O\+N, amii\+\_\+\+Win\+Desc\+::type, u, you\+::uz, W\+I\+N\+\_\+\+E\+R\+R, winpanicstr, and W\+I\+N\+V\+E\+R\+S\+\_\+\+A\+M\+I\+V.


\begin{DoxyCode}
2043 \{
2044     \textcolor{keyword}{struct }\hyperlink{structamii__WinDesc}{amii\_WinDesc} *cw;
2045     \hyperlink{config_8h_a65f85814a8290f9797005d3b28e7e5fc}{uchar}   ch;
2046     \textcolor{keywordtype}{int}     color, och;
2047     \textcolor{keyword}{extern} \textcolor{keyword}{const} \textcolor{keywordtype}{int} zapcolors[];
2048     \textcolor{keywordtype}{unsigned} special;
2049 
2050     \textcolor{comment}{/* In order for the overview window to work, we can not clip here */}
2051     \textcolor{keywordflow}{if}( !\hyperlink{windefs_8h_aa0b90aaeb74b2488a95f0902cef09cbf}{WINVERS\_AMIV} )
2052     \{
2053 \textcolor{preprocessor}{#ifdef  CLIPPING}
2054     \textcolor{comment}{/* If point not in visible part of window just skip it */}
2055     \textcolor{keywordflow}{if}( clipping )
2056     \{
2057         \textcolor{keywordflow}{if}( x <= clipx || y < clipy || x >= clipxmax || y >= clipymax )
2058         \textcolor{keywordflow}{return};
2059     \}
2060 \textcolor{preprocessor}{#endif}
2061     \}
2062 
2063     \textcolor{keywordflow}{if}( \hyperlink{structamii__WinDesc_a9835faa4d66643cd889203e26edee8ae}{win} == \hyperlink{wintype_8h_a56d1f4f2e517a4e81be0b7593e35e681}{WIN\_ERR} || (cw=\hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[\hyperlink{structamii__WinDesc_a9835faa4d66643cd889203e26edee8ae}{win}]) == \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} || cw->
      \hyperlink{structamii__WinDesc_ab90130f7f09b474842877b2f71d708e0}{type} != \hyperlink{wintype_8h_a756172f2e22a3d287cfaf6bc771df606}{NHW\_MAP})
2064     \{
2065     \hyperlink{txt2iff_8c_ab0824b6f5eb51db9371d2e9a222249d3}{panic}(\hyperlink{winext_8h_a4264157ee8930111caf21b62c212e08c}{winpanicstr},win,\textcolor{stringliteral}{"amii\_print\_glyph"});
2066     \}
2067 
2068 \textcolor{preprocessor}{#if 0}
2069 \{
2070 \textcolor{keyword}{static} \textcolor{keywordtype}{int} x=-1;
2071 \textcolor{keywordflow}{if}(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz}.\hyperlink{structd__level_a7878568dc81a7efd40bea0206dbd109d}{dlevel} != x)\{
2072  fprintf(stderr,\textcolor{stringliteral}{"lvlchg: %d (%d)\(\backslash\)n"},\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz}.\hyperlink{structd__level_a7878568dc81a7efd40bea0206dbd109d}{dlevel},\hyperlink{dungeon_8h_a2732117523c8540638daf4315dda16b9}{Is\_rogue\_level}(&
      \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz}));
2073  x = \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz}.\hyperlink{structd__level_a7878568dc81a7efd40bea0206dbd109d}{dlevel};
2074 \}
2075 \}
2076 \textcolor{preprocessor}{#endif}
2077     \textcolor{keywordflow}{if}(
2078     \hyperlink{windefs_8h_aa0b90aaeb74b2488a95f0902cef09cbf}{WINVERS\_AMIV}
2079 #ifdef \hyperlink{config_8h_a6b9728c18024eafa560aaeb30159e47d}{REINCARNATION}
2080     && !\hyperlink{dungeon_8h_a2732117523c8540638daf4315dda16b9}{Is\_rogue\_level}(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz})
2081 #endif
2082     )
2083     \{
2084     \hyperlink{winfuncs_8c_ad16d76372b2790f7b6926dc6174e4111}{amii\_curs}(win,x,y);
2085     \hyperlink{winproto_8h_a203b786b96fe4c8be21c63f474486d52}{amiga\_print\_glyph}(win,0,glyph);
2086     \}
2087     \textcolor{keywordflow}{else}        \textcolor{comment}{/* AMII, or Rogue level in either version */}
2088     \{
2089     \textcolor{comment}{/* map glyph to character and color */}
2090         \hyperlink{mapglyph_8c_a41586afa30d047782223d168f8912784}{mapglyph}(glyph, &och, &color, &special, x, y);
2091                 \textcolor{comment}{/* XXX next if should be ifdef REINCARNATION */}
2092     ch = (\hyperlink{config_8h_a65f85814a8290f9797005d3b28e7e5fc}{uchar})och;
2093     \textcolor{keywordflow}{if}( \hyperlink{windefs_8h_aa0b90aaeb74b2488a95f0902cef09cbf}{WINVERS\_AMIV} )\{         \textcolor{comment}{/* implies Rogue level here */}
2094         \hyperlink{winfuncs_8c_ad16d76372b2790f7b6926dc6174e4111}{amii\_curs}(win,x,y);
2095         \hyperlink{winproto_8h_a203b786b96fe4c8be21c63f474486d52}{amiga\_print\_glyph}(win,\hyperlink{color_8h_a69d859e537f858ca285d77a66755ded6}{NO\_COLOR},ch + 10000);
2096     \} \textcolor{keywordflow}{else} \{
2097         \textcolor{comment}{/* Move the cursor. */}
2098         \hyperlink{winfuncs_8c_ad16d76372b2790f7b6926dc6174e4111}{amii\_curs}(win,x,y+2);
2099 
2100 \textcolor{preprocessor}{#ifdef TEXTCOLOR}
2101         \textcolor{comment}{/* Turn off color if rogue level. */}
2102 \textcolor{preprocessor}{# ifdef REINCARNATION}
2103         \textcolor{keywordflow}{if} (\hyperlink{dungeon_8h_a2732117523c8540638daf4315dda16b9}{Is\_rogue\_level}(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz}))
2104         color = \hyperlink{color_8h_a69d859e537f858ca285d77a66755ded6}{NO\_COLOR};
2105 \textcolor{preprocessor}{#  endif}
2106 
2107         \hyperlink{winproto_8h_a203b786b96fe4c8be21c63f474486d52}{amiga\_print\_glyph}(win,color,ch);
2108 \textcolor{preprocessor}{#else}
2109         g\_putch(ch);    \textcolor{comment}{/* print the character */}
2110 \textcolor{preprocessor}{#endif}
2111         cw->\hyperlink{structamii__WinDesc_a4ae862475cf0a2f6aed98394d3ac12bd}{curx}++;     \textcolor{comment}{/* one character over */}
2112     \}
2113     \}
2114 \}
\end{DoxyCode}
\hypertarget{winfuncs_8c_aab47181efcfda8c085c6739aca882b94}{\index{winfuncs.\+c@{winfuncs.\+c}!amii\+\_\+raw\+\_\+print@{amii\+\_\+raw\+\_\+print}}
\index{amii\+\_\+raw\+\_\+print@{amii\+\_\+raw\+\_\+print}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{amii\+\_\+raw\+\_\+print}]{\setlength{\rightskip}{0pt plus 5cm}void amii\+\_\+raw\+\_\+print (
\begin{DoxyParamCaption}
\item[{{\bf const} char $\ast$}]{s}
\end{DoxyParamCaption}
)}}\label{winfuncs_8c_aab47181efcfda8c085c6739aca882b94}


Definition at line 2119 of file winfuncs.\+c.



References amii\+\_\+putstr(), amii\+\_\+rawprwin, amii\+\_\+wins, ami\+I\+Display, init\+\_\+nhwindows, Initialized, amii\+\_\+\+Display\+Desc\+::rawprint, stdout, W\+I\+N\+\_\+\+B\+A\+S\+E, W\+I\+N\+\_\+\+E\+R\+R, and W\+I\+N\+\_\+\+M\+A\+P.


\begin{DoxyCode}
2121 \{
2122     \textcolor{keywordtype}{int} argc = 0;
2123 
2124     \textcolor{keywordflow}{if}( !s )
2125     \textcolor{keywordflow}{return};
2126     \textcolor{keywordflow}{if}(\hyperlink{winami_8h_a0ecec29922f9b6272c2b5344ce40b283}{amiIDisplay})
2127     \hyperlink{winami_8h_a0ecec29922f9b6272c2b5344ce40b283}{amiIDisplay}->\hyperlink{structamii__DisplayDesc_aaee7b747d7620b0e53252edc0bfc5782}{rawprint}++;
2128 
2129     \textcolor{keywordflow}{if} (!\hyperlink{amidos_8c_a55b41cec1916f4628807321204d03d9f}{Initialized}) \{ \textcolor{comment}{/* Not yet screen open ... */}
2130         puts(s);
2131         fflush(\hyperlink{lev__lex_8h_a0c0ef221f95f64e8632451312fd18cc8}{stdout});
2132         \textcolor{keywordflow}{return};
2133     \}
2134 
2135     \textcolor{keywordflow}{if}( \hyperlink{amidos_8c_a55b41cec1916f4628807321204d03d9f}{Initialized} == 0 && \hyperlink{winami_8h_a5a32a2aaab2d6b517c4afde059621c35}{WIN\_BASE} == \hyperlink{wintype_8h_a56d1f4f2e517a4e81be0b7593e35e681}{WIN\_ERR} )
2136         \hyperlink{winprocs_8h_a613c5d847a2df7d7ddca4a1308014964}{init\_nhwindows}(&argc, (\textcolor{keywordtype}{char} **)0);
2137 
2138     \textcolor{keywordflow}{if}( \hyperlink{winext_8h_adfe028fce2921a7a5f7713029ad51769}{amii\_rawprwin} != \hyperlink{wintype_8h_a56d1f4f2e517a4e81be0b7593e35e681}{WIN\_ERR} )
2139     \hyperlink{winproto_8h_a9fdbf76005ec3ae5b77b3002366c04d3}{amii\_putstr}( \hyperlink{winext_8h_adfe028fce2921a7a5f7713029ad51769}{amii\_rawprwin}, 0, s );
2140     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( \hyperlink{decl_8h_afa1f7dd312c4c1b72afe3d2c8c2af691}{WIN\_MAP} != \hyperlink{wintype_8h_a56d1f4f2e517a4e81be0b7593e35e681}{WIN\_ERR} && \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[ \hyperlink{decl_8h_afa1f7dd312c4c1b72afe3d2c8c2af691}{WIN\_MAP} ] )
2141     \hyperlink{winproto_8h_a9fdbf76005ec3ae5b77b3002366c04d3}{amii\_putstr}( WIN\_MAP, 0, s );
2142     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( \hyperlink{winami_8h_a5a32a2aaab2d6b517c4afde059621c35}{WIN\_BASE} != \hyperlink{wintype_8h_a56d1f4f2e517a4e81be0b7593e35e681}{WIN\_ERR} && \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[ \hyperlink{winami_8h_a5a32a2aaab2d6b517c4afde059621c35}{WIN\_BASE} ] )
2143     \hyperlink{winproto_8h_a9fdbf76005ec3ae5b77b3002366c04d3}{amii\_putstr}( WIN\_BASE, 0, s );
2144     \textcolor{keywordflow}{else}
2145     \{
2146     puts( s);
2147     fflush(\hyperlink{lev__lex_8h_a0c0ef221f95f64e8632451312fd18cc8}{stdout});
2148     \}
2149 \}
\end{DoxyCode}
\hypertarget{winfuncs_8c_a7c303cbf1af1f00c78362eef85bbfa64}{\index{winfuncs.\+c@{winfuncs.\+c}!amii\+\_\+raw\+\_\+print\+\_\+bold@{amii\+\_\+raw\+\_\+print\+\_\+bold}}
\index{amii\+\_\+raw\+\_\+print\+\_\+bold@{amii\+\_\+raw\+\_\+print\+\_\+bold}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{amii\+\_\+raw\+\_\+print\+\_\+bold}]{\setlength{\rightskip}{0pt plus 5cm}void amii\+\_\+raw\+\_\+print\+\_\+bold (
\begin{DoxyParamCaption}
\item[{{\bf const} char $\ast$}]{s}
\end{DoxyParamCaption}
)}}\label{winfuncs_8c_a7c303cbf1af1f00c78362eef85bbfa64}


Definition at line 2156 of file winfuncs.\+c.



References amii\+\_\+putstr(), amii\+\_\+rawprwin, amii\+\_\+wins, ami\+I\+Display, init\+\_\+nhwindows, Initialized, printf, amii\+\_\+\+Display\+Desc\+::rawprint, stdout, W\+I\+N\+\_\+\+B\+A\+S\+E, W\+I\+N\+\_\+\+E\+R\+R, and W\+I\+N\+\_\+\+M\+A\+P.


\begin{DoxyCode}
2158 \{
2159     \textcolor{keywordtype}{int} argc = 0;
2160 
2161     \textcolor{keywordflow}{if}( !s )
2162     \textcolor{keywordflow}{return};
2163 
2164     \textcolor{keywordflow}{if}(\hyperlink{winami_8h_a0ecec29922f9b6272c2b5344ce40b283}{amiIDisplay})
2165     \hyperlink{winami_8h_a0ecec29922f9b6272c2b5344ce40b283}{amiIDisplay}->\hyperlink{structamii__DisplayDesc_aaee7b747d7620b0e53252edc0bfc5782}{rawprint}++;
2166 
2167     \textcolor{keywordflow}{if} (!\hyperlink{amidos_8c_a55b41cec1916f4628807321204d03d9f}{Initialized}) \{ \textcolor{comment}{/* Not yet screen open ... */}
2168         puts(s);
2169         fflush(\hyperlink{lev__lex_8h_a0c0ef221f95f64e8632451312fd18cc8}{stdout});
2170         \textcolor{keywordflow}{return};
2171     \}
2172 
2173     \textcolor{keywordflow}{if}( \hyperlink{amidos_8c_a55b41cec1916f4628807321204d03d9f}{Initialized} == 0 && \hyperlink{winami_8h_a5a32a2aaab2d6b517c4afde059621c35}{WIN\_BASE} == \hyperlink{wintype_8h_a56d1f4f2e517a4e81be0b7593e35e681}{WIN\_ERR} )
2174         \hyperlink{winprocs_8h_a613c5d847a2df7d7ddca4a1308014964}{init\_nhwindows}(&argc, (\textcolor{keywordtype}{char} **)0);
2175 
2176     \textcolor{keywordflow}{if}( \hyperlink{winext_8h_adfe028fce2921a7a5f7713029ad51769}{amii\_rawprwin} != \hyperlink{wintype_8h_a56d1f4f2e517a4e81be0b7593e35e681}{WIN\_ERR} )
2177     \hyperlink{winproto_8h_a9fdbf76005ec3ae5b77b3002366c04d3}{amii\_putstr}( \hyperlink{winext_8h_adfe028fce2921a7a5f7713029ad51769}{amii\_rawprwin}, 1, s );
2178     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( \hyperlink{decl_8h_afa1f7dd312c4c1b72afe3d2c8c2af691}{WIN\_MAP} != \hyperlink{wintype_8h_a56d1f4f2e517a4e81be0b7593e35e681}{WIN\_ERR} && \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[ \hyperlink{decl_8h_afa1f7dd312c4c1b72afe3d2c8c2af691}{WIN\_MAP} ] )
2179     \hyperlink{winproto_8h_a9fdbf76005ec3ae5b77b3002366c04d3}{amii\_putstr}( WIN\_MAP, 1, s );
2180     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( \hyperlink{winami_8h_a5a32a2aaab2d6b517c4afde059621c35}{WIN\_BASE} != \hyperlink{wintype_8h_a56d1f4f2e517a4e81be0b7593e35e681}{WIN\_ERR} && \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[ \hyperlink{winami_8h_a5a32a2aaab2d6b517c4afde059621c35}{WIN\_BASE} ] )
2181     \hyperlink{winproto_8h_a9fdbf76005ec3ae5b77b3002366c04d3}{amii\_putstr}( WIN\_BASE, 1, s );
2182     \textcolor{keywordflow}{else}
2183     \{
2184     \hyperlink{sound_8c_a3cb9f0894fab1c8fbb0753c9c7c2a8d9}{printf}(\textcolor{stringliteral}{"\(\backslash\)33[1m%s\(\backslash\)33[0m\(\backslash\)n"},s);
2185     fflush(\hyperlink{lev__lex_8h_a0c0ef221f95f64e8632451312fd18cc8}{stdout});
2186     \}
2187 \}
\end{DoxyCode}
\hypertarget{winfuncs_8c_a894fdf3f213b71cbb585d85e153d7bff}{\index{winfuncs.\+c@{winfuncs.\+c}!amii\+\_\+resume\+\_\+nhwindows@{amii\+\_\+resume\+\_\+nhwindows}}
\index{amii\+\_\+resume\+\_\+nhwindows@{amii\+\_\+resume\+\_\+nhwindows}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{amii\+\_\+resume\+\_\+nhwindows}]{\setlength{\rightskip}{0pt plus 5cm}void amii\+\_\+resume\+\_\+nhwindows (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{winfuncs_8c_a894fdf3f213b71cbb585d85e153d7bff}


Definition at line 1994 of file winfuncs.\+c.



References Hack\+Screen.


\begin{DoxyCode}
1995 \{
1996     \textcolor{keywordflow}{if}( \hyperlink{winext_8h_ad92207d95deab9f96588451c7ed34419}{HackScreen} )
1997     ScreenToFront( \hyperlink{winext_8h_ad92207d95deab9f96588451c7ed34419}{HackScreen} );
1998 \}
\end{DoxyCode}
\hypertarget{winfuncs_8c_a626a95e77f3432e0ed9eb6e21193fdbf}{\index{winfuncs.\+c@{winfuncs.\+c}!amii\+\_\+set\+\_\+text\+\_\+font@{amii\+\_\+set\+\_\+text\+\_\+font}}
\index{amii\+\_\+set\+\_\+text\+\_\+font@{amii\+\_\+set\+\_\+text\+\_\+font}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{amii\+\_\+set\+\_\+text\+\_\+font}]{\setlength{\rightskip}{0pt plus 5cm}void amii\+\_\+set\+\_\+text\+\_\+font (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{name, }
\item[{int}]{size}
\end{DoxyParamCaption}
)}}\label{winfuncs_8c_a626a95e77f3432e0ed9eb6e21193fdbf}


Definition at line 1748 of file winfuncs.\+c.



References amii\+\_\+libvers, amii\+\_\+wins, bigscreen, Hack\+Screen, M\+A\+X\+W\+I\+N, N\+H\+W\+\_\+\+B\+A\+S\+E, N\+H\+W\+\_\+\+M\+A\+P, N\+H\+W\+\_\+\+M\+E\+S\+S\+A\+G\+E, N\+H\+W\+\_\+\+O\+V\+E\+R, N\+H\+W\+\_\+\+S\+T\+A\+T\+U\+S, N\+U\+L\+L, Texts\+Font, Texts\+Font13, amii\+\_\+\+Win\+Desc\+::type, and amii\+\_\+\+Win\+Desc\+::win.



Referenced by parse\+\_\+config\+\_\+line().


\begin{DoxyCode}
1751 \{
1752     \textcolor{keyword}{register} \textcolor{keywordtype}{int} i;
1753     \textcolor{keyword}{register} \textcolor{keyword}{struct }\hyperlink{structamii__WinDesc}{amii\_WinDesc} *cw;
1754     \textcolor{keywordtype}{int} osize = \hyperlink{winext_8h_ae025c8071639e4d9dc591d74e997ed7d}{TextsFont13}.ta\_YSize;
1755     \textcolor{keyword}{static} \textcolor{keywordtype}{char} nname[ 100 ];
1756 
1757     strncpy( nname, \hyperlink{lev__main_8c_a8f8f80d37794cde9472343e4487ba3eb}{name}, \textcolor{keyword}{sizeof}( nname ) - 1 );
1758     nname[ \textcolor{keyword}{sizeof}( nname ) - 1 ] = 0;
1759 
1760     \hyperlink{winext_8h_ae025c8071639e4d9dc591d74e997ed7d}{TextsFont13}.ta\_Name = nname;
1761     \hyperlink{winext_8h_ae025c8071639e4d9dc591d74e997ed7d}{TextsFont13}.ta\_YSize = \hyperlink{structsize}{size};
1762 
1763     \textcolor{comment}{/* No alternate text font allowed for 640x269 or smaller */}
1764     \textcolor{keywordflow}{if}( !\hyperlink{winext_8h_ad92207d95deab9f96588451c7ed34419}{HackScreen} || !\hyperlink{winext_8h_a686d780b14cde5aa754adc1baa2d6cfe}{bigscreen} )
1765     \textcolor{keywordflow}{return};
1766 
1767     \textcolor{comment}{/* Look for windows to set, and change them */}
1768 
1769     \textcolor{keywordflow}{if}( DiskfontBase =
1770         OpenLibrary( \textcolor{stringliteral}{"diskfont.library"}, \hyperlink{winfuncs_8c_a671ae6e85756b2cbd50580e85216e311}{amii\_libvers}  ) )
1771     \{
1772     \hyperlink{winext_8h_a5ba89c525a49d1190a1a5ecdf5f65aa6}{TextsFont} = OpenDiskFont( &\hyperlink{winext_8h_ae025c8071639e4d9dc591d74e997ed7d}{TextsFont13} );
1773     \textcolor{keywordflow}{for}( i = 0; \hyperlink{winext_8h_a5ba89c525a49d1190a1a5ecdf5f65aa6}{TextsFont} && i < \hyperlink{winami_8h_a0882b20213d1ebf14d860e611d06cf36}{MAXWIN}; ++i )
1774     \{
1775         \textcolor{keywordflow}{if}( (cw = \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[ i ]) && cw->\hyperlink{structamii__WinDesc_a9835faa4d66643cd889203e26edee8ae}{win} != \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} )
1776         \{
1777             \textcolor{keywordflow}{switch}( cw->\hyperlink{structamii__WinDesc_ab90130f7f09b474842877b2f71d708e0}{type} )
1778             \{
1779             \textcolor{keywordflow}{case} \hyperlink{wintype_8h_a8ed5b99ab7f854ace5f67f89aaae5404}{NHW\_STATUS}:
1780             MoveWindow( cw->\hyperlink{structamii__WinDesc_a9835faa4d66643cd889203e26edee8ae}{win}, 0, -( \hyperlink{structsize}{size} - osize ) * 2 );
1781             SizeWindow( cw->\hyperlink{structamii__WinDesc_a9835faa4d66643cd889203e26edee8ae}{win}, 0, ( \hyperlink{structsize}{size} - osize ) * 2 );
1782             SetFont( cw->\hyperlink{structamii__WinDesc_a9835faa4d66643cd889203e26edee8ae}{win}->RPort, \hyperlink{winext_8h_a5ba89c525a49d1190a1a5ecdf5f65aa6}{TextsFont} );
1783             \textcolor{keywordflow}{break};
1784             \textcolor{keywordflow}{case} \hyperlink{wintype_8h_ab3d471e84a363992b5a483392d0b2389}{NHW\_MESSAGE}:
1785             \textcolor{keywordflow}{case} \hyperlink{wintype_8h_a756172f2e22a3d287cfaf6bc771df606}{NHW\_MAP}:
1786             \textcolor{keywordflow}{case} \hyperlink{macwin_8h_ab575e634e51462bf534b7ee541cefc46}{NHW\_BASE}:
1787             \textcolor{keywordflow}{case} \hyperlink{winami_8h_ade6ff25a1de12300d538d40c306f4b2a}{NHW\_OVER}:
1788             SetFont( cw->\hyperlink{structamii__WinDesc_a9835faa4d66643cd889203e26edee8ae}{win}->RPort, \hyperlink{winext_8h_a5ba89c525a49d1190a1a5ecdf5f65aa6}{TextsFont} );
1789             \textcolor{keywordflow}{break};
1790             \}
1791         \}
1792     \}
1793     \}
1794     CloseLibrary(DiskfontBase);
1795     DiskfontBase = \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
1796 \}
\end{DoxyCode}
\hypertarget{winfuncs_8c_a2876464c6431712b2c89e8066669c311}{\index{winfuncs.\+c@{winfuncs.\+c}!amii\+\_\+setclipped@{amii\+\_\+setclipped}}
\index{amii\+\_\+setclipped@{amii\+\_\+setclipped}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{amii\+\_\+setclipped}]{\setlength{\rightskip}{0pt plus 5cm}void amii\+\_\+setclipped (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{winfuncs_8c_a2876464c6431712b2c89e8066669c311}


Definition at line 2234 of file winfuncs.\+c.



References C\+O, L\+I, and T\+R\+U\+E.



Referenced by amii\+\_\+create\+\_\+nhwindow().


\begin{DoxyCode}
2235 \{
2236 \textcolor{preprocessor}{#ifdef  CLIPPING}
2237     clipping = \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
2238     clipx=clipy=0;
2239     clipxmax=\hyperlink{winext_8h_abdcb66bae1fc240beb333f1932bdc30d}{CO};
2240     clipymax=\hyperlink{winext_8h_a4952935dee70ae06274495dcddf10856}{LI};
2241 \textcolor{comment}{/* some of this is now redundant with top of amii\_cliparound XXX */}
2242 \textcolor{preprocessor}{#endif}
2243 \}
\end{DoxyCode}
\hypertarget{winfuncs_8c_a2c51c999c9751e89fcdcbf313d741da7}{\index{winfuncs.\+c@{winfuncs.\+c}!amii\+\_\+setdrawpens@{amii\+\_\+setdrawpens}}
\index{amii\+\_\+setdrawpens@{amii\+\_\+setdrawpens}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{amii\+\_\+setdrawpens}]{\setlength{\rightskip}{0pt plus 5cm}void amii\+\_\+setdrawpens (
\begin{DoxyParamCaption}
\item[{struct Window $\ast$}]{w, }
\item[{int}]{type}
\end{DoxyParamCaption}
)}}\label{winfuncs_8c_a2c51c999c9751e89fcdcbf313d741da7}


Definition at line 1378 of file winfuncs.\+c.



References amii\+\_\+menu\+A\+Pen, amii\+\_\+menu\+B\+Pen, amii\+\_\+msg\+A\+Pen, amii\+\_\+msg\+B\+Pen, amii\+\_\+other\+A\+Pen, amii\+\_\+other\+B\+Pen, amii\+\_\+stat\+A\+Pen, amii\+\_\+stat\+B\+Pen, amii\+\_\+text\+A\+Pen, amii\+\_\+text\+B\+Pen, C\+\_\+\+B\+L\+A\+C\+K, C\+\_\+\+W\+H\+I\+T\+E, N\+H\+W\+\_\+\+B\+A\+S\+E, N\+H\+W\+\_\+\+M\+A\+P, N\+H\+W\+\_\+\+M\+E\+N\+U, N\+H\+W\+\_\+\+M\+E\+S\+S\+A\+G\+E, N\+H\+W\+\_\+\+O\+V\+E\+R, N\+H\+W\+\_\+\+S\+T\+A\+T\+U\+S, and N\+H\+W\+\_\+\+T\+E\+X\+T.



Referenced by amii\+\_\+doprev\+\_\+message().


\begin{DoxyCode}
1379 \{
1380     \textcolor{keywordflow}{switch}( \hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type} )
1381     \{
1382     \textcolor{keywordflow}{case} \hyperlink{wintype_8h_ab3d471e84a363992b5a483392d0b2389}{NHW\_MESSAGE}:
1383     SetAPen( w->RPort, \hyperlink{winfuncs_8c_acc9bd89041e1021df5e8d898dda9968c}{amii\_msgAPen} );
1384     SetBPen( w->RPort, \hyperlink{winfuncs_8c_ab8d29ceb31e5059cc2430e47bfba87c8}{amii\_msgBPen} );
1385     \textcolor{keywordflow}{break};
1386     \textcolor{keywordflow}{case} \hyperlink{wintype_8h_a8ed5b99ab7f854ace5f67f89aaae5404}{NHW\_STATUS}:
1387     SetAPen( w->RPort, \hyperlink{winfuncs_8c_abd477ff7ec6eba516c641ea5ae9af420}{amii\_statAPen} );
1388     SetBPen( w->RPort, \hyperlink{winfuncs_8c_aacd31bf4b410f0502df1519ddb6822ab}{amii\_statBPen} );
1389     \textcolor{keywordflow}{break};
1390     \textcolor{keywordflow}{case} \hyperlink{wintype_8h_a60a03e50aaeef35cd7cd3bf6f790791c}{NHW\_MENU}:
1391     SetAPen( w->RPort, \hyperlink{winfuncs_8c_a14ab17c151206a4245022490c76255ec}{amii\_menuAPen} );
1392     SetBPen( w->RPort, \hyperlink{winfuncs_8c_a26ac45dc44f3d41edc95bc99e0b788d8}{amii\_menuBPen} );
1393     \textcolor{keywordflow}{break};
1394     \textcolor{keywordflow}{case} \hyperlink{wintype_8h_a7e2bcc8531c4c62e8d8f1c5279c5789b}{NHW\_TEXT}:
1395     SetAPen( w->RPort, \hyperlink{winfuncs_8c_a87c9b725a8d1a308419408002c9eed2d}{amii\_textAPen} );
1396     SetBPen( w->RPort, \hyperlink{winfuncs_8c_a9ba6c6ce5bc8ca526739e615566abde0}{amii\_textBPen} );
1397     \textcolor{keywordflow}{break};
1398     \textcolor{keywordflow}{case} \hyperlink{wintype_8h_a756172f2e22a3d287cfaf6bc771df606}{NHW\_MAP}:
1399     \textcolor{keywordflow}{case} \hyperlink{macwin_8h_ab575e634e51462bf534b7ee541cefc46}{NHW\_BASE}:
1400     \textcolor{keywordflow}{case} \hyperlink{winami_8h_ade6ff25a1de12300d538d40c306f4b2a}{NHW\_OVER}:
1401     SetAPen( w->RPort, \hyperlink{windefs_8h_a67fead37547ff67ca0a269d712e87822}{C\_WHITE} );
1402     SetBPen( w->RPort, \hyperlink{windefs_8h_a22a9543e081938a146a8bce60a84200a}{C\_BLACK} );
1403     \textcolor{keywordflow}{break};
1404     \textcolor{keywordflow}{default}:
1405     SetAPen( w->RPort, \hyperlink{winfuncs_8c_a0d0a78803f21bcbdb86d788acde92972}{amii\_otherAPen} );
1406     SetBPen( w->RPort, \hyperlink{winfuncs_8c_a111dca2a2ad69484b4c949424caa4ffa}{amii\_otherBPen} );
1407     \textcolor{keywordflow}{break};
1408     \}
1409 \}
\end{DoxyCode}
\hypertarget{winfuncs_8c_a4df453dcf15e61612e6e06b40279d5d8}{\index{winfuncs.\+c@{winfuncs.\+c}!amii\+\_\+setfillpens@{amii\+\_\+setfillpens}}
\index{amii\+\_\+setfillpens@{amii\+\_\+setfillpens}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{amii\+\_\+setfillpens}]{\setlength{\rightskip}{0pt plus 5cm}void amii\+\_\+setfillpens (
\begin{DoxyParamCaption}
\item[{struct Window $\ast$}]{w, }
\item[{int}]{type}
\end{DoxyParamCaption}
)}}\label{winfuncs_8c_a4df453dcf15e61612e6e06b40279d5d8}


Definition at line 1343 of file winfuncs.\+c.



References amii\+\_\+menu\+B\+Pen, amii\+\_\+msg\+B\+Pen, amii\+\_\+other\+B\+Pen, amii\+\_\+stat\+B\+Pen, amii\+\_\+text\+B\+Pen, C\+\_\+\+B\+L\+A\+C\+K, N\+H\+W\+\_\+\+B\+A\+S\+E, N\+H\+W\+\_\+\+M\+A\+P, N\+H\+W\+\_\+\+M\+E\+N\+U, N\+H\+W\+\_\+\+M\+E\+S\+S\+A\+G\+E, N\+H\+W\+\_\+\+O\+V\+E\+R, N\+H\+W\+\_\+\+S\+T\+A\+T\+U\+S, and N\+H\+W\+\_\+\+T\+E\+X\+T.



Referenced by amii\+\_\+clear\+\_\+nhwindow(), and Do\+Menu\+Scroll().


\begin{DoxyCode}
1344 \{
1345     \textcolor{keywordflow}{switch}( \hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type} )
1346     \{
1347     \textcolor{keywordflow}{case} \hyperlink{wintype_8h_ab3d471e84a363992b5a483392d0b2389}{NHW\_MESSAGE}:
1348     SetAPen( w->RPort, \hyperlink{winfuncs_8c_ab8d29ceb31e5059cc2430e47bfba87c8}{amii\_msgBPen} );
1349     SetBPen( w->RPort, \hyperlink{winfuncs_8c_ab8d29ceb31e5059cc2430e47bfba87c8}{amii\_msgBPen} );
1350     \textcolor{keywordflow}{break};
1351     \textcolor{keywordflow}{case} \hyperlink{wintype_8h_a8ed5b99ab7f854ace5f67f89aaae5404}{NHW\_STATUS}:
1352     SetAPen( w->RPort, \hyperlink{winfuncs_8c_aacd31bf4b410f0502df1519ddb6822ab}{amii\_statBPen} );
1353     SetBPen( w->RPort, \hyperlink{winfuncs_8c_aacd31bf4b410f0502df1519ddb6822ab}{amii\_statBPen} );
1354     \textcolor{keywordflow}{break};
1355     \textcolor{keywordflow}{case} \hyperlink{wintype_8h_a60a03e50aaeef35cd7cd3bf6f790791c}{NHW\_MENU}:
1356     SetAPen( w->RPort, \hyperlink{winfuncs_8c_a26ac45dc44f3d41edc95bc99e0b788d8}{amii\_menuBPen} );
1357     SetBPen( w->RPort, \hyperlink{winfuncs_8c_a26ac45dc44f3d41edc95bc99e0b788d8}{amii\_menuBPen} );
1358     \textcolor{keywordflow}{break};
1359     \textcolor{keywordflow}{case} \hyperlink{wintype_8h_a7e2bcc8531c4c62e8d8f1c5279c5789b}{NHW\_TEXT}:
1360     SetAPen( w->RPort, \hyperlink{winfuncs_8c_a9ba6c6ce5bc8ca526739e615566abde0}{amii\_textBPen} );
1361     SetBPen( w->RPort, \hyperlink{winfuncs_8c_a9ba6c6ce5bc8ca526739e615566abde0}{amii\_textBPen} );
1362     \textcolor{keywordflow}{break};
1363     \textcolor{keywordflow}{case} \hyperlink{wintype_8h_a756172f2e22a3d287cfaf6bc771df606}{NHW\_MAP}:
1364     \textcolor{keywordflow}{case} \hyperlink{macwin_8h_ab575e634e51462bf534b7ee541cefc46}{NHW\_BASE}:
1365     \textcolor{keywordflow}{case} \hyperlink{winami_8h_ade6ff25a1de12300d538d40c306f4b2a}{NHW\_OVER}:
1366     \textcolor{keywordflow}{default}:
1367     SetAPen( w->RPort, \hyperlink{windefs_8h_a22a9543e081938a146a8bce60a84200a}{C\_BLACK} );
1368     SetBPen( w->RPort, \hyperlink{windefs_8h_a22a9543e081938a146a8bce60a84200a}{C\_BLACK} );
1369     \textcolor{keywordflow}{break};
1370     \textcolor{keywordflow}{case} -2:
1371     SetAPen( w->RPort, \hyperlink{winfuncs_8c_a111dca2a2ad69484b4c949424caa4ffa}{amii\_otherBPen} );
1372     SetBPen( w->RPort, \hyperlink{winfuncs_8c_a111dca2a2ad69484b4c949424caa4ffa}{amii\_otherBPen} );
1373     \textcolor{keywordflow}{break};
1374     \}
1375 \}
\end{DoxyCode}
\hypertarget{winfuncs_8c_af3f6522f0bcc54d4a193d32ff11ec28b}{\index{winfuncs.\+c@{winfuncs.\+c}!amii\+\_\+sethipens@{amii\+\_\+sethipens}}
\index{amii\+\_\+sethipens@{amii\+\_\+sethipens}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{amii\+\_\+sethipens}]{\setlength{\rightskip}{0pt plus 5cm}void amii\+\_\+sethipens (
\begin{DoxyParamCaption}
\item[{struct Window $\ast$}]{w, }
\item[{int}]{type, }
\item[{int}]{attr}
\end{DoxyParamCaption}
)}}\label{winfuncs_8c_af3f6522f0bcc54d4a193d32ff11ec28b}


Definition at line 1312 of file winfuncs.\+c.



References amii\+\_\+menu\+A\+Pen, amii\+\_\+menu\+B\+Pen, amii\+\_\+msg\+A\+Pen, amii\+\_\+msg\+B\+Pen, amii\+\_\+other\+A\+Pen, amii\+\_\+other\+B\+Pen, amii\+\_\+stat\+A\+Pen, amii\+\_\+stat\+B\+Pen, amii\+\_\+text\+A\+Pen, amii\+\_\+text\+B\+Pen, C\+\_\+\+B\+L\+A\+C\+K, C\+\_\+\+R\+E\+D, C\+\_\+\+W\+H\+I\+T\+E, N\+H\+W\+\_\+\+M\+E\+N\+U, N\+H\+W\+\_\+\+M\+E\+S\+S\+A\+G\+E, N\+H\+W\+\_\+\+S\+T\+A\+T\+U\+S, and N\+H\+W\+\_\+\+T\+E\+X\+T.



Referenced by amii\+\_\+putstr().


\begin{DoxyCode}
1313 \{
1314     \textcolor{keywordflow}{switch}( \hyperlink{lev__main_8c_ac765329451135abec74c45e1897abf26}{type} )
1315     \{
1316     \textcolor{keywordflow}{default}:
1317         SetAPen( w->RPort, attr ? \hyperlink{windefs_8h_a7adb9aaa1eed15caecd92e3837581b53}{C\_RED} : \hyperlink{winfuncs_8c_a0d0a78803f21bcbdb86d788acde92972}{amii\_otherAPen} );
1318         SetBPen( w->RPort, \hyperlink{windefs_8h_a22a9543e081938a146a8bce60a84200a}{C\_BLACK} );
1319         \textcolor{keywordflow}{break};
1320     \textcolor{keywordflow}{case} \hyperlink{wintype_8h_a8ed5b99ab7f854ace5f67f89aaae5404}{NHW\_STATUS}:
1321         SetAPen( w->RPort, attr ? \hyperlink{windefs_8h_a67fead37547ff67ca0a269d712e87822}{C\_WHITE} : \hyperlink{winfuncs_8c_abd477ff7ec6eba516c641ea5ae9af420}{amii\_statAPen} );
1322         SetBPen( w->RPort, \hyperlink{winfuncs_8c_aacd31bf4b410f0502df1519ddb6822ab}{amii\_statBPen} );
1323         \textcolor{keywordflow}{break};
1324     \textcolor{keywordflow}{case} \hyperlink{wintype_8h_ab3d471e84a363992b5a483392d0b2389}{NHW\_MESSAGE}:
1325         SetAPen( w->RPort, attr ? \hyperlink{windefs_8h_a67fead37547ff67ca0a269d712e87822}{C\_WHITE} : \hyperlink{winfuncs_8c_acc9bd89041e1021df5e8d898dda9968c}{amii\_msgAPen} );
1326         SetBPen( w->RPort, \hyperlink{winfuncs_8c_ab8d29ceb31e5059cc2430e47bfba87c8}{amii\_msgBPen} );
1327         \textcolor{keywordflow}{break};
1328     \textcolor{keywordflow}{case} \hyperlink{wintype_8h_a60a03e50aaeef35cd7cd3bf6f790791c}{NHW\_MENU}:
1329         SetAPen( w->RPort, attr ? \hyperlink{windefs_8h_a22a9543e081938a146a8bce60a84200a}{C\_BLACK} : \hyperlink{winfuncs_8c_a14ab17c151206a4245022490c76255ec}{amii\_menuAPen} );
1330         SetBPen( w->RPort, \hyperlink{winfuncs_8c_a26ac45dc44f3d41edc95bc99e0b788d8}{amii\_menuBPen} );
1331         \textcolor{keywordflow}{break};
1332     \textcolor{keywordflow}{case} \hyperlink{wintype_8h_a7e2bcc8531c4c62e8d8f1c5279c5789b}{NHW\_TEXT}:
1333         SetAPen( w->RPort, attr ? \hyperlink{windefs_8h_a22a9543e081938a146a8bce60a84200a}{C\_BLACK} : \hyperlink{winfuncs_8c_a87c9b725a8d1a308419408002c9eed2d}{amii\_textAPen} );
1334         SetBPen( w->RPort, \hyperlink{winfuncs_8c_a9ba6c6ce5bc8ca526739e615566abde0}{amii\_textBPen} );
1335     \textcolor{keywordflow}{case} -2:
1336         SetBPen( w->RPort, \hyperlink{winfuncs_8c_a111dca2a2ad69484b4c949424caa4ffa}{amii\_otherBPen} );
1337         SetAPen( w->RPort, attr ? \hyperlink{windefs_8h_a7adb9aaa1eed15caecd92e3837581b53}{C\_RED} : \hyperlink{winfuncs_8c_a0d0a78803f21bcbdb86d788acde92972}{amii\_otherAPen} );
1338         \textcolor{keywordflow}{break};
1339     \}
1340 \}
\end{DoxyCode}
\hypertarget{winfuncs_8c_ad6a6c5e1b2ab1259187688b96e4e7a74}{\index{winfuncs.\+c@{winfuncs.\+c}!amii\+\_\+suspend\+\_\+nhwindows@{amii\+\_\+suspend\+\_\+nhwindows}}
\index{amii\+\_\+suspend\+\_\+nhwindows@{amii\+\_\+suspend\+\_\+nhwindows}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{amii\+\_\+suspend\+\_\+nhwindows}]{\setlength{\rightskip}{0pt plus 5cm}void amii\+\_\+suspend\+\_\+nhwindows (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{str}
\end{DoxyParamCaption}
) const}}\label{winfuncs_8c_ad6a6c5e1b2ab1259187688b96e4e7a74}


Definition at line 1987 of file winfuncs.\+c.



References Hack\+Screen.


\begin{DoxyCode}
1989 \{
1990     \textcolor{keywordflow}{if}( \hyperlink{winext_8h_ad92207d95deab9f96588451c7ed34419}{HackScreen} )
1991     ScreenToBack( \hyperlink{winext_8h_ad92207d95deab9f96588451c7ed34419}{HackScreen} );
1992 \}
\end{DoxyCode}
\hypertarget{winfuncs_8c_acc8f4aa5abffe473b4c2e6ffe5c285f4}{\index{winfuncs.\+c@{winfuncs.\+c}!amii\+\_\+update\+\_\+inventory@{amii\+\_\+update\+\_\+inventory}}
\index{amii\+\_\+update\+\_\+inventory@{amii\+\_\+update\+\_\+inventory}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{amii\+\_\+update\+\_\+inventory}]{\setlength{\rightskip}{0pt plus 5cm}void amii\+\_\+update\+\_\+inventory (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{winfuncs_8c_acc8f4aa5abffe473b4c2e6ffe5c285f4}


Definition at line 2192 of file winfuncs.\+c.



References amii\+\_\+wins, F\+A\+L\+S\+E, N\+H\+W\+\_\+\+M\+E\+N\+U, N\+U\+L\+L, amii\+\_\+\+Win\+Desc\+::type, amii\+\_\+\+Win\+Desc\+::win, W\+I\+N\+\_\+\+E\+R\+R, and W\+I\+N\+\_\+\+I\+N\+V\+E\+N.


\begin{DoxyCode}
2193 \{
2194     \textcolor{keyword}{register} \textcolor{keyword}{struct }\hyperlink{structamii__WinDesc}{amii\_WinDesc} *cw;
2195 
2196     \textcolor{keywordflow}{if}( \hyperlink{decl_8h_aabd3637304d093f7077c788661a0a5fd}{WIN\_INVEN} != \hyperlink{wintype_8h_a56d1f4f2e517a4e81be0b7593e35e681}{WIN\_ERR} && ( cw = \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[ 
      \hyperlink{decl_8h_aabd3637304d093f7077c788661a0a5fd}{WIN\_INVEN} ] ) &&
2197                 cw->\hyperlink{structamii__WinDesc_ab90130f7f09b474842877b2f71d708e0}{type} == \hyperlink{wintype_8h_a60a03e50aaeef35cd7cd3bf6f790791c}{NHW\_MENU} && cw->\hyperlink{structamii__WinDesc_a9835faa4d66643cd889203e26edee8ae}{win} )
2198     \{
2199     display\_inventory( \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE} );
2200     \}
2201 \}
\end{DoxyCode}
\hypertarget{winfuncs_8c_afb9466b9fae84cc64fbe79fcf6467c06}{\index{winfuncs.\+c@{winfuncs.\+c}!amii\+\_\+wait\+\_\+synch@{amii\+\_\+wait\+\_\+synch}}
\index{amii\+\_\+wait\+\_\+synch@{amii\+\_\+wait\+\_\+synch}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{amii\+\_\+wait\+\_\+synch}]{\setlength{\rightskip}{0pt plus 5cm}void amii\+\_\+wait\+\_\+synch (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{winfuncs_8c_afb9466b9fae84cc64fbe79fcf6467c06}


Definition at line 2217 of file winfuncs.\+c.



References amii\+\_\+wins, ami\+I\+Display, display\+\_\+nhwindow, flush\+\_\+glyph\+\_\+buffer(), amii\+\_\+\+Display\+Desc\+::rawprint, T\+R\+U\+E, amii\+\_\+\+Win\+Desc\+::win, W\+I\+N\+\_\+\+E\+R\+R, and W\+I\+N\+\_\+\+M\+A\+P.


\begin{DoxyCode}
2218 \{
2219     \textcolor{keywordflow}{if}(!\hyperlink{winami_8h_a0ecec29922f9b6272c2b5344ce40b283}{amiIDisplay} || \hyperlink{winami_8h_a0ecec29922f9b6272c2b5344ce40b283}{amiIDisplay}->\hyperlink{structamii__DisplayDesc_aaee7b747d7620b0e53252edc0bfc5782}{rawprint})
2220     \{
2221     \textcolor{keywordflow}{if}(\hyperlink{winami_8h_a0ecec29922f9b6272c2b5344ce40b283}{amiIDisplay}) \hyperlink{winami_8h_a0ecec29922f9b6272c2b5344ce40b283}{amiIDisplay}->\hyperlink{structamii__DisplayDesc_aaee7b747d7620b0e53252edc0bfc5782}{rawprint}=0;
2222     \}
2223     \textcolor{keywordflow}{else}
2224     \{
2225     \textcolor{keywordflow}{if}( \hyperlink{decl_8h_afa1f7dd312c4c1b72afe3d2c8c2af691}{WIN\_MAP} != \hyperlink{wintype_8h_a56d1f4f2e517a4e81be0b7593e35e681}{WIN\_ERR} )
2226     \{
2227         \hyperlink{winprocs_8h_ac8e74d03fbb65b9f5651e63d79bebc60}{display\_nhwindow}(\hyperlink{decl_8h_afa1f7dd312c4c1b72afe3d2c8c2af691}{WIN\_MAP},\hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE});
2228         \hyperlink{winchar_8c_aedd7ad0350a58b8fca664bcbdc5f1f35}{flush\_glyph\_buffer}( \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[ \hyperlink{decl_8h_afa1f7dd312c4c1b72afe3d2c8c2af691}{WIN\_MAP} ]->
      \hyperlink{structamii__WinDesc_a9835faa4d66643cd889203e26edee8ae}{win} );
2229     \}
2230     \}
2231 \}
\end{DoxyCode}
\hypertarget{winfuncs_8c_aa443a8fd869c4d68918b828581a2f025}{\index{winfuncs.\+c@{winfuncs.\+c}!cursor\+\_\+common@{cursor\+\_\+common}}
\index{cursor\+\_\+common@{cursor\+\_\+common}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{cursor\+\_\+common}]{\setlength{\rightskip}{0pt plus 5cm}static void cursor\+\_\+common (
\begin{DoxyParamCaption}
\item[{struct Rast\+Port $\ast$}]{rp, }
\item[{int}]{x, }
\item[{int}]{y}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{winfuncs_8c_aa443a8fd869c4d68918b828581a2f025}


Definition at line 1968 of file winfuncs.\+c.



References Is\+\_\+rogue\+\_\+level, mxsize, mysize, u, and you\+::uz.



Referenced by cursor\+\_\+off(), and cursor\+\_\+on().


\begin{DoxyCode}
1971 \{
1972     \textcolor{keywordtype}{int} x1,x2,y1,y2;
1973 
1974     \textcolor{keywordflow}{if}(\hyperlink{dungeon_8h_a2732117523c8540638daf4315dda16b9}{Is\_rogue\_level}(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz}))\{
1975     x1 = x-2;       y1 = y-\hyperlink{amirip_8c_aa0639b6491ec144930d14703053f32a4}{rp}->TxHeight;
1976     x2 = x+\hyperlink{amirip_8c_aa0639b6491ec144930d14703053f32a4}{rp}->TxWidth+1; y2 = y+3;
1977 \textcolor{comment}{/*printf("COMM: (%d %d) (%d %d)  (%d %d) (%d %d)\(\backslash\)n",x1,y1,x2,y2,x1+2,y1+2,x2-2,y2-2);*/}
1978     \} \textcolor{keywordflow}{else} \{
1979     x1 = x;         y1 = y-\hyperlink{winfuncs_8c_a9703aea67c83633a25beaa737dad2b65}{mysize}-1;
1980     x2 = x+\hyperlink{winfuncs_8c_afba9a8d2cd024c7010eae489091d11d6}{mxsize}-1;  y2 = y-2;
1981     RectFill(\hyperlink{amirip_8c_aa0639b6491ec144930d14703053f32a4}{rp}, x1, y1, x2, y2);
1982     \}
1983 
1984     RectFill(\hyperlink{amirip_8c_aa0639b6491ec144930d14703053f32a4}{rp}, x1+2, y1+2, x2-2, y2-2);
1985 \}
\end{DoxyCode}
\hypertarget{winfuncs_8c_a21dcf06b1e3a62331c49092d9911f189}{\index{winfuncs.\+c@{winfuncs.\+c}!cursor\+\_\+off@{cursor\+\_\+off}}
\index{cursor\+\_\+off@{cursor\+\_\+off}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{cursor\+\_\+off}]{\setlength{\rightskip}{0pt plus 5cm}void cursor\+\_\+off (
\begin{DoxyParamCaption}
\item[{{\bf winid}}]{window}
\end{DoxyParamCaption}
)}}\label{winfuncs_8c_a21dcf06b1e3a62331c49092d9911f189}


Definition at line 1836 of file winfuncs.\+c.



References amii\+\_\+wins, amii\+\_\+\+Win\+Desc\+::curs\+\_\+apen, amii\+\_\+\+Win\+Desc\+::curs\+\_\+bpen, C\+U\+R\+S\+O\+R\+\_\+\+C\+H\+A\+R, cursor\+\_\+common(), amii\+\_\+\+Win\+Desc\+::cursx, amii\+\_\+\+Win\+Desc\+::cursy, F\+L\+M\+A\+P\+\_\+\+C\+U\+R\+S\+U\+P, iflags, Is\+\_\+rogue\+\_\+level, N\+H\+W\+\_\+\+M\+A\+P, N\+U\+L\+L, panic(), rp, amii\+\_\+\+Win\+Desc\+::type, u, you\+::uz, amii\+\_\+\+Win\+Desc\+::wflags, amii\+\_\+\+Win\+Desc\+::win, W\+I\+N\+\_\+\+E\+R\+R, instance\+\_\+flags\+::window\+\_\+inited, winpanicstr, and W\+I\+N\+V\+E\+R\+S\+\_\+\+A\+M\+I\+V.



Referenced by amii\+\_\+clear\+\_\+nhwindow(), amii\+\_\+cliparound(), amiv\+\_\+flush\+\_\+glyph\+\_\+buffer(), and cursor\+\_\+on().


\begin{DoxyCode}
1838 \{
1839     \textcolor{keyword}{register} \textcolor{keyword}{struct }\hyperlink{structamii__WinDesc}{amii\_WinDesc} *cw;
1840     \textcolor{keyword}{register} \textcolor{keyword}{struct }Window *w;
1841     \textcolor{keyword}{register} \textcolor{keyword}{struct }RastPort *\hyperlink{amirip_8c_aa0639b6491ec144930d14703053f32a4}{rp};
1842     \textcolor{keywordtype}{int} curx, cury;
1843     \textcolor{keywordtype}{int} x, y;
1844     \textcolor{keywordtype}{long} dmode;
1845     \textcolor{keywordtype}{short} apen, bpen;
1846     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} ch;
1847 
1848     \textcolor{keywordflow}{if}( window == \hyperlink{wintype_8h_a56d1f4f2e517a4e81be0b7593e35e681}{WIN\_ERR} || ( cw = \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[window] ) == \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} )
1849     \{
1850     \hyperlink{flag_8h_ae9cd54937dcb00432131e49e5e324075}{iflags}.\hyperlink{structinstance__flags_a2fc6c78c4c5f6e1d0027ac575135426f}{window\_inited}=0;
1851     \hyperlink{txt2iff_8c_ab0824b6f5eb51db9371d2e9a222249d3}{panic}(\hyperlink{winext_8h_a4264157ee8930111caf21b62c212e08c}{winpanicstr},window, \textcolor{stringliteral}{"cursor\_off"});
1852     \}
1853 
1854     \textcolor{keywordflow}{if}( !(cw->\hyperlink{structamii__WinDesc_a4400afb6488c6a7b1f70f27ee0371963}{wflags} & \hyperlink{winami_8h_a7273e3f6e628faf1db9b852fc1c56729}{FLMAP\_CURSUP} ) )
1855     \textcolor{keywordflow}{return};
1856 
1857     w = cw->\hyperlink{structamii__WinDesc_a9835faa4d66643cd889203e26edee8ae}{win};
1858 
1859     \textcolor{keywordflow}{if}( !w )
1860     \textcolor{keywordflow}{return};
1861 
1862     cw->\hyperlink{structamii__WinDesc_a4400afb6488c6a7b1f70f27ee0371963}{wflags} &= ~\hyperlink{winami_8h_a7273e3f6e628faf1db9b852fc1c56729}{FLMAP\_CURSUP};
1863     rp = w->RPort;
1864 
1865     \textcolor{comment}{/* Save the current information */}
1866     curx = rp->cp\_x;
1867     cury = rp->cp\_y;
1868     x = cw->\hyperlink{structamii__WinDesc_ae9b81e1924a60034c9ca2f7dee3c97fd}{cursx};
1869     y = cw->\hyperlink{structamii__WinDesc_a25574bc64eeaecb522e78f5c636da887}{cursy};
1870     dmode = rp->DrawMode;
1871     apen = rp->FgPen;
1872     bpen = rp->BgPen;
1873     SetAPen( rp, cw->\hyperlink{structamii__WinDesc_a101774acf6a2657276007d298c36609d}{curs\_apen} );
1874     SetBPen( rp, cw->\hyperlink{structamii__WinDesc_a93ca00f32977372698256e74df4af3c4}{curs\_bpen} );
1875     SetDrMd( rp, COMPLEMENT );
1876 \textcolor{comment}{/*printf("CURSOR OFF: %d %d\(\backslash\)n",x,y);*/}
1877 
1878     \textcolor{keywordflow}{if}( \hyperlink{windefs_8h_aa0b90aaeb74b2488a95f0902cef09cbf}{WINVERS\_AMIV} && cw->\hyperlink{structamii__WinDesc_ab90130f7f09b474842877b2f71d708e0}{type} == \hyperlink{wintype_8h_a756172f2e22a3d287cfaf6bc771df606}{NHW\_MAP})
1879     \{
1880     \hyperlink{winfuncs_8c_aa443a8fd869c4d68918b828581a2f025}{cursor\_common}(rp, x, y);
1881     \textcolor{keywordflow}{if}(\hyperlink{dungeon_8h_a2732117523c8540638daf4315dda16b9}{Is\_rogue\_level}(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz}))
1882         Move(rp,curx,cury);
1883     \}
1884     \textcolor{keywordflow}{else}
1885     \{
1886     ch = \hyperlink{windefs_8h_ad7cfdf28b8c73d1c102426b71b5edfca}{CURSOR\_CHAR};
1887     Move( rp, x, y );
1888     Text( rp, &ch, 1 );
1889 
1890     \textcolor{comment}{/* Put back the other stuff */}
1891 
1892     Move( rp, curx, cury );
1893     \}
1894     SetDrMd( rp, dmode );
1895     SetAPen( rp, apen );
1896     SetBPen( rp, bpen );
1897 \}
\end{DoxyCode}
\hypertarget{winfuncs_8c_ae43c0ee78599c3fa7f2fe2fe4c2b71a1}{\index{winfuncs.\+c@{winfuncs.\+c}!cursor\+\_\+on@{cursor\+\_\+on}}
\index{cursor\+\_\+on@{cursor\+\_\+on}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{cursor\+\_\+on}]{\setlength{\rightskip}{0pt plus 5cm}void cursor\+\_\+on (
\begin{DoxyParamCaption}
\item[{{\bf winid}}]{window}
\end{DoxyParamCaption}
)}}\label{winfuncs_8c_ae43c0ee78599c3fa7f2fe2fe4c2b71a1}


Definition at line 1900 of file winfuncs.\+c.



References amii\+\_\+wins, amii\+\_\+\+Win\+Desc\+::curs\+\_\+apen, amii\+\_\+\+Win\+Desc\+::curs\+\_\+bpen, C\+U\+R\+S\+O\+R\+\_\+\+C\+H\+A\+R, cursor\+\_\+common(), cursor\+\_\+off(), amii\+\_\+\+Win\+Desc\+::cursx, amii\+\_\+\+Win\+Desc\+::cursy, F\+L\+M\+A\+P\+\_\+\+C\+U\+R\+S\+U\+P, iflags, Is\+\_\+rogue\+\_\+level, N\+H\+W\+\_\+\+M\+A\+P, N\+U\+L\+L, panic(), rp, amii\+\_\+\+Win\+Desc\+::type, u, you\+::uz, amii\+\_\+\+Win\+Desc\+::wflags, amii\+\_\+\+Win\+Desc\+::win, W\+I\+N\+\_\+\+E\+R\+R, instance\+\_\+flags\+::window\+\_\+inited, winpanicstr, and W\+I\+N\+V\+E\+R\+S\+\_\+\+A\+M\+I\+V.



Referenced by amii\+\_\+nh\+\_\+poskey(), and amii\+\_\+nhgetch().


\begin{DoxyCode}
1902 \{
1903     \textcolor{keywordtype}{int} x, y;
1904     \textcolor{keyword}{register} \textcolor{keyword}{struct }\hyperlink{structamii__WinDesc}{amii\_WinDesc} *cw;
1905     \textcolor{keyword}{register} \textcolor{keyword}{struct }Window *w;
1906     \textcolor{keyword}{register} \textcolor{keyword}{struct }RastPort *\hyperlink{amirip_8c_aa0639b6491ec144930d14703053f32a4}{rp};
1907     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} ch;
1908     \textcolor{keywordtype}{long} dmode;
1909     \textcolor{keywordtype}{short} apen, bpen;
1910 
1911     \textcolor{keywordflow}{if}( window == \hyperlink{wintype_8h_a56d1f4f2e517a4e81be0b7593e35e681}{WIN\_ERR} || ( cw = \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[window] ) == \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} )
1912     \{
1913     \textcolor{comment}{/* tty does this differently - is this OK? */}
1914     \hyperlink{flag_8h_ae9cd54937dcb00432131e49e5e324075}{iflags}.\hyperlink{structinstance__flags_a2fc6c78c4c5f6e1d0027ac575135426f}{window\_inited}=0;
1915     \hyperlink{txt2iff_8c_ab0824b6f5eb51db9371d2e9a222249d3}{panic}(\hyperlink{winext_8h_a4264157ee8930111caf21b62c212e08c}{winpanicstr},window, \textcolor{stringliteral}{"cursor\_on"});
1916     \}
1917 
1918 \textcolor{comment}{/*printf("CURSOR ON: %d %d\(\backslash\)n",cw->win->RPort->cp\_x, cw->win->RPort->cp\_y);*/}
1919     \textcolor{keywordflow}{if}( (cw->\hyperlink{structamii__WinDesc_a4400afb6488c6a7b1f70f27ee0371963}{wflags} & \hyperlink{winami_8h_a7273e3f6e628faf1db9b852fc1c56729}{FLMAP\_CURSUP} ) )
1920     \hyperlink{winfuncs_8c_a21dcf06b1e3a62331c49092d9911f189}{cursor\_off}( window );
1921 
1922     w = cw->\hyperlink{structamii__WinDesc_a9835faa4d66643cd889203e26edee8ae}{win};
1923 
1924     \textcolor{keywordflow}{if}( !w )
1925     \textcolor{keywordflow}{return};
1926 
1927     cw->\hyperlink{structamii__WinDesc_a4400afb6488c6a7b1f70f27ee0371963}{wflags} |= \hyperlink{winami_8h_a7273e3f6e628faf1db9b852fc1c56729}{FLMAP\_CURSUP};
1928     rp = w->RPort;
1929 
1930     \textcolor{comment}{/* Save the current information */}
1931 
1932 \textcolor{preprocessor}{#ifdef  DISPMAP}
1933     \textcolor{keywordflow}{if}( \hyperlink{windefs_8h_aa0b90aaeb74b2488a95f0902cef09cbf}{WINVERS\_AMIV} && cw->\hyperlink{structamii__WinDesc_ab90130f7f09b474842877b2f71d708e0}{type} == \hyperlink{wintype_8h_a756172f2e22a3d287cfaf6bc771df606}{NHW\_MAP} && !
      \hyperlink{dungeon_8h_a2732117523c8540638daf4315dda16b9}{Is\_rogue\_level}(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz}))
1934     x = cw->\hyperlink{structamii__WinDesc_ae9b81e1924a60034c9ca2f7dee3c97fd}{cursx} = (rp->cp\_x & -8) + 8;
1935     \textcolor{keywordflow}{else}
1936 \textcolor{preprocessor}{#endif}
1937     x = cw->\hyperlink{structamii__WinDesc_ae9b81e1924a60034c9ca2f7dee3c97fd}{cursx} = rp->cp\_x;
1938     y = cw->\hyperlink{structamii__WinDesc_a25574bc64eeaecb522e78f5c636da887}{cursy} = rp->cp\_y;
1939     apen = rp->FgPen;
1940     bpen = rp->BgPen;
1941     dmode = rp->DrawMode;
1942 
1943     \textcolor{comment}{/* Draw in complement mode. The cursor body will be C\_WHITE */}
1944 
1945     cw->\hyperlink{structamii__WinDesc_a101774acf6a2657276007d298c36609d}{curs\_apen} = 0xff; \textcolor{comment}{/* Last color/all planes, regardless of depth */}
1946     cw->\hyperlink{structamii__WinDesc_a93ca00f32977372698256e74df4af3c4}{curs\_bpen} = 0xff;
1947     SetAPen( rp, cw->\hyperlink{structamii__WinDesc_a101774acf6a2657276007d298c36609d}{curs\_apen} );
1948     SetBPen( rp, cw->\hyperlink{structamii__WinDesc_a93ca00f32977372698256e74df4af3c4}{curs\_bpen} );
1949     SetDrMd( rp, COMPLEMENT );
1950     \textcolor{keywordflow}{if}( \hyperlink{windefs_8h_aa0b90aaeb74b2488a95f0902cef09cbf}{WINVERS\_AMIV} && cw->\hyperlink{structamii__WinDesc_ab90130f7f09b474842877b2f71d708e0}{type} == \hyperlink{wintype_8h_a756172f2e22a3d287cfaf6bc771df606}{NHW\_MAP})
1951     \{
1952     \hyperlink{winfuncs_8c_aa443a8fd869c4d68918b828581a2f025}{cursor\_common}(rp, x, y);
1953     \}
1954     \textcolor{keywordflow}{else}
1955     \{
1956     Move( rp, x, y );
1957     ch = \hyperlink{windefs_8h_ad7cfdf28b8c73d1c102426b71b5edfca}{CURSOR\_CHAR};
1958     Text( rp, &ch, 1 );
1959     Move( rp, x, y );
1960     \}
1961 
1962     SetDrMd( rp, dmode );
1963     SetAPen( rp, apen );
1964     SetBPen( rp, bpen );
1965 \}
\end{DoxyCode}
\hypertarget{winfuncs_8c_ac946cc5b4c43a936e168ddc80b74c4bd}{\index{winfuncs.\+c@{winfuncs.\+c}!dismiss\+\_\+nhwindow@{dismiss\+\_\+nhwindow}}
\index{dismiss\+\_\+nhwindow@{dismiss\+\_\+nhwindow}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{dismiss\+\_\+nhwindow}]{\setlength{\rightskip}{0pt plus 5cm}void dismiss\+\_\+nhwindow (
\begin{DoxyParamCaption}
\item[{{\bf winid}}]{win}
\end{DoxyParamCaption}
)}}\label{winfuncs_8c_ac946cc5b4c43a936e168ddc80b74c4bd}


Definition at line 1477 of file winfuncs.\+c.



References amii\+\_\+wins, Close\+Sh\+Window(), Free\+New\+Window(), amii\+\_\+\+Win\+Desc\+::newwin, N\+H\+W\+\_\+\+B\+A\+S\+E, N\+H\+W\+\_\+\+M\+A\+P, N\+H\+W\+\_\+\+M\+E\+S\+S\+A\+G\+E, N\+H\+W\+\_\+\+O\+V\+E\+R, N\+H\+W\+\_\+\+S\+T\+A\+T\+U\+S, N\+U\+L\+L, panic(), amii\+\_\+\+Win\+Desc\+::type, amii\+\_\+\+Win\+Desc\+::win, W\+I\+N\+\_\+\+E\+R\+R, W\+I\+N\+\_\+\+I\+N\+V\+E\+N, and winpanicstr.



Referenced by amii\+\_\+destroy\+\_\+nhwindow(), and amii\+\_\+select\+\_\+menu().


\begin{DoxyCode}
1479 \{
1480     \textcolor{keyword}{register} \textcolor{keyword}{struct }Window *w;
1481     \textcolor{keyword}{register} \textcolor{keyword}{struct }\hyperlink{structamii__WinDesc}{amii\_WinDesc} *cw;
1482 
1483     \textcolor{keywordflow}{if}( \hyperlink{structamii__WinDesc_a9835faa4d66643cd889203e26edee8ae}{win} == \hyperlink{wintype_8h_a56d1f4f2e517a4e81be0b7593e35e681}{WIN\_ERR} || ( cw = \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[\hyperlink{structamii__WinDesc_a9835faa4d66643cd889203e26edee8ae}{win}] ) == \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} )
1484     \{
1485     \hyperlink{txt2iff_8c_ab0824b6f5eb51db9371d2e9a222249d3}{panic}(\hyperlink{winext_8h_a4264157ee8930111caf21b62c212e08c}{winpanicstr},win, \textcolor{stringliteral}{"dismiss\_nhwindow"});
1486     \}
1487 
1488     w = cw->\hyperlink{structamii__WinDesc_a9835faa4d66643cd889203e26edee8ae}{win};
1489 
1490     \textcolor{keywordflow}{if}( w )
1491     \{
1492     \textcolor{comment}{/* All windows have this stuff attached to them. */}
1493     \textcolor{keywordflow}{if}( cw->\hyperlink{structamii__WinDesc_ab90130f7f09b474842877b2f71d708e0}{type} == \hyperlink{wintype_8h_a756172f2e22a3d287cfaf6bc771df606}{NHW\_MAP} ||
1494         cw->\hyperlink{structamii__WinDesc_ab90130f7f09b474842877b2f71d708e0}{type} == \hyperlink{winami_8h_ade6ff25a1de12300d538d40c306f4b2a}{NHW\_OVER} ||
1495         cw->\hyperlink{structamii__WinDesc_ab90130f7f09b474842877b2f71d708e0}{type} == \hyperlink{macwin_8h_ab575e634e51462bf534b7ee541cefc46}{NHW\_BASE} ||
1496         cw->\hyperlink{structamii__WinDesc_ab90130f7f09b474842877b2f71d708e0}{type} == \hyperlink{wintype_8h_ab3d471e84a363992b5a483392d0b2389}{NHW\_MESSAGE} ||
1497         cw->\hyperlink{structamii__WinDesc_ab90130f7f09b474842877b2f71d708e0}{type} == \hyperlink{wintype_8h_a8ed5b99ab7f854ace5f67f89aaae5404}{NHW\_STATUS} )
1498     \{
1499         ClearMenuStrip( w );
1500     \}
1501 
1502     \textcolor{comment}{/* Save where user like inventory to appear */}
1503     \textcolor{keywordflow}{if}( win == \hyperlink{decl_8h_aabd3637304d093f7077c788661a0a5fd}{WIN\_INVEN} )
1504     \{
1505         lastinvent.MinX = w->LeftEdge;
1506         lastinvent.MinY = w->TopEdge;
1507         lastinvent.MaxX = w->Width;
1508         lastinvent.MaxY = w->Height;
1509     \}
1510 
1511     \textcolor{comment}{/* Close the window */}
1512     \hyperlink{winproto_8h_a343849f85cbb4ebc40f0977834cfc7be}{CloseShWindow}( w );
1513     cw->\hyperlink{structamii__WinDesc_a9835faa4d66643cd889203e26edee8ae}{win} = \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
1514 
1515     \textcolor{comment}{/* Free copy of NewWindow structure for TEXT/MENU windows. */}
1516     \textcolor{keywordflow}{if}( cw->\hyperlink{structamii__WinDesc_a96e2d1e26527cec8fe44903009a365a8}{newwin} )
1517         \hyperlink{winproto_8h_a81a885084baad168d6f5acbb40bfd42c}{FreeNewWindow}( (\textcolor{keywordtype}{void} *)cw->\hyperlink{structamii__WinDesc_a96e2d1e26527cec8fe44903009a365a8}{newwin} );
1518     cw->\hyperlink{structamii__WinDesc_a96e2d1e26527cec8fe44903009a365a8}{newwin} = \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
1519     \}
1520 \}
\end{DoxyCode}
\hypertarget{winfuncs_8c_ae8d6b32a14e062f051d36de0fab26495}{\index{winfuncs.\+c@{winfuncs.\+c}!flush\+I\+D\+C\+M\+P@{flush\+I\+D\+C\+M\+P}}
\index{flush\+I\+D\+C\+M\+P@{flush\+I\+D\+C\+M\+P}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{flush\+I\+D\+C\+M\+P}]{\setlength{\rightskip}{0pt plus 5cm}void flush\+I\+D\+C\+M\+P (
\begin{DoxyParamCaption}
\item[{struct Msg\+Port $\ast$}]{port}
\end{DoxyParamCaption}
)}}\label{winfuncs_8c_ae8d6b32a14e062f051d36de0fab26495}


Definition at line 2445 of file winfuncs.\+c.



Referenced by outmore().


\begin{DoxyCode}
2447 \{
2448     \textcolor{keyword}{struct }Message *msg;
2449     \textcolor{keywordflow}{while}( msg = GetMsg( port ) )
2450         ReplyMsg( msg );
2451 \}
\end{DoxyCode}
\hypertarget{winfuncs_8c_a72b5bc3695faa88e00240b100758f23a}{\index{winfuncs.\+c@{winfuncs.\+c}!kill\+\_\+nhwindows@{kill\+\_\+nhwindows}}
\index{kill\+\_\+nhwindows@{kill\+\_\+nhwindows}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{kill\+\_\+nhwindows}]{\setlength{\rightskip}{0pt plus 5cm}void kill\+\_\+nhwindows (
\begin{DoxyParamCaption}
\item[{int}]{all}
\end{DoxyParamCaption}
)}}\label{winfuncs_8c_a72b5bc3695faa88e00240b100758f23a}


Definition at line 1799 of file winfuncs.\+c.



References amii\+\_\+destroy\+\_\+nhwindow(), amii\+\_\+wins, M\+A\+X\+W\+I\+N, N\+H\+W\+\_\+\+B\+A\+S\+E, and amii\+\_\+\+Win\+Desc\+::type.



Referenced by amii\+\_\+exit\+\_\+nhwindows().


\begin{DoxyCode}
1801 \{
1802     \textcolor{keyword}{register} \textcolor{keywordtype}{int} i;
1803     \textcolor{keyword}{register} \textcolor{keyword}{struct }\hyperlink{structamii__WinDesc}{amii\_WinDesc} *cw;
1804 
1805     \textcolor{comment}{/* Foreach open window in all of amii\_wins[], CloseShWindow, free memory */}
1806 
1807     \textcolor{keywordflow}{for}( i = 0; i < \hyperlink{winami_8h_a0882b20213d1ebf14d860e611d06cf36}{MAXWIN}; ++i )
1808     \{
1809     \textcolor{keywordflow}{if}( (cw = \hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[ i ]) && (cw->\hyperlink{structamii__WinDesc_ab90130f7f09b474842877b2f71d708e0}{type} != \hyperlink{macwin_8h_ab575e634e51462bf534b7ee541cefc46}{NHW\_BASE} || all) )
1810     \{
1811         \hyperlink{winfuncs_8c_aa650954bd0e8c4a5ef3b283050cd646c}{amii\_destroy\_nhwindow}( i );
1812     \}
1813     \}
1814 \}
\end{DoxyCode}
\hypertarget{winfuncs_8c_a286a3e794d3dba209062e7862565e70f}{\index{winfuncs.\+c@{winfuncs.\+c}!removetopl@{removetopl}}
\index{removetopl@{removetopl}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{removetopl}]{\setlength{\rightskip}{0pt plus 5cm}void removetopl (
\begin{DoxyParamCaption}
\item[{int}]{cnt}
\end{DoxyParamCaption}
)}}\label{winfuncs_8c_a286a3e794d3dba209062e7862565e70f}


Definition at line 2006 of file winfuncs.\+c.



References amii\+\_\+cl\+\_\+end(), amii\+\_\+curs(), amii\+\_\+wins, amii\+\_\+\+Win\+Desc\+::curx, amii\+\_\+\+Win\+Desc\+::cury, and W\+I\+N\+\_\+\+M\+E\+S\+S\+A\+G\+E.


\begin{DoxyCode}
2008 \{
2009     \textcolor{keyword}{struct }\hyperlink{structamii__WinDesc}{amii\_WinDesc} *cw=\hyperlink{winami_8h_a84358fe75628f255a0687acb6e8499de}{amii\_wins}[\hyperlink{decl_8h_a4a1cc9e693dbdfad3ea32b10ce19f337}{WIN\_MESSAGE}];
2010                     \textcolor{comment}{/* NB - this is sufficient for}
2011 \textcolor{comment}{                     * yn\_function, but that's it}
2012 \textcolor{comment}{                     */}
2013     \textcolor{keywordflow}{if}(cw->\hyperlink{structamii__WinDesc_a4ae862475cf0a2f6aed98394d3ac12bd}{curx} < cnt)cw->\hyperlink{structamii__WinDesc_a4ae862475cf0a2f6aed98394d3ac12bd}{curx}=0;
2014     \textcolor{keywordflow}{else} cw->\hyperlink{structamii__WinDesc_a4ae862475cf0a2f6aed98394d3ac12bd}{curx} -= cnt;
2015 
2016     \hyperlink{winfuncs_8c_ad16d76372b2790f7b6926dc6174e4111}{amii\_curs}(\hyperlink{decl_8h_a4a1cc9e693dbdfad3ea32b10ce19f337}{WIN\_MESSAGE}, cw->\hyperlink{structamii__WinDesc_a4ae862475cf0a2f6aed98394d3ac12bd}{curx}+1, cw->\hyperlink{structamii__WinDesc_aee07cf405ea0e78eb6b82c339360a0f8}{cury});
2017     \hyperlink{winfuncs_8c_ace7ed7ac165d8e68bbc3df59a8ac5ec6}{amii\_cl\_end}(cw, cw->\hyperlink{structamii__WinDesc_a4ae862475cf0a2f6aed98394d3ac12bd}{curx});
2018 \}
\end{DoxyCode}
\hypertarget{winfuncs_8c_a49e0e4d194d63d3aadfdc40401701b06}{\index{winfuncs.\+c@{winfuncs.\+c}!S\+M\+\_\+\+Filter@{S\+M\+\_\+\+Filter}}
\index{S\+M\+\_\+\+Filter@{S\+M\+\_\+\+Filter}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{S\+M\+\_\+\+Filter}]{\setlength{\rightskip}{0pt plus 5cm}int \+\_\+\+\_\+interrupt \+\_\+\+\_\+saveds \+\_\+\+\_\+asm S\+M\+\_\+\+Filter (
\begin{DoxyParamCaption}
\item[{{\bf register} \+\_\+\+\_\+a0 struct Hook $\ast$}]{hk, }
\item[{{\bf register} \+\_\+\+\_\+a1 {\bf U\+L\+O\+N\+G}}]{mode\+I\+D, }
\item[{{\bf register} \+\_\+\+\_\+a2 struct Screen\+Mode\+Requester $\ast$}]{smr}
\end{DoxyParamCaption}
)}}\label{winfuncs_8c_a49e0e4d194d63d3aadfdc40401701b06}


Definition at line 866 of file winfuncs.\+c.



References S\+C\+R\+E\+E\+N\+H\+E\+I\+G\+H\+T, and W\+I\+D\+T\+H.



Referenced by amii\+\_\+init\+\_\+nhwindows().


\begin{DoxyCode}
870 \{
871 \textcolor{preprocessor}{#endif}
872     \textcolor{keyword}{struct }DimensionInfo dims;
873     \textcolor{keyword}{struct }DisplayInfo disp;
874     DisplayInfoHandle handle;
875     handle = FindDisplayInfo(modeID);
876     \textcolor{keywordflow}{if} (handle) \{
877     GetDisplayInfoData(handle, (\textcolor{keywordtype}{char} *)&dims, \textcolor{keyword}{sizeof}(dims), DTAG\_DIMS, modeID);
878     GetDisplayInfoData(handle, (\textcolor{keywordtype}{char} *)&disp, \textcolor{keyword}{sizeof}(disp), DTAG\_DISP, modeID);
879     \textcolor{keywordflow}{if} (!disp.NotAvailable &&
880          dims.MaxDepth <= 8 &&
881          dims.StdOScan.MaxX >= \hyperlink{mkmap_8c_a241aeeb764887ae5e3de58b98f04b16d}{WIDTH}-1 &&
882          dims.StdOScan.MaxY >= \hyperlink{windefs_8h_ae189e98d0ef9263c37869ce1ff3710a5}{SCREENHEIGHT}-1) \{
883         \textcolor{keywordflow}{return} 1;
884     \}
885     \}
886     \textcolor{keywordflow}{return} 0;
887 \}
\end{DoxyCode}


\subsection{Variable Documentation}
\hypertarget{winfuncs_8c_a3ddc62e44fb01a556d409b3082c78a7a}{\index{winfuncs.\+c@{winfuncs.\+c}!amii\+\_\+bmhd@{amii\+\_\+bmhd}}
\index{amii\+\_\+bmhd@{amii\+\_\+bmhd}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{amii\+\_\+bmhd}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Bit\+Map\+Header} amii\+\_\+bmhd\hspace{0.3cm}{\ttfamily [static]}}}\label{winfuncs_8c_a3ddc62e44fb01a556d409b3082c78a7a}


Definition at line 12 of file winfuncs.\+c.

\hypertarget{winfuncs_8c_a671ae6e85756b2cbd50580e85216e311}{\index{winfuncs.\+c@{winfuncs.\+c}!amii\+\_\+libvers@{amii\+\_\+libvers}}
\index{amii\+\_\+libvers@{amii\+\_\+libvers}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{amii\+\_\+libvers}]{\setlength{\rightskip}{0pt plus 5cm}long amii\+\_\+libvers = {\bf L\+I\+B\+R\+A\+R\+Y\+\_\+\+F\+O\+N\+T\+\_\+\+V\+E\+R\+S\+I\+O\+N}}}\label{winfuncs_8c_a671ae6e85756b2cbd50580e85216e311}


Definition at line 41 of file winfuncs.\+c.



Referenced by ami\+\_\+wininit\+\_\+data(), amii\+\_\+init\+\_\+nhwindows(), and amii\+\_\+set\+\_\+text\+\_\+font().

\hypertarget{winfuncs_8c_a14ab17c151206a4245022490c76255ec}{\index{winfuncs.\+c@{winfuncs.\+c}!amii\+\_\+menu\+A\+Pen@{amii\+\_\+menu\+A\+Pen}}
\index{amii\+\_\+menu\+A\+Pen@{amii\+\_\+menu\+A\+Pen}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{amii\+\_\+menu\+A\+Pen}]{\setlength{\rightskip}{0pt plus 5cm}int amii\+\_\+menu\+A\+Pen}}\label{winfuncs_8c_a14ab17c151206a4245022490c76255ec}


Definition at line 35 of file winfuncs.\+c.



Referenced by ami\+\_\+wininit\+\_\+data(), amii\+\_\+setdrawpens(), amii\+\_\+sethipens(), Display\+Data(), and parse\+\_\+config\+\_\+line().

\hypertarget{winfuncs_8c_a26ac45dc44f3d41edc95bc99e0b788d8}{\index{winfuncs.\+c@{winfuncs.\+c}!amii\+\_\+menu\+B\+Pen@{amii\+\_\+menu\+B\+Pen}}
\index{amii\+\_\+menu\+B\+Pen@{amii\+\_\+menu\+B\+Pen}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{amii\+\_\+menu\+B\+Pen}]{\setlength{\rightskip}{0pt plus 5cm}int amii\+\_\+menu\+B\+Pen}}\label{winfuncs_8c_a26ac45dc44f3d41edc95bc99e0b788d8}


Definition at line 36 of file winfuncs.\+c.



Referenced by ami\+\_\+wininit\+\_\+data(), amii\+\_\+setdrawpens(), amii\+\_\+setfillpens(), amii\+\_\+sethipens(), amiv\+\_\+lprint\+\_\+glyph(), Display\+Data(), and parse\+\_\+config\+\_\+line().

\hypertarget{winfuncs_8c_acc9bd89041e1021df5e8d898dda9968c}{\index{winfuncs.\+c@{winfuncs.\+c}!amii\+\_\+msg\+A\+Pen@{amii\+\_\+msg\+A\+Pen}}
\index{amii\+\_\+msg\+A\+Pen@{amii\+\_\+msg\+A\+Pen}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{amii\+\_\+msg\+A\+Pen}]{\setlength{\rightskip}{0pt plus 5cm}int amii\+\_\+msg\+A\+Pen}}\label{winfuncs_8c_acc9bd89041e1021df5e8d898dda9968c}


Definition at line 31 of file winfuncs.\+c.



Referenced by ami\+\_\+wininit\+\_\+data(), amii\+\_\+setdrawpens(), amii\+\_\+sethipens(), Display\+Data(), and parse\+\_\+config\+\_\+line().

\hypertarget{winfuncs_8c_ab8d29ceb31e5059cc2430e47bfba87c8}{\index{winfuncs.\+c@{winfuncs.\+c}!amii\+\_\+msg\+B\+Pen@{amii\+\_\+msg\+B\+Pen}}
\index{amii\+\_\+msg\+B\+Pen@{amii\+\_\+msg\+B\+Pen}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{amii\+\_\+msg\+B\+Pen}]{\setlength{\rightskip}{0pt plus 5cm}int amii\+\_\+msg\+B\+Pen}}\label{winfuncs_8c_ab8d29ceb31e5059cc2430e47bfba87c8}


Definition at line 32 of file winfuncs.\+c.



Referenced by ami\+\_\+wininit\+\_\+data(), amii\+\_\+setdrawpens(), amii\+\_\+setfillpens(), amii\+\_\+sethipens(), Display\+Data(), and parse\+\_\+config\+\_\+line().

\hypertarget{winfuncs_8c_abf1a8ff4e563d7d084463a3b9c8a4171}{\index{winfuncs.\+c@{winfuncs.\+c}!amii\+\_\+oldmsg@{amii\+\_\+oldmsg}}
\index{amii\+\_\+oldmsg@{amii\+\_\+oldmsg}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{amii\+\_\+oldmsg}]{\setlength{\rightskip}{0pt plus 5cm}struct Rectangle amii\+\_\+oldmsg}}\label{winfuncs_8c_abf1a8ff4e563d7d084463a3b9c8a4171}


Definition at line 27 of file winfuncs.\+c.



Referenced by amii\+\_\+create\+\_\+nhwindow(), and amii\+\_\+destroy\+\_\+nhwindow().

\hypertarget{winfuncs_8c_a0a7c9ea82e04a8326edfd11f48eae0aa}{\index{winfuncs.\+c@{winfuncs.\+c}!amii\+\_\+oldover@{amii\+\_\+oldover}}
\index{amii\+\_\+oldover@{amii\+\_\+oldover}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{amii\+\_\+oldover}]{\setlength{\rightskip}{0pt plus 5cm}struct Rectangle amii\+\_\+oldover}}\label{winfuncs_8c_a0a7c9ea82e04a8326edfd11f48eae0aa}


Definition at line 26 of file winfuncs.\+c.



Referenced by amii\+\_\+create\+\_\+nhwindow(), and amii\+\_\+destroy\+\_\+nhwindow().

\hypertarget{winfuncs_8c_a0d0a78803f21bcbdb86d788acde92972}{\index{winfuncs.\+c@{winfuncs.\+c}!amii\+\_\+other\+A\+Pen@{amii\+\_\+other\+A\+Pen}}
\index{amii\+\_\+other\+A\+Pen@{amii\+\_\+other\+A\+Pen}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{amii\+\_\+other\+A\+Pen}]{\setlength{\rightskip}{0pt plus 5cm}int amii\+\_\+other\+A\+Pen}}\label{winfuncs_8c_a0d0a78803f21bcbdb86d788acde92972}


Definition at line 39 of file winfuncs.\+c.



Referenced by ami\+\_\+wininit\+\_\+data(), amii\+\_\+setdrawpens(), amii\+\_\+sethipens(), and parse\+\_\+config\+\_\+line().

\hypertarget{winfuncs_8c_a111dca2a2ad69484b4c949424caa4ffa}{\index{winfuncs.\+c@{winfuncs.\+c}!amii\+\_\+other\+B\+Pen@{amii\+\_\+other\+B\+Pen}}
\index{amii\+\_\+other\+B\+Pen@{amii\+\_\+other\+B\+Pen}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{amii\+\_\+other\+B\+Pen}]{\setlength{\rightskip}{0pt plus 5cm}int amii\+\_\+other\+B\+Pen}}\label{winfuncs_8c_a111dca2a2ad69484b4c949424caa4ffa}


Definition at line 40 of file winfuncs.\+c.



Referenced by ami\+\_\+wininit\+\_\+data(), amii\+\_\+setdrawpens(), amii\+\_\+setfillpens(), amii\+\_\+sethipens(), Disp\+Col(), Edit\+Clipping(), parse\+\_\+config\+\_\+line(), and Show\+Clip\+Values().

\hypertarget{winfuncs_8c_abd477ff7ec6eba516c641ea5ae9af420}{\index{winfuncs.\+c@{winfuncs.\+c}!amii\+\_\+stat\+A\+Pen@{amii\+\_\+stat\+A\+Pen}}
\index{amii\+\_\+stat\+A\+Pen@{amii\+\_\+stat\+A\+Pen}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{amii\+\_\+stat\+A\+Pen}]{\setlength{\rightskip}{0pt plus 5cm}int amii\+\_\+stat\+A\+Pen}}\label{winfuncs_8c_abd477ff7ec6eba516c641ea5ae9af420}


Definition at line 33 of file winfuncs.\+c.



Referenced by ami\+\_\+wininit\+\_\+data(), amii\+\_\+setdrawpens(), amii\+\_\+sethipens(), and parse\+\_\+config\+\_\+line().

\hypertarget{winfuncs_8c_aacd31bf4b410f0502df1519ddb6822ab}{\index{winfuncs.\+c@{winfuncs.\+c}!amii\+\_\+stat\+B\+Pen@{amii\+\_\+stat\+B\+Pen}}
\index{amii\+\_\+stat\+B\+Pen@{amii\+\_\+stat\+B\+Pen}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{amii\+\_\+stat\+B\+Pen}]{\setlength{\rightskip}{0pt plus 5cm}int amii\+\_\+stat\+B\+Pen}}\label{winfuncs_8c_aacd31bf4b410f0502df1519ddb6822ab}


Definition at line 34 of file winfuncs.\+c.



Referenced by ami\+\_\+wininit\+\_\+data(), amii\+\_\+setdrawpens(), amii\+\_\+setfillpens(), amii\+\_\+sethipens(), and parse\+\_\+config\+\_\+line().

\hypertarget{winfuncs_8c_a87c9b725a8d1a308419408002c9eed2d}{\index{winfuncs.\+c@{winfuncs.\+c}!amii\+\_\+text\+A\+Pen@{amii\+\_\+text\+A\+Pen}}
\index{amii\+\_\+text\+A\+Pen@{amii\+\_\+text\+A\+Pen}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{amii\+\_\+text\+A\+Pen}]{\setlength{\rightskip}{0pt plus 5cm}int amii\+\_\+text\+A\+Pen}}\label{winfuncs_8c_a87c9b725a8d1a308419408002c9eed2d}


Definition at line 37 of file winfuncs.\+c.



Referenced by ami\+\_\+wininit\+\_\+data(), amii\+\_\+setdrawpens(), amii\+\_\+sethipens(), Display\+Data(), and parse\+\_\+config\+\_\+line().

\hypertarget{winfuncs_8c_a9ba6c6ce5bc8ca526739e615566abde0}{\index{winfuncs.\+c@{winfuncs.\+c}!amii\+\_\+text\+B\+Pen@{amii\+\_\+text\+B\+Pen}}
\index{amii\+\_\+text\+B\+Pen@{amii\+\_\+text\+B\+Pen}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{amii\+\_\+text\+B\+Pen}]{\setlength{\rightskip}{0pt plus 5cm}int amii\+\_\+text\+B\+Pen}}\label{winfuncs_8c_a9ba6c6ce5bc8ca526739e615566abde0}


Definition at line 38 of file winfuncs.\+c.



Referenced by ami\+\_\+wininit\+\_\+data(), amii\+\_\+setdrawpens(), amii\+\_\+setfillpens(), amii\+\_\+sethipens(), Display\+Data(), and parse\+\_\+config\+\_\+line().

\hypertarget{winfuncs_8c_afba9a8d2cd024c7010eae489091d11d6}{\index{winfuncs.\+c@{winfuncs.\+c}!mxsize@{mxsize}}
\index{mxsize@{mxsize}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{mxsize}]{\setlength{\rightskip}{0pt plus 5cm}int mxsize}}\label{winfuncs_8c_afba9a8d2cd024c7010eae489091d11d6}


Definition at line 25 of file winfuncs.\+c.



Referenced by ami\+\_\+wininit\+\_\+data(), amii\+\_\+cliparound(), amii\+\_\+create\+\_\+nhwindow(), amii\+\_\+curs(), amii\+\_\+nh\+\_\+poskey(), amiv\+\_\+flush\+\_\+glyph\+\_\+buffer(), amiv\+\_\+lprint\+\_\+glyph(), cursor\+\_\+common(), Edit\+Clipping(), and Show\+Clip\+Values().

\hypertarget{winfuncs_8c_a9703aea67c83633a25beaa737dad2b65}{\index{winfuncs.\+c@{winfuncs.\+c}!mysize@{mysize}}
\index{mysize@{mysize}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{mysize}]{\setlength{\rightskip}{0pt plus 5cm}int mysize}}\label{winfuncs_8c_a9703aea67c83633a25beaa737dad2b65}


Definition at line 25 of file winfuncs.\+c.



Referenced by ami\+\_\+wininit\+\_\+data(), amii\+\_\+cliparound(), amii\+\_\+create\+\_\+nhwindow(), amii\+\_\+curs(), amii\+\_\+nh\+\_\+poskey(), amiv\+\_\+flush\+\_\+glyph\+\_\+buffer(), amiv\+\_\+lprint\+\_\+glyph(), cursor\+\_\+common(), Edit\+Clipping(), and Show\+Clip\+Values().

\hypertarget{winfuncs_8c_ab4180a3dac152c2cdb9d0debce284a33}{\index{winfuncs.\+c@{winfuncs.\+c}!Rogue\+Font@{Rogue\+Font}}
\index{Rogue\+Font@{Rogue\+Font}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{Rogue\+Font}]{\setlength{\rightskip}{0pt plus 5cm}struct Text\+Font$\ast$ Rogue\+Font}}\label{winfuncs_8c_ab4180a3dac152c2cdb9d0debce284a33}


Referenced by amii\+\_\+create\+\_\+nhwindow(), and amii\+\_\+init\+\_\+nhwindows().

\hypertarget{winfuncs_8c_a3196b72476cb71b37649e1b48a7470e4}{\index{winfuncs.\+c@{winfuncs.\+c}!scrntags@{scrntags}}
\index{scrntags@{scrntags}!winfuncs.\+c@{winfuncs.\+c}}
\subsubsection[{scrntags}]{\setlength{\rightskip}{0pt plus 5cm}struct Tag\+Item scrntags\mbox{[}$\,$\mbox{]}}}\label{winfuncs_8c_a3196b72476cb71b37649e1b48a7470e4}


Referenced by amii\+\_\+init\+\_\+nhwindows().

