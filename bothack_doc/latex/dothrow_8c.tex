\hypertarget{dothrow_8c}{\section{nethack/src/dothrow.c File Reference}
\label{dothrow_8c}\index{nethack/src/dothrow.\+c@{nethack/src/dothrow.\+c}}
}
{\ttfamily \#include \char`\"{}hack.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}edog.\+h\char`\"{}}\\*
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{dothrow_8c_aed16bef0dda0c6434a58efee444dcc2f}{quest\+\_\+arti\+\_\+hits\+\_\+leader}(\hyperlink{structobj}{obj}, mon)~(\hyperlink{structobj}{obj}-\/$>$oartifact \&\& \hyperlink{questpgr_8c_a883c5ecd485acd110958e3a233cf9b57}{is\+\_\+quest\+\_\+artifact}(\hyperlink{structobj}{obj}) \&\& (mon-\/$>$data-\/$>$msound == \hyperlink{monflag_8h_a57dd24aec371766f02747931edfcad46}{M\+S\+\_\+\+L\+E\+A\+D\+E\+R}))
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{hack_8h_a0c2ce0eef98596c51b3a10e50a29dd5e}{S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} int \hyperlink{dothrow_8c_a060683cd287617dba3c5d46a4dada78e}{F\+D\+E\+C\+L} (\hyperlink{dothrow_8c_ae09ef336b45cfd9d6e9cbd32ca699216}{throw\+\_\+obj},(struct \hyperlink{structobj}{obj} $\ast$, int))
\item 
\hyperlink{hack_8h_a0c2ce0eef98596c51b3a10e50a29dd5e}{S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} void \hyperlink{dothrow_8c_a6ed2701518ef4415f22d4087a987204c}{N\+D\+E\+C\+L} (\hyperlink{dothrow_8c_aa2a46c0d4ca45e02d9f24354d5c6e549}{autoquiver})
\item 
\hyperlink{hack_8h_a0c2ce0eef98596c51b3a10e50a29dd5e}{S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} int \hyperlink{dothrow_8c_a1ceaad5ebc00aaf7941bcb2c76c2bfe5}{F\+D\+E\+C\+L} (\hyperlink{dothrow_8c_aa44a442fb326369215022c910ce07e7f}{gem\+\_\+accept},(struct \hyperlink{structmonst}{monst} $\ast$, struct \hyperlink{structobj}{obj} $\ast$))
\item 
\hyperlink{hack_8h_a0c2ce0eef98596c51b3a10e50a29dd5e}{S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} void \hyperlink{dothrow_8c_af51b0d0eb85dea3d5a0716d6f7f50cf1}{F\+D\+E\+C\+L} (\hyperlink{dothrow_8c_a3b65efcc0f60a81c1c3059701eb64e47}{tmiss},(struct \hyperlink{structobj}{obj} $\ast$, struct \hyperlink{structmonst}{monst} $\ast$))
\item 
\hyperlink{hack_8h_a0c2ce0eef98596c51b3a10e50a29dd5e}{S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} int \hyperlink{dothrow_8c_a4ff7e37eba405a1be318e4b16a999f3f}{F\+D\+E\+C\+L} (\hyperlink{dothrow_8c_a3d1a3f6c2e5c067c9c38fe6d4c8b9b4d}{throw\+\_\+gold},(struct \hyperlink{structobj}{obj} $\ast$))
\item 
\hyperlink{hack_8h_a0c2ce0eef98596c51b3a10e50a29dd5e}{S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} void \hyperlink{dothrow_8c_adcbed6300e6ec5763d8534bb1100124b}{F\+D\+E\+C\+L} (\hyperlink{dothrow_8c_af5cc3d590b41c3cabf70b1c76824c56b}{check\+\_\+shop\+\_\+obj},(struct \hyperlink{structobj}{obj} $\ast$, \hyperlink{wingem1_8c_abea04566e20888dd08f477de5f4b9289}{X\+C\+H\+A\+R\+\_\+\+P}, \hyperlink{wingem1_8c_abea04566e20888dd08f477de5f4b9289}{X\+C\+H\+A\+R\+\_\+\+P}, \hyperlink{wingem1_8c_aa2723cc3af18a5199ab4ce7cca84d82b}{B\+O\+O\+L\+E\+A\+N\+\_\+\+P}))
\item 
\hyperlink{hack_8h_a0c2ce0eef98596c51b3a10e50a29dd5e}{S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} void \hyperlink{dothrow_8c_a6c2d841ccd09ff7ec57148dae324d435}{F\+D\+E\+C\+L} (\hyperlink{dothrow_8c_a784726af6e3943f1f3834371d037050b}{breakobj},(struct \hyperlink{structobj}{obj} $\ast$, \hyperlink{wingem1_8c_abea04566e20888dd08f477de5f4b9289}{X\+C\+H\+A\+R\+\_\+\+P}, \hyperlink{wingem1_8c_abea04566e20888dd08f477de5f4b9289}{X\+C\+H\+A\+R\+\_\+\+P}, \hyperlink{wingem1_8c_aa2723cc3af18a5199ab4ce7cca84d82b}{B\+O\+O\+L\+E\+A\+N\+\_\+\+P}, \hyperlink{wingem1_8c_aa2723cc3af18a5199ab4ce7cca84d82b}{B\+O\+O\+L\+E\+A\+N\+\_\+\+P}))
\item 
\hyperlink{hack_8h_a0c2ce0eef98596c51b3a10e50a29dd5e}{S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} void \hyperlink{dothrow_8c_a221eaa5500b06993aef01bdc4ed929f0}{F\+D\+E\+C\+L} (\hyperlink{dothrow_8c_a2eb51c280cad12050b4a586e6b9285a6}{breakmsg},(struct \hyperlink{structobj}{obj} $\ast$, \hyperlink{wingem1_8c_aa2723cc3af18a5199ab4ce7cca84d82b}{B\+O\+O\+L\+E\+A\+N\+\_\+\+P}))
\item 
\hyperlink{hack_8h_a0c2ce0eef98596c51b3a10e50a29dd5e}{S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} \hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} \hyperlink{dothrow_8c_a2b9e98fdb59141c37df459136ba87274}{F\+D\+E\+C\+L} (\hyperlink{dothrow_8c_ace8f8358501b66014585c75e183d9eae}{toss\+\_\+up},(struct \hyperlink{structobj}{obj} $\ast$, \hyperlink{wingem1_8c_aa2723cc3af18a5199ab4ce7cca84d82b}{B\+O\+O\+L\+E\+A\+N\+\_\+\+P}))
\item 
\hyperlink{hack_8h_a0c2ce0eef98596c51b3a10e50a29dd5e}{S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} \hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} \hyperlink{dothrow_8c_a673854f767f80a30ba72b98542ab2260}{F\+D\+E\+C\+L} (\hyperlink{dothrow_8c_a61f17732325303360ee2197078a891f8}{throwing\+\_\+weapon},(struct \hyperlink{structobj}{obj} $\ast$))
\item 
\hyperlink{hack_8h_a0c2ce0eef98596c51b3a10e50a29dd5e}{S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} void \hyperlink{dothrow_8c_a573fa3641657c59a7e30ada21fe428f7}{F\+D\+E\+C\+L} (\hyperlink{dothrow_8c_a1252b75a6979fc66ac71229350e210e4}{sho\+\_\+obj\+\_\+return\+\_\+to\+\_\+u},(struct \hyperlink{structobj}{obj} $\ast$\hyperlink{structobj}{obj}))
\item 
\hyperlink{hack_8h_a0c2ce0eef98596c51b3a10e50a29dd5e}{S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} \hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} \hyperlink{dothrow_8c_aaefeed8ec3ab1a6218e0f2b8c72d9c68}{F\+D\+E\+C\+L} (\hyperlink{dothrow_8c_a47548d1412ae110a5180cf108b450cc3}{mhurtle\+\_\+step},(\hyperlink{tradstdc_8h_ad4a7dab7269b4b00e3c7c7d2e66f31cd}{genericptr\+\_\+t}, int, int))
\item 
\hyperlink{hack_8h_a6584b0687fb4e0040a85bbcdaa3e0ee1}{S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} int \hyperlink{dothrow_8c_ae09ef336b45cfd9d6e9cbd32ca699216}{throw\+\_\+obj} (struct \hyperlink{structobj}{obj} $\ast$\hyperlink{structobj}{obj}, int shotlimit)
\item 
int \hyperlink{dothrow_8c_a20de378fb06426702ae93bf31828e8e7}{dothrow} ()
\item 
static void \hyperlink{dothrow_8c_aa2a46c0d4ca45e02d9f24354d5c6e549}{autoquiver} ()
\item 
int \hyperlink{dothrow_8c_af91bb1fa1ac46425a8223a7e48e4aae6}{dofire} ()
\item 
void \hyperlink{dothrow_8c_aa65e537e36073dedf0f33bad075f8d3c}{hitfloor} (struct \hyperlink{structobj}{obj} $\ast$\hyperlink{structobj}{obj})
\item 
\hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} \hyperlink{dothrow_8c_a41c191c1d9404247b99b3d4921e683b0}{walk\+\_\+path} (\hyperlink{structcoord}{coord} $\ast$src\+\_\+cc, \hyperlink{structcoord}{coord} $\ast$dest\+\_\+cc, check\+\_\+proc, \hyperlink{tradstdc_8h_ad4a7dab7269b4b00e3c7c7d2e66f31cd}{genericptr\+\_\+t} arg)
\item 
\hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} \hyperlink{dothrow_8c_acde92d21dc725557013057a88b1f3c29}{hurtle\+\_\+step} (\hyperlink{tradstdc_8h_ad4a7dab7269b4b00e3c7c7d2e66f31cd}{genericptr\+\_\+t} arg, int x, int y)
\item 
\hyperlink{hack_8h_a6584b0687fb4e0040a85bbcdaa3e0ee1}{S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} \hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} \hyperlink{dothrow_8c_a47548d1412ae110a5180cf108b450cc3}{mhurtle\+\_\+step} (\hyperlink{tradstdc_8h_ad4a7dab7269b4b00e3c7c7d2e66f31cd}{genericptr\+\_\+t} arg, int x, int y)
\item 
void \hyperlink{dothrow_8c_a20d0289d24c19e2996a56be042014293}{hurtle} (int dx, int dy, int range, \hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} verbose)
\item 
void \hyperlink{dothrow_8c_a10dae152f3b0975ef98ec3739172886e}{mhurtle} (struct \hyperlink{structmonst}{monst} $\ast$mon, int dx, int dy, int range)
\item 
\hyperlink{hack_8h_a6584b0687fb4e0040a85bbcdaa3e0ee1}{S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} void \hyperlink{dothrow_8c_af5cc3d590b41c3cabf70b1c76824c56b}{check\+\_\+shop\+\_\+obj} (struct \hyperlink{structobj}{obj} $\ast$\hyperlink{structobj}{obj}, \hyperlink{global_8h_a2043b7d01ce89f4ee2fa6c345a752d32}{xchar} x, \hyperlink{global_8h_a2043b7d01ce89f4ee2fa6c345a752d32}{xchar} y, \hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} broken)
\item 
\hyperlink{hack_8h_a6584b0687fb4e0040a85bbcdaa3e0ee1}{S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} \hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} \hyperlink{dothrow_8c_ace8f8358501b66014585c75e183d9eae}{toss\+\_\+up} (struct \hyperlink{structobj}{obj} $\ast$\hyperlink{structobj}{obj}, \hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} hitsroof)
\item 
\hyperlink{hack_8h_a6584b0687fb4e0040a85bbcdaa3e0ee1}{S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} \hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} \hyperlink{dothrow_8c_a61f17732325303360ee2197078a891f8}{throwing\+\_\+weapon} (struct \hyperlink{structobj}{obj} $\ast$\hyperlink{structobj}{obj})
\item 
\hyperlink{hack_8h_a6584b0687fb4e0040a85bbcdaa3e0ee1}{S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} void \hyperlink{dothrow_8c_a1252b75a6979fc66ac71229350e210e4}{sho\+\_\+obj\+\_\+return\+\_\+to\+\_\+u} (struct \hyperlink{structobj}{obj} $\ast$\hyperlink{structobj}{obj})
\item 
void \hyperlink{dothrow_8c_a8be30f6b633e445567669d9d33a268b9}{throwit} (struct \hyperlink{structobj}{obj} $\ast$\hyperlink{structobj}{obj}, long wep\+\_\+mask, \hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} twoweap)
\item 
int \hyperlink{dothrow_8c_a52fc908fc5be663b06b7a3a4ae042bb2}{omon\+\_\+adj} (struct \hyperlink{structmonst}{monst} $\ast$mon, struct \hyperlink{structobj}{obj} $\ast$\hyperlink{structobj}{obj}, \hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} mon\+\_\+notices)
\item 
\hyperlink{hack_8h_a6584b0687fb4e0040a85bbcdaa3e0ee1}{S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} void \hyperlink{dothrow_8c_a3b65efcc0f60a81c1c3059701eb64e47}{tmiss} (struct \hyperlink{structobj}{obj} $\ast$\hyperlink{structobj}{obj}, struct \hyperlink{structmonst}{monst} $\ast$mon)
\item 
int \hyperlink{dothrow_8c_a0baeb9c5ae48bbe466b1884ee5517eef}{thitmonst} (struct \hyperlink{structmonst}{monst} $\ast$mon, struct \hyperlink{structobj}{obj} $\ast$\hyperlink{structobj}{obj})
\item 
\hyperlink{hack_8h_a6584b0687fb4e0040a85bbcdaa3e0ee1}{S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} int \hyperlink{dothrow_8c_aa44a442fb326369215022c910ce07e7f}{gem\+\_\+accept} (struct \hyperlink{structmonst}{monst} $\ast$mon, struct \hyperlink{structobj}{obj} $\ast$\hyperlink{structobj}{obj})
\item 
int \hyperlink{dothrow_8c_adccb096d28c111690356d637c0f3374c}{hero\+\_\+breaks} (struct \hyperlink{structobj}{obj} $\ast$\hyperlink{structobj}{obj}, \hyperlink{global_8h_a2043b7d01ce89f4ee2fa6c345a752d32}{xchar} x, \hyperlink{global_8h_a2043b7d01ce89f4ee2fa6c345a752d32}{xchar} y, \hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} from\+\_\+invent)
\item 
int \hyperlink{dothrow_8c_a8df649c9332fbb8338c1bdfc9c22a2b9}{breaks} (struct \hyperlink{structobj}{obj} $\ast$\hyperlink{structobj}{obj}, \hyperlink{global_8h_a2043b7d01ce89f4ee2fa6c345a752d32}{xchar} x, \hyperlink{global_8h_a2043b7d01ce89f4ee2fa6c345a752d32}{xchar} y)
\item 
\hyperlink{hack_8h_a6584b0687fb4e0040a85bbcdaa3e0ee1}{S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} void \hyperlink{dothrow_8c_a784726af6e3943f1f3834371d037050b}{breakobj} (struct \hyperlink{structobj}{obj} $\ast$\hyperlink{structobj}{obj}, \hyperlink{global_8h_a2043b7d01ce89f4ee2fa6c345a752d32}{xchar} x, \hyperlink{global_8h_a2043b7d01ce89f4ee2fa6c345a752d32}{xchar} y, \hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} hero\+\_\+caused, \hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} from\+\_\+invent)
\item 
\hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} \hyperlink{dothrow_8c_ace740cf113a1ab7d0370990900d94e03}{breaktest} (struct \hyperlink{structobj}{obj} $\ast$\hyperlink{structobj}{obj})
\item 
\hyperlink{hack_8h_a6584b0687fb4e0040a85bbcdaa3e0ee1}{S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} void \hyperlink{dothrow_8c_a2eb51c280cad12050b4a586e6b9285a6}{breakmsg} (struct \hyperlink{structobj}{obj} $\ast$\hyperlink{structobj}{obj}, \hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} in\+\_\+view)
\item 
\hyperlink{hack_8h_a6584b0687fb4e0040a85bbcdaa3e0ee1}{S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} int \hyperlink{dothrow_8c_a3d1a3f6c2e5c067c9c38fe6d4c8b9b4d}{throw\+\_\+gold} (struct \hyperlink{structobj}{obj} $\ast$\hyperlink{structobj}{obj})
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{config1_8h_a9987bf629301f5fe76ddd96aa2717ca1}{N\+E\+A\+R\+D\+A\+T\+A} \hyperlink{tradstdc_8h_a2c212835823e3c54a8ab6d95c652660e}{const} char \hyperlink{dothrow_8c_a07739e88125b97623e21cef9a3515885}{toss\+\_\+objs} \mbox{[}$\,$\mbox{]}
\item 
static \hyperlink{config1_8h_a9987bf629301f5fe76ddd96aa2717ca1}{N\+E\+A\+R\+D\+A\+T\+A} \hyperlink{tradstdc_8h_a2c212835823e3c54a8ab6d95c652660e}{const} char \hyperlink{dothrow_8c_ad584c47d7d93295295d130a80f2fc309}{bullets} \mbox{[}$\,$\mbox{]}
\item 
struct \hyperlink{structobj}{obj} $\ast$ \hyperlink{dothrow_8c_a81c4c14978b086ed78464d7498963520}{thrownobj} = 0
\item 
\hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} \hyperlink{dothrow_8c_aa0fe2fdb5136cb5a8960dd3b1f24031a}{notonhead}
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\hypertarget{dothrow_8c_aed16bef0dda0c6434a58efee444dcc2f}{\index{dothrow.\+c@{dothrow.\+c}!quest\+\_\+arti\+\_\+hits\+\_\+leader@{quest\+\_\+arti\+\_\+hits\+\_\+leader}}
\index{quest\+\_\+arti\+\_\+hits\+\_\+leader@{quest\+\_\+arti\+\_\+hits\+\_\+leader}!dothrow.\+c@{dothrow.\+c}}
\subsubsection[{quest\+\_\+arti\+\_\+hits\+\_\+leader}]{\setlength{\rightskip}{0pt plus 5cm}\#define quest\+\_\+arti\+\_\+hits\+\_\+leader(
\begin{DoxyParamCaption}
\item[{}]{{\bf obj}, }
\item[{}]{mon}
\end{DoxyParamCaption}
)~({\bf obj}-\/$>$oartifact \&\& {\bf is\+\_\+quest\+\_\+artifact}({\bf obj}) \&\& (mon-\/$>$data-\/$>$msound == {\bf M\+S\+\_\+\+L\+E\+A\+D\+E\+R}))}}\label{dothrow_8c_aed16bef0dda0c6434a58efee444dcc2f}


Definition at line 1169 of file dothrow.\+c.



Referenced by thitmonst().



\subsection{Function Documentation}
\hypertarget{dothrow_8c_aa2a46c0d4ca45e02d9f24354d5c6e549}{\index{dothrow.\+c@{dothrow.\+c}!autoquiver@{autoquiver}}
\index{autoquiver@{autoquiver}!dothrow.\+c@{dothrow.\+c}}
\subsubsection[{autoquiver}]{\setlength{\rightskip}{0pt plus 5cm}static void autoquiver (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{dothrow_8c_aa2a46c0d4ca45e02d9f24354d5c6e549}


Definition at line 224 of file dothrow.\+c.



References ammo\+\_\+and\+\_\+launcher, G\+E\+M\+\_\+\+C\+L\+A\+S\+S, G\+L\+A\+S\+S, invent, is\+\_\+ammo, is\+\_\+missile, obj\+::nobj, obj\+::oartifact, objects, obj\+::oclass, otmp, obj\+::otyp, obj\+::owornmask, P\+\_\+\+D\+A\+G\+G\+E\+R, R\+O\+C\+K, setuqwep(), throwing\+\_\+weapon(), uquiver, uslinging, uswapwep, uwep, and W\+E\+A\+P\+O\+N\+\_\+\+C\+L\+A\+S\+S.



Referenced by dofire().


\begin{DoxyCode}
225 \{
226     \textcolor{keyword}{struct }\hyperlink{structobj}{obj} *\hyperlink{mhitu_8c_a8cf94e09e1a72daf7050a2817ba70974}{otmp}, *oammo = 0, *omissile = 0, *omisc = 0, *altammo = 0;
227 
228     \textcolor{keywordflow}{if} (\hyperlink{decl_8h_a7544f9c7591e79476549f321400d269b}{uquiver})
229         \textcolor{keywordflow}{return};
230 
231     \textcolor{comment}{/* Scan through the inventory */}
232     \textcolor{keywordflow}{for} (otmp = \hyperlink{decl_8h_a65d03deeacf265a14fa3af961820b33f}{invent}; \hyperlink{mhitu_8c_a8cf94e09e1a72daf7050a2817ba70974}{otmp}; otmp = otmp->\hyperlink{structobj_ad1c5d790528ee1d8349ef302994789d8}{nobj}) \{
233         \textcolor{keywordflow}{if} (otmp->\hyperlink{structobj_a7906e045755ba4099705764a4eb076c6}{owornmask} || otmp->\hyperlink{structobj_af03ce8a6a0ca51e8d8954fb1a1a31fbe}{oartifact} || !otmp->dknown) \{
234         ;   \textcolor{comment}{/* Skip it */}
235         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (otmp->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == \hyperlink{objects_8c_ac1b5af7f6cac1028cbf4a80a05496eea}{ROCK} ||
236             \textcolor{comment}{/* seen rocks or known flint or known glass */}
237             (\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[otmp->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp}].oc\_name\_known &&
238              otmp->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == FLINT) ||
239             (\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[otmp->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp}].oc\_name\_known &&
240              otmp->\hyperlink{structobj_a716ba3ee00602dede9ea5c68c74d45bd}{oclass} == \hyperlink{objclass_8h_afc09c51ea922e9928f86a51177244796}{GEM\_CLASS} &&
241              \hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[otmp->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp}].oc\_material == \hyperlink{objclass_8h_ac070bc05447c6faa5ec491a62b615e9f}{GLASS})) \{
242         \textcolor{keywordflow}{if} (\hyperlink{obj_8h_a2adb148f9956bf79f1825fed308ce583}{uslinging}())
243             oammo = \hyperlink{mhitu_8c_a8cf94e09e1a72daf7050a2817ba70974}{otmp};
244         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{obj_8h_a766dc63537673239906c55a19f384b1d}{ammo\_and\_launcher}(otmp, \hyperlink{decl_8h_ab2586a729017fc01f4612808c80c1945}{uswapwep}))
245             altammo = \hyperlink{mhitu_8c_a8cf94e09e1a72daf7050a2817ba70974}{otmp};
246         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!omisc)
247             omisc = \hyperlink{mhitu_8c_a8cf94e09e1a72daf7050a2817ba70974}{otmp};
248         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (otmp->\hyperlink{structobj_a716ba3ee00602dede9ea5c68c74d45bd}{oclass} == \hyperlink{objclass_8h_afc09c51ea922e9928f86a51177244796}{GEM\_CLASS}) \{
249         ;   \textcolor{comment}{/* skip non-rock gems--they're ammo but}
250 \textcolor{comment}{               player has to select them explicitly */}
251         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{obj_8h_a17d7bf4a6f8336a314c0825cf5848c54}{is\_ammo}(otmp)) \{
252         \textcolor{keywordflow}{if} (\hyperlink{obj_8h_a766dc63537673239906c55a19f384b1d}{ammo\_and\_launcher}(otmp, \hyperlink{decl_8h_a1aefaef88eef9075d8136d19410fd3b1}{uwep}))
253             \textcolor{comment}{/* Ammo matched with launcher (bow and arrow, crossbow and bolt) */}
254             oammo = \hyperlink{mhitu_8c_a8cf94e09e1a72daf7050a2817ba70974}{otmp};
255         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{obj_8h_a766dc63537673239906c55a19f384b1d}{ammo\_and\_launcher}(otmp, \hyperlink{decl_8h_ab2586a729017fc01f4612808c80c1945}{uswapwep}))
256             altammo = \hyperlink{mhitu_8c_a8cf94e09e1a72daf7050a2817ba70974}{otmp};
257         \textcolor{keywordflow}{else}
258             \textcolor{comment}{/* Mismatched ammo (no better than an ordinary weapon) */}
259             omisc = \hyperlink{mhitu_8c_a8cf94e09e1a72daf7050a2817ba70974}{otmp};
260         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{obj_8h_a8f997086cdf86ba7eb98102f6e7d4b90}{is\_missile}(otmp)) \{
261         \textcolor{comment}{/* Missile (dart, shuriken, etc.) */}
262         omissile = \hyperlink{mhitu_8c_a8cf94e09e1a72daf7050a2817ba70974}{otmp};
263         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (otmp->\hyperlink{structobj_a716ba3ee00602dede9ea5c68c74d45bd}{oclass} == \hyperlink{objclass_8h_a615c2dc6d3501d6b5e14c3373bc37ec1}{WEAPON\_CLASS} && 
      \hyperlink{dothrow_8c_a61f17732325303360ee2197078a891f8}{throwing\_weapon}(otmp)) \{
264         \textcolor{comment}{/* Ordinary weapon */}
265         \textcolor{keywordflow}{if} (\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[otmp->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp}].oc\_skill == \hyperlink{skills_8h_a1665c75745e5e46d0188a5f7250a7cd5}{P\_DAGGER}
266             && !omissile) 
267             omissile = \hyperlink{mhitu_8c_a8cf94e09e1a72daf7050a2817ba70974}{otmp};
268         \textcolor{keywordflow}{else}
269             omisc = \hyperlink{mhitu_8c_a8cf94e09e1a72daf7050a2817ba70974}{otmp};
270         \}
271     \}
272 
273     \textcolor{comment}{/* Pick the best choice */}
274     \textcolor{keywordflow}{if} (oammo)
275         \hyperlink{wield_8c_a6004112a6fc3b435bb2cff99c8b884d3}{setuqwep}(oammo);
276     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (omissile)
277         \hyperlink{wield_8c_a6004112a6fc3b435bb2cff99c8b884d3}{setuqwep}(omissile);
278     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (altammo)
279         \hyperlink{wield_8c_a6004112a6fc3b435bb2cff99c8b884d3}{setuqwep}(altammo);
280     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (omisc)
281         \hyperlink{wield_8c_a6004112a6fc3b435bb2cff99c8b884d3}{setuqwep}(omisc);
282 
283     \textcolor{keywordflow}{return};
284 \}
\end{DoxyCode}
\hypertarget{dothrow_8c_a2eb51c280cad12050b4a586e6b9285a6}{\index{dothrow.\+c@{dothrow.\+c}!breakmsg@{breakmsg}}
\index{breakmsg@{breakmsg}!dothrow.\+c@{dothrow.\+c}}
\subsubsection[{breakmsg}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} void breakmsg (
\begin{DoxyParamCaption}
\item[{struct {\bf obj} $\ast$}]{obj, }
\item[{{\bf boolean}}]{in\+\_\+view}
\end{DoxyParamCaption}
)}}\label{dothrow_8c_a2eb51c280cad12050b4a586e6b9285a6}


Definition at line 1650 of file dothrow.\+c.



References P\+O\+T\+I\+O\+N\+\_\+\+C\+L\+A\+S\+S, something, and W\+A\+N\+D\+\_\+\+C\+L\+A\+S\+S.



Referenced by breaks(), hero\+\_\+breaks(), throwit(), and toss\+\_\+up().


\begin{DoxyCode}
1653 \{
1654     \textcolor{keyword}{const} \textcolor{keywordtype}{char} *to\_pieces;
1655 
1656     to\_pieces = \textcolor{stringliteral}{""};
1657     \textcolor{keywordflow}{switch} (obj->\hyperlink{structobj_a716ba3ee00602dede9ea5c68c74d45bd}{oclass} == \hyperlink{objclass_8h_a05335e5ee18dfa33af1c40056fe8fab9}{POTION\_CLASS} ? POT\_WATER : obj->
      \hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp}) \{
1658         \textcolor{keywordflow}{default}: \textcolor{comment}{/* glass or crystal wand */}
1659             \textcolor{keywordflow}{if} (obj->\hyperlink{structobj_a716ba3ee00602dede9ea5c68c74d45bd}{oclass} != \hyperlink{objclass_8h_a3465d7e5f808c98fcfc32e3159b9d9c2}{WAND\_CLASS})
1660             impossible(\textcolor{stringliteral}{"breaking odd object?"});
1661         \textcolor{keywordflow}{case} CRYSTAL\_PLATE\_MAIL:
1662         \textcolor{keywordflow}{case} LENSES:
1663         \textcolor{keywordflow}{case} MIRROR:
1664         \textcolor{keywordflow}{case} CRYSTAL\_BALL:
1665 \textcolor{preprocessor}{#ifdef TOURIST}
1666         \textcolor{keywordflow}{case} EXPENSIVE\_CAMERA:
1667 \textcolor{preprocessor}{#endif}
1668             to\_pieces = \textcolor{stringliteral}{" into a thousand pieces"};
1669             \textcolor{comment}{/*FALLTHRU*/}
1670         \textcolor{keywordflow}{case} POT\_WATER:     \textcolor{comment}{/* really, all potions */}
1671             \textcolor{keywordflow}{if} (!in\_view)
1672                 You\_hear(\textcolor{stringliteral}{"%s shatter!"}, \hyperlink{decl_8h_aa5c50bde0d16d15a08d32d8df49a80ae}{something});
1673             \textcolor{keywordflow}{else}
1674                 pline(\textcolor{stringliteral}{"%s shatter%s%s!"}, Doname2(obj),
1675                 (obj->\hyperlink{structobj_ad08c0ed1a746fbb52377ecd7e4220578}{quan}==1) ? \textcolor{stringliteral}{"s"} : \textcolor{stringliteral}{""}, to\_pieces);
1676             \textcolor{keywordflow}{break};
1677         \textcolor{keywordflow}{case} EGG:
1678         \textcolor{keywordflow}{case} MELON:
1679             pline(\textcolor{stringliteral}{"Splat!"});
1680             \textcolor{keywordflow}{break};
1681         \textcolor{keywordflow}{case} CREAM\_PIE:
1682             \textcolor{keywordflow}{if} (in\_view) pline(\textcolor{stringliteral}{"What a mess!"});
1683             \textcolor{keywordflow}{break};
1684         \textcolor{keywordflow}{case} ACID\_VENOM:
1685         \textcolor{keywordflow}{case} BLINDING\_VENOM:
1686             pline(\textcolor{stringliteral}{"Splash!"});
1687             \textcolor{keywordflow}{break};
1688     \}
1689 \}
\end{DoxyCode}
\hypertarget{dothrow_8c_a784726af6e3943f1f3834371d037050b}{\index{dothrow.\+c@{dothrow.\+c}!breakobj@{breakobj}}
\index{breakobj@{breakobj}!dothrow.\+c@{dothrow.\+c}}
\subsubsection[{breakobj}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} void breakobj (
\begin{DoxyParamCaption}
\item[{struct {\bf obj} $\ast$}]{obj, }
\item[{{\bf xchar}}]{x, }
\item[{{\bf xchar}}]{y, }
\item[{{\bf boolean}}]{hero\+\_\+caused, }
\item[{{\bf boolean}}]{from\+\_\+invent}
\end{DoxyParamCaption}
)}}\label{dothrow_8c_a784726af6e3943f1f3834371d037050b}


Definition at line 1554 of file dothrow.\+c.



References breathless, check\+\_\+shop\+\_\+obj(), monst\+::data, distu, E\+Y\+E, eyecount, F\+A\+L\+S\+E, haseyes, L\+O\+W\+\_\+\+P\+M, min, moves, N\+E\+A\+R\+D\+A\+T\+A, P\+O\+T\+I\+O\+N\+\_\+\+C\+L\+A\+S\+S, S\+H\+O\+P\+B\+A\+S\+E, T\+R\+U\+E, u, you\+::ushops, you\+::ux, you\+::uy, and youmonst.



Referenced by breaks(), hero\+\_\+breaks(), throwit(), and toss\+\_\+up().


\begin{DoxyCode}
1559 \{
1560     \textcolor{keywordflow}{switch} (obj->\hyperlink{structobj_a716ba3ee00602dede9ea5c68c74d45bd}{oclass} == \hyperlink{objclass_8h_a05335e5ee18dfa33af1c40056fe8fab9}{POTION\_CLASS} ? POT\_WATER : obj->
      \hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp}) \{
1561         \textcolor{keywordflow}{case} MIRROR:
1562             \textcolor{keywordflow}{if} (hero\_caused)
1563                 change\_luck(-2);
1564             \textcolor{keywordflow}{break};
1565         \textcolor{keywordflow}{case} POT\_WATER:     \textcolor{comment}{/* really, all potions */}
1566             \textcolor{keywordflow}{if} (obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == POT\_OIL && obj->lamplit) \{
1567                 splatter\_burning\_oil(x,y);
1568             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{hack_8h_a1f84afcae19c5b60124bc509ed647f84}{distu}(x,y) <= 2) \{
1569                 \textcolor{keywordflow}{if} (!\hyperlink{mondata_8h_a77944b6442832379493a29ea70661a96}{breathless}(\hyperlink{decl_8h_ad15893dbcb60e2777ae0dfac9f840858}{youmonst}.\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}) || \hyperlink{mondata_8h_acef071254b9ae0dcf53724485be10841}{haseyes}(
      \hyperlink{decl_8h_ad15893dbcb60e2777ae0dfac9f840858}{youmonst}.\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data})) \{
1570                 \textcolor{keywordflow}{if} (obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} != POT\_WATER) \{
1571                     \textcolor{keywordflow}{if} (!\hyperlink{mondata_8h_a77944b6442832379493a29ea70661a96}{breathless}(\hyperlink{decl_8h_ad15893dbcb60e2777ae0dfac9f840858}{youmonst}.\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}))
1572                              \textcolor{comment}{/* [what about "familiar odor" when known?] */}
1573                         You(\textcolor{stringliteral}{"smell a peculiar odor..."});
1574                     \textcolor{keywordflow}{else} \{
1575                         \textcolor{keywordtype}{int} numeyes = \hyperlink{mondata_8h_a92feea53299371976971e15c43923a26}{eyecount}(\hyperlink{decl_8h_ad15893dbcb60e2777ae0dfac9f840858}{youmonst}.\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data});
1576                         Your(\textcolor{stringliteral}{"%s water%s."},
1577                          (numeyes == 1) ? body\_part(\hyperlink{hack_8h_a9dcbae66f1fdfd85d1c36b37ae0e62cb}{EYE}) :
1578                             makeplural(body\_part(\hyperlink{hack_8h_a9dcbae66f1fdfd85d1c36b37ae0e62cb}{EYE})),
1579                          (numeyes == 1) ? \textcolor{stringliteral}{"s"} : \textcolor{stringliteral}{""});
1580                     \}
1581                 \}
1582                 potionbreathe(obj);
1583                 \}
1584             \}
1585             \textcolor{comment}{/* monster breathing isn't handled... [yet?] */}
1586             \textcolor{keywordflow}{break};
1587         \textcolor{keywordflow}{case} EGG:
1588             \textcolor{comment}{/* breaking your own eggs is bad luck */}
1589             \textcolor{keywordflow}{if} (hero\_caused && obj->\hyperlink{structobj_a14fc8dc59e9073bfbf1e170875a98448}{spe} && obj->\hyperlink{structobj_ad5db7220e2b815d06c3c80027ab9924f}{corpsenm} >= \hyperlink{permonst_8h_aedc8e4764f8cf4d681f6f6226eeaa6af}{LOW\_PM})
1590                 change\_luck((\hyperlink{config_8h_a0fd9ce9d735064461bebfe6037026093}{schar}) -\hyperlink{hack_8h_abb702d8b501669a23aa0ab3b281b9384}{min}(obj->\hyperlink{structobj_ad08c0ed1a746fbb52377ecd7e4220578}{quan}, 5L));
1591             \textcolor{keywordflow}{break};
1592     \}
1593     \textcolor{keywordflow}{if} (hero\_caused) \{
1594         \textcolor{keywordflow}{if} (from\_invent) \{
1595         \textcolor{keywordflow}{if} (*\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a1bc3b5ca1e5d9957ab3a7f451c069f47}{ushops})
1596             \hyperlink{dothrow_8c_af5cc3d590b41c3cabf70b1c76824c56b}{check\_shop\_obj}(obj, x, y, \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE});
1597         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!obj->no\_charge && costly\_spot(x, y)) \{
1598         \textcolor{comment}{/* it is assumed that the obj is a floor-object */}
1599         \textcolor{keywordtype}{char} *o\_shop = in\_rooms(x, y, \hyperlink{mkroom_8h_a925701a88c7ed0db502cfac9d8fbcf9e}{SHOPBASE});
1600         \textcolor{keyword}{struct }\hyperlink{structmonst}{monst} *shkp = shop\_keeper(*o\_shop);
1601 
1602         \textcolor{keywordflow}{if} (shkp) \{     \textcolor{comment}{/* (implies *o\_shop != '\(\backslash\)0') */}
1603             \textcolor{keyword}{static} \hyperlink{config1_8h_a9987bf629301f5fe76ddd96aa2717ca1}{NEARDATA} \textcolor{keywordtype}{long} lastmovetime = 0L;
1604             \textcolor{keyword}{static} \hyperlink{config1_8h_a9987bf629301f5fe76ddd96aa2717ca1}{NEARDATA} \textcolor{keywordtype}{boolean} peaceful\_shk = \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
1605             \textcolor{comment}{/*  We want to base shk actions on her peacefulness}
1606 \textcolor{comment}{            at start of this turn, so that "simultaneous"}
1607 \textcolor{comment}{            multiple breakage isn't drastically worse than}
1608 \textcolor{comment}{            single breakage.  (ought to be done via ESHK)  */}
1609             \textcolor{keywordflow}{if} (\hyperlink{decl_8h_a2ccad6e8fb93740ed50c6d9a8f72ce2f}{moves} != lastmovetime)
1610             peaceful\_shk = shkp->mpeaceful;
1611             \textcolor{keywordflow}{if} (stolen\_value(obj, x, y, peaceful\_shk, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}) > 0L &&
1612             (*o\_shop != \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a1bc3b5ca1e5d9957ab3a7f451c069f47}{ushops}[0] || !inside\_shop(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux}, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy})) &&
1613             \hyperlink{decl_8h_a2ccad6e8fb93740ed50c6d9a8f72ce2f}{moves} != lastmovetime) make\_angry\_shk(shkp, x, y);
1614             lastmovetime = \hyperlink{decl_8h_a2ccad6e8fb93740ed50c6d9a8f72ce2f}{moves};
1615         \}
1616         \}
1617     \}
1618     delobj(obj);
1619 \}
\end{DoxyCode}
\hypertarget{dothrow_8c_a8df649c9332fbb8338c1bdfc9c22a2b9}{\index{dothrow.\+c@{dothrow.\+c}!breaks@{breaks}}
\index{breaks@{breaks}!dothrow.\+c@{dothrow.\+c}}
\subsubsection[{breaks}]{\setlength{\rightskip}{0pt plus 5cm}int breaks (
\begin{DoxyParamCaption}
\item[{struct {\bf obj} $\ast$}]{obj, }
\item[{{\bf xchar}}]{x, }
\item[{{\bf xchar}}]{y}
\end{DoxyParamCaption}
)}}\label{dothrow_8c_a8df649c9332fbb8338c1bdfc9c22a2b9}


Definition at line 1537 of file dothrow.\+c.



References Blind, breakmsg(), breakobj(), breaktest(), cansee, and F\+A\+L\+S\+E.


\begin{DoxyCode}
1540 \{
1541     \textcolor{keywordtype}{boolean} in\_view = \hyperlink{youprop_8h_a1b6e24068169af4177e15b48595c08c9}{Blind} ? \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE} : \hyperlink{vision_8h_a857efc720262bc13a9e4b4bcbb079b5c}{cansee}(x, y);
1542 
1543     \textcolor{keywordflow}{if} (!\hyperlink{dothrow_8c_ace740cf113a1ab7d0370990900d94e03}{breaktest}(obj)) \textcolor{keywordflow}{return} 0;
1544     \hyperlink{dothrow_8c_a2eb51c280cad12050b4a586e6b9285a6}{breakmsg}(obj, in\_view);
1545     \hyperlink{dothrow_8c_a784726af6e3943f1f3834371d037050b}{breakobj}(obj, x, y, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE});
1546     \textcolor{keywordflow}{return} 1;
1547 \}
\end{DoxyCode}
\hypertarget{dothrow_8c_ace740cf113a1ab7d0370990900d94e03}{\index{dothrow.\+c@{dothrow.\+c}!breaktest@{breaktest}}
\index{breaktest@{breaktest}!dothrow.\+c@{dothrow.\+c}}
\subsubsection[{breaktest}]{\setlength{\rightskip}{0pt plus 5cm}{\bf boolean} breaktest (
\begin{DoxyParamCaption}
\item[{struct {\bf obj} $\ast$}]{obj}
\end{DoxyParamCaption}
)}}\label{dothrow_8c_ace740cf113a1ab7d0370990900d94e03}


Definition at line 1626 of file dothrow.\+c.



References G\+E\+M\+\_\+\+C\+L\+A\+S\+S, G\+L\+A\+S\+S, objects, and P\+O\+T\+I\+O\+N\+\_\+\+C\+L\+A\+S\+S.



Referenced by breaks(), hero\+\_\+breaks(), hmon\+\_\+hitmon(), ship\+\_\+object(), throwit(), and toss\+\_\+up().


\begin{DoxyCode}
1628 \{
1629     \textcolor{keywordflow}{if} (obj\_resists(obj, 1, 99)) \textcolor{keywordflow}{return} 0;
1630     \textcolor{keywordflow}{if} (\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp}].oc\_material == \hyperlink{objclass_8h_ac070bc05447c6faa5ec491a62b615e9f}{GLASS} && !obj->
      \hyperlink{structobj_af03ce8a6a0ca51e8d8954fb1a1a31fbe}{oartifact} &&
1631         obj->\hyperlink{structobj_a716ba3ee00602dede9ea5c68c74d45bd}{oclass} != \hyperlink{objclass_8h_afc09c51ea922e9928f86a51177244796}{GEM\_CLASS})
1632         \textcolor{keywordflow}{return} 1;
1633     \textcolor{keywordflow}{switch} (obj->\hyperlink{structobj_a716ba3ee00602dede9ea5c68c74d45bd}{oclass} == \hyperlink{objclass_8h_a05335e5ee18dfa33af1c40056fe8fab9}{POTION\_CLASS} ? POT\_WATER : obj->
      \hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp}) \{
1634 \textcolor{preprocessor}{#ifdef TOURIST}
1635         \textcolor{keywordflow}{case} EXPENSIVE\_CAMERA:
1636 \textcolor{preprocessor}{#endif}
1637         \textcolor{keywordflow}{case} POT\_WATER:     \textcolor{comment}{/* really, all potions */}
1638         \textcolor{keywordflow}{case} EGG:
1639         \textcolor{keywordflow}{case} CREAM\_PIE:
1640         \textcolor{keywordflow}{case} MELON:
1641         \textcolor{keywordflow}{case} ACID\_VENOM:
1642         \textcolor{keywordflow}{case} BLINDING\_VENOM:
1643             \textcolor{keywordflow}{return} 1;
1644         \textcolor{keywordflow}{default}:
1645             \textcolor{keywordflow}{return} 0;
1646     \}
1647 \}
\end{DoxyCode}
\hypertarget{dothrow_8c_af5cc3d590b41c3cabf70b1c76824c56b}{\index{dothrow.\+c@{dothrow.\+c}!check\+\_\+shop\+\_\+obj@{check\+\_\+shop\+\_\+obj}}
\index{check\+\_\+shop\+\_\+obj@{check\+\_\+shop\+\_\+obj}!dothrow.\+c@{dothrow.\+c}}
\subsubsection[{check\+\_\+shop\+\_\+obj}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} void check\+\_\+shop\+\_\+obj (
\begin{DoxyParamCaption}
\item[{struct {\bf obj} $\ast$}]{obj, }
\item[{{\bf xchar}}]{x, }
\item[{{\bf xchar}}]{y, }
\item[{{\bf boolean}}]{broken}
\end{DoxyParamCaption}
)}}\label{dothrow_8c_af5cc3d590b41c3cabf70b1c76824c56b}


Definition at line 681 of file dothrow.\+c.



References F\+A\+L\+S\+E, monst\+::mx, monst\+::my, S\+H\+O\+P\+B\+A\+S\+E, u, you\+::ushops, you\+::ux, and you\+::uy.



Referenced by breakobj(), gem\+\_\+accept(), thitmonst(), and throwit().


\begin{DoxyCode}
685 \{
686     \textcolor{keyword}{struct }\hyperlink{structmonst}{monst} *shkp = shop\_keeper(*\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a1bc3b5ca1e5d9957ab3a7f451c069f47}{ushops});
687 
688     \textcolor{keywordflow}{if}(!shkp) \textcolor{keywordflow}{return};
689 
690     \textcolor{keywordflow}{if}(broken) \{
691         \textcolor{keywordflow}{if} (obj->unpaid) \{
692             (void)stolen\_value(obj, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux}, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy},
693                        (\textcolor{keywordtype}{boolean})shkp->mpeaceful, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE});
694             subfrombill(obj, shkp);
695         \}
696         obj->no\_charge = 1;
697         \textcolor{keywordflow}{return};
698     \}
699 
700     \textcolor{keywordflow}{if} (!costly\_spot(x, y) || *in\_rooms(x, y, \hyperlink{mkroom_8h_a925701a88c7ed0db502cfac9d8fbcf9e}{SHOPBASE}) != *\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a1bc3b5ca1e5d9957ab3a7f451c069f47}{ushops}) \{
701         \textcolor{comment}{/* thrown out of a shop or into a different shop */}
702         \textcolor{keywordflow}{if} (obj->unpaid) \{
703             (void)stolen\_value(obj, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux}, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy},
704                        (\textcolor{keywordtype}{boolean})shkp->mpeaceful, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE});
705             subfrombill(obj, shkp);
706         \}
707     \} \textcolor{keywordflow}{else} \{
708         \textcolor{keywordflow}{if} (costly\_spot(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux}, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy}) && costly\_spot(x, y)) \{
709             \textcolor{keywordflow}{if}(obj->unpaid) subfrombill(obj, shkp);
710             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(!(x == shkp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx} && y == shkp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my}))
711                 sellobj(obj, x, y);
712         \}
713     \}
714 \}
\end{DoxyCode}
\hypertarget{dothrow_8c_af91bb1fa1ac46425a8223a7e48e4aae6}{\index{dothrow.\+c@{dothrow.\+c}!dofire@{dofire}}
\index{dofire@{dofire}!dothrow.\+c@{dothrow.\+c}}
\subsubsection[{dofire}]{\setlength{\rightskip}{0pt plus 5cm}int dofire (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{dothrow_8c_af91bb1fa1ac46425a8223a7e48e4aae6}


Definition at line 289 of file dothrow.\+c.



References flag\+::autoquiver, autoquiver(), monst\+::data, dothrow(), flags, multi, notake, save\+\_\+cm, throw\+\_\+obj(), uquiver, and youmonst.


\begin{DoxyCode}
290 \{
291     \textcolor{keywordtype}{int} shotlimit;
292 
293     \textcolor{keywordflow}{if} (\hyperlink{mondata_8h_ae0efcbbbb687279e0ad93ffd19797c4a}{notake}(\hyperlink{decl_8h_ad15893dbcb60e2777ae0dfac9f840858}{youmonst}.\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data})) \{
294         You(\textcolor{stringliteral}{"are physically incapable of doing that."});
295         \textcolor{keywordflow}{return} 0;
296     \}
297 
298     \textcolor{keywordflow}{if}(check\_capacity((\textcolor{keywordtype}{char} *)0)) \textcolor{keywordflow}{return}(0);
299     \textcolor{keywordflow}{if} (!\hyperlink{decl_8h_a7544f9c7591e79476549f321400d269b}{uquiver}) \{
300         \textcolor{keywordflow}{if} (!\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_ad18c2414f9c7c20bd9f909939c1dde52}{autoquiver}) \{
301             \textcolor{comment}{/* Don't automatically fill the quiver */}
302             You(\textcolor{stringliteral}{"have no ammunition readied!"});
303             \textcolor{keywordflow}{return}(\hyperlink{dothrow_8c_a20de378fb06426702ae93bf31828e8e7}{dothrow}());
304         \}
305         \hyperlink{dothrow_8c_aa2a46c0d4ca45e02d9f24354d5c6e549}{autoquiver}();
306         \textcolor{keywordflow}{if} (!\hyperlink{decl_8h_a7544f9c7591e79476549f321400d269b}{uquiver}) \{
307             You(\textcolor{stringliteral}{"have nothing appropriate for your quiver!"});
308             \textcolor{keywordflow}{return}(\hyperlink{dothrow_8c_a20de378fb06426702ae93bf31828e8e7}{dothrow}());
309         \} \textcolor{keywordflow}{else} \{
310             You(\textcolor{stringliteral}{"fill your quiver:"});
311             prinv((\textcolor{keywordtype}{char} *)0, \hyperlink{decl_8h_a7544f9c7591e79476549f321400d269b}{uquiver}, 0L);
312         \}
313     \}
314 
315     \textcolor{comment}{/*}
316 \textcolor{comment}{     * Since some characters shoot multiple missiles at one time,}
317 \textcolor{comment}{     * allow user to specify a count prefix for 'f' or 't' to limit}
318 \textcolor{comment}{     * number of items thrown (to avoid possibly hitting something}
319 \textcolor{comment}{     * behind target after killing it, or perhaps to conserve ammo).}
320 \textcolor{comment}{     *}
321 \textcolor{comment}{     * The number specified can never increase the number of missiles.}
322 \textcolor{comment}{     * Using ``5f'' when the shooting skill (plus RNG) dictates launch}
323 \textcolor{comment}{     * of 3 projectiles will result in 3 being shot, not 5.}
324 \textcolor{comment}{     */}
325     \textcolor{comment}{/* kludge to work around parse()'s pre-decrement of `multi' */}
326     shotlimit = (\hyperlink{decl_8h_a498406921f71695627a7107240f3ed7a}{multi} || \hyperlink{decl_8h_a0b84bb9758e1a5eef394776f037130f8}{save\_cm}) ? \hyperlink{decl_8h_a498406921f71695627a7107240f3ed7a}{multi} + 1 : 0;
327     \hyperlink{decl_8h_a498406921f71695627a7107240f3ed7a}{multi} = 0;     \textcolor{comment}{/* reset; it's been used up */}
328 
329     \textcolor{keywordflow}{return} \hyperlink{dothrow_8c_ae09ef336b45cfd9d6e9cbd32ca699216}{throw\_obj}(\hyperlink{decl_8h_a7544f9c7591e79476549f321400d269b}{uquiver}, shotlimit);
330 \}
\end{DoxyCode}
\hypertarget{dothrow_8c_a20de378fb06426702ae93bf31828e8e7}{\index{dothrow.\+c@{dothrow.\+c}!dothrow@{dothrow}}
\index{dothrow@{dothrow}!dothrow.\+c@{dothrow.\+c}}
\subsubsection[{dothrow}]{\setlength{\rightskip}{0pt plus 5cm}int dothrow (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{dothrow_8c_a20de378fb06426702ae93bf31828e8e7}


Definition at line 188 of file dothrow.\+c.



References monst\+::data, multi, notake, save\+\_\+cm, throw\+\_\+obj(), uslinging, and youmonst.



Referenced by dofire().


\begin{DoxyCode}
189 \{
190     \textcolor{keyword}{register} \textcolor{keyword}{struct }\hyperlink{structobj}{obj} *\hyperlink{structobj}{obj};
191     \textcolor{keywordtype}{int} shotlimit;
192 
193     \textcolor{comment}{/*}
194 \textcolor{comment}{     * Since some characters shoot multiple missiles at one time,}
195 \textcolor{comment}{     * allow user to specify a count prefix for 'f' or 't' to limit}
196 \textcolor{comment}{     * number of items thrown (to avoid possibly hitting something}
197 \textcolor{comment}{     * behind target after killing it, or perhaps to conserve ammo).}
198 \textcolor{comment}{     *}
199 \textcolor{comment}{     * Prior to 3.3.0, command ``3t'' meant ``t(shoot) t(shoot) t(shoot)''}
200 \textcolor{comment}{     * and took 3 turns.  Now it means ``t(shoot at most 3 missiles)''.}
201 \textcolor{comment}{     */}
202     \textcolor{comment}{/* kludge to work around parse()'s pre-decrement of `multi' */}
203     shotlimit = (\hyperlink{decl_8h_a498406921f71695627a7107240f3ed7a}{multi} || \hyperlink{decl_8h_a0b84bb9758e1a5eef394776f037130f8}{save\_cm}) ? \hyperlink{decl_8h_a498406921f71695627a7107240f3ed7a}{multi} + 1 : 0;
204     \hyperlink{decl_8h_a498406921f71695627a7107240f3ed7a}{multi} = 0;     \textcolor{comment}{/* reset; it's been used up */}
205 
206     \textcolor{keywordflow}{if} (\hyperlink{mondata_8h_ae0efcbbbb687279e0ad93ffd19797c4a}{notake}(\hyperlink{decl_8h_ad15893dbcb60e2777ae0dfac9f840858}{youmonst}.\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data})) \{
207         You(\textcolor{stringliteral}{"are physically incapable of throwing anything."});
208         \textcolor{keywordflow}{return} 0;
209     \}
210 
211     \textcolor{keywordflow}{if}(check\_capacity((\textcolor{keywordtype}{char} *)0)) \textcolor{keywordflow}{return}(0);
212     obj = getobj(\hyperlink{obj_8h_a2adb148f9956bf79f1825fed308ce583}{uslinging}() ? \hyperlink{dothrow_8c_ad584c47d7d93295295d130a80f2fc309}{bullets} : \hyperlink{dothrow_8c_a07739e88125b97623e21cef9a3515885}{toss\_objs}, \textcolor{stringliteral}{"throw"});
213     \textcolor{comment}{/* it is also possible to throw food */}
214     \textcolor{comment}{/* (or jewels, or iron balls... ) */}
215 
216     \textcolor{keywordflow}{if} (!obj) \textcolor{keywordflow}{return}(0);
217     \textcolor{keywordflow}{return} \hyperlink{dothrow_8c_ae09ef336b45cfd9d6e9cbd32ca699216}{throw\_obj}(obj, shotlimit);
218 \}
\end{DoxyCode}
\hypertarget{dothrow_8c_a060683cd287617dba3c5d46a4dada78e}{\index{dothrow.\+c@{dothrow.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!dothrow.\+c@{dothrow.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} int F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf throw\+\_\+obj}}]{, }
\item[{(struct {\bf obj} $\ast$, int)}]{}
\end{DoxyParamCaption}
)}}\label{dothrow_8c_a060683cd287617dba3c5d46a4dada78e}


Referenced by throw\+\_\+gold(), and throwit().

\hypertarget{dothrow_8c_a1ceaad5ebc00aaf7941bcb2c76c2bfe5}{\index{dothrow.\+c@{dothrow.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!dothrow.\+c@{dothrow.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} int F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf gem\+\_\+accept}}]{, }
\item[{(struct {\bf monst} $\ast$, struct {\bf obj} $\ast$)}]{}
\end{DoxyParamCaption}
)}}\label{dothrow_8c_a1ceaad5ebc00aaf7941bcb2c76c2bfe5}
\hypertarget{dothrow_8c_af51b0d0eb85dea3d5a0716d6f7f50cf1}{\index{dothrow.\+c@{dothrow.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!dothrow.\+c@{dothrow.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} void F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf tmiss}}]{, }
\item[{(struct {\bf obj} $\ast$, struct {\bf monst} $\ast$)}]{}
\end{DoxyParamCaption}
)}}\label{dothrow_8c_af51b0d0eb85dea3d5a0716d6f7f50cf1}
\hypertarget{dothrow_8c_a4ff7e37eba405a1be318e4b16a999f3f}{\index{dothrow.\+c@{dothrow.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!dothrow.\+c@{dothrow.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} int F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf throw\+\_\+gold}}]{, }
\item[{(struct {\bf obj} $\ast$)}]{}
\end{DoxyParamCaption}
)}}\label{dothrow_8c_a4ff7e37eba405a1be318e4b16a999f3f}
\hypertarget{dothrow_8c_adcbed6300e6ec5763d8534bb1100124b}{\index{dothrow.\+c@{dothrow.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!dothrow.\+c@{dothrow.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} void F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf check\+\_\+shop\+\_\+obj}}]{, }
\item[{(struct {\bf obj} $\ast$, {\bf X\+C\+H\+A\+R\+\_\+\+P}, {\bf X\+C\+H\+A\+R\+\_\+\+P}, {\bf B\+O\+O\+L\+E\+A\+N\+\_\+\+P})}]{}
\end{DoxyParamCaption}
)}}\label{dothrow_8c_adcbed6300e6ec5763d8534bb1100124b}
\hypertarget{dothrow_8c_a6c2d841ccd09ff7ec57148dae324d435}{\index{dothrow.\+c@{dothrow.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!dothrow.\+c@{dothrow.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} void F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf breakobj}}]{, }
\item[{(struct {\bf obj} $\ast$, {\bf X\+C\+H\+A\+R\+\_\+\+P}, {\bf X\+C\+H\+A\+R\+\_\+\+P}, {\bf B\+O\+O\+L\+E\+A\+N\+\_\+\+P}, {\bf B\+O\+O\+L\+E\+A\+N\+\_\+\+P})}]{}
\end{DoxyParamCaption}
)}}\label{dothrow_8c_a6c2d841ccd09ff7ec57148dae324d435}
\hypertarget{dothrow_8c_a221eaa5500b06993aef01bdc4ed929f0}{\index{dothrow.\+c@{dothrow.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!dothrow.\+c@{dothrow.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} void F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf breakmsg}}]{, }
\item[{(struct {\bf obj} $\ast$, {\bf B\+O\+O\+L\+E\+A\+N\+\_\+\+P})}]{}
\end{DoxyParamCaption}
)}}\label{dothrow_8c_a221eaa5500b06993aef01bdc4ed929f0}
\hypertarget{dothrow_8c_a2b9e98fdb59141c37df459136ba87274}{\index{dothrow.\+c@{dothrow.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!dothrow.\+c@{dothrow.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} {\bf boolean} F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf toss\+\_\+up}}]{, }
\item[{(struct {\bf obj} $\ast$, {\bf B\+O\+O\+L\+E\+A\+N\+\_\+\+P})}]{}
\end{DoxyParamCaption}
)}}\label{dothrow_8c_a2b9e98fdb59141c37df459136ba87274}
\hypertarget{dothrow_8c_a673854f767f80a30ba72b98542ab2260}{\index{dothrow.\+c@{dothrow.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!dothrow.\+c@{dothrow.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} {\bf boolean} F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf throwing\+\_\+weapon}}]{, }
\item[{(struct {\bf obj} $\ast$)}]{}
\end{DoxyParamCaption}
)}}\label{dothrow_8c_a673854f767f80a30ba72b98542ab2260}
\hypertarget{dothrow_8c_a573fa3641657c59a7e30ada21fe428f7}{\index{dothrow.\+c@{dothrow.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!dothrow.\+c@{dothrow.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} void F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf sho\+\_\+obj\+\_\+return\+\_\+to\+\_\+u}}]{, }
\item[{(struct {\bf obj} $\ast${\bf obj})}]{}
\end{DoxyParamCaption}
)}}\label{dothrow_8c_a573fa3641657c59a7e30ada21fe428f7}
\hypertarget{dothrow_8c_aaefeed8ec3ab1a6218e0f2b8c72d9c68}{\index{dothrow.\+c@{dothrow.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!dothrow.\+c@{dothrow.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} {\bf boolean} F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf mhurtle\+\_\+step}}]{, }
\item[{({\bf genericptr\+\_\+t}, int, int)}]{}
\end{DoxyParamCaption}
)}}\label{dothrow_8c_aaefeed8ec3ab1a6218e0f2b8c72d9c68}
\hypertarget{dothrow_8c_aa44a442fb326369215022c910ce07e7f}{\index{dothrow.\+c@{dothrow.\+c}!gem\+\_\+accept@{gem\+\_\+accept}}
\index{gem\+\_\+accept@{gem\+\_\+accept}!dothrow.\+c@{dothrow.\+c}}
\subsubsection[{gem\+\_\+accept}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} int gem\+\_\+accept (
\begin{DoxyParamCaption}
\item[{struct {\bf monst} $\ast$}]{mon, }
\item[{struct {\bf obj} $\ast$}]{obj}
\end{DoxyParamCaption}
)}}\label{dothrow_8c_aa44a442fb326369215022c910ce07e7f}


Definition at line 1415 of file dothrow.\+c.



References Blind, buf, B\+U\+F\+S\+Z, check\+\_\+shop\+\_\+obj(), F\+A\+L\+S\+E, G\+E\+M\+S\+T\+O\+N\+E, N\+E\+A\+R\+D\+A\+T\+A, objects, objclass\+::oc\+\_\+uname, rloc(), Strcat, Strcpy, tele\+\_\+restrict(), T\+R\+U\+E, align\+::type, u, you\+::ualign, and you\+::ushops.



Referenced by thitmonst().


\begin{DoxyCode}
1418 \{
1419     \textcolor{keywordtype}{char} \hyperlink{xpm2iff_8c_a6f4b9854141692d23b0d072176044ca6}{buf}[\hyperlink{global_8h_ab26c26cbf7a0c97d8960c3cfb413f882}{BUFSZ}];
1420     \textcolor{keywordtype}{boolean} is\_buddy = sgn(mon->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}->\hyperlink{structpermonst_ad92ab559c3dc08cc1a40f3413377d787}{maligntyp}) == sgn(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a3f202dd89a837a9772a9eb1f1965f30c}{ualign}.
      \hyperlink{structalign_a0dadfa91b9ff06447f91ea8a2b898827}{type});
1421     \textcolor{keywordtype}{boolean} is\_gem = \hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp}].oc\_material == \hyperlink{objclass_8h_afcc9e617f2bc38a4ef1a990a79216808}{GEMSTONE};
1422     \textcolor{keywordtype}{int} ret = 0;
1423     \textcolor{keyword}{static} \hyperlink{config1_8h_a9987bf629301f5fe76ddd96aa2717ca1}{NEARDATA} \textcolor{keyword}{const} \textcolor{keywordtype}{char} nogood[] = \textcolor{stringliteral}{" is not interested in your junk."};
1424     \textcolor{keyword}{static} \hyperlink{config1_8h_a9987bf629301f5fe76ddd96aa2717ca1}{NEARDATA} \textcolor{keyword}{const} \textcolor{keywordtype}{char} acceptgift[] = \textcolor{stringliteral}{" accepts your gift."};
1425     \textcolor{keyword}{static} \hyperlink{config1_8h_a9987bf629301f5fe76ddd96aa2717ca1}{NEARDATA} \textcolor{keyword}{const} \textcolor{keywordtype}{char} maybeluck[] = \textcolor{stringliteral}{" hesitatingly"};
1426     \textcolor{keyword}{static} \hyperlink{config1_8h_a9987bf629301f5fe76ddd96aa2717ca1}{NEARDATA} \textcolor{keyword}{const} \textcolor{keywordtype}{char} noluck[] = \textcolor{stringliteral}{" graciously"};
1427     \textcolor{keyword}{static} \hyperlink{config1_8h_a9987bf629301f5fe76ddd96aa2717ca1}{NEARDATA} \textcolor{keyword}{const} \textcolor{keywordtype}{char} addluck[] = \textcolor{stringliteral}{" gratefully"};
1428 
1429     \hyperlink{global_8h_add22f733d1f2c380499f495068e42b7c}{Strcpy}(buf,Monnam(mon));
1430     mon->mpeaceful = 1;
1431     mon->mavenge = 0;
1432 
1433     \textcolor{comment}{/* object properly identified */}
1434     \textcolor{keywordflow}{if}(obj->dknown && \hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp}].oc\_name\_known) \{
1435         \textcolor{keywordflow}{if}(is\_gem) \{
1436             \textcolor{keywordflow}{if}(is\_buddy) \{
1437                 \hyperlink{global_8h_a6d985a6c569a61be75fcacf7623f0988}{Strcat}(buf,addluck);
1438                 change\_luck(5);
1439             \} \textcolor{keywordflow}{else} \{
1440                 \hyperlink{global_8h_a6d985a6c569a61be75fcacf7623f0988}{Strcat}(buf,maybeluck);
1441                 change\_luck(rn2(7)-3);
1442             \}
1443         \} \textcolor{keywordflow}{else} \{
1444             \hyperlink{global_8h_a6d985a6c569a61be75fcacf7623f0988}{Strcat}(buf,nogood);
1445             \textcolor{keywordflow}{goto} nopick;
1446         \}
1447     \textcolor{comment}{/* making guesses */}
1448     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(obj->\hyperlink{structobj_a032663f21fa617948660e1102147b47d}{onamelth} || \hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp}].\hyperlink{structobjclass_a2556428315c0776ce8f5c88ecf6508bc}{oc\_uname}) \{
1449         \textcolor{keywordflow}{if}(is\_gem) \{
1450             \textcolor{keywordflow}{if}(is\_buddy) \{
1451                 \hyperlink{global_8h_a6d985a6c569a61be75fcacf7623f0988}{Strcat}(buf,addluck);
1452                 change\_luck(2);
1453             \} \textcolor{keywordflow}{else} \{
1454                 \hyperlink{global_8h_a6d985a6c569a61be75fcacf7623f0988}{Strcat}(buf,maybeluck);
1455                 change\_luck(rn2(3)-1);
1456             \}
1457         \} \textcolor{keywordflow}{else} \{
1458             \hyperlink{global_8h_a6d985a6c569a61be75fcacf7623f0988}{Strcat}(buf,nogood);
1459             \textcolor{keywordflow}{goto} nopick;
1460         \}
1461     \textcolor{comment}{/* value completely unknown to @ */}
1462     \} \textcolor{keywordflow}{else} \{
1463         \textcolor{keywordflow}{if}(is\_gem) \{
1464             \textcolor{keywordflow}{if}(is\_buddy) \{
1465                 \hyperlink{global_8h_a6d985a6c569a61be75fcacf7623f0988}{Strcat}(buf,addluck);
1466                 change\_luck(1);
1467             \} \textcolor{keywordflow}{else} \{
1468                 \hyperlink{global_8h_a6d985a6c569a61be75fcacf7623f0988}{Strcat}(buf,maybeluck);
1469                 change\_luck(rn2(3)-1);
1470             \}
1471         \} \textcolor{keywordflow}{else} \{
1472             \hyperlink{global_8h_a6d985a6c569a61be75fcacf7623f0988}{Strcat}(buf,noluck);
1473         \}
1474     \}
1475     \hyperlink{global_8h_a6d985a6c569a61be75fcacf7623f0988}{Strcat}(buf,acceptgift);
1476     \textcolor{keywordflow}{if}(*\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a1bc3b5ca1e5d9957ab3a7f451c069f47}{ushops}) \hyperlink{dothrow_8c_af5cc3d590b41c3cabf70b1c76824c56b}{check\_shop\_obj}(obj, mon->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mon->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my}, 
      \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE});
1477     (void) mpickobj(mon, obj);  \textcolor{comment}{/* may merge and free obj */}
1478     ret = 1;
1479 
1480 nopick:
1481     \textcolor{keywordflow}{if}(!\hyperlink{youprop_8h_a1b6e24068169af4177e15b48595c08c9}{Blind}) pline(\textcolor{stringliteral}{"%s"}, buf);
1482     \textcolor{keywordflow}{if} (!\hyperlink{teleport_8c_ae7a3070a79b803227ad2474af019d5ab}{tele\_restrict}(mon)) (void) \hyperlink{teleport_8c_aa6c4370d0e90b61589cd46404ceab176}{rloc}(mon, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE});
1483     \textcolor{keywordflow}{return}(ret);
1484 \}
\end{DoxyCode}
\hypertarget{dothrow_8c_adccb096d28c111690356d637c0f3374c}{\index{dothrow.\+c@{dothrow.\+c}!hero\+\_\+breaks@{hero\+\_\+breaks}}
\index{hero\+\_\+breaks@{hero\+\_\+breaks}!dothrow.\+c@{dothrow.\+c}}
\subsubsection[{hero\+\_\+breaks}]{\setlength{\rightskip}{0pt plus 5cm}int hero\+\_\+breaks (
\begin{DoxyParamCaption}
\item[{struct {\bf obj} $\ast$}]{obj, }
\item[{{\bf xchar}}]{x, }
\item[{{\bf xchar}}]{y, }
\item[{{\bf boolean}}]{from\+\_\+invent}
\end{DoxyParamCaption}
)}}\label{dothrow_8c_adccb096d28c111690356d637c0f3374c}


Definition at line 1519 of file dothrow.\+c.



References Blind, breakmsg(), breakobj(), breaktest(), and T\+R\+U\+E.



Referenced by hitfloor(), and kick\+\_\+object().


\begin{DoxyCode}
1523 \{
1524     \textcolor{keywordtype}{boolean} in\_view = !\hyperlink{youprop_8h_a1b6e24068169af4177e15b48595c08c9}{Blind};
1525     \textcolor{keywordflow}{if} (!\hyperlink{dothrow_8c_ace740cf113a1ab7d0370990900d94e03}{breaktest}(obj)) \textcolor{keywordflow}{return} 0;
1526     \hyperlink{dothrow_8c_a2eb51c280cad12050b4a586e6b9285a6}{breakmsg}(obj, in\_view);
1527     \hyperlink{dothrow_8c_a784726af6e3943f1f3834371d037050b}{breakobj}(obj, x, y, \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE}, from\_invent);
1528     \textcolor{keywordflow}{return} 1;
1529 \}
\end{DoxyCode}
\hypertarget{dothrow_8c_aa65e537e36073dedf0f33bad075f8d3c}{\index{dothrow.\+c@{dothrow.\+c}!hitfloor@{hitfloor}}
\index{hitfloor@{hitfloor}!dothrow.\+c@{dothrow.\+c}}
\subsubsection[{hitfloor}]{\setlength{\rightskip}{0pt plus 5cm}void hitfloor (
\begin{DoxyParamCaption}
\item[{struct {\bf obj} $\ast$}]{obj}
\end{DoxyParamCaption}
)}}\label{dothrow_8c_aa65e537e36073dedf0f33bad075f8d3c}


Definition at line 337 of file dothrow.\+c.



References container\+\_\+impact\+\_\+dmg(), F\+A\+L\+S\+E, hero\+\_\+breaks(), I\+S\+\_\+\+A\+L\+T\+A\+R, I\+S\+\_\+\+S\+O\+F\+T, levl, ship\+\_\+object(), T\+R\+U\+E, u, you\+::ux, and you\+::uy.



Referenced by throwit(), and toss\+\_\+up().


\begin{DoxyCode}
339 \{
340     \textcolor{keywordflow}{if} (\hyperlink{rm_8h_ae65f64628cbd8aa997f35f8dd21c6def}{IS\_SOFT}(\hyperlink{rm_8h_a8cd681fba60fdedbabfd71a0b4bbfc00}{levl}[\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux}][\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy}].typ) || \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.uinwater) \{
341         dropy(obj);
342         \textcolor{keywordflow}{return};
343     \}
344     \textcolor{keywordflow}{if} (\hyperlink{rm_8h_a06b1605590c29bd5f7e218035b45f949}{IS\_ALTAR}(\hyperlink{rm_8h_a8cd681fba60fdedbabfd71a0b4bbfc00}{levl}[\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux}][\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy}].typ))
345         doaltarobj(obj);
346     \textcolor{keywordflow}{else}
347         pline(\textcolor{stringliteral}{"%s hit%s the %s."}, Doname2(obj),
348               (obj->\hyperlink{structobj_ad08c0ed1a746fbb52377ecd7e4220578}{quan} == 1L) ? \textcolor{stringliteral}{"s"} : \textcolor{stringliteral}{""}, surface(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux},\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy}));
349 
350     \textcolor{keywordflow}{if} (\hyperlink{dothrow_8c_adccb096d28c111690356d637c0f3374c}{hero\_breaks}(obj, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux}, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy}, \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE})) \textcolor{keywordflow}{return};
351     \textcolor{keywordflow}{if} (\hyperlink{dokick_8c_a2e6ad173412ab80036782184f3749286}{ship\_object}(obj, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux}, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy}, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE})) \textcolor{keywordflow}{return};
352     dropy(obj);
353     \textcolor{keywordflow}{if} (!\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.uswallow) \hyperlink{dokick_8c_abbf1fcb9f654139ebd166ec64d3706b3}{container\_impact\_dmg}(obj);
354 \}
\end{DoxyCode}
\hypertarget{dothrow_8c_a20d0289d24c19e2996a56be042014293}{\index{dothrow.\+c@{dothrow.\+c}!hurtle@{hurtle}}
\index{hurtle@{hurtle}!dothrow.\+c@{dothrow.\+c}}
\subsubsection[{hurtle}]{\setlength{\rightskip}{0pt plus 5cm}void hurtle (
\begin{DoxyParamCaption}
\item[{int}]{dx, }
\item[{int}]{dy, }
\item[{int}]{range, }
\item[{{\bf boolean}}]{verbose}
\end{DoxyParamCaption}
)}}\label{dothrow_8c_a20d0289d24c19e2996a56be042014293}


Definition at line 595 of file dothrow.\+c.



References carried, hurtle\+\_\+step(), multishot\+::i, In\+\_\+sokoban, m\+\_\+shot, multishot\+::n, Punished, multishot\+::s, T\+T\+\_\+\+I\+N\+F\+L\+O\+O\+R, T\+T\+\_\+\+L\+A\+V\+A, T\+T\+\_\+\+W\+E\+B, u, uball, you\+::ustuck, you\+::utrap, you\+::utraptype, you\+::ux, you\+::uy, you\+::uz, walk\+\_\+path(), coord\+::x, and coord\+::y.



Referenced by dokick(), and throwit().


\begin{DoxyCode}
598 \{
599     \hyperlink{structcoord}{coord} uc, cc;
600 
601     \textcolor{comment}{/* The chain is stretched vertically, so you shouldn't be able to move}
602 \textcolor{comment}{     * very far diagonally.  The premise that you should be able to move one}
603 \textcolor{comment}{     * spot leads to calculations that allow you to only move one spot away}
604 \textcolor{comment}{     * from the ball, if you are levitating over the ball, or one spot}
605 \textcolor{comment}{     * towards the ball, if you are at the end of the chain.  Rather than}
606 \textcolor{comment}{     * bother with all of that, assume that there is no slack in the chain}
607 \textcolor{comment}{     * for diagonal movement, give the player a message and return.}
608 \textcolor{comment}{     */}
609     \textcolor{keywordflow}{if}(\hyperlink{youprop_8h_ad76daf081117eb579839073bebe92b45}{Punished} && !\hyperlink{obj_8h_a4adde9a5428fde9b6faf64253a1507e8}{carried}(\hyperlink{decl_8h_a043dece512e3c566986d7cfabc52d05e}{uball})) \{
610     You\_feel(\textcolor{stringliteral}{"a tug from the iron ball."});
611     nomul(0);
612     \textcolor{keywordflow}{return};
613     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a7250d3b13a54b76d846b754a2a6f3fa6}{utrap}) \{
614     You(\textcolor{stringliteral}{"are anchored by the %s."},
615         \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a1753632ed4b3b8dea40466c1c92fce19}{utraptype} == \hyperlink{you_8h_a6f36535a424a78d6f283a71b2d953ac3}{TT\_WEB} ? \textcolor{stringliteral}{"web"} : \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a1753632ed4b3b8dea40466c1c92fce19}{utraptype} == 
      \hyperlink{you_8h_a1d97aac071079ee345fc1a88536bf7d6}{TT\_LAVA} ? \textcolor{stringliteral}{"lava"} :
616         \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a1753632ed4b3b8dea40466c1c92fce19}{utraptype} == \hyperlink{you_8h_a4e2d887e8b74f3d5a794cb08f126f676}{TT\_INFLOOR} ? surface(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux},\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy}) : \textcolor{stringliteral}{"trap"});
617     nomul(0);
618     \textcolor{keywordflow}{return};
619     \}
620 
621     \textcolor{comment}{/* make sure dx and dy are [-1,0,1] */}
622     dx = sgn(dx);
623     dy = sgn(dy);
624 
625     \textcolor{keywordflow}{if}(!range || (!dx && !dy) || \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a774d4dad2da130ec9ed1d2e6c5e0fa80}{ustuck}) \textcolor{keywordflow}{return}; \textcolor{comment}{/* paranoia */}
626 
627     nomul(-range);
628     \textcolor{keywordflow}{if} (verbose)
629     You(\textcolor{stringliteral}{"%s in the opposite direction."}, range > 1 ? \textcolor{stringliteral}{"hurtle"} : \textcolor{stringliteral}{"float"});
630     \textcolor{comment}{/* if we're in the midst of shooting multiple projectiles, stop */}
631     \textcolor{keywordflow}{if} (\hyperlink{decl_8h_a7f81da35e8b9f1f4bfd6c2e3255eba9a}{m\_shot}.\hyperlink{structmultishot_a16373f5f59db22df2bb5b29279c3ecc4}{i} < \hyperlink{decl_8h_a7f81da35e8b9f1f4bfd6c2e3255eba9a}{m\_shot}.\hyperlink{structmultishot_a62215723667a2eb09dd1203380b62f21}{n}) \{
632     \textcolor{comment}{/* last message before hurtling was "you shoot N arrows" */}
633     You(\textcolor{stringliteral}{"stop %sing after the first %s."},
634         \hyperlink{decl_8h_a7f81da35e8b9f1f4bfd6c2e3255eba9a}{m\_shot}.\hyperlink{structmultishot_acc85ac2a091e5aec36d1b5d308775ffe}{s} ? \textcolor{stringliteral}{"shoot"} : \textcolor{stringliteral}{"throw"}, \hyperlink{decl_8h_a7f81da35e8b9f1f4bfd6c2e3255eba9a}{m\_shot}.\hyperlink{structmultishot_acc85ac2a091e5aec36d1b5d308775ffe}{s} ? \textcolor{stringliteral}{"shot"} : \textcolor{stringliteral}{"toss"});
635     \hyperlink{decl_8h_a7f81da35e8b9f1f4bfd6c2e3255eba9a}{m\_shot}.\hyperlink{structmultishot_a62215723667a2eb09dd1203380b62f21}{n} = \hyperlink{decl_8h_a7f81da35e8b9f1f4bfd6c2e3255eba9a}{m\_shot}.\hyperlink{structmultishot_a16373f5f59db22df2bb5b29279c3ecc4}{i};  \textcolor{comment}{/* make current shot be the last */}
636     \}
637     \textcolor{keywordflow}{if} (\hyperlink{dungeon_8h_ad19541d30218e5f3834c01d42bb381e2}{In\_sokoban}(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz}))
638     change\_luck(-1);    \textcolor{comment}{/* Sokoban guilt */}
639     uc.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x} = \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux};
640     uc.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y} = \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy};
641     \textcolor{comment}{/* this setting of cc is only correct if dx and dy are [-1,0,1] only */}
642     cc.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x} = \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux} + (dx * range);
643     cc.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y} = \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy} + (dy * range);
644     (void) \hyperlink{dothrow_8c_a41c191c1d9404247b99b3d4921e683b0}{walk\_path}(&uc, &cc, \hyperlink{dothrow_8c_acde92d21dc725557013057a88b1f3c29}{hurtle\_step}, (\hyperlink{tradstdc_8h_ad4a7dab7269b4b00e3c7c7d2e66f31cd}{genericptr\_t})&range);
645 \}
\end{DoxyCode}
\hypertarget{dothrow_8c_acde92d21dc725557013057a88b1f3c29}{\index{dothrow.\+c@{dothrow.\+c}!hurtle\+\_\+step@{hurtle\+\_\+step}}
\index{hurtle\+\_\+step@{hurtle\+\_\+step}!dothrow.\+c@{dothrow.\+c}}
\subsubsection[{hurtle\+\_\+step}]{\setlength{\rightskip}{0pt plus 5cm}{\bf boolean} hurtle\+\_\+step (
\begin{DoxyParamCaption}
\item[{{\bf genericptr\+\_\+t}}]{arg, }
\item[{int}]{x, }
\item[{int}]{y}
\end{DoxyParamCaption}
)}}\label{dothrow_8c_acde92d21dc725557013057a88b1f3c29}


Definition at line 447 of file dothrow.\+c.



References A\+R\+R\+O\+W\+\_\+\+T\+R\+A\+P, bigmonst, monst\+::data, defsyms, delay\+\_\+output, symdef\+::explanation, F\+A\+L\+S\+E, F\+I\+R\+E\+\_\+\+T\+R\+A\+P, flush\+\_\+screen(), H\+O\+L\+E, in\+\_\+out\+\_\+region(), In\+\_\+sokoban, invent, I\+R\+O\+N\+B\+A\+R\+S, I\+S\+\_\+\+R\+O\+C\+K, I\+S\+\_\+\+T\+R\+E\+E, K\+I\+L\+L\+E\+D\+\_\+\+B\+Y, levl, m\+\_\+at, M\+A\+G\+I\+C\+\_\+\+P\+O\+R\+T\+A\+L, newsym(), obj\+::ox, obj\+::oy, Passes\+\_\+walls, P\+I\+T, S\+P\+I\+K\+E\+D\+\_\+\+P\+I\+T, trap\+\_\+to\+\_\+defsym, T\+R\+A\+P\+D\+O\+O\+R, T\+R\+U\+E, u, you\+::ux, you\+::uy, you\+::uz, vision\+\_\+recalc(), trap\+::x, trap\+::y, and youmonst.



Referenced by hurtle().


\begin{DoxyCode}
450 \{
451     \textcolor{keywordtype}{int} \hyperlink{structobj_aac936c7da6b4f1eca0a94f75c242e5cc}{ox}, \hyperlink{structobj_a72dace5e678b56ae42c3fb19292e5839}{oy}, *range = (\textcolor{keywordtype}{int} *)arg;
452     \textcolor{keyword}{struct }\hyperlink{structobj}{obj} *\hyperlink{structobj}{obj};
453     \textcolor{keyword}{struct }\hyperlink{structmonst}{monst} *mon;
454     \textcolor{keywordtype}{boolean} may\_pass = \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
455     \textcolor{keyword}{struct }\hyperlink{structtrap}{trap} *ttmp;
456     
457     \textcolor{keywordflow}{if} (!isok(\hyperlink{structtrap_aed25254cf556e3eae09dd98576d98d45}{x},\hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y})) \{
458     You\_feel(\textcolor{stringliteral}{"the spirits holding you back."});
459     \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
460     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!\hyperlink{region_8c_a81f2ad7a49678ddc817ad507962b8d4a}{in\_out\_region}(\hyperlink{structtrap_aed25254cf556e3eae09dd98576d98d45}{x}, \hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y})) \{
461     \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
462     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (*range == 0) \{
463     \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};          \textcolor{comment}{/* previous step wants to stop now */}
464     \}
465 
466     \textcolor{keywordflow}{if} (!\hyperlink{youprop_8h_a3999ccab66a0f60683b02b022bd96739}{Passes\_walls} || !(may\_pass = may\_passwall(\hyperlink{structtrap_aed25254cf556e3eae09dd98576d98d45}{x}, \hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y}))) \{
467     \textcolor{keywordflow}{if} (\hyperlink{rm_8h_a041df081d95aacdcbf31a3bbfdd36e0e}{IS\_ROCK}(\hyperlink{rm_8h_a8cd681fba60fdedbabfd71a0b4bbfc00}{levl}[\hyperlink{structtrap_aed25254cf556e3eae09dd98576d98d45}{x}][\hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y}].typ) || closed\_door(\hyperlink{structtrap_aed25254cf556e3eae09dd98576d98d45}{x},\hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y})) \{
468         \textcolor{keyword}{const} \textcolor{keywordtype}{char} *s;
469 
470         pline(\textcolor{stringliteral}{"Ouch!"});
471         \textcolor{keywordflow}{if} (\hyperlink{rm_8h_a10ed82a4f8c0949ee87669057c773fc3}{IS\_TREE}(\hyperlink{rm_8h_a8cd681fba60fdedbabfd71a0b4bbfc00}{levl}[\hyperlink{structtrap_aed25254cf556e3eae09dd98576d98d45}{x}][\hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y}].typ))
472         s = \textcolor{stringliteral}{"bumping into a tree"};
473         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{rm_8h_a041df081d95aacdcbf31a3bbfdd36e0e}{IS\_ROCK}(\hyperlink{rm_8h_a8cd681fba60fdedbabfd71a0b4bbfc00}{levl}[\hyperlink{structtrap_aed25254cf556e3eae09dd98576d98d45}{x}][\hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y}].typ))
474         s = \textcolor{stringliteral}{"bumping into a wall"};
475         \textcolor{keywordflow}{else}
476         s = \textcolor{stringliteral}{"bumping into a door"};
477         losehp(rnd(2+*range), s, \hyperlink{decl_8h_a0b77d6f094070ee1d9900156357f6f62}{KILLED\_BY});
478         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
479     \}
480     \textcolor{keywordflow}{if} (\hyperlink{rm_8h_a8cd681fba60fdedbabfd71a0b4bbfc00}{levl}[\hyperlink{structtrap_aed25254cf556e3eae09dd98576d98d45}{x}][\hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y}].typ == \hyperlink{rm_8h_a07f57c69899f8f8d0746fea20d262022}{IRONBARS}) \{
481         You(\textcolor{stringliteral}{"crash into some iron bars.  Ouch!"});
482         losehp(rnd(2+*range), \textcolor{stringliteral}{"crashing into iron bars"}, \hyperlink{decl_8h_a0b77d6f094070ee1d9900156357f6f62}{KILLED\_BY});
483         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
484     \}
485     \textcolor{keywordflow}{if} ((obj = sobj\_at(BOULDER,\hyperlink{structtrap_aed25254cf556e3eae09dd98576d98d45}{x},\hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y})) != 0) \{
486         You(\textcolor{stringliteral}{"bump into a %s.  Ouch!"}, xname(obj));
487         losehp(rnd(2+*range), \textcolor{stringliteral}{"bumping into a boulder"}, \hyperlink{decl_8h_a0b77d6f094070ee1d9900156357f6f62}{KILLED\_BY});
488         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
489     \}
490     \textcolor{keywordflow}{if} (!may\_pass) \{
491         \textcolor{comment}{/* did we hit a no-dig non-wall position? */}
492         You(\textcolor{stringliteral}{"smack into something!"});
493         losehp(rnd(2+*range), \textcolor{stringliteral}{"touching the edge of the universe"}, \hyperlink{decl_8h_a0b77d6f094070ee1d9900156357f6f62}{KILLED\_BY});
494         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
495     \}
496     \textcolor{keywordflow}{if} ((\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux} - \hyperlink{structtrap_aed25254cf556e3eae09dd98576d98d45}{x}) && (\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy} - \hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y}) &&
497         bad\_rock(\hyperlink{decl_8h_ad15893dbcb60e2777ae0dfac9f840858}{youmonst}.\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data},\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux},\hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y}) && bad\_rock(\hyperlink{decl_8h_ad15893dbcb60e2777ae0dfac9f840858}{youmonst}.
      \hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data},\hyperlink{structtrap_aed25254cf556e3eae09dd98576d98d45}{x},\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy})) \{
498         \textcolor{keywordtype}{boolean} too\_much = (\hyperlink{decl_8h_a65d03deeacf265a14fa3af961820b33f}{invent} && (inv\_weight() + weight\_cap() > 600));
499         \textcolor{comment}{/* Move at a diagonal. */}
500         \textcolor{keywordflow}{if} (\hyperlink{mondata_8h_a28750a402487965f08dcce597c8af6be}{bigmonst}(\hyperlink{decl_8h_ad15893dbcb60e2777ae0dfac9f840858}{youmonst}.\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}) || too\_much) \{
501         You(\textcolor{stringliteral}{"%sget forcefully wedged into a crevice."},
502             too\_much ? \textcolor{stringliteral}{"and all your belongings "} : \textcolor{stringliteral}{""});
503         losehp(rnd(2+*range), \textcolor{stringliteral}{"wedging into a narrow crevice"}, \hyperlink{decl_8h_a0b77d6f094070ee1d9900156357f6f62}{KILLED\_BY});
504         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
505         \}
506     \}
507     \}
508 
509     \textcolor{keywordflow}{if} ((mon = \hyperlink{rm_8h_a4d8dddf3df3fad65478980d2c8cbf53c}{m\_at}(\hyperlink{structtrap_aed25254cf556e3eae09dd98576d98d45}{x}, \hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y})) != 0) \{
510     You(\textcolor{stringliteral}{"bump into %s."}, a\_monnam(mon));
511     wakeup(mon);
512     \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
513     \}
514     \textcolor{keywordflow}{if} ((\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux} - \hyperlink{structtrap_aed25254cf556e3eae09dd98576d98d45}{x}) && (\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy} - \hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y}) &&
515     bad\_rock(\hyperlink{decl_8h_ad15893dbcb60e2777ae0dfac9f840858}{youmonst}.\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data},\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux},\hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y}) && bad\_rock(\hyperlink{decl_8h_ad15893dbcb60e2777ae0dfac9f840858}{youmonst}.
      \hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data},\hyperlink{structtrap_aed25254cf556e3eae09dd98576d98d45}{x},\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy})) \{
516     \textcolor{comment}{/* Move at a diagonal. */}
517     \textcolor{keywordflow}{if} (\hyperlink{dungeon_8h_ad19541d30218e5f3834c01d42bb381e2}{In\_sokoban}(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz})) \{
518         You(\textcolor{stringliteral}{"come to an abrupt halt!"});
519         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
520     \}
521     \}
522 
523     ox = \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux};
524     oy = \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy};
525     \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux} = \hyperlink{structtrap_aed25254cf556e3eae09dd98576d98d45}{x};
526     \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy} = \hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y};
527     \hyperlink{display_8c_a185c6ad6e4c5a6be26a371b9aa17c32e}{newsym}(ox, oy);       \textcolor{comment}{/* update old position */}
528     \hyperlink{vision_8c_a07b3acbfcca75497c31df8d8aee1ca53}{vision\_recalc}(1);      \textcolor{comment}{/* update for new position */}
529     \hyperlink{display_8c_a47cdbc8092c02ed856defd22a0952aeb}{flush\_screen}(1);
530     \textcolor{comment}{/* FIXME:}
531 \textcolor{comment}{     * Each trap should really trigger on the recoil if}
532 \textcolor{comment}{     * it would trigger during normal movement. However,}
533 \textcolor{comment}{     * not all the possible side-effects of this are}
534 \textcolor{comment}{     * tested [as of 3.4.0] so we trigger those that}
535 \textcolor{comment}{     * we have tested, and offer a message for the}
536 \textcolor{comment}{     * ones that we have not yet tested.}
537 \textcolor{comment}{     */}
538     \textcolor{keywordflow}{if} ((ttmp = t\_at(\hyperlink{structtrap_aed25254cf556e3eae09dd98576d98d45}{x}, \hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y})) != 0) \{
539         \textcolor{keywordflow}{if} (ttmp->ttyp == \hyperlink{trap_8h_a64bfa610e12179ef4bfa46c65166b2fe}{MAGIC\_PORTAL}) \{
540             dotrap(ttmp,0);
541             \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
542     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (ttmp->ttyp == \hyperlink{trap_8h_a8b19c33fa520554f2431edb06f02cb69}{FIRE\_TRAP}) \{
543             dotrap(ttmp,0);
544     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((ttmp->ttyp == \hyperlink{trap_8h_af181c9e6602b6432a0bf1a9243808968}{PIT} || ttmp->ttyp == \hyperlink{trap_8h_a813fa80e09de5d455e2af3743a95bad9}{SPIKED\_PIT} ||
545             ttmp->ttyp == \hyperlink{trap_8h_a8049ef47c05eee8156bccee8d819c506}{HOLE} || ttmp->ttyp == \hyperlink{trap_8h_ab50570a3a3e65ed47edb98c63e355088}{TRAPDOOR}) &&
546            \hyperlink{dungeon_8h_ad19541d30218e5f3834c01d42bb381e2}{In\_sokoban}(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz})) \{
547         \textcolor{comment}{/* Air currents overcome the recoil */}
548             dotrap(ttmp,0);
549         *range = 0;
550         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
551         \} \textcolor{keywordflow}{else} \{
552         \textcolor{keywordflow}{if} (ttmp->tseen)
553             You(\textcolor{stringliteral}{"pass right over %s %s."},
554                 (ttmp->ttyp == \hyperlink{trap_8h_a89228f7a31077dd7a17056528b9528e5}{ARROW\_TRAP}) ? \textcolor{stringliteral}{"an"} : \textcolor{stringliteral}{"a"},
555                 \hyperlink{rm_8h_a207dbacb240eb4a71d449e59280a72a6}{defsyms}[\hyperlink{rm_8h_a8b3155eb0b52e1c13981b4dca943722c}{trap\_to\_defsym}(ttmp->ttyp)].
      \hyperlink{structsymdef_a58eceeee4a8a65f48f73975059a43314}{explanation});
556         \}
557     \}
558     \textcolor{keywordflow}{if} (--*range < 0)       \textcolor{comment}{/* make sure our range never goes negative */}
559     *range = 0;
560     \textcolor{keywordflow}{if} (*range != 0)
561     \hyperlink{winprocs_8h_a52ac0892dec99e42da526fda2126d9e9}{delay\_output}();
562     \textcolor{keywordflow}{return} \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
563 \}
\end{DoxyCode}
\hypertarget{dothrow_8c_a10dae152f3b0975ef98ec3739172886e}{\index{dothrow.\+c@{dothrow.\+c}!mhurtle@{mhurtle}}
\index{mhurtle@{mhurtle}!dothrow.\+c@{dothrow.\+c}}
\subsubsection[{mhurtle}]{\setlength{\rightskip}{0pt plus 5cm}void mhurtle (
\begin{DoxyParamCaption}
\item[{struct {\bf monst} $\ast$}]{mon, }
\item[{int}]{dx, }
\item[{int}]{dy, }
\item[{int}]{range}
\end{DoxyParamCaption}
)}}\label{dothrow_8c_a10dae152f3b0975ef98ec3739172886e}


Definition at line 650 of file dothrow.\+c.



References mhurtle\+\_\+step(), M\+Z\+\_\+\+H\+U\+G\+E, u, you\+::ustuck, walk\+\_\+path(), coord\+::x, and coord\+::y.



Referenced by hmon\+\_\+hitmon().


\begin{DoxyCode}
653 \{
654     \hyperlink{structcoord}{coord} mc, cc;
655 
656     \textcolor{comment}{/* At the very least, debilitate the monster */}
657     mon->\hyperlink{structmonst_afe3b99a25f844e6fdfc0562e2c854023}{movement} = 0;
658     mon->mstun = 1;
659 
660     \textcolor{comment}{/* Is the monster stuck or too heavy to push?}
661 \textcolor{comment}{     * (very large monsters have too much inertia, even floaters and flyers)}
662 \textcolor{comment}{     */}
663     \textcolor{keywordflow}{if} (mon->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}->\hyperlink{structpermonst_a29f8d76dae8c7c96eab01dd8ec27717b}{msize} >= \hyperlink{monflag_8h_a44e547132d6203d4d6d025a4d070ca5a}{MZ\_HUGE} || mon == \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a774d4dad2da130ec9ed1d2e6c5e0fa80}{ustuck} || mon->mtrapped)
664         \textcolor{keywordflow}{return};
665 
666     \textcolor{comment}{/* Make sure dx and dy are [-1,0,1] */}
667     dx = sgn(dx);
668     dy = sgn(dy);
669     \textcolor{keywordflow}{if}(!range || (!dx && !dy)) \textcolor{keywordflow}{return}; \textcolor{comment}{/* paranoia */}
670 
671     \textcolor{comment}{/* Send the monster along the path */}
672     mc.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x} = mon->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx};
673     mc.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y} = mon->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my};
674     cc.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x} = mon->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx} + (dx * range);
675     cc.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y} = mon->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my} + (dy * range);
676     (void) \hyperlink{dothrow_8c_a41c191c1d9404247b99b3d4921e683b0}{walk\_path}(&mc, &cc, \hyperlink{dothrow_8c_a47548d1412ae110a5180cf108b450cc3}{mhurtle\_step}, (\hyperlink{tradstdc_8h_ad4a7dab7269b4b00e3c7c7d2e66f31cd}{genericptr\_t})mon);
677     \textcolor{keywordflow}{return};
678 \}
\end{DoxyCode}
\hypertarget{dothrow_8c_a47548d1412ae110a5180cf108b450cc3}{\index{dothrow.\+c@{dothrow.\+c}!mhurtle\+\_\+step@{mhurtle\+\_\+step}}
\index{mhurtle\+\_\+step@{mhurtle\+\_\+step}!dothrow.\+c@{dothrow.\+c}}
\subsubsection[{mhurtle\+\_\+step}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} {\bf boolean} mhurtle\+\_\+step (
\begin{DoxyParamCaption}
\item[{{\bf genericptr\+\_\+t}}]{arg, }
\item[{int}]{x, }
\item[{int}]{y}
\end{DoxyParamCaption}
)}}\label{dothrow_8c_a47548d1412ae110a5180cf108b450cc3}


Definition at line 566 of file dothrow.\+c.



References F\+A\+L\+S\+E, goodpos(), m\+\_\+in\+\_\+out\+\_\+region(), monst\+::mx, monst\+::my, newsym(), place\+\_\+monster, remove\+\_\+monster, and T\+R\+U\+E.



Referenced by mhurtle().


\begin{DoxyCode}
569 \{
570     \textcolor{keyword}{struct }\hyperlink{structmonst}{monst} *mon = (\textcolor{keyword}{struct }\hyperlink{structmonst}{monst} *)arg;
571 
572     \textcolor{comment}{/* TODO: Treat walls, doors, iron bars, pools, lava, etc. specially}
573 \textcolor{comment}{     * rather than just stopping before.}
574 \textcolor{comment}{     */}
575     \textcolor{keywordflow}{if} (\hyperlink{teleport_8c_a6eccfce2bb34ffe646ba537130d622e3}{goodpos}(x, y, mon, 0) && \hyperlink{region_8c_a3e091b3dfe784295e74b9af6a35d8098}{m\_in\_out\_region}(mon, x, y)) \{
576         \hyperlink{rm_8h_a8b498c0777a4cf5d9894ab76cb6a520e}{remove\_monster}(mon->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mon->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my});
577         \hyperlink{display_8c_a185c6ad6e4c5a6be26a371b9aa17c32e}{newsym}(mon->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mon->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my});
578         \hyperlink{rm_8h_af46e44dabc00162cdea350fe3dae252b}{place\_monster}(mon, x, y);
579         \hyperlink{display_8c_a185c6ad6e4c5a6be26a371b9aa17c32e}{newsym}(mon->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mon->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my});
580         set\_apparxy(mon);
581         (void) mintrap(mon);
582         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
583     \}
584     \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
585 \}
\end{DoxyCode}
\hypertarget{dothrow_8c_a6ed2701518ef4415f22d4087a987204c}{\index{dothrow.\+c@{dothrow.\+c}!N\+D\+E\+C\+L@{N\+D\+E\+C\+L}}
\index{N\+D\+E\+C\+L@{N\+D\+E\+C\+L}!dothrow.\+c@{dothrow.\+c}}
\subsubsection[{N\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} void N\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf autoquiver}}]{}
\end{DoxyParamCaption}
)}}\label{dothrow_8c_a6ed2701518ef4415f22d4087a987204c}
\hypertarget{dothrow_8c_a52fc908fc5be663b06b7a3a4ae042bb2}{\index{dothrow.\+c@{dothrow.\+c}!omon\+\_\+adj@{omon\+\_\+adj}}
\index{omon\+\_\+adj@{omon\+\_\+adj}!dothrow.\+c@{dothrow.\+c}}
\subsubsection[{omon\+\_\+adj}]{\setlength{\rightskip}{0pt plus 5cm}int omon\+\_\+adj (
\begin{DoxyParamCaption}
\item[{struct {\bf monst} $\ast$}]{mon, }
\item[{struct {\bf obj} $\ast$}]{obj, }
\item[{{\bf boolean}}]{mon\+\_\+notices}
\end{DoxyParamCaption}
)}}\label{dothrow_8c_a52fc908fc5be663b06b7a3a4ae042bb2}


Definition at line 1109 of file dothrow.\+c.



References G\+E\+M\+\_\+\+C\+L\+A\+S\+S, is\+\_\+weptool, M\+Z\+\_\+\+M\+E\+D\+I\+U\+M, obj\+::oclass, obj\+::otyp, uball, and W\+E\+A\+P\+O\+N\+\_\+\+C\+L\+A\+S\+S.



Referenced by drag\+\_\+ball(), and thitmonst().


\begin{DoxyCode}
1113 \{
1114     \textcolor{keywordtype}{int} tmp = 0;
1115 
1116     \textcolor{comment}{/* size of target affects the chance of hitting */}
1117     tmp += (mon->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}->\hyperlink{structpermonst_a29f8d76dae8c7c96eab01dd8ec27717b}{msize} - \hyperlink{monflag_8h_a73d63fc9493b8328437d505bd2d6decb}{MZ\_MEDIUM});        \textcolor{comment}{/* -2..+5 */}
1118     \textcolor{comment}{/* sleeping target is more likely to be hit */}
1119     \textcolor{keywordflow}{if} (mon->msleeping) \{
1120         tmp += 2;
1121         \textcolor{keywordflow}{if} (mon\_notices) mon->msleeping = 0;
1122     \}
1123     \textcolor{comment}{/* ditto for immobilized target */}
1124     \textcolor{keywordflow}{if} (!mon->mcanmove || !mon->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}->\hyperlink{structpermonst_a939712c539eb16cf6cb51e58ae1c12b0}{mmove}) \{
1125         tmp += 4;
1126         \textcolor{keywordflow}{if} (mon\_notices && mon->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}->\hyperlink{structpermonst_a939712c539eb16cf6cb51e58ae1c12b0}{mmove} && !rn2(10)) \{
1127         mon->mcanmove = 1;
1128         mon->mfrozen = 0;
1129         \}
1130     \}
1131     \textcolor{comment}{/* some objects are more likely to hit than others */}
1132     \textcolor{keywordflow}{switch} (obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp}) \{
1133     \textcolor{keywordflow}{case} HEAVY\_IRON\_BALL:
1134         \textcolor{keywordflow}{if} (obj != \hyperlink{decl_8h_a043dece512e3c566986d7cfabc52d05e}{uball}) tmp += 2;
1135         \textcolor{keywordflow}{break};
1136     \textcolor{keywordflow}{case} BOULDER:
1137         tmp += 6;
1138         \textcolor{keywordflow}{break};
1139     \textcolor{keywordflow}{default}:
1140         \textcolor{keywordflow}{if} (obj->\hyperlink{structobj_a716ba3ee00602dede9ea5c68c74d45bd}{oclass} == \hyperlink{objclass_8h_a615c2dc6d3501d6b5e14c3373bc37ec1}{WEAPON\_CLASS} || \hyperlink{obj_8h_a5f347f7456e4da8284a9bc369bc32d45}{is\_weptool}(obj) ||
1141             obj->\hyperlink{structobj_a716ba3ee00602dede9ea5c68c74d45bd}{oclass} == \hyperlink{objclass_8h_afc09c51ea922e9928f86a51177244796}{GEM\_CLASS})
1142         tmp += hitval(obj, mon);
1143         \textcolor{keywordflow}{break};
1144     \}
1145     \textcolor{keywordflow}{return} tmp;
1146 \}
\end{DoxyCode}
\hypertarget{dothrow_8c_a1252b75a6979fc66ac71229350e210e4}{\index{dothrow.\+c@{dothrow.\+c}!sho\+\_\+obj\+\_\+return\+\_\+to\+\_\+u@{sho\+\_\+obj\+\_\+return\+\_\+to\+\_\+u}}
\index{sho\+\_\+obj\+\_\+return\+\_\+to\+\_\+u@{sho\+\_\+obj\+\_\+return\+\_\+to\+\_\+u}!dothrow.\+c@{dothrow.\+c}}
\subsubsection[{sho\+\_\+obj\+\_\+return\+\_\+to\+\_\+u}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} void sho\+\_\+obj\+\_\+return\+\_\+to\+\_\+u (
\begin{DoxyParamCaption}
\item[{struct {\bf obj} $\ast$}]{obj}
\end{DoxyParamCaption}
)}}\label{dothrow_8c_a1252b75a6979fc66ac71229350e210e4}


Definition at line 842 of file dothrow.\+c.



References bhitpos, delay\+\_\+output, D\+I\+S\+P\+\_\+\+E\+N\+D, D\+I\+S\+P\+\_\+\+F\+L\+A\+S\+H, you\+::dx, you\+::dy, obj\+\_\+to\+\_\+glyph, tmp\+\_\+at(), u, you\+::ux, you\+::uy, coord\+::x, and coord\+::y.



Referenced by thitmonst(), and throwit().


\begin{DoxyCode}
844 \{
845     \textcolor{comment}{/* might already be our location (bounced off a wall) */}
846     \textcolor{keywordflow}{if} (\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x} != \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux} || \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y} != \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy}) \{
847     \textcolor{keywordtype}{int} x = \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x} - \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a0b53da9e296cbebbc3dc2fc6ade21aeb}{dx}, y = \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y} - \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a80d068cfe5c15ae06e6f152be40a716f}{dy};
848 
849     \hyperlink{display_8c_a0567746aec3aa9a3e8075d8eabb29846}{tmp\_at}(\hyperlink{display_8h_a34b949cb0446b7600233da12c14f5e52}{DISP\_FLASH}, \hyperlink{display_8h_a14ef77de0b1bfde06713088d7d9f53e8}{obj\_to\_glyph}(obj));
850     \textcolor{keywordflow}{while}(x != \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux} || y != \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy}) \{
851         \hyperlink{display_8c_a0567746aec3aa9a3e8075d8eabb29846}{tmp\_at}(x, y);
852         \hyperlink{winprocs_8h_a52ac0892dec99e42da526fda2126d9e9}{delay\_output}();
853         x -= \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a0b53da9e296cbebbc3dc2fc6ade21aeb}{dx}; y -= \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a80d068cfe5c15ae06e6f152be40a716f}{dy};
854     \}
855     \hyperlink{display_8c_a0567746aec3aa9a3e8075d8eabb29846}{tmp\_at}(\hyperlink{display_8h_a6b799a763b3dbf2977bfe7c90951ab53}{DISP\_END}, 0);
856     \}
857 \}
\end{DoxyCode}
\hypertarget{dothrow_8c_a0baeb9c5ae48bbe466b1884ee5517eef}{\index{dothrow.\+c@{dothrow.\+c}!thitmonst@{thitmonst}}
\index{thitmonst@{thitmonst}!dothrow.\+c@{dothrow.\+c}}
\subsubsection[{thitmonst}]{\setlength{\rightskip}{0pt plus 5cm}int thitmonst (
\begin{DoxyParamCaption}
\item[{struct {\bf monst} $\ast$}]{mon, }
\item[{struct {\bf obj}   $\ast$}]{obj}
\end{DoxyParamCaption}
)}}\label{dothrow_8c_a0baeb9c5ae48bbe466b1884ee5517eef}


Definition at line 1178 of file dothrow.\+c.



References A\+\_\+\+D\+E\+X, A\+\_\+\+S\+T\+R, A\+C\+C\+F\+O\+O\+D, A\+C\+U\+R\+R, ammo\+\_\+and\+\_\+launcher, befriend\+\_\+with\+\_\+obj, bhitpos, check\+\_\+shop\+\_\+obj(), cutworm(), monst\+::data, encumber\+\_\+msg(), find\+\_\+mac(), finish\+\_\+quest(), gem\+\_\+accept(), G\+E\+M\+\_\+\+C\+L\+A\+S\+S, greatest\+\_\+erosion, hmon(), is\+\_\+ammo, is\+\_\+animal, is\+\_\+elf, is\+\_\+orc, is\+\_\+unicorn, is\+\_\+weptool, Luck, maybe\+\_\+polyd, permonst\+::mlevel, mons, obj\+::oartifact, objects, oc\+\_\+skill, omon\+\_\+adj(), obj\+::otyp, P\+\_\+\+B\+O\+O\+M\+E\+R\+A\+N\+G, P\+\_\+\+B\+O\+W, P\+\_\+\+N\+O\+N\+E, passive\+\_\+obj(), P\+O\+T\+I\+O\+N\+\_\+\+C\+L\+A\+S\+S, quest\+\_\+arti\+\_\+hits\+\_\+leader, Race\+\_\+if, Role\+\_\+if, sho\+\_\+obj\+\_\+return\+\_\+to\+\_\+u(), obj\+::spe, S\+T\+R\+A\+T\+\_\+\+W\+A\+I\+T\+M\+A\+S\+K, throwing\+\_\+weapon(), tmiss(), touch\+\_\+petrifies, T\+R\+U\+E, u, uarmg, uball, you\+::uhitinc, you\+::ulevel, Upolyd, you\+::ushops, you\+::ustuck, uwep, you\+::ux, you\+::uy, W\+E\+A\+P\+O\+N\+\_\+\+C\+L\+A\+S\+S, coord\+::x, coord\+::y, youmonst, and your\+\_\+race.



Referenced by kick\+\_\+object(), and throwit().


\begin{DoxyCode}
1181 \{
1182     \textcolor{keyword}{register} \textcolor{keywordtype}{int}    tmp; \textcolor{comment}{/* Base chance to hit */}
1183     \textcolor{keyword}{register} \textcolor{keywordtype}{int}    disttmp; \textcolor{comment}{/* distance modifier */}
1184     \textcolor{keywordtype}{int} otyp = obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp};
1185     \textcolor{keywordtype}{boolean} guaranteed\_hit = (\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.uswallow && mon == \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a774d4dad2da130ec9ed1d2e6c5e0fa80}{ustuck});
1186 
1187     \textcolor{comment}{/* Differences from melee weapons:}
1188 \textcolor{comment}{     *}
1189 \textcolor{comment}{     * Dex still gives a bonus, but strength does not.}
1190 \textcolor{comment}{     * Polymorphed players lacking attacks may still throw.}
1191 \textcolor{comment}{     * There's a base -1 to hit.}
1192 \textcolor{comment}{     * No bonuses for fleeing or stunned targets (they don't dodge}
1193 \textcolor{comment}{     *    melee blows as readily, but dodging arrows is hard anyway).}
1194 \textcolor{comment}{     * Not affected by traps, etc.}
1195 \textcolor{comment}{     * Certain items which don't in themselves do damage ignore tmp.}
1196 \textcolor{comment}{     * Distance and monster size affect chance to hit.}
1197 \textcolor{comment}{     */}
1198     tmp = -1 + \hyperlink{you_8h_ae69937c86a71264fd0e91dab8a64cae4}{Luck} + \hyperlink{worn_8c_a03e1b53b51c959a61e4c205e65d1095a}{find\_mac}(mon) + \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a82f605992d46009b99965f3175ee4187}{uhitinc} +
1199             \hyperlink{youprop_8h_a5d9c0d4dec4b697690cb11eb282f04dd}{maybe\_polyd}(\hyperlink{decl_8h_ad15893dbcb60e2777ae0dfac9f840858}{youmonst}.\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}->\hyperlink{structpermonst_aeed45d1ab54620bc7e5242b76f1c3c5f}{mlevel}, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.
      \hyperlink{structyou_a6c7263bb25b91825bf7ecaab470d771a}{ulevel});
1200     \textcolor{keywordflow}{if} (\hyperlink{attrib_8h_ab83869fac11f870c2193469440573f84}{ACURR}(\hyperlink{attrib_8h_ad8117dfaac470310d7540a3e8dcc00e0}{A\_DEX}) < 4) tmp -= 3;
1201     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{attrib_8h_ab83869fac11f870c2193469440573f84}{ACURR}(\hyperlink{attrib_8h_ad8117dfaac470310d7540a3e8dcc00e0}{A\_DEX}) < 6) tmp -= 2;
1202     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{attrib_8h_ab83869fac11f870c2193469440573f84}{ACURR}(\hyperlink{attrib_8h_ad8117dfaac470310d7540a3e8dcc00e0}{A\_DEX}) < 8) tmp -= 1;
1203     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{attrib_8h_ab83869fac11f870c2193469440573f84}{ACURR}(\hyperlink{attrib_8h_ad8117dfaac470310d7540a3e8dcc00e0}{A\_DEX}) >= 14) tmp += (\hyperlink{attrib_8h_ab83869fac11f870c2193469440573f84}{ACURR}(\hyperlink{attrib_8h_ad8117dfaac470310d7540a3e8dcc00e0}{A\_DEX}) - 14);
1204 
1205     \textcolor{comment}{/* Modify to-hit depending on distance; but keep it sane.}
1206 \textcolor{comment}{     * Polearms get a distance penalty even when wielded; it's}
1207 \textcolor{comment}{     * hard to hit at a distance.}
1208 \textcolor{comment}{     */}
1209     disttmp = 3 - distmin(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux}, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy}, mon->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mon->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my});
1210     \textcolor{keywordflow}{if}(disttmp < -4) disttmp = -4;
1211     tmp += disttmp;
1212 
1213     \textcolor{comment}{/* gloves are a hinderance to proper use of bows */}
1214     \textcolor{keywordflow}{if} (\hyperlink{decl_8h_a374ab5e4582cfafa2d4ef57211f53293}{uarmg} && \hyperlink{decl_8h_a1aefaef88eef9075d8136d19410fd3b1}{uwep} && \hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[\hyperlink{decl_8h_a1aefaef88eef9075d8136d19410fd3b1}{uwep}->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp}].oc\_skill == 
      \hyperlink{skills_8h_ae3368e14592ff82ba5eb63193943f445}{P\_BOW}) \{
1215         \textcolor{keywordflow}{switch} (\hyperlink{decl_8h_a374ab5e4582cfafa2d4ef57211f53293}{uarmg}->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp}) \{
1216         \textcolor{keywordflow}{case} GAUNTLETS\_OF\_POWER:    \textcolor{comment}{/* metal */}
1217         tmp -= 2;
1218         \textcolor{keywordflow}{break};
1219         \textcolor{keywordflow}{case} GAUNTLETS\_OF\_FUMBLING:
1220         tmp -= 3;
1221         \textcolor{keywordflow}{break};
1222         \textcolor{keywordflow}{case} LEATHER\_GLOVES:
1223         \textcolor{keywordflow}{case} GAUNTLETS\_OF\_DEXTERITY:
1224         \textcolor{keywordflow}{break};
1225         \textcolor{keywordflow}{default}:
1226         impossible(\textcolor{stringliteral}{"Unknown type of gloves (%d)"}, \hyperlink{decl_8h_a374ab5e4582cfafa2d4ef57211f53293}{uarmg}->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp});
1227         \textcolor{keywordflow}{break};
1228         \}
1229     \}
1230 
1231     tmp += \hyperlink{dothrow_8c_a52fc908fc5be663b06b7a3a4ae042bb2}{omon\_adj}(mon, obj, \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE});
1232     \textcolor{keywordflow}{if} (\hyperlink{mondata_8h_a2e5dce3b8165535b75a3b710aa3dc0bb}{is\_orc}(mon->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}) && \hyperlink{youprop_8h_a5d9c0d4dec4b697690cb11eb282f04dd}{maybe\_polyd}(\hyperlink{mondata_8h_a34b30264e47f5967d450cc2c050951ce}{is\_elf}(
      \hyperlink{decl_8h_ad15893dbcb60e2777ae0dfac9f840858}{youmonst}.\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}),
1233             \hyperlink{you_8h_ac1b9b8d9c3387e3d3a36b9474945879c}{Race\_if}(PM\_ELF)))
1234         tmp++;
1235     \textcolor{keywordflow}{if} (guaranteed\_hit) \{
1236         tmp += 1000; \textcolor{comment}{/* Guaranteed hit */}
1237     \}
1238 
1239     \textcolor{keywordflow}{if} (obj->\hyperlink{structobj_a716ba3ee00602dede9ea5c68c74d45bd}{oclass} == \hyperlink{objclass_8h_afc09c51ea922e9928f86a51177244796}{GEM\_CLASS} && \hyperlink{mondata_8h_aea6ec71970ce94bddd2270e198ff62f6}{is\_unicorn}(mon->
      \hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data})) \{
1240         \textcolor{keywordflow}{if} (mon->\hyperlink{structmonst_a6d525ec48f9d38cda6accbb0cb39efba}{mtame}) \{
1241         pline(\textcolor{stringliteral}{"%s catches and drops %s."}, Monnam(mon), the(xname(obj)));
1242         \textcolor{keywordflow}{return} 0;
1243         \} \textcolor{keywordflow}{else} \{
1244         pline(\textcolor{stringliteral}{"%s catches %s."}, Monnam(mon), the(xname(obj)));
1245         \textcolor{keywordflow}{return} \hyperlink{dothrow_8c_aa44a442fb326369215022c910ce07e7f}{gem\_accept}(mon, obj);
1246         \}
1247     \}
1248 
1249     \textcolor{comment}{/* don't make game unwinnable if naive player throws artifact}
1250 \textcolor{comment}{       at leader.... */}
1251     \textcolor{keywordflow}{if} (\hyperlink{dothrow_8c_aed16bef0dda0c6434a58efee444dcc2f}{quest\_arti\_hits\_leader}(obj, mon)) \{
1252         \textcolor{comment}{/* not wakeup(), which angers non-tame monsters */}
1253         mon->msleeping = 0;
1254         mon->\hyperlink{structmonst_a5d03af85e4563c4068ac07d616af859f}{mstrategy} &= ~\hyperlink{monst_8h_a4f9dcb847e3f6a5b6d1e5ce78902938b}{STRAT\_WAITMASK};
1255 
1256         \textcolor{keywordflow}{if} (mon->mcanmove) \{
1257         pline(\textcolor{stringliteral}{"%s catches %s."}, Monnam(mon), the(xname(obj)));
1258         \textcolor{keywordflow}{if} (mon->mpeaceful) \{
1259             \textcolor{keywordtype}{boolean} next2u = monnear(mon, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux}, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy});
1260 
1261             \hyperlink{quest_8c_a46355840144325db9a1e398995dde470}{finish\_quest}(obj);  \textcolor{comment}{/* acknowledge quest completion */}
1262             pline(\textcolor{stringliteral}{"%s %s %s back to you."}, Monnam(mon),
1263               (next2u ? \textcolor{stringliteral}{"hands"} : \textcolor{stringliteral}{"tosses"}), the(xname(obj)));
1264             \textcolor{keywordflow}{if} (!next2u) \hyperlink{dothrow_8c_a1252b75a6979fc66ac71229350e210e4}{sho\_obj\_return\_to\_u}(obj);
1265             obj = addinv(obj);  \textcolor{comment}{/* back into your inventory */}
1266             (void) \hyperlink{pickup_8c_aed29b02f27db47b69b5ef129bf56e102}{encumber\_msg}();
1267         \} \textcolor{keywordflow}{else} \{
1268             \textcolor{comment}{/* angry leader caught it and isn't returning it */}
1269             (void) mpickobj(mon, obj);
1270         \}
1271         \textcolor{keywordflow}{return} 1;       \textcolor{comment}{/* caller doesn't need to place it */}
1272         \}
1273         \textcolor{keywordflow}{return}(0);
1274     \}
1275 
1276     \textcolor{keywordflow}{if} (obj->\hyperlink{structobj_a716ba3ee00602dede9ea5c68c74d45bd}{oclass} == \hyperlink{objclass_8h_a615c2dc6d3501d6b5e14c3373bc37ec1}{WEAPON\_CLASS} || \hyperlink{obj_8h_a5f347f7456e4da8284a9bc369bc32d45}{is\_weptool}(obj) ||
1277         obj->\hyperlink{structobj_a716ba3ee00602dede9ea5c68c74d45bd}{oclass} == \hyperlink{objclass_8h_afc09c51ea922e9928f86a51177244796}{GEM\_CLASS}) \{
1278         \textcolor{keywordflow}{if} (\hyperlink{obj_8h_a17d7bf4a6f8336a314c0825cf5848c54}{is\_ammo}(obj)) \{
1279         \textcolor{keywordflow}{if} (!\hyperlink{obj_8h_a766dc63537673239906c55a19f384b1d}{ammo\_and\_launcher}(obj, \hyperlink{decl_8h_a1aefaef88eef9075d8136d19410fd3b1}{uwep})) \{
1280             tmp -= 4;
1281         \} \textcolor{keywordflow}{else} \{
1282             tmp += \hyperlink{decl_8h_a1aefaef88eef9075d8136d19410fd3b1}{uwep}->\hyperlink{structobj_a14fc8dc59e9073bfbf1e170875a98448}{spe} - \hyperlink{obj_8h_ac240beb25ae6ec398ee270cdf4c79155}{greatest\_erosion}(\hyperlink{decl_8h_a1aefaef88eef9075d8136d19410fd3b1}{uwep});
1283             tmp += weapon\_hit\_bonus(\hyperlink{decl_8h_a1aefaef88eef9075d8136d19410fd3b1}{uwep});
1284             \textcolor{keywordflow}{if} (\hyperlink{decl_8h_a1aefaef88eef9075d8136d19410fd3b1}{uwep}->\hyperlink{structobj_af03ce8a6a0ca51e8d8954fb1a1a31fbe}{oartifact}) tmp += spec\_abon(\hyperlink{decl_8h_a1aefaef88eef9075d8136d19410fd3b1}{uwep}, mon);
1285             \textcolor{comment}{/*}
1286 \textcolor{comment}{             * Elves and Samurais are highly trained w/bows,}
1287 \textcolor{comment}{             * especially their own special types of bow.}
1288 \textcolor{comment}{             * Polymorphing won't make you a bow expert.}
1289 \textcolor{comment}{             */}
1290             \textcolor{keywordflow}{if} ((\hyperlink{you_8h_ac1b9b8d9c3387e3d3a36b9474945879c}{Race\_if}(PM\_ELF) || \hyperlink{you_8h_a6087f5b8605964c19078b777da740258}{Role\_if}(PM\_SAMURAI)) &&
1291                 (!\hyperlink{you_8h_ab869582031082f2c352b374dc0e0c3b3}{Upolyd} || \hyperlink{mondata_8h_a620adc730907c7d05a67956897fc4bcb}{your\_race}(\hyperlink{decl_8h_ad15893dbcb60e2777ae0dfac9f840858}{youmonst}.\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data})) &&
1292                 \hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[\hyperlink{decl_8h_a1aefaef88eef9075d8136d19410fd3b1}{uwep}->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp}].oc\_skill == \hyperlink{skills_8h_ae3368e14592ff82ba5eb63193943f445}{P\_BOW}) \{
1293             tmp++;
1294             \textcolor{keywordflow}{if} (\hyperlink{you_8h_ac1b9b8d9c3387e3d3a36b9474945879c}{Race\_if}(PM\_ELF) && \hyperlink{decl_8h_a1aefaef88eef9075d8136d19410fd3b1}{uwep}->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == ELVEN\_BOW)
1295                 tmp++;
1296             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{you_8h_a6087f5b8605964c19078b777da740258}{Role\_if}(PM\_SAMURAI) && \hyperlink{decl_8h_a1aefaef88eef9075d8136d19410fd3b1}{uwep}->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == YUMI)
1297                 tmp++;
1298             \}
1299         \}
1300         \} \textcolor{keywordflow}{else} \{
1301         \textcolor{keywordflow}{if} (otyp == BOOMERANG)      \textcolor{comment}{/* arbitrary */}
1302             tmp += 4;
1303         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{dothrow_8c_a61f17732325303360ee2197078a891f8}{throwing\_weapon}(obj))   \textcolor{comment}{/* meant to be thrown */}
1304             tmp += 2;
1305         \textcolor{keywordflow}{else}                \textcolor{comment}{/* not meant to be thrown */}
1306             tmp -= 2;
1307         \textcolor{comment}{/* we know we're dealing with a weapon or weptool handled}
1308 \textcolor{comment}{           by WEAPON\_SKILLS once ammo objects have been excluded */}
1309         tmp += weapon\_hit\_bonus(obj);
1310         \}
1311 
1312         \textcolor{keywordflow}{if} (tmp >= rnd(20)) \{
1313         \textcolor{keywordflow}{if} (\hyperlink{uhitm_8c_a995bc5394db9ea09e5851976d7f9f755}{hmon}(mon,obj,1)) \{  \textcolor{comment}{/* mon still alive */}
1314             \hyperlink{worm_8c_a79a1f54b2e8d6aa7483bb1b6d3cbd83b}{cutworm}(mon, \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x}, \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y}, obj);
1315         \}
1316         exercise(\hyperlink{attrib_8h_ad8117dfaac470310d7540a3e8dcc00e0}{A\_DEX}, \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE});
1317         \textcolor{comment}{/* projectiles other than magic stones}
1318 \textcolor{comment}{           sometimes disappear when thrown */}
1319         \textcolor{keywordflow}{if} (\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[otyp].\hyperlink{objclass_8h_ab595ada1a513270255a2311ffc43c2ab}{oc\_skill} < \hyperlink{skills_8h_a85d9ffb730a902e2dc0e7a90621b2144}{P\_NONE} &&
1320                 \hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[otyp].\hyperlink{objclass_8h_ab595ada1a513270255a2311ffc43c2ab}{oc\_skill} > -\hyperlink{skills_8h_a7b38b34ad3b0a32f56abaa122c23d9d2}{P\_BOOMERANG} &&
1321                 !\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[otyp].oc\_magic) \{
1322             \textcolor{comment}{/* we were breaking 2/3 of everything unconditionally.}
1323 \textcolor{comment}{             * we still don't want anything to survive unconditionally,}
1324 \textcolor{comment}{             * but we need ammo to stay around longer on average.}
1325 \textcolor{comment}{             */}
1326             \textcolor{keywordtype}{int} broken, chance;
1327             chance = 3 + \hyperlink{obj_8h_ac240beb25ae6ec398ee270cdf4c79155}{greatest\_erosion}(obj) - obj->\hyperlink{structobj_a14fc8dc59e9073bfbf1e170875a98448}{spe};
1328             \textcolor{keywordflow}{if} (chance > 1)
1329             broken = rn2(chance);
1330             \textcolor{keywordflow}{else}
1331             broken = !rn2(4);
1332             \textcolor{keywordflow}{if} (obj->blessed && !rnl(4))
1333             broken = 0;
1334 
1335             \textcolor{keywordflow}{if} (broken) \{
1336             \textcolor{keywordflow}{if} (*\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a1bc3b5ca1e5d9957ab3a7f451c069f47}{ushops})
1337                 \hyperlink{dothrow_8c_af5cc3d590b41c3cabf70b1c76824c56b}{check\_shop\_obj}(obj, \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x},\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.
      \hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y}, \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE});
1338             obfree(obj, (\textcolor{keyword}{struct} obj *)0);
1339             \textcolor{keywordflow}{return} 1;
1340             \}
1341         \}
1342         \hyperlink{uhitm_8c_a05b517f10f304b12c4424521ae517c02}{passive\_obj}(mon, obj, (\textcolor{keyword}{struct} \hyperlink{structattack}{attack} *)0);
1343         \} \textcolor{keywordflow}{else} \{
1344         \hyperlink{dothrow_8c_a3b65efcc0f60a81c1c3059701eb64e47}{tmiss}(obj, mon);
1345         \}
1346 
1347     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (otyp == HEAVY\_IRON\_BALL) \{
1348         exercise(\hyperlink{attrib_8h_ad53430e3d611a366ec4b5c457b4c67f7}{A\_STR}, \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE});
1349         \textcolor{keywordflow}{if} (tmp >= rnd(20)) \{
1350         \textcolor{keywordtype}{int} was\_swallowed = guaranteed\_hit;
1351 
1352         exercise(\hyperlink{attrib_8h_ad8117dfaac470310d7540a3e8dcc00e0}{A\_DEX}, \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE});
1353         \textcolor{keywordflow}{if} (!\hyperlink{uhitm_8c_a995bc5394db9ea09e5851976d7f9f755}{hmon}(mon,obj,1)) \{     \textcolor{comment}{/* mon killed */}
1354             \textcolor{keywordflow}{if} (was\_swallowed && !\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.uswallow && obj == \hyperlink{decl_8h_a043dece512e3c566986d7cfabc52d05e}{uball})
1355             \textcolor{keywordflow}{return} 1;   \textcolor{comment}{/* already did placebc() */}
1356         \}
1357         \} \textcolor{keywordflow}{else} \{
1358         \hyperlink{dothrow_8c_a3b65efcc0f60a81c1c3059701eb64e47}{tmiss}(obj, mon);
1359         \}
1360 
1361     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (otyp == BOULDER) \{
1362         exercise(\hyperlink{attrib_8h_ad53430e3d611a366ec4b5c457b4c67f7}{A\_STR}, \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE});
1363         \textcolor{keywordflow}{if} (tmp >= rnd(20)) \{
1364         exercise(\hyperlink{attrib_8h_ad8117dfaac470310d7540a3e8dcc00e0}{A\_DEX}, \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE});
1365         (void) \hyperlink{uhitm_8c_a995bc5394db9ea09e5851976d7f9f755}{hmon}(mon,obj,1);
1366         \} \textcolor{keywordflow}{else} \{
1367         \hyperlink{dothrow_8c_a3b65efcc0f60a81c1c3059701eb64e47}{tmiss}(obj, mon);
1368         \}
1369 
1370     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((otyp == EGG || otyp == CREAM\_PIE ||
1371             otyp == BLINDING\_VENOM || otyp == ACID\_VENOM) &&
1372         (guaranteed\_hit || \hyperlink{attrib_8h_ab83869fac11f870c2193469440573f84}{ACURR}(\hyperlink{attrib_8h_ad8117dfaac470310d7540a3e8dcc00e0}{A\_DEX}) > rnd(25))) \{
1373         (void) \hyperlink{uhitm_8c_a995bc5394db9ea09e5851976d7f9f755}{hmon}(mon, obj, 1);
1374         \textcolor{keywordflow}{return} 1;   \textcolor{comment}{/* hmon used it up */}
1375 
1376     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (obj->\hyperlink{structobj_a716ba3ee00602dede9ea5c68c74d45bd}{oclass} == \hyperlink{objclass_8h_a05335e5ee18dfa33af1c40056fe8fab9}{POTION\_CLASS} &&
1377         (guaranteed\_hit || \hyperlink{attrib_8h_ab83869fac11f870c2193469440573f84}{ACURR}(\hyperlink{attrib_8h_ad8117dfaac470310d7540a3e8dcc00e0}{A\_DEX}) > rnd(25))) \{
1378         potionhit(mon, obj, \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE});
1379         \textcolor{keywordflow}{return} 1;
1380 
1381     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{mondata_8h_aa9f2656d72ad9ee8ad096a8867bf3d5f}{befriend\_with\_obj}(mon->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}, obj) ||
1382            (mon->\hyperlink{structmonst_a6d525ec48f9d38cda6accbb0cb39efba}{mtame} && dogfood(mon, obj) <= \hyperlink{edog_8h_ae93f7c10da0940637e130c0e4e546f1e}{ACCFOOD})) \{
1383         \textcolor{keywordflow}{if} (tamedog(mon, obj))
1384         \textcolor{keywordflow}{return} 1;               \textcolor{comment}{/* obj is gone */}
1385         \textcolor{keywordflow}{else} \{
1386         \textcolor{comment}{/* not tmiss(), which angers non-tame monsters */}
1387         miss(xname(obj), mon);
1388         mon->msleeping = 0;
1389         mon->\hyperlink{structmonst_a5d03af85e4563c4068ac07d616af859f}{mstrategy} &= ~\hyperlink{monst_8h_a4f9dcb847e3f6a5b6d1e5ce78902938b}{STRAT\_WAITMASK};
1390         \}
1391     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (guaranteed\_hit) \{
1392         \textcolor{comment}{/* this assumes that guaranteed\_hit is due to swallowing */}
1393         wakeup(mon);
1394         \textcolor{keywordflow}{if} (obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == CORPSE && \hyperlink{mondata_8h_ad1e85e493d27cdfdbe94c43710c4b191}{touch\_petrifies}(&\hyperlink{permonst_8h_ab96e7c4682ea5ae4f83339a15c06f676}{mons}[obj->
      \hyperlink{structobj_ad5db7220e2b815d06c3c80027ab9924f}{corpsenm}])) \{
1395         \textcolor{keywordflow}{if} (\hyperlink{mondata_8h_a6633b7e5ce3955ef878c6890a72b9392}{is\_animal}(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a774d4dad2da130ec9ed1d2e6c5e0fa80}{ustuck}->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data})) \{
1396             minstapetrify(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a774d4dad2da130ec9ed1d2e6c5e0fa80}{ustuck}, \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE});
1397             \textcolor{comment}{/* Don't leave a cockatrice corpse available in a statue */}
1398             \textcolor{keywordflow}{if} (!\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.uswallow) \{
1399                 delobj(obj);
1400                 \textcolor{keywordflow}{return} 1;
1401             \}
1402             \}
1403         \}
1404         pline(\textcolor{stringliteral}{"%s into %s %s."},
1405         Tobjnam(obj, \textcolor{stringliteral}{"vanish"}), s\_suffix(mon\_nam(mon)),
1406         \hyperlink{mondata_8h_a6633b7e5ce3955ef878c6890a72b9392}{is\_animal}(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a774d4dad2da130ec9ed1d2e6c5e0fa80}{ustuck}->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}) ? \textcolor{stringliteral}{"entrails"} : \textcolor{stringliteral}{"currents"});
1407     \} \textcolor{keywordflow}{else} \{
1408         \hyperlink{dothrow_8c_a3b65efcc0f60a81c1c3059701eb64e47}{tmiss}(obj, mon);
1409     \}
1410 
1411     \textcolor{keywordflow}{return} 0;
1412 \}
\end{DoxyCode}
\hypertarget{dothrow_8c_a3d1a3f6c2e5c067c9c38fe6d4c8b9b4d}{\index{dothrow.\+c@{dothrow.\+c}!throw\+\_\+gold@{throw\+\_\+gold}}
\index{throw\+\_\+gold@{throw\+\_\+gold}!dothrow.\+c@{dothrow.\+c}}
\subsubsection[{throw\+\_\+gold}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} int throw\+\_\+gold (
\begin{DoxyParamCaption}
\item[{struct {\bf obj} $\ast$}]{obj}
\end{DoxyParamCaption}
)}}\label{dothrow_8c_a3d1a3f6c2e5c067c9c38fe6d4c8b9b4d}


Definition at line 1692 of file dothrow.\+c.



References A\+C\+U\+R\+R\+S\+T\+R, bhitpos, flag\+::botl, monst\+::data, you\+::dx, you\+::dy, you\+::dz, F\+A\+L\+S\+E, F\+D\+E\+C\+L(), flags, ghitm(), H\+E\+A\+D, Is\+\_\+airlevel, is\+\_\+animal, Is\+\_\+waterlevel, levl, monst\+::mgold, M\+O\+N\+S\+T\+\_\+\+P, newsym(), O\+B\+J\+\_\+\+P, obj\+::quan, ship\+\_\+object(), T\+H\+R\+O\+W\+N\+\_\+\+W\+E\+A\+P\+O\+N, u, uarmh, you\+::ugold, Underwater, you\+::ushops, you\+::ustuck, you\+::ux, you\+::uy, you\+::uz, coord\+::x, coord\+::y, and Z\+A\+P\+\_\+\+P\+O\+S.



Referenced by throw\+\_\+obj().


\begin{DoxyCode}
1694 \{
1695     \textcolor{keywordtype}{int} range, odx, ody;
1696 \textcolor{preprocessor}{#ifndef GOLDOBJ}
1697     \textcolor{keywordtype}{long} zorks = obj->\hyperlink{structobj_ad08c0ed1a746fbb52377ecd7e4220578}{quan};
1698 \textcolor{preprocessor}{#endif}
1699     \textcolor{keyword}{register} \textcolor{keyword}{struct }\hyperlink{structmonst}{monst} *mon;
1700 
1701     \textcolor{keywordflow}{if}(!\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a0b53da9e296cbebbc3dc2fc6ade21aeb}{dx} && !\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a80d068cfe5c15ae06e6f152be40a716f}{dy} && !\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a3fa7dbf98dab7ca2c40195268174c45f}{dz}) \{
1702 \textcolor{preprocessor}{#ifndef GOLDOBJ}
1703         \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_af666e1fd44c5efe34df9053aef068245}{ugold} += obj->\hyperlink{structobj_ad08c0ed1a746fbb52377ecd7e4220578}{quan};
1704         \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a51f16d01a910b52fdf0c05a44739f7d8}{botl} = 1;
1705         dealloc\_obj(obj);
1706 \textcolor{preprocessor}{#endif}
1707         You(\textcolor{stringliteral}{"cannot throw gold at yourself."});
1708         \textcolor{keywordflow}{return}(0);
1709     \}
1710 \textcolor{preprocessor}{#ifdef GOLDOBJ}
1711         freeinv(obj);
1712 \textcolor{preprocessor}{#endif}
1713     \textcolor{keywordflow}{if}(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.uswallow) \{
1714         pline(\hyperlink{mondata_8h_a6633b7e5ce3955ef878c6890a72b9392}{is\_animal}(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a774d4dad2da130ec9ed1d2e6c5e0fa80}{ustuck}->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}) ?
1715             \textcolor{stringliteral}{"%s in the %s's entrails."} : \textcolor{stringliteral}{"%s into %s."},
1716 #ifndef GOLDOBJ
1717             \textcolor{stringliteral}{"The gold disappears"}, mon\_nam(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a774d4dad2da130ec9ed1d2e6c5e0fa80}{ustuck}));
1718         \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a774d4dad2da130ec9ed1d2e6c5e0fa80}{ustuck}->\hyperlink{structmonst_a06dbdd0ca7ee096216aa10f86beed533}{mgold} += zorks;
1719         dealloc\_obj(obj);
1720 \textcolor{preprocessor}{#else}
1721             \textcolor{stringliteral}{"The money disappears"}, mon\_nam(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a774d4dad2da130ec9ed1d2e6c5e0fa80}{ustuck}));
1722         add\_to\_minv(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a774d4dad2da130ec9ed1d2e6c5e0fa80}{ustuck}, obj);
1723 \textcolor{preprocessor}{#endif}
1724         \textcolor{keywordflow}{return}(1);
1725     \}
1726 
1727     \textcolor{keywordflow}{if}(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a3fa7dbf98dab7ca2c40195268174c45f}{dz}) \{
1728         \textcolor{keywordflow}{if} (\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a3fa7dbf98dab7ca2c40195268174c45f}{dz} < 0 && !\hyperlink{dungeon_8h_a2d9a2dcb88ded033c3305c7798f81c24}{Is\_airlevel}(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz}) &&
1729                     !\hyperlink{youprop_8h_a2eb59bdcba2c368fefd253bfcdaa3673}{Underwater} && !\hyperlink{dungeon_8h_a9fd7b21db47607a73332aa75ba8f4832}{Is\_waterlevel}(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz})) \{
1730     pline\_The(\textcolor{stringliteral}{"gold hits the %s, then falls back on top of your %s."},
1731             ceiling(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux},\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy}), body\_part(\hyperlink{hack_8h_a110f3b6cdacd45daee818b3e5965f6da}{HEAD}));
1732             \textcolor{comment}{/* some self damage? */}
1733             \textcolor{keywordflow}{if}(\hyperlink{decl_8h_a5990ad491dff32418089ab967be227a5}{uarmh}) pline(\textcolor{stringliteral}{"Fortunately, you are wearing a helmet!"});
1734         \}
1735         \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x} = \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux};
1736         \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y} = \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy};
1737     \} \textcolor{keywordflow}{else} \{
1738         \textcolor{comment}{/* consistent with range for normal objects */}
1739         range = (int)((\hyperlink{attrib_8h_a07133008845b3b4f8e36bf7c49c9046d}{ACURRSTR})/2 - obj->\hyperlink{structobj_a606b1d5b273b814049cc1b1991adfeec}{owt}/40);
1740 
1741         \textcolor{comment}{/* see if the gold has a place to move into */}
1742         odx = \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux} + \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a0b53da9e296cbebbc3dc2fc6ade21aeb}{dx};
1743         ody = \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy} + \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a80d068cfe5c15ae06e6f152be40a716f}{dy};
1744         \textcolor{keywordflow}{if}(!\hyperlink{rm_8h_a5dd90f0180ed18ffbebfa25ff9c3e1d9}{ZAP\_POS}(\hyperlink{rm_8h_a8cd681fba60fdedbabfd71a0b4bbfc00}{levl}[odx][ody].typ) || closed\_door(odx, ody)) \{
1745             \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x} = \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux};
1746             \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y} = \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy};
1747         \} \textcolor{keywordflow}{else} \{
1748             mon = bhit(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a0b53da9e296cbebbc3dc2fc6ade21aeb}{dx}, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a80d068cfe5c15ae06e6f152be40a716f}{dy}, range, \hyperlink{hack_8h_ab6f59807b4ebabad63374c2c91ccb4fa}{THROWN\_WEAPON},
1749                    (\textcolor{keywordtype}{int} \hyperlink{dothrow_8c_a060683cd287617dba3c5d46a4dada78e}{FDECL}((*),(\hyperlink{global_8h_a5ab67a0dcf1ab2e43fb100422af09f0d}{MONST\_P},\hyperlink{global_8h_a0b35ac15910ff1522ede7503fd6afe1c}{OBJ\_P})))0,
1750                    (\textcolor{keywordtype}{int} \hyperlink{dothrow_8c_a060683cd287617dba3c5d46a4dada78e}{FDECL}((*),(\hyperlink{global_8h_a0b35ac15910ff1522ede7503fd6afe1c}{OBJ\_P},\hyperlink{global_8h_a0b35ac15910ff1522ede7503fd6afe1c}{OBJ\_P})))0,
1751                    obj);
1752             \textcolor{keywordflow}{if}(mon) \{
1753                 \textcolor{keywordflow}{if} (\hyperlink{dokick_8c_ac0ebd568b1cd5997542a18c629cab547}{ghitm}(mon, obj))   \textcolor{comment}{/* was it caught? */}
1754                 \textcolor{keywordflow}{return} 1;
1755             \} \textcolor{keywordflow}{else} \{
1756                 \textcolor{keywordflow}{if}(\hyperlink{dokick_8c_a2e6ad173412ab80036782184f3749286}{ship\_object}(obj, \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x}, \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.
      \hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y}, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}))
1757                 \textcolor{keywordflow}{return} 1;
1758             \}
1759         \}
1760     \}
1761 
1762     \textcolor{keywordflow}{if}(flooreffects(obj,\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x},\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y},\textcolor{stringliteral}{"fall"})) \textcolor{keywordflow}{return}(1);
1763     \textcolor{keywordflow}{if}(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a3fa7dbf98dab7ca2c40195268174c45f}{dz} > 0)
1764         pline\_The(\textcolor{stringliteral}{"gold hits the %s."}, surface(\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x},\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.
      \hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y}));
1765     place\_object(obj,\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x},\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y});
1766     \textcolor{keywordflow}{if}(*\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a1bc3b5ca1e5d9957ab3a7f451c069f47}{ushops}) sellobj(obj, \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x}, \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y});
1767     stackobj(obj);
1768     \hyperlink{display_8c_a185c6ad6e4c5a6be26a371b9aa17c32e}{newsym}(\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x},\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y});
1769     \textcolor{keywordflow}{return}(1);
1770 \}
\end{DoxyCode}
\hypertarget{dothrow_8c_ae09ef336b45cfd9d6e9cbd32ca699216}{\index{dothrow.\+c@{dothrow.\+c}!throw\+\_\+obj@{throw\+\_\+obj}}
\index{throw\+\_\+obj@{throw\+\_\+obj}!dothrow.\+c@{dothrow.\+c}}
\subsubsection[{throw\+\_\+obj}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} int throw\+\_\+obj (
\begin{DoxyParamCaption}
\item[{struct {\bf obj} $\ast$}]{obj, }
\item[{int}]{shotlimit}
\end{DoxyParamCaption}
)}}\label{dothrow_8c_ae09ef336b45cfd9d6e9cbd32ca699216}


Definition at line 37 of file dothrow.\+c.



References A\+\_\+\+S\+T\+R, A\+C\+U\+R\+R, ammo\+\_\+and\+\_\+launcher, flag\+::botl, C\+O\+I\+N\+\_\+\+C\+L\+A\+S\+S, Confusion, monst\+::data, you\+::dx, you\+::dy, you\+::dz, F\+A\+L\+S\+E, flags, H\+A\+N\+D, multishot\+::i, killer\+\_\+buf, m\+\_\+shot, permonst\+::mname, mons, multishot\+::n, multishot\+::o, objects, otmp, obj\+::otyp, obj\+::owornmask, P\+\_\+\+D\+A\+G\+G\+E\+R, P\+\_\+\+D\+A\+R\+T, P\+\_\+\+E\+X\+P\+E\+R\+T, P\+\_\+\+S\+H\+U\+R\+I\+K\+E\+N, P\+\_\+\+S\+K\+I\+L\+L, P\+\_\+\+S\+K\+I\+L\+L\+E\+D, Race\+\_\+switch, Role\+\_\+switch, multishot\+::s, Sprintf, Stone\+\_\+resistance, S\+T\+R19, Stunned, throw\+\_\+gold(), throwit(), throws\+\_\+rocks, touch\+\_\+petrifies, T\+R\+U\+E, you\+::twoweap, u, uarmg, you\+::ugold, uquiver, uwep, welded(), weldmsg(), and youmonst.



Referenced by dofire(), and dothrow().


\begin{DoxyCode}
40 \{
41     \textcolor{keyword}{struct }obj *\hyperlink{mhitu_8c_a8cf94e09e1a72daf7050a2817ba70974}{otmp};
42     \textcolor{keywordtype}{int} \hyperlink{structmultishot}{multishot} = 1;
43     \hyperlink{config_8h_a0fd9ce9d735064461bebfe6037026093}{schar} skill;
44     \textcolor{keywordtype}{long} wep\_mask;
45     \textcolor{keywordtype}{boolean} twoweap;
46 
47     \textcolor{comment}{/* ask "in what direction?" */}
48 \textcolor{preprocessor}{#ifndef GOLDOBJ}
49     \textcolor{keywordflow}{if} (!getdir((\textcolor{keywordtype}{char} *)0)) \{
50         \textcolor{keywordflow}{if} (obj->\hyperlink{structobj_a716ba3ee00602dede9ea5c68c74d45bd}{oclass} == \hyperlink{objclass_8h_a2999621925083659147349e261e4cb3d}{COIN\_CLASS}) \{
51             \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_af666e1fd44c5efe34df9053aef068245}{ugold} += obj->\hyperlink{structobj_ad08c0ed1a746fbb52377ecd7e4220578}{quan};
52             \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a51f16d01a910b52fdf0c05a44739f7d8}{botl} = 1;
53             dealloc\_obj(obj);
54         \}
55         \textcolor{keywordflow}{return}(0);
56     \}
57 
58     \textcolor{keywordflow}{if}(obj->\hyperlink{structobj_a716ba3ee00602dede9ea5c68c74d45bd}{oclass} == \hyperlink{objclass_8h_a2999621925083659147349e261e4cb3d}{COIN\_CLASS}) \textcolor{keywordflow}{return}(\hyperlink{dothrow_8c_a3d1a3f6c2e5c067c9c38fe6d4c8b9b4d}{throw\_gold}(obj));
59 \textcolor{preprocessor}{#else}
60     \textcolor{keywordflow}{if} (!getdir((\textcolor{keywordtype}{char} *)0)) \{
61         \textcolor{comment}{/* obj might need to be merged back into the singular gold object */}
62         freeinv(obj);
63         addinv(obj);
64         \textcolor{keywordflow}{return}(0);
65     \}
66 
67         \textcolor{comment}{/*}
68 \textcolor{comment}{      Throwing money is usually for getting rid of it when}
69 \textcolor{comment}{          a leprechaun approaches, or for bribing an oncoming }
70 \textcolor{comment}{          angry monster.  So throw the whole object.}
71 \textcolor{comment}{}
72 \textcolor{comment}{          If the money is in quiver, throw one coin at a time,}
73 \textcolor{comment}{          possibly using a sling.}
74 \textcolor{comment}{        */}
75     \textcolor{keywordflow}{if}(obj->\hyperlink{structobj_a716ba3ee00602dede9ea5c68c74d45bd}{oclass} == \hyperlink{objclass_8h_a2999621925083659147349e261e4cb3d}{COIN\_CLASS} && obj != \hyperlink{decl_8h_a7544f9c7591e79476549f321400d269b}{uquiver}) \textcolor{keywordflow}{return}(
      \hyperlink{dothrow_8c_a3d1a3f6c2e5c067c9c38fe6d4c8b9b4d}{throw\_gold}(obj));
76 \textcolor{preprocessor}{#endif}
77 
78     \textcolor{keywordflow}{if}(!canletgo(obj,\textcolor{stringliteral}{"throw"}))
79         \textcolor{keywordflow}{return}(0);
80     \textcolor{keywordflow}{if} (obj->\hyperlink{structobj_af03ce8a6a0ca51e8d8954fb1a1a31fbe}{oartifact} == ART\_MJOLLNIR && obj != \hyperlink{decl_8h_a1aefaef88eef9075d8136d19410fd3b1}{uwep}) \{
81         pline(\textcolor{stringliteral}{"%s must be wielded before it can be thrown."},
82         The(xname(obj)));
83         \textcolor{keywordflow}{return}(0);
84     \}
85     \textcolor{keywordflow}{if} ((obj->\hyperlink{structobj_af03ce8a6a0ca51e8d8954fb1a1a31fbe}{oartifact} == ART\_MJOLLNIR && \hyperlink{attrib_8h_ab83869fac11f870c2193469440573f84}{ACURR}(\hyperlink{attrib_8h_ad53430e3d611a366ec4b5c457b4c67f7}{A\_STR}) < 
      \hyperlink{attrib_8h_ae85ec0287e589bfeec70955d612eecb3}{STR19}(25))
86        || (obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == BOULDER && !\hyperlink{mondata_8h_af1c84d35ae8812186eaf635bc27b37c0}{throws\_rocks}(\hyperlink{decl_8h_ad15893dbcb60e2777ae0dfac9f840858}{youmonst}.
      \hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}))) \{
87         pline(\textcolor{stringliteral}{"It's too heavy."});
88         \textcolor{keywordflow}{return}(1);
89     \}
90     \textcolor{keywordflow}{if}(!\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a0b53da9e296cbebbc3dc2fc6ade21aeb}{dx} && !\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a80d068cfe5c15ae06e6f152be40a716f}{dy} && !\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a3fa7dbf98dab7ca2c40195268174c45f}{dz}) \{
91         You(\textcolor{stringliteral}{"cannot throw an object at yourself."});
92         \textcolor{keywordflow}{return}(0);
93     \}
94     u\_wipe\_engr(2);
95     \textcolor{keywordflow}{if} (!\hyperlink{decl_8h_a374ab5e4582cfafa2d4ef57211f53293}{uarmg} && !\hyperlink{youprop_8h_a90b638323d50e1f8d52d4a9576d90551}{Stone\_resistance} && (obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == CORPSE &&
96             \hyperlink{mondata_8h_ad1e85e493d27cdfdbe94c43710c4b191}{touch\_petrifies}(&\hyperlink{permonst_8h_ab96e7c4682ea5ae4f83339a15c06f676}{mons}[obj->\hyperlink{structobj_ad5db7220e2b815d06c3c80027ab9924f}{corpsenm}]))) \{
97         You(\textcolor{stringliteral}{"throw the %s corpse with your bare %s."},
98             \hyperlink{permonst_8h_ab96e7c4682ea5ae4f83339a15c06f676}{mons}[obj->\hyperlink{structobj_ad5db7220e2b815d06c3c80027ab9924f}{corpsenm}].\hyperlink{structpermonst_ae92da7d141243d7e37d4a12340bb248f}{mname}, body\_part(\hyperlink{hack_8h_a701f28a9a2b5334b58333f06e27ad91f}{HAND}));
99         \hyperlink{global_8h_aa55ba8f4e3c82fe00035e6b51d6c7dee}{Sprintf}(\hyperlink{decl_8h_a4f3a20b71cdeceab28738aadb7c237bc}{killer\_buf}, \textcolor{stringliteral}{"%s corpse"}, an(\hyperlink{permonst_8h_ab96e7c4682ea5ae4f83339a15c06f676}{mons}[obj->
      \hyperlink{structobj_ad5db7220e2b815d06c3c80027ab9924f}{corpsenm}].\hyperlink{structpermonst_ae92da7d141243d7e37d4a12340bb248f}{mname}));
100         instapetrify(\hyperlink{decl_8h_a4f3a20b71cdeceab28738aadb7c237bc}{killer\_buf});
101     \}
102     \textcolor{keywordflow}{if} (\hyperlink{wield_8c_ade2321e11c702d69c6fd7b261ae62040}{welded}(obj)) \{
103         \hyperlink{wield_8c_acf3b9dae627bf80b5565774296f5b9a9}{weldmsg}(obj);
104         \textcolor{keywordflow}{return} 1;
105     \}
106 
107     \textcolor{comment}{/* Multishot calculations}
108 \textcolor{comment}{     */}
109     skill = \hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp}].oc\_skill;
110     \textcolor{keywordflow}{if} ((\hyperlink{obj_8h_a766dc63537673239906c55a19f384b1d}{ammo\_and\_launcher}(obj, \hyperlink{decl_8h_a1aefaef88eef9075d8136d19410fd3b1}{uwep}) || skill == \hyperlink{skills_8h_a1665c75745e5e46d0188a5f7250a7cd5}{P\_DAGGER} ||
111             skill == -\hyperlink{skills_8h_a44f013c38db36883390dfbdc9d0f09a7}{P\_DART} || skill == -\hyperlink{skills_8h_adbffa0a0e879c7d3285f8a0393a212ef}{P\_SHURIKEN}) &&
112         !(\hyperlink{youprop_8h_a85174462efda5cc2dc2a49a0249801bb}{Confusion} || \hyperlink{youprop_8h_afd7fdfec2109113244c347015bab4ad1}{Stunned})) \{
113         \textcolor{comment}{/* Bonus if the player is proficient in this weapon... */}
114         \textcolor{keywordflow}{switch} (\hyperlink{skills_8h_a778eff14f7209290967e1627b0b737ea}{P\_SKILL}(weapon\_type(obj))) \{
115         \textcolor{keywordflow}{default}:    \textcolor{keywordflow}{break}; \textcolor{comment}{/* No bonus */}
116         \textcolor{keywordflow}{case} \hyperlink{skills_8h_a63b5a038baa248a89d0cb288e6fa01ef}{P\_SKILLED}:    multishot++; \textcolor{keywordflow}{break};
117         \textcolor{keywordflow}{case} \hyperlink{skills_8h_a164d4988095938c2adb251b348ef58cd}{P\_EXPERT}:  multishot += 2; \textcolor{keywordflow}{break};
118         \}
119         \textcolor{comment}{/* ...or is using a special weapon for their role... */}
120         \textcolor{keywordflow}{switch} (\hyperlink{you_8h_a4e9c08c02937a7b0216c1ebdd3a3255d}{Role\_switch}) \{
121         \textcolor{keywordflow}{case} PM\_RANGER:
122         multishot++;
123         \textcolor{keywordflow}{break};
124         \textcolor{keywordflow}{case} PM\_ROGUE:
125         \textcolor{keywordflow}{if} (skill == \hyperlink{skills_8h_a1665c75745e5e46d0188a5f7250a7cd5}{P\_DAGGER}) multishot++;
126         \textcolor{keywordflow}{break};
127         \textcolor{keywordflow}{case} PM\_SAMURAI:
128         \textcolor{keywordflow}{if} (obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == YA && \hyperlink{decl_8h_a1aefaef88eef9075d8136d19410fd3b1}{uwep} && \hyperlink{decl_8h_a1aefaef88eef9075d8136d19410fd3b1}{uwep}->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == YUMI) multishot++;
129         \textcolor{keywordflow}{break};
130         \textcolor{keywordflow}{default}:
131         \textcolor{keywordflow}{break};  \textcolor{comment}{/* No bonus */}
132         \}
133         \textcolor{comment}{/* ...or using their race's special bow */}
134         \textcolor{keywordflow}{switch} (\hyperlink{you_8h_af30d32ee6f4111371f7e53a91b52a40a}{Race\_switch}) \{
135         \textcolor{keywordflow}{case} PM\_ELF:
136         \textcolor{keywordflow}{if} (obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == ELVEN\_ARROW && \hyperlink{decl_8h_a1aefaef88eef9075d8136d19410fd3b1}{uwep} &&
137                 \hyperlink{decl_8h_a1aefaef88eef9075d8136d19410fd3b1}{uwep}->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == ELVEN\_BOW) multishot++;
138         \textcolor{keywordflow}{break};
139         \textcolor{keywordflow}{case} PM\_ORC:
140         \textcolor{keywordflow}{if} (obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == ORCISH\_ARROW && \hyperlink{decl_8h_a1aefaef88eef9075d8136d19410fd3b1}{uwep} &&
141                 \hyperlink{decl_8h_a1aefaef88eef9075d8136d19410fd3b1}{uwep}->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == ORCISH\_BOW) multishot++;
142         \textcolor{keywordflow}{break};
143         \textcolor{keywordflow}{default}:
144         \textcolor{keywordflow}{break};  \textcolor{comment}{/* No bonus */}
145         \}
146     \}
147 
148     \textcolor{keywordflow}{if} ((\textcolor{keywordtype}{long})multishot > obj->\hyperlink{structobj_ad08c0ed1a746fbb52377ecd7e4220578}{quan}) multishot = (int)obj->\hyperlink{structobj_ad08c0ed1a746fbb52377ecd7e4220578}{quan};
149     multishot = rnd(multishot);
150     \textcolor{keywordflow}{if} (shotlimit > 0 && multishot > shotlimit) multishot = shotlimit;
151 
152     \hyperlink{decl_8h_a7f81da35e8b9f1f4bfd6c2e3255eba9a}{m\_shot}.\hyperlink{structmultishot_acc85ac2a091e5aec36d1b5d308775ffe}{s} = \hyperlink{obj_8h_a766dc63537673239906c55a19f384b1d}{ammo\_and\_launcher}(obj,\hyperlink{decl_8h_a1aefaef88eef9075d8136d19410fd3b1}{uwep}) ? \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE} : 
      \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
153     \textcolor{comment}{/* give a message if shooting more than one, or if player}
154 \textcolor{comment}{       attempted to specify a count */}
155     \textcolor{keywordflow}{if} (multishot > 1 || shotlimit > 0) \{
156         \textcolor{comment}{/* "You shoot N arrows." or "You throw N daggers." */}
157         You(\textcolor{stringliteral}{"%s %d %s."},
158         \hyperlink{decl_8h_a7f81da35e8b9f1f4bfd6c2e3255eba9a}{m\_shot}.\hyperlink{structmultishot_acc85ac2a091e5aec36d1b5d308775ffe}{s} ? \textcolor{stringliteral}{"shoot"} : \textcolor{stringliteral}{"throw"},
159         multishot,  \textcolor{comment}{/* (might be 1 if player gave shotlimit) */}
160         (multishot == 1) ? singular(obj, xname) :  xname(obj));
161     \}
162 
163     wep\_mask = obj->\hyperlink{structobj_a7906e045755ba4099705764a4eb076c6}{owornmask};
164     \hyperlink{decl_8h_a7f81da35e8b9f1f4bfd6c2e3255eba9a}{m\_shot}.\hyperlink{structmultishot_addd43be0e56011781a690bb29031f58e}{o} = obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp};
165     \hyperlink{decl_8h_a7f81da35e8b9f1f4bfd6c2e3255eba9a}{m\_shot}.\hyperlink{structmultishot_a62215723667a2eb09dd1203380b62f21}{n} = multishot;
166     \textcolor{keywordflow}{for} (\hyperlink{decl_8h_a7f81da35e8b9f1f4bfd6c2e3255eba9a}{m\_shot}.\hyperlink{structmultishot_a16373f5f59db22df2bb5b29279c3ecc4}{i} = 1; \hyperlink{decl_8h_a7f81da35e8b9f1f4bfd6c2e3255eba9a}{m\_shot}.\hyperlink{structmultishot_a16373f5f59db22df2bb5b29279c3ecc4}{i} <= \hyperlink{decl_8h_a7f81da35e8b9f1f4bfd6c2e3255eba9a}{m\_shot}.\hyperlink{structmultishot_a62215723667a2eb09dd1203380b62f21}{n}; \hyperlink{decl_8h_a7f81da35e8b9f1f4bfd6c2e3255eba9a}{m\_shot}.\hyperlink{structmultishot_a16373f5f59db22df2bb5b29279c3ecc4}{i}++) \{
167         twoweap = \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ade2cee6956bba775aa796bba6ae857ec}{twoweap};
168         \textcolor{comment}{/* split this object off from its slot if necessary */}
169         \textcolor{keywordflow}{if} (obj->\hyperlink{structobj_ad08c0ed1a746fbb52377ecd7e4220578}{quan} > 1L) \{
170         otmp = splitobj(obj, 1L);
171         \} \textcolor{keywordflow}{else} \{
172         otmp = obj;
173         \textcolor{keywordflow}{if} (otmp->\hyperlink{structobj_a7906e045755ba4099705764a4eb076c6}{owornmask})
174             remove\_worn\_item(otmp, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE});
175         \}
176         freeinv(otmp);
177         \hyperlink{dothrow_8c_a8be30f6b633e445567669d9d33a268b9}{throwit}(otmp, wep\_mask, twoweap);
178     \}
179     \hyperlink{decl_8h_a7f81da35e8b9f1f4bfd6c2e3255eba9a}{m\_shot}.\hyperlink{structmultishot_a62215723667a2eb09dd1203380b62f21}{n} = \hyperlink{decl_8h_a7f81da35e8b9f1f4bfd6c2e3255eba9a}{m\_shot}.\hyperlink{structmultishot_a16373f5f59db22df2bb5b29279c3ecc4}{i} = 0;
180     \hyperlink{decl_8h_a7f81da35e8b9f1f4bfd6c2e3255eba9a}{m\_shot}.\hyperlink{structmultishot_addd43be0e56011781a690bb29031f58e}{o} = STRANGE\_OBJECT;
181     \hyperlink{decl_8h_a7f81da35e8b9f1f4bfd6c2e3255eba9a}{m\_shot}.\hyperlink{structmultishot_acc85ac2a091e5aec36d1b5d308775ffe}{s} = \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
182 
183     \textcolor{keywordflow}{return} 1;
184 \}
\end{DoxyCode}
\hypertarget{dothrow_8c_a61f17732325303360ee2197078a891f8}{\index{dothrow.\+c@{dothrow.\+c}!throwing\+\_\+weapon@{throwing\+\_\+weapon}}
\index{throwing\+\_\+weapon@{throwing\+\_\+weapon}!dothrow.\+c@{dothrow.\+c}}
\subsubsection[{throwing\+\_\+weapon}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} {\bf boolean} throwing\+\_\+weapon (
\begin{DoxyParamCaption}
\item[{struct {\bf obj} $\ast$}]{obj}
\end{DoxyParamCaption}
)}}\label{dothrow_8c_a61f17732325303360ee2197078a891f8}


Definition at line 829 of file dothrow.\+c.



References is\+\_\+blade, is\+\_\+missile, is\+\_\+spear, is\+\_\+sword, objects, and P\+I\+E\+R\+C\+E.



Referenced by autoquiver(), thitmonst(), and throwit().


\begin{DoxyCode}
831 \{
832     \textcolor{keywordflow}{return} (\hyperlink{obj_8h_a8f997086cdf86ba7eb98102f6e7d4b90}{is\_missile}(obj) || \hyperlink{obj_8h_a4d68a7f098c241310fbc80ea8e29232a}{is\_spear}(obj) ||
833         \textcolor{comment}{/* daggers and knife (excludes scalpel) */}
834         (\hyperlink{obj_8h_ae095cd55314db1984d81e3b0103007ca}{is\_blade}(obj) && !\hyperlink{obj_8h_ae284b60ec8919e5fb325f5a7b39a093c}{is\_sword}(obj) &&
835          (\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp}].oc\_dir & \hyperlink{objclass_8h_a8c725b0c9ad0bc2c8fa7ed0f3138ef87}{PIERCE})) ||
836         \textcolor{comment}{/* special cases [might want to add AXE] */}
837         obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == WAR\_HAMMER || obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == AKLYS);
838 \}
\end{DoxyCode}
\hypertarget{dothrow_8c_a8be30f6b633e445567669d9d33a268b9}{\index{dothrow.\+c@{dothrow.\+c}!throwit@{throwit}}
\index{throwit@{throwit}!dothrow.\+c@{dothrow.\+c}}
\subsubsection[{throwit}]{\setlength{\rightskip}{0pt plus 5cm}void throwit (
\begin{DoxyParamCaption}
\item[{struct {\bf obj} $\ast$}]{obj, }
\item[{long}]{wep\+\_\+mask, }
\item[{{\bf boolean}}]{twoweap}
\end{DoxyParamCaption}
)}}\label{dothrow_8c_a8be30f6b633e445567669d9d33a268b9}


Definition at line 860 of file dothrow.\+c.



References A\+\_\+\+C\+O\+N, A\+\_\+\+D\+E\+X, A\+C\+U\+R\+R\+S\+T\+R, ammo\+\_\+and\+\_\+launcher, A\+R\+M, bhitpos, Blind, breakmsg(), breakobj(), breaktest(), cansee, check\+\_\+shop\+\_\+obj(), Confusion, container\+\_\+impact\+\_\+dmg(), delay\+\_\+output, D\+I\+S\+P\+\_\+\+E\+N\+D, D\+I\+S\+P\+\_\+\+F\+L\+A\+S\+H, drop\+\_\+ball(), you\+::dx, you\+::dy, you\+::dz, encumber\+\_\+msg(), F\+A\+L\+S\+E, F\+D\+E\+C\+L(), F\+O\+O\+T, Fumbling, G\+E\+M\+\_\+\+C\+L\+A\+S\+S, Hallucination, hitfloor(), hurtle(), index(), Is\+\_\+airlevel, is\+\_\+ammo, is\+\_\+pick, I\+S\+\_\+\+S\+O\+F\+T, Is\+\_\+waterlevel, K\+I\+L\+L\+E\+D\+\_\+\+B\+Y, K\+I\+L\+L\+E\+D\+\_\+\+B\+Y\+\_\+\+A\+N, Levitation, levl, m\+\_\+at, you\+::mh, you\+::mhmax, M\+O\+N\+S\+T\+\_\+\+P, monst\+::mx, monst\+::my, newsym(), O\+B\+J\+\_\+\+M\+I\+N\+V\+E\+N\+T, O\+B\+J\+\_\+\+P, obj\+\_\+to\+\_\+glyph, Role\+\_\+if, setuwep(), setworn(), ship\+\_\+object(), sho\+\_\+obj\+\_\+return\+\_\+to\+\_\+u(), S\+H\+O\+P\+B\+A\+S\+E, S\+L\+T\+\_\+\+E\+N\+C\+U\+M\+B\+E\+R, Something, Stunned, thitmonst(), throwing\+\_\+weapon(), T\+H\+R\+O\+W\+N\+\_\+\+W\+E\+A\+P\+O\+N, tmp\+\_\+at(), toss\+\_\+up(), T\+R\+U\+E, T\+T\+\_\+\+I\+N\+F\+L\+O\+O\+R, you\+::twoweap, u, uball, you\+::uhp, you\+::uhpmax, Underwater, Upolyd, you\+::ushops, you\+::ustuck, you\+::utrap, you\+::utraptype, uwep, you\+::ux, you\+::uy, you\+::uz, vision\+\_\+full\+\_\+recalc, coord\+::x, coord\+::y, and youmonst.



Referenced by throw\+\_\+obj().


\begin{DoxyCode}
864 \{
865     \textcolor{keyword}{register} \textcolor{keyword}{struct }\hyperlink{structmonst}{monst} *mon;
866     \textcolor{keyword}{register} \textcolor{keywordtype}{int} range, urange;
867     \textcolor{keywordtype}{boolean} impaired = (\hyperlink{youprop_8h_a85174462efda5cc2dc2a49a0249801bb}{Confusion} || \hyperlink{youprop_8h_afd7fdfec2109113244c347015bab4ad1}{Stunned} || \hyperlink{youprop_8h_a1b6e24068169af4177e15b48595c08c9}{Blind} ||
868                \hyperlink{youprop_8h_aa873f7ea0a3d096ef94ff651907f7a76}{Hallucination} || \hyperlink{youprop_8h_a10fa91003c3a9bc23959159d75d035c2}{Fumbling});
869 
870     \textcolor{keywordflow}{if} ((obj->cursed || obj->greased) && (\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a0b53da9e296cbebbc3dc2fc6ade21aeb}{dx} || \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a80d068cfe5c15ae06e6f152be40a716f}{dy}) && !rn2(7)) \{
871         \textcolor{keywordtype}{boolean} slipok = \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
872         \textcolor{keywordflow}{if} (\hyperlink{obj_8h_a766dc63537673239906c55a19f384b1d}{ammo\_and\_launcher}(obj, \hyperlink{decl_8h_a1aefaef88eef9075d8136d19410fd3b1}{uwep}))
873         pline(\textcolor{stringliteral}{"%s!"}, Tobjnam(obj, \textcolor{stringliteral}{"misfire"}));
874         \textcolor{keywordflow}{else} \{
875         \textcolor{comment}{/* only slip if it's greased or meant to be thrown */}
876         \textcolor{keywordflow}{if} (obj->greased || \hyperlink{dothrow_8c_a61f17732325303360ee2197078a891f8}{throwing\_weapon}(obj))
877             \textcolor{comment}{/* BUG: this message is grammatically incorrect if obj has}
878 \textcolor{comment}{               a plural name; greased gloves or boots for instance. */}
879             pline(\textcolor{stringliteral}{"%s as you throw it!"}, Tobjnam(obj, \textcolor{stringliteral}{"slip"}));
880         \textcolor{keywordflow}{else} slipok = \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
881         \}
882         \textcolor{keywordflow}{if} (slipok) \{
883         \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a0b53da9e296cbebbc3dc2fc6ade21aeb}{dx} = rn2(3)-1;
884         \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a80d068cfe5c15ae06e6f152be40a716f}{dy} = rn2(3)-1;
885         \textcolor{keywordflow}{if} (!\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a0b53da9e296cbebbc3dc2fc6ade21aeb}{dx} && !\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a80d068cfe5c15ae06e6f152be40a716f}{dy}) \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a3fa7dbf98dab7ca2c40195268174c45f}{dz} = 1;
886         impaired = \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
887         \}
888     \}
889 
890     \textcolor{keywordflow}{if} ((\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a0b53da9e296cbebbc3dc2fc6ade21aeb}{dx} || \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a80d068cfe5c15ae06e6f152be40a716f}{dy} || (\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a3fa7dbf98dab7ca2c40195268174c45f}{dz} < 1)) &&
891         calc\_capacity((\textcolor{keywordtype}{int})obj->\hyperlink{structobj_a606b1d5b273b814049cc1b1991adfeec}{owt}) > \hyperlink{hack_8h_ade4c50a25545e7ca7eba7d45383be984}{SLT\_ENCUMBER} &&
892         (\hyperlink{you_8h_ab869582031082f2c352b374dc0e0c3b3}{Upolyd} ? (\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a2106fda1b357aa3395703a3abff426f8}{mh} < 5 && \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a2106fda1b357aa3395703a3abff426f8}{mh} != \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ad0eb213f6299ffa1529fc7864003a044}{mhmax})
893          : (\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a94468a400f14da123d5160f8eefd7641}{uhp} < 10 && \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a94468a400f14da123d5160f8eefd7641}{uhp} != \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ade36670a142a7d38051c74740d02002b}{uhpmax})) &&
894         obj->\hyperlink{structobj_a606b1d5b273b814049cc1b1991adfeec}{owt} > (\textcolor{keywordtype}{unsigned})((\hyperlink{you_8h_ab869582031082f2c352b374dc0e0c3b3}{Upolyd} ? \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a2106fda1b357aa3395703a3abff426f8}{mh} : \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a94468a400f14da123d5160f8eefd7641}{uhp}) * 2) &&
895         !\hyperlink{dungeon_8h_a2d9a2dcb88ded033c3305c7798f81c24}{Is\_airlevel}(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz})) \{
896         You(\textcolor{stringliteral}{"have so little stamina, %s drops from your grasp."},
897         the(xname(obj)));
898         exercise(\hyperlink{attrib_8h_a82a29f9d3d2390f61fc68b2a352b5da3}{A\_CON}, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE});
899         \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a0b53da9e296cbebbc3dc2fc6ade21aeb}{dx} = \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a80d068cfe5c15ae06e6f152be40a716f}{dy} = 0;
900         \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a3fa7dbf98dab7ca2c40195268174c45f}{dz} = 1;
901     \}
902 
903     \hyperlink{dothrow_8c_a81c4c14978b086ed78464d7498963520}{thrownobj} = obj;
904 
905     \textcolor{keywordflow}{if}(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.uswallow) \{
906         mon = \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a774d4dad2da130ec9ed1d2e6c5e0fa80}{ustuck};
907         \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x} = mon->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx};
908         \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y} = mon->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my};
909     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a3fa7dbf98dab7ca2c40195268174c45f}{dz}) \{
910         \textcolor{keywordflow}{if} (\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a3fa7dbf98dab7ca2c40195268174c45f}{dz} < 0 && \hyperlink{you_8h_a6087f5b8605964c19078b777da740258}{Role\_if}(PM\_VALKYRIE) &&
911             obj->\hyperlink{structobj_af03ce8a6a0ca51e8d8954fb1a1a31fbe}{oartifact} == ART\_MJOLLNIR && !impaired) \{
912         pline(\textcolor{stringliteral}{"%s the %s and returns to your hand!"},
913               Tobjnam(obj, \textcolor{stringliteral}{"hit"}), ceiling(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux},\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy}));
914         obj = addinv(obj);
915         (void) \hyperlink{pickup_8c_aed29b02f27db47b69b5ef129bf56e102}{encumber\_msg}();
916         \hyperlink{wield_8c_adc7f46a6707f98835bb3c181d7ae1821}{setuwep}(obj);
917         \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ade2cee6956bba775aa796bba6ae857ec}{twoweap} = twoweap;
918         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a3fa7dbf98dab7ca2c40195268174c45f}{dz} < 0 && !\hyperlink{dungeon_8h_a2d9a2dcb88ded033c3305c7798f81c24}{Is\_airlevel}(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz}) &&
919             !\hyperlink{youprop_8h_a2eb59bdcba2c368fefd253bfcdaa3673}{Underwater} && !\hyperlink{dungeon_8h_a9fd7b21db47607a73332aa75ba8f4832}{Is\_waterlevel}(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz})) \{
920         (void) \hyperlink{dothrow_8c_ace8f8358501b66014585c75e183d9eae}{toss\_up}(obj, rn2(5));
921         \} \textcolor{keywordflow}{else} \{
922         \hyperlink{dothrow_8c_aa65e537e36073dedf0f33bad075f8d3c}{hitfloor}(obj);
923         \}
924         \hyperlink{dothrow_8c_a81c4c14978b086ed78464d7498963520}{thrownobj} = (\textcolor{keyword}{struct }obj*)0;
925         \textcolor{keywordflow}{return};
926 
927     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == BOOMERANG && !\hyperlink{youprop_8h_a2eb59bdcba2c368fefd253bfcdaa3673}{Underwater}) \{
928         \textcolor{keywordflow}{if}(\hyperlink{dungeon_8h_a2d9a2dcb88ded033c3305c7798f81c24}{Is\_airlevel}(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz}) || \hyperlink{youprop_8h_a3dbdc08291ccd1d6de010d72e4b180fb}{Levitation})
929             \hyperlink{dothrow_8c_a20d0289d24c19e2996a56be042014293}{hurtle}(-\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a0b53da9e296cbebbc3dc2fc6ade21aeb}{dx}, -\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a80d068cfe5c15ae06e6f152be40a716f}{dy}, 1, \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE});
930         mon = boomhit(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a0b53da9e296cbebbc3dc2fc6ade21aeb}{dx}, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a80d068cfe5c15ae06e6f152be40a716f}{dy});
931         \textcolor{keywordflow}{if}(mon == &\hyperlink{decl_8h_ad15893dbcb60e2777ae0dfac9f840858}{youmonst}) \{      \textcolor{comment}{/* the thing was caught */}
932             exercise(\hyperlink{attrib_8h_ad8117dfaac470310d7540a3e8dcc00e0}{A\_DEX}, \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE});
933             obj = addinv(obj);
934             (void) \hyperlink{pickup_8c_aed29b02f27db47b69b5ef129bf56e102}{encumber\_msg}();
935             \textcolor{keywordflow}{if} (wep\_mask && !(obj->\hyperlink{structobj_a7906e045755ba4099705764a4eb076c6}{owornmask} & wep\_mask)) \{
936                 \hyperlink{worn_8c_ae7018d12ec8662328050dfd7bd8dc903}{setworn}(obj, wep\_mask);
937                 \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ade2cee6956bba775aa796bba6ae857ec}{twoweap} = twoweap;
938             \}
939             \hyperlink{dothrow_8c_a81c4c14978b086ed78464d7498963520}{thrownobj} = (\textcolor{keyword}{struct }obj*)0;
940             \textcolor{keywordflow}{return};
941         \}
942     \} \textcolor{keywordflow}{else} \{
943         urange = (int)(\hyperlink{attrib_8h_a07133008845b3b4f8e36bf7c49c9046d}{ACURRSTR})/2;
944         \textcolor{comment}{/* balls are easy to throw or at least roll */}
945         \textcolor{comment}{/* also, this insures the maximum range of a ball is greater}
946 \textcolor{comment}{         * than 1, so the effects from throwing attached balls are}
947 \textcolor{comment}{         * actually possible}
948 \textcolor{comment}{         */}
949         \textcolor{keywordflow}{if} (obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == HEAVY\_IRON\_BALL)
950             range = urange - (int)(obj->\hyperlink{structobj_a606b1d5b273b814049cc1b1991adfeec}{owt}/100);
951         \textcolor{keywordflow}{else}
952             range = urange - (int)(obj->\hyperlink{structobj_a606b1d5b273b814049cc1b1991adfeec}{owt}/40);
953         \textcolor{keywordflow}{if} (obj == \hyperlink{decl_8h_a043dece512e3c566986d7cfabc52d05e}{uball}) \{
954             \textcolor{keywordflow}{if} (\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a774d4dad2da130ec9ed1d2e6c5e0fa80}{ustuck}) range = 1;
955             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (range >= 5) range = 5;
956         \}
957         \textcolor{keywordflow}{if} (range < 1) range = 1;
958 
959         \textcolor{keywordflow}{if} (\hyperlink{obj_8h_a17d7bf4a6f8336a314c0825cf5848c54}{is\_ammo}(obj)) \{
960             \textcolor{keywordflow}{if} (\hyperlink{obj_8h_a766dc63537673239906c55a19f384b1d}{ammo\_and\_launcher}(obj, \hyperlink{decl_8h_a1aefaef88eef9075d8136d19410fd3b1}{uwep}))
961             range++;
962             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (obj->\hyperlink{structobj_a716ba3ee00602dede9ea5c68c74d45bd}{oclass} != \hyperlink{objclass_8h_afc09c51ea922e9928f86a51177244796}{GEM\_CLASS})
963             range /= 2;
964         \}
965 
966         \textcolor{keywordflow}{if} (\hyperlink{dungeon_8h_a2d9a2dcb88ded033c3305c7798f81c24}{Is\_airlevel}(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz}) || \hyperlink{youprop_8h_a3dbdc08291ccd1d6de010d72e4b180fb}{Levitation}) \{
967             \textcolor{comment}{/* action, reaction... */}
968             urange -= range;
969             \textcolor{keywordflow}{if}(urange < 1) urange = 1;
970             range -= urange;
971             \textcolor{keywordflow}{if}(range < 1) range = 1;
972         \}
973 
974         \textcolor{keywordflow}{if} (obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == BOULDER)
975             range = 20;     \textcolor{comment}{/* you must be giant */}
976         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (obj->\hyperlink{structobj_af03ce8a6a0ca51e8d8954fb1a1a31fbe}{oartifact} == ART\_MJOLLNIR)
977             range = (range + 1) / 2;    \textcolor{comment}{/* it's heavy */}
978         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (obj == \hyperlink{decl_8h_a043dece512e3c566986d7cfabc52d05e}{uball} && \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a7250d3b13a54b76d846b754a2a6f3fa6}{utrap} && \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a1753632ed4b3b8dea40466c1c92fce19}{utraptype} == 
      \hyperlink{you_8h_a4e2d887e8b74f3d5a794cb08f126f676}{TT\_INFLOOR})
979             range = 1;
980 
981         \textcolor{keywordflow}{if} (\hyperlink{youprop_8h_a2eb59bdcba2c368fefd253bfcdaa3673}{Underwater}) range = 1;
982 
983         mon = bhit(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a0b53da9e296cbebbc3dc2fc6ade21aeb}{dx}, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a80d068cfe5c15ae06e6f152be40a716f}{dy}, range, \hyperlink{hack_8h_ab6f59807b4ebabad63374c2c91ccb4fa}{THROWN\_WEAPON},
984                (\textcolor{keywordtype}{int} \hyperlink{dothrow_8c_a060683cd287617dba3c5d46a4dada78e}{FDECL}((*),(\hyperlink{global_8h_a5ab67a0dcf1ab2e43fb100422af09f0d}{MONST\_P},\hyperlink{global_8h_a0b35ac15910ff1522ede7503fd6afe1c}{OBJ\_P})))0,
985                (\textcolor{keywordtype}{int} \hyperlink{dothrow_8c_a060683cd287617dba3c5d46a4dada78e}{FDECL}((*),(\hyperlink{global_8h_a0b35ac15910ff1522ede7503fd6afe1c}{OBJ\_P},\hyperlink{global_8h_a0b35ac15910ff1522ede7503fd6afe1c}{OBJ\_P})))0,
986                obj);
987 
988         \textcolor{comment}{/* have to do this after bhit() so u.ux & u.uy are correct */}
989         \textcolor{keywordflow}{if}(\hyperlink{dungeon_8h_a2d9a2dcb88ded033c3305c7798f81c24}{Is\_airlevel}(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz}) || \hyperlink{youprop_8h_a3dbdc08291ccd1d6de010d72e4b180fb}{Levitation})
990             \hyperlink{dothrow_8c_a20d0289d24c19e2996a56be042014293}{hurtle}(-\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a0b53da9e296cbebbc3dc2fc6ade21aeb}{dx}, -\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a80d068cfe5c15ae06e6f152be40a716f}{dy}, urange, \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE});
991     \}
992 
993     \textcolor{keywordflow}{if} (mon) \{
994         \textcolor{keywordtype}{boolean} obj\_gone;
995 
996         \textcolor{keywordflow}{if} (mon->isshk &&
997             obj->\hyperlink{structobj_a57f24060a7aa1c3d2fd02c1c550cb5c6}{where} == \hyperlink{obj_8h_a792736145f7692fad0785cb93f618e73}{OBJ\_MINVENT} && obj->ocarry == mon) \{
998             \hyperlink{dothrow_8c_a81c4c14978b086ed78464d7498963520}{thrownobj} = (\textcolor{keyword}{struct }obj*)0;
999             \textcolor{keywordflow}{return};     \textcolor{comment}{/* alert shk caught it */}
1000         \}
1001         (void) snuff\_candle(obj);
1002         \hyperlink{dothrow_8c_aa0fe2fdb5136cb5a8960dd3b1f24031a}{notonhead} = (\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x} != mon->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx} || \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y} != mon->
      \hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my});
1003         obj\_gone = \hyperlink{dothrow_8c_a0baeb9c5ae48bbe466b1884ee5517eef}{thitmonst}(mon, obj);
1004         \textcolor{comment}{/* Monster may have been tamed; this frees old mon */}
1005         mon = \hyperlink{rm_8h_a4d8dddf3df3fad65478980d2c8cbf53c}{m\_at}(\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x}, \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y});
1006 
1007         \textcolor{comment}{/* [perhaps this should be moved into thitmonst or hmon] */}
1008         \textcolor{keywordflow}{if} (mon && mon->isshk &&
1009             (!inside\_shop(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux}, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy}) ||
1010              !\hyperlink{uudecode_8c_ac82f3cc16110a05458f2b2483236afb7}{index}(in\_rooms(mon->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mon->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my}, \hyperlink{mkroom_8h_a925701a88c7ed0db502cfac9d8fbcf9e}{SHOPBASE}), *\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.
      \hyperlink{structyou_a1bc3b5ca1e5d9957ab3a7f451c069f47}{ushops})))
1011             hot\_pursuit(mon);
1012 
1013         \textcolor{keywordflow}{if} (obj\_gone) \textcolor{keywordflow}{return};
1014     \}
1015 
1016     \textcolor{keywordflow}{if} (\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.uswallow) \{
1017         \textcolor{comment}{/* ball is not picked up by monster */}
1018         \textcolor{keywordflow}{if} (obj != \hyperlink{decl_8h_a043dece512e3c566986d7cfabc52d05e}{uball}) (void) mpickobj(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a774d4dad2da130ec9ed1d2e6c5e0fa80}{ustuck},obj);
1019     \} \textcolor{keywordflow}{else} \{
1020         \textcolor{comment}{/* the code following might become part of dropy() */}
1021         \textcolor{keywordflow}{if} (obj->\hyperlink{structobj_af03ce8a6a0ca51e8d8954fb1a1a31fbe}{oartifact} == ART\_MJOLLNIR &&
1022             \hyperlink{you_8h_a6087f5b8605964c19078b777da740258}{Role\_if}(PM\_VALKYRIE) && rn2(100)) \{
1023             \textcolor{comment}{/* we must be wearing Gauntlets of Power to get here */}
1024             \hyperlink{dothrow_8c_a1252b75a6979fc66ac71229350e210e4}{sho\_obj\_return\_to\_u}(obj);        \textcolor{comment}{/* display its flight */}
1025 
1026             \textcolor{keywordflow}{if} (!impaired && rn2(100)) \{
1027             pline(\textcolor{stringliteral}{"%s to your hand!"}, Tobjnam(obj, \textcolor{stringliteral}{"return"}));
1028             obj = addinv(obj);
1029             (void) \hyperlink{pickup_8c_aed29b02f27db47b69b5ef129bf56e102}{encumber\_msg}();
1030             \hyperlink{wield_8c_adc7f46a6707f98835bb3c181d7ae1821}{setuwep}(obj);
1031             \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ade2cee6956bba775aa796bba6ae857ec}{twoweap} = twoweap;
1032             \textcolor{keywordflow}{if}(\hyperlink{vision_8h_a857efc720262bc13a9e4b4bcbb079b5c}{cansee}(\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x}, \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y}))
1033                 \hyperlink{display_8c_a185c6ad6e4c5a6be26a371b9aa17c32e}{newsym}(\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x},\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y});
1034             \} \textcolor{keywordflow}{else} \{
1035             \textcolor{keywordtype}{int} dmg = rn2(2);
1036             \textcolor{keywordflow}{if} (!dmg) \{
1037                 pline(\hyperlink{youprop_8h_a1b6e24068169af4177e15b48595c08c9}{Blind} ? \textcolor{stringliteral}{"%s lands %s your %s."} :
1038                     \textcolor{stringliteral}{"%s back to you, landing %s your %s."},
1039                   \hyperlink{youprop_8h_a1b6e24068169af4177e15b48595c08c9}{Blind} ? \hyperlink{decl_8h_a5d959c2baa129ffbf809d6ae5372adf5}{Something} : Tobjnam(obj, \textcolor{stringliteral}{"return"}),
1040                   \hyperlink{youprop_8h_a3dbdc08291ccd1d6de010d72e4b180fb}{Levitation} ? \textcolor{stringliteral}{"beneath"} : \textcolor{stringliteral}{"at"},
1041                   makeplural(body\_part(\hyperlink{hack_8h_a9b1eabef4c7711550544eaeaa8f41fa1}{FOOT})));
1042             \} \textcolor{keywordflow}{else} \{
1043                 dmg += rnd(3);
1044                 pline(\hyperlink{youprop_8h_a1b6e24068169af4177e15b48595c08c9}{Blind} ? \textcolor{stringliteral}{"%s your %s!"} :
1045                     \textcolor{stringliteral}{"%s back toward you, hitting your %s!"},
1046                   Tobjnam(obj, \hyperlink{youprop_8h_a1b6e24068169af4177e15b48595c08c9}{Blind} ? \textcolor{stringliteral}{"hit"} : \textcolor{stringliteral}{"fly"}),
1047                   body\_part(\hyperlink{hack_8h_ac3b52e3cce0aee40e79cc75cdf46019d}{ARM}));
1048                 (void) artifact\_hit((\textcolor{keyword}{struct} \hyperlink{structmonst}{monst} *)0,
1049                         &\hyperlink{decl_8h_ad15893dbcb60e2777ae0dfac9f840858}{youmonst}, obj, &dmg, 0);
1050                 losehp(dmg, xname(obj),
1051                 obj\_is\_pname(obj) ? \hyperlink{decl_8h_a0b77d6f094070ee1d9900156357f6f62}{KILLED\_BY} : \hyperlink{decl_8h_af4e54910b730baa32b2dfbe4dd2942c1}{KILLED\_BY\_AN});
1052             \}
1053             \textcolor{keywordflow}{if} (\hyperlink{dokick_8c_a2e6ad173412ab80036782184f3749286}{ship\_object}(obj, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux}, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy}, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE})) \{
1054                     \hyperlink{dothrow_8c_a81c4c14978b086ed78464d7498963520}{thrownobj} = (\textcolor{keyword}{struct }obj*)0;
1055                 \textcolor{keywordflow}{return};
1056             \}
1057             dropy(obj);
1058             \}
1059             \hyperlink{dothrow_8c_a81c4c14978b086ed78464d7498963520}{thrownobj} = (\textcolor{keyword}{struct }obj*)0;
1060             \textcolor{keywordflow}{return};
1061         \}
1062 
1063         \textcolor{keywordflow}{if} (!\hyperlink{rm_8h_ae65f64628cbd8aa997f35f8dd21c6def}{IS\_SOFT}(\hyperlink{rm_8h_a8cd681fba60fdedbabfd71a0b4bbfc00}{levl}[\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x}][\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y}].typ) &&
1064             \hyperlink{dothrow_8c_ace740cf113a1ab7d0370990900d94e03}{breaktest}(obj)) \{
1065             \hyperlink{display_8c_a0567746aec3aa9a3e8075d8eabb29846}{tmp\_at}(\hyperlink{display_8h_a34b949cb0446b7600233da12c14f5e52}{DISP\_FLASH}, \hyperlink{display_8h_a14ef77de0b1bfde06713088d7d9f53e8}{obj\_to\_glyph}(obj));
1066             \hyperlink{display_8c_a0567746aec3aa9a3e8075d8eabb29846}{tmp\_at}(\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x}, \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y});
1067             \hyperlink{winprocs_8h_a52ac0892dec99e42da526fda2126d9e9}{delay\_output}();
1068             \hyperlink{display_8c_a0567746aec3aa9a3e8075d8eabb29846}{tmp\_at}(\hyperlink{display_8h_a6b799a763b3dbf2977bfe7c90951ab53}{DISP\_END}, 0);
1069             \hyperlink{dothrow_8c_a2eb51c280cad12050b4a586e6b9285a6}{breakmsg}(obj, \hyperlink{vision_8h_a857efc720262bc13a9e4b4bcbb079b5c}{cansee}(\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x}, \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.
      \hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y}));
1070             \hyperlink{dothrow_8c_a784726af6e3943f1f3834371d037050b}{breakobj}(obj, \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x}, \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y}, \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE}, 
      \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE});
1071             \textcolor{keywordflow}{return};
1072         \}
1073         \textcolor{keywordflow}{if}(flooreffects(obj,\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x},\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y},\textcolor{stringliteral}{"fall"})) \textcolor{keywordflow}{return};
1074         obj\_no\_longer\_held(obj);
1075         \textcolor{keywordflow}{if} (mon && mon->isshk && \hyperlink{obj_8h_a260a5afdeeb55f7207d5db68ae939e21}{is\_pick}(obj)) \{
1076             \textcolor{keywordflow}{if} (\hyperlink{vision_8h_a857efc720262bc13a9e4b4bcbb079b5c}{cansee}(\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x}, \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y}))
1077             pline(\textcolor{stringliteral}{"%s snatches up %s."},
1078                   Monnam(mon), the(xname(obj)));
1079             \textcolor{keywordflow}{if}(*\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a1bc3b5ca1e5d9957ab3a7f451c069f47}{ushops})
1080             \hyperlink{dothrow_8c_af5cc3d590b41c3cabf70b1c76824c56b}{check\_shop\_obj}(obj, \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x}, \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.
      \hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y}, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE});
1081             (void) mpickobj(mon, obj);  \textcolor{comment}{/* may merge and free obj */}
1082             \hyperlink{dothrow_8c_a81c4c14978b086ed78464d7498963520}{thrownobj} = (\textcolor{keyword}{struct }obj*)0;
1083             \textcolor{keywordflow}{return};
1084         \}
1085         (void) snuff\_candle(obj);
1086         \textcolor{keywordflow}{if} (!mon && \hyperlink{dokick_8c_a2e6ad173412ab80036782184f3749286}{ship\_object}(obj, \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x}, \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.
      \hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y}, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE})) \{
1087             \hyperlink{dothrow_8c_a81c4c14978b086ed78464d7498963520}{thrownobj} = (\textcolor{keyword}{struct }obj*)0;
1088             \textcolor{keywordflow}{return};
1089         \}
1090         \hyperlink{dothrow_8c_a81c4c14978b086ed78464d7498963520}{thrownobj} = (\textcolor{keyword}{struct }obj*)0;
1091         place\_object(obj, \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x}, \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y});
1092         \textcolor{keywordflow}{if}(*\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a1bc3b5ca1e5d9957ab3a7f451c069f47}{ushops} && obj != \hyperlink{decl_8h_a043dece512e3c566986d7cfabc52d05e}{uball})
1093             \hyperlink{dothrow_8c_af5cc3d590b41c3cabf70b1c76824c56b}{check\_shop\_obj}(obj, \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x}, \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.
      \hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y}, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE});
1094 
1095         stackobj(obj);
1096         \textcolor{keywordflow}{if} (obj == \hyperlink{decl_8h_a043dece512e3c566986d7cfabc52d05e}{uball})
1097             \hyperlink{ball_8c_aad9708ae772d6f726d3d7520ec81ac9b}{drop\_ball}(\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x}, \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y});
1098         \textcolor{keywordflow}{if} (\hyperlink{vision_8h_a857efc720262bc13a9e4b4bcbb079b5c}{cansee}(\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x}, \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y}))
1099             \hyperlink{display_8c_a185c6ad6e4c5a6be26a371b9aa17c32e}{newsym}(\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x},\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y});
1100         \textcolor{keywordflow}{if} (obj\_sheds\_light(obj))
1101             \hyperlink{decl_8h_aac4610a050d8202c4412482d90630808}{vision\_full\_recalc} = 1;
1102         \textcolor{keywordflow}{if} (!\hyperlink{rm_8h_ae65f64628cbd8aa997f35f8dd21c6def}{IS\_SOFT}(\hyperlink{rm_8h_a8cd681fba60fdedbabfd71a0b4bbfc00}{levl}[\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x}][\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y}].typ))
1103             \hyperlink{dokick_8c_abbf1fcb9f654139ebd166ec64d3706b3}{container\_impact\_dmg}(obj);
1104     \}
1105 \}
\end{DoxyCode}
\hypertarget{dothrow_8c_a3b65efcc0f60a81c1c3059701eb64e47}{\index{dothrow.\+c@{dothrow.\+c}!tmiss@{tmiss}}
\index{tmiss@{tmiss}!dothrow.\+c@{dothrow.\+c}}
\subsubsection[{tmiss}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} void tmiss (
\begin{DoxyParamCaption}
\item[{struct {\bf obj} $\ast$}]{obj, }
\item[{struct {\bf monst} $\ast$}]{mon}
\end{DoxyParamCaption}
)}}\label{dothrow_8c_a3b65efcc0f60a81c1c3059701eb64e47}


Definition at line 1150 of file dothrow.\+c.



References canseemon, M\+\_\+\+A\+P\+\_\+\+M\+O\+N\+S\+T\+E\+R, and monst\+::m\+\_\+ap\+\_\+type.



Referenced by thitmonst().


\begin{DoxyCode}
1153 \{
1154     \textcolor{keyword}{const} \textcolor{keywordtype}{char} *missile = mshot\_xname(obj);
1155 
1156     \textcolor{comment}{/* If the target can't be seen or doesn't look like a valid target,}
1157 \textcolor{comment}{       avoid "the arrow misses it," or worse, "the arrows misses the mimic."}
1158 \textcolor{comment}{       An attentive player will still notice that this is different from}
1159 \textcolor{comment}{       an arrow just landing short of any target (no message in that case),}
1160 \textcolor{comment}{       so will realize that there is a valid target here anyway. */}
1161     \textcolor{keywordflow}{if} (!\hyperlink{display_8h_ad75e04a9624fe7ba0e1715ae3a3feb27}{canseemon}(mon) || (mon->\hyperlink{structmonst_aab8fc9a0be90b4db8333b09487e2620c}{m\_ap\_type} && mon->\hyperlink{structmonst_aab8fc9a0be90b4db8333b09487e2620c}{m\_ap\_type} != 
      \hyperlink{monst_8h_ac3674020cb0ffbb50a783e53e76e21f4}{M\_AP\_MONSTER}))
1162     pline(\textcolor{stringliteral}{"%s %s."}, The(missile), otense(obj, \textcolor{stringliteral}{"miss"}));
1163     \textcolor{keywordflow}{else}
1164     miss(missile, mon);
1165     \textcolor{keywordflow}{if} (!rn2(3)) wakeup(mon);
1166     \textcolor{keywordflow}{return};
1167 \}
\end{DoxyCode}
\hypertarget{dothrow_8c_ace8f8358501b66014585c75e183d9eae}{\index{dothrow.\+c@{dothrow.\+c}!toss\+\_\+up@{toss\+\_\+up}}
\index{toss\+\_\+up@{toss\+\_\+up}!dothrow.\+c@{dothrow.\+c}}
\subsubsection[{toss\+\_\+up}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} {\bf boolean} toss\+\_\+up (
\begin{DoxyParamCaption}
\item[{struct {\bf obj} $\ast$}]{obj, }
\item[{{\bf boolean}}]{hitsroof}
\end{DoxyParamCaption}
)}}\label{dothrow_8c_ace8f8358501b66014585c75e183d9eae}


Definition at line 722 of file dothrow.\+c.



References A\+T\+\_\+\+W\+E\+A\+P, Blind, Blinded, breakmsg(), breakobj(), breaktest(), monst\+::data, done, F\+A\+C\+E, F\+A\+L\+S\+E, flags, Half\+\_\+physical\+\_\+damage, H\+E\+A\+D, hitfloor(), is\+\_\+metallic, K\+I\+L\+L\+E\+D\+\_\+\+B\+Y, K\+I\+L\+L\+E\+D\+\_\+\+B\+Y\+\_\+\+A\+N, killer, killer\+\_\+format, you\+::mh, mons, objects, P\+O\+T\+I\+O\+N\+\_\+\+C\+L\+A\+S\+S, rn1, S\+I\+L\+V\+E\+R, Stone\+\_\+resistance, S\+T\+O\+N\+I\+N\+G, touch\+\_\+petrifies, T\+R\+U\+E, u, uarmh, you\+::ucreamed, you\+::udaminc, you\+::uhp, Upolyd, you\+::ux, you\+::uy, flag\+::verbose, vision\+\_\+clears, and youmonst.



Referenced by throwit().


\begin{DoxyCode}
725 \{
726     \textcolor{keyword}{const} \textcolor{keywordtype}{char} *almost;
727     \textcolor{comment}{/* note: obj->quan == 1 */}
728 
729     \textcolor{keywordflow}{if} (hitsroof) \{
730     \textcolor{keywordflow}{if} (\hyperlink{dothrow_8c_ace740cf113a1ab7d0370990900d94e03}{breaktest}(obj)) \{
731         pline(\textcolor{stringliteral}{"%s hits the %s."}, Doname2(obj), ceiling(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux}, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy}));
732         \hyperlink{dothrow_8c_a2eb51c280cad12050b4a586e6b9285a6}{breakmsg}(obj, !\hyperlink{youprop_8h_a1b6e24068169af4177e15b48595c08c9}{Blind});
733         \hyperlink{dothrow_8c_a784726af6e3943f1f3834371d037050b}{breakobj}(obj, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux}, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy}, \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE}, \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE});
734         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
735     \}
736     almost = \textcolor{stringliteral}{""};
737     \} \textcolor{keywordflow}{else} \{
738     almost = \textcolor{stringliteral}{" almost"};
739     \}
740     pline(\textcolor{stringliteral}{"%s%s hits the %s, then falls back on top of your %s."},
741       Doname2(obj), almost, ceiling(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux},\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy}), body\_part(\hyperlink{hack_8h_a110f3b6cdacd45daee818b3e5965f6da}{HEAD}));
742 
743     \textcolor{comment}{/* object now hits you */}
744 
745     \textcolor{keywordflow}{if} (obj->\hyperlink{structobj_a716ba3ee00602dede9ea5c68c74d45bd}{oclass} == \hyperlink{objclass_8h_a05335e5ee18dfa33af1c40056fe8fab9}{POTION\_CLASS}) \{
746     potionhit(&\hyperlink{decl_8h_ad15893dbcb60e2777ae0dfac9f840858}{youmonst}, obj, \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE});
747     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{dothrow_8c_ace740cf113a1ab7d0370990900d94e03}{breaktest}(obj)) \{
748     \textcolor{keywordtype}{int} \hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} = obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp}, ocorpsenm = obj->\hyperlink{structobj_ad5db7220e2b815d06c3c80027ab9924f}{corpsenm};
749     \textcolor{keywordtype}{int} blindinc;
750 
751     \textcolor{comment}{/* need to check for blindness result prior to destroying obj */}
752     blindinc = (otyp == CREAM\_PIE || otyp == BLINDING\_VENOM) &&
753            \textcolor{comment}{/* AT\_WEAP is ok here even if attack type was AT\_SPIT */}
754            can\_blnd(&\hyperlink{decl_8h_ad15893dbcb60e2777ae0dfac9f840858}{youmonst}, &\hyperlink{decl_8h_ad15893dbcb60e2777ae0dfac9f840858}{youmonst}, \hyperlink{monattk_8h_a6db6784344c2424d385f6b460f0c029f}{AT\_WEAP}, obj) ? rnd(25) : 0;
755 
756     \hyperlink{dothrow_8c_a2eb51c280cad12050b4a586e6b9285a6}{breakmsg}(obj, !\hyperlink{youprop_8h_a1b6e24068169af4177e15b48595c08c9}{Blind});
757     \hyperlink{dothrow_8c_a784726af6e3943f1f3834371d037050b}{breakobj}(obj, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux}, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy}, \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE}, \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE});
758     obj = 0;    \textcolor{comment}{/* it's now gone */}
759     \textcolor{keywordflow}{switch} (otyp) \{
760     \textcolor{keywordflow}{case} EGG:
761         \textcolor{keywordflow}{if} (\hyperlink{mondata_8h_ad1e85e493d27cdfdbe94c43710c4b191}{touch\_petrifies}(&\hyperlink{permonst_8h_ab96e7c4682ea5ae4f83339a15c06f676}{mons}[ocorpsenm]) &&
762             !\hyperlink{decl_8h_a5990ad491dff32418089ab967be227a5}{uarmh} && !\hyperlink{youprop_8h_a90b638323d50e1f8d52d4a9576d90551}{Stone\_resistance} &&
763             !(poly\_when\_stoned(\hyperlink{decl_8h_ad15893dbcb60e2777ae0dfac9f840858}{youmonst}.\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}) && polymon(PM\_STONE\_GOLEM)))
764         \textcolor{keywordflow}{goto} petrify;
765     \textcolor{keywordflow}{case} CREAM\_PIE:
766     \textcolor{keywordflow}{case} BLINDING\_VENOM:
767         pline(\textcolor{stringliteral}{"You've got it all over your %s!"}, body\_part(\hyperlink{hack_8h_a8cec063149d793579c0e9d0b992b9fd0}{FACE}));
768         \textcolor{keywordflow}{if} (blindinc) \{
769             \textcolor{keywordflow}{if} (otyp == BLINDING\_VENOM && !\hyperlink{youprop_8h_a1b6e24068169af4177e15b48595c08c9}{Blind})
770             pline(\textcolor{stringliteral}{"It blinds you!"});
771             \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8a8bfe7cf93acf5795d7d7fdfbc5ef40}{ucreamed} += blindinc;
772             make\_blinded(\hyperlink{youprop_8h_a769ae4ea1360ffb2b8b4679bd129db09}{Blinded} + (\textcolor{keywordtype}{long})blindinc, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE});
773             \textcolor{keywordflow}{if} (!\hyperlink{youprop_8h_a1b6e24068169af4177e15b48595c08c9}{Blind}) Your(\hyperlink{decl_8h_afc711d0b47c16d911b717d063b8dec60}{vision\_clears});
774         \}
775         \textcolor{keywordflow}{break};
776     \textcolor{keywordflow}{default}:
777         \textcolor{keywordflow}{break};
778     \}
779     \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
780     \} \textcolor{keywordflow}{else} \{        \textcolor{comment}{/* neither potion nor other breaking object */}
781     \textcolor{keywordtype}{boolean} less\_damage = \hyperlink{decl_8h_a5990ad491dff32418089ab967be227a5}{uarmh} && \hyperlink{objclass_8h_a5134e0e0a63a108b16f212e15a97fc1a}{is\_metallic}(\hyperlink{decl_8h_a5990ad491dff32418089ab967be227a5}{uarmh}), artimsg = 
      \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
782     \textcolor{keywordtype}{int} dmg = dmgval(obj, &\hyperlink{decl_8h_ad15893dbcb60e2777ae0dfac9f840858}{youmonst});
783 
784     \textcolor{keywordflow}{if} (obj->\hyperlink{structobj_af03ce8a6a0ca51e8d8954fb1a1a31fbe}{oartifact})
785         \textcolor{comment}{/* need a fake die roll here; rn1(18,2) avoids 1 and 20 */}
786         artimsg = artifact\_hit((\textcolor{keyword}{struct} \hyperlink{structmonst}{monst} *)0, &\hyperlink{decl_8h_ad15893dbcb60e2777ae0dfac9f840858}{youmonst},
787                    obj, &dmg, \hyperlink{hack_8h_af107ca092682647f298989038020f9c8}{rn1}(18,2));
788 
789     \textcolor{keywordflow}{if} (!dmg) \{ \textcolor{comment}{/* probably wasn't a weapon; base damage on weight */}
790         dmg = (int) obj->\hyperlink{structobj_a606b1d5b273b814049cc1b1991adfeec}{owt} / 100;
791         if (dmg < 1) dmg = 1;
792         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (dmg > 6) dmg = 6;
793         \textcolor{keywordflow}{if} (\hyperlink{decl_8h_ad15893dbcb60e2777ae0dfac9f840858}{youmonst}.\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data} == &\hyperlink{permonst_8h_ab96e7c4682ea5ae4f83339a15c06f676}{mons}[PM\_SHADE] &&
794             \hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp}].oc\_material != \hyperlink{objclass_8h_a7e76a14a479114a4b9b20782bb00e69a}{SILVER})
795         dmg = 0;
796     \}
797     \textcolor{keywordflow}{if} (dmg > 1 && less\_damage) dmg = 1;
798     \textcolor{keywordflow}{if} (dmg > 0) dmg += \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ae7c0602a1e4514ff0f22039746957799}{udaminc};
799     \textcolor{keywordflow}{if} (dmg < 0) dmg = 0;   \textcolor{comment}{/* beware negative rings of increase damage */}
800     \textcolor{keywordflow}{if} (\hyperlink{youprop_8h_a5fc206bd0d8714595b57ebade21d4757}{Half\_physical\_damage}) dmg = (dmg + 1) / 2;
801 
802     \textcolor{keywordflow}{if} (\hyperlink{decl_8h_a5990ad491dff32418089ab967be227a5}{uarmh}) \{
803         \textcolor{keywordflow}{if} (less\_damage && dmg < (\hyperlink{you_8h_ab869582031082f2c352b374dc0e0c3b3}{Upolyd} ? \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a2106fda1b357aa3395703a3abff426f8}{mh} : \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a94468a400f14da123d5160f8eefd7641}{uhp})) \{
804         \textcolor{keywordflow}{if} (!artimsg)
805             pline(\textcolor{stringliteral}{"Fortunately, you are wearing a hard helmet."});
806         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_afd7dfe45d35356d861ab5e9834231929}{verbose} &&
807             !(obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == CORPSE && \hyperlink{mondata_8h_ad1e85e493d27cdfdbe94c43710c4b191}{touch\_petrifies}(&\hyperlink{permonst_8h_ab96e7c4682ea5ae4f83339a15c06f676}{mons}[obj->
      \hyperlink{structobj_ad5db7220e2b815d06c3c80027ab9924f}{corpsenm}])))
808         Your(\textcolor{stringliteral}{"%s does not protect you."}, xname(\hyperlink{decl_8h_a5990ad491dff32418089ab967be227a5}{uarmh}));
809     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == CORPSE && \hyperlink{mondata_8h_ad1e85e493d27cdfdbe94c43710c4b191}{touch\_petrifies}(&\hyperlink{permonst_8h_ab96e7c4682ea5ae4f83339a15c06f676}{mons}[obj->
      \hyperlink{structobj_ad5db7220e2b815d06c3c80027ab9924f}{corpsenm}])) \{
810         \textcolor{keywordflow}{if} (!\hyperlink{youprop_8h_a90b638323d50e1f8d52d4a9576d90551}{Stone\_resistance} &&
811             !(poly\_when\_stoned(\hyperlink{decl_8h_ad15893dbcb60e2777ae0dfac9f840858}{youmonst}.\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}) && polymon(PM\_STONE\_GOLEM))) \{
812  petrify:
813         \hyperlink{decl_8h_a0a94810d03a0bf68b371c6b1a1a4a905}{killer\_format} = \hyperlink{decl_8h_a0b77d6f094070ee1d9900156357f6f62}{KILLED\_BY};
814         \hyperlink{decl_8h_af7d2dea3996fe6d20ea8ec329726e8f9}{killer} = \textcolor{stringliteral}{"elementary physics"};    \textcolor{comment}{/* "what goes up..." */}
815         You(\textcolor{stringliteral}{"turn to stone."});
816         \textcolor{keywordflow}{if} (obj) dropy(obj);    \textcolor{comment}{/* bypass most of hitfloor() */}
817         \hyperlink{winX_8c_a032589f4f70300762622fd253db008d0}{done}(\hyperlink{hack_8h_aac5555456695094b0171cb7f67e0b5f7}{STONING});
818         \textcolor{keywordflow}{return} obj ? \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE} : \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
819         \}
820     \}
821     \hyperlink{dothrow_8c_aa65e537e36073dedf0f33bad075f8d3c}{hitfloor}(obj);
822     losehp(dmg, \textcolor{stringliteral}{"falling object"}, \hyperlink{decl_8h_af4e54910b730baa32b2dfbe4dd2942c1}{KILLED\_BY\_AN});
823     \}
824     \textcolor{keywordflow}{return} \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
825 \}
\end{DoxyCode}
\hypertarget{dothrow_8c_a41c191c1d9404247b99b3d4921e683b0}{\index{dothrow.\+c@{dothrow.\+c}!walk\+\_\+path@{walk\+\_\+path}}
\index{walk\+\_\+path@{walk\+\_\+path}!dothrow.\+c@{dothrow.\+c}}
\subsubsection[{walk\+\_\+path}]{\setlength{\rightskip}{0pt plus 5cm}{\bf boolean} walk\+\_\+path (
\begin{DoxyParamCaption}
\item[{{\bf coord} $\ast$}]{src\+\_\+cc, }
\item[{{\bf coord} $\ast$}]{dest\+\_\+cc, }
\item[{check\+\_\+proc}]{, }
\item[{{\bf genericptr\+\_\+t}}]{arg}
\end{DoxyParamCaption}
)}}\label{dothrow_8c_a41c191c1d9404247b99b3d4921e683b0}


Definition at line 363 of file dothrow.\+c.



References F\+A\+L\+S\+E, T\+R\+U\+E, coord\+::x, and coord\+::y.



Referenced by hurtle(), and mhurtle().


\begin{DoxyCode}
368 \{
369     \textcolor{keywordtype}{int} x, y, dx, dy, x\_change, y\_change, err, i, prev\_x, prev\_y;
370     \textcolor{keywordtype}{boolean} keep\_going = \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
371 
372     \textcolor{comment}{/* Use Bresenham's Line Algorithm to walk from src to dest */}
373     dx = dest\_cc->\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x} - src\_cc->\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x};
374     dy = dest\_cc->\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y} - src\_cc->\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y};
375     prev\_x = x = src\_cc->\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x};
376     prev\_y = y = src\_cc->\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y};
377 
378     \textcolor{keywordflow}{if} (dx < 0) \{
379     x\_change = -1;
380     dx = -dx;
381     \} \textcolor{keywordflow}{else}
382     x\_change = 1;
383     \textcolor{keywordflow}{if} (dy < 0) \{
384     y\_change = -1;
385     dy = -dy;
386     \} \textcolor{keywordflow}{else}
387     y\_change = 1;
388 
389     i = err = 0;
390     \textcolor{keywordflow}{if} (dx < dy) \{
391     \textcolor{keywordflow}{while} (i++ < dy) \{
392         prev\_x = x;
393         prev\_y = y;
394         y += y\_change;
395         err += dx;
396         \textcolor{keywordflow}{if} (err >= dy) \{
397         x += x\_change;
398         err -= dy;
399         \}
400     \textcolor{comment}{/* check for early exit condition */}
401     \textcolor{keywordflow}{if} (!(keep\_going = (*check\_proc)(arg, x, y)))
402         \textcolor{keywordflow}{break};
403     \}
404     \} \textcolor{keywordflow}{else} \{
405     \textcolor{keywordflow}{while} (i++ < dx) \{
406         prev\_x = x;
407         prev\_y = y;
408         x += x\_change;
409         err += dy;
410         \textcolor{keywordflow}{if} (err >= dx) \{
411         y += y\_change;
412         err -= dx;
413         \}
414     \textcolor{comment}{/* check for early exit condition */}
415     \textcolor{keywordflow}{if} (!(keep\_going = (*check\_proc)(arg, x, y)))
416         \textcolor{keywordflow}{break};
417     \}
418     \}
419 
420     \textcolor{keywordflow}{if} (keep\_going)
421     \textcolor{keywordflow}{return} \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};    \textcolor{comment}{/* successful */}
422 
423     dest\_cc->\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x} = prev\_x;
424     dest\_cc->\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y} = prev\_y;
425     \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
426 \}
\end{DoxyCode}


\subsection{Variable Documentation}
\hypertarget{dothrow_8c_ad584c47d7d93295295d130a80f2fc309}{\index{dothrow.\+c@{dothrow.\+c}!bullets@{bullets}}
\index{bullets@{bullets}!dothrow.\+c@{dothrow.\+c}}
\subsubsection[{bullets}]{\setlength{\rightskip}{0pt plus 5cm}{\bf N\+E\+A\+R\+D\+A\+T\+A} {\bf const} char bullets\mbox{[}$\,$\mbox{]}\hspace{0.3cm}{\ttfamily [static]}}}\label{dothrow_8c_ad584c47d7d93295295d130a80f2fc309}
{\bfseries Initial value\+:}
\begin{DoxyCode}
=
    \{ \hyperlink{objclass_8h_abd8b46543ca6180ca0d0e2e318831529}{ALLOW\_COUNT}, \hyperlink{objclass_8h_a2999621925083659147349e261e4cb3d}{COIN\_CLASS}, \hyperlink{objclass_8h_a6ec43df3638569a3e63d44058318540a}{ALL\_CLASSES}, 
      \hyperlink{objclass_8h_afc09c51ea922e9928f86a51177244796}{GEM\_CLASS}, 0 \}
\end{DoxyCode}


Definition at line 27 of file dothrow.\+c.

\hypertarget{dothrow_8c_aa0fe2fdb5136cb5a8960dd3b1f24031a}{\index{dothrow.\+c@{dothrow.\+c}!notonhead@{notonhead}}
\index{notonhead@{notonhead}!dothrow.\+c@{dothrow.\+c}}
\subsubsection[{notonhead}]{\setlength{\rightskip}{0pt plus 5cm}{\bf boolean} notonhead}}\label{dothrow_8c_aa0fe2fdb5136cb5a8960dd3b1f24031a}
\hypertarget{dothrow_8c_a81c4c14978b086ed78464d7498963520}{\index{dothrow.\+c@{dothrow.\+c}!thrownobj@{thrownobj}}
\index{thrownobj@{thrownobj}!dothrow.\+c@{dothrow.\+c}}
\subsubsection[{thrownobj}]{\setlength{\rightskip}{0pt plus 5cm}struct {\bf obj}$\ast$ thrownobj = 0}}\label{dothrow_8c_a81c4c14978b086ed78464d7498963520}


Definition at line 30 of file dothrow.\+c.

\hypertarget{dothrow_8c_a07739e88125b97623e21cef9a3515885}{\index{dothrow.\+c@{dothrow.\+c}!toss\+\_\+objs@{toss\+\_\+objs}}
\index{toss\+\_\+objs@{toss\+\_\+objs}!dothrow.\+c@{dothrow.\+c}}
\subsubsection[{toss\+\_\+objs}]{\setlength{\rightskip}{0pt plus 5cm}{\bf N\+E\+A\+R\+D\+A\+T\+A} {\bf const} char toss\+\_\+objs\mbox{[}$\,$\mbox{]}\hspace{0.3cm}{\ttfamily [static]}}}\label{dothrow_8c_a07739e88125b97623e21cef9a3515885}
{\bfseries Initial value\+:}
\begin{DoxyCode}
=
    \{ \hyperlink{objclass_8h_abd8b46543ca6180ca0d0e2e318831529}{ALLOW\_COUNT}, \hyperlink{objclass_8h_a2999621925083659147349e261e4cb3d}{COIN\_CLASS}, \hyperlink{objclass_8h_a6ec43df3638569a3e63d44058318540a}{ALL\_CLASSES}, 
      \hyperlink{objclass_8h_a615c2dc6d3501d6b5e14c3373bc37ec1}{WEAPON\_CLASS}, 0 \}
\end{DoxyCode}


Definition at line 24 of file dothrow.\+c.

