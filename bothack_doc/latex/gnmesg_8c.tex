\hypertarget{gnmesg_8c}{\section{nethack/win/gnome/gnmesg.c File Reference}
\label{gnmesg_8c}\index{nethack/win/gnome/gnmesg.\+c@{nethack/win/gnome/gnmesg.\+c}}
}
{\ttfamily \#include \char`\"{}gnmesg.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}gnsignal.\+h\char`\"{}}\\*
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{gnmesg_8c_a9f0c0aeebc254a3a933790359e98f632}{n\+Chars\+Before\+Deleting\+Stuff}~3200
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{gnmesg_8c_ada85626d0819fa3ccecda36132e20157}{ghack\+\_\+message\+\_\+window\+\_\+clear} (Gtk\+Widget $\ast$widget, gpointer data)
\item 
void \hyperlink{gnmesg_8c_a45b839b293215fe9b64f77ec2140ce62}{ghack\+\_\+message\+\_\+window\+\_\+destroy} (Gtk\+Widget $\ast$win, gpointer data)
\item 
void \hyperlink{gnmesg_8c_a9bd5d10d3a61cb70dd02a3a17b8ffdaa}{ghack\+\_\+message\+\_\+window\+\_\+display} (Gtk\+Widget $\ast$widget, \hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} block, gpointer data)
\item 
void \hyperlink{gnmesg_8c_ab1ae55c19d9e5cd3a477a1b3f0f9c282}{ghack\+\_\+message\+\_\+window\+\_\+put\+\_\+string} (Gtk\+Widget $\ast$widget, int attr, \hyperlink{tradstdc_8h_a2c212835823e3c54a8ab6d95c652660e}{const} char $\ast$text, gpointer data)
\item 
void \hyperlink{gnmesg_8c_a0d647eec96c4b452d63345c146533188}{ghack\+\_\+message\+\_\+window\+\_\+use\+\_\+\+R\+I\+P} (int how)
\item 
void \hyperlink{gnmesg_8c_a78022cdb42828b7d4903d4e297a9c20a}{ghack\+\_\+message\+\_\+window\+\_\+scroll} (int dx, int dy)
\item 
Gtk\+Widget $\ast$ \hyperlink{gnmesg_8c_af50f0535e6372aee482981ca5c5ceafa}{ghack\+\_\+init\+\_\+message\+\_\+window} (void)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
Gtk\+Widget $\ast$ \hyperlink{gnmesg_8c_a045eb50677f31112ecdb477b3c760d7a}{M\+W\+\_\+table}
\item 
Gtk\+Widget $\ast$ \hyperlink{gnmesg_8c_a1097acf5a31ded99eaa86326e6e8fa4e}{M\+W\+\_\+text}
\item 
Gtk\+Widget $\ast$ \hyperlink{gnmesg_8c_ac9ecda7dab55971e5626167b3cadc15b}{M\+W\+\_\+scrollbar}
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\hypertarget{gnmesg_8c_a9f0c0aeebc254a3a933790359e98f632}{\index{gnmesg.\+c@{gnmesg.\+c}!n\+Chars\+Before\+Deleting\+Stuff@{n\+Chars\+Before\+Deleting\+Stuff}}
\index{n\+Chars\+Before\+Deleting\+Stuff@{n\+Chars\+Before\+Deleting\+Stuff}!gnmesg.\+c@{gnmesg.\+c}}
\subsubsection[{n\+Chars\+Before\+Deleting\+Stuff}]{\setlength{\rightskip}{0pt plus 5cm}\#define n\+Chars\+Before\+Deleting\+Stuff~3200}}\label{gnmesg_8c_a9f0c0aeebc254a3a933790359e98f632}


Definition at line 9 of file gnmesg.\+c.



Referenced by ghack\+\_\+message\+\_\+window\+\_\+clear().



\subsection{Function Documentation}
\hypertarget{gnmesg_8c_af50f0535e6372aee482981ca5c5ceafa}{\index{gnmesg.\+c@{gnmesg.\+c}!ghack\+\_\+init\+\_\+message\+\_\+window@{ghack\+\_\+init\+\_\+message\+\_\+window}}
\index{ghack\+\_\+init\+\_\+message\+\_\+window@{ghack\+\_\+init\+\_\+message\+\_\+window}!gnmesg.\+c@{gnmesg.\+c}}
\subsubsection[{ghack\+\_\+init\+\_\+message\+\_\+window}]{\setlength{\rightskip}{0pt plus 5cm}Gtk\+Widget$\ast$ ghack\+\_\+init\+\_\+message\+\_\+window (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{gnmesg_8c_af50f0535e6372aee482981ca5c5ceafa}


Definition at line 68 of file gnmesg.\+c.



References F\+A\+L\+S\+E, ghack\+\_\+delay(), ghack\+\_\+message\+\_\+window\+\_\+clear(), ghack\+\_\+message\+\_\+window\+\_\+put\+\_\+string(), M\+W\+\_\+scrollbar, M\+W\+\_\+table, M\+W\+\_\+text, N\+U\+L\+L, and T\+R\+U\+E.



Referenced by gnome\+\_\+create\+\_\+nhwindow\+\_\+by\+\_\+id().


\begin{DoxyCode}
69 \{
70 
71     \hyperlink{gnmesg_8c_a045eb50677f31112ecdb477b3c760d7a}{MW\_table} = gtk\_table\_new(2, 1, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE});
72     gtk\_table\_set\_row\_spacing(GTK\_TABLE(\hyperlink{gnmesg_8c_a045eb50677f31112ecdb477b3c760d7a}{MW\_table}), 0, 2);
73 
74     \hyperlink{gnmesg_8c_a1097acf5a31ded99eaa86326e6e8fa4e}{MW\_text} = gtk\_text\_new(\hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL});
75     gtk\_text\_set\_editable(GTK\_TEXT(\hyperlink{gnmesg_8c_a1097acf5a31ded99eaa86326e6e8fa4e}{MW\_text}), \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE});
76     gtk\_text\_set\_word\_wrap(GTK\_TEXT(\hyperlink{gnmesg_8c_a1097acf5a31ded99eaa86326e6e8fa4e}{MW\_text}), \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE});
77     gtk\_table\_attach(GTK\_TABLE(\hyperlink{gnmesg_8c_a045eb50677f31112ecdb477b3c760d7a}{MW\_table}), \hyperlink{gnmesg_8c_a1097acf5a31ded99eaa86326e6e8fa4e}{MW\_text}, 0, 1, 0, 1,
78                      (GTK\_EXPAND | GTK\_FILL),
79                      (GTK\_EXPAND | GTK\_FILL),
80                      0, 0);
81 
82     \hyperlink{gnmesg_8c_ac9ecda7dab55971e5626167b3cadc15b}{MW\_scrollbar} = gtk\_vscrollbar\_new(GTK\_TEXT(\hyperlink{gnmesg_8c_a1097acf5a31ded99eaa86326e6e8fa4e}{MW\_text})->vadj);
83     gtk\_table\_attach(GTK\_TABLE(\hyperlink{gnmesg_8c_a045eb50677f31112ecdb477b3c760d7a}{MW\_table}), \hyperlink{gnmesg_8c_ac9ecda7dab55971e5626167b3cadc15b}{MW\_scrollbar}, 1, 2, 0, 1,
84                      GTK\_FILL, (GTK\_EXPAND | GTK\_FILL), 0, 0);
85     
86     gtk\_signal\_connect(GTK\_OBJECT(\hyperlink{gnmesg_8c_a045eb50677f31112ecdb477b3c760d7a}{MW\_table}), \textcolor{stringliteral}{"ghack\_putstr"},
87             GTK\_SIGNAL\_FUNC(\hyperlink{gnmesg_8c_ab1ae55c19d9e5cd3a477a1b3f0f9c282}{ghack\_message\_window\_put\_string}),
88             \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL});
89 
90     gtk\_signal\_connect(GTK\_OBJECT(\hyperlink{gnmesg_8c_a045eb50677f31112ecdb477b3c760d7a}{MW\_table}), \textcolor{stringliteral}{"ghack\_clear"},
91             GTK\_SIGNAL\_FUNC(\hyperlink{gnmesg_8c_ada85626d0819fa3ccecda36132e20157}{ghack\_message\_window\_clear}),
92             \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL});
93     
94     gtk\_signal\_connect(GTK\_OBJECT(\hyperlink{gnmesg_8c_a045eb50677f31112ecdb477b3c760d7a}{MW\_table}), \textcolor{stringliteral}{"gnome\_delay\_output"},
95                     GTK\_SIGNAL\_FUNC(\hyperlink{gnsignal_8c_aa9aeab1b0ef274fa4e2c94a8b085bcb0}{ghack\_delay}), \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL});
96 
97     gtk\_widget\_show\_all(\hyperlink{gnmesg_8c_a045eb50677f31112ecdb477b3c760d7a}{MW\_table});
98 
99     \textcolor{keywordflow}{return} GTK\_WIDGET(\hyperlink{gnmesg_8c_a045eb50677f31112ecdb477b3c760d7a}{MW\_table});
100 \}
\end{DoxyCode}
\hypertarget{gnmesg_8c_ada85626d0819fa3ccecda36132e20157}{\index{gnmesg.\+c@{gnmesg.\+c}!ghack\+\_\+message\+\_\+window\+\_\+clear@{ghack\+\_\+message\+\_\+window\+\_\+clear}}
\index{ghack\+\_\+message\+\_\+window\+\_\+clear@{ghack\+\_\+message\+\_\+window\+\_\+clear}!gnmesg.\+c@{gnmesg.\+c}}
\subsubsection[{ghack\+\_\+message\+\_\+window\+\_\+clear}]{\setlength{\rightskip}{0pt plus 5cm}void ghack\+\_\+message\+\_\+window\+\_\+clear (
\begin{DoxyParamCaption}
\item[{Gtk\+Widget $\ast$}]{widget, }
\item[{gpointer}]{data}
\end{DoxyParamCaption}
)}}\label{gnmesg_8c_ada85626d0819fa3ccecda36132e20157}


Definition at line 17 of file gnmesg.\+c.



References M\+W\+\_\+text, and n\+Chars\+Before\+Deleting\+Stuff.



Referenced by ghack\+\_\+init\+\_\+message\+\_\+window().


\begin{DoxyCode}
18 \{
19     \textcolor{comment}{/* Seems nethack calls this after every move -- we don't want}
20 \textcolor{comment}{     * to really clear the window at all though.  Ignore the request */}
21     gint len;
22 
23     len = gtk\_text\_get\_length(GTK\_TEXT(\hyperlink{gnmesg_8c_a1097acf5a31ded99eaa86326e6e8fa4e}{MW\_text}));
24     
25     \textcolor{keywordflow}{if}(len < \hyperlink{gnmesg_8c_a9f0c0aeebc254a3a933790359e98f632}{nCharsBeforeDeletingStuff})
26         \textcolor{keywordflow}{return};
27     
28     gtk\_text\_freeze(GTK\_TEXT(\hyperlink{gnmesg_8c_a1097acf5a31ded99eaa86326e6e8fa4e}{MW\_text}));
29     gtk\_text\_set\_point(GTK\_TEXT(\hyperlink{gnmesg_8c_a1097acf5a31ded99eaa86326e6e8fa4e}{MW\_text}), 0);
30     gtk\_text\_forward\_delete(GTK\_TEXT(\hyperlink{gnmesg_8c_a1097acf5a31ded99eaa86326e6e8fa4e}{MW\_text}), len-((guint)(
      \hyperlink{gnmesg_8c_a9f0c0aeebc254a3a933790359e98f632}{nCharsBeforeDeletingStuff}*0.5)));
31     gtk\_text\_set\_point(GTK\_TEXT(\hyperlink{gnmesg_8c_a1097acf5a31ded99eaa86326e6e8fa4e}{MW\_text}), (guint)(
      \hyperlink{gnmesg_8c_a9f0c0aeebc254a3a933790359e98f632}{nCharsBeforeDeletingStuff}*0.5));
32     gtk\_text\_thaw(GTK\_TEXT(\hyperlink{gnmesg_8c_a1097acf5a31ded99eaa86326e6e8fa4e}{MW\_text}));
33 \}
\end{DoxyCode}
\hypertarget{gnmesg_8c_a45b839b293215fe9b64f77ec2140ce62}{\index{gnmesg.\+c@{gnmesg.\+c}!ghack\+\_\+message\+\_\+window\+\_\+destroy@{ghack\+\_\+message\+\_\+window\+\_\+destroy}}
\index{ghack\+\_\+message\+\_\+window\+\_\+destroy@{ghack\+\_\+message\+\_\+window\+\_\+destroy}!gnmesg.\+c@{gnmesg.\+c}}
\subsubsection[{ghack\+\_\+message\+\_\+window\+\_\+destroy}]{\setlength{\rightskip}{0pt plus 5cm}void ghack\+\_\+message\+\_\+window\+\_\+destroy (
\begin{DoxyParamCaption}
\item[{Gtk\+Widget $\ast$}]{win, }
\item[{gpointer}]{data}
\end{DoxyParamCaption}
)}}\label{gnmesg_8c_a45b839b293215fe9b64f77ec2140ce62}


Definition at line 35 of file gnmesg.\+c.


\begin{DoxyCode}
36 \{
37 
38 \}
\end{DoxyCode}
\hypertarget{gnmesg_8c_a9bd5d10d3a61cb70dd02a3a17b8ffdaa}{\index{gnmesg.\+c@{gnmesg.\+c}!ghack\+\_\+message\+\_\+window\+\_\+display@{ghack\+\_\+message\+\_\+window\+\_\+display}}
\index{ghack\+\_\+message\+\_\+window\+\_\+display@{ghack\+\_\+message\+\_\+window\+\_\+display}!gnmesg.\+c@{gnmesg.\+c}}
\subsubsection[{ghack\+\_\+message\+\_\+window\+\_\+display}]{\setlength{\rightskip}{0pt plus 5cm}void ghack\+\_\+message\+\_\+window\+\_\+display (
\begin{DoxyParamCaption}
\item[{Gtk\+Widget $\ast$}]{widget, }
\item[{{\bf boolean}}]{block, }
\item[{gpointer}]{data}
\end{DoxyParamCaption}
)}}\label{gnmesg_8c_a9bd5d10d3a61cb70dd02a3a17b8ffdaa}


Definition at line 40 of file gnmesg.\+c.


\begin{DoxyCode}
42 \{
43 
44 \}
\end{DoxyCode}
\hypertarget{gnmesg_8c_ab1ae55c19d9e5cd3a477a1b3f0f9c282}{\index{gnmesg.\+c@{gnmesg.\+c}!ghack\+\_\+message\+\_\+window\+\_\+put\+\_\+string@{ghack\+\_\+message\+\_\+window\+\_\+put\+\_\+string}}
\index{ghack\+\_\+message\+\_\+window\+\_\+put\+\_\+string@{ghack\+\_\+message\+\_\+window\+\_\+put\+\_\+string}!gnmesg.\+c@{gnmesg.\+c}}
\subsubsection[{ghack\+\_\+message\+\_\+window\+\_\+put\+\_\+string}]{\setlength{\rightskip}{0pt plus 5cm}void ghack\+\_\+message\+\_\+window\+\_\+put\+\_\+string (
\begin{DoxyParamCaption}
\item[{Gtk\+Widget $\ast$}]{widget, }
\item[{int}]{attr, }
\item[{{\bf const} char $\ast$}]{text, }
\item[{gpointer}]{data}
\end{DoxyParamCaption}
)}}\label{gnmesg_8c_ab1ae55c19d9e5cd3a477a1b3f0f9c282}


Definition at line 46 of file gnmesg.\+c.



References M\+W\+\_\+text, and N\+U\+L\+L.



Referenced by ghack\+\_\+init\+\_\+message\+\_\+window().


\begin{DoxyCode}
48 \{
49 
50     \textcolor{keywordflow}{if}(text == \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
51         \textcolor{keywordflow}{return};
52     
53     \textcolor{comment}{/* Don't bother with attributes yet */}
54     gtk\_text\_insert(GTK\_TEXT(\hyperlink{gnmesg_8c_a1097acf5a31ded99eaa86326e6e8fa4e}{MW\_text}), \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, text, -1);
55     gtk\_text\_insert(GTK\_TEXT(\hyperlink{gnmesg_8c_a1097acf5a31ded99eaa86326e6e8fa4e}{MW\_text}), \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, \hyperlink{windefs_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, \textcolor{stringliteral}{"\(\backslash\)n"}, -1);
56 \}
\end{DoxyCode}
\hypertarget{gnmesg_8c_a78022cdb42828b7d4903d4e297a9c20a}{\index{gnmesg.\+c@{gnmesg.\+c}!ghack\+\_\+message\+\_\+window\+\_\+scroll@{ghack\+\_\+message\+\_\+window\+\_\+scroll}}
\index{ghack\+\_\+message\+\_\+window\+\_\+scroll@{ghack\+\_\+message\+\_\+window\+\_\+scroll}!gnmesg.\+c@{gnmesg.\+c}}
\subsubsection[{ghack\+\_\+message\+\_\+window\+\_\+scroll}]{\setlength{\rightskip}{0pt plus 5cm}void ghack\+\_\+message\+\_\+window\+\_\+scroll (
\begin{DoxyParamCaption}
\item[{int}]{dx, }
\item[{int}]{dy}
\end{DoxyParamCaption}
)}}\label{gnmesg_8c_a78022cdb42828b7d4903d4e297a9c20a}


Definition at line 63 of file gnmesg.\+c.


\begin{DoxyCode}
64 \{
65 
66 \}
\end{DoxyCode}
\hypertarget{gnmesg_8c_a0d647eec96c4b452d63345c146533188}{\index{gnmesg.\+c@{gnmesg.\+c}!ghack\+\_\+message\+\_\+window\+\_\+use\+\_\+\+R\+I\+P@{ghack\+\_\+message\+\_\+window\+\_\+use\+\_\+\+R\+I\+P}}
\index{ghack\+\_\+message\+\_\+window\+\_\+use\+\_\+\+R\+I\+P@{ghack\+\_\+message\+\_\+window\+\_\+use\+\_\+\+R\+I\+P}!gnmesg.\+c@{gnmesg.\+c}}
\subsubsection[{ghack\+\_\+message\+\_\+window\+\_\+use\+\_\+\+R\+I\+P}]{\setlength{\rightskip}{0pt plus 5cm}void ghack\+\_\+message\+\_\+window\+\_\+use\+\_\+\+R\+I\+P (
\begin{DoxyParamCaption}
\item[{int}]{how}
\end{DoxyParamCaption}
)}}\label{gnmesg_8c_a0d647eec96c4b452d63345c146533188}


Definition at line 58 of file gnmesg.\+c.


\begin{DoxyCode}
59 \{
60 
61 \}
\end{DoxyCode}


\subsection{Variable Documentation}
\hypertarget{gnmesg_8c_ac9ecda7dab55971e5626167b3cadc15b}{\index{gnmesg.\+c@{gnmesg.\+c}!M\+W\+\_\+scrollbar@{M\+W\+\_\+scrollbar}}
\index{M\+W\+\_\+scrollbar@{M\+W\+\_\+scrollbar}!gnmesg.\+c@{gnmesg.\+c}}
\subsubsection[{M\+W\+\_\+scrollbar}]{\setlength{\rightskip}{0pt plus 5cm}Gtk\+Widget$\ast$ M\+W\+\_\+scrollbar}}\label{gnmesg_8c_ac9ecda7dab55971e5626167b3cadc15b}


Definition at line 14 of file gnmesg.\+c.



Referenced by ghack\+\_\+init\+\_\+message\+\_\+window().

\hypertarget{gnmesg_8c_a045eb50677f31112ecdb477b3c760d7a}{\index{gnmesg.\+c@{gnmesg.\+c}!M\+W\+\_\+table@{M\+W\+\_\+table}}
\index{M\+W\+\_\+table@{M\+W\+\_\+table}!gnmesg.\+c@{gnmesg.\+c}}
\subsubsection[{M\+W\+\_\+table}]{\setlength{\rightskip}{0pt plus 5cm}Gtk\+Widget$\ast$ M\+W\+\_\+table}}\label{gnmesg_8c_a045eb50677f31112ecdb477b3c760d7a}


Definition at line 12 of file gnmesg.\+c.



Referenced by ghack\+\_\+init\+\_\+message\+\_\+window().

\hypertarget{gnmesg_8c_a1097acf5a31ded99eaa86326e6e8fa4e}{\index{gnmesg.\+c@{gnmesg.\+c}!M\+W\+\_\+text@{M\+W\+\_\+text}}
\index{M\+W\+\_\+text@{M\+W\+\_\+text}!gnmesg.\+c@{gnmesg.\+c}}
\subsubsection[{M\+W\+\_\+text}]{\setlength{\rightskip}{0pt plus 5cm}Gtk\+Widget$\ast$ M\+W\+\_\+text}}\label{gnmesg_8c_a1097acf5a31ded99eaa86326e6e8fa4e}


Definition at line 13 of file gnmesg.\+c.



Referenced by ghack\+\_\+init\+\_\+message\+\_\+window(), ghack\+\_\+message\+\_\+window\+\_\+clear(), and ghack\+\_\+message\+\_\+window\+\_\+put\+\_\+string().

