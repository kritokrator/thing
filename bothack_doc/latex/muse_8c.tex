\hypertarget{muse_8c}{\section{nethack/src/muse.c File Reference}
\label{muse_8c}\index{nethack/src/muse.\+c@{nethack/src/muse.\+c}}
}
{\ttfamily \#include \char`\"{}hack.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}edog.\+h\char`\"{}}\\*
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structmusable}{musable}
\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{muse_8c_ab34ec85e4c86b57a1e1c4ec8e4d3a5a6}{P\+O\+T\+I\+O\+N\+\_\+\+O\+C\+C\+U\+P\+A\+N\+T\+\_\+\+C\+H\+A\+N\+C\+E}(n)~(13 + 2$\ast$(n))	/$\ast$ also \hyperlink{mrecover_8c_a9ea2e00e47c9215b7502040089d8e601}{in} potion.\+c $\ast$/
\item 
\#define \hyperlink{muse_8c_af74f3efeafb0279b1628e94ccbb86c49}{M\+U\+S\+E\+\_\+\+S\+C\+R\+\_\+\+T\+E\+L\+E\+P\+O\+R\+T\+A\+T\+I\+O\+N}~1
\item 
\#define \hyperlink{muse_8c_aa867e434d7b697f9fc8d1db9b216a198}{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+T\+E\+L\+E\+P\+O\+R\+T\+A\+T\+I\+O\+N\+\_\+\+S\+E\+L\+F}~2
\item 
\#define \hyperlink{muse_8c_a0df3ce17e1e03a5f846b7b404d0f75a8}{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+H\+E\+A\+L\+I\+N\+G}~3
\item 
\#define \hyperlink{muse_8c_ad2669dea3dd392871c80929370ec342b}{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+E\+X\+T\+R\+A\+\_\+\+H\+E\+A\+L\+I\+N\+G}~4
\item 
\#define \hyperlink{muse_8c_ae588a7b81156914902b8ad9d1755e7f0}{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+D\+I\+G\+G\+I\+N\+G}~5
\item 
\#define \hyperlink{muse_8c_a0e7d3c03f0220672e4f8ed17d3a8642a}{M\+U\+S\+E\+\_\+\+T\+R\+A\+P\+D\+O\+O\+R}~6
\item 
\#define \hyperlink{muse_8c_ae214c66b1ac1efc477fa9029885ed414}{M\+U\+S\+E\+\_\+\+T\+E\+L\+E\+P\+O\+R\+T\+\_\+\+T\+R\+A\+P}~7
\item 
\#define \hyperlink{muse_8c_af8ea585a3a5abf202c8bfc6e567d4294}{M\+U\+S\+E\+\_\+\+U\+P\+S\+T\+A\+I\+R\+S}~8
\item 
\#define \hyperlink{muse_8c_ab8bc4c0e1f62324745690ad7514ceedf}{M\+U\+S\+E\+\_\+\+D\+O\+W\+N\+S\+T\+A\+I\+R\+S}~9
\item 
\#define \hyperlink{muse_8c_af007015cef270071dd8bb072fb030842}{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+C\+R\+E\+A\+T\+E\+\_\+\+M\+O\+N\+S\+T\+E\+R}~10
\item 
\#define \hyperlink{muse_8c_aca65a80f05166317ea20ec0f4b8dcaf9}{M\+U\+S\+E\+\_\+\+S\+C\+R\+\_\+\+C\+R\+E\+A\+T\+E\+\_\+\+M\+O\+N\+S\+T\+E\+R}~11
\item 
\#define \hyperlink{muse_8c_af6e16437d305120ec5871ba0b013995b}{M\+U\+S\+E\+\_\+\+U\+P\+\_\+\+L\+A\+D\+D\+E\+R}~12
\item 
\#define \hyperlink{muse_8c_a8b6bb02638dd25e2792567b13ffa4b40}{M\+U\+S\+E\+\_\+\+D\+N\+\_\+\+L\+A\+D\+D\+E\+R}~13
\item 
\#define \hyperlink{muse_8c_afb239ce4101fdff4659cb3c6c0184515}{M\+U\+S\+E\+\_\+\+S\+S\+T\+A\+I\+R\+S}~14
\item 
\#define \hyperlink{muse_8c_aee63b5574e746304cab9cbb88e1de182}{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+T\+E\+L\+E\+P\+O\+R\+T\+A\+T\+I\+O\+N}~15
\item 
\#define \hyperlink{muse_8c_afa6dce34acae25afddd484c0262142a3}{M\+U\+S\+E\+\_\+\+B\+U\+G\+L\+E}~16
\item 
\#define \hyperlink{muse_8c_a4a89c8817e3ac83ff990ba42c966b1b4}{M\+U\+S\+E\+\_\+\+U\+N\+I\+C\+O\+R\+N\+\_\+\+H\+O\+R\+N}~17
\item 
\#define \hyperlink{muse_8c_ab7a31f6e9ee18a59412d10b82f0570e7}{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+F\+U\+L\+L\+\_\+\+H\+E\+A\+L\+I\+N\+G}~18
\item 
\#define \hyperlink{muse_8c_a2fe45e61be8379e9eee713c6dc3763ad}{M\+U\+S\+E\+\_\+\+L\+I\+Z\+A\+R\+D\+\_\+\+C\+O\+R\+P\+S\+E}~19
\item 
\#define \hyperlink{muse_8c_af624e874fc8909c7570dba15e9e64cbc}{nomore}(x)~if(m.\+has\+\_\+defense==x) continue;
\item 
\#define \hyperlink{muse_8c_a54d89ba16b826c94408ccddb1468c00a}{m\+\_\+flee}(\hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m})
\item 
\#define \hyperlink{muse_8c_a74b936ceb6d08cd647c24b7a9855bbd2}{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+D\+E\+A\+T\+H}~1
\item 
\#define \hyperlink{muse_8c_a35caddb6a36b66c17683384e434a61cc}{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+S\+L\+E\+E\+P}~2
\item 
\#define \hyperlink{muse_8c_a5e2f9b11f00feb26f70d53f2f525afcc}{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+F\+I\+R\+E}~3
\item 
\#define \hyperlink{muse_8c_a2a7c82f0a9d3bbec9f905e7a61081360}{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+C\+O\+L\+D}~4
\item 
\#define \hyperlink{muse_8c_af30cdd1527f03e100e0a8863fbaf0e36}{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+L\+I\+G\+H\+T\+N\+I\+N\+G}~5
\item 
\#define \hyperlink{muse_8c_a55b22ac9743ab572be04691e3085cacf}{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+M\+A\+G\+I\+C\+\_\+\+M\+I\+S\+S\+I\+L\+E}~6
\item 
\#define \hyperlink{muse_8c_ae54e2ee0bcdc7628cd790b1b1277dfc7}{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+S\+T\+R\+I\+K\+I\+N\+G}~7
\item 
\#define \hyperlink{muse_8c_a368c98dc7e6a48b4d5807d2f4e166d5d}{M\+U\+S\+E\+\_\+\+S\+C\+R\+\_\+\+F\+I\+R\+E}~8
\item 
\#define \hyperlink{muse_8c_a27b03b7ceea5b8226cadd34496353139}{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+P\+A\+R\+A\+L\+Y\+S\+I\+S}~9
\item 
\#define \hyperlink{muse_8c_a3c3fd8d2297b5bb2c0a2752dcbe8674d}{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+B\+L\+I\+N\+D\+N\+E\+S\+S}~10
\item 
\#define \hyperlink{muse_8c_a6d1ffa992436d95af0d255efb356fc19}{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+C\+O\+N\+F\+U\+S\+I\+O\+N}~11
\item 
\#define \hyperlink{muse_8c_a93600e9dc2ed44547dd403312a7e4d39}{M\+U\+S\+E\+\_\+\+F\+R\+O\+S\+T\+\_\+\+H\+O\+R\+N}~12
\item 
\#define \hyperlink{muse_8c_afed852913471cdec8c3c09a5b74f3066}{M\+U\+S\+E\+\_\+\+F\+I\+R\+E\+\_\+\+H\+O\+R\+N}~13
\item 
\#define \hyperlink{muse_8c_a4fa82597beb31f42c721811ca5abe33f}{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+A\+C\+I\+D}~14
\item 
\#define \hyperlink{muse_8c_a131d30d36bd756962ddba0a71dc1ee0e}{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+S\+L\+E\+E\+P\+I\+N\+G}~16
\item 
\#define \hyperlink{muse_8c_ad15e1902de0142f63a7d7956359ba185}{M\+U\+S\+E\+\_\+\+S\+C\+R\+\_\+\+E\+A\+R\+T\+H}~17
\item 
\#define \hyperlink{muse_8c_af624e874fc8909c7570dba15e9e64cbc}{nomore}(x)~if(m.\+has\+\_\+offense==x) continue;
\item 
\#define \hyperlink{muse_8c_a8e37ee24a3248fee83db8cc6bebdd969}{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+G\+A\+I\+N\+\_\+\+L\+E\+V\+E\+L}~1
\item 
\#define \hyperlink{muse_8c_ad01022eb368493aae7bf0e1959bce963}{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+M\+A\+K\+E\+\_\+\+I\+N\+V\+I\+S\+I\+B\+L\+E}~2
\item 
\#define \hyperlink{muse_8c_a5980f169f9e08c086d1c4e588d9dd86d}{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+I\+N\+V\+I\+S\+I\+B\+I\+L\+I\+T\+Y}~3
\item 
\#define \hyperlink{muse_8c_ab7d2d5dff5b09c7981f2e901c6760f70}{M\+U\+S\+E\+\_\+\+P\+O\+L\+Y\+\_\+\+T\+R\+A\+P}~4
\item 
\#define \hyperlink{muse_8c_acfb9e6f9d58209f1808dfd315b54b723}{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+P\+O\+L\+Y\+M\+O\+R\+P\+H}~5
\item 
\#define \hyperlink{muse_8c_a7aa4b264c72038d91f1eaaf212b15ad6}{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+S\+P\+E\+E\+D}~6
\item 
\#define \hyperlink{muse_8c_a7704f2590b3a038a641deda61b84f58b}{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+S\+P\+E\+E\+D\+\_\+\+M\+O\+N\+S\+T\+E\+R}~7
\item 
\#define \hyperlink{muse_8c_abad816ae5ba2b9882b006d16e7d2f83e}{M\+U\+S\+E\+\_\+\+B\+U\+L\+L\+W\+H\+I\+P}~8
\item 
\#define \hyperlink{muse_8c_a43d2aa2b768ead263f72c437525539c6}{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+P\+O\+L\+Y\+M\+O\+R\+P\+H}~9
\item 
\#define \hyperlink{muse_8c_af624e874fc8909c7570dba15e9e64cbc}{nomore}(x)~if(m.\+has\+\_\+misc==x) continue;
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{hack_8h_a0c2ce0eef98596c51b3a10e50a29dd5e}{S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} struct \hyperlink{structpermonst}{permonst} $\ast$ \hyperlink{muse_8c_af9a1a21b0ebab029aaf3a3dd250ec732}{F\+D\+E\+C\+L} (\hyperlink{muse_8c_a6e9f8483c400b439d17e7a035c8c97cf}{muse\+\_\+newcham\+\_\+mon},(struct \hyperlink{structmonst}{monst} $\ast$))
\item 
\hyperlink{hack_8h_a0c2ce0eef98596c51b3a10e50a29dd5e}{S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} int \hyperlink{muse_8c_a79ffe0030b2fef072de9c5caccaf3500}{F\+D\+E\+C\+L} (\hyperlink{muse_8c_aafe9cef615d465f4a327c5f8bff918a4}{precheck},(struct \hyperlink{structmonst}{monst} $\ast$, struct \hyperlink{structobj}{obj} $\ast$))
\item 
\hyperlink{hack_8h_a0c2ce0eef98596c51b3a10e50a29dd5e}{S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} void \hyperlink{muse_8c_a70500a43f645df507f2f9c3ad358ef28}{F\+D\+E\+C\+L} (\hyperlink{muse_8c_a82b42772c7f62e2033417e1c184da73b}{mzapmsg},(struct \hyperlink{structmonst}{monst} $\ast$, struct \hyperlink{structobj}{obj} $\ast$, \hyperlink{wingem1_8c_aa2723cc3af18a5199ab4ce7cca84d82b}{B\+O\+O\+L\+E\+A\+N\+\_\+\+P}))
\item 
\hyperlink{hack_8h_a0c2ce0eef98596c51b3a10e50a29dd5e}{S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} void \hyperlink{muse_8c_a6c77cc4c937a46310a43b9e99c61e979}{F\+D\+E\+C\+L} (\hyperlink{muse_8c_adc8ed439d179dfe537178b5523edf8e3}{mreadmsg},(struct \hyperlink{structmonst}{monst} $\ast$, struct \hyperlink{structobj}{obj} $\ast$))
\item 
\hyperlink{hack_8h_a0c2ce0eef98596c51b3a10e50a29dd5e}{S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} void \hyperlink{muse_8c_ae2f82924872fde07dbabc7aa233a1c73}{F\+D\+E\+C\+L} (\hyperlink{muse_8c_a885817dcbfdbdb4f910bcbf3520a8031}{mquaffmsg},(struct \hyperlink{structmonst}{monst} $\ast$, struct \hyperlink{structobj}{obj} $\ast$))
\item 
\hyperlink{hack_8h_ac0f6cfba4138e5e6a773d15a80ea82ff}{S\+T\+A\+T\+I\+C\+\_\+\+P\+T\+R} int \hyperlink{muse_8c_a95f729bbe5e3d3b470d03d8d2a1acfea}{F\+D\+E\+C\+L} (\hyperlink{muse_8c_a6834998d463056c47210a44ddb1ae849}{mbhitm},(struct \hyperlink{structmonst}{monst} $\ast$, struct \hyperlink{structobj}{obj} $\ast$))
\item 
\hyperlink{hack_8h_a0c2ce0eef98596c51b3a10e50a29dd5e}{S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} void \hyperlink{muse_8c_a6930bc1876b94407f770ccff8deb28e2}{F\+D\+E\+C\+L} (\hyperlink{muse_8c_a07ac33c7bc46a3586197be209cd7f80e}{mbhit},(struct \hyperlink{structmonst}{monst} $\ast$, int, int F\+D\+E\+C\+L(($\ast$),(\hyperlink{global_8h_a5ab67a0dcf1ab2e43fb100422af09f0d}{M\+O\+N\+S\+T\+\_\+\+P}, \hyperlink{global_8h_a0b35ac15910ff1522ede7503fd6afe1c}{O\+B\+J\+\_\+\+P})), int F\+D\+E\+C\+L(($\ast$),(\hyperlink{global_8h_a0b35ac15910ff1522ede7503fd6afe1c}{O\+B\+J\+\_\+\+P}, \hyperlink{global_8h_a0b35ac15910ff1522ede7503fd6afe1c}{O\+B\+J\+\_\+\+P})), struct \hyperlink{structobj}{obj} $\ast$))
\item 
\hyperlink{hack_8h_a0c2ce0eef98596c51b3a10e50a29dd5e}{S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} void \hyperlink{muse_8c_a2a9b378a6127d10add5ec2571baa1bac}{F\+D\+E\+C\+L} (\hyperlink{muse_8c_a3ba72ca24dd7ce63ed8681310363505f}{you\+\_\+aggravate},(struct \hyperlink{structmonst}{monst} $\ast$))
\item 
\hyperlink{hack_8h_a0c2ce0eef98596c51b3a10e50a29dd5e}{S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} void \hyperlink{muse_8c_ab0edfef54eedc5717198ca6aed0d1ae4}{F\+D\+E\+C\+L} (\hyperlink{muse_8c_a0e15321266510c0c8dbe8cac3a3fa7d8}{mon\+\_\+consume\+\_\+unstone},(struct \hyperlink{structmonst}{monst} $\ast$, struct \hyperlink{structobj}{obj} $\ast$, \hyperlink{wingem1_8c_aa2723cc3af18a5199ab4ce7cca84d82b}{B\+O\+O\+L\+E\+A\+N\+\_\+\+P}, \hyperlink{wingem1_8c_aa2723cc3af18a5199ab4ce7cca84d82b}{B\+O\+O\+L\+E\+A\+N\+\_\+\+P}))
\item 
\hyperlink{hack_8h_a6584b0687fb4e0040a85bbcdaa3e0ee1}{S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} int \hyperlink{muse_8c_aafe9cef615d465f4a327c5f8bff918a4}{precheck} (struct \hyperlink{structmonst}{monst} $\ast$mon, struct \hyperlink{structobj}{obj} $\ast$\hyperlink{structobj}{obj})
\item 
\hyperlink{hack_8h_a6584b0687fb4e0040a85bbcdaa3e0ee1}{S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} void \hyperlink{muse_8c_a82b42772c7f62e2033417e1c184da73b}{mzapmsg} (struct \hyperlink{structmonst}{monst} $\ast$mtmp, struct \hyperlink{structobj}{obj} $\ast$\hyperlink{mhitu_8c_a8cf94e09e1a72daf7050a2817ba70974}{otmp}, \hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} self)
\item 
\hyperlink{hack_8h_a6584b0687fb4e0040a85bbcdaa3e0ee1}{S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} void \hyperlink{muse_8c_adc8ed439d179dfe537178b5523edf8e3}{mreadmsg} (struct \hyperlink{structmonst}{monst} $\ast$mtmp, struct \hyperlink{structobj}{obj} $\ast$\hyperlink{mhitu_8c_a8cf94e09e1a72daf7050a2817ba70974}{otmp})
\item 
\hyperlink{hack_8h_a6584b0687fb4e0040a85bbcdaa3e0ee1}{S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} void \hyperlink{muse_8c_a885817dcbfdbdb4f910bcbf3520a8031}{mquaffmsg} (struct \hyperlink{structmonst}{monst} $\ast$mtmp, struct \hyperlink{structobj}{obj} $\ast$\hyperlink{mhitu_8c_a8cf94e09e1a72daf7050a2817ba70974}{otmp})
\item 
\hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} \hyperlink{muse_8c_a722f2ce1744ef42a90b6aa54e38c97a4}{find\+\_\+defensive} (struct \hyperlink{structmonst}{monst} $\ast$mtmp)
\item 
int \hyperlink{muse_8c_a52ede1ad2d5792aa03d9ff70da9df023}{use\+\_\+defensive} (struct \hyperlink{structmonst}{monst} $\ast$mtmp)
\item 
int \hyperlink{muse_8c_ac8a389f8c0a717ed822b5f2e6d099e9d}{rnd\+\_\+defensive\+\_\+item} (struct \hyperlink{structmonst}{monst} $\ast$mtmp)
\item 
\hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} \hyperlink{muse_8c_a2342a49a83a69a6505b56e326a682f12}{find\+\_\+offensive} (struct \hyperlink{structmonst}{monst} $\ast$mtmp)
\item 
\hyperlink{hack_8h_ac0f6cfba4138e5e6a773d15a80ea82ff}{S\+T\+A\+T\+I\+C\+\_\+\+P\+T\+R} int \hyperlink{muse_8c_a6834998d463056c47210a44ddb1ae849}{mbhitm} (struct \hyperlink{structmonst}{monst} $\ast$mtmp, struct \hyperlink{structobj}{obj} $\ast$\hyperlink{mhitu_8c_a8cf94e09e1a72daf7050a2817ba70974}{otmp})
\item 
\hyperlink{hack_8h_a6584b0687fb4e0040a85bbcdaa3e0ee1}{S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} void \hyperlink{muse_8c_a07ac33c7bc46a3586197be209cd7f80e}{mbhit} (struct \hyperlink{structmonst}{monst} $\ast$mon, int range, fhitm, fhito, struct \hyperlink{structobj}{obj} $\ast$\hyperlink{structobj}{obj})
\item 
int \hyperlink{muse_8c_a8df7f18758592fe481e362d53ab752b0}{use\+\_\+offensive} (struct \hyperlink{structmonst}{monst} $\ast$mtmp)
\item 
int \hyperlink{muse_8c_a3f44daad6fea8db7a3823a5ad9297cd7}{rnd\+\_\+offensive\+\_\+item} (struct \hyperlink{structmonst}{monst} $\ast$mtmp)
\item 
\hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} \hyperlink{muse_8c_ae9ae628cd5f1693e91458d4fb1c9b210}{find\+\_\+misc} (struct \hyperlink{structmonst}{monst} $\ast$mtmp)
\item 
static struct \hyperlink{structpermonst}{permonst} $\ast$ \hyperlink{muse_8c_a6e9f8483c400b439d17e7a035c8c97cf}{muse\+\_\+newcham\+\_\+mon} (struct \hyperlink{structmonst}{monst} $\ast$mon)
\item 
int \hyperlink{muse_8c_a01d660dde2dc57db10e0391274e63cdc}{use\+\_\+misc} (struct \hyperlink{structmonst}{monst} $\ast$mtmp)
\item 
\hyperlink{hack_8h_a6584b0687fb4e0040a85bbcdaa3e0ee1}{S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} void \hyperlink{muse_8c_a3ba72ca24dd7ce63ed8681310363505f}{you\+\_\+aggravate} (struct \hyperlink{structmonst}{monst} $\ast$mtmp)
\item 
int \hyperlink{muse_8c_a23c2634e5c91f8a024abfa2a7eaebe91}{rnd\+\_\+misc\+\_\+item} (struct \hyperlink{structmonst}{monst} $\ast$mtmp)
\item 
\hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} \hyperlink{muse_8c_acb07e8793a996248012ebbf1e4513a7e}{searches\+\_\+for\+\_\+item} (struct \hyperlink{structmonst}{monst} $\ast$mon, struct \hyperlink{structobj}{obj} $\ast$\hyperlink{structobj}{obj})
\item 
\hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} \hyperlink{muse_8c_accf269ca6aadf308f1c18ac6c3cef234}{mon\+\_\+reflects} (struct \hyperlink{structmonst}{monst} $\ast$mon, \hyperlink{tradstdc_8h_a2c212835823e3c54a8ab6d95c652660e}{const} char $\ast$str)
\item 
\hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} \hyperlink{muse_8c_a07a7a604bbcb07e0140b43f374474805}{ureflects} (char $\ast$fmt, char $\ast$str) \hyperlink{tradstdc_8h_a2c212835823e3c54a8ab6d95c652660e}{const}
\item 
\hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} \hyperlink{muse_8c_a82ac795f5c2a0bc7574b746291a9139e}{munstone} (struct \hyperlink{structmonst}{monst} $\ast$mon, \hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} by\+\_\+you)
\item 
\hyperlink{hack_8h_a6584b0687fb4e0040a85bbcdaa3e0ee1}{S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} void \hyperlink{muse_8c_a0e15321266510c0c8dbe8cac3a3fa7d8}{mon\+\_\+consume\+\_\+unstone} (struct \hyperlink{structmonst}{monst} $\ast$mon, struct \hyperlink{structobj}{obj} $\ast$\hyperlink{structobj}{obj}, \hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} by\+\_\+you, \hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} stoning)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hyperlink{tradstdc_8h_a2c212835823e3c54a8ab6d95c652660e}{const} int \hyperlink{muse_8c_a2e4cd9d4199a5c6f1ecf9985d4a58dfb}{monstr} \mbox{[}$\,$\mbox{]}
\item 
\hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} \hyperlink{muse_8c_a70406684323454fb7fb33104cc05f904}{m\+\_\+using} = \hyperlink{xpm2img_8c_aa93f0eb578d23995850d61f7d61c55c1}{F\+A\+L\+S\+E}
\item 
static struct \hyperlink{structmusable}{musable} \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}
\item 
static int \hyperlink{muse_8c_a2e3443c1d5259c106546bb48b093bd91}{trapx}
\item 
static int \hyperlink{muse_8c_a2d804e7f376ac6699b1a10920158cc21}{trapy}
\item 
static \hyperlink{global_8h_a531b10dd351aa162d7dcccd1966308b8}{boolean} \hyperlink{muse_8c_ac4ce829c86a7bd25047f918fac166b1f}{zap\+\_\+oseen}
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\hypertarget{muse_8c_a54d89ba16b826c94408ccddb1468c00a}{\index{muse.\+c@{muse.\+c}!m\+\_\+flee@{m\+\_\+flee}}
\index{m\+\_\+flee@{m\+\_\+flee}!muse.\+c@{muse.\+c}}
\subsubsection[{m\+\_\+flee}]{\setlength{\rightskip}{0pt plus 5cm}\#define m\+\_\+flee(
\begin{DoxyParamCaption}
\item[{}]{{\bf m}}
\end{DoxyParamCaption}
)}}\label{muse_8c_a54d89ba16b826c94408ccddb1468c00a}
{\bfseries Value\+:}
\begin{DoxyCode}
\textcolor{keywordflow}{if} (fleetim && !\hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}->iswiz) \(\backslash\)
            \{ monflee(\hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}, fleetim, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}); \}
\end{DoxyCode}


Referenced by use\+\_\+defensive().

\hypertarget{muse_8c_afa6dce34acae25afddd484c0262142a3}{\index{muse.\+c@{muse.\+c}!M\+U\+S\+E\+\_\+\+B\+U\+G\+L\+E@{M\+U\+S\+E\+\_\+\+B\+U\+G\+L\+E}}
\index{M\+U\+S\+E\+\_\+\+B\+U\+G\+L\+E@{M\+U\+S\+E\+\_\+\+B\+U\+G\+L\+E}!muse.\+c@{muse.\+c}}
\subsubsection[{M\+U\+S\+E\+\_\+\+B\+U\+G\+L\+E}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+U\+S\+E\+\_\+\+B\+U\+G\+L\+E~16}}\label{muse_8c_afa6dce34acae25afddd484c0262142a3}


Definition at line 237 of file muse.\+c.



Referenced by find\+\_\+defensive(), and use\+\_\+defensive().

\hypertarget{muse_8c_abad816ae5ba2b9882b006d16e7d2f83e}{\index{muse.\+c@{muse.\+c}!M\+U\+S\+E\+\_\+\+B\+U\+L\+L\+W\+H\+I\+P@{M\+U\+S\+E\+\_\+\+B\+U\+L\+L\+W\+H\+I\+P}}
\index{M\+U\+S\+E\+\_\+\+B\+U\+L\+L\+W\+H\+I\+P@{M\+U\+S\+E\+\_\+\+B\+U\+L\+L\+W\+H\+I\+P}!muse.\+c@{muse.\+c}}
\subsubsection[{M\+U\+S\+E\+\_\+\+B\+U\+L\+L\+W\+H\+I\+P}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+U\+S\+E\+\_\+\+B\+U\+L\+L\+W\+H\+I\+P~8}}\label{muse_8c_abad816ae5ba2b9882b006d16e7d2f83e}


Definition at line 1562 of file muse.\+c.



Referenced by find\+\_\+misc(), and use\+\_\+misc().

\hypertarget{muse_8c_a8b6bb02638dd25e2792567b13ffa4b40}{\index{muse.\+c@{muse.\+c}!M\+U\+S\+E\+\_\+\+D\+N\+\_\+\+L\+A\+D\+D\+E\+R@{M\+U\+S\+E\+\_\+\+D\+N\+\_\+\+L\+A\+D\+D\+E\+R}}
\index{M\+U\+S\+E\+\_\+\+D\+N\+\_\+\+L\+A\+D\+D\+E\+R@{M\+U\+S\+E\+\_\+\+D\+N\+\_\+\+L\+A\+D\+D\+E\+R}!muse.\+c@{muse.\+c}}
\subsubsection[{M\+U\+S\+E\+\_\+\+D\+N\+\_\+\+L\+A\+D\+D\+E\+R}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+U\+S\+E\+\_\+\+D\+N\+\_\+\+L\+A\+D\+D\+E\+R~13}}\label{muse_8c_a8b6bb02638dd25e2792567b13ffa4b40}


Definition at line 234 of file muse.\+c.



Referenced by find\+\_\+defensive(), and use\+\_\+defensive().

\hypertarget{muse_8c_ab8bc4c0e1f62324745690ad7514ceedf}{\index{muse.\+c@{muse.\+c}!M\+U\+S\+E\+\_\+\+D\+O\+W\+N\+S\+T\+A\+I\+R\+S@{M\+U\+S\+E\+\_\+\+D\+O\+W\+N\+S\+T\+A\+I\+R\+S}}
\index{M\+U\+S\+E\+\_\+\+D\+O\+W\+N\+S\+T\+A\+I\+R\+S@{M\+U\+S\+E\+\_\+\+D\+O\+W\+N\+S\+T\+A\+I\+R\+S}!muse.\+c@{muse.\+c}}
\subsubsection[{M\+U\+S\+E\+\_\+\+D\+O\+W\+N\+S\+T\+A\+I\+R\+S}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+U\+S\+E\+\_\+\+D\+O\+W\+N\+S\+T\+A\+I\+R\+S~9}}\label{muse_8c_ab8bc4c0e1f62324745690ad7514ceedf}


Definition at line 230 of file muse.\+c.



Referenced by find\+\_\+defensive(), and use\+\_\+defensive().

\hypertarget{muse_8c_afed852913471cdec8c3c09a5b74f3066}{\index{muse.\+c@{muse.\+c}!M\+U\+S\+E\+\_\+\+F\+I\+R\+E\+\_\+\+H\+O\+R\+N@{M\+U\+S\+E\+\_\+\+F\+I\+R\+E\+\_\+\+H\+O\+R\+N}}
\index{M\+U\+S\+E\+\_\+\+F\+I\+R\+E\+\_\+\+H\+O\+R\+N@{M\+U\+S\+E\+\_\+\+F\+I\+R\+E\+\_\+\+H\+O\+R\+N}!muse.\+c@{muse.\+c}}
\subsubsection[{M\+U\+S\+E\+\_\+\+F\+I\+R\+E\+\_\+\+H\+O\+R\+N}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+U\+S\+E\+\_\+\+F\+I\+R\+E\+\_\+\+H\+O\+R\+N~13}}\label{muse_8c_afed852913471cdec8c3c09a5b74f3066}


Definition at line 955 of file muse.\+c.



Referenced by find\+\_\+offensive(), and use\+\_\+offensive().

\hypertarget{muse_8c_a93600e9dc2ed44547dd403312a7e4d39}{\index{muse.\+c@{muse.\+c}!M\+U\+S\+E\+\_\+\+F\+R\+O\+S\+T\+\_\+\+H\+O\+R\+N@{M\+U\+S\+E\+\_\+\+F\+R\+O\+S\+T\+\_\+\+H\+O\+R\+N}}
\index{M\+U\+S\+E\+\_\+\+F\+R\+O\+S\+T\+\_\+\+H\+O\+R\+N@{M\+U\+S\+E\+\_\+\+F\+R\+O\+S\+T\+\_\+\+H\+O\+R\+N}!muse.\+c@{muse.\+c}}
\subsubsection[{M\+U\+S\+E\+\_\+\+F\+R\+O\+S\+T\+\_\+\+H\+O\+R\+N}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+U\+S\+E\+\_\+\+F\+R\+O\+S\+T\+\_\+\+H\+O\+R\+N~12}}\label{muse_8c_a93600e9dc2ed44547dd403312a7e4d39}


Definition at line 954 of file muse.\+c.



Referenced by find\+\_\+offensive(), and use\+\_\+offensive().

\hypertarget{muse_8c_a2fe45e61be8379e9eee713c6dc3763ad}{\index{muse.\+c@{muse.\+c}!M\+U\+S\+E\+\_\+\+L\+I\+Z\+A\+R\+D\+\_\+\+C\+O\+R\+P\+S\+E@{M\+U\+S\+E\+\_\+\+L\+I\+Z\+A\+R\+D\+\_\+\+C\+O\+R\+P\+S\+E}}
\index{M\+U\+S\+E\+\_\+\+L\+I\+Z\+A\+R\+D\+\_\+\+C\+O\+R\+P\+S\+E@{M\+U\+S\+E\+\_\+\+L\+I\+Z\+A\+R\+D\+\_\+\+C\+O\+R\+P\+S\+E}!muse.\+c@{muse.\+c}}
\subsubsection[{M\+U\+S\+E\+\_\+\+L\+I\+Z\+A\+R\+D\+\_\+\+C\+O\+R\+P\+S\+E}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+U\+S\+E\+\_\+\+L\+I\+Z\+A\+R\+D\+\_\+\+C\+O\+R\+P\+S\+E~19}}\label{muse_8c_a2fe45e61be8379e9eee713c6dc3763ad}


Definition at line 240 of file muse.\+c.



Referenced by find\+\_\+defensive(), and use\+\_\+defensive().

\hypertarget{muse_8c_ab7d2d5dff5b09c7981f2e901c6760f70}{\index{muse.\+c@{muse.\+c}!M\+U\+S\+E\+\_\+\+P\+O\+L\+Y\+\_\+\+T\+R\+A\+P@{M\+U\+S\+E\+\_\+\+P\+O\+L\+Y\+\_\+\+T\+R\+A\+P}}
\index{M\+U\+S\+E\+\_\+\+P\+O\+L\+Y\+\_\+\+T\+R\+A\+P@{M\+U\+S\+E\+\_\+\+P\+O\+L\+Y\+\_\+\+T\+R\+A\+P}!muse.\+c@{muse.\+c}}
\subsubsection[{M\+U\+S\+E\+\_\+\+P\+O\+L\+Y\+\_\+\+T\+R\+A\+P}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+U\+S\+E\+\_\+\+P\+O\+L\+Y\+\_\+\+T\+R\+A\+P~4}}\label{muse_8c_ab7d2d5dff5b09c7981f2e901c6760f70}


Definition at line 1558 of file muse.\+c.



Referenced by find\+\_\+misc(), and use\+\_\+misc().

\hypertarget{muse_8c_a4fa82597beb31f42c721811ca5abe33f}{\index{muse.\+c@{muse.\+c}!M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+A\+C\+I\+D@{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+A\+C\+I\+D}}
\index{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+A\+C\+I\+D@{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+A\+C\+I\+D}!muse.\+c@{muse.\+c}}
\subsubsection[{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+A\+C\+I\+D}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+A\+C\+I\+D~14}}\label{muse_8c_a4fa82597beb31f42c721811ca5abe33f}


Definition at line 956 of file muse.\+c.



Referenced by find\+\_\+offensive(), and use\+\_\+offensive().

\hypertarget{muse_8c_a3c3fd8d2297b5bb2c0a2752dcbe8674d}{\index{muse.\+c@{muse.\+c}!M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+B\+L\+I\+N\+D\+N\+E\+S\+S@{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+B\+L\+I\+N\+D\+N\+E\+S\+S}}
\index{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+B\+L\+I\+N\+D\+N\+E\+S\+S@{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+B\+L\+I\+N\+D\+N\+E\+S\+S}!muse.\+c@{muse.\+c}}
\subsubsection[{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+B\+L\+I\+N\+D\+N\+E\+S\+S}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+B\+L\+I\+N\+D\+N\+E\+S\+S~10}}\label{muse_8c_a3c3fd8d2297b5bb2c0a2752dcbe8674d}


Definition at line 952 of file muse.\+c.



Referenced by find\+\_\+offensive(), and use\+\_\+offensive().

\hypertarget{muse_8c_a6d1ffa992436d95af0d255efb356fc19}{\index{muse.\+c@{muse.\+c}!M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+C\+O\+N\+F\+U\+S\+I\+O\+N@{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+C\+O\+N\+F\+U\+S\+I\+O\+N}}
\index{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+C\+O\+N\+F\+U\+S\+I\+O\+N@{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+C\+O\+N\+F\+U\+S\+I\+O\+N}!muse.\+c@{muse.\+c}}
\subsubsection[{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+C\+O\+N\+F\+U\+S\+I\+O\+N}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+C\+O\+N\+F\+U\+S\+I\+O\+N~11}}\label{muse_8c_a6d1ffa992436d95af0d255efb356fc19}


Definition at line 953 of file muse.\+c.



Referenced by find\+\_\+offensive(), and use\+\_\+offensive().

\hypertarget{muse_8c_ad2669dea3dd392871c80929370ec342b}{\index{muse.\+c@{muse.\+c}!M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+E\+X\+T\+R\+A\+\_\+\+H\+E\+A\+L\+I\+N\+G@{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+E\+X\+T\+R\+A\+\_\+\+H\+E\+A\+L\+I\+N\+G}}
\index{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+E\+X\+T\+R\+A\+\_\+\+H\+E\+A\+L\+I\+N\+G@{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+E\+X\+T\+R\+A\+\_\+\+H\+E\+A\+L\+I\+N\+G}!muse.\+c@{muse.\+c}}
\subsubsection[{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+E\+X\+T\+R\+A\+\_\+\+H\+E\+A\+L\+I\+N\+G}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+E\+X\+T\+R\+A\+\_\+\+H\+E\+A\+L\+I\+N\+G~4}}\label{muse_8c_ad2669dea3dd392871c80929370ec342b}


Definition at line 225 of file muse.\+c.



Referenced by find\+\_\+defensive(), and use\+\_\+defensive().

\hypertarget{muse_8c_ab7a31f6e9ee18a59412d10b82f0570e7}{\index{muse.\+c@{muse.\+c}!M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+F\+U\+L\+L\+\_\+\+H\+E\+A\+L\+I\+N\+G@{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+F\+U\+L\+L\+\_\+\+H\+E\+A\+L\+I\+N\+G}}
\index{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+F\+U\+L\+L\+\_\+\+H\+E\+A\+L\+I\+N\+G@{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+F\+U\+L\+L\+\_\+\+H\+E\+A\+L\+I\+N\+G}!muse.\+c@{muse.\+c}}
\subsubsection[{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+F\+U\+L\+L\+\_\+\+H\+E\+A\+L\+I\+N\+G}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+F\+U\+L\+L\+\_\+\+H\+E\+A\+L\+I\+N\+G~18}}\label{muse_8c_ab7a31f6e9ee18a59412d10b82f0570e7}


Definition at line 239 of file muse.\+c.



Referenced by find\+\_\+defensive(), and use\+\_\+defensive().

\hypertarget{muse_8c_a8e37ee24a3248fee83db8cc6bebdd969}{\index{muse.\+c@{muse.\+c}!M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+G\+A\+I\+N\+\_\+\+L\+E\+V\+E\+L@{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+G\+A\+I\+N\+\_\+\+L\+E\+V\+E\+L}}
\index{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+G\+A\+I\+N\+\_\+\+L\+E\+V\+E\+L@{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+G\+A\+I\+N\+\_\+\+L\+E\+V\+E\+L}!muse.\+c@{muse.\+c}}
\subsubsection[{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+G\+A\+I\+N\+\_\+\+L\+E\+V\+E\+L}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+G\+A\+I\+N\+\_\+\+L\+E\+V\+E\+L~1}}\label{muse_8c_a8e37ee24a3248fee83db8cc6bebdd969}


Definition at line 1555 of file muse.\+c.



Referenced by find\+\_\+misc(), and use\+\_\+misc().

\hypertarget{muse_8c_a0df3ce17e1e03a5f846b7b404d0f75a8}{\index{muse.\+c@{muse.\+c}!M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+H\+E\+A\+L\+I\+N\+G@{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+H\+E\+A\+L\+I\+N\+G}}
\index{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+H\+E\+A\+L\+I\+N\+G@{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+H\+E\+A\+L\+I\+N\+G}!muse.\+c@{muse.\+c}}
\subsubsection[{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+H\+E\+A\+L\+I\+N\+G}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+H\+E\+A\+L\+I\+N\+G~3}}\label{muse_8c_a0df3ce17e1e03a5f846b7b404d0f75a8}


Definition at line 224 of file muse.\+c.



Referenced by find\+\_\+defensive(), and use\+\_\+defensive().

\hypertarget{muse_8c_a5980f169f9e08c086d1c4e588d9dd86d}{\index{muse.\+c@{muse.\+c}!M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+I\+N\+V\+I\+S\+I\+B\+I\+L\+I\+T\+Y@{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+I\+N\+V\+I\+S\+I\+B\+I\+L\+I\+T\+Y}}
\index{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+I\+N\+V\+I\+S\+I\+B\+I\+L\+I\+T\+Y@{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+I\+N\+V\+I\+S\+I\+B\+I\+L\+I\+T\+Y}!muse.\+c@{muse.\+c}}
\subsubsection[{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+I\+N\+V\+I\+S\+I\+B\+I\+L\+I\+T\+Y}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+I\+N\+V\+I\+S\+I\+B\+I\+L\+I\+T\+Y~3}}\label{muse_8c_a5980f169f9e08c086d1c4e588d9dd86d}


Definition at line 1557 of file muse.\+c.



Referenced by find\+\_\+misc(), and use\+\_\+misc().

\hypertarget{muse_8c_a27b03b7ceea5b8226cadd34496353139}{\index{muse.\+c@{muse.\+c}!M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+P\+A\+R\+A\+L\+Y\+S\+I\+S@{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+P\+A\+R\+A\+L\+Y\+S\+I\+S}}
\index{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+P\+A\+R\+A\+L\+Y\+S\+I\+S@{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+P\+A\+R\+A\+L\+Y\+S\+I\+S}!muse.\+c@{muse.\+c}}
\subsubsection[{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+P\+A\+R\+A\+L\+Y\+S\+I\+S}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+P\+A\+R\+A\+L\+Y\+S\+I\+S~9}}\label{muse_8c_a27b03b7ceea5b8226cadd34496353139}


Definition at line 951 of file muse.\+c.



Referenced by find\+\_\+offensive(), and use\+\_\+offensive().

\hypertarget{muse_8c_a43d2aa2b768ead263f72c437525539c6}{\index{muse.\+c@{muse.\+c}!M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+P\+O\+L\+Y\+M\+O\+R\+P\+H@{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+P\+O\+L\+Y\+M\+O\+R\+P\+H}}
\index{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+P\+O\+L\+Y\+M\+O\+R\+P\+H@{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+P\+O\+L\+Y\+M\+O\+R\+P\+H}!muse.\+c@{muse.\+c}}
\subsubsection[{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+P\+O\+L\+Y\+M\+O\+R\+P\+H}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+P\+O\+L\+Y\+M\+O\+R\+P\+H~9}}\label{muse_8c_a43d2aa2b768ead263f72c437525539c6}


Definition at line 1563 of file muse.\+c.



Referenced by find\+\_\+misc(), and use\+\_\+misc().

\hypertarget{muse_8c_a131d30d36bd756962ddba0a71dc1ee0e}{\index{muse.\+c@{muse.\+c}!M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+S\+L\+E\+E\+P\+I\+N\+G@{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+S\+L\+E\+E\+P\+I\+N\+G}}
\index{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+S\+L\+E\+E\+P\+I\+N\+G@{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+S\+L\+E\+E\+P\+I\+N\+G}!muse.\+c@{muse.\+c}}
\subsubsection[{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+S\+L\+E\+E\+P\+I\+N\+G}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+S\+L\+E\+E\+P\+I\+N\+G~16}}\label{muse_8c_a131d30d36bd756962ddba0a71dc1ee0e}


Definition at line 958 of file muse.\+c.



Referenced by find\+\_\+offensive(), and use\+\_\+offensive().

\hypertarget{muse_8c_a7aa4b264c72038d91f1eaaf212b15ad6}{\index{muse.\+c@{muse.\+c}!M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+S\+P\+E\+E\+D@{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+S\+P\+E\+E\+D}}
\index{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+S\+P\+E\+E\+D@{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+S\+P\+E\+E\+D}!muse.\+c@{muse.\+c}}
\subsubsection[{M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+S\+P\+E\+E\+D}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+S\+P\+E\+E\+D~6}}\label{muse_8c_a7aa4b264c72038d91f1eaaf212b15ad6}


Definition at line 1560 of file muse.\+c.



Referenced by find\+\_\+misc(), and use\+\_\+misc().

\hypertarget{muse_8c_aca65a80f05166317ea20ec0f4b8dcaf9}{\index{muse.\+c@{muse.\+c}!M\+U\+S\+E\+\_\+\+S\+C\+R\+\_\+\+C\+R\+E\+A\+T\+E\+\_\+\+M\+O\+N\+S\+T\+E\+R@{M\+U\+S\+E\+\_\+\+S\+C\+R\+\_\+\+C\+R\+E\+A\+T\+E\+\_\+\+M\+O\+N\+S\+T\+E\+R}}
\index{M\+U\+S\+E\+\_\+\+S\+C\+R\+\_\+\+C\+R\+E\+A\+T\+E\+\_\+\+M\+O\+N\+S\+T\+E\+R@{M\+U\+S\+E\+\_\+\+S\+C\+R\+\_\+\+C\+R\+E\+A\+T\+E\+\_\+\+M\+O\+N\+S\+T\+E\+R}!muse.\+c@{muse.\+c}}
\subsubsection[{M\+U\+S\+E\+\_\+\+S\+C\+R\+\_\+\+C\+R\+E\+A\+T\+E\+\_\+\+M\+O\+N\+S\+T\+E\+R}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+U\+S\+E\+\_\+\+S\+C\+R\+\_\+\+C\+R\+E\+A\+T\+E\+\_\+\+M\+O\+N\+S\+T\+E\+R~11}}\label{muse_8c_aca65a80f05166317ea20ec0f4b8dcaf9}


Definition at line 232 of file muse.\+c.



Referenced by find\+\_\+defensive(), and use\+\_\+defensive().

\hypertarget{muse_8c_ad15e1902de0142f63a7d7956359ba185}{\index{muse.\+c@{muse.\+c}!M\+U\+S\+E\+\_\+\+S\+C\+R\+\_\+\+E\+A\+R\+T\+H@{M\+U\+S\+E\+\_\+\+S\+C\+R\+\_\+\+E\+A\+R\+T\+H}}
\index{M\+U\+S\+E\+\_\+\+S\+C\+R\+\_\+\+E\+A\+R\+T\+H@{M\+U\+S\+E\+\_\+\+S\+C\+R\+\_\+\+E\+A\+R\+T\+H}!muse.\+c@{muse.\+c}}
\subsubsection[{M\+U\+S\+E\+\_\+\+S\+C\+R\+\_\+\+E\+A\+R\+T\+H}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+U\+S\+E\+\_\+\+S\+C\+R\+\_\+\+E\+A\+R\+T\+H~17}}\label{muse_8c_ad15e1902de0142f63a7d7956359ba185}


Definition at line 959 of file muse.\+c.



Referenced by find\+\_\+offensive(), and use\+\_\+offensive().

\hypertarget{muse_8c_a368c98dc7e6a48b4d5807d2f4e166d5d}{\index{muse.\+c@{muse.\+c}!M\+U\+S\+E\+\_\+\+S\+C\+R\+\_\+\+F\+I\+R\+E@{M\+U\+S\+E\+\_\+\+S\+C\+R\+\_\+\+F\+I\+R\+E}}
\index{M\+U\+S\+E\+\_\+\+S\+C\+R\+\_\+\+F\+I\+R\+E@{M\+U\+S\+E\+\_\+\+S\+C\+R\+\_\+\+F\+I\+R\+E}!muse.\+c@{muse.\+c}}
\subsubsection[{M\+U\+S\+E\+\_\+\+S\+C\+R\+\_\+\+F\+I\+R\+E}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+U\+S\+E\+\_\+\+S\+C\+R\+\_\+\+F\+I\+R\+E~8}}\label{muse_8c_a368c98dc7e6a48b4d5807d2f4e166d5d}


Definition at line 950 of file muse.\+c.



Referenced by find\+\_\+offensive(), and use\+\_\+offensive().

\hypertarget{muse_8c_af74f3efeafb0279b1628e94ccbb86c49}{\index{muse.\+c@{muse.\+c}!M\+U\+S\+E\+\_\+\+S\+C\+R\+\_\+\+T\+E\+L\+E\+P\+O\+R\+T\+A\+T\+I\+O\+N@{M\+U\+S\+E\+\_\+\+S\+C\+R\+\_\+\+T\+E\+L\+E\+P\+O\+R\+T\+A\+T\+I\+O\+N}}
\index{M\+U\+S\+E\+\_\+\+S\+C\+R\+\_\+\+T\+E\+L\+E\+P\+O\+R\+T\+A\+T\+I\+O\+N@{M\+U\+S\+E\+\_\+\+S\+C\+R\+\_\+\+T\+E\+L\+E\+P\+O\+R\+T\+A\+T\+I\+O\+N}!muse.\+c@{muse.\+c}}
\subsubsection[{M\+U\+S\+E\+\_\+\+S\+C\+R\+\_\+\+T\+E\+L\+E\+P\+O\+R\+T\+A\+T\+I\+O\+N}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+U\+S\+E\+\_\+\+S\+C\+R\+\_\+\+T\+E\+L\+E\+P\+O\+R\+T\+A\+T\+I\+O\+N~1}}\label{muse_8c_af74f3efeafb0279b1628e94ccbb86c49}


Definition at line 222 of file muse.\+c.



Referenced by find\+\_\+defensive(), and use\+\_\+defensive().

\hypertarget{muse_8c_afb239ce4101fdff4659cb3c6c0184515}{\index{muse.\+c@{muse.\+c}!M\+U\+S\+E\+\_\+\+S\+S\+T\+A\+I\+R\+S@{M\+U\+S\+E\+\_\+\+S\+S\+T\+A\+I\+R\+S}}
\index{M\+U\+S\+E\+\_\+\+S\+S\+T\+A\+I\+R\+S@{M\+U\+S\+E\+\_\+\+S\+S\+T\+A\+I\+R\+S}!muse.\+c@{muse.\+c}}
\subsubsection[{M\+U\+S\+E\+\_\+\+S\+S\+T\+A\+I\+R\+S}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+U\+S\+E\+\_\+\+S\+S\+T\+A\+I\+R\+S~14}}\label{muse_8c_afb239ce4101fdff4659cb3c6c0184515}


Definition at line 235 of file muse.\+c.



Referenced by find\+\_\+defensive(), and use\+\_\+defensive().

\hypertarget{muse_8c_ae214c66b1ac1efc477fa9029885ed414}{\index{muse.\+c@{muse.\+c}!M\+U\+S\+E\+\_\+\+T\+E\+L\+E\+P\+O\+R\+T\+\_\+\+T\+R\+A\+P@{M\+U\+S\+E\+\_\+\+T\+E\+L\+E\+P\+O\+R\+T\+\_\+\+T\+R\+A\+P}}
\index{M\+U\+S\+E\+\_\+\+T\+E\+L\+E\+P\+O\+R\+T\+\_\+\+T\+R\+A\+P@{M\+U\+S\+E\+\_\+\+T\+E\+L\+E\+P\+O\+R\+T\+\_\+\+T\+R\+A\+P}!muse.\+c@{muse.\+c}}
\subsubsection[{M\+U\+S\+E\+\_\+\+T\+E\+L\+E\+P\+O\+R\+T\+\_\+\+T\+R\+A\+P}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+U\+S\+E\+\_\+\+T\+E\+L\+E\+P\+O\+R\+T\+\_\+\+T\+R\+A\+P~7}}\label{muse_8c_ae214c66b1ac1efc477fa9029885ed414}


Definition at line 228 of file muse.\+c.



Referenced by find\+\_\+defensive(), and use\+\_\+defensive().

\hypertarget{muse_8c_a0e7d3c03f0220672e4f8ed17d3a8642a}{\index{muse.\+c@{muse.\+c}!M\+U\+S\+E\+\_\+\+T\+R\+A\+P\+D\+O\+O\+R@{M\+U\+S\+E\+\_\+\+T\+R\+A\+P\+D\+O\+O\+R}}
\index{M\+U\+S\+E\+\_\+\+T\+R\+A\+P\+D\+O\+O\+R@{M\+U\+S\+E\+\_\+\+T\+R\+A\+P\+D\+O\+O\+R}!muse.\+c@{muse.\+c}}
\subsubsection[{M\+U\+S\+E\+\_\+\+T\+R\+A\+P\+D\+O\+O\+R}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+U\+S\+E\+\_\+\+T\+R\+A\+P\+D\+O\+O\+R~6}}\label{muse_8c_a0e7d3c03f0220672e4f8ed17d3a8642a}


Definition at line 227 of file muse.\+c.



Referenced by find\+\_\+defensive(), and use\+\_\+defensive().

\hypertarget{muse_8c_a4a89c8817e3ac83ff990ba42c966b1b4}{\index{muse.\+c@{muse.\+c}!M\+U\+S\+E\+\_\+\+U\+N\+I\+C\+O\+R\+N\+\_\+\+H\+O\+R\+N@{M\+U\+S\+E\+\_\+\+U\+N\+I\+C\+O\+R\+N\+\_\+\+H\+O\+R\+N}}
\index{M\+U\+S\+E\+\_\+\+U\+N\+I\+C\+O\+R\+N\+\_\+\+H\+O\+R\+N@{M\+U\+S\+E\+\_\+\+U\+N\+I\+C\+O\+R\+N\+\_\+\+H\+O\+R\+N}!muse.\+c@{muse.\+c}}
\subsubsection[{M\+U\+S\+E\+\_\+\+U\+N\+I\+C\+O\+R\+N\+\_\+\+H\+O\+R\+N}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+U\+S\+E\+\_\+\+U\+N\+I\+C\+O\+R\+N\+\_\+\+H\+O\+R\+N~17}}\label{muse_8c_a4a89c8817e3ac83ff990ba42c966b1b4}


Definition at line 238 of file muse.\+c.



Referenced by find\+\_\+defensive(), and use\+\_\+defensive().

\hypertarget{muse_8c_af6e16437d305120ec5871ba0b013995b}{\index{muse.\+c@{muse.\+c}!M\+U\+S\+E\+\_\+\+U\+P\+\_\+\+L\+A\+D\+D\+E\+R@{M\+U\+S\+E\+\_\+\+U\+P\+\_\+\+L\+A\+D\+D\+E\+R}}
\index{M\+U\+S\+E\+\_\+\+U\+P\+\_\+\+L\+A\+D\+D\+E\+R@{M\+U\+S\+E\+\_\+\+U\+P\+\_\+\+L\+A\+D\+D\+E\+R}!muse.\+c@{muse.\+c}}
\subsubsection[{M\+U\+S\+E\+\_\+\+U\+P\+\_\+\+L\+A\+D\+D\+E\+R}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+U\+S\+E\+\_\+\+U\+P\+\_\+\+L\+A\+D\+D\+E\+R~12}}\label{muse_8c_af6e16437d305120ec5871ba0b013995b}


Definition at line 233 of file muse.\+c.



Referenced by find\+\_\+defensive(), and use\+\_\+defensive().

\hypertarget{muse_8c_af8ea585a3a5abf202c8bfc6e567d4294}{\index{muse.\+c@{muse.\+c}!M\+U\+S\+E\+\_\+\+U\+P\+S\+T\+A\+I\+R\+S@{M\+U\+S\+E\+\_\+\+U\+P\+S\+T\+A\+I\+R\+S}}
\index{M\+U\+S\+E\+\_\+\+U\+P\+S\+T\+A\+I\+R\+S@{M\+U\+S\+E\+\_\+\+U\+P\+S\+T\+A\+I\+R\+S}!muse.\+c@{muse.\+c}}
\subsubsection[{M\+U\+S\+E\+\_\+\+U\+P\+S\+T\+A\+I\+R\+S}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+U\+S\+E\+\_\+\+U\+P\+S\+T\+A\+I\+R\+S~8}}\label{muse_8c_af8ea585a3a5abf202c8bfc6e567d4294}


Definition at line 229 of file muse.\+c.



Referenced by find\+\_\+defensive(), and use\+\_\+defensive().

\hypertarget{muse_8c_a2a7c82f0a9d3bbec9f905e7a61081360}{\index{muse.\+c@{muse.\+c}!M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+C\+O\+L\+D@{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+C\+O\+L\+D}}
\index{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+C\+O\+L\+D@{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+C\+O\+L\+D}!muse.\+c@{muse.\+c}}
\subsubsection[{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+C\+O\+L\+D}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+C\+O\+L\+D~4}}\label{muse_8c_a2a7c82f0a9d3bbec9f905e7a61081360}


Definition at line 946 of file muse.\+c.



Referenced by find\+\_\+offensive(), and use\+\_\+offensive().

\hypertarget{muse_8c_af007015cef270071dd8bb072fb030842}{\index{muse.\+c@{muse.\+c}!M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+C\+R\+E\+A\+T\+E\+\_\+\+M\+O\+N\+S\+T\+E\+R@{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+C\+R\+E\+A\+T\+E\+\_\+\+M\+O\+N\+S\+T\+E\+R}}
\index{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+C\+R\+E\+A\+T\+E\+\_\+\+M\+O\+N\+S\+T\+E\+R@{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+C\+R\+E\+A\+T\+E\+\_\+\+M\+O\+N\+S\+T\+E\+R}!muse.\+c@{muse.\+c}}
\subsubsection[{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+C\+R\+E\+A\+T\+E\+\_\+\+M\+O\+N\+S\+T\+E\+R}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+C\+R\+E\+A\+T\+E\+\_\+\+M\+O\+N\+S\+T\+E\+R~10}}\label{muse_8c_af007015cef270071dd8bb072fb030842}


Definition at line 231 of file muse.\+c.



Referenced by find\+\_\+defensive(), and use\+\_\+defensive().

\hypertarget{muse_8c_a74b936ceb6d08cd647c24b7a9855bbd2}{\index{muse.\+c@{muse.\+c}!M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+D\+E\+A\+T\+H@{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+D\+E\+A\+T\+H}}
\index{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+D\+E\+A\+T\+H@{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+D\+E\+A\+T\+H}!muse.\+c@{muse.\+c}}
\subsubsection[{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+D\+E\+A\+T\+H}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+D\+E\+A\+T\+H~1}}\label{muse_8c_a74b936ceb6d08cd647c24b7a9855bbd2}


Definition at line 943 of file muse.\+c.



Referenced by find\+\_\+offensive(), and use\+\_\+offensive().

\hypertarget{muse_8c_ae588a7b81156914902b8ad9d1755e7f0}{\index{muse.\+c@{muse.\+c}!M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+D\+I\+G\+G\+I\+N\+G@{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+D\+I\+G\+G\+I\+N\+G}}
\index{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+D\+I\+G\+G\+I\+N\+G@{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+D\+I\+G\+G\+I\+N\+G}!muse.\+c@{muse.\+c}}
\subsubsection[{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+D\+I\+G\+G\+I\+N\+G}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+D\+I\+G\+G\+I\+N\+G~5}}\label{muse_8c_ae588a7b81156914902b8ad9d1755e7f0}


Definition at line 226 of file muse.\+c.



Referenced by find\+\_\+defensive(), and use\+\_\+defensive().

\hypertarget{muse_8c_a5e2f9b11f00feb26f70d53f2f525afcc}{\index{muse.\+c@{muse.\+c}!M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+F\+I\+R\+E@{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+F\+I\+R\+E}}
\index{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+F\+I\+R\+E@{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+F\+I\+R\+E}!muse.\+c@{muse.\+c}}
\subsubsection[{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+F\+I\+R\+E}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+F\+I\+R\+E~3}}\label{muse_8c_a5e2f9b11f00feb26f70d53f2f525afcc}


Definition at line 945 of file muse.\+c.



Referenced by find\+\_\+offensive(), and use\+\_\+offensive().

\hypertarget{muse_8c_af30cdd1527f03e100e0a8863fbaf0e36}{\index{muse.\+c@{muse.\+c}!M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+L\+I\+G\+H\+T\+N\+I\+N\+G@{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+L\+I\+G\+H\+T\+N\+I\+N\+G}}
\index{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+L\+I\+G\+H\+T\+N\+I\+N\+G@{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+L\+I\+G\+H\+T\+N\+I\+N\+G}!muse.\+c@{muse.\+c}}
\subsubsection[{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+L\+I\+G\+H\+T\+N\+I\+N\+G}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+L\+I\+G\+H\+T\+N\+I\+N\+G~5}}\label{muse_8c_af30cdd1527f03e100e0a8863fbaf0e36}


Definition at line 947 of file muse.\+c.



Referenced by find\+\_\+offensive(), and use\+\_\+offensive().

\hypertarget{muse_8c_a55b22ac9743ab572be04691e3085cacf}{\index{muse.\+c@{muse.\+c}!M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+M\+A\+G\+I\+C\+\_\+\+M\+I\+S\+S\+I\+L\+E@{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+M\+A\+G\+I\+C\+\_\+\+M\+I\+S\+S\+I\+L\+E}}
\index{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+M\+A\+G\+I\+C\+\_\+\+M\+I\+S\+S\+I\+L\+E@{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+M\+A\+G\+I\+C\+\_\+\+M\+I\+S\+S\+I\+L\+E}!muse.\+c@{muse.\+c}}
\subsubsection[{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+M\+A\+G\+I\+C\+\_\+\+M\+I\+S\+S\+I\+L\+E}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+M\+A\+G\+I\+C\+\_\+\+M\+I\+S\+S\+I\+L\+E~6}}\label{muse_8c_a55b22ac9743ab572be04691e3085cacf}


Definition at line 948 of file muse.\+c.



Referenced by find\+\_\+offensive(), and use\+\_\+offensive().

\hypertarget{muse_8c_ad01022eb368493aae7bf0e1959bce963}{\index{muse.\+c@{muse.\+c}!M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+M\+A\+K\+E\+\_\+\+I\+N\+V\+I\+S\+I\+B\+L\+E@{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+M\+A\+K\+E\+\_\+\+I\+N\+V\+I\+S\+I\+B\+L\+E}}
\index{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+M\+A\+K\+E\+\_\+\+I\+N\+V\+I\+S\+I\+B\+L\+E@{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+M\+A\+K\+E\+\_\+\+I\+N\+V\+I\+S\+I\+B\+L\+E}!muse.\+c@{muse.\+c}}
\subsubsection[{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+M\+A\+K\+E\+\_\+\+I\+N\+V\+I\+S\+I\+B\+L\+E}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+M\+A\+K\+E\+\_\+\+I\+N\+V\+I\+S\+I\+B\+L\+E~2}}\label{muse_8c_ad01022eb368493aae7bf0e1959bce963}


Definition at line 1556 of file muse.\+c.



Referenced by find\+\_\+misc(), and use\+\_\+misc().

\hypertarget{muse_8c_acfb9e6f9d58209f1808dfd315b54b723}{\index{muse.\+c@{muse.\+c}!M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+P\+O\+L\+Y\+M\+O\+R\+P\+H@{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+P\+O\+L\+Y\+M\+O\+R\+P\+H}}
\index{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+P\+O\+L\+Y\+M\+O\+R\+P\+H@{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+P\+O\+L\+Y\+M\+O\+R\+P\+H}!muse.\+c@{muse.\+c}}
\subsubsection[{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+P\+O\+L\+Y\+M\+O\+R\+P\+H}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+P\+O\+L\+Y\+M\+O\+R\+P\+H~5}}\label{muse_8c_acfb9e6f9d58209f1808dfd315b54b723}


Definition at line 1559 of file muse.\+c.



Referenced by find\+\_\+misc(), and use\+\_\+misc().

\hypertarget{muse_8c_a35caddb6a36b66c17683384e434a61cc}{\index{muse.\+c@{muse.\+c}!M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+S\+L\+E\+E\+P@{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+S\+L\+E\+E\+P}}
\index{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+S\+L\+E\+E\+P@{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+S\+L\+E\+E\+P}!muse.\+c@{muse.\+c}}
\subsubsection[{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+S\+L\+E\+E\+P}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+S\+L\+E\+E\+P~2}}\label{muse_8c_a35caddb6a36b66c17683384e434a61cc}


Definition at line 944 of file muse.\+c.



Referenced by find\+\_\+offensive(), and use\+\_\+offensive().

\hypertarget{muse_8c_a7704f2590b3a038a641deda61b84f58b}{\index{muse.\+c@{muse.\+c}!M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+S\+P\+E\+E\+D\+\_\+\+M\+O\+N\+S\+T\+E\+R@{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+S\+P\+E\+E\+D\+\_\+\+M\+O\+N\+S\+T\+E\+R}}
\index{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+S\+P\+E\+E\+D\+\_\+\+M\+O\+N\+S\+T\+E\+R@{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+S\+P\+E\+E\+D\+\_\+\+M\+O\+N\+S\+T\+E\+R}!muse.\+c@{muse.\+c}}
\subsubsection[{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+S\+P\+E\+E\+D\+\_\+\+M\+O\+N\+S\+T\+E\+R}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+S\+P\+E\+E\+D\+\_\+\+M\+O\+N\+S\+T\+E\+R~7}}\label{muse_8c_a7704f2590b3a038a641deda61b84f58b}


Definition at line 1561 of file muse.\+c.



Referenced by find\+\_\+misc(), and use\+\_\+misc().

\hypertarget{muse_8c_ae54e2ee0bcdc7628cd790b1b1277dfc7}{\index{muse.\+c@{muse.\+c}!M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+S\+T\+R\+I\+K\+I\+N\+G@{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+S\+T\+R\+I\+K\+I\+N\+G}}
\index{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+S\+T\+R\+I\+K\+I\+N\+G@{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+S\+T\+R\+I\+K\+I\+N\+G}!muse.\+c@{muse.\+c}}
\subsubsection[{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+S\+T\+R\+I\+K\+I\+N\+G}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+S\+T\+R\+I\+K\+I\+N\+G~7}}\label{muse_8c_ae54e2ee0bcdc7628cd790b1b1277dfc7}


Definition at line 949 of file muse.\+c.



Referenced by find\+\_\+offensive(), and use\+\_\+offensive().

\hypertarget{muse_8c_aee63b5574e746304cab9cbb88e1de182}{\index{muse.\+c@{muse.\+c}!M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+T\+E\+L\+E\+P\+O\+R\+T\+A\+T\+I\+O\+N@{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+T\+E\+L\+E\+P\+O\+R\+T\+A\+T\+I\+O\+N}}
\index{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+T\+E\+L\+E\+P\+O\+R\+T\+A\+T\+I\+O\+N@{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+T\+E\+L\+E\+P\+O\+R\+T\+A\+T\+I\+O\+N}!muse.\+c@{muse.\+c}}
\subsubsection[{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+T\+E\+L\+E\+P\+O\+R\+T\+A\+T\+I\+O\+N}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+T\+E\+L\+E\+P\+O\+R\+T\+A\+T\+I\+O\+N~15}}\label{muse_8c_aee63b5574e746304cab9cbb88e1de182}


Definition at line 236 of file muse.\+c.



Referenced by find\+\_\+defensive(), use\+\_\+defensive(), and use\+\_\+offensive().

\hypertarget{muse_8c_aa867e434d7b697f9fc8d1db9b216a198}{\index{muse.\+c@{muse.\+c}!M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+T\+E\+L\+E\+P\+O\+R\+T\+A\+T\+I\+O\+N\+\_\+\+S\+E\+L\+F@{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+T\+E\+L\+E\+P\+O\+R\+T\+A\+T\+I\+O\+N\+\_\+\+S\+E\+L\+F}}
\index{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+T\+E\+L\+E\+P\+O\+R\+T\+A\+T\+I\+O\+N\+\_\+\+S\+E\+L\+F@{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+T\+E\+L\+E\+P\+O\+R\+T\+A\+T\+I\+O\+N\+\_\+\+S\+E\+L\+F}!muse.\+c@{muse.\+c}}
\subsubsection[{M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+T\+E\+L\+E\+P\+O\+R\+T\+A\+T\+I\+O\+N\+\_\+\+S\+E\+L\+F}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+T\+E\+L\+E\+P\+O\+R\+T\+A\+T\+I\+O\+N\+\_\+\+S\+E\+L\+F~2}}\label{muse_8c_aa867e434d7b697f9fc8d1db9b216a198}


Definition at line 223 of file muse.\+c.



Referenced by find\+\_\+defensive(), and use\+\_\+defensive().

\hypertarget{muse_8c_af624e874fc8909c7570dba15e9e64cbc}{\index{muse.\+c@{muse.\+c}!nomore@{nomore}}
\index{nomore@{nomore}!muse.\+c@{muse.\+c}}
\subsubsection[{nomore}]{\setlength{\rightskip}{0pt plus 5cm}\#define nomore(
\begin{DoxyParamCaption}
\item[{}]{x}
\end{DoxyParamCaption}
)~if(m.\+has\+\_\+defense==x) continue;}}\label{muse_8c_af624e874fc8909c7570dba15e9e64cbc}


Referenced by find\+\_\+defensive(), find\+\_\+misc(), and find\+\_\+offensive().

\hypertarget{muse_8c_af624e874fc8909c7570dba15e9e64cbc}{\index{muse.\+c@{muse.\+c}!nomore@{nomore}}
\index{nomore@{nomore}!muse.\+c@{muse.\+c}}
\subsubsection[{nomore}]{\setlength{\rightskip}{0pt plus 5cm}\#define nomore(
\begin{DoxyParamCaption}
\item[{}]{x}
\end{DoxyParamCaption}
)~if(m.\+has\+\_\+offense==x) continue;}}\label{muse_8c_af624e874fc8909c7570dba15e9e64cbc}
\hypertarget{muse_8c_af624e874fc8909c7570dba15e9e64cbc}{\index{muse.\+c@{muse.\+c}!nomore@{nomore}}
\index{nomore@{nomore}!muse.\+c@{muse.\+c}}
\subsubsection[{nomore}]{\setlength{\rightskip}{0pt plus 5cm}\#define nomore(
\begin{DoxyParamCaption}
\item[{}]{x}
\end{DoxyParamCaption}
)~if(m.\+has\+\_\+misc==x) continue;}}\label{muse_8c_af624e874fc8909c7570dba15e9e64cbc}
\hypertarget{muse_8c_ab34ec85e4c86b57a1e1c4ec8e4d3a5a6}{\index{muse.\+c@{muse.\+c}!P\+O\+T\+I\+O\+N\+\_\+\+O\+C\+C\+U\+P\+A\+N\+T\+\_\+\+C\+H\+A\+N\+C\+E@{P\+O\+T\+I\+O\+N\+\_\+\+O\+C\+C\+U\+P\+A\+N\+T\+\_\+\+C\+H\+A\+N\+C\+E}}
\index{P\+O\+T\+I\+O\+N\+\_\+\+O\+C\+C\+U\+P\+A\+N\+T\+\_\+\+C\+H\+A\+N\+C\+E@{P\+O\+T\+I\+O\+N\+\_\+\+O\+C\+C\+U\+P\+A\+N\+T\+\_\+\+C\+H\+A\+N\+C\+E}!muse.\+c@{muse.\+c}}
\subsubsection[{P\+O\+T\+I\+O\+N\+\_\+\+O\+C\+C\+U\+P\+A\+N\+T\+\_\+\+C\+H\+A\+N\+C\+E}]{\setlength{\rightskip}{0pt plus 5cm}\#define P\+O\+T\+I\+O\+N\+\_\+\+O\+C\+C\+U\+P\+A\+N\+T\+\_\+\+C\+H\+A\+N\+C\+E(
\begin{DoxyParamCaption}
\item[{}]{n}
\end{DoxyParamCaption}
)~(13 + 2$\ast$(n))	/$\ast$ also {\bf in} potion.\+c $\ast$/}}\label{muse_8c_ab34ec85e4c86b57a1e1c4ec8e4d3a5a6}


Referenced by precheck().



\subsection{Function Documentation}
\hypertarget{muse_8c_af9a1a21b0ebab029aaf3a3dd250ec732}{\index{muse.\+c@{muse.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!muse.\+c@{muse.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} struct {\bf permonst}$\ast$ F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf muse\+\_\+newcham\+\_\+mon}}]{, }
\item[{(struct {\bf monst} $\ast$)}]{}
\end{DoxyParamCaption}
)}}\label{muse_8c_af9a1a21b0ebab029aaf3a3dd250ec732}
\hypertarget{muse_8c_a79ffe0030b2fef072de9c5caccaf3500}{\index{muse.\+c@{muse.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!muse.\+c@{muse.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} int F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf precheck}}]{, }
\item[{(struct {\bf monst} $\ast$, struct {\bf obj} $\ast$)}]{}
\end{DoxyParamCaption}
)}}\label{muse_8c_a79ffe0030b2fef072de9c5caccaf3500}
\hypertarget{muse_8c_a70500a43f645df507f2f9c3ad358ef28}{\index{muse.\+c@{muse.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!muse.\+c@{muse.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} void F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf mzapmsg}}]{, }
\item[{(struct {\bf monst} $\ast$, struct {\bf obj} $\ast$, {\bf B\+O\+O\+L\+E\+A\+N\+\_\+\+P})}]{}
\end{DoxyParamCaption}
)}}\label{muse_8c_a70500a43f645df507f2f9c3ad358ef28}
\hypertarget{muse_8c_a6c77cc4c937a46310a43b9e99c61e979}{\index{muse.\+c@{muse.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!muse.\+c@{muse.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} void F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf mreadmsg}}]{, }
\item[{(struct {\bf monst} $\ast$, struct {\bf obj} $\ast$)}]{}
\end{DoxyParamCaption}
)}}\label{muse_8c_a6c77cc4c937a46310a43b9e99c61e979}
\hypertarget{muse_8c_ae2f82924872fde07dbabc7aa233a1c73}{\index{muse.\+c@{muse.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!muse.\+c@{muse.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} void F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf mquaffmsg}}]{, }
\item[{(struct {\bf monst} $\ast$, struct {\bf obj} $\ast$)}]{}
\end{DoxyParamCaption}
)}}\label{muse_8c_ae2f82924872fde07dbabc7aa233a1c73}
\hypertarget{muse_8c_a95f729bbe5e3d3b470d03d8d2a1acfea}{\index{muse.\+c@{muse.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!muse.\+c@{muse.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+P\+T\+R} int F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf mbhitm}}]{, }
\item[{(struct {\bf monst} $\ast$, struct {\bf obj} $\ast$)}]{}
\end{DoxyParamCaption}
)}}\label{muse_8c_a95f729bbe5e3d3b470d03d8d2a1acfea}
\hypertarget{muse_8c_a6930bc1876b94407f770ccff8deb28e2}{\index{muse.\+c@{muse.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!muse.\+c@{muse.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} void F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf mbhit}}]{, }
\item[{(struct {\bf monst} $\ast$, int, int F\+D\+E\+C\+L(($\ast$),({\bf M\+O\+N\+S\+T\+\_\+\+P}, {\bf O\+B\+J\+\_\+\+P})), int F\+D\+E\+C\+L(($\ast$),({\bf O\+B\+J\+\_\+\+P}, {\bf O\+B\+J\+\_\+\+P})), struct {\bf obj} $\ast$)}]{}
\end{DoxyParamCaption}
)}}\label{muse_8c_a6930bc1876b94407f770ccff8deb28e2}
\hypertarget{muse_8c_a2a9b378a6127d10add5ec2571baa1bac}{\index{muse.\+c@{muse.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!muse.\+c@{muse.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} void F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf you\+\_\+aggravate}}]{, }
\item[{(struct {\bf monst} $\ast$)}]{}
\end{DoxyParamCaption}
)}}\label{muse_8c_a2a9b378a6127d10add5ec2571baa1bac}
\hypertarget{muse_8c_ab0edfef54eedc5717198ca6aed0d1ae4}{\index{muse.\+c@{muse.\+c}!F\+D\+E\+C\+L@{F\+D\+E\+C\+L}}
\index{F\+D\+E\+C\+L@{F\+D\+E\+C\+L}!muse.\+c@{muse.\+c}}
\subsubsection[{F\+D\+E\+C\+L}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+D\+C\+L} void F\+D\+E\+C\+L (
\begin{DoxyParamCaption}
\item[{{\bf mon\+\_\+consume\+\_\+unstone}}]{, }
\item[{(struct {\bf monst} $\ast$, struct {\bf obj} $\ast$, {\bf B\+O\+O\+L\+E\+A\+N\+\_\+\+P}, {\bf B\+O\+O\+L\+E\+A\+N\+\_\+\+P})}]{}
\end{DoxyParamCaption}
)}}\label{muse_8c_ab0edfef54eedc5717198ca6aed0d1ae4}
\hypertarget{muse_8c_a722f2ce1744ef42a90b6aa54e38c97a4}{\index{muse.\+c@{muse.\+c}!find\+\_\+defensive@{find\+\_\+defensive}}
\index{find\+\_\+defensive@{find\+\_\+defensive}!muse.\+c@{muse.\+c}}
\subsubsection[{find\+\_\+defensive}]{\setlength{\rightskip}{0pt plus 5cm}{\bf boolean} find\+\_\+defensive (
\begin{DoxyParamCaption}
\item[{struct {\bf monst} $\ast$}]{mtmp}
\end{DoxyParamCaption}
)}}\label{muse_8c_a722f2ce1744ef42a90b6aa54e38c97a4}


Definition at line 253 of file muse.\+c.



References B\+E\+A\+R\+\_\+\+T\+R\+A\+P, obj\+::corpsenm, monst\+::data, musable\+::defensive, F\+A\+L\+S\+E, dlevel\+\_\+t\+::flags, musable\+::has\+\_\+defense, haseyes, H\+O\+L\+E, In\+\_\+endgame, In\+\_\+sokoban, is\+\_\+animal, is\+\_\+floater, is\+\_\+mercenary, is\+\_\+unicorn, L\+A\+D\+D\+E\+R, level, levl, m, m\+\_\+at, mindless, mons, dlevel\+\_\+t\+::monsters, M\+U\+S\+E\+\_\+\+B\+U\+G\+L\+E, M\+U\+S\+E\+\_\+\+D\+N\+\_\+\+L\+A\+D\+D\+E\+R, M\+U\+S\+E\+\_\+\+D\+O\+W\+N\+S\+T\+A\+I\+R\+S, M\+U\+S\+E\+\_\+\+L\+I\+Z\+A\+R\+D\+\_\+\+C\+O\+R\+P\+S\+E, M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+E\+X\+T\+R\+A\+\_\+\+H\+E\+A\+L\+I\+N\+G, M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+F\+U\+L\+L\+\_\+\+H\+E\+A\+L\+I\+N\+G, M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+H\+E\+A\+L\+I\+N\+G, M\+U\+S\+E\+\_\+\+S\+C\+R\+\_\+\+C\+R\+E\+A\+T\+E\+\_\+\+M\+O\+N\+S\+T\+E\+R, M\+U\+S\+E\+\_\+\+S\+C\+R\+\_\+\+T\+E\+L\+E\+P\+O\+R\+T\+A\+T\+I\+O\+N, M\+U\+S\+E\+\_\+\+S\+S\+T\+A\+I\+R\+S, M\+U\+S\+E\+\_\+\+T\+E\+L\+E\+P\+O\+R\+T\+\_\+\+T\+R\+A\+P, M\+U\+S\+E\+\_\+\+T\+R\+A\+P\+D\+O\+O\+R, M\+U\+S\+E\+\_\+\+U\+N\+I\+C\+O\+R\+N\+\_\+\+H\+O\+R\+N, M\+U\+S\+E\+\_\+\+U\+P\+\_\+\+L\+A\+D\+D\+E\+R, M\+U\+S\+E\+\_\+\+U\+P\+S\+T\+A\+I\+R\+S, M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+C\+R\+E\+A\+T\+E\+\_\+\+M\+O\+N\+S\+T\+E\+R, M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+D\+I\+G\+G\+I\+N\+G, M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+T\+E\+L\+E\+P\+O\+R\+T\+A\+T\+I\+O\+N, M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+T\+E\+L\+E\+P\+O\+R\+T\+A\+T\+I\+O\+N\+\_\+\+S\+E\+L\+F, obj\+::nobj, nohands, nomore, obj\+::otyp, passes\+\_\+walls, P\+I\+T, obj\+::spe, S\+P\+I\+K\+E\+D\+\_\+\+P\+I\+T, sstairs, S\+T\+A\+I\+R\+S, stairway\+::sx, stairway\+::sy, T\+E\+L\+E\+P\+\_\+\+T\+R\+A\+P, throws\+\_\+rocks, T\+R\+A\+P\+D\+O\+O\+R, T\+R\+U\+E, u, you\+::ulevel, you\+::ustuck, you\+::ux, you\+::uy, you\+::uz, verysmall, W\+\_\+\+N\+O\+N\+D\+I\+G\+G\+A\+B\+L\+E, W\+E\+B, trap\+::x, xdnladder, xdnstair, xupladder, xupstair, trap\+::y, ydnladder, ydnstair, yupladder, and yupstair.


\begin{DoxyCode}
255 \{
256     \textcolor{keyword}{register} \textcolor{keyword}{struct }\hyperlink{structobj}{obj} *\hyperlink{structobj}{obj} = 0;
257     \textcolor{keyword}{struct }\hyperlink{structtrap}{trap} *t;
258     \textcolor{keywordtype}{int} \hyperlink{structtrap_aed25254cf556e3eae09dd98576d98d45}{x}=mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, \hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y}=mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my};
259     \textcolor{keywordtype}{boolean} stuck = (mtmp == \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a774d4dad2da130ec9ed1d2e6c5e0fa80}{ustuck});
260     \textcolor{keywordtype}{boolean} immobile = (mtmp->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}->\hyperlink{structpermonst_a939712c539eb16cf6cb51e58ae1c12b0}{mmove} == 0);
261     \textcolor{keywordtype}{int} fraction;
262 
263     \textcolor{keywordflow}{if} (\hyperlink{mondata_8h_a6633b7e5ce3955ef878c6890a72b9392}{is\_animal}(mtmp->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}) || \hyperlink{mondata_8h_a9b2e225376aeed6f19559b2c2dced2d0}{mindless}(mtmp->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}))
264         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
265     \textcolor{keywordflow}{if}(dist2(x, \hyperlink{structtrap_a3c7f72724bfcd0c4acb2a05ee75064df}{y}, mtmp->\hyperlink{structmonst_abbf7f123305ee87bce6247f2a168b63d}{mux}, mtmp->\hyperlink{structmonst_ab4c41d111e70e2301aebf3c12b1404e8}{muy}) > 25)
266         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
267     \textcolor{keywordflow}{if} (\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.uswallow && stuck) \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
268 
269     \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_ab3fe45fea3739167d9ba53746e0838ab}{defensive} = (\textcolor{keyword}{struct }obj *)0;
270     \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a70288ed35c7e3f6a1f0905c39a16c2d3}{has\_defense} = 0;
271 
272     \textcolor{comment}{/* since unicorn horns don't get used up, the monster would look}
273 \textcolor{comment}{     * silly trying to use the same cursed horn round after round}
274 \textcolor{comment}{     */}
275     \textcolor{keywordflow}{if} (mtmp->mconf || mtmp->mstun || !mtmp->mcansee) \{
276         \textcolor{keywordflow}{if} (!\hyperlink{mondata_8h_aea6ec71970ce94bddd2270e198ff62f6}{is\_unicorn}(mtmp->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}) && !\hyperlink{mondata_8h_ae13d4a4d0a9842348cffbb5dae990771}{nohands}(mtmp->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data})) \{
277         \textcolor{keywordflow}{for}(obj = mtmp->\hyperlink{structmonst_a480856d6a5db5610593c9816e525a978}{minvent}; obj; obj = obj->\hyperlink{structobj_ad1c5d790528ee1d8349ef302994789d8}{nobj})
278             \textcolor{keywordflow}{if} (obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == UNICORN\_HORN && !obj->cursed)
279             \textcolor{keywordflow}{break};
280         \}
281         \textcolor{keywordflow}{if} (obj || \hyperlink{mondata_8h_aea6ec71970ce94bddd2270e198ff62f6}{is\_unicorn}(mtmp->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data})) \{
282         \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_ab3fe45fea3739167d9ba53746e0838ab}{defensive} = obj;
283         \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a70288ed35c7e3f6a1f0905c39a16c2d3}{has\_defense} = \hyperlink{muse_8c_a4a89c8817e3ac83ff990ba42c966b1b4}{MUSE\_UNICORN\_HORN};
284         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
285         \}
286     \}
287 
288     \textcolor{keywordflow}{if} (mtmp->mconf) \{
289         \textcolor{keywordflow}{for}(obj = mtmp->\hyperlink{structmonst_a480856d6a5db5610593c9816e525a978}{minvent}; obj; obj = obj->\hyperlink{structobj_ad1c5d790528ee1d8349ef302994789d8}{nobj}) \{
290         \textcolor{keywordflow}{if} (obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == CORPSE && obj->\hyperlink{structobj_ad5db7220e2b815d06c3c80027ab9924f}{corpsenm} == PM\_LIZARD) \{
291             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_ab3fe45fea3739167d9ba53746e0838ab}{defensive} = obj;
292             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a70288ed35c7e3f6a1f0905c39a16c2d3}{has\_defense} = \hyperlink{muse_8c_a2fe45e61be8379e9eee713c6dc3763ad}{MUSE\_LIZARD\_CORPSE};
293             \textcolor{keywordflow}{return} \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
294         \}
295         \}
296     \}
297 
298     \textcolor{comment}{/* It so happens there are two unrelated cases when we might want to}
299 \textcolor{comment}{     * check specifically for healing alone.  The first is when the monster}
300 \textcolor{comment}{     * is blind (healing cures blindness).  The second is when the monster}
301 \textcolor{comment}{     * is peaceful; then we don't want to flee the player, and by}
302 \textcolor{comment}{     * coincidence healing is all there is that doesn't involve fleeing.}
303 \textcolor{comment}{     * These would be hard to combine because of the control flow.}
304 \textcolor{comment}{     * Pestilence won't use healing even when blind.}
305 \textcolor{comment}{     */}
306     \textcolor{keywordflow}{if} (!mtmp->mcansee && !\hyperlink{mondata_8h_ae13d4a4d0a9842348cffbb5dae990771}{nohands}(mtmp->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}) &&
307         mtmp->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data} != &\hyperlink{permonst_8h_ab96e7c4682ea5ae4f83339a15c06f676}{mons}[PM\_PESTILENCE]) \{
308         \textcolor{keywordflow}{if} ((obj = m\_carrying(mtmp, POT\_FULL\_HEALING)) != 0) \{
309         \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_ab3fe45fea3739167d9ba53746e0838ab}{defensive} = obj;
310         \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a70288ed35c7e3f6a1f0905c39a16c2d3}{has\_defense} = \hyperlink{muse_8c_ab7a31f6e9ee18a59412d10b82f0570e7}{MUSE\_POT\_FULL\_HEALING};
311         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
312         \}
313         \textcolor{keywordflow}{if} ((obj = m\_carrying(mtmp, POT\_EXTRA\_HEALING)) != 0) \{
314         \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_ab3fe45fea3739167d9ba53746e0838ab}{defensive} = obj;
315         \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a70288ed35c7e3f6a1f0905c39a16c2d3}{has\_defense} = \hyperlink{muse_8c_ad2669dea3dd392871c80929370ec342b}{MUSE\_POT\_EXTRA\_HEALING};
316         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
317         \}
318         \textcolor{keywordflow}{if} ((obj = m\_carrying(mtmp, POT\_HEALING)) != 0) \{
319         \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_ab3fe45fea3739167d9ba53746e0838ab}{defensive} = obj;
320         \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a70288ed35c7e3f6a1f0905c39a16c2d3}{has\_defense} = \hyperlink{muse_8c_a0df3ce17e1e03a5f846b7b404d0f75a8}{MUSE\_POT\_HEALING};
321         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
322         \}
323     \}
324 
325     fraction = \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a6c7263bb25b91825bf7ecaab470d771a}{ulevel} < 10 ? 5 : \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a6c7263bb25b91825bf7ecaab470d771a}{ulevel} < 14 ? 4 : 3;
326     \textcolor{keywordflow}{if}(mtmp->\hyperlink{structmonst_abe22e95755f1348a6a1c78252be5d76d}{mhp} >= mtmp->\hyperlink{structmonst_a66c107319bb7bb318c04e6a0f5f03c60}{mhpmax} ||
327             (mtmp->\hyperlink{structmonst_abe22e95755f1348a6a1c78252be5d76d}{mhp} >= 10 && mtmp->\hyperlink{structmonst_abe22e95755f1348a6a1c78252be5d76d}{mhp}*fraction >= mtmp->\hyperlink{structmonst_a66c107319bb7bb318c04e6a0f5f03c60}{mhpmax}))
328         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
329 
330     \textcolor{keywordflow}{if} (mtmp->mpeaceful) \{
331         \textcolor{keywordflow}{if} (!\hyperlink{mondata_8h_ae13d4a4d0a9842348cffbb5dae990771}{nohands}(mtmp->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data})) \{
332         \textcolor{keywordflow}{if} ((obj = m\_carrying(mtmp, POT\_FULL\_HEALING)) != 0) \{
333             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_ab3fe45fea3739167d9ba53746e0838ab}{defensive} = obj;
334             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a70288ed35c7e3f6a1f0905c39a16c2d3}{has\_defense} = \hyperlink{muse_8c_ab7a31f6e9ee18a59412d10b82f0570e7}{MUSE\_POT\_FULL\_HEALING};
335             \textcolor{keywordflow}{return} \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
336         \}
337         \textcolor{keywordflow}{if} ((obj = m\_carrying(mtmp, POT\_EXTRA\_HEALING)) != 0) \{
338             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_ab3fe45fea3739167d9ba53746e0838ab}{defensive} = obj;
339             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a70288ed35c7e3f6a1f0905c39a16c2d3}{has\_defense} = \hyperlink{muse_8c_ad2669dea3dd392871c80929370ec342b}{MUSE\_POT\_EXTRA\_HEALING};
340             \textcolor{keywordflow}{return} \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
341         \}
342         \textcolor{keywordflow}{if} ((obj = m\_carrying(mtmp, POT\_HEALING)) != 0) \{
343             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_ab3fe45fea3739167d9ba53746e0838ab}{defensive} = obj;
344             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a70288ed35c7e3f6a1f0905c39a16c2d3}{has\_defense} = \hyperlink{muse_8c_a0df3ce17e1e03a5f846b7b404d0f75a8}{MUSE\_POT\_HEALING};
345             \textcolor{keywordflow}{return} \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
346         \}
347         \}
348         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
349     \}
350 
351     \textcolor{keywordflow}{if} (\hyperlink{rm_8h_a8cd681fba60fdedbabfd71a0b4bbfc00}{levl}[x][y].typ == \hyperlink{rm_8h_a814976bdce7e0d26e78d426fdb6f1b22}{STAIRS} && !stuck && !immobile) \{
352         \textcolor{keywordflow}{if} (x == \hyperlink{decl_8h_a55486e08c2be9501e6817ca2a19e4d66}{xdnstair} && y == \hyperlink{decl_8h_a3b86b85dda8af8bff9c5ea84bcc7a52a}{ydnstair} && !\hyperlink{mondata_8h_aa0333e705b2ebafe594ebcdbed885cce}{is\_floater}(mtmp->
      \hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}))
353             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a70288ed35c7e3f6a1f0905c39a16c2d3}{has\_defense} = \hyperlink{muse_8c_ab8bc4c0e1f62324745690ad7514ceedf}{MUSE\_DOWNSTAIRS};
354         if (x == \hyperlink{decl_8h_a6ddff041cb808902b66e0b7196f03e00}{xupstair} && y == \hyperlink{decl_8h_a26867130b8519f38c26a8b28b4df9ac0}{yupstair} && ledger\_no(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz}) != 1)
355     \textcolor{comment}{/* Unfair to let the monsters leave the dungeon with the Amulet */}
356     \textcolor{comment}{/* (or go to the endlevel since you also need it, to get there) */}
357             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a70288ed35c7e3f6a1f0905c39a16c2d3}{has\_defense} = \hyperlink{muse_8c_af8ea585a3a5abf202c8bfc6e567d4294}{MUSE\_UPSTAIRS};
358     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{rm_8h_a8cd681fba60fdedbabfd71a0b4bbfc00}{levl}[x][y].typ == \hyperlink{rm_8h_aa5a9eab5827d942490d37fdc9ca87ba3}{LADDER} && !stuck && !immobile) \{
359         \textcolor{keywordflow}{if} (x == \hyperlink{decl_8h_a2d4548b0c42db4ef8ba1bc9621542da3}{xupladder} && y == \hyperlink{decl_8h_aa40db270d30fecdd58e8e47cc855936e}{yupladder})
360             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a70288ed35c7e3f6a1f0905c39a16c2d3}{has\_defense} = \hyperlink{muse_8c_af6e16437d305120ec5871ba0b013995b}{MUSE\_UP\_LADDER};
361         \textcolor{keywordflow}{if} (x == \hyperlink{decl_8h_a852b49ce12ba3e86a4924db9cb7e1eaa}{xdnladder} && y == \hyperlink{decl_8h_a4aa07a23b5b834e25b8b243f69c6473f}{ydnladder} && !\hyperlink{mondata_8h_aa0333e705b2ebafe594ebcdbed885cce}{is\_floater}(mtmp->
      \hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}))
362             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a70288ed35c7e3f6a1f0905c39a16c2d3}{has\_defense} = \hyperlink{muse_8c_a8b6bb02638dd25e2792567b13ffa4b40}{MUSE\_DN\_LADDER};
363     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{decl_8h_ae69b4e2e218b5111c75615131978f33c}{sstairs}.\hyperlink{structstairway_af8a3fe0724bfd9702ad9aae6aa2aa850}{sx} && \hyperlink{decl_8h_ae69b4e2e218b5111c75615131978f33c}{sstairs}.\hyperlink{structstairway_af8a3fe0724bfd9702ad9aae6aa2aa850}{sx} == x && \hyperlink{decl_8h_ae69b4e2e218b5111c75615131978f33c}{sstairs}.
      \hyperlink{structstairway_a782c2bebca97b67e6299d2d5f8c2844f}{sy} == y) \{
364         \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a70288ed35c7e3f6a1f0905c39a16c2d3}{has\_defense} = \hyperlink{muse_8c_afb239ce4101fdff4659cb3c6c0184515}{MUSE\_SSTAIRS};
365     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!stuck && !immobile) \{
366     \textcolor{comment}{/* Note: trap doors take precedence over teleport traps. */}
367         \textcolor{keywordtype}{int} xx, yy;
368 
369         \textcolor{keywordflow}{for}(xx = x-1; xx <= x+1; xx++) \textcolor{keywordflow}{for}(yy = y-1; yy <= y+1; yy++)
370         \textcolor{keywordflow}{if} (isok(xx,yy))
371         \textcolor{keywordflow}{if} (xx != \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux} && yy != \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy})
372         \textcolor{keywordflow}{if} (mtmp->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data} != &\hyperlink{permonst_8h_ab96e7c4682ea5ae4f83339a15c06f676}{mons}[PM\_GRID\_BUG] || xx == x || yy == y)
373         \textcolor{keywordflow}{if} ((xx==x && yy==y) || !\hyperlink{rm_8h_a721c99bfa099c4225215ba102e91fa39}{level}.\hyperlink{structdlevel__t_abe8e54209520b4c30e1c8a5364ff1457}{monsters}[xx][yy])
374         \textcolor{keywordflow}{if} ((t = t\_at(xx,yy)) != 0)
375         \textcolor{keywordflow}{if} ((\hyperlink{mondata_8h_a655fd80b963b28e5f4b7a52fc8d1f32d}{verysmall}(mtmp->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}) || \hyperlink{mondata_8h_af1c84d35ae8812186eaf635bc27b37c0}{throws\_rocks}(mtmp->
      \hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}) ||
376              \hyperlink{mondata_8h_a42b9f266cafddebd01c657d1e39ae72d}{passes\_walls}(mtmp->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data})) || !sobj\_at(BOULDER, xx, yy))
377         \textcolor{keywordflow}{if} (!onscary(xx,yy,mtmp)) \{
378             \textcolor{keywordflow}{if} ((t->ttyp == \hyperlink{trap_8h_ab50570a3a3e65ed47edb98c63e355088}{TRAPDOOR} || t->ttyp == \hyperlink{trap_8h_a8049ef47c05eee8156bccee8d819c506}{HOLE})
379                 && !\hyperlink{mondata_8h_aa0333e705b2ebafe594ebcdbed885cce}{is\_floater}(mtmp->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data})
380                 && !mtmp->isshk && !mtmp->isgd
381                 && !mtmp->ispriest
382                 && Can\_fall\_thru(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz})
383                         ) \{
384                 \hyperlink{muse_8c_a2e3443c1d5259c106546bb48b093bd91}{trapx} = xx;
385                 \hyperlink{muse_8c_a2d804e7f376ac6699b1a10920158cc21}{trapy} = yy;
386                 \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a70288ed35c7e3f6a1f0905c39a16c2d3}{has\_defense} = \hyperlink{muse_8c_a0e7d3c03f0220672e4f8ed17d3a8642a}{MUSE\_TRAPDOOR};
387             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (t->ttyp == \hyperlink{trap_8h_ae486eaa74be1dd922e16565d281cf94c}{TELEP\_TRAP} && \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a70288ed35c7e3f6a1f0905c39a16c2d3}{has\_defense} != 
      \hyperlink{muse_8c_a0e7d3c03f0220672e4f8ed17d3a8642a}{MUSE\_TRAPDOOR}) \{
388                 \hyperlink{muse_8c_a2e3443c1d5259c106546bb48b093bd91}{trapx} = xx;
389                 \hyperlink{muse_8c_a2d804e7f376ac6699b1a10920158cc21}{trapy} = yy;
390                 \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a70288ed35c7e3f6a1f0905c39a16c2d3}{has\_defense} = \hyperlink{muse_8c_ae214c66b1ac1efc477fa9029885ed414}{MUSE\_TELEPORT\_TRAP};
391             \}
392         \}
393     \}
394 
395     \textcolor{keywordflow}{if} (\hyperlink{mondata_8h_ae13d4a4d0a9842348cffbb5dae990771}{nohands}(mtmp->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data})) \textcolor{comment}{/* can't use objects */}
396         \textcolor{keywordflow}{goto} botm;
397 
398     \textcolor{keywordflow}{if} (\hyperlink{mondata_8h_a6d73bc7ae8f744da17f71450f865aacc}{is\_mercenary}(mtmp->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}) && (obj = m\_carrying(mtmp, BUGLE))) \{
399         \textcolor{keywordtype}{int} xx, yy;
400         \textcolor{keyword}{struct }\hyperlink{structmonst}{monst} *mon;
401 
402         \textcolor{comment}{/* Distance is arbitrary.  What we really want to do is}
403 \textcolor{comment}{         * have the soldier play the bugle when it sees or}
404 \textcolor{comment}{         * remembers soldiers nearby...}
405 \textcolor{comment}{         */}
406         \textcolor{keywordflow}{for}(xx = x-3; xx <= x+3; xx++) \textcolor{keywordflow}{for}(yy = y-3; yy <= y+3; yy++)
407         \textcolor{keywordflow}{if} (isok(xx,yy))
408         \textcolor{keywordflow}{if} ((mon = \hyperlink{rm_8h_a4d8dddf3df3fad65478980d2c8cbf53c}{m\_at}(xx,yy)) && \hyperlink{mondata_8h_a6d73bc7ae8f744da17f71450f865aacc}{is\_mercenary}(mon->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}) &&
409                 mon->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data} != &\hyperlink{permonst_8h_ab96e7c4682ea5ae4f83339a15c06f676}{mons}[PM\_GUARD] &&
410                 (mon->msleeping || (!mon->mcanmove))) \{
411             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_ab3fe45fea3739167d9ba53746e0838ab}{defensive} = obj;
412             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a70288ed35c7e3f6a1f0905c39a16c2d3}{has\_defense} = \hyperlink{muse_8c_afa6dce34acae25afddd484c0262142a3}{MUSE\_BUGLE};
413         \}
414     \}
415 
416     \textcolor{comment}{/* use immediate physical escape prior to attempting magic */}
417     \textcolor{keywordflow}{if} (\hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a70288ed35c7e3f6a1f0905c39a16c2d3}{has\_defense})    \textcolor{comment}{/* stairs, trap door or tele-trap, bugle alert */}
418         \textcolor{keywordflow}{goto} botm;
419 
420     \textcolor{comment}{/* kludge to cut down on trap destruction (particularly portals) */}
421     t = t\_at(x,y);
422     \textcolor{keywordflow}{if} (t && (t->ttyp == \hyperlink{trap_8h_af181c9e6602b6432a0bf1a9243808968}{PIT} || t->ttyp == \hyperlink{trap_8h_a813fa80e09de5d455e2af3743a95bad9}{SPIKED\_PIT} ||
423           t->ttyp == \hyperlink{trap_8h_adea8244201fecbc9bef08ab08e99cdf3}{WEB} || t->ttyp == \hyperlink{trap_8h_a8e0f0f3d80f6253a98c39fe9e9ac1a1f}{BEAR\_TRAP}))
424         t = 0;      \textcolor{comment}{/* ok for monster to dig here */}
425 
426 \textcolor{preprocessor}{#define nomore(x) if(m.has\_defense==x) continue;}
427     \textcolor{keywordflow}{for} (obj = mtmp->\hyperlink{structmonst_a480856d6a5db5610593c9816e525a978}{minvent}; obj; obj = obj->\hyperlink{structobj_ad1c5d790528ee1d8349ef302994789d8}{nobj}) \{
428         \textcolor{comment}{/* don't always use the same selection pattern */}
429         \textcolor{keywordflow}{if} (\hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a70288ed35c7e3f6a1f0905c39a16c2d3}{has\_defense} && !rn2(3)) \textcolor{keywordflow}{break};
430 
431         \textcolor{comment}{/* nomore(MUSE\_WAN\_DIGGING); */}
432         \textcolor{keywordflow}{if} (\hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a70288ed35c7e3f6a1f0905c39a16c2d3}{has\_defense} == \hyperlink{muse_8c_ae588a7b81156914902b8ad9d1755e7f0}{MUSE\_WAN\_DIGGING}) \textcolor{keywordflow}{break};
433         \textcolor{keywordflow}{if} (obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == WAN\_DIGGING && obj->\hyperlink{structobj_a14fc8dc59e9073bfbf1e170875a98448}{spe} > 0 && !stuck && !t
434             && !mtmp->isshk && !mtmp->isgd && !mtmp->ispriest
435             && !\hyperlink{mondata_8h_aa0333e705b2ebafe594ebcdbed885cce}{is\_floater}(mtmp->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data})
436             \textcolor{comment}{/* monsters digging in Sokoban can ruin things */}
437             && !\hyperlink{dungeon_8h_ad19541d30218e5f3834c01d42bb381e2}{In\_sokoban}(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz})
438             \textcolor{comment}{/* digging wouldn't be effective; assume they know that */}
439             && !(\hyperlink{rm_8h_a8cd681fba60fdedbabfd71a0b4bbfc00}{levl}[x][y].wall\_info & \hyperlink{rm_8h_a55ee3cac4981ccaa6d27954589000595}{W\_NONDIGGABLE})
440             && !(Is\_botlevel(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz}) || \hyperlink{dungeon_8h_ae85486e6a752224948478a6e9dab0329}{In\_endgame}(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz}))
441             && !(is\_ice(x,y) || is\_pool(x,y) || is\_lava(x,y))
442             && !(mtmp->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data} == &\hyperlink{permonst_8h_ab96e7c4682ea5ae4f83339a15c06f676}{mons}[PM\_VLAD\_THE\_IMPALER]
443              && In\_V\_tower(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz}))) \{
444             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_ab3fe45fea3739167d9ba53746e0838ab}{defensive} = obj;
445             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a70288ed35c7e3f6a1f0905c39a16c2d3}{has\_defense} = \hyperlink{muse_8c_ae588a7b81156914902b8ad9d1755e7f0}{MUSE\_WAN\_DIGGING};
446         \}
447         \hyperlink{muse_8c_af624e874fc8909c7570dba15e9e64cbc}{nomore}(\hyperlink{muse_8c_aa867e434d7b697f9fc8d1db9b216a198}{MUSE\_WAN\_TELEPORTATION\_SELF});
448         \hyperlink{muse_8c_af624e874fc8909c7570dba15e9e64cbc}{nomore}(\hyperlink{muse_8c_aee63b5574e746304cab9cbb88e1de182}{MUSE\_WAN\_TELEPORTATION});
449         \textcolor{keywordflow}{if}(obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == WAN\_TELEPORTATION && obj->\hyperlink{structobj_a14fc8dc59e9073bfbf1e170875a98448}{spe} > 0) \{
450             \textcolor{comment}{/* use the TELEP\_TRAP bit to determine if they know}
451 \textcolor{comment}{             * about noteleport on this level or not.  Avoids}
452 \textcolor{comment}{             * ineffective re-use of teleportation.  This does}
453 \textcolor{comment}{             * mean if the monster leaves the level, they'll know}
454 \textcolor{comment}{             * about teleport traps.}
455 \textcolor{comment}{             */}
456             \textcolor{keywordflow}{if} (!\hyperlink{rm_8h_a721c99bfa099c4225215ba102e91fa39}{level}.\hyperlink{structdlevel__t_ad52c01d015e2456cdae3300848115916}{flags}.noteleport ||
457             !(mtmp->\hyperlink{structmonst_a792271938bf793d0b6cfef02171f967a}{mtrapseen} & (1 << (\hyperlink{trap_8h_ae486eaa74be1dd922e16565d281cf94c}{TELEP\_TRAP}-1)))) \{
458             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_ab3fe45fea3739167d9ba53746e0838ab}{defensive} = obj;
459             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a70288ed35c7e3f6a1f0905c39a16c2d3}{has\_defense} = (mon\_has\_amulet(mtmp))
460                 ? \hyperlink{muse_8c_aee63b5574e746304cab9cbb88e1de182}{MUSE\_WAN\_TELEPORTATION}
461                 : \hyperlink{muse_8c_aa867e434d7b697f9fc8d1db9b216a198}{MUSE\_WAN\_TELEPORTATION\_SELF};
462             \}
463         \}
464         \hyperlink{muse_8c_af624e874fc8909c7570dba15e9e64cbc}{nomore}(\hyperlink{muse_8c_af74f3efeafb0279b1628e94ccbb86c49}{MUSE\_SCR\_TELEPORTATION});
465         \textcolor{keywordflow}{if}(obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == SCR\_TELEPORTATION && mtmp->mcansee
466            && \hyperlink{mondata_8h_acef071254b9ae0dcf53724485be10841}{haseyes}(mtmp->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data})
467            && (!obj->cursed ||
468                (!(mtmp->isshk && inhishop(mtmp))
469                 && !mtmp->isgd && !mtmp->ispriest))) \{
470             \textcolor{comment}{/* see WAN\_TELEPORTATION case above */}
471             \textcolor{keywordflow}{if} (!\hyperlink{rm_8h_a721c99bfa099c4225215ba102e91fa39}{level}.\hyperlink{structdlevel__t_ad52c01d015e2456cdae3300848115916}{flags}.noteleport ||
472             !(mtmp->\hyperlink{structmonst_a792271938bf793d0b6cfef02171f967a}{mtrapseen} & (1 << (\hyperlink{trap_8h_ae486eaa74be1dd922e16565d281cf94c}{TELEP\_TRAP}-1)))) \{
473             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_ab3fe45fea3739167d9ba53746e0838ab}{defensive} = obj;
474             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a70288ed35c7e3f6a1f0905c39a16c2d3}{has\_defense} = \hyperlink{muse_8c_af74f3efeafb0279b1628e94ccbb86c49}{MUSE\_SCR\_TELEPORTATION};
475             \}
476         \}
477 
478         \textcolor{keywordflow}{if} (mtmp->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data} != &\hyperlink{permonst_8h_ab96e7c4682ea5ae4f83339a15c06f676}{mons}[PM\_PESTILENCE]) \{
479         \hyperlink{muse_8c_af624e874fc8909c7570dba15e9e64cbc}{nomore}(\hyperlink{muse_8c_ab7a31f6e9ee18a59412d10b82f0570e7}{MUSE\_POT\_FULL\_HEALING});
480         \textcolor{keywordflow}{if}(obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == POT\_FULL\_HEALING) \{
481             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_ab3fe45fea3739167d9ba53746e0838ab}{defensive} = obj;
482             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a70288ed35c7e3f6a1f0905c39a16c2d3}{has\_defense} = \hyperlink{muse_8c_ab7a31f6e9ee18a59412d10b82f0570e7}{MUSE\_POT\_FULL\_HEALING};
483         \}
484         \hyperlink{muse_8c_af624e874fc8909c7570dba15e9e64cbc}{nomore}(\hyperlink{muse_8c_ad2669dea3dd392871c80929370ec342b}{MUSE\_POT\_EXTRA\_HEALING});
485         \textcolor{keywordflow}{if}(obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == POT\_EXTRA\_HEALING) \{
486             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_ab3fe45fea3739167d9ba53746e0838ab}{defensive} = obj;
487             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a70288ed35c7e3f6a1f0905c39a16c2d3}{has\_defense} = \hyperlink{muse_8c_ad2669dea3dd392871c80929370ec342b}{MUSE\_POT\_EXTRA\_HEALING};
488         \}
489         \hyperlink{muse_8c_af624e874fc8909c7570dba15e9e64cbc}{nomore}(\hyperlink{muse_8c_af007015cef270071dd8bb072fb030842}{MUSE\_WAN\_CREATE\_MONSTER});
490         \textcolor{keywordflow}{if}(obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == WAN\_CREATE\_MONSTER && obj->\hyperlink{structobj_a14fc8dc59e9073bfbf1e170875a98448}{spe} > 0) \{
491             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_ab3fe45fea3739167d9ba53746e0838ab}{defensive} = obj;
492             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a70288ed35c7e3f6a1f0905c39a16c2d3}{has\_defense} = \hyperlink{muse_8c_af007015cef270071dd8bb072fb030842}{MUSE\_WAN\_CREATE\_MONSTER};
493         \}
494         \hyperlink{muse_8c_af624e874fc8909c7570dba15e9e64cbc}{nomore}(\hyperlink{muse_8c_a0df3ce17e1e03a5f846b7b404d0f75a8}{MUSE\_POT\_HEALING});
495         \textcolor{keywordflow}{if}(obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == POT\_HEALING) \{
496             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_ab3fe45fea3739167d9ba53746e0838ab}{defensive} = obj;
497             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a70288ed35c7e3f6a1f0905c39a16c2d3}{has\_defense} = \hyperlink{muse_8c_a0df3ce17e1e03a5f846b7b404d0f75a8}{MUSE\_POT\_HEALING};
498         \}
499         \} \textcolor{keywordflow}{else} \{    \textcolor{comment}{/* Pestilence */}
500         \hyperlink{muse_8c_af624e874fc8909c7570dba15e9e64cbc}{nomore}(\hyperlink{muse_8c_ab7a31f6e9ee18a59412d10b82f0570e7}{MUSE\_POT\_FULL\_HEALING});
501         \textcolor{keywordflow}{if} (obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == POT\_SICKNESS) \{
502             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_ab3fe45fea3739167d9ba53746e0838ab}{defensive} = obj;
503             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a70288ed35c7e3f6a1f0905c39a16c2d3}{has\_defense} = \hyperlink{muse_8c_ab7a31f6e9ee18a59412d10b82f0570e7}{MUSE\_POT\_FULL\_HEALING};
504         \}
505         \hyperlink{muse_8c_af624e874fc8909c7570dba15e9e64cbc}{nomore}(\hyperlink{muse_8c_af007015cef270071dd8bb072fb030842}{MUSE\_WAN\_CREATE\_MONSTER});
506         \textcolor{keywordflow}{if} (obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == WAN\_CREATE\_MONSTER && obj->\hyperlink{structobj_a14fc8dc59e9073bfbf1e170875a98448}{spe} > 0) \{
507             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_ab3fe45fea3739167d9ba53746e0838ab}{defensive} = obj;
508             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a70288ed35c7e3f6a1f0905c39a16c2d3}{has\_defense} = \hyperlink{muse_8c_af007015cef270071dd8bb072fb030842}{MUSE\_WAN\_CREATE\_MONSTER};
509         \}
510         \}
511         \hyperlink{muse_8c_af624e874fc8909c7570dba15e9e64cbc}{nomore}(\hyperlink{muse_8c_aca65a80f05166317ea20ec0f4b8dcaf9}{MUSE\_SCR\_CREATE\_MONSTER});
512         \textcolor{keywordflow}{if}(obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == SCR\_CREATE\_MONSTER) \{
513             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_ab3fe45fea3739167d9ba53746e0838ab}{defensive} = obj;
514             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a70288ed35c7e3f6a1f0905c39a16c2d3}{has\_defense} = \hyperlink{muse_8c_aca65a80f05166317ea20ec0f4b8dcaf9}{MUSE\_SCR\_CREATE\_MONSTER};
515         \}
516     \}
517 botm:   \textcolor{keywordflow}{return}((\textcolor{keywordtype}{boolean})(!!\hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a70288ed35c7e3f6a1f0905c39a16c2d3}{has\_defense}));
518 \textcolor{preprocessor}{#undef nomore}
519 \}
\end{DoxyCode}
\hypertarget{muse_8c_ae9ae628cd5f1693e91458d4fb1c9b210}{\index{muse.\+c@{muse.\+c}!find\+\_\+misc@{find\+\_\+misc}}
\index{find\+\_\+misc@{find\+\_\+misc}!muse.\+c@{muse.\+c}}
\subsubsection[{find\+\_\+misc}]{\setlength{\rightskip}{0pt plus 5cm}{\bf boolean} find\+\_\+misc (
\begin{DoxyParamCaption}
\item[{struct {\bf monst} $\ast$}]{mtmp}
\end{DoxyParamCaption}
)}}\label{muse_8c_ae9ae628cd5f1693e91458d4fb1c9b210}


Definition at line 1566 of file muse.\+c.



References A\+T\+\_\+\+G\+A\+Z\+E, distu, F\+A\+L\+S\+E, musable\+::has\+\_\+misc, is\+\_\+animal, level, m, M\+F\+A\+S\+T, mindless, musable\+::misc, permonst\+::mmove, M\+O\+N\+\_\+\+W\+E\+P, mons, dlevel\+\_\+t\+::monsters, monstr, M\+U\+S\+E\+\_\+\+B\+U\+L\+L\+W\+H\+I\+P, M\+U\+S\+E\+\_\+\+P\+O\+L\+Y\+\_\+\+T\+R\+A\+P, M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+G\+A\+I\+N\+\_\+\+L\+E\+V\+E\+L, M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+I\+N\+V\+I\+S\+I\+B\+I\+L\+I\+T\+Y, M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+P\+O\+L\+Y\+M\+O\+R\+P\+H, M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+S\+P\+E\+E\+D, M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+M\+A\+K\+E\+\_\+\+I\+N\+V\+I\+S\+I\+B\+L\+E, M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+P\+O\+L\+Y\+M\+O\+R\+P\+H, M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+S\+P\+E\+E\+D\+\_\+\+M\+O\+N\+S\+T\+E\+R, obj\+::nobj, nohands, nomore, obj\+::otyp, passes\+\_\+walls, P\+O\+L\+Y\+\_\+\+T\+R\+A\+P, See\+\_\+invisible, obj\+::spe, throws\+\_\+rocks, T\+R\+U\+E, u, you\+::ustuck, uwep, you\+::ux, you\+::uy, and verysmall.


\begin{DoxyCode}
1568 \{
1569     \textcolor{keyword}{register} \textcolor{keyword}{struct }\hyperlink{structobj}{obj} *\hyperlink{structobj}{obj};
1570     \textcolor{keyword}{struct }\hyperlink{structpermonst}{permonst} *mdat = mtmp->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data};
1571     \textcolor{keywordtype}{int} x = mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, y = mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my};
1572     \textcolor{keyword}{struct }\hyperlink{structtrap}{trap} *t;
1573     \textcolor{keywordtype}{int} xx, yy;
1574     \textcolor{keywordtype}{boolean} immobile = (mdat->\hyperlink{structpermonst_a939712c539eb16cf6cb51e58ae1c12b0}{mmove} == 0);
1575     \textcolor{keywordtype}{boolean} stuck = (mtmp == \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a774d4dad2da130ec9ed1d2e6c5e0fa80}{ustuck});
1576 
1577     \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a7588e8e6ab60f4ea8fe12d61b674f52b}{misc} = (\textcolor{keyword}{struct }obj *)0;
1578     \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_aa2d416f925ea6cbead5267d5462e4aef}{has\_misc} = 0;
1579     \textcolor{keywordflow}{if} (\hyperlink{mondata_8h_a6633b7e5ce3955ef878c6890a72b9392}{is\_animal}(mdat) || \hyperlink{mondata_8h_a9b2e225376aeed6f19559b2c2dced2d0}{mindless}(mdat))
1580         \textcolor{keywordflow}{return} 0;
1581     \textcolor{keywordflow}{if} (\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.uswallow && stuck) \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
1582 
1583     \textcolor{comment}{/* We arbitrarily limit to times when a player is nearby for the}
1584 \textcolor{comment}{     * same reason as Junior Pac-Man doesn't have energizers eaten until}
1585 \textcolor{comment}{     * you can see them...}
1586 \textcolor{comment}{     */}
1587     \textcolor{keywordflow}{if}(dist2(x, y, mtmp->\hyperlink{structmonst_abbf7f123305ee87bce6247f2a168b63d}{mux}, mtmp->\hyperlink{structmonst_ab4c41d111e70e2301aebf3c12b1404e8}{muy}) > 36)
1588         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
1589 
1590     \textcolor{keywordflow}{if} (!stuck && !immobile && !mtmp->cham && \hyperlink{muse_8c_a2e4cd9d4199a5c6f1ecf9985d4a58dfb}{monstr}[monsndx(mdat)] < 6) \{
1591       \textcolor{keywordtype}{boolean} ignore\_boulders = (\hyperlink{mondata_8h_a655fd80b963b28e5f4b7a52fc8d1f32d}{verysmall}(mdat) ||
1592                      \hyperlink{mondata_8h_af1c84d35ae8812186eaf635bc27b37c0}{throws\_rocks}(mdat) ||
1593                      \hyperlink{mondata_8h_a42b9f266cafddebd01c657d1e39ae72d}{passes\_walls}(mdat));
1594       \textcolor{keywordflow}{for}(xx = x-1; xx <= x+1; xx++)
1595         \textcolor{keywordflow}{for}(yy = y-1; yy <= y+1; yy++)
1596         \textcolor{keywordflow}{if} (isok(xx,yy) && (xx != \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux} || yy != \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy}))
1597             \textcolor{keywordflow}{if} (mdat != &\hyperlink{permonst_8h_ab96e7c4682ea5ae4f83339a15c06f676}{mons}[PM\_GRID\_BUG] || xx == x || yy == y)
1598             \textcolor{keywordflow}{if} (\textcolor{comment}{/* (xx==x && yy==y) || */} !\hyperlink{rm_8h_a721c99bfa099c4225215ba102e91fa39}{level}.\hyperlink{structdlevel__t_abe8e54209520b4c30e1c8a5364ff1457}{monsters}[xx][yy])
1599                 \textcolor{keywordflow}{if} ((t = t\_at(xx, yy)) != 0 &&
1600                   (ignore\_boulders || !sobj\_at(BOULDER, xx, yy))
1601                   && !onscary(xx, yy, mtmp)) \{
1602                 \textcolor{keywordflow}{if} (t->ttyp == \hyperlink{trap_8h_a8d4a4a1cdb6ac9e6b052f15c68243d9d}{POLY\_TRAP}) \{
1603                     \hyperlink{muse_8c_a2e3443c1d5259c106546bb48b093bd91}{trapx} = xx;
1604                     \hyperlink{muse_8c_a2d804e7f376ac6699b1a10920158cc21}{trapy} = yy;
1605                     \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_aa2d416f925ea6cbead5267d5462e4aef}{has\_misc} = \hyperlink{muse_8c_ab7d2d5dff5b09c7981f2e901c6760f70}{MUSE\_POLY\_TRAP};
1606                     \textcolor{keywordflow}{return} \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
1607                 \}
1608                 \}
1609     \}
1610     \textcolor{keywordflow}{if} (\hyperlink{mondata_8h_ae13d4a4d0a9842348cffbb5dae990771}{nohands}(mdat))
1611         \textcolor{keywordflow}{return} 0;
1612 
1613 \textcolor{preprocessor}{#define nomore(x) if(m.has\_misc==x) continue;}
1614     \textcolor{keywordflow}{for}(obj=mtmp->\hyperlink{structmonst_a480856d6a5db5610593c9816e525a978}{minvent}; obj; obj=obj->\hyperlink{structobj_ad1c5d790528ee1d8349ef302994789d8}{nobj}) \{
1615         \textcolor{comment}{/* Monsters shouldn't recognize cursed items; this kludge is */}
1616         \textcolor{comment}{/* necessary to prevent serious problems though... */}
1617         \textcolor{keywordflow}{if}(obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == POT\_GAIN\_LEVEL && (!obj->cursed ||
1618                 (!mtmp->isgd && !mtmp->isshk && !mtmp->ispriest))) \{
1619             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a7588e8e6ab60f4ea8fe12d61b674f52b}{misc} = obj;
1620             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_aa2d416f925ea6cbead5267d5462e4aef}{has\_misc} = \hyperlink{muse_8c_a8e37ee24a3248fee83db8cc6bebdd969}{MUSE\_POT\_GAIN\_LEVEL};
1621         \}
1622         \hyperlink{muse_8c_af624e874fc8909c7570dba15e9e64cbc}{nomore}(\hyperlink{muse_8c_abad816ae5ba2b9882b006d16e7d2f83e}{MUSE\_BULLWHIP});
1623         \textcolor{keywordflow}{if}(obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == BULLWHIP && (\hyperlink{monst_8h_a19da8d7346e2a28afa6385a73cf36f86}{MON\_WEP}(mtmp) == obj) &&
1624            \hyperlink{hack_8h_a1f84afcae19c5b60124bc509ed647f84}{distu}(mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx},mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my})==1 && \hyperlink{decl_8h_a1aefaef88eef9075d8136d19410fd3b1}{uwep} && !mtmp->mpeaceful) \{
1625             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a7588e8e6ab60f4ea8fe12d61b674f52b}{misc} = obj;
1626             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_aa2d416f925ea6cbead5267d5462e4aef}{has\_misc} = \hyperlink{muse_8c_abad816ae5ba2b9882b006d16e7d2f83e}{MUSE\_BULLWHIP};
1627         \}
1628         \textcolor{comment}{/* Note: peaceful/tame monsters won't make themselves}
1629 \textcolor{comment}{         * invisible unless you can see them.  Not really right, but...}
1630 \textcolor{comment}{         */}
1631         \hyperlink{muse_8c_af624e874fc8909c7570dba15e9e64cbc}{nomore}(\hyperlink{muse_8c_ad01022eb368493aae7bf0e1959bce963}{MUSE\_WAN\_MAKE\_INVISIBLE});
1632         \textcolor{keywordflow}{if}(obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == WAN\_MAKE\_INVISIBLE && obj->\hyperlink{structobj_a14fc8dc59e9073bfbf1e170875a98448}{spe} > 0 &&
1633             !mtmp->minvis && !mtmp->invis\_blkd &&
1634             (!mtmp->mpeaceful || \hyperlink{youprop_8h_ae00ea7702fa1870643d604364b0640c7}{See\_invisible}) &&
1635             (!attacktype(mtmp->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}, \hyperlink{monattk_8h_aa24837bc8de1c47a08514d4eeffdfe48}{AT\_GAZE}) || mtmp->mcan)) \{
1636             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a7588e8e6ab60f4ea8fe12d61b674f52b}{misc} = obj;
1637             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_aa2d416f925ea6cbead5267d5462e4aef}{has\_misc} = \hyperlink{muse_8c_ad01022eb368493aae7bf0e1959bce963}{MUSE\_WAN\_MAKE\_INVISIBLE};
1638         \}
1639         \hyperlink{muse_8c_af624e874fc8909c7570dba15e9e64cbc}{nomore}(\hyperlink{muse_8c_a5980f169f9e08c086d1c4e588d9dd86d}{MUSE\_POT\_INVISIBILITY});
1640         \textcolor{keywordflow}{if}(obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == POT\_INVISIBILITY &&
1641             !mtmp->minvis && !mtmp->invis\_blkd &&
1642             (!mtmp->mpeaceful || \hyperlink{youprop_8h_ae00ea7702fa1870643d604364b0640c7}{See\_invisible}) &&
1643             (!attacktype(mtmp->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}, \hyperlink{monattk_8h_aa24837bc8de1c47a08514d4eeffdfe48}{AT\_GAZE}) || mtmp->mcan)) \{
1644             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a7588e8e6ab60f4ea8fe12d61b674f52b}{misc} = obj;
1645             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_aa2d416f925ea6cbead5267d5462e4aef}{has\_misc} = \hyperlink{muse_8c_a5980f169f9e08c086d1c4e588d9dd86d}{MUSE\_POT\_INVISIBILITY};
1646         \}
1647         \hyperlink{muse_8c_af624e874fc8909c7570dba15e9e64cbc}{nomore}(\hyperlink{muse_8c_a7704f2590b3a038a641deda61b84f58b}{MUSE\_WAN\_SPEED\_MONSTER});
1648         \textcolor{keywordflow}{if}(obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == WAN\_SPEED\_MONSTER && obj->\hyperlink{structobj_a14fc8dc59e9073bfbf1e170875a98448}{spe} > 0
1649                 && mtmp->mspeed != \hyperlink{monst_8h_a90047ea950c28fed112016338f30437c}{MFAST} && !mtmp->isgd) \{
1650             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a7588e8e6ab60f4ea8fe12d61b674f52b}{misc} = obj;
1651             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_aa2d416f925ea6cbead5267d5462e4aef}{has\_misc} = \hyperlink{muse_8c_a7704f2590b3a038a641deda61b84f58b}{MUSE\_WAN\_SPEED\_MONSTER};
1652         \}
1653         \hyperlink{muse_8c_af624e874fc8909c7570dba15e9e64cbc}{nomore}(\hyperlink{muse_8c_a7aa4b264c72038d91f1eaaf212b15ad6}{MUSE\_POT\_SPEED});
1654         \textcolor{keywordflow}{if}(obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == POT\_SPEED && mtmp->mspeed != \hyperlink{monst_8h_a90047ea950c28fed112016338f30437c}{MFAST}
1655                             && !mtmp->isgd) \{
1656             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a7588e8e6ab60f4ea8fe12d61b674f52b}{misc} = obj;
1657             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_aa2d416f925ea6cbead5267d5462e4aef}{has\_misc} = \hyperlink{muse_8c_a7aa4b264c72038d91f1eaaf212b15ad6}{MUSE\_POT\_SPEED};
1658         \}
1659         \hyperlink{muse_8c_af624e874fc8909c7570dba15e9e64cbc}{nomore}(\hyperlink{muse_8c_acfb9e6f9d58209f1808dfd315b54b723}{MUSE\_WAN\_POLYMORPH});
1660         \textcolor{keywordflow}{if}(obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == WAN\_POLYMORPH && obj->\hyperlink{structobj_a14fc8dc59e9073bfbf1e170875a98448}{spe} > 0 && !mtmp->cham
1661                 && \hyperlink{muse_8c_a2e4cd9d4199a5c6f1ecf9985d4a58dfb}{monstr}[monsndx(mdat)] < 6) \{
1662             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a7588e8e6ab60f4ea8fe12d61b674f52b}{misc} = obj;
1663             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_aa2d416f925ea6cbead5267d5462e4aef}{has\_misc} = \hyperlink{muse_8c_acfb9e6f9d58209f1808dfd315b54b723}{MUSE\_WAN\_POLYMORPH};
1664         \}
1665         \hyperlink{muse_8c_af624e874fc8909c7570dba15e9e64cbc}{nomore}(\hyperlink{muse_8c_a43d2aa2b768ead263f72c437525539c6}{MUSE\_POT\_POLYMORPH});
1666         \textcolor{keywordflow}{if}(obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == POT\_POLYMORPH && !mtmp->cham
1667                 && \hyperlink{muse_8c_a2e4cd9d4199a5c6f1ecf9985d4a58dfb}{monstr}[monsndx(mdat)] < 6) \{
1668             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a7588e8e6ab60f4ea8fe12d61b674f52b}{misc} = obj;
1669             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_aa2d416f925ea6cbead5267d5462e4aef}{has\_misc} = \hyperlink{muse_8c_a43d2aa2b768ead263f72c437525539c6}{MUSE\_POT\_POLYMORPH};
1670         \}
1671     \}
1672     \textcolor{keywordflow}{return}((\textcolor{keywordtype}{boolean})(!!\hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_aa2d416f925ea6cbead5267d5462e4aef}{has\_misc}));
1673 \textcolor{preprocessor}{#undef nomore}
1674 \}
\end{DoxyCode}
\hypertarget{muse_8c_a2342a49a83a69a6505b56e326a682f12}{\index{muse.\+c@{muse.\+c}!find\+\_\+offensive@{find\+\_\+offensive}}
\index{find\+\_\+offensive@{find\+\_\+offensive}!muse.\+c@{muse.\+c}}
\subsubsection[{find\+\_\+offensive}]{\setlength{\rightskip}{0pt plus 5cm}{\bf boolean} find\+\_\+offensive (
\begin{DoxyParamCaption}
\item[{struct {\bf monst} $\ast$}]{mtmp}
\end{DoxyParamCaption}
)}}\label{muse_8c_a2342a49a83a69a6505b56e326a682f12}


Definition at line 965 of file muse.\+c.



References A\+D\+\_\+\+H\+E\+A\+L, amorphous, A\+T\+\_\+\+G\+A\+Z\+E, F\+A\+L\+S\+E, musable\+::has\+\_\+offense, haseyes, In\+\_\+endgame, is\+\_\+animal, Is\+\_\+earthlevel, is\+\_\+metallic, Is\+\_\+rogue\+\_\+level, m, mindless, multi, M\+U\+S\+E\+\_\+\+F\+I\+R\+E\+\_\+\+H\+O\+R\+N, M\+U\+S\+E\+\_\+\+F\+R\+O\+S\+T\+\_\+\+H\+O\+R\+N, M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+A\+C\+I\+D, M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+B\+L\+I\+N\+D\+N\+E\+S\+S, M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+C\+O\+N\+F\+U\+S\+I\+O\+N, M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+P\+A\+R\+A\+L\+Y\+S\+I\+S, M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+S\+L\+E\+E\+P\+I\+N\+G, M\+U\+S\+E\+\_\+\+S\+C\+R\+\_\+\+E\+A\+R\+T\+H, M\+U\+S\+E\+\_\+\+S\+C\+R\+\_\+\+F\+I\+R\+E, M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+C\+O\+L\+D, M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+D\+E\+A\+T\+H, M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+F\+I\+R\+E, M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+L\+I\+G\+H\+T\+N\+I\+N\+G, M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+M\+A\+G\+I\+C\+\_\+\+M\+I\+S\+S\+I\+L\+E, M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+S\+L\+E\+E\+P, M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+S\+T\+R\+I\+K\+I\+N\+G, obj\+::nobj, nohands, nomore, noncorporeal, musable\+::offensive, obj\+::otyp, passes\+\_\+walls, Reflecting, R\+E\+I\+N\+C\+A\+R\+N\+A\+T\+I\+O\+N, resists\+\_\+fire, obj\+::spe, u, uarm, uarmc, uarmf, uarmg, uarmh, uarms, unsolid, uwep, you\+::uz, W\+\_\+\+A\+R\+M\+H, and which\+\_\+armor().


\begin{DoxyCode}
967 \{
968     \textcolor{keyword}{register} \textcolor{keyword}{struct }\hyperlink{structobj}{obj} *\hyperlink{structobj}{obj};
969     \textcolor{keywordtype}{boolean} ranged\_stuff = lined\_up(mtmp);
970     \textcolor{keywordtype}{boolean} reflection\_skip = (\hyperlink{youprop_8h_a6ae11863457d15e255fa9d39f1df45b6}{Reflecting} && rn2(2));
971     \textcolor{keyword}{struct }obj *helmet = \hyperlink{worn_8c_a260cadb0c77a7032f8e53716072e6cd7}{which\_armor}(mtmp, \hyperlink{prop_8h_a4e8958625f891ea2329369d5032d0d6d}{W\_ARMH});
972 
973     \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a016d6af9ae60f010812a200105259397}{offensive} = (\textcolor{keyword}{struct }obj *)0;
974     \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_af4b04fd9bf567b138538681c91d145e9}{has\_offense} = 0;
975     \textcolor{keywordflow}{if} (mtmp->mpeaceful || \hyperlink{mondata_8h_a6633b7e5ce3955ef878c6890a72b9392}{is\_animal}(mtmp->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}) ||
976                 \hyperlink{mondata_8h_a9b2e225376aeed6f19559b2c2dced2d0}{mindless}(mtmp->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}) || \hyperlink{mondata_8h_ae13d4a4d0a9842348cffbb5dae990771}{nohands}(mtmp->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}))
977         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
978     \textcolor{keywordflow}{if} (\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.uswallow) \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
979     \textcolor{keywordflow}{if} (in\_your\_sanctuary(mtmp, 0, 0)) \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
980     \textcolor{keywordflow}{if} (dmgtype(mtmp->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}, \hyperlink{monattk_8h_a9c2a80ab2cdf3cabde78b488aa27a813}{AD\_HEAL}) && !\hyperlink{decl_8h_a1aefaef88eef9075d8136d19410fd3b1}{uwep}
981 \textcolor{preprocessor}{#ifdef TOURIST}
982         && !uarmu
983 \textcolor{preprocessor}{#endif}
984         && !\hyperlink{decl_8h_ad6e6532c78ab5fe0078daf4cf352f3c1}{uarm} && !\hyperlink{decl_8h_a5990ad491dff32418089ab967be227a5}{uarmh} && !\hyperlink{decl_8h_aee21972b230a8408f2b85e26f195e91d}{uarms} && !\hyperlink{decl_8h_a374ab5e4582cfafa2d4ef57211f53293}{uarmg} && !\hyperlink{decl_8h_a586be55c11f20a38a490f6bb922a437d}{uarmc} && !
      \hyperlink{decl_8h_a11e2d0f62fa1b42374054c939ebb288f}{uarmf})
985         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
986 
987     \textcolor{keywordflow}{if} (!ranged\_stuff) \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
988 \textcolor{preprocessor}{#define nomore(x) if(m.has\_offense==x) continue;}
989     \textcolor{keywordflow}{for}(obj=mtmp->\hyperlink{structmonst_a480856d6a5db5610593c9816e525a978}{minvent}; obj; obj=obj->\hyperlink{structobj_ad1c5d790528ee1d8349ef302994789d8}{nobj}) \{
990         \textcolor{comment}{/* nomore(MUSE\_WAN\_DEATH); */}
991         \textcolor{keywordflow}{if} (!reflection\_skip) \{
992             \textcolor{keywordflow}{if}(obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == WAN\_DEATH && obj->\hyperlink{structobj_a14fc8dc59e9073bfbf1e170875a98448}{spe} > 0) \{
993             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a016d6af9ae60f010812a200105259397}{offensive} = obj;
994             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_af4b04fd9bf567b138538681c91d145e9}{has\_offense} = \hyperlink{muse_8c_a74b936ceb6d08cd647c24b7a9855bbd2}{MUSE\_WAN\_DEATH};
995             \}
996             \hyperlink{muse_8c_af624e874fc8909c7570dba15e9e64cbc}{nomore}(\hyperlink{muse_8c_a35caddb6a36b66c17683384e434a61cc}{MUSE\_WAN\_SLEEP});
997             \textcolor{keywordflow}{if}(obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == WAN\_SLEEP && obj->\hyperlink{structobj_a14fc8dc59e9073bfbf1e170875a98448}{spe} > 0 && \hyperlink{decl_8h_a498406921f71695627a7107240f3ed7a}{multi} >= 0) \{
998             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a016d6af9ae60f010812a200105259397}{offensive} = obj;
999             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_af4b04fd9bf567b138538681c91d145e9}{has\_offense} = \hyperlink{muse_8c_a35caddb6a36b66c17683384e434a61cc}{MUSE\_WAN\_SLEEP};
1000             \}
1001             \hyperlink{muse_8c_af624e874fc8909c7570dba15e9e64cbc}{nomore}(\hyperlink{muse_8c_a5e2f9b11f00feb26f70d53f2f525afcc}{MUSE\_WAN\_FIRE});
1002             \textcolor{keywordflow}{if}(obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == WAN\_FIRE && obj->\hyperlink{structobj_a14fc8dc59e9073bfbf1e170875a98448}{spe} > 0) \{
1003             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a016d6af9ae60f010812a200105259397}{offensive} = obj;
1004             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_af4b04fd9bf567b138538681c91d145e9}{has\_offense} = \hyperlink{muse_8c_a5e2f9b11f00feb26f70d53f2f525afcc}{MUSE\_WAN\_FIRE};
1005             \}
1006             \hyperlink{muse_8c_af624e874fc8909c7570dba15e9e64cbc}{nomore}(\hyperlink{muse_8c_afed852913471cdec8c3c09a5b74f3066}{MUSE\_FIRE\_HORN});
1007             \textcolor{keywordflow}{if}(obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == FIRE\_HORN && obj->\hyperlink{structobj_a14fc8dc59e9073bfbf1e170875a98448}{spe} > 0) \{
1008             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a016d6af9ae60f010812a200105259397}{offensive} = obj;
1009             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_af4b04fd9bf567b138538681c91d145e9}{has\_offense} = \hyperlink{muse_8c_afed852913471cdec8c3c09a5b74f3066}{MUSE\_FIRE\_HORN};
1010             \}
1011             \hyperlink{muse_8c_af624e874fc8909c7570dba15e9e64cbc}{nomore}(\hyperlink{muse_8c_a2a7c82f0a9d3bbec9f905e7a61081360}{MUSE\_WAN\_COLD});
1012             \textcolor{keywordflow}{if}(obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == WAN\_COLD && obj->\hyperlink{structobj_a14fc8dc59e9073bfbf1e170875a98448}{spe} > 0) \{
1013             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a016d6af9ae60f010812a200105259397}{offensive} = obj;
1014             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_af4b04fd9bf567b138538681c91d145e9}{has\_offense} = \hyperlink{muse_8c_a2a7c82f0a9d3bbec9f905e7a61081360}{MUSE\_WAN\_COLD};
1015             \}
1016             \hyperlink{muse_8c_af624e874fc8909c7570dba15e9e64cbc}{nomore}(\hyperlink{muse_8c_a93600e9dc2ed44547dd403312a7e4d39}{MUSE\_FROST\_HORN});
1017             \textcolor{keywordflow}{if}(obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == FROST\_HORN && obj->\hyperlink{structobj_a14fc8dc59e9073bfbf1e170875a98448}{spe} > 0) \{
1018             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a016d6af9ae60f010812a200105259397}{offensive} = obj;
1019             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_af4b04fd9bf567b138538681c91d145e9}{has\_offense} = \hyperlink{muse_8c_a93600e9dc2ed44547dd403312a7e4d39}{MUSE\_FROST\_HORN};
1020             \}
1021             \hyperlink{muse_8c_af624e874fc8909c7570dba15e9e64cbc}{nomore}(\hyperlink{muse_8c_af30cdd1527f03e100e0a8863fbaf0e36}{MUSE\_WAN\_LIGHTNING});
1022             \textcolor{keywordflow}{if}(obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == WAN\_LIGHTNING && obj->\hyperlink{structobj_a14fc8dc59e9073bfbf1e170875a98448}{spe} > 0) \{
1023             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a016d6af9ae60f010812a200105259397}{offensive} = obj;
1024             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_af4b04fd9bf567b138538681c91d145e9}{has\_offense} = \hyperlink{muse_8c_af30cdd1527f03e100e0a8863fbaf0e36}{MUSE\_WAN\_LIGHTNING};
1025             \}
1026             \hyperlink{muse_8c_af624e874fc8909c7570dba15e9e64cbc}{nomore}(\hyperlink{muse_8c_a55b22ac9743ab572be04691e3085cacf}{MUSE\_WAN\_MAGIC\_MISSILE});
1027             \textcolor{keywordflow}{if}(obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == WAN\_MAGIC\_MISSILE && obj->\hyperlink{structobj_a14fc8dc59e9073bfbf1e170875a98448}{spe} > 0) \{
1028             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a016d6af9ae60f010812a200105259397}{offensive} = obj;
1029             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_af4b04fd9bf567b138538681c91d145e9}{has\_offense} = \hyperlink{muse_8c_a55b22ac9743ab572be04691e3085cacf}{MUSE\_WAN\_MAGIC\_MISSILE};
1030             \}
1031         \}
1032         \hyperlink{muse_8c_af624e874fc8909c7570dba15e9e64cbc}{nomore}(\hyperlink{muse_8c_ae54e2ee0bcdc7628cd790b1b1277dfc7}{MUSE\_WAN\_STRIKING});
1033         \textcolor{keywordflow}{if}(obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == WAN\_STRIKING && obj->\hyperlink{structobj_a14fc8dc59e9073bfbf1e170875a98448}{spe} > 0) \{
1034             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a016d6af9ae60f010812a200105259397}{offensive} = obj;
1035             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_af4b04fd9bf567b138538681c91d145e9}{has\_offense} = \hyperlink{muse_8c_ae54e2ee0bcdc7628cd790b1b1277dfc7}{MUSE\_WAN\_STRIKING};
1036         \}
1037         \hyperlink{muse_8c_af624e874fc8909c7570dba15e9e64cbc}{nomore}(\hyperlink{muse_8c_a27b03b7ceea5b8226cadd34496353139}{MUSE\_POT\_PARALYSIS});
1038         \textcolor{keywordflow}{if}(obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == POT\_PARALYSIS && \hyperlink{decl_8h_a498406921f71695627a7107240f3ed7a}{multi} >= 0) \{
1039             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a016d6af9ae60f010812a200105259397}{offensive} = obj;
1040             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_af4b04fd9bf567b138538681c91d145e9}{has\_offense} = \hyperlink{muse_8c_a27b03b7ceea5b8226cadd34496353139}{MUSE\_POT\_PARALYSIS};
1041         \}
1042         \hyperlink{muse_8c_af624e874fc8909c7570dba15e9e64cbc}{nomore}(\hyperlink{muse_8c_a3c3fd8d2297b5bb2c0a2752dcbe8674d}{MUSE\_POT\_BLINDNESS});
1043         \textcolor{keywordflow}{if}(obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == POT\_BLINDNESS && !attacktype(mtmp->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}, \hyperlink{monattk_8h_aa24837bc8de1c47a08514d4eeffdfe48}{AT\_GAZE})) \{
1044             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a016d6af9ae60f010812a200105259397}{offensive} = obj;
1045             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_af4b04fd9bf567b138538681c91d145e9}{has\_offense} = \hyperlink{muse_8c_a3c3fd8d2297b5bb2c0a2752dcbe8674d}{MUSE\_POT\_BLINDNESS};
1046         \}
1047         \hyperlink{muse_8c_af624e874fc8909c7570dba15e9e64cbc}{nomore}(\hyperlink{muse_8c_a6d1ffa992436d95af0d255efb356fc19}{MUSE\_POT\_CONFUSION});
1048         \textcolor{keywordflow}{if}(obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == POT\_CONFUSION) \{
1049             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a016d6af9ae60f010812a200105259397}{offensive} = obj;
1050             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_af4b04fd9bf567b138538681c91d145e9}{has\_offense} = \hyperlink{muse_8c_a6d1ffa992436d95af0d255efb356fc19}{MUSE\_POT\_CONFUSION};
1051         \}
1052         \hyperlink{muse_8c_af624e874fc8909c7570dba15e9e64cbc}{nomore}(\hyperlink{muse_8c_a131d30d36bd756962ddba0a71dc1ee0e}{MUSE\_POT\_SLEEPING});
1053         \textcolor{keywordflow}{if}(obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == POT\_SLEEPING) \{
1054             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a016d6af9ae60f010812a200105259397}{offensive} = obj;
1055             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_af4b04fd9bf567b138538681c91d145e9}{has\_offense} = \hyperlink{muse_8c_a131d30d36bd756962ddba0a71dc1ee0e}{MUSE\_POT\_SLEEPING};
1056         \}
1057         \hyperlink{muse_8c_af624e874fc8909c7570dba15e9e64cbc}{nomore}(\hyperlink{muse_8c_a4fa82597beb31f42c721811ca5abe33f}{MUSE\_POT\_ACID});
1058         \textcolor{keywordflow}{if}(obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == POT\_ACID) \{
1059             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a016d6af9ae60f010812a200105259397}{offensive} = obj;
1060             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_af4b04fd9bf567b138538681c91d145e9}{has\_offense} = \hyperlink{muse_8c_a4fa82597beb31f42c721811ca5abe33f}{MUSE\_POT\_ACID};
1061         \}
1062         \textcolor{comment}{/* we can safely put this scroll here since the locations that}
1063 \textcolor{comment}{         * are in a 1 square radius are a subset of the locations that}
1064 \textcolor{comment}{         * are in wand range}
1065 \textcolor{comment}{         */}
1066         \hyperlink{muse_8c_af624e874fc8909c7570dba15e9e64cbc}{nomore}(\hyperlink{muse_8c_ad15e1902de0142f63a7d7956359ba185}{MUSE\_SCR\_EARTH});
1067         \textcolor{keywordflow}{if} (obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == SCR\_EARTH
1068                && ((helmet && \hyperlink{objclass_8h_a5134e0e0a63a108b16f212e15a97fc1a}{is\_metallic}(helmet)) ||
1069                 mtmp->mconf || \hyperlink{mondata_8h_ac3d4d869d4c7625a840b9731b591e90b}{amorphous}(mtmp->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}) ||
1070                 \hyperlink{mondata_8h_a42b9f266cafddebd01c657d1e39ae72d}{passes\_walls}(mtmp->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}) ||
1071                 \hyperlink{mondata_8h_a8ef85e65e7dda38e65d7e3801cde6d2e}{noncorporeal}(mtmp->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}) ||
1072                 \hyperlink{mondata_8h_aa072852c97f59a8374d1595cda2ab700}{unsolid}(mtmp->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}) || !rn2(10))
1073                && dist2(mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx},mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my},mtmp->\hyperlink{structmonst_abbf7f123305ee87bce6247f2a168b63d}{mux},mtmp->\hyperlink{structmonst_ab4c41d111e70e2301aebf3c12b1404e8}{muy}) <= 2
1074                && mtmp->mcansee && \hyperlink{mondata_8h_acef071254b9ae0dcf53724485be10841}{haseyes}(mtmp->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data})
1075 #ifdef \hyperlink{config_8h_a6b9728c18024eafa560aaeb30159e47d}{REINCARNATION}
1076                && !\hyperlink{dungeon_8h_a2732117523c8540638daf4315dda16b9}{Is\_rogue\_level}(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz})
1077 #endif
1078                && (!\hyperlink{dungeon_8h_ae85486e6a752224948478a6e9dab0329}{In\_endgame}(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz}) || \hyperlink{dungeon_8h_aa4eaf851320108eeaacde06ca61fe041}{Is\_earthlevel}(&
      \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz}))) \{
1079             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a016d6af9ae60f010812a200105259397}{offensive} = obj;
1080             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_af4b04fd9bf567b138538681c91d145e9}{has\_offense} = \hyperlink{muse_8c_ad15e1902de0142f63a7d7956359ba185}{MUSE\_SCR\_EARTH};
1081         \}
1082 \textcolor{preprocessor}{#if 0}
1083         \hyperlink{muse_8c_af624e874fc8909c7570dba15e9e64cbc}{nomore}(\hyperlink{muse_8c_a368c98dc7e6a48b4d5807d2f4e166d5d}{MUSE\_SCR\_FIRE});
1084         \textcolor{keywordflow}{if} (obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == SCR\_FIRE && \hyperlink{mondata_8h_a9cd1ee3ba3c1e0e78509b763ce6d38d1}{resists\_fire}(mtmp)
1085            && dist2(mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx},mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my},mtmp->\hyperlink{structmonst_abbf7f123305ee87bce6247f2a168b63d}{mux},mtmp->\hyperlink{structmonst_ab4c41d111e70e2301aebf3c12b1404e8}{muy}) <= 2
1086            && mtmp->mcansee && \hyperlink{mondata_8h_acef071254b9ae0dcf53724485be10841}{haseyes}(mtmp->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data})) \{
1087             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a016d6af9ae60f010812a200105259397}{offensive} = obj;
1088             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_af4b04fd9bf567b138538681c91d145e9}{has\_offense} = \hyperlink{muse_8c_a368c98dc7e6a48b4d5807d2f4e166d5d}{MUSE\_SCR\_FIRE};
1089         \}
1090 \textcolor{preprocessor}{#endif}
1091     \}
1092     \textcolor{keywordflow}{return}((\textcolor{keywordtype}{boolean})(!!\hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_af4b04fd9bf567b138538681c91d145e9}{has\_offense}));
1093 \textcolor{preprocessor}{#undef nomore}
1094 \}
\end{DoxyCode}
\hypertarget{muse_8c_a07ac33c7bc46a3586197be209cd7f80e}{\index{muse.\+c@{muse.\+c}!mbhit@{mbhit}}
\index{mbhit@{mbhit}!muse.\+c@{muse.\+c}}
\subsubsection[{mbhit}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} void mbhit (
\begin{DoxyParamCaption}
\item[{struct {\bf monst} $\ast$}]{mon, }
\item[{int}]{range, }
\item[{fhitm}]{, }
\item[{fhito}]{, }
\item[{struct {\bf obj} $\ast$}]{obj}
\end{DoxyParamCaption}
)}}\label{muse_8c_a07ac33c7bc46a3586197be209cd7f80e}


Definition at line 1175 of file muse.\+c.



References bhitpos, cansee, canspotmon, D\+\_\+\+B\+R\+O\+K\+E\+N, D\+\_\+\+C\+L\+O\+S\+E\+D, D\+\_\+\+L\+O\+C\+K\+E\+D, I\+S\+\_\+\+D\+O\+O\+R, level, levl, m\+\_\+at, makeknown, map\+\_\+invisible(), M\+O\+N\+\_\+\+A\+T, dlevel\+\_\+t\+::objects, otmp, obj\+::otyp, S\+D\+O\+O\+R, S\+H\+O\+P\+B\+A\+S\+E, u, you\+::ux, you\+::uy, coord\+::x, coord\+::y, youmonst, and Z\+A\+P\+\_\+\+P\+O\+S.



Referenced by use\+\_\+defensive(), and use\+\_\+offensive().


\begin{DoxyCode}
1181 \{
1182     \textcolor{keyword}{register} \textcolor{keyword}{struct }\hyperlink{structmonst}{monst} *mtmp;
1183     \textcolor{keyword}{register} \textcolor{keyword}{struct }obj *\hyperlink{mhitu_8c_a8cf94e09e1a72daf7050a2817ba70974}{otmp};
1184     \textcolor{keyword}{register} \hyperlink{config_8h_a65f85814a8290f9797005d3b28e7e5fc}{uchar} typ;
1185     \textcolor{keywordtype}{int} ddx, ddy;
1186 
1187     \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x} = mon->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx};
1188     \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y} = mon->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my};
1189     ddx = sgn(mon->\hyperlink{structmonst_abbf7f123305ee87bce6247f2a168b63d}{mux} - mon->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx});
1190     ddy = sgn(mon->\hyperlink{structmonst_ab4c41d111e70e2301aebf3c12b1404e8}{muy} - mon->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my});
1191 
1192     \textcolor{keywordflow}{while}(range-- > 0) \{
1193         \textcolor{keywordtype}{int} x,y;
1194 
1195         \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x} += ddx;
1196         \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y} += ddy;
1197         x = \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x}; y = \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y};
1198 
1199         \textcolor{keywordflow}{if} (!isok(x,y)) \{
1200             \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x} -= ddx;
1201             \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y} -= ddy;
1202             \textcolor{keywordflow}{break};
1203         \}
1204         \textcolor{keywordflow}{if} (find\_drawbridge(&x,&y))
1205             \textcolor{keywordflow}{switch} (obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp}) \{
1206             \textcolor{keywordflow}{case} WAN\_STRIKING:
1207                 destroy\_drawbridge(x,y);
1208             \}
1209         \textcolor{keywordflow}{if}(\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x}==\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux} && \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y}==\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy}) \{
1210             (*fhitm)(&\hyperlink{decl_8h_ad15893dbcb60e2777ae0dfac9f840858}{youmonst}, obj);
1211             range -= 3;
1212         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(\hyperlink{rm_8h_a17ef631151b987fd582fca76a429c08a}{MON\_AT}(\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x}, \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y}))\{
1213             mtmp = \hyperlink{rm_8h_a4d8dddf3df3fad65478980d2c8cbf53c}{m\_at}(\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x},\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y});
1214             \textcolor{keywordflow}{if} (\hyperlink{vision_8h_a857efc720262bc13a9e4b4bcbb079b5c}{cansee}(\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x},\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y}) && !\hyperlink{display_8h_a13f0a7cac1ceb73885a59b8598de1648}{canspotmon}(mtmp))
1215                 \hyperlink{display_8c_add21782d0389d23fbc5a470ef91d77e9}{map\_invisible}(\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x}, \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y});
1216             (*fhitm)(mtmp, obj);
1217             range -= 3;
1218         \}
1219         \textcolor{comment}{/* modified by GAN to hit all objects */}
1220         \textcolor{keywordflow}{if}(fhito)\{
1221             \textcolor{keywordtype}{int} hitanything = 0;
1222             \textcolor{keyword}{register} \textcolor{keyword}{struct }obj *next\_obj;
1223 
1224             \textcolor{keywordflow}{for}(otmp = \hyperlink{rm_8h_a721c99bfa099c4225215ba102e91fa39}{level}.\hyperlink{structdlevel__t_ac128f805d01d7746b499596dd3b92a53}{objects}[\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x}][\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.
      \hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y}];
1225                             otmp; otmp = next\_obj) \{
1226             \textcolor{comment}{/* Fix for polymorph bug, Tim Wright */}
1227             next\_obj = otmp->nexthere;
1228             hitanything += (*fhito)(\hyperlink{mhitu_8c_a8cf94e09e1a72daf7050a2817ba70974}{otmp}, obj);
1229             \}
1230             \textcolor{keywordflow}{if}(hitanything) range--;
1231         \}
1232         typ = \hyperlink{rm_8h_a8cd681fba60fdedbabfd71a0b4bbfc00}{levl}[\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x}][\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y}].typ;
1233         \textcolor{keywordflow}{if}(\hyperlink{rm_8h_a44de5677b6310b3b96cad756e24b59d9}{IS\_DOOR}(typ) || typ == \hyperlink{rm_8h_a03fd0fa1e0dbd19ea38dff0c79e656a5}{SDOOR}) \{
1234             \textcolor{keywordflow}{switch} (obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp}) \{
1235             \textcolor{comment}{/* note: monsters don't use opening or locking magic}
1236 \textcolor{comment}{               at present, but keep these as placeholders */}
1237             \textcolor{keywordflow}{case} WAN\_OPENING:
1238             \textcolor{keywordflow}{case} WAN\_LOCKING:
1239             \textcolor{keywordflow}{case} WAN\_STRIKING:
1240                 \textcolor{keywordflow}{if} (doorlock(obj, \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x}, \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y})) \{
1241                 \hyperlink{hack_8h_afbd3607e7cef2f888f4190d40d058011}{makeknown}(obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp});
1242                 \textcolor{comment}{/* if a shop door gets broken, add it to}
1243 \textcolor{comment}{                   the shk's fix list (no cost to player) */}
1244                 \textcolor{keywordflow}{if} (\hyperlink{rm_8h_a8cd681fba60fdedbabfd71a0b4bbfc00}{levl}[\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x}][\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y}].doormask ==
1245                     \hyperlink{rm_8h_a1e152f0e5964deb57688f7dbcb3e6a08}{D\_BROKEN} &&
1246                     *in\_rooms(\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x}, \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y}, \hyperlink{mkroom_8h_a925701a88c7ed0db502cfac9d8fbcf9e}{SHOPBASE}))
1247                     add\_damage(\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x}, \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y}, 0L);
1248                 \}
1249                 \textcolor{keywordflow}{break};
1250             \}
1251         \}
1252         \textcolor{keywordflow}{if}(!\hyperlink{rm_8h_a5dd90f0180ed18ffbebfa25ff9c3e1d9}{ZAP\_POS}(typ) || (\hyperlink{rm_8h_a44de5677b6310b3b96cad756e24b59d9}{IS\_DOOR}(typ) &&
1253            (\hyperlink{rm_8h_a8cd681fba60fdedbabfd71a0b4bbfc00}{levl}[\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x}][\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y}].doormask & (\hyperlink{rm_8h_a0996530515217dfd9f5e12878cb1dc8b}{D\_LOCKED} | 
      \hyperlink{rm_8h_a65f9ce7db71ac3d4c13edfe69732ec9a}{D\_CLOSED})))
1254           ) \{
1255             \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x} -= ddx;
1256             \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y} -= ddy;
1257             \textcolor{keywordflow}{break};
1258         \}
1259     \}
1260 \}
\end{DoxyCode}
\hypertarget{muse_8c_a6834998d463056c47210a44ddb1ae849}{\index{muse.\+c@{muse.\+c}!mbhitm@{mbhitm}}
\index{mbhitm@{mbhitm}!muse.\+c@{muse.\+c}}
\subsubsection[{mbhitm}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+P\+T\+R} int mbhitm (
\begin{DoxyParamCaption}
\item[{struct {\bf monst} $\ast$}]{mtmp, }
\item[{struct {\bf obj} $\ast$}]{otmp}
\end{DoxyParamCaption}
)}}\label{muse_8c_a6834998d463056c47210a44ddb1ae849}


Definition at line 1098 of file muse.\+c.



References Antimagic, bhitpos, cansee, canspotmon, F\+A\+L\+S\+E, find\+\_\+mac(), Half\+\_\+spell\+\_\+damage, K\+I\+L\+L\+E\+D\+\_\+\+B\+Y\+\_\+\+A\+N, makeknown, map\+\_\+invisible(), rloc(), shieldeff(), tele(), tele\+\_\+restrict(), T\+E\+L\+L, T\+E\+M\+P\+L\+E, T\+R\+U\+E, u, you\+::uac, you\+::ux, you\+::uy, coord\+::x, coord\+::y, youmonst, and zap\+\_\+oseen.



Referenced by use\+\_\+defensive(), and use\+\_\+offensive().


\begin{DoxyCode}
1101 \{
1102     \textcolor{keywordtype}{int} tmp;
1103 
1104     \textcolor{keywordtype}{boolean} reveal\_invis = \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
1105     \textcolor{keywordflow}{if} (mtmp != &\hyperlink{decl_8h_ad15893dbcb60e2777ae0dfac9f840858}{youmonst}) \{
1106         mtmp->msleeping = 0;
1107         \textcolor{keywordflow}{if} (mtmp->\hyperlink{structmonst_aab8fc9a0be90b4db8333b09487e2620c}{m\_ap\_type}) seemimic(mtmp);
1108     \}
1109     \textcolor{keywordflow}{switch}(otmp->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp}) \{
1110     \textcolor{keywordflow}{case} WAN\_STRIKING:
1111         reveal\_invis = \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
1112         \textcolor{keywordflow}{if} (mtmp == &\hyperlink{decl_8h_ad15893dbcb60e2777ae0dfac9f840858}{youmonst}) \{
1113             \textcolor{keywordflow}{if} (\hyperlink{muse_8c_ac4ce829c86a7bd25047f918fac166b1f}{zap\_oseen}) \hyperlink{hack_8h_afbd3607e7cef2f888f4190d40d058011}{makeknown}(WAN\_STRIKING);
1114             \textcolor{keywordflow}{if} (\hyperlink{youprop_8h_aaa17c946f184a85fbf104cdb4d55e24e}{Antimagic}) \{
1115                 \hyperlink{display_8c_ac89f44ae626d79f05953e503312a939d}{shieldeff}(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux}, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy});
1116                 pline(\textcolor{stringliteral}{"Boing!"});
1117             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (rnd(20) < 10 + \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a4286c7d027f70b103209bb3406ea3d85}{uac}) \{
1118                 pline\_The(\textcolor{stringliteral}{"wand hits you!"});
1119                 tmp = d(2,12);
1120                 \textcolor{keywordflow}{if}(\hyperlink{youprop_8h_ab83d6a803a76f8d34cac586e546a4a2c}{Half\_spell\_damage}) tmp = (tmp+1) / 2;
1121                 losehp(tmp, \textcolor{stringliteral}{"wand"}, \hyperlink{decl_8h_af4e54910b730baa32b2dfbe4dd2942c1}{KILLED\_BY\_AN});
1122             \} \textcolor{keywordflow}{else} pline\_The(\textcolor{stringliteral}{"wand misses you."});
1123             stop\_occupation();
1124             nomul(0);
1125         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (resists\_magm(mtmp)) \{
1126             \hyperlink{display_8c_ac89f44ae626d79f05953e503312a939d}{shieldeff}(mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my});
1127             pline(\textcolor{stringliteral}{"Boing!"});
1128         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (rnd(20) < 10+\hyperlink{worn_8c_a03e1b53b51c959a61e4c205e65d1095a}{find\_mac}(mtmp)) \{
1129             tmp = d(2,12);
1130             hit(\textcolor{stringliteral}{"wand"}, mtmp, exclam(tmp));
1131             (void) resist(mtmp, otmp->\hyperlink{structobj_a716ba3ee00602dede9ea5c68c74d45bd}{oclass}, tmp, \hyperlink{hack_8h_a23ed40f09222fe825a4666c3f8a68143}{TELL});
1132             \textcolor{keywordflow}{if} (\hyperlink{vision_8h_a857efc720262bc13a9e4b4bcbb079b5c}{cansee}(mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my}) && \hyperlink{muse_8c_ac4ce829c86a7bd25047f918fac166b1f}{zap\_oseen})
1133                 \hyperlink{hack_8h_afbd3607e7cef2f888f4190d40d058011}{makeknown}(WAN\_STRIKING);
1134         \} \textcolor{keywordflow}{else} \{
1135             miss(\textcolor{stringliteral}{"wand"}, mtmp);
1136             \textcolor{keywordflow}{if} (\hyperlink{vision_8h_a857efc720262bc13a9e4b4bcbb079b5c}{cansee}(mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my}) && \hyperlink{muse_8c_ac4ce829c86a7bd25047f918fac166b1f}{zap\_oseen})
1137                 \hyperlink{hack_8h_afbd3607e7cef2f888f4190d40d058011}{makeknown}(WAN\_STRIKING);
1138         \}
1139         \textcolor{keywordflow}{break};
1140     \textcolor{keywordflow}{case} WAN\_TELEPORTATION:
1141         \textcolor{keywordflow}{if} (mtmp == &\hyperlink{decl_8h_ad15893dbcb60e2777ae0dfac9f840858}{youmonst}) \{
1142             \textcolor{keywordflow}{if} (\hyperlink{muse_8c_ac4ce829c86a7bd25047f918fac166b1f}{zap\_oseen}) \hyperlink{hack_8h_afbd3607e7cef2f888f4190d40d058011}{makeknown}(WAN\_TELEPORTATION);
1143             \hyperlink{teleport_8c_adc02df4d24975a27c60b0ae356fe63b0}{tele}();
1144         \} \textcolor{keywordflow}{else} \{
1145             \textcolor{comment}{/* for consistency with zap.c, don't identify */}
1146             \textcolor{keywordflow}{if} (mtmp->ispriest &&
1147                 *in\_rooms(mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my}, \hyperlink{mkroom_8h_ab8c9e1bea2ae73195887ee67f76acee2}{TEMPLE})) \{
1148                 \textcolor{keywordflow}{if} (\hyperlink{vision_8h_a857efc720262bc13a9e4b4bcbb079b5c}{cansee}(mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my}))
1149                 pline(\textcolor{stringliteral}{"%s resists the magic!"}, Monnam(mtmp));
1150                 mtmp->msleeping = 0;
1151                 \textcolor{keywordflow}{if}(mtmp->\hyperlink{structmonst_aab8fc9a0be90b4db8333b09487e2620c}{m\_ap\_type}) seemimic(mtmp);
1152             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!\hyperlink{teleport_8c_ae7a3070a79b803227ad2474af019d5ab}{tele\_restrict}(mtmp))
1153                 (void) \hyperlink{teleport_8c_aa6c4370d0e90b61589cd46404ceab176}{rloc}(mtmp, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE});
1154         \}
1155         \textcolor{keywordflow}{break};
1156     \textcolor{keywordflow}{case} WAN\_CANCELLATION:
1157     \textcolor{keywordflow}{case} SPE\_CANCELLATION:
1158         (void) cancel\_monst(mtmp, otmp, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}, \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE}, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE});
1159         \textcolor{keywordflow}{break};
1160     \}
1161     \textcolor{keywordflow}{if} (reveal\_invis) \{
1162         \textcolor{keywordflow}{if} (mtmp->\hyperlink{structmonst_abe22e95755f1348a6a1c78252be5d76d}{mhp} > 0 && \hyperlink{vision_8h_a857efc720262bc13a9e4b4bcbb079b5c}{cansee}(\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x},\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y})
1163                             && !\hyperlink{display_8h_a13f0a7cac1ceb73885a59b8598de1648}{canspotmon}(mtmp))
1164         \hyperlink{display_8c_add21782d0389d23fbc5a470ef91d77e9}{map\_invisible}(\hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x}, \hyperlink{hack_8h_a4c9226f2a1ebd72a254bb15c96d75440}{bhitpos}.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y});
1165     \}
1166     \textcolor{keywordflow}{return} 0;
1167 \}
\end{DoxyCode}
\hypertarget{muse_8c_a0e15321266510c0c8dbe8cac3a3fa7d8}{\index{muse.\+c@{muse.\+c}!mon\+\_\+consume\+\_\+unstone@{mon\+\_\+consume\+\_\+unstone}}
\index{mon\+\_\+consume\+\_\+unstone@{mon\+\_\+consume\+\_\+unstone}!muse.\+c@{muse.\+c}}
\subsubsection[{mon\+\_\+consume\+\_\+unstone}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} void mon\+\_\+consume\+\_\+unstone (
\begin{DoxyParamCaption}
\item[{struct {\bf monst} $\ast$}]{mon, }
\item[{struct {\bf obj} $\ast$}]{obj, }
\item[{{\bf boolean}}]{by\+\_\+you, }
\item[{{\bf boolean}}]{stoning}
\end{DoxyParamCaption}
)}}\label{muse_8c_a0e15321266510c0c8dbe8cac3a3fa7d8}


Definition at line 2124 of file muse.\+c.



References acidic, canseemon, obj\+::corpsenm, E\+D\+O\+G, flags, Hallucination, edog\+::hungrytime, mon\+\_\+adjust\+\_\+speed(), mons, monstermoves, obj\+::otyp, obj\+::quan, resists\+\_\+acid, and flag\+::soundok.



Referenced by munstone(), and use\+\_\+defensive().


\begin{DoxyCode}
2129 \{
2130     \textcolor{keywordtype}{int} nutrit = (obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == CORPSE) ? dog\_nutrition(mon, obj) : 0;
2131     \textcolor{comment}{/* also sets meating */}
2132 
2133     \textcolor{comment}{/* give a "<mon> is slowing down" message and also remove}
2134 \textcolor{comment}{       intrinsic speed (comparable to similar effect on the hero) */}
2135     \hyperlink{worn_8c_adaf11e4f4e6b2b5d86738411700e6050}{mon\_adjust\_speed}(mon, -3, (\textcolor{keyword}{struct} obj *)0);
2136 
2137     \textcolor{keywordflow}{if} (\hyperlink{display_8h_ad75e04a9624fe7ba0e1715ae3a3feb27}{canseemon}(mon)) \{
2138     \textcolor{keywordtype}{long} save\_quan = obj->\hyperlink{structobj_ad08c0ed1a746fbb52377ecd7e4220578}{quan};
2139 
2140     obj->\hyperlink{structobj_ad08c0ed1a746fbb52377ecd7e4220578}{quan} = 1L;
2141     pline(\textcolor{stringliteral}{"%s %ss %s."}, Monnam(mon),
2142             (obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == POT\_ACID) ? \textcolor{stringliteral}{"quaff"} : \textcolor{stringliteral}{"eat"},
2143             distant\_name(obj,doname));
2144     obj->\hyperlink{structobj_ad08c0ed1a746fbb52377ecd7e4220578}{quan} = save\_quan;
2145     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_ae3871fd2268fbc24b89cece8eb352dfc}{soundok})
2146     You\_hear(\textcolor{stringliteral}{"%s."}, (obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == POT\_ACID) ? \textcolor{stringliteral}{"drinking"} : \textcolor{stringliteral}{"chewing"});
2147     m\_useup(mon, obj);
2148     \textcolor{keywordflow}{if} (((obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == POT\_ACID) || \hyperlink{mondata_8h_afc5fcbf092cceab8ec5c683c392dfb22}{acidic}(&\hyperlink{permonst_8h_ab96e7c4682ea5ae4f83339a15c06f676}{mons}[obj->\hyperlink{structobj_ad5db7220e2b815d06c3c80027ab9924f}{corpsenm}])) &&
2149             !\hyperlink{mondata_8h_a67859b0b3aa8e4ac0d74a818013cb507}{resists\_acid}(mon)) \{
2150     mon->\hyperlink{structmonst_abe22e95755f1348a6a1c78252be5d76d}{mhp} -= rnd(15);
2151     pline(\textcolor{stringliteral}{"%s has a very bad case of stomach acid."},
2152         Monnam(mon));
2153     \}
2154     \textcolor{keywordflow}{if} (mon->\hyperlink{structmonst_abe22e95755f1348a6a1c78252be5d76d}{mhp} <= 0) \{
2155     pline(\textcolor{stringliteral}{"%s dies!"}, Monnam(mon));
2156     \textcolor{keywordflow}{if} (by\_you) xkilled(mon, 0);
2157     \textcolor{keywordflow}{else} mondead(mon);
2158     \textcolor{keywordflow}{return};
2159     \}
2160     \textcolor{keywordflow}{if} (stoning && \hyperlink{display_8h_ad75e04a9624fe7ba0e1715ae3a3feb27}{canseemon}(mon)) \{
2161     \textcolor{keywordflow}{if} (\hyperlink{youprop_8h_aa873f7ea0a3d096ef94ff651907f7a76}{Hallucination})
2162     pline(\textcolor{stringliteral}{"What a pity - %s just ruined a future piece of art!"},
2163         mon\_nam(mon));
2164     \textcolor{keywordflow}{else}
2165         pline(\textcolor{stringliteral}{"%s seems limber!"}, Monnam(mon));
2166     \}
2167     \textcolor{keywordflow}{if} (obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == CORPSE && obj->\hyperlink{structobj_ad5db7220e2b815d06c3c80027ab9924f}{corpsenm} == PM\_LIZARD && mon->mconf) \{
2168     mon->mconf = 0;
2169     \textcolor{keywordflow}{if} (\hyperlink{display_8h_ad75e04a9624fe7ba0e1715ae3a3feb27}{canseemon}(mon))
2170         pline(\textcolor{stringliteral}{"%s seems steadier now."}, Monnam(mon));
2171     \}
2172     \textcolor{keywordflow}{if} (mon->\hyperlink{structmonst_a6d525ec48f9d38cda6accbb0cb39efba}{mtame} && !mon->isminion && nutrit > 0) \{
2173     \textcolor{keyword}{struct }\hyperlink{structedog}{edog} *\hyperlink{structedog}{edog} = \hyperlink{edog_8h_a695eedda64fa55285c2ea3b098308a70}{EDOG}(mon);
2174 
2175     \textcolor{keywordflow}{if} (edog->\hyperlink{structedog_ae93e5b475d6c1c0fb7f97d1c51d97726}{hungrytime} < \hyperlink{decl_8h_a75c1f008487d95630d0d789a79bb5c74}{monstermoves}) edog->\hyperlink{structedog_ae93e5b475d6c1c0fb7f97d1c51d97726}{hungrytime} = 
      \hyperlink{decl_8h_a75c1f008487d95630d0d789a79bb5c74}{monstermoves};
2176     edog->\hyperlink{structedog_ae93e5b475d6c1c0fb7f97d1c51d97726}{hungrytime} += nutrit;
2177     mon->mconf = 0;
2178     \}
2179     mon->\hyperlink{structmonst_a942c3eb47c3057fe67733f1a7be5e63b}{mlstmv} = \hyperlink{decl_8h_a75c1f008487d95630d0d789a79bb5c74}{monstermoves}; \textcolor{comment}{/* it takes a turn */}
2180 \}
\end{DoxyCode}
\hypertarget{muse_8c_accf269ca6aadf308f1c18ac6c3cef234}{\index{muse.\+c@{muse.\+c}!mon\+\_\+reflects@{mon\+\_\+reflects}}
\index{mon\+\_\+reflects@{mon\+\_\+reflects}!muse.\+c@{muse.\+c}}
\subsubsection[{mon\+\_\+reflects}]{\setlength{\rightskip}{0pt plus 5cm}{\bf boolean} mon\+\_\+reflects (
\begin{DoxyParamCaption}
\item[{struct {\bf monst} $\ast$}]{mon, }
\item[{{\bf const} char $\ast$}]{str}
\end{DoxyParamCaption}
)}}\label{muse_8c_accf269ca6aadf308f1c18ac6c3cef234}


Definition at line 2027 of file muse.\+c.



References F\+A\+L\+S\+E, makeknown, M\+O\+N\+\_\+\+W\+E\+P, mons, obj\+::otyp, T\+R\+U\+E, W\+\_\+\+A\+M\+U\+L, W\+\_\+\+A\+R\+M, W\+\_\+\+A\+R\+M\+S, and which\+\_\+armor().


\begin{DoxyCode}
2030 \{
2031     \textcolor{keyword}{struct }\hyperlink{structobj}{obj} *orefl = \hyperlink{worn_8c_a260cadb0c77a7032f8e53716072e6cd7}{which\_armor}(mon, \hyperlink{prop_8h_a14ac9957d8019d2304ceedb5d794fb4f}{W\_ARMS});
2032 
2033     \textcolor{keywordflow}{if} (orefl && orefl->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == SHIELD\_OF\_REFLECTION) \{
2034         \textcolor{keywordflow}{if} (str) \{
2035         pline(str, s\_suffix(mon\_nam(mon)), \textcolor{stringliteral}{"shield"});
2036         \hyperlink{hack_8h_afbd3607e7cef2f888f4190d40d058011}{makeknown}(SHIELD\_OF\_REFLECTION);
2037         \}
2038         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
2039     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (arti\_reflects(\hyperlink{monst_8h_a19da8d7346e2a28afa6385a73cf36f86}{MON\_WEP}(mon))) \{
2040         \textcolor{comment}{/* due to wielded artifact weapon */}
2041         \textcolor{keywordflow}{if} (str)
2042         pline(str, s\_suffix(mon\_nam(mon)), \textcolor{stringliteral}{"weapon"});
2043         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
2044     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((orefl = \hyperlink{worn_8c_a260cadb0c77a7032f8e53716072e6cd7}{which\_armor}(mon, \hyperlink{prop_8h_a1a4f9d6f31538cc9d677e617b49597d2}{W\_AMUL})) &&
2045                 orefl->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == AMULET\_OF\_REFLECTION) \{
2046         \textcolor{keywordflow}{if} (str) \{
2047         pline(str, s\_suffix(mon\_nam(mon)), \textcolor{stringliteral}{"amulet"});
2048         \hyperlink{hack_8h_afbd3607e7cef2f888f4190d40d058011}{makeknown}(AMULET\_OF\_REFLECTION);
2049         \}
2050         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
2051     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((orefl = \hyperlink{worn_8c_a260cadb0c77a7032f8e53716072e6cd7}{which\_armor}(mon, \hyperlink{prop_8h_a4f442d75a01cf88dcd71965d0d1f6155}{W\_ARM})) &&
2052         (orefl->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == SILVER\_DRAGON\_SCALES || orefl->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == SILVER\_DRAGON\_SCALE\_MAIL)) \{
2053         \textcolor{keywordflow}{if} (str)
2054         pline(str, s\_suffix(mon\_nam(mon)), \textcolor{stringliteral}{"armor"});
2055         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
2056     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (mon->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data} == &\hyperlink{permonst_8h_ab96e7c4682ea5ae4f83339a15c06f676}{mons}[PM\_SILVER\_DRAGON] ||
2057         mon->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data} == &\hyperlink{permonst_8h_ab96e7c4682ea5ae4f83339a15c06f676}{mons}[PM\_CHROMATIC\_DRAGON]) \{
2058         \textcolor{comment}{/* Silver dragons only reflect when mature; babies do not */}
2059         \textcolor{keywordflow}{if} (str)
2060         pline(str, s\_suffix(mon\_nam(mon)), \textcolor{stringliteral}{"scales"});
2061         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
2062     \}
2063     \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
2064 \}
\end{DoxyCode}
\hypertarget{muse_8c_a885817dcbfdbdb4f910bcbf3520a8031}{\index{muse.\+c@{muse.\+c}!mquaffmsg@{mquaffmsg}}
\index{mquaffmsg@{mquaffmsg}!muse.\+c@{muse.\+c}}
\subsubsection[{mquaffmsg}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} void mquaffmsg (
\begin{DoxyParamCaption}
\item[{struct {\bf monst} $\ast$}]{mtmp, }
\item[{struct {\bf obj} $\ast$}]{otmp}
\end{DoxyParamCaption}
)}}\label{muse_8c_a885817dcbfdbdb4f910bcbf3520a8031}


Definition at line 206 of file muse.\+c.



References canseemon, flags, and flag\+::soundok.



Referenced by precheck(), use\+\_\+defensive(), and use\+\_\+misc().


\begin{DoxyCode}
209 \{
210     \textcolor{keywordflow}{if} (\hyperlink{display_8h_ad75e04a9624fe7ba0e1715ae3a3feb27}{canseemon}(mtmp)) \{
211         otmp->dknown = 1;
212         pline(\textcolor{stringliteral}{"%s drinks %s!"}, Monnam(mtmp), singular(otmp, doname));
213     \} \textcolor{keywordflow}{else}
214         \textcolor{keywordflow}{if} (\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_ae3871fd2268fbc24b89cece8eb352dfc}{soundok})
215             You\_hear(\textcolor{stringliteral}{"a chugging sound."});
216 \}
\end{DoxyCode}
\hypertarget{muse_8c_adc8ed439d179dfe537178b5523edf8e3}{\index{muse.\+c@{muse.\+c}!mreadmsg@{mreadmsg}}
\index{mreadmsg@{mreadmsg}!muse.\+c@{muse.\+c}}
\subsubsection[{mreadmsg}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} void mreadmsg (
\begin{DoxyParamCaption}
\item[{struct {\bf monst} $\ast$}]{mtmp, }
\item[{struct {\bf obj} $\ast$}]{otmp}
\end{DoxyParamCaption}
)}}\label{muse_8c_adc8ed439d179dfe537178b5523edf8e3}


Definition at line 167 of file muse.\+c.



References A\+R\+T\+I\+C\+L\+E\+\_\+\+A, B\+U\+F\+S\+Z, canseemon, F\+A\+L\+S\+E, flags, mhe, Role\+\_\+if, Role\+\_\+switch, flag\+::soundok, Strcpy, S\+U\+P\+P\+R\+E\+S\+S\+\_\+\+I\+N\+V\+I\+S\+I\+B\+L\+E, S\+U\+P\+P\+R\+E\+S\+S\+\_\+\+I\+T, and S\+U\+P\+P\+R\+E\+S\+S\+\_\+\+S\+A\+D\+D\+L\+E.



Referenced by use\+\_\+defensive(), and use\+\_\+offensive().


\begin{DoxyCode}
170 \{
171     \textcolor{keywordtype}{boolean} vismon = \hyperlink{display_8h_ad75e04a9624fe7ba0e1715ae3a3feb27}{canseemon}(mtmp);
172     \textcolor{keywordtype}{char} onambuf[\hyperlink{global_8h_ab26c26cbf7a0c97d8960c3cfb413f882}{BUFSZ}];
173     \textcolor{keywordtype}{short} saverole;
174     \textcolor{keywordtype}{unsigned} savebknown;
175 
176     \textcolor{keywordflow}{if} (!vismon && !\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_ae3871fd2268fbc24b89cece8eb352dfc}{soundok})
177         \textcolor{keywordflow}{return};     \textcolor{comment}{/* no feedback */}
178 
179     otmp->dknown = 1;  \textcolor{comment}{/* seeing or hearing it read reveals its label */}
180     \textcolor{comment}{/* shouldn't be able to hear curse/bless status of unseen scrolls;}
181 \textcolor{comment}{       for priest characters, bknown will always be set during naming */}
182     savebknown = otmp->bknown;
183     saverole = \hyperlink{you_8h_a4e9c08c02937a7b0216c1ebdd3a3255d}{Role\_switch};
184     \textcolor{keywordflow}{if} (!vismon) \{
185         otmp->bknown = 0;
186         \textcolor{keywordflow}{if} (\hyperlink{you_8h_a6087f5b8605964c19078b777da740258}{Role\_if}(PM\_PRIEST)) \hyperlink{you_8h_a4e9c08c02937a7b0216c1ebdd3a3255d}{Role\_switch} = 0;
187     \}
188     \hyperlink{global_8h_add22f733d1f2c380499f495068e42b7c}{Strcpy}(onambuf, singular(otmp, doname));
189     \hyperlink{you_8h_a4e9c08c02937a7b0216c1ebdd3a3255d}{Role\_switch} = saverole;
190     otmp->bknown = savebknown;
191 
192     \textcolor{keywordflow}{if} (vismon)
193         pline(\textcolor{stringliteral}{"%s reads %s!"}, Monnam(mtmp), onambuf);
194     \textcolor{keywordflow}{else}
195         You\_hear(\textcolor{stringliteral}{"%s reading %s."},
196         x\_monnam(mtmp, \hyperlink{decl_8h_a299c8e50774fed673bc57fbc2a8803c4}{ARTICLE\_A}, (\textcolor{keywordtype}{char} *)0,
197             (\hyperlink{decl_8h_a0078e01ae36a3a8860b9e493ee41dec5}{SUPPRESS\_IT}|\hyperlink{decl_8h_ad9e040094d1a8428abaed6f39c9c8f73}{SUPPRESS\_INVISIBLE}|
      \hyperlink{decl_8h_a252ac785b1ff056f716aee17a60a1c57}{SUPPRESS\_SADDLE}), \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}),
198         onambuf);
199 
200     \textcolor{keywordflow}{if} (mtmp->mconf)
201         pline(\textcolor{stringliteral}{"Being confused, %s mispronounces the magic words..."},
202           vismon ? mon\_nam(mtmp) : \hyperlink{you_8h_a02ab05651821bbe8851d8459a27553e3}{mhe}(mtmp));
203 \}
\end{DoxyCode}
\hypertarget{muse_8c_a82ac795f5c2a0bc7574b746291a9139e}{\index{muse.\+c@{muse.\+c}!munstone@{munstone}}
\index{munstone@{munstone}!muse.\+c@{muse.\+c}}
\subsubsection[{munstone}]{\setlength{\rightskip}{0pt plus 5cm}{\bf boolean} munstone (
\begin{DoxyParamCaption}
\item[{struct {\bf monst} $\ast$}]{mon, }
\item[{{\bf boolean}}]{by\+\_\+you}
\end{DoxyParamCaption}
)}}\label{muse_8c_a82ac795f5c2a0bc7574b746291a9139e}


Definition at line 2103 of file muse.\+c.



References acidic, obj\+::corpsenm, F\+A\+L\+S\+E, mon\+\_\+consume\+\_\+unstone(), mons, obj\+::nobj, obj\+::otyp, resists\+\_\+ston, and T\+R\+U\+E.



Referenced by damageum(), and hmon\+\_\+hitmon().


\begin{DoxyCode}
2106 \{
2107     \textcolor{keyword}{struct }\hyperlink{structobj}{obj} *\hyperlink{structobj}{obj};
2108 
2109     \textcolor{keywordflow}{if} (\hyperlink{mondata_8h_a372753958b3b36d2edd0add67aa6fc75}{resists\_ston}(mon)) \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
2110     \textcolor{keywordflow}{if} (mon->\hyperlink{structmonst_ac6633f5d2ad6b74ec498541f3a3fe38b}{meating} || !mon->mcanmove || mon->msleeping) \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
2111 
2112     \textcolor{keywordflow}{for}(obj = mon->\hyperlink{structmonst_a480856d6a5db5610593c9816e525a978}{minvent}; obj; obj = obj->\hyperlink{structobj_ad1c5d790528ee1d8349ef302994789d8}{nobj}) \{
2113         \textcolor{comment}{/* Monsters can also use potions of acid */}
2114         \textcolor{keywordflow}{if} ((obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == POT\_ACID) || (obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == CORPSE &&
2115                 (obj->\hyperlink{structobj_ad5db7220e2b815d06c3c80027ab9924f}{corpsenm} == PM\_LIZARD || (\hyperlink{mondata_8h_afc5fcbf092cceab8ec5c683c392dfb22}{acidic}(&\hyperlink{permonst_8h_ab96e7c4682ea5ae4f83339a15c06f676}{mons}[obj->
      \hyperlink{structobj_ad5db7220e2b815d06c3c80027ab9924f}{corpsenm}]) && obj->\hyperlink{structobj_ad5db7220e2b815d06c3c80027ab9924f}{corpsenm} != PM\_GREEN\_SLIME)))) \{
2116         \hyperlink{muse_8c_a0e15321266510c0c8dbe8cac3a3fa7d8}{mon\_consume\_unstone}(mon, obj, by\_you, \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE});
2117         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
2118         \}
2119     \}
2120     \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
2121 \}
\end{DoxyCode}
\hypertarget{muse_8c_a6e9f8483c400b439d17e7a035c8c97cf}{\index{muse.\+c@{muse.\+c}!muse\+\_\+newcham\+\_\+mon@{muse\+\_\+newcham\+\_\+mon}}
\index{muse\+\_\+newcham\+\_\+mon@{muse\+\_\+newcham\+\_\+mon}!muse.\+c@{muse.\+c}}
\subsubsection[{muse\+\_\+newcham\+\_\+mon}]{\setlength{\rightskip}{0pt plus 5cm}static struct {\bf permonst}$\ast$ muse\+\_\+newcham\+\_\+mon (
\begin{DoxyParamCaption}
\item[{struct {\bf monst} $\ast$}]{mon}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{muse_8c_a6e9f8483c400b439d17e7a035c8c97cf}


Definition at line 1679 of file muse.\+c.



References Dragon\+\_\+mail\+\_\+to\+\_\+pm, Dragon\+\_\+scales\+\_\+to\+\_\+pm, Is\+\_\+dragon\+\_\+mail, Is\+\_\+dragon\+\_\+scales, W\+\_\+\+A\+R\+M, and which\+\_\+armor().



Referenced by use\+\_\+misc().


\begin{DoxyCode}
1681 \{
1682     \textcolor{keyword}{struct }\hyperlink{structobj}{obj} *m\_armr;
1683 
1684     \textcolor{keywordflow}{if} ((m\_armr = \hyperlink{worn_8c_a260cadb0c77a7032f8e53716072e6cd7}{which\_armor}(mon, \hyperlink{prop_8h_a4f442d75a01cf88dcd71965d0d1f6155}{W\_ARM})) != 0) \{
1685         \textcolor{keywordflow}{if} (\hyperlink{obj_8h_ac74e03bc58e77a20c6478ad7061e0198}{Is\_dragon\_scales}(m\_armr))
1686         \textcolor{keywordflow}{return} \hyperlink{obj_8h_a02b387f55e41d65f41c2f4430352cba7}{Dragon\_scales\_to\_pm}(m\_armr);
1687         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{obj_8h_a73558b304aee9d9803e5e71d1ca5fa60}{Is\_dragon\_mail}(m\_armr))
1688         \textcolor{keywordflow}{return} \hyperlink{obj_8h_a143816c96e8c90f4d541dc6a4490fe90}{Dragon\_mail\_to\_pm}(m\_armr);
1689     \}
1690     \textcolor{keywordflow}{return} rndmonst();
1691 \}
\end{DoxyCode}
\hypertarget{muse_8c_a82b42772c7f62e2033417e1c184da73b}{\index{muse.\+c@{muse.\+c}!mzapmsg@{mzapmsg}}
\index{mzapmsg@{mzapmsg}!muse.\+c@{muse.\+c}}
\subsubsection[{mzapmsg}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} void mzapmsg (
\begin{DoxyParamCaption}
\item[{struct {\bf monst} $\ast$}]{mtmp, }
\item[{struct {\bf obj} $\ast$}]{otmp, }
\item[{{\bf boolean}}]{self}
\end{DoxyParamCaption}
)}}\label{muse_8c_a82b42772c7f62e2033417e1c184da73b}


Definition at line 147 of file muse.\+c.



References B\+O\+L\+T\+\_\+\+L\+I\+M, canseemon, distu, flags, mhim, monst\+::mx, monst\+::my, and flag\+::soundok.



Referenced by use\+\_\+defensive(), use\+\_\+misc(), and use\+\_\+offensive().


\begin{DoxyCode}
151 \{
152     \textcolor{keywordflow}{if} (!\hyperlink{display_8h_ad75e04a9624fe7ba0e1715ae3a3feb27}{canseemon}(mtmp)) \{
153         \textcolor{keywordflow}{if} (\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_ae3871fd2268fbc24b89cece8eb352dfc}{soundok})
154             You\_hear(\textcolor{stringliteral}{"a %s zap."},
155                     (\hyperlink{hack_8h_a1f84afcae19c5b60124bc509ed647f84}{distu}(mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx},mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my}) <= (\hyperlink{hack_8h_a26ee0a18384e9ca14b97a4f877791284}{BOLT\_LIM}+1)*(
      \hyperlink{hack_8h_a26ee0a18384e9ca14b97a4f877791284}{BOLT\_LIM}+1)) ?
156                     \textcolor{stringliteral}{"nearby"} : \textcolor{stringliteral}{"distant"});
157     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\textcolor{keyword}{self})
158         pline(\textcolor{stringliteral}{"%s zaps %sself with %s!"},
159               Monnam(mtmp), \hyperlink{you_8h_ad994e7a24679279ec24f0ef064a274d7}{mhim}(mtmp), doname(otmp));
160     \textcolor{keywordflow}{else} \{
161         pline(\textcolor{stringliteral}{"%s zaps %s!"}, Monnam(mtmp), an(xname(otmp)));
162         stop\_occupation();
163     \}
164 \}
\end{DoxyCode}
\hypertarget{muse_8c_aafe9cef615d465f4a327c5f8bff918a4}{\index{muse.\+c@{muse.\+c}!precheck@{precheck}}
\index{precheck@{precheck}!muse.\+c@{muse.\+c}}
\subsubsection[{precheck}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} int precheck (
\begin{DoxyParamCaption}
\item[{struct {\bf monst} $\ast$}]{mon, }
\item[{struct {\bf obj} $\ast$}]{obj}
\end{DoxyParamCaption}
)}}\label{muse_8c_aafe9cef615d465f4a327c5f8bff918a4}


Definition at line 57 of file muse.\+c.



References A\+D\+\_\+\+R\+B\+R\+E, cansee, flag\+::djinni\+\_\+count, enexto(), flags, flag\+::ghost\+\_\+count, Hallucination, musable\+::has\+\_\+defense, musable\+::has\+\_\+misc, musable\+::has\+\_\+offense, m, M\+A\+X\+M\+O\+N\+N\+O, mons, mquaffmsg(), N\+O\+\_\+\+M\+M\+\_\+\+F\+L\+A\+G\+S, O\+B\+J\+\_\+\+D\+E\+S\+C\+R, objects, obj\+::oclass, obj\+::otyp, P\+O\+T\+I\+O\+N\+\_\+\+C\+L\+A\+S\+S, P\+O\+T\+I\+O\+N\+\_\+\+O\+C\+C\+U\+P\+A\+N\+T\+\_\+\+C\+H\+A\+N\+C\+E, Something, flag\+::soundok, obj\+::spe, W\+A\+N\+D\+\_\+\+C\+L\+A\+S\+S, coord\+::x, and coord\+::y.



Referenced by use\+\_\+defensive(), use\+\_\+misc(), and use\+\_\+offensive().


\begin{DoxyCode}
60 \{
61     \textcolor{keywordtype}{boolean} vis;
62 
63     \textcolor{keywordflow}{if} (!obj) \textcolor{keywordflow}{return} 0;
64     vis = \hyperlink{vision_8h_a857efc720262bc13a9e4b4bcbb079b5c}{cansee}(mon->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mon->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my});
65 
66     \textcolor{keywordflow}{if} (obj->\hyperlink{structobj_a716ba3ee00602dede9ea5c68c74d45bd}{oclass} == \hyperlink{objclass_8h_a05335e5ee18dfa33af1c40056fe8fab9}{POTION\_CLASS}) \{
67         \hyperlink{structcoord}{coord} cc;
68         \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{char} *empty = \textcolor{stringliteral}{"The potion turns out to be empty."};
69         \textcolor{keyword}{const} \textcolor{keywordtype}{char} *potion\_descr;
70         \textcolor{keyword}{struct }\hyperlink{structmonst}{monst} *mtmp;
71 \textcolor{preprocessor}{#define POTION\_OCCUPANT\_CHANCE(n) (13 + 2*(n))  }\textcolor{comment}{/* also in potion.c */}\textcolor{preprocessor}{}
72 
73         potion\_descr = \hyperlink{objclass_8h_aeab69e2f227c2e8ac9c45dea8090ce38}{OBJ\_DESCR}(\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp}]);
74         \textcolor{keywordflow}{if} (potion\_descr && !strcmp(potion\_descr, \textcolor{stringliteral}{"milky"})) \{
75             \textcolor{keywordflow}{if} ( \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a7c8d492cee8daf2733b18954793990e3}{ghost\_count} < \hyperlink{global_8h_ae1e45066883010976eee941b1cbf4b0e}{MAXMONNO} &&
76             !rn2(\hyperlink{muse_8c_ab34ec85e4c86b57a1e1c4ec8e4d3a5a6}{POTION\_OCCUPANT\_CHANCE}(\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.
      \hyperlink{structflag_a7c8d492cee8daf2733b18954793990e3}{ghost\_count}))) \{
77             \textcolor{keywordflow}{if} (!\hyperlink{teleport_8c_a61ffc1bbdf6259d46ae8abd0dce3ce31}{enexto}(&cc, mon->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mon->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my}, &\hyperlink{permonst_8h_ab96e7c4682ea5ae4f83339a15c06f676}{mons}[PM\_GHOST])) \textcolor{keywordflow}{return} 0;
78             \hyperlink{muse_8c_a885817dcbfdbdb4f910bcbf3520a8031}{mquaffmsg}(mon, obj);
79             m\_useup(mon, obj);
80             mtmp = makemon(&\hyperlink{permonst_8h_ab96e7c4682ea5ae4f83339a15c06f676}{mons}[PM\_GHOST], cc.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x}, cc.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y}, \hyperlink{hack_8h_ae449582f467baa0da531a6ea116a18f2}{NO\_MM\_FLAGS});
81             \textcolor{keywordflow}{if} (!mtmp) \{
82             \textcolor{keywordflow}{if} (vis) pline(empty);
83             \} \textcolor{keywordflow}{else} \{
84             \textcolor{keywordflow}{if} (vis) \{
85                 pline(\textcolor{stringliteral}{"As %s opens the bottle, an enormous %s emerges!"},
86                    mon\_nam(mon),
87                    \hyperlink{youprop_8h_aa873f7ea0a3d096ef94ff651907f7a76}{Hallucination} ? rndmonnam() : (\textcolor{keyword}{const} \textcolor{keywordtype}{char} *)\textcolor{stringliteral}{"ghost"});
88                 pline(\textcolor{stringliteral}{"%s is frightened to death, and unable to move."},
89                     Monnam(mon));
90             \}
91             mon->mcanmove = 0;
92             mon->mfrozen = 3;
93             \}
94             \textcolor{keywordflow}{return} 2;
95         \}
96         \}
97         \textcolor{keywordflow}{if} (potion\_descr && !strcmp(potion\_descr, \textcolor{stringliteral}{"smoky"}) &&
98             \hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_a49bc19dacb9cf8ae7e97cf22bb964e2d}{djinni\_count} < \hyperlink{global_8h_ae1e45066883010976eee941b1cbf4b0e}{MAXMONNO} &&
99             !rn2(\hyperlink{muse_8c_ab34ec85e4c86b57a1e1c4ec8e4d3a5a6}{POTION\_OCCUPANT\_CHANCE}(\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.
      \hyperlink{structflag_a49bc19dacb9cf8ae7e97cf22bb964e2d}{djinni\_count}))) \{
100         \textcolor{keywordflow}{if} (!\hyperlink{teleport_8c_a61ffc1bbdf6259d46ae8abd0dce3ce31}{enexto}(&cc, mon->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mon->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my}, &\hyperlink{permonst_8h_ab96e7c4682ea5ae4f83339a15c06f676}{mons}[PM\_DJINNI])) \textcolor{keywordflow}{return} 0;
101         \hyperlink{muse_8c_a885817dcbfdbdb4f910bcbf3520a8031}{mquaffmsg}(mon, obj);
102         m\_useup(mon, obj);
103         mtmp = makemon(&\hyperlink{permonst_8h_ab96e7c4682ea5ae4f83339a15c06f676}{mons}[PM\_DJINNI], cc.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x}, cc.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y}, \hyperlink{hack_8h_ae449582f467baa0da531a6ea116a18f2}{NO\_MM\_FLAGS});
104         \textcolor{keywordflow}{if} (!mtmp) \{
105             \textcolor{keywordflow}{if} (vis) pline(empty);
106         \} \textcolor{keywordflow}{else} \{
107             \textcolor{keywordflow}{if} (vis)
108             pline(\textcolor{stringliteral}{"In a cloud of smoke, %s emerges!"},
109                             a\_monnam(mtmp));
110             pline(\textcolor{stringliteral}{"%s speaks."}, vis ? Monnam(mtmp) : \hyperlink{decl_8h_a5d959c2baa129ffbf809d6ae5372adf5}{Something});
111         \textcolor{comment}{/* I suspect few players will be upset that monsters */}
112         \textcolor{comment}{/* can't wish for wands of death here.... */}
113             \textcolor{keywordflow}{if} (rn2(2)) \{
114             verbalize(\textcolor{stringliteral}{"You freed me!"});
115             mtmp->mpeaceful = 1;
116             set\_malign(mtmp);
117             \} \textcolor{keywordflow}{else} \{
118             verbalize(\textcolor{stringliteral}{"It is about time."});
119             \textcolor{keywordflow}{if} (vis) pline(\textcolor{stringliteral}{"%s vanishes."}, Monnam(mtmp));
120             mongone(mtmp);
121             \}
122         \}
123         \textcolor{keywordflow}{return} 2;
124         \}
125     \}
126     \textcolor{keywordflow}{if} (obj->\hyperlink{structobj_a716ba3ee00602dede9ea5c68c74d45bd}{oclass} == \hyperlink{objclass_8h_a3465d7e5f808c98fcfc32e3159b9d9c2}{WAND\_CLASS} && obj->cursed && !rn2(100)) \{
127         \textcolor{keywordtype}{int} dam = d(obj->\hyperlink{structobj_a14fc8dc59e9073bfbf1e170875a98448}{spe}+2, 6);
128 
129         \textcolor{keywordflow}{if} (\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_ae3871fd2268fbc24b89cece8eb352dfc}{soundok}) \{
130         \textcolor{keywordflow}{if} (vis) pline(\textcolor{stringliteral}{"%s zaps %s, which suddenly explodes!"},
131             Monnam(mon), an(xname(obj)));
132         \textcolor{keywordflow}{else} You\_hear(\textcolor{stringliteral}{"a zap and an explosion in the distance."});
133         \}
134         m\_useup(mon, obj);
135         \textcolor{keywordflow}{if} (mon->\hyperlink{structmonst_abe22e95755f1348a6a1c78252be5d76d}{mhp} <= dam) \{
136         monkilled(mon, \textcolor{stringliteral}{""}, \hyperlink{monattk_8h_a2c589fc9c37424bce8ed6561c70dc79d}{AD\_RBRE});
137         \textcolor{keywordflow}{return} 1;
138         \}
139         \textcolor{keywordflow}{else} mon->\hyperlink{structmonst_abe22e95755f1348a6a1c78252be5d76d}{mhp} -= dam;
140         \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a70288ed35c7e3f6a1f0905c39a16c2d3}{has\_defense} = \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_af4b04fd9bf567b138538681c91d145e9}{has\_offense} = \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_aa2d416f925ea6cbead5267d5462e4aef}{has\_misc} = 0;
141         \textcolor{comment}{/* Only one needed to be set to 0 but the others are harmless */}
142     \}
143     \textcolor{keywordflow}{return} 0;
144 \}
\end{DoxyCode}
\hypertarget{muse_8c_ac8a389f8c0a717ed822b5f2e6d099e9d}{\index{muse.\+c@{muse.\+c}!rnd\+\_\+defensive\+\_\+item@{rnd\+\_\+defensive\+\_\+item}}
\index{rnd\+\_\+defensive\+\_\+item@{rnd\+\_\+defensive\+\_\+item}!muse.\+c@{muse.\+c}}
\subsubsection[{rnd\+\_\+defensive\+\_\+item}]{\setlength{\rightskip}{0pt plus 5cm}int rnd\+\_\+defensive\+\_\+item (
\begin{DoxyParamCaption}
\item[{struct {\bf monst} $\ast$}]{mtmp}
\end{DoxyParamCaption}
)}}\label{muse_8c_ac8a389f8c0a717ed822b5f2e6d099e9d}


Definition at line 901 of file muse.\+c.



References A\+T\+\_\+\+E\+X\+P\+L, dlevel\+\_\+t\+::flags, is\+\_\+animal, is\+\_\+floater, level, mindless, permonst\+::mlet, mons, monstr, S\+\_\+\+G\+H\+O\+S\+T, and S\+\_\+\+K\+O\+P.



Referenced by mk\+\_\+mplayer().


\begin{DoxyCode}
903 \{
904     \textcolor{keyword}{struct }\hyperlink{structpermonst}{permonst} *pm = mtmp->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data};
905     \textcolor{keywordtype}{int} difficulty = \hyperlink{muse_8c_a2e4cd9d4199a5c6f1ecf9985d4a58dfb}{monstr}[(monsndx(pm))];
906     \textcolor{keywordtype}{int} trycnt = 0;
907 
908     \textcolor{keywordflow}{if}(\hyperlink{mondata_8h_a6633b7e5ce3955ef878c6890a72b9392}{is\_animal}(pm) || attacktype(pm, \hyperlink{monattk_8h_a35bb1695a67a7a4357e857b0ec6645aa}{AT\_EXPL}) || \hyperlink{mondata_8h_a9b2e225376aeed6f19559b2c2dced2d0}{mindless}(mtmp->
      \hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data})
909             || pm->\hyperlink{structpermonst_ab402dbf1bed9d0e595a2b3da6558da92}{mlet} == \hyperlink{monsym_8h_a6a49698b20c68f36bcef22d45c3ef986}{S\_GHOST}
910 \textcolor{preprocessor}{# ifdef KOPS}
911             || pm->\hyperlink{structpermonst_ab402dbf1bed9d0e595a2b3da6558da92}{mlet} == \hyperlink{monsym_8h_ae786a562c666489455f6663f735a5f77}{S\_KOP}
912 \textcolor{preprocessor}{# endif}
913         ) \textcolor{keywordflow}{return} 0;
914     try\_again:
915     \textcolor{keywordflow}{switch} (rn2(8 + (difficulty > 3) + (difficulty > 6) +
916                 (difficulty > 8))) \{
917         \textcolor{keywordflow}{case} 6: \textcolor{keywordflow}{case} 9:
918             \textcolor{keywordflow}{if} (\hyperlink{rm_8h_a721c99bfa099c4225215ba102e91fa39}{level}.\hyperlink{structdlevel__t_ad52c01d015e2456cdae3300848115916}{flags}.noteleport && ++trycnt < 2)
919                 \textcolor{keywordflow}{goto} try\_again;
920             \textcolor{keywordflow}{if} (!rn2(3)) \textcolor{keywordflow}{return} WAN\_TELEPORTATION;
921             \textcolor{comment}{/* else FALLTHRU */}
922         \textcolor{keywordflow}{case} 0: \textcolor{keywordflow}{case} 1:
923             \textcolor{keywordflow}{return} SCR\_TELEPORTATION;
924         \textcolor{keywordflow}{case} 8: \textcolor{keywordflow}{case} 10:
925             \textcolor{keywordflow}{if} (!rn2(3)) \textcolor{keywordflow}{return} WAN\_CREATE\_MONSTER;
926             \textcolor{comment}{/* else FALLTHRU */}
927         \textcolor{keywordflow}{case} 2: \textcolor{keywordflow}{return} SCR\_CREATE\_MONSTER;
928         \textcolor{keywordflow}{case} 3: \textcolor{keywordflow}{return} POT\_HEALING;
929         \textcolor{keywordflow}{case} 4: \textcolor{keywordflow}{return} POT\_EXTRA\_HEALING;
930         \textcolor{keywordflow}{case} 5: \textcolor{keywordflow}{return} (mtmp->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data} != &\hyperlink{permonst_8h_ab96e7c4682ea5ae4f83339a15c06f676}{mons}[PM\_PESTILENCE]) ?
931                 POT\_FULL\_HEALING : POT\_SICKNESS;
932         \textcolor{keywordflow}{case} 7: \textcolor{keywordflow}{if} (\hyperlink{mondata_8h_aa0333e705b2ebafe594ebcdbed885cce}{is\_floater}(pm) || mtmp->isshk || mtmp->isgd
933                         || mtmp->ispriest
934                                     )
935                 \textcolor{keywordflow}{return} 0;
936             \textcolor{keywordflow}{else}
937                 \textcolor{keywordflow}{return} WAN\_DIGGING;
938     \}
939     \textcolor{comment}{/*NOTREACHED*/}
940     \textcolor{keywordflow}{return} 0;
941 \}
\end{DoxyCode}
\hypertarget{muse_8c_a23c2634e5c91f8a024abfa2a7eaebe91}{\index{muse.\+c@{muse.\+c}!rnd\+\_\+misc\+\_\+item@{rnd\+\_\+misc\+\_\+item}}
\index{rnd\+\_\+misc\+\_\+item@{rnd\+\_\+misc\+\_\+item}!muse.\+c@{muse.\+c}}
\subsubsection[{rnd\+\_\+misc\+\_\+item}]{\setlength{\rightskip}{0pt plus 5cm}int rnd\+\_\+misc\+\_\+item (
\begin{DoxyParamCaption}
\item[{struct {\bf monst} $\ast$}]{mtmp}
\end{DoxyParamCaption}
)}}\label{muse_8c_a23c2634e5c91f8a024abfa2a7eaebe91}


Definition at line 1909 of file muse.\+c.



References A\+T\+\_\+\+E\+X\+P\+L, is\+\_\+animal, mindless, permonst\+::mlet, monstr, nonliving, S\+\_\+\+G\+H\+O\+S\+T, S\+\_\+\+K\+O\+P, and See\+\_\+invisible.



Referenced by mk\+\_\+mplayer().


\begin{DoxyCode}
1911 \{
1912     \textcolor{keyword}{struct }\hyperlink{structpermonst}{permonst} *pm = mtmp->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data};
1913     \textcolor{keywordtype}{int} difficulty = \hyperlink{muse_8c_a2e4cd9d4199a5c6f1ecf9985d4a58dfb}{monstr}[(monsndx(pm))];
1914 
1915     \textcolor{keywordflow}{if}(\hyperlink{mondata_8h_a6633b7e5ce3955ef878c6890a72b9392}{is\_animal}(pm) || attacktype(pm, \hyperlink{monattk_8h_a35bb1695a67a7a4357e857b0ec6645aa}{AT\_EXPL}) || \hyperlink{mondata_8h_a9b2e225376aeed6f19559b2c2dced2d0}{mindless}(mtmp->
      \hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data})
1916             || pm->\hyperlink{structpermonst_ab402dbf1bed9d0e595a2b3da6558da92}{mlet} == \hyperlink{monsym_8h_a6a49698b20c68f36bcef22d45c3ef986}{S\_GHOST}
1917 \textcolor{preprocessor}{# ifdef KOPS}
1918             || pm->\hyperlink{structpermonst_ab402dbf1bed9d0e595a2b3da6558da92}{mlet} == \hyperlink{monsym_8h_ae786a562c666489455f6663f735a5f77}{S\_KOP}
1919 \textcolor{preprocessor}{# endif}
1920         ) \textcolor{keywordflow}{return} 0;
1921     \textcolor{comment}{/* Unlike other rnd\_item functions, we only allow \_weak\_ monsters}
1922 \textcolor{comment}{     * to have this item; after all, the item will be used to strengthen}
1923 \textcolor{comment}{     * the monster and strong monsters won't use it at all...}
1924 \textcolor{comment}{     */}
1925     \textcolor{keywordflow}{if} (difficulty < 6 && !rn2(30))
1926         \textcolor{keywordflow}{return} rn2(6) ? POT\_POLYMORPH : WAN\_POLYMORPH;
1927 
1928     \textcolor{keywordflow}{if} (!rn2(40) && !\hyperlink{mondata_8h_aeae2da0c70efc6db9195f4216943a3a1}{nonliving}(pm)) \textcolor{keywordflow}{return} AMULET\_OF\_LIFE\_SAVING;
1929 
1930     \textcolor{keywordflow}{switch} (rn2(3)) \{
1931         \textcolor{keywordflow}{case} 0:
1932             \textcolor{keywordflow}{if} (mtmp->isgd) \textcolor{keywordflow}{return} 0;
1933             \textcolor{keywordflow}{return} rn2(6) ? POT\_SPEED : WAN\_SPEED\_MONSTER;
1934         \textcolor{keywordflow}{case} 1:
1935             \textcolor{keywordflow}{if} (mtmp->mpeaceful && !\hyperlink{youprop_8h_ae00ea7702fa1870643d604364b0640c7}{See\_invisible}) \textcolor{keywordflow}{return} 0;
1936             \textcolor{keywordflow}{return} rn2(6) ? POT\_INVISIBILITY : WAN\_MAKE\_INVISIBLE;
1937         \textcolor{keywordflow}{case} 2:
1938             \textcolor{keywordflow}{return} POT\_GAIN\_LEVEL;
1939     \}
1940     \textcolor{comment}{/*NOTREACHED*/}
1941     \textcolor{keywordflow}{return} 0;
1942 \}
\end{DoxyCode}
\hypertarget{muse_8c_a3f44daad6fea8db7a3823a5ad9297cd7}{\index{muse.\+c@{muse.\+c}!rnd\+\_\+offensive\+\_\+item@{rnd\+\_\+offensive\+\_\+item}}
\index{rnd\+\_\+offensive\+\_\+item@{rnd\+\_\+offensive\+\_\+item}!muse.\+c@{muse.\+c}}
\subsubsection[{rnd\+\_\+offensive\+\_\+item}]{\setlength{\rightskip}{0pt plus 5cm}int rnd\+\_\+offensive\+\_\+item (
\begin{DoxyParamCaption}
\item[{struct {\bf monst} $\ast$}]{mtmp}
\end{DoxyParamCaption}
)}}\label{muse_8c_a3f44daad6fea8db7a3823a5ad9297cd7}


Definition at line 1518 of file muse.\+c.



References amorphous, A\+T\+\_\+\+E\+X\+P\+L, is\+\_\+animal, is\+\_\+metallic, mindless, permonst\+::mlet, monstr, noncorporeal, passes\+\_\+walls, S\+\_\+\+G\+H\+O\+S\+T, S\+\_\+\+K\+O\+P, unsolid, W\+\_\+\+A\+R\+M\+H, and which\+\_\+armor().



Referenced by mk\+\_\+mplayer().


\begin{DoxyCode}
1520 \{
1521     \textcolor{keyword}{struct }\hyperlink{structpermonst}{permonst} *pm = mtmp->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data};
1522     \textcolor{keywordtype}{int} difficulty = \hyperlink{muse_8c_a2e4cd9d4199a5c6f1ecf9985d4a58dfb}{monstr}[(monsndx(pm))];
1523 
1524     \textcolor{keywordflow}{if}(\hyperlink{mondata_8h_a6633b7e5ce3955ef878c6890a72b9392}{is\_animal}(pm) || attacktype(pm, \hyperlink{monattk_8h_a35bb1695a67a7a4357e857b0ec6645aa}{AT\_EXPL}) || \hyperlink{mondata_8h_a9b2e225376aeed6f19559b2c2dced2d0}{mindless}(mtmp->
      \hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data})
1525             || pm->\hyperlink{structpermonst_ab402dbf1bed9d0e595a2b3da6558da92}{mlet} == \hyperlink{monsym_8h_a6a49698b20c68f36bcef22d45c3ef986}{S\_GHOST}
1526 \textcolor{preprocessor}{# ifdef KOPS}
1527             || pm->\hyperlink{structpermonst_ab402dbf1bed9d0e595a2b3da6558da92}{mlet} == \hyperlink{monsym_8h_ae786a562c666489455f6663f735a5f77}{S\_KOP}
1528 \textcolor{preprocessor}{# endif}
1529         ) \textcolor{keywordflow}{return} 0;
1530     \textcolor{keywordflow}{if} (difficulty > 7 && !rn2(35)) \textcolor{keywordflow}{return} WAN\_DEATH;
1531     \textcolor{keywordflow}{switch} (rn2(9 - (difficulty < 4) + 4 * (difficulty > 6))) \{
1532         \textcolor{keywordflow}{case} 0: \{
1533             \textcolor{keyword}{struct }\hyperlink{structobj}{obj} *helmet = \hyperlink{worn_8c_a260cadb0c77a7032f8e53716072e6cd7}{which\_armor}(mtmp, \hyperlink{prop_8h_a4e8958625f891ea2329369d5032d0d6d}{W\_ARMH});
1534 
1535             \textcolor{keywordflow}{if} ((helmet && \hyperlink{objclass_8h_a5134e0e0a63a108b16f212e15a97fc1a}{is\_metallic}(helmet)) || \hyperlink{mondata_8h_ac3d4d869d4c7625a840b9731b591e90b}{amorphous}(pm) || 
      \hyperlink{mondata_8h_a42b9f266cafddebd01c657d1e39ae72d}{passes\_walls}(pm) || \hyperlink{mondata_8h_a8ef85e65e7dda38e65d7e3801cde6d2e}{noncorporeal}(pm) || \hyperlink{mondata_8h_aa072852c97f59a8374d1595cda2ab700}{unsolid}(pm))
1536             \textcolor{keywordflow}{return} SCR\_EARTH;
1537         \} \textcolor{comment}{/* fall through */}
1538         \textcolor{keywordflow}{case} 1: \textcolor{keywordflow}{return} WAN\_STRIKING;
1539         \textcolor{keywordflow}{case} 2: \textcolor{keywordflow}{return} POT\_ACID;
1540         \textcolor{keywordflow}{case} 3: \textcolor{keywordflow}{return} POT\_CONFUSION;
1541         \textcolor{keywordflow}{case} 4: \textcolor{keywordflow}{return} POT\_BLINDNESS;
1542         \textcolor{keywordflow}{case} 5: \textcolor{keywordflow}{return} POT\_SLEEPING;
1543         \textcolor{keywordflow}{case} 6: \textcolor{keywordflow}{return} POT\_PARALYSIS;
1544         \textcolor{keywordflow}{case} 7: \textcolor{keywordflow}{case} 8:
1545             \textcolor{keywordflow}{return} WAN\_MAGIC\_MISSILE;
1546         \textcolor{keywordflow}{case} 9: \textcolor{keywordflow}{return} WAN\_SLEEP;
1547         \textcolor{keywordflow}{case} 10: \textcolor{keywordflow}{return} WAN\_FIRE;
1548         \textcolor{keywordflow}{case} 11: \textcolor{keywordflow}{return} WAN\_COLD;
1549         \textcolor{keywordflow}{case} 12: \textcolor{keywordflow}{return} WAN\_LIGHTNING;
1550     \}
1551     \textcolor{comment}{/*NOTREACHED*/}
1552     \textcolor{keywordflow}{return} 0;
1553 \}
\end{DoxyCode}
\hypertarget{muse_8c_acb07e8793a996248012ebbf1e4513a7e}{\index{muse.\+c@{muse.\+c}!searches\+\_\+for\+\_\+item@{searches\+\_\+for\+\_\+item}}
\index{searches\+\_\+for\+\_\+item@{searches\+\_\+for\+\_\+item}!muse.\+c@{muse.\+c}}
\subsubsection[{searches\+\_\+for\+\_\+item}]{\setlength{\rightskip}{0pt plus 5cm}{\bf boolean} searches\+\_\+for\+\_\+item (
\begin{DoxyParamCaption}
\item[{struct {\bf monst} $\ast$}]{mon, }
\item[{struct {\bf obj} $\ast$}]{obj}
\end{DoxyParamCaption}
)}}\label{muse_8c_acb07e8793a996248012ebbf1e4513a7e}


Definition at line 1945 of file muse.\+c.



References acidic, A\+M\+U\+L\+E\+T\+\_\+\+C\+L\+A\+S\+S, A\+T\+\_\+\+G\+A\+Z\+E, obj\+::corpsenm, F\+A\+L\+S\+E, F\+O\+O\+D\+\_\+\+C\+L\+A\+S\+S, is\+\_\+animal, is\+\_\+floater, is\+\_\+unicorn, M\+F\+A\+S\+T, mindless, mons, monstr, needspick, nonliving, objects, obj\+::oclass, obj\+::otyp, P\+O\+T\+I\+O\+N\+\_\+\+C\+L\+A\+S\+S, R\+A\+Y, resists\+\_\+ston, S\+C\+R\+O\+L\+L\+\_\+\+C\+L\+A\+S\+S, obj\+::spe, T\+O\+O\+L\+\_\+\+C\+L\+A\+S\+S, touch\+\_\+petrifies, T\+R\+U\+E, W\+\_\+\+A\+R\+M\+G, and W\+A\+N\+D\+\_\+\+C\+L\+A\+S\+S.


\begin{DoxyCode}
1948 \{
1949     \textcolor{keywordtype}{int} typ = obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp};
1950 
1951     \textcolor{keywordflow}{if} (\hyperlink{mondata_8h_a6633b7e5ce3955ef878c6890a72b9392}{is\_animal}(mon->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}) ||
1952         \hyperlink{mondata_8h_a9b2e225376aeed6f19559b2c2dced2d0}{mindless}(mon->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}) ||
1953         mon->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data} == &\hyperlink{permonst_8h_ab96e7c4682ea5ae4f83339a15c06f676}{mons}[PM\_GHOST])   \textcolor{comment}{/* don't loot bones piles */}
1954         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
1955 
1956     \textcolor{keywordflow}{if} (typ == WAN\_MAKE\_INVISIBLE || typ == POT\_INVISIBILITY)
1957         \textcolor{keywordflow}{return} (\textcolor{keywordtype}{boolean})(!mon->minvis && !mon->invis\_blkd && !attacktype(mon->
      \hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}, \hyperlink{monattk_8h_aa24837bc8de1c47a08514d4eeffdfe48}{AT\_GAZE}));
1958     \textcolor{keywordflow}{if} (typ == WAN\_SPEED\_MONSTER || typ == POT\_SPEED)
1959         \textcolor{keywordflow}{return} (\textcolor{keywordtype}{boolean})(mon->mspeed != \hyperlink{monst_8h_a90047ea950c28fed112016338f30437c}{MFAST});
1960 
1961     \textcolor{keywordflow}{switch} (obj->\hyperlink{structobj_a716ba3ee00602dede9ea5c68c74d45bd}{oclass}) \{
1962     \textcolor{keywordflow}{case} \hyperlink{objclass_8h_a3465d7e5f808c98fcfc32e3159b9d9c2}{WAND\_CLASS}:
1963         \textcolor{keywordflow}{if} (obj->\hyperlink{structobj_a14fc8dc59e9073bfbf1e170875a98448}{spe} <= 0)
1964         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
1965         \textcolor{keywordflow}{if} (typ == WAN\_DIGGING)
1966         \textcolor{keywordflow}{return} (\textcolor{keywordtype}{boolean})(!\hyperlink{mondata_8h_aa0333e705b2ebafe594ebcdbed885cce}{is\_floater}(mon->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}));
1967         \textcolor{keywordflow}{if} (typ == WAN\_POLYMORPH)
1968         \textcolor{keywordflow}{return} (\textcolor{keywordtype}{boolean})(\hyperlink{muse_8c_a2e4cd9d4199a5c6f1ecf9985d4a58dfb}{monstr}[monsndx(mon->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data})] < 6);
1969         \textcolor{keywordflow}{if} (\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[typ].oc\_dir == \hyperlink{objclass_8h_a0969ff3a028529558afe96bc1e4b3b06}{RAY} ||
1970             typ == WAN\_STRIKING ||
1971             typ == WAN\_TELEPORTATION ||
1972             typ == WAN\_CREATE\_MONSTER)
1973         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
1974         \textcolor{keywordflow}{break};
1975     \textcolor{keywordflow}{case} \hyperlink{objclass_8h_a05335e5ee18dfa33af1c40056fe8fab9}{POTION\_CLASS}:
1976         \textcolor{keywordflow}{if} (typ == POT\_HEALING ||
1977             typ == POT\_EXTRA\_HEALING ||
1978             typ == POT\_FULL\_HEALING ||
1979             typ == POT\_POLYMORPH ||
1980             typ == POT\_GAIN\_LEVEL ||
1981             typ == POT\_PARALYSIS ||
1982             typ == POT\_SLEEPING ||
1983             typ == POT\_ACID ||
1984             typ == POT\_CONFUSION)
1985         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
1986         \textcolor{keywordflow}{if} (typ == POT\_BLINDNESS && !attacktype(mon->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}, \hyperlink{monattk_8h_aa24837bc8de1c47a08514d4eeffdfe48}{AT\_GAZE}))
1987         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
1988         \textcolor{keywordflow}{break};
1989     \textcolor{keywordflow}{case} \hyperlink{objclass_8h_ac23f261da0f9e2a4c6afccecfc167a96}{SCROLL\_CLASS}:
1990         \textcolor{keywordflow}{if} (typ == SCR\_TELEPORTATION || typ == SCR\_CREATE\_MONSTER
1991             || typ == SCR\_EARTH)
1992         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
1993         \textcolor{keywordflow}{break};
1994     \textcolor{keywordflow}{case} \hyperlink{objclass_8h_af05e45a3c94a4a19096ee4f048ee96cd}{AMULET\_CLASS}:
1995         \textcolor{keywordflow}{if} (typ == AMULET\_OF\_LIFE\_SAVING)
1996         \textcolor{keywordflow}{return} (\textcolor{keywordtype}{boolean})(!\hyperlink{mondata_8h_aeae2da0c70efc6db9195f4216943a3a1}{nonliving}(mon->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}));
1997         \textcolor{keywordflow}{if} (typ == AMULET\_OF\_REFLECTION)
1998         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
1999         \textcolor{keywordflow}{break};
2000     \textcolor{keywordflow}{case} \hyperlink{objclass_8h_ad8e3b1b1f1bd8dff660c15840a3f2b03}{TOOL\_CLASS}:
2001         \textcolor{keywordflow}{if} (typ == PICK\_AXE)
2002         \textcolor{keywordflow}{return} (\textcolor{keywordtype}{boolean})\hyperlink{mondata_8h_ab2a6ce07b586640a6dcf1f3efc67f67c}{needspick}(mon->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data});
2003         \textcolor{keywordflow}{if} (typ == UNICORN\_HORN)
2004         \textcolor{keywordflow}{return} (\textcolor{keywordtype}{boolean})(!obj->cursed && !\hyperlink{mondata_8h_aea6ec71970ce94bddd2270e198ff62f6}{is\_unicorn}(mon->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}));
2005         \textcolor{keywordflow}{if} (typ == FROST\_HORN || typ == FIRE\_HORN)
2006         \textcolor{keywordflow}{return} (obj->\hyperlink{structobj_a14fc8dc59e9073bfbf1e170875a98448}{spe} > 0);
2007         \textcolor{keywordflow}{break};
2008     \textcolor{keywordflow}{case} \hyperlink{objclass_8h_a98c4704dea5f0606fe545294b44f8fd6}{FOOD\_CLASS}:
2009         \textcolor{keywordflow}{if} (typ == CORPSE)
2010         \textcolor{keywordflow}{return} (\textcolor{keywordtype}{boolean})(((mon->\hyperlink{structmonst_afc2bd39e2f3e797e15bea20ac7f69788}{misc\_worn\_check} & \hyperlink{prop_8h_ab96deae86360c93dcb4c33fdf246109f}{W\_ARMG}) &&
2011                     \hyperlink{mondata_8h_ad1e85e493d27cdfdbe94c43710c4b191}{touch\_petrifies}(&\hyperlink{permonst_8h_ab96e7c4682ea5ae4f83339a15c06f676}{mons}[obj->\hyperlink{structobj_ad5db7220e2b815d06c3c80027ab9924f}{corpsenm}])) ||
2012                 (!\hyperlink{mondata_8h_a372753958b3b36d2edd0add67aa6fc75}{resists\_ston}(mon) &&
2013                     (obj->\hyperlink{structobj_ad5db7220e2b815d06c3c80027ab9924f}{corpsenm} == PM\_LIZARD ||
2014                     (\hyperlink{mondata_8h_afc5fcbf092cceab8ec5c683c392dfb22}{acidic}(&\hyperlink{permonst_8h_ab96e7c4682ea5ae4f83339a15c06f676}{mons}[obj->\hyperlink{structobj_ad5db7220e2b815d06c3c80027ab9924f}{corpsenm}]) &&
2015                      obj->\hyperlink{structobj_ad5db7220e2b815d06c3c80027ab9924f}{corpsenm} != PM\_GREEN\_SLIME))));
2016         \textcolor{keywordflow}{if} (typ == EGG)
2017         \textcolor{keywordflow}{return} (\textcolor{keywordtype}{boolean})(\hyperlink{mondata_8h_ad1e85e493d27cdfdbe94c43710c4b191}{touch\_petrifies}(&\hyperlink{permonst_8h_ab96e7c4682ea5ae4f83339a15c06f676}{mons}[obj->\hyperlink{structobj_ad5db7220e2b815d06c3c80027ab9924f}{corpsenm}]));
2018         \textcolor{keywordflow}{break};
2019     \textcolor{keywordflow}{default}:
2020         \textcolor{keywordflow}{break};
2021     \}
2022 
2023     \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
2024 \}
\end{DoxyCode}
\hypertarget{muse_8c_a07a7a604bbcb07e0140b43f374474805}{\index{muse.\+c@{muse.\+c}!ureflects@{ureflects}}
\index{ureflects@{ureflects}!muse.\+c@{muse.\+c}}
\subsubsection[{ureflects}]{\setlength{\rightskip}{0pt plus 5cm}{\bf boolean} ureflects (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{fmt, }
\item[{char $\ast$}]{str}
\end{DoxyParamCaption}
) const}}\label{muse_8c_a07a7a604bbcb07e0140b43f374474805}


Definition at line 2067 of file muse.\+c.



References monst\+::data, E\+Reflecting, F\+A\+L\+S\+E, makeknown, mons, T\+R\+U\+E, W\+\_\+\+A\+M\+U\+L, W\+\_\+\+A\+R\+M, W\+\_\+\+A\+R\+M\+S, W\+\_\+\+W\+E\+P, and youmonst.



Referenced by god\+\_\+zaps\+\_\+you(), and passive().


\begin{DoxyCode}
2069 \{
2070     \textcolor{comment}{/* Check from outermost to innermost objects */}
2071     \textcolor{keywordflow}{if} (\hyperlink{youprop_8h_a43fd37957b0e684829f39e52e2405a85}{EReflecting} & \hyperlink{prop_8h_a14ac9957d8019d2304ceedb5d794fb4f}{W\_ARMS}) \{
2072         \textcolor{keywordflow}{if} (fmt && str) \{
2073             pline(fmt, str, \textcolor{stringliteral}{"shield"});
2074             \hyperlink{hack_8h_afbd3607e7cef2f888f4190d40d058011}{makeknown}(SHIELD\_OF\_REFLECTION);
2075         \}
2076         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
2077     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{youprop_8h_a43fd37957b0e684829f39e52e2405a85}{EReflecting} & \hyperlink{prop_8h_abd75a55f67b13523ef4377d4eb6fb6ad}{W\_WEP}) \{
2078         \textcolor{comment}{/* Due to wielded artifact weapon */}
2079         \textcolor{keywordflow}{if} (fmt && str)
2080             pline(fmt, str, \textcolor{stringliteral}{"weapon"});
2081         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
2082     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{youprop_8h_a43fd37957b0e684829f39e52e2405a85}{EReflecting} & \hyperlink{prop_8h_a1a4f9d6f31538cc9d677e617b49597d2}{W\_AMUL}) \{
2083         \textcolor{keywordflow}{if} (fmt && str) \{
2084             pline(fmt, str, \textcolor{stringliteral}{"medallion"});
2085             \hyperlink{hack_8h_afbd3607e7cef2f888f4190d40d058011}{makeknown}(AMULET\_OF\_REFLECTION);
2086         \}
2087         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
2088     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{youprop_8h_a43fd37957b0e684829f39e52e2405a85}{EReflecting} & \hyperlink{prop_8h_a4f442d75a01cf88dcd71965d0d1f6155}{W\_ARM}) \{
2089         \textcolor{keywordflow}{if} (fmt && str)
2090             pline(fmt, str, \textcolor{stringliteral}{"armor"});
2091         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
2092     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{decl_8h_ad15893dbcb60e2777ae0dfac9f840858}{youmonst}.\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data} == &\hyperlink{permonst_8h_ab96e7c4682ea5ae4f83339a15c06f676}{mons}[PM\_SILVER\_DRAGON]) \{
2093         \textcolor{keywordflow}{if} (fmt && str)
2094             pline(fmt, str, \textcolor{stringliteral}{"scales"});
2095         \textcolor{keywordflow}{return} \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
2096     \}
2097     \textcolor{keywordflow}{return} \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
2098 \}
\end{DoxyCode}
\hypertarget{muse_8c_a52ede1ad2d5792aa03d9ff70da9df023}{\index{muse.\+c@{muse.\+c}!use\+\_\+defensive@{use\+\_\+defensive}}
\index{use\+\_\+defensive@{use\+\_\+defensive}!muse.\+c@{muse.\+c}}
\subsubsection[{use\+\_\+defensive}]{\setlength{\rightskip}{0pt plus 5cm}int use\+\_\+defensive (
\begin{DoxyParamCaption}
\item[{struct {\bf monst} $\ast$}]{mtmp}
\end{DoxyParamCaption}
)}}\label{muse_8c_a52ede1ad2d5792aa03d9ff70da9df023}


Definition at line 526 of file muse.\+c.



References awaken\+\_\+soldiers(), cansee, canseemon, canspotmon, C\+O\+R\+R, musable\+::defensive, enexto(), F\+A\+L\+S\+E, flags, dlevel\+\_\+t\+::flags, musable\+::has\+\_\+defense, H\+O\+L\+E, In\+\_\+endgame, Inhell, I\+S\+\_\+\+D\+R\+A\+W\+B\+R\+I\+D\+G\+E, is\+\_\+flyer, I\+S\+\_\+\+F\+U\+R\+N\+I\+T\+U\+R\+E, known, level, levl, m, m\+\_\+flee, m\+\_\+using, makeknown, mbhit(), mbhitm(), mhim, M\+I\+G\+R\+\_\+\+L\+A\+D\+D\+E\+R\+\_\+\+D\+O\+W\+N, M\+I\+G\+R\+\_\+\+L\+A\+D\+D\+E\+R\+\_\+\+U\+P, M\+I\+G\+R\+\_\+\+R\+A\+N\+D\+O\+M, M\+I\+G\+R\+\_\+\+S\+S\+T\+A\+I\+R\+S, M\+I\+G\+R\+\_\+\+S\+T\+A\+I\+R\+S\+\_\+\+D\+O\+W\+N, M\+I\+G\+R\+\_\+\+S\+T\+A\+I\+R\+S\+\_\+\+U\+P, mon\+\_\+consume\+\_\+unstone(), mons, mquaffmsg(), mreadmsg(), M\+U\+S\+E\+\_\+\+B\+U\+G\+L\+E, M\+U\+S\+E\+\_\+\+D\+N\+\_\+\+L\+A\+D\+D\+E\+R, M\+U\+S\+E\+\_\+\+D\+O\+W\+N\+S\+T\+A\+I\+R\+S, M\+U\+S\+E\+\_\+\+L\+I\+Z\+A\+R\+D\+\_\+\+C\+O\+R\+P\+S\+E, M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+E\+X\+T\+R\+A\+\_\+\+H\+E\+A\+L\+I\+N\+G, M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+F\+U\+L\+L\+\_\+\+H\+E\+A\+L\+I\+N\+G, M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+H\+E\+A\+L\+I\+N\+G, M\+U\+S\+E\+\_\+\+S\+C\+R\+\_\+\+C\+R\+E\+A\+T\+E\+\_\+\+M\+O\+N\+S\+T\+E\+R, M\+U\+S\+E\+\_\+\+S\+C\+R\+\_\+\+T\+E\+L\+E\+P\+O\+R\+T\+A\+T\+I\+O\+N, M\+U\+S\+E\+\_\+\+S\+S\+T\+A\+I\+R\+S, M\+U\+S\+E\+\_\+\+T\+E\+L\+E\+P\+O\+R\+T\+\_\+\+T\+R\+A\+P, M\+U\+S\+E\+\_\+\+T\+R\+A\+P\+D\+O\+O\+R, M\+U\+S\+E\+\_\+\+U\+N\+I\+C\+O\+R\+N\+\_\+\+H\+O\+R\+N, M\+U\+S\+E\+\_\+\+U\+P\+\_\+\+L\+A\+D\+D\+E\+R, M\+U\+S\+E\+\_\+\+U\+P\+S\+T\+A\+I\+R\+S, M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+C\+R\+E\+A\+T\+E\+\_\+\+M\+O\+N\+S\+T\+E\+R, M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+D\+I\+G\+G\+I\+N\+G, M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+T\+E\+L\+E\+P\+O\+R\+T\+A\+T\+I\+O\+N, M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+T\+E\+L\+E\+P\+O\+R\+T\+A\+T\+I\+O\+N\+\_\+\+S\+E\+L\+F, mzapmsg(), newsym(), N\+O\+\_\+\+M\+M\+\_\+\+F\+L\+A\+G\+S, objects, otmp, obj\+::otyp, place\+\_\+monster, precheck(), random\+\_\+teleport\+\_\+level(), remove\+\_\+monster, rloc(), rn1, S\+C\+O\+R\+R, something, flag\+::soundok, obj\+::spe, sstairs, stairway\+::sx, stairway\+::sy, tele\+\_\+restrict(), T\+E\+L\+E\+P\+\_\+\+T\+R\+A\+P, stairway\+::tolev, T\+R\+A\+P\+D\+O\+O\+R, trapx, trapy, T\+R\+U\+E, u, unblock\+\_\+point(), stairway\+::up, you\+::uz, worm\+\_\+move(), coord\+::x, and coord\+::y.


\begin{DoxyCode}
528 \{
529     \textcolor{keywordtype}{int} i, fleetim, how = 0;
530     \textcolor{keyword}{struct }\hyperlink{structobj}{obj} *\hyperlink{mhitu_8c_a8cf94e09e1a72daf7050a2817ba70974}{otmp} = \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_ab3fe45fea3739167d9ba53746e0838ab}{defensive};
531     \textcolor{keywordtype}{boolean} vis, vismon, oseen;
532     \textcolor{keyword}{const} \textcolor{keywordtype}{char} *mcsa = \textcolor{stringliteral}{"%s can see again."};
533 
534     \textcolor{keywordflow}{if} ((i = \hyperlink{muse_8c_aafe9cef615d465f4a327c5f8bff918a4}{precheck}(mtmp, otmp)) != 0) \textcolor{keywordflow}{return} i;
535     vis = \hyperlink{vision_8h_a857efc720262bc13a9e4b4bcbb079b5c}{cansee}(mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my});
536     vismon = \hyperlink{display_8h_ad75e04a9624fe7ba0e1715ae3a3feb27}{canseemon}(mtmp);
537     oseen = otmp && vismon;
538 
539     \textcolor{comment}{/* when using defensive choice to run away, we want monster to avoid}
540 \textcolor{comment}{       rushing right straight back; don't override if already scared */}
541     fleetim = !mtmp->mflee ? (33 - (30 * mtmp->\hyperlink{structmonst_abe22e95755f1348a6a1c78252be5d76d}{mhp} / mtmp->\hyperlink{structmonst_a66c107319bb7bb318c04e6a0f5f03c60}{mhpmax})) : 0;
542 \textcolor{preprocessor}{#define m\_flee(m)   if (fleetim && !m->iswiz) \(\backslash\)}
543 \textcolor{preprocessor}{            \{ monflee(m, fleetim, FALSE, FALSE); \}}
544 
545     \textcolor{keywordflow}{switch}(\hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a70288ed35c7e3f6a1f0905c39a16c2d3}{has\_defense}) \{
546     \textcolor{keywordflow}{case} \hyperlink{muse_8c_a4a89c8817e3ac83ff990ba42c966b1b4}{MUSE\_UNICORN\_HORN}:
547         \textcolor{keywordflow}{if} (vismon) \{
548             \textcolor{keywordflow}{if} (otmp)
549             pline(\textcolor{stringliteral}{"%s uses a unicorn horn!"}, Monnam(mtmp));
550             \textcolor{keywordflow}{else}
551             pline\_The(\textcolor{stringliteral}{"tip of %s's horn glows!"}, mon\_nam(mtmp));
552         \}
553         \textcolor{keywordflow}{if} (!mtmp->mcansee) \{
554             mtmp->mcansee = 1;
555             mtmp->mblinded = 0;
556             \textcolor{keywordflow}{if} (vismon) pline(mcsa, Monnam(mtmp));
557         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (mtmp->mconf || mtmp->mstun) \{
558             mtmp->mconf = mtmp->mstun = 0;
559             \textcolor{keywordflow}{if} (vismon)
560             pline(\textcolor{stringliteral}{"%s seems steadier now."}, Monnam(mtmp));
561         \} \textcolor{keywordflow}{else} impossible(\textcolor{stringliteral}{"No need for unicorn horn?"});
562         \textcolor{keywordflow}{return} 2;
563     \textcolor{keywordflow}{case} \hyperlink{muse_8c_afa6dce34acae25afddd484c0262142a3}{MUSE\_BUGLE}:
564         \textcolor{keywordflow}{if} (vismon)
565             pline(\textcolor{stringliteral}{"%s plays %s!"}, Monnam(mtmp), doname(otmp));
566         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_ae3871fd2268fbc24b89cece8eb352dfc}{soundok})
567             You\_hear(\textcolor{stringliteral}{"a bugle playing reveille!"});
568         \hyperlink{music_8c_a7f3337b0f8fa93a4030d1aa1ecd44706}{awaken\_soldiers}();
569         \textcolor{keywordflow}{return} 2;
570     \textcolor{keywordflow}{case} \hyperlink{muse_8c_aa867e434d7b697f9fc8d1db9b216a198}{MUSE\_WAN\_TELEPORTATION\_SELF}:
571         \textcolor{keywordflow}{if} ((mtmp->isshk && inhishop(mtmp))
572                || mtmp->isgd || mtmp->ispriest) \textcolor{keywordflow}{return} 2;
573         \hyperlink{muse_8c_a54d89ba16b826c94408ccddb1468c00a}{m\_flee}(mtmp);
574         \hyperlink{muse_8c_a82b42772c7f62e2033417e1c184da73b}{mzapmsg}(mtmp, otmp, \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE});
575         otmp->\hyperlink{structobj_a14fc8dc59e9073bfbf1e170875a98448}{spe}--;
576         how = WAN\_TELEPORTATION;
577 mon\_tele:
578         \textcolor{keywordflow}{if} (\hyperlink{teleport_8c_ae7a3070a79b803227ad2474af019d5ab}{tele\_restrict}(mtmp)) \{ \textcolor{comment}{/* mysterious force... */}
579             \textcolor{keywordflow}{if} (vismon && how)      \textcolor{comment}{/* mentions 'teleport' */}
580             \hyperlink{hack_8h_afbd3607e7cef2f888f4190d40d058011}{makeknown}(how);
581             \textcolor{comment}{/* monster learns that teleportation isn't useful here */}
582             \textcolor{keywordflow}{if} (\hyperlink{rm_8h_a721c99bfa099c4225215ba102e91fa39}{level}.\hyperlink{structdlevel__t_ad52c01d015e2456cdae3300848115916}{flags}.noteleport)
583             mtmp->\hyperlink{structmonst_a792271938bf793d0b6cfef02171f967a}{mtrapseen} |= (1 << (\hyperlink{trap_8h_ae486eaa74be1dd922e16565d281cf94c}{TELEP\_TRAP}-1));
584             \textcolor{keywordflow}{return} 2;
585         \}
586         \textcolor{keywordflow}{if} ((
587 #\textcolor{keywordflow}{if} 0
588             mon\_has\_amulet(mtmp) ||
589 \textcolor{preprocessor}{#endif}
590             On\_W\_tower\_level(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz})) && !rn2(3)) \{
591             \textcolor{keywordflow}{if} (vismon)
592             pline(\textcolor{stringliteral}{"%s seems disoriented for a moment."},
593                 Monnam(mtmp));
594             \textcolor{keywordflow}{return} 2;
595         \}
596         \textcolor{keywordflow}{if} (oseen && how) \hyperlink{hack_8h_afbd3607e7cef2f888f4190d40d058011}{makeknown}(how);
597         (void) \hyperlink{teleport_8c_aa6c4370d0e90b61589cd46404ceab176}{rloc}(mtmp, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE});
598         \textcolor{keywordflow}{return} 2;
599     \textcolor{keywordflow}{case} \hyperlink{muse_8c_aee63b5574e746304cab9cbb88e1de182}{MUSE\_WAN\_TELEPORTATION}:
600         \hyperlink{muse_8c_ac4ce829c86a7bd25047f918fac166b1f}{zap\_oseen} = oseen;
601         \hyperlink{muse_8c_a82b42772c7f62e2033417e1c184da73b}{mzapmsg}(mtmp, otmp, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE});
602         otmp->\hyperlink{structobj_a14fc8dc59e9073bfbf1e170875a98448}{spe}--;
603         \hyperlink{muse_8c_a70406684323454fb7fb33104cc05f904}{m\_using} = \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
604         \hyperlink{muse_8c_a07ac33c7bc46a3586197be209cd7f80e}{mbhit}(mtmp,\hyperlink{hack_8h_af107ca092682647f298989038020f9c8}{rn1}(8,6),\hyperlink{muse_8c_a6834998d463056c47210a44ddb1ae849}{mbhitm},bhito,otmp);
605         \textcolor{comment}{/* monster learns that teleportation isn't useful here */}
606         \textcolor{keywordflow}{if} (\hyperlink{rm_8h_a721c99bfa099c4225215ba102e91fa39}{level}.\hyperlink{structdlevel__t_ad52c01d015e2456cdae3300848115916}{flags}.noteleport)
607             mtmp->\hyperlink{structmonst_a792271938bf793d0b6cfef02171f967a}{mtrapseen} |= (1 << (\hyperlink{trap_8h_ae486eaa74be1dd922e16565d281cf94c}{TELEP\_TRAP}-1));
608         \hyperlink{muse_8c_a70406684323454fb7fb33104cc05f904}{m\_using} = \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
609         \textcolor{keywordflow}{return} 2;
610     \textcolor{keywordflow}{case} \hyperlink{muse_8c_af74f3efeafb0279b1628e94ccbb86c49}{MUSE\_SCR\_TELEPORTATION}:
611         \{
612         \textcolor{keywordtype}{int} obj\_is\_cursed = otmp->cursed;
613 
614         \textcolor{keywordflow}{if} (mtmp->isshk || mtmp->isgd || mtmp->ispriest) \textcolor{keywordflow}{return} 2;
615         \hyperlink{muse_8c_a54d89ba16b826c94408ccddb1468c00a}{m\_flee}(mtmp);
616         \hyperlink{muse_8c_adc8ed439d179dfe537178b5523edf8e3}{mreadmsg}(mtmp, otmp);
617         m\_useup(mtmp, otmp);    \textcolor{comment}{/* otmp might be free'ed */}
618         how = SCR\_TELEPORTATION;
619         \textcolor{keywordflow}{if} (obj\_is\_cursed || mtmp->mconf) \{
620             \textcolor{keywordtype}{int} nlev;
621             \hyperlink{structd__level}{d\_level} flev;
622 
623             \textcolor{keywordflow}{if} (mon\_has\_amulet(mtmp) || \hyperlink{dungeon_8h_ae85486e6a752224948478a6e9dab0329}{In\_endgame}(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz})) \{
624                 \textcolor{keywordflow}{if} (vismon)
625                 pline(\textcolor{stringliteral}{"%s seems very disoriented for a moment."},
626                     Monnam(mtmp));
627                 \textcolor{keywordflow}{return} 2;
628             \}
629             nlev = \hyperlink{teleport_8c_a8be139b4744eb167838a1526806afc83}{random\_teleport\_level}();
630             \textcolor{keywordflow}{if} (nlev == depth(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz})) \{
631                 \textcolor{keywordflow}{if} (vismon)
632                 pline(\textcolor{stringliteral}{"%s shudders for a moment."},
633                                 Monnam(mtmp));
634                 \textcolor{keywordflow}{return} 2;
635             \}
636             get\_level(&flev, nlev);
637             migrate\_to\_level(mtmp, ledger\_no(&flev), \hyperlink{dungeon_8h_a28e698f1f36ba7c0eeb6a782261e2faf}{MIGR\_RANDOM},
638                 (\hyperlink{structcoord}{coord} *)0);
639             \textcolor{keywordflow}{if} (oseen) \hyperlink{hack_8h_afbd3607e7cef2f888f4190d40d058011}{makeknown}(SCR\_TELEPORTATION);
640         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{goto} mon\_tele;
641         \textcolor{keywordflow}{return} 2;
642         \}
643     \textcolor{keywordflow}{case} \hyperlink{muse_8c_ae588a7b81156914902b8ad9d1755e7f0}{MUSE\_WAN\_DIGGING}:
644         \{   \textcolor{keyword}{struct }\hyperlink{structtrap}{trap} *ttmp;
645 
646         \hyperlink{muse_8c_a54d89ba16b826c94408ccddb1468c00a}{m\_flee}(mtmp);
647         \hyperlink{muse_8c_a82b42772c7f62e2033417e1c184da73b}{mzapmsg}(mtmp, otmp, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE});
648         otmp->\hyperlink{structobj_a14fc8dc59e9073bfbf1e170875a98448}{spe}--;
649         \textcolor{keywordflow}{if} (oseen) \hyperlink{hack_8h_afbd3607e7cef2f888f4190d40d058011}{makeknown}(WAN\_DIGGING);
650         \textcolor{keywordflow}{if} (\hyperlink{rm_8h_a45d6f42899b65732f3784e37e713773f}{IS\_FURNITURE}(\hyperlink{rm_8h_a8cd681fba60fdedbabfd71a0b4bbfc00}{levl}[mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}][mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my}].typ) ||
651             \hyperlink{rm_8h_a0fc755681c9d727e384051fe943a902c}{IS\_DRAWBRIDGE}(\hyperlink{rm_8h_a8cd681fba60fdedbabfd71a0b4bbfc00}{levl}[mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}][mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my}].typ) ||
652             (is\_drawbridge\_wall(mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my}) >= 0) ||
653             (\hyperlink{decl_8h_ae69b4e2e218b5111c75615131978f33c}{sstairs}.\hyperlink{structstairway_af8a3fe0724bfd9702ad9aae6aa2aa850}{sx} && \hyperlink{decl_8h_ae69b4e2e218b5111c75615131978f33c}{sstairs}.\hyperlink{structstairway_af8a3fe0724bfd9702ad9aae6aa2aa850}{sx} == mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx} &&
654                    \hyperlink{decl_8h_ae69b4e2e218b5111c75615131978f33c}{sstairs}.\hyperlink{structstairway_a782c2bebca97b67e6299d2d5f8c2844f}{sy} == mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my})) \{
655             pline\_The(\textcolor{stringliteral}{"digging ray is ineffective."});
656             \textcolor{keywordflow}{return} 2;
657         \}
658         \textcolor{keywordflow}{if} (!Can\_dig\_down(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz})) \{
659             \textcolor{keywordflow}{if}(\hyperlink{display_8h_ad75e04a9624fe7ba0e1715ae3a3feb27}{canseemon}(mtmp))
660             pline\_The(\textcolor{stringliteral}{"%s here is too hard to dig in."},
661                     surface(mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my}));
662             \textcolor{keywordflow}{return} 2;
663         \}
664         ttmp = maketrap(mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my}, \hyperlink{trap_8h_a8049ef47c05eee8156bccee8d819c506}{HOLE});
665         \textcolor{keywordflow}{if} (!ttmp) \textcolor{keywordflow}{return} 2;
666         seetrap(ttmp);
667         \textcolor{keywordflow}{if} (vis) \{
668             pline(\textcolor{stringliteral}{"%s has made a hole in the %s."}, Monnam(mtmp),
669                 surface(mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my}));
670             pline(\textcolor{stringliteral}{"%s %s through..."}, Monnam(mtmp),
671               \hyperlink{mondata_8h_a4407b2600bc3b320829630ed895960c0}{is\_flyer}(mtmp->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}) ? \textcolor{stringliteral}{"dives"} : \textcolor{stringliteral}{"falls"});
672         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_ae3871fd2268fbc24b89cece8eb352dfc}{soundok})
673             You\_hear(\textcolor{stringliteral}{"%s crash through the %s."}, \hyperlink{decl_8h_aa5c50bde0d16d15a08d32d8df49a80ae}{something},
674                 surface(mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my}));
675         \textcolor{comment}{/* we made sure that there is a level for mtmp to go to */}
676         migrate\_to\_level(mtmp, ledger\_no(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz}) + 1,
677                  \hyperlink{dungeon_8h_a28e698f1f36ba7c0eeb6a782261e2faf}{MIGR\_RANDOM}, (\hyperlink{structcoord}{coord} *)0);
678         \textcolor{keywordflow}{return} 2;
679         \}
680     \textcolor{keywordflow}{case} \hyperlink{muse_8c_af007015cef270071dd8bb072fb030842}{MUSE\_WAN\_CREATE\_MONSTER}:
681         \{   \hyperlink{structcoord}{coord} cc;
682             \textcolor{comment}{/* pm: 0 => random, eel => aquatic, croc => amphibious */}
683         \textcolor{keyword}{struct }\hyperlink{structpermonst}{permonst} *pm = !is\_pool(mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my}) ? 0 :
684                  &\hyperlink{permonst_8h_ab96e7c4682ea5ae4f83339a15c06f676}{mons}[\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.uinwater ? PM\_GIANT\_EEL : PM\_CROCODILE];
685         \textcolor{keyword}{struct }\hyperlink{structmonst}{monst} *mon;
686 
687         \textcolor{keywordflow}{if} (!\hyperlink{teleport_8c_a61ffc1bbdf6259d46ae8abd0dce3ce31}{enexto}(&cc, mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my}, pm)) \textcolor{keywordflow}{return} 0;
688         \hyperlink{muse_8c_a82b42772c7f62e2033417e1c184da73b}{mzapmsg}(mtmp, otmp, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE});
689         otmp->\hyperlink{structobj_a14fc8dc59e9073bfbf1e170875a98448}{spe}--;
690         mon = makemon((\textcolor{keyword}{struct} \hyperlink{structpermonst}{permonst} *)0, cc.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x}, cc.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y}, \hyperlink{hack_8h_ae449582f467baa0da531a6ea116a18f2}{NO\_MM\_FLAGS});
691         \textcolor{keywordflow}{if} (mon && \hyperlink{display_8h_a13f0a7cac1ceb73885a59b8598de1648}{canspotmon}(mon) && oseen)
692             \hyperlink{hack_8h_afbd3607e7cef2f888f4190d40d058011}{makeknown}(WAN\_CREATE\_MONSTER);
693         \textcolor{keywordflow}{return} 2;
694         \}
695     \textcolor{keywordflow}{case} \hyperlink{muse_8c_aca65a80f05166317ea20ec0f4b8dcaf9}{MUSE\_SCR\_CREATE\_MONSTER}:
696         \{   \hyperlink{structcoord}{coord} cc;
697         \textcolor{keyword}{struct }\hyperlink{structpermonst}{permonst} *pm = 0, *fish = 0;
698         \textcolor{keywordtype}{int} cnt = 1;
699         \textcolor{keyword}{struct }\hyperlink{structmonst}{monst} *mon;
700         \textcolor{keywordtype}{boolean} \hyperlink{detect_8c_a2373e3a270d2b530119452501548080a}{known} = \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
701 
702         \textcolor{keywordflow}{if} (!rn2(73)) cnt += rnd(4);
703         \textcolor{keywordflow}{if} (mtmp->mconf || otmp->cursed) cnt += 12;
704         \textcolor{keywordflow}{if} (mtmp->mconf) pm = fish = &\hyperlink{permonst_8h_ab96e7c4682ea5ae4f83339a15c06f676}{mons}[PM\_ACID\_BLOB];
705         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (is\_pool(mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my}))
706             fish = &\hyperlink{permonst_8h_ab96e7c4682ea5ae4f83339a15c06f676}{mons}[\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.uinwater ? PM\_GIANT\_EEL : PM\_CROCODILE];
707         \hyperlink{muse_8c_adc8ed439d179dfe537178b5523edf8e3}{mreadmsg}(mtmp, otmp);
708         \textcolor{keywordflow}{while}(cnt--) \{
709             \textcolor{comment}{/* `fish' potentially gives bias towards water locations;}
710 \textcolor{comment}{               `pm' is what to actually create (0 => random) */}
711             \textcolor{keywordflow}{if} (!\hyperlink{teleport_8c_a61ffc1bbdf6259d46ae8abd0dce3ce31}{enexto}(&cc, mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my}, fish)) \textcolor{keywordflow}{break};
712             mon = makemon(pm, cc.\hyperlink{structcoord_ac3e93ff628aa19d2888c5f6fa26f430d}{x}, cc.\hyperlink{structcoord_a2b099692d87f98e4844b615136ca37fb}{y}, \hyperlink{hack_8h_ae449582f467baa0da531a6ea116a18f2}{NO\_MM\_FLAGS});
713             \textcolor{keywordflow}{if} (mon && \hyperlink{display_8h_a13f0a7cac1ceb73885a59b8598de1648}{canspotmon}(mon)) known = \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
714         \}
715         \textcolor{comment}{/* The only case where we don't use oseen.  For wands, you}
716 \textcolor{comment}{         * have to be able to see the monster zap the wand to know}
717 \textcolor{comment}{         * what type it is.  For teleport scrolls, you have to see}
718 \textcolor{comment}{         * the monster to know it teleported.}
719 \textcolor{comment}{         */}
720         \textcolor{keywordflow}{if} (known)
721             \hyperlink{hack_8h_afbd3607e7cef2f888f4190d40d058011}{makeknown}(SCR\_CREATE\_MONSTER);
722         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[SCR\_CREATE\_MONSTER].oc\_name\_known
723             && !\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[SCR\_CREATE\_MONSTER].oc\_uname)
724             docall(otmp);
725         m\_useup(mtmp, otmp);
726         \textcolor{keywordflow}{return} 2;
727         \}
728     \textcolor{keywordflow}{case} \hyperlink{muse_8c_a0e7d3c03f0220672e4f8ed17d3a8642a}{MUSE\_TRAPDOOR}:
729         \textcolor{comment}{/* trap doors on "bottom" levels of dungeons are rock-drop}
730 \textcolor{comment}{         * trap doors, not holes in the floor.  We check here for}
731 \textcolor{comment}{         * safety.}
732 \textcolor{comment}{         */}
733         \textcolor{keywordflow}{if} (Is\_botlevel(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz})) \textcolor{keywordflow}{return} 0;
734         \hyperlink{muse_8c_a54d89ba16b826c94408ccddb1468c00a}{m\_flee}(mtmp);
735         \textcolor{keywordflow}{if} (vis) \{
736             \textcolor{keyword}{struct }\hyperlink{structtrap}{trap} *t;
737             t = t\_at(\hyperlink{muse_8c_a2e3443c1d5259c106546bb48b093bd91}{trapx},\hyperlink{muse_8c_a2d804e7f376ac6699b1a10920158cc21}{trapy});
738             pline(\textcolor{stringliteral}{"%s %s into a %s!"}, Monnam(mtmp),
739             makeplural(locomotion(mtmp->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}, \textcolor{stringliteral}{"jump"})),
740             t->ttyp == \hyperlink{trap_8h_ab50570a3a3e65ed47edb98c63e355088}{TRAPDOOR} ? \textcolor{stringliteral}{"trap door"} : \textcolor{stringliteral}{"hole"});
741             \textcolor{keywordflow}{if} (\hyperlink{rm_8h_a8cd681fba60fdedbabfd71a0b4bbfc00}{levl}[\hyperlink{muse_8c_a2e3443c1d5259c106546bb48b093bd91}{trapx}][\hyperlink{muse_8c_a2d804e7f376ac6699b1a10920158cc21}{trapy}].typ == \hyperlink{rm_8h_a35e6fdb78f87c982df30c7e9580ad95d}{SCORR}) \{
742                 \hyperlink{rm_8h_a8cd681fba60fdedbabfd71a0b4bbfc00}{levl}[\hyperlink{muse_8c_a2e3443c1d5259c106546bb48b093bd91}{trapx}][\hyperlink{muse_8c_a2d804e7f376ac6699b1a10920158cc21}{trapy}].typ = \hyperlink{rm_8h_aeffd57885964c3a9a5c3ce0f81c06339}{CORR};
743                 \hyperlink{vision_8c_ae35bdda13dee95d455874551be850a47}{unblock\_point}(\hyperlink{muse_8c_a2e3443c1d5259c106546bb48b093bd91}{trapx}, \hyperlink{muse_8c_a2d804e7f376ac6699b1a10920158cc21}{trapy});
744             \}
745             seetrap(t\_at(\hyperlink{muse_8c_a2e3443c1d5259c106546bb48b093bd91}{trapx},\hyperlink{muse_8c_a2d804e7f376ac6699b1a10920158cc21}{trapy}));
746         \}
747 
748         \textcolor{comment}{/*  don't use rloc\_to() because worm tails must "move" */}
749         \hyperlink{rm_8h_a8b498c0777a4cf5d9894ab76cb6a520e}{remove\_monster}(mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my});
750         \hyperlink{display_8c_a185c6ad6e4c5a6be26a371b9aa17c32e}{newsym}(mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my});   \textcolor{comment}{/* update old location */}
751         \hyperlink{rm_8h_af46e44dabc00162cdea350fe3dae252b}{place\_monster}(mtmp, \hyperlink{muse_8c_a2e3443c1d5259c106546bb48b093bd91}{trapx}, \hyperlink{muse_8c_a2d804e7f376ac6699b1a10920158cc21}{trapy});
752         \textcolor{keywordflow}{if} (mtmp->wormno) \hyperlink{worm_8c_a49c542788a4a120834b406733ec3fde4}{worm\_move}(mtmp);
753         \hyperlink{display_8c_a185c6ad6e4c5a6be26a371b9aa17c32e}{newsym}(\hyperlink{muse_8c_a2e3443c1d5259c106546bb48b093bd91}{trapx}, \hyperlink{muse_8c_a2d804e7f376ac6699b1a10920158cc21}{trapy});
754 
755         migrate\_to\_level(mtmp, ledger\_no(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz}) + 1,
756                  \hyperlink{dungeon_8h_a28e698f1f36ba7c0eeb6a782261e2faf}{MIGR\_RANDOM}, (\hyperlink{structcoord}{coord} *)0);
757         \textcolor{keywordflow}{return} 2;
758     \textcolor{keywordflow}{case} \hyperlink{muse_8c_af8ea585a3a5abf202c8bfc6e567d4294}{MUSE\_UPSTAIRS}:
759         \textcolor{comment}{/* Monsters without amulets escape the dungeon and are}
760 \textcolor{comment}{         * gone for good when they leave up the up stairs.}
761 \textcolor{comment}{         * Monsters with amulets would reach the endlevel,}
762 \textcolor{comment}{         * which we cannot allow since that would leave the}
763 \textcolor{comment}{         * player stranded.}
764 \textcolor{comment}{         */}
765         \textcolor{keywordflow}{if} (ledger\_no(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz}) == 1) \{
766             \textcolor{keywordflow}{if} (mon\_has\_special(mtmp))
767                 \textcolor{keywordflow}{return} 0;
768             \textcolor{keywordflow}{if} (vismon)
769                 pline(\textcolor{stringliteral}{"%s escapes the dungeon!"}, Monnam(mtmp));
770             mongone(mtmp);
771             \textcolor{keywordflow}{return} 2;
772         \}
773         \hyperlink{muse_8c_a54d89ba16b826c94408ccddb1468c00a}{m\_flee}(mtmp);
774         \textcolor{keywordflow}{if} (\hyperlink{dungeon_8h_a5cd7abaad3082e8a7b2f5ec30e44d2f4}{Inhell} && mon\_has\_amulet(mtmp) && !rn2(4) &&
775             (dunlev(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz}) < dunlevs\_in\_dungeon(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz}) - 3)) \{
776             \textcolor{keywordflow}{if} (vismon) pline(
777      \textcolor{stringliteral}{"As %s climbs the stairs, a mysterious force momentarily surrounds %s..."},
778                      mon\_nam(mtmp), \hyperlink{you_8h_ad994e7a24679279ec24f0ef064a274d7}{mhim}(mtmp));
779             \textcolor{comment}{/* simpler than for the player; this will usually be}
780 \textcolor{comment}{               the Wizard and he'll immediately go right to the}
781 \textcolor{comment}{               upstairs, so there's not much point in having any}
782 \textcolor{comment}{               chance for a random position on the current level */}
783             migrate\_to\_level(mtmp, ledger\_no(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz}) + 1,
784                      \hyperlink{dungeon_8h_a28e698f1f36ba7c0eeb6a782261e2faf}{MIGR\_RANDOM}, (\hyperlink{structcoord}{coord} *)0);
785         \} \textcolor{keywordflow}{else} \{
786             \textcolor{keywordflow}{if} (vismon) pline(\textcolor{stringliteral}{"%s escapes upstairs!"}, Monnam(mtmp));
787             migrate\_to\_level(mtmp, ledger\_no(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz}) - 1,
788                      \hyperlink{dungeon_8h_acd51174881b5ca0d61f19515754c4921}{MIGR\_STAIRS\_DOWN}, (\hyperlink{structcoord}{coord} *)0);
789         \}
790         \textcolor{keywordflow}{return} 2;
791     \textcolor{keywordflow}{case} \hyperlink{muse_8c_ab8bc4c0e1f62324745690ad7514ceedf}{MUSE\_DOWNSTAIRS}:
792         \hyperlink{muse_8c_a54d89ba16b826c94408ccddb1468c00a}{m\_flee}(mtmp);
793         \textcolor{keywordflow}{if} (vismon) pline(\textcolor{stringliteral}{"%s escapes downstairs!"}, Monnam(mtmp));
794         migrate\_to\_level(mtmp, ledger\_no(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz}) + 1,
795                  \hyperlink{dungeon_8h_add533d1cbaa2c7556039dd076f9929d1}{MIGR\_STAIRS\_UP}, (\hyperlink{structcoord}{coord} *)0);
796         \textcolor{keywordflow}{return} 2;
797     \textcolor{keywordflow}{case} \hyperlink{muse_8c_af6e16437d305120ec5871ba0b013995b}{MUSE\_UP\_LADDER}:
798         \hyperlink{muse_8c_a54d89ba16b826c94408ccddb1468c00a}{m\_flee}(mtmp);
799         \textcolor{keywordflow}{if} (vismon) pline(\textcolor{stringliteral}{"%s escapes up the ladder!"}, Monnam(mtmp));
800         migrate\_to\_level(mtmp, ledger\_no(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz}) - 1,
801                  \hyperlink{dungeon_8h_ae9b54fed961a26e1834c5cfcfa0faceb}{MIGR\_LADDER\_DOWN}, (\hyperlink{structcoord}{coord} *)0);
802         \textcolor{keywordflow}{return} 2;
803     \textcolor{keywordflow}{case} \hyperlink{muse_8c_a8b6bb02638dd25e2792567b13ffa4b40}{MUSE\_DN\_LADDER}:
804         \hyperlink{muse_8c_a54d89ba16b826c94408ccddb1468c00a}{m\_flee}(mtmp);
805         \textcolor{keywordflow}{if} (vismon) pline(\textcolor{stringliteral}{"%s escapes down the ladder!"}, Monnam(mtmp));
806         migrate\_to\_level(mtmp, ledger\_no(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz}) + 1,
807                  \hyperlink{dungeon_8h_a81af97dd7f470dbb8f5b556492396404}{MIGR\_LADDER\_UP}, (\hyperlink{structcoord}{coord} *)0);
808         \textcolor{keywordflow}{return} 2;
809     \textcolor{keywordflow}{case} \hyperlink{muse_8c_afb239ce4101fdff4659cb3c6c0184515}{MUSE\_SSTAIRS}:
810         \hyperlink{muse_8c_a54d89ba16b826c94408ccddb1468c00a}{m\_flee}(mtmp);
811         \textcolor{comment}{/* the stairs leading up from the 1st level are */}
812         \textcolor{comment}{/* regular stairs, not sstairs.         */}
813         \textcolor{keywordflow}{if} (\hyperlink{decl_8h_ae69b4e2e218b5111c75615131978f33c}{sstairs}.\hyperlink{structstairway_a094992532e8ae225101143f2c57d6d1a}{up}) \{
814             \textcolor{keywordflow}{if} (vismon)
815                 pline(\textcolor{stringliteral}{"%s escapes upstairs!"}, Monnam(mtmp));
816             \textcolor{keywordflow}{if}(\hyperlink{dungeon_8h_a5cd7abaad3082e8a7b2f5ec30e44d2f4}{Inhell}) \{
817                 migrate\_to\_level(mtmp, ledger\_no(&\hyperlink{decl_8h_ae69b4e2e218b5111c75615131978f33c}{sstairs}.\hyperlink{structstairway_a6077e82bcb38b906ea0f10700a4d2273}{tolev}),
818                          \hyperlink{dungeon_8h_a28e698f1f36ba7c0eeb6a782261e2faf}{MIGR\_RANDOM}, (\hyperlink{structcoord}{coord} *)0);
819                 \textcolor{keywordflow}{return} 2;
820             \}
821         \} \textcolor{keywordflow}{else}  \textcolor{keywordflow}{if} (vismon)
822             pline(\textcolor{stringliteral}{"%s escapes downstairs!"}, Monnam(mtmp));
823         migrate\_to\_level(mtmp, ledger\_no(&\hyperlink{decl_8h_ae69b4e2e218b5111c75615131978f33c}{sstairs}.\hyperlink{structstairway_a6077e82bcb38b906ea0f10700a4d2273}{tolev}),
824                  \hyperlink{dungeon_8h_aa90de6027eb47b8ced165491eaaed179}{MIGR\_SSTAIRS}, (\hyperlink{structcoord}{coord} *)0);
825         \textcolor{keywordflow}{return} 2;
826     \textcolor{keywordflow}{case} \hyperlink{muse_8c_ae214c66b1ac1efc477fa9029885ed414}{MUSE\_TELEPORT\_TRAP}:
827         \hyperlink{muse_8c_a54d89ba16b826c94408ccddb1468c00a}{m\_flee}(mtmp);
828         \textcolor{keywordflow}{if} (vis) \{
829             pline(\textcolor{stringliteral}{"%s %s onto a teleport trap!"}, Monnam(mtmp),
830                 makeplural(locomotion(mtmp->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}, \textcolor{stringliteral}{"jump"})));
831             \textcolor{keywordflow}{if} (\hyperlink{rm_8h_a8cd681fba60fdedbabfd71a0b4bbfc00}{levl}[\hyperlink{muse_8c_a2e3443c1d5259c106546bb48b093bd91}{trapx}][\hyperlink{muse_8c_a2d804e7f376ac6699b1a10920158cc21}{trapy}].typ == \hyperlink{rm_8h_a35e6fdb78f87c982df30c7e9580ad95d}{SCORR}) \{
832                 \hyperlink{rm_8h_a8cd681fba60fdedbabfd71a0b4bbfc00}{levl}[\hyperlink{muse_8c_a2e3443c1d5259c106546bb48b093bd91}{trapx}][\hyperlink{muse_8c_a2d804e7f376ac6699b1a10920158cc21}{trapy}].typ = \hyperlink{rm_8h_aeffd57885964c3a9a5c3ce0f81c06339}{CORR};
833                 \hyperlink{vision_8c_ae35bdda13dee95d455874551be850a47}{unblock\_point}(\hyperlink{muse_8c_a2e3443c1d5259c106546bb48b093bd91}{trapx}, \hyperlink{muse_8c_a2d804e7f376ac6699b1a10920158cc21}{trapy});
834             \}
835             seetrap(t\_at(\hyperlink{muse_8c_a2e3443c1d5259c106546bb48b093bd91}{trapx},\hyperlink{muse_8c_a2d804e7f376ac6699b1a10920158cc21}{trapy}));
836         \}
837         \textcolor{comment}{/*  don't use rloc\_to() because worm tails must "move" */}
838         \hyperlink{rm_8h_a8b498c0777a4cf5d9894ab76cb6a520e}{remove\_monster}(mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my});
839         \hyperlink{display_8c_a185c6ad6e4c5a6be26a371b9aa17c32e}{newsym}(mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my});   \textcolor{comment}{/* update old location */}
840         \hyperlink{rm_8h_af46e44dabc00162cdea350fe3dae252b}{place\_monster}(mtmp, \hyperlink{muse_8c_a2e3443c1d5259c106546bb48b093bd91}{trapx}, \hyperlink{muse_8c_a2d804e7f376ac6699b1a10920158cc21}{trapy});
841         \textcolor{keywordflow}{if} (mtmp->wormno) \hyperlink{worm_8c_a49c542788a4a120834b406733ec3fde4}{worm\_move}(mtmp);
842         \hyperlink{display_8c_a185c6ad6e4c5a6be26a371b9aa17c32e}{newsym}(\hyperlink{muse_8c_a2e3443c1d5259c106546bb48b093bd91}{trapx}, \hyperlink{muse_8c_a2d804e7f376ac6699b1a10920158cc21}{trapy});
843 
844         \textcolor{keywordflow}{goto} mon\_tele;
845     \textcolor{keywordflow}{case} \hyperlink{muse_8c_a0df3ce17e1e03a5f846b7b404d0f75a8}{MUSE\_POT\_HEALING}:
846         \hyperlink{muse_8c_a885817dcbfdbdb4f910bcbf3520a8031}{mquaffmsg}(mtmp, otmp);
847         i = d(6 + 2 * bcsign(otmp), 4);
848         mtmp->\hyperlink{structmonst_abe22e95755f1348a6a1c78252be5d76d}{mhp} += i;
849         \textcolor{keywordflow}{if} (mtmp->\hyperlink{structmonst_abe22e95755f1348a6a1c78252be5d76d}{mhp} > mtmp->\hyperlink{structmonst_a66c107319bb7bb318c04e6a0f5f03c60}{mhpmax}) mtmp->\hyperlink{structmonst_abe22e95755f1348a6a1c78252be5d76d}{mhp} = ++mtmp->\hyperlink{structmonst_a66c107319bb7bb318c04e6a0f5f03c60}{mhpmax};
850         \textcolor{keywordflow}{if} (!otmp->cursed && !mtmp->mcansee) \{
851             mtmp->mcansee = 1;
852             mtmp->mblinded = 0;
853             \textcolor{keywordflow}{if} (vismon) pline(mcsa, Monnam(mtmp));
854         \}
855         \textcolor{keywordflow}{if} (vismon) pline(\textcolor{stringliteral}{"%s looks better."}, Monnam(mtmp));
856         \textcolor{keywordflow}{if} (oseen) \hyperlink{hack_8h_afbd3607e7cef2f888f4190d40d058011}{makeknown}(POT\_HEALING);
857         m\_useup(mtmp, otmp);
858         \textcolor{keywordflow}{return} 2;
859     \textcolor{keywordflow}{case} \hyperlink{muse_8c_ad2669dea3dd392871c80929370ec342b}{MUSE\_POT\_EXTRA\_HEALING}:
860         \hyperlink{muse_8c_a885817dcbfdbdb4f910bcbf3520a8031}{mquaffmsg}(mtmp, otmp);
861         i = d(6 + 2 * bcsign(otmp), 8);
862         mtmp->\hyperlink{structmonst_abe22e95755f1348a6a1c78252be5d76d}{mhp} += i;
863         \textcolor{keywordflow}{if} (mtmp->\hyperlink{structmonst_abe22e95755f1348a6a1c78252be5d76d}{mhp} > mtmp->\hyperlink{structmonst_a66c107319bb7bb318c04e6a0f5f03c60}{mhpmax})
864             mtmp->\hyperlink{structmonst_abe22e95755f1348a6a1c78252be5d76d}{mhp} = (mtmp->\hyperlink{structmonst_a66c107319bb7bb318c04e6a0f5f03c60}{mhpmax} += (otmp->blessed ? 5 : 2));
865         \textcolor{keywordflow}{if} (!mtmp->mcansee) \{
866             mtmp->mcansee = 1;
867             mtmp->mblinded = 0;
868             \textcolor{keywordflow}{if} (vismon) pline(mcsa, Monnam(mtmp));
869         \}
870         \textcolor{keywordflow}{if} (vismon) pline(\textcolor{stringliteral}{"%s looks much better."}, Monnam(mtmp));
871         \textcolor{keywordflow}{if} (oseen) \hyperlink{hack_8h_afbd3607e7cef2f888f4190d40d058011}{makeknown}(POT\_EXTRA\_HEALING);
872         m\_useup(mtmp, otmp);
873         \textcolor{keywordflow}{return} 2;
874     \textcolor{keywordflow}{case} \hyperlink{muse_8c_ab7a31f6e9ee18a59412d10b82f0570e7}{MUSE\_POT\_FULL\_HEALING}:
875         \hyperlink{muse_8c_a885817dcbfdbdb4f910bcbf3520a8031}{mquaffmsg}(mtmp, otmp);
876         \textcolor{keywordflow}{if} (otmp->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == POT\_SICKNESS) unbless(otmp); \textcolor{comment}{/* Pestilence */}
877         mtmp->\hyperlink{structmonst_abe22e95755f1348a6a1c78252be5d76d}{mhp} = (mtmp->\hyperlink{structmonst_a66c107319bb7bb318c04e6a0f5f03c60}{mhpmax} += (otmp->blessed ? 8 : 4));
878         \textcolor{keywordflow}{if} (!mtmp->mcansee && otmp->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} != POT\_SICKNESS) \{
879             mtmp->mcansee = 1;
880             mtmp->mblinded = 0;
881             \textcolor{keywordflow}{if} (vismon) pline(mcsa, Monnam(mtmp));
882         \}
883         \textcolor{keywordflow}{if} (vismon) pline(\textcolor{stringliteral}{"%s looks completely healed."}, Monnam(mtmp));
884         \textcolor{keywordflow}{if} (oseen) \hyperlink{hack_8h_afbd3607e7cef2f888f4190d40d058011}{makeknown}(otmp->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp});
885         m\_useup(mtmp, otmp);
886         \textcolor{keywordflow}{return} 2;
887     \textcolor{keywordflow}{case} \hyperlink{muse_8c_a2fe45e61be8379e9eee713c6dc3763ad}{MUSE\_LIZARD\_CORPSE}:
888         \textcolor{comment}{/* not actually called for its unstoning effect */}
889         \hyperlink{muse_8c_a0e15321266510c0c8dbe8cac3a3fa7d8}{mon\_consume\_unstone}(mtmp, otmp, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE});
890         \textcolor{keywordflow}{return} 2;
891     \textcolor{keywordflow}{case} 0: \textcolor{keywordflow}{return} 0; \textcolor{comment}{/* i.e. an exploded wand */}
892     \textcolor{keywordflow}{default}: impossible(\textcolor{stringliteral}{"%s wanted to perform action %d?"}, Monnam(mtmp),
893             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a70288ed35c7e3f6a1f0905c39a16c2d3}{has\_defense});
894         \textcolor{keywordflow}{break};
895     \}
896     \textcolor{keywordflow}{return} 0;
897 \textcolor{preprocessor}{#undef m\_flee}
898 \}
\end{DoxyCode}
\hypertarget{muse_8c_a01d660dde2dc57db10e0391274e63cdc}{\index{muse.\+c@{muse.\+c}!use\+\_\+misc@{use\+\_\+misc}}
\index{use\+\_\+misc@{use\+\_\+misc}!muse.\+c@{muse.\+c}}
\subsubsection[{use\+\_\+misc}]{\setlength{\rightskip}{0pt plus 5cm}int use\+\_\+misc (
\begin{DoxyParamCaption}
\item[{struct {\bf monst} $\ast$}]{mtmp}
\end{DoxyParamCaption}
)}}\label{muse_8c_a01d660dde2dc57db10e0391274e63cdc}


Definition at line 1694 of file muse.\+c.



References bimanual, B\+U\+F\+S\+Z, cansee, canseemon, F\+A\+L\+S\+E, Hallucination, H\+A\+N\+D, musable\+::has\+\_\+misc, is\+\_\+plural, m, makeknown, M\+I\+G\+R\+\_\+\+R\+A\+N\+D\+O\+M, musable\+::misc, mon\+\_\+adjust\+\_\+speed(), mon\+\_\+set\+\_\+minvis(), mquaffmsg(), M\+U\+S\+E\+\_\+\+B\+U\+L\+L\+W\+H\+I\+P, muse\+\_\+newcham\+\_\+mon(), M\+U\+S\+E\+\_\+\+P\+O\+L\+Y\+\_\+\+T\+R\+A\+P, M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+G\+A\+I\+N\+\_\+\+L\+E\+V\+E\+L, M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+I\+N\+V\+I\+S\+I\+B\+I\+L\+I\+T\+Y, M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+P\+O\+L\+Y\+M\+O\+R\+P\+H, M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+S\+P\+E\+E\+D, M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+M\+A\+K\+E\+\_\+\+I\+N\+V\+I\+S\+I\+B\+L\+E, M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+P\+O\+L\+Y\+M\+O\+R\+P\+H, M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+S\+P\+E\+E\+D\+\_\+\+M\+O\+N\+S\+T\+E\+R, mzapmsg(), nambuf, newsym(), objects, otmp, obj\+::otyp, place\+\_\+monster, precheck(), remove\+\_\+monster, See\+\_\+invisible, S\+I\+L\+V\+E\+R, obj\+::spe, Strcpy, T\+R\+U\+E, u, uwep, uwepgone(), you\+::ux, you\+::uy, you\+::uz, welded(), worm\+\_\+move(), and you\+\_\+aggravate().


\begin{DoxyCode}
1696 \{
1697     \textcolor{keywordtype}{int} i;
1698     \textcolor{keyword}{struct }\hyperlink{structobj}{obj} *\hyperlink{mhitu_8c_a8cf94e09e1a72daf7050a2817ba70974}{otmp} = \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a7588e8e6ab60f4ea8fe12d61b674f52b}{misc};
1699     \textcolor{keywordtype}{boolean} vis, vismon, oseen;
1700     \textcolor{keywordtype}{char} \hyperlink{questpgr_8c_a0d2e3145707b491c18fd62d7dd92f4a3}{nambuf}[\hyperlink{global_8h_ab26c26cbf7a0c97d8960c3cfb413f882}{BUFSZ}];
1701 
1702     \textcolor{keywordflow}{if} ((i = \hyperlink{muse_8c_aafe9cef615d465f4a327c5f8bff918a4}{precheck}(mtmp, otmp)) != 0) \textcolor{keywordflow}{return} i;
1703     vis = \hyperlink{vision_8h_a857efc720262bc13a9e4b4bcbb079b5c}{cansee}(mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my});
1704     vismon = \hyperlink{display_8h_ad75e04a9624fe7ba0e1715ae3a3feb27}{canseemon}(mtmp);
1705     oseen = otmp && vismon;
1706 
1707     \textcolor{keywordflow}{switch}(\hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_aa2d416f925ea6cbead5267d5462e4aef}{has\_misc}) \{
1708     \textcolor{keywordflow}{case} \hyperlink{muse_8c_a8e37ee24a3248fee83db8cc6bebdd969}{MUSE\_POT\_GAIN\_LEVEL}:
1709         \hyperlink{muse_8c_a885817dcbfdbdb4f910bcbf3520a8031}{mquaffmsg}(mtmp, otmp);
1710         \textcolor{keywordflow}{if} (otmp->cursed) \{
1711             \textcolor{keywordflow}{if} (Can\_rise\_up(mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my}, &\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz})) \{
1712             \textcolor{keyword}{register} \textcolor{keywordtype}{int} tolev = depth(&\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz})-1;
1713             \hyperlink{structd__level}{d\_level} tolevel;
1714 
1715             get\_level(&tolevel, tolev);
1716             \textcolor{comment}{/* insurance against future changes... */}
1717             \textcolor{keywordflow}{if}(on\_level(&tolevel, &\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a89878490db5d54221f04b3fb44ebdaa2}{uz})) \textcolor{keywordflow}{goto} skipmsg;
1718             \textcolor{keywordflow}{if} (vismon) \{
1719                 pline(\textcolor{stringliteral}{"%s rises up, through the %s!"},
1720                   Monnam(mtmp), ceiling(mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my}));
1721                 \textcolor{keywordflow}{if}(!\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[POT\_GAIN\_LEVEL].oc\_name\_known
1722                   && !\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[POT\_GAIN\_LEVEL].oc\_uname)
1723                 docall(otmp);
1724             \}
1725             m\_useup(mtmp, otmp);
1726             migrate\_to\_level(mtmp, ledger\_no(&tolevel),
1727                      \hyperlink{dungeon_8h_a28e698f1f36ba7c0eeb6a782261e2faf}{MIGR\_RANDOM}, (\hyperlink{structcoord}{coord} *)0);
1728             \textcolor{keywordflow}{return} 2;
1729             \} \textcolor{keywordflow}{else} \{
1730 skipmsg:
1731             \textcolor{keywordflow}{if} (vismon) \{
1732                 pline(\textcolor{stringliteral}{"%s looks uneasy."}, Monnam(mtmp));
1733                 \textcolor{keywordflow}{if}(!\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[POT\_GAIN\_LEVEL].oc\_name\_known
1734                   && !\hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[POT\_GAIN\_LEVEL].oc\_uname)
1735                 docall(otmp);
1736             \}
1737             m\_useup(mtmp, otmp);
1738             \textcolor{keywordflow}{return} 2;
1739             \}
1740         \}
1741         \textcolor{keywordflow}{if} (vismon) pline(\textcolor{stringliteral}{"%s seems more experienced."}, Monnam(mtmp));
1742         \textcolor{keywordflow}{if} (oseen) \hyperlink{hack_8h_afbd3607e7cef2f888f4190d40d058011}{makeknown}(POT\_GAIN\_LEVEL);
1743         m\_useup(mtmp, otmp);
1744         \textcolor{keywordflow}{if} (!grow\_up(mtmp,(\textcolor{keyword}{struct} \hyperlink{structmonst}{monst} *)0)) \textcolor{keywordflow}{return} 1;
1745             \textcolor{comment}{/* grew into genocided monster */}
1746         \textcolor{keywordflow}{return} 2;
1747     \textcolor{keywordflow}{case} \hyperlink{muse_8c_ad01022eb368493aae7bf0e1959bce963}{MUSE\_WAN\_MAKE\_INVISIBLE}:
1748     \textcolor{keywordflow}{case} \hyperlink{muse_8c_a5980f169f9e08c086d1c4e588d9dd86d}{MUSE\_POT\_INVISIBILITY}:
1749         \textcolor{keywordflow}{if} (otmp->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == WAN\_MAKE\_INVISIBLE) \{
1750             \hyperlink{muse_8c_a82b42772c7f62e2033417e1c184da73b}{mzapmsg}(mtmp, otmp, \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE});
1751             otmp->\hyperlink{structobj_a14fc8dc59e9073bfbf1e170875a98448}{spe}--;
1752         \} \textcolor{keywordflow}{else}
1753             \hyperlink{muse_8c_a885817dcbfdbdb4f910bcbf3520a8031}{mquaffmsg}(mtmp, otmp);
1754         \textcolor{comment}{/* format monster's name before altering its visibility */}
1755         \hyperlink{global_8h_add22f733d1f2c380499f495068e42b7c}{Strcpy}(nambuf, \hyperlink{youprop_8h_ae00ea7702fa1870643d604364b0640c7}{See\_invisible} ? Monnam(mtmp) : mon\_nam(mtmp));
1756         \hyperlink{worn_8c_a56f8afd7b14461c6d2cb639b68d4c44d}{mon\_set\_minvis}(mtmp);
1757         \textcolor{keywordflow}{if} (vismon && mtmp->minvis) \{   \textcolor{comment}{/* was seen, now invisible */}
1758             \textcolor{keywordflow}{if} (\hyperlink{youprop_8h_ae00ea7702fa1870643d604364b0640c7}{See\_invisible})
1759             pline(\textcolor{stringliteral}{"%s body takes on a %s transparency."},
1760                   s\_suffix(nambuf),
1761                   \hyperlink{youprop_8h_aa873f7ea0a3d096ef94ff651907f7a76}{Hallucination} ? \textcolor{stringliteral}{"normal"} : \textcolor{stringliteral}{"strange"});
1762             \textcolor{keywordflow}{else}
1763             pline(\textcolor{stringliteral}{"Suddenly you cannot see %s."}, nambuf);
1764             \textcolor{keywordflow}{if} (oseen) \hyperlink{hack_8h_afbd3607e7cef2f888f4190d40d058011}{makeknown}(otmp->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp});
1765         \}
1766         \textcolor{keywordflow}{if} (otmp->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == POT\_INVISIBILITY) \{
1767             \textcolor{keywordflow}{if} (otmp->cursed) \hyperlink{muse_8c_a3ba72ca24dd7ce63ed8681310363505f}{you\_aggravate}(mtmp);
1768             m\_useup(mtmp, otmp);
1769         \}
1770         \textcolor{keywordflow}{return} 2;
1771     \textcolor{keywordflow}{case} \hyperlink{muse_8c_a7704f2590b3a038a641deda61b84f58b}{MUSE\_WAN\_SPEED\_MONSTER}:
1772         \hyperlink{muse_8c_a82b42772c7f62e2033417e1c184da73b}{mzapmsg}(mtmp, otmp, \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE});
1773         otmp->\hyperlink{structobj_a14fc8dc59e9073bfbf1e170875a98448}{spe}--;
1774         \hyperlink{worn_8c_adaf11e4f4e6b2b5d86738411700e6050}{mon\_adjust\_speed}(mtmp, 1, otmp);
1775         \textcolor{keywordflow}{return} 2;
1776     \textcolor{keywordflow}{case} \hyperlink{muse_8c_a7aa4b264c72038d91f1eaaf212b15ad6}{MUSE\_POT\_SPEED}:
1777         \hyperlink{muse_8c_a885817dcbfdbdb4f910bcbf3520a8031}{mquaffmsg}(mtmp, otmp);
1778         \textcolor{comment}{/* note difference in potion effect due to substantially}
1779 \textcolor{comment}{           different methods of maintaining speed ratings:}
1780 \textcolor{comment}{           player's character becomes "very fast" temporarily;}
1781 \textcolor{comment}{           monster becomes "one stage faster" permanently */}
1782         \hyperlink{worn_8c_adaf11e4f4e6b2b5d86738411700e6050}{mon\_adjust\_speed}(mtmp, 1, otmp);
1783         m\_useup(mtmp, otmp);
1784         \textcolor{keywordflow}{return} 2;
1785     \textcolor{keywordflow}{case} \hyperlink{muse_8c_acfb9e6f9d58209f1808dfd315b54b723}{MUSE\_WAN\_POLYMORPH}:
1786         \hyperlink{muse_8c_a82b42772c7f62e2033417e1c184da73b}{mzapmsg}(mtmp, otmp, \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE});
1787         otmp->\hyperlink{structobj_a14fc8dc59e9073bfbf1e170875a98448}{spe}--;
1788         (void) newcham(mtmp, \hyperlink{muse_8c_a6e9f8483c400b439d17e7a035c8c97cf}{muse\_newcham\_mon}(mtmp), \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE}, 
      \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE});
1789         \textcolor{keywordflow}{if} (oseen) \hyperlink{hack_8h_afbd3607e7cef2f888f4190d40d058011}{makeknown}(WAN\_POLYMORPH);
1790         \textcolor{keywordflow}{return} 2;
1791     \textcolor{keywordflow}{case} \hyperlink{muse_8c_a43d2aa2b768ead263f72c437525539c6}{MUSE\_POT\_POLYMORPH}:
1792         \hyperlink{muse_8c_a885817dcbfdbdb4f910bcbf3520a8031}{mquaffmsg}(mtmp, otmp);
1793         \textcolor{keywordflow}{if} (vismon) pline(\textcolor{stringliteral}{"%s suddenly mutates!"}, Monnam(mtmp));
1794         (void) newcham(mtmp, \hyperlink{muse_8c_a6e9f8483c400b439d17e7a035c8c97cf}{muse\_newcham\_mon}(mtmp), \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}, 
      \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE});
1795         \textcolor{keywordflow}{if} (oseen) \hyperlink{hack_8h_afbd3607e7cef2f888f4190d40d058011}{makeknown}(POT\_POLYMORPH);
1796         m\_useup(mtmp, otmp);
1797         \textcolor{keywordflow}{return} 2;
1798     \textcolor{keywordflow}{case} \hyperlink{muse_8c_ab7d2d5dff5b09c7981f2e901c6760f70}{MUSE\_POLY\_TRAP}:
1799         \textcolor{keywordflow}{if} (vismon)
1800             pline(\textcolor{stringliteral}{"%s deliberately %s onto a polymorph trap!"},
1801             Monnam(mtmp),
1802             makeplural(locomotion(mtmp->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}, \textcolor{stringliteral}{"jump"})));
1803         \textcolor{keywordflow}{if} (vis) seetrap(t\_at(\hyperlink{muse_8c_a2e3443c1d5259c106546bb48b093bd91}{trapx},\hyperlink{muse_8c_a2d804e7f376ac6699b1a10920158cc21}{trapy}));
1804 
1805         \textcolor{comment}{/*  don't use rloc() due to worms */}
1806         \hyperlink{rm_8h_a8b498c0777a4cf5d9894ab76cb6a520e}{remove\_monster}(mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my});
1807         \hyperlink{display_8c_a185c6ad6e4c5a6be26a371b9aa17c32e}{newsym}(mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my});
1808         \hyperlink{rm_8h_af46e44dabc00162cdea350fe3dae252b}{place\_monster}(mtmp, \hyperlink{muse_8c_a2e3443c1d5259c106546bb48b093bd91}{trapx}, \hyperlink{muse_8c_a2d804e7f376ac6699b1a10920158cc21}{trapy});
1809         \textcolor{keywordflow}{if} (mtmp->wormno) \hyperlink{worm_8c_a49c542788a4a120834b406733ec3fde4}{worm\_move}(mtmp);
1810         \hyperlink{display_8c_a185c6ad6e4c5a6be26a371b9aa17c32e}{newsym}(\hyperlink{muse_8c_a2e3443c1d5259c106546bb48b093bd91}{trapx}, \hyperlink{muse_8c_a2d804e7f376ac6699b1a10920158cc21}{trapy});
1811 
1812         (void) newcham(mtmp, (\textcolor{keyword}{struct} \hyperlink{structpermonst}{permonst} *)0, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE});
1813         \textcolor{keywordflow}{return} 2;
1814     \textcolor{keywordflow}{case} \hyperlink{muse_8c_abad816ae5ba2b9882b006d16e7d2f83e}{MUSE\_BULLWHIP}:
1815         \textcolor{comment}{/* attempt to disarm hero */}
1816         \textcolor{keywordflow}{if} (\hyperlink{decl_8h_a1aefaef88eef9075d8136d19410fd3b1}{uwep} && !rn2(5)) \{
1817             \textcolor{keyword}{const} \textcolor{keywordtype}{char} *The\_whip = vismon ? \textcolor{stringliteral}{"The bullwhip"} : \textcolor{stringliteral}{"A whip"};
1818             \textcolor{keywordtype}{int} where\_to = rn2(4);
1819             \textcolor{keyword}{struct }\hyperlink{structobj}{obj} *\hyperlink{structobj}{obj} = \hyperlink{decl_8h_a1aefaef88eef9075d8136d19410fd3b1}{uwep};
1820             \textcolor{keyword}{const} \textcolor{keywordtype}{char} *hand;
1821             \textcolor{keywordtype}{char} the\_weapon[\hyperlink{global_8h_ab26c26cbf7a0c97d8960c3cfb413f882}{BUFSZ}];
1822 
1823             \hyperlink{global_8h_add22f733d1f2c380499f495068e42b7c}{Strcpy}(the\_weapon, the(xname(obj)));
1824             hand = body\_part(\hyperlink{hack_8h_a701f28a9a2b5334b58333f06e27ad91f}{HAND});
1825             \textcolor{keywordflow}{if} (\hyperlink{obj_8h_a6cd644088e281f2bcc78f1d94dc91476}{bimanual}(obj)) hand = makeplural(hand);
1826 
1827             \textcolor{keywordflow}{if} (vismon)
1828             pline(\textcolor{stringliteral}{"%s flicks a bullwhip towards your %s!"},
1829                   Monnam(mtmp), hand);
1830             \textcolor{keywordflow}{if} (obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == HEAVY\_IRON\_BALL) \{
1831             pline(\textcolor{stringliteral}{"%s fails to wrap around %s."},
1832                   The\_whip, the\_weapon);
1833             \textcolor{keywordflow}{return} 1;
1834             \}
1835             pline(\textcolor{stringliteral}{"%s wraps around %s you're wielding!"},
1836               The\_whip, the\_weapon);
1837             \textcolor{keywordflow}{if} (\hyperlink{wield_8c_ade2321e11c702d69c6fd7b261ae62040}{welded}(obj)) \{
1838             pline(\textcolor{stringliteral}{"%s welded to your %s%c"},
1839                   !\hyperlink{obj_8h_a8bebd62ba942159b2b8888847cd2df99}{is\_plural}(obj) ? \textcolor{stringliteral}{"It is"} : \textcolor{stringliteral}{"They are"},
1840                   hand, !obj->bknown ? \textcolor{charliteral}{'!'} : \textcolor{charliteral}{'.'});
1841             \textcolor{comment}{/* obj->bknown = 1; */} \textcolor{comment}{/* welded() takes care of this */}
1842             where\_to = 0;
1843             \}
1844             \textcolor{keywordflow}{if} (!where\_to) \{
1845             pline\_The(\textcolor{stringliteral}{"whip slips free."});  \textcolor{comment}{/* not `The\_whip' */}
1846             \textcolor{keywordflow}{return} 1;
1847             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (where\_to == 3 && hates\_silver(mtmp->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}) &&
1848                 \hyperlink{objclass_8h_a6fc960ca847bc1bef7559abb7bf29209}{objects}[obj->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp}].oc\_material == \hyperlink{objclass_8h_a7e76a14a479114a4b9b20782bb00e69a}{SILVER}) \{
1849             \textcolor{comment}{/* this monster won't want to catch a silver}
1850 \textcolor{comment}{               weapon; drop it at hero's feet instead */}
1851             where\_to = 2;
1852             \}
1853             freeinv(obj);
1854             \hyperlink{wield_8c_acfe25ed4d9db889cb4bc70a9c5ab9c4d}{uwepgone}();
1855             \textcolor{keywordflow}{switch} (where\_to) \{
1856             \textcolor{keywordflow}{case} 1:     \textcolor{comment}{/* onto floor beneath mon */}
1857                 pline(\textcolor{stringliteral}{"%s yanks %s from your %s!"}, Monnam(mtmp),
1858                   the\_weapon, hand);
1859                 place\_object(obj, mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my});
1860                 \textcolor{keywordflow}{break};
1861             \textcolor{keywordflow}{case} 2:     \textcolor{comment}{/* onto floor beneath you */}
1862                 pline(\textcolor{stringliteral}{"%s yanks %s to the %s!"}, Monnam(mtmp),
1863                   the\_weapon, surface(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux}, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy}));
1864                 dropy(obj);
1865                 \textcolor{keywordflow}{break};
1866             \textcolor{keywordflow}{case} 3:     \textcolor{comment}{/* into mon's inventory */}
1867                 pline(\textcolor{stringliteral}{"%s snatches %s!"}, Monnam(mtmp),
1868                   the\_weapon);
1869                 (void) mpickobj(mtmp,obj);
1870                 \textcolor{keywordflow}{break};
1871             \}
1872             \textcolor{keywordflow}{return} 1;
1873         \}
1874         \textcolor{keywordflow}{return} 0;
1875     \textcolor{keywordflow}{case} 0: \textcolor{keywordflow}{return} 0; \textcolor{comment}{/* i.e. an exploded wand */}
1876     \textcolor{keywordflow}{default}: impossible(\textcolor{stringliteral}{"%s wanted to perform action %d?"}, Monnam(mtmp),
1877             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_aa2d416f925ea6cbead5267d5462e4aef}{has\_misc});
1878         \textcolor{keywordflow}{break};
1879     \}
1880     \textcolor{keywordflow}{return} 0;
1881 \}
\end{DoxyCode}
\hypertarget{muse_8c_a8df7f18758592fe481e362d53ab752b0}{\index{muse.\+c@{muse.\+c}!use\+\_\+offensive@{use\+\_\+offensive}}
\index{use\+\_\+offensive@{use\+\_\+offensive}!muse.\+c@{muse.\+c}}
\subsubsection[{use\+\_\+offensive}]{\setlength{\rightskip}{0pt plus 5cm}int use\+\_\+offensive (
\begin{DoxyParamCaption}
\item[{struct {\bf monst} $\ast$}]{mtmp}
\end{DoxyParamCaption}
)}}\label{muse_8c_a8df7f18758592fe481e362d53ab752b0}


Definition at line 1266 of file muse.\+c.



References A\+D\+\_\+\+C\+O\+L\+D, A\+D\+\_\+\+F\+I\+R\+E, amorphous, cansee, canseemon, canspotmon, monst\+::data, D\+E\+A\+D\+M\+O\+N\+S\+T\+E\+R, F\+A\+L\+S\+E, Fire\+\_\+resistance, flags, fmon, Half\+\_\+spell\+\_\+damage, musable\+::has\+\_\+offense, I\+S\+\_\+\+A\+I\+R, is\+\_\+metallic, I\+S\+\_\+\+R\+O\+C\+K, K\+I\+L\+L\+E\+D\+\_\+\+B\+Y\+\_\+\+A\+N, levl, m, m\+\_\+at, m\+\_\+using, makeknown, map\+\_\+invisible(), mbhit(), mbhitm(), mhim, monst\+::mhp, mreadmsg(), M\+U\+S\+E\+\_\+\+F\+I\+R\+E\+\_\+\+H\+O\+R\+N, M\+U\+S\+E\+\_\+\+F\+R\+O\+S\+T\+\_\+\+H\+O\+R\+N, M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+A\+C\+I\+D, M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+B\+L\+I\+N\+D\+N\+E\+S\+S, M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+C\+O\+N\+F\+U\+S\+I\+O\+N, M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+P\+A\+R\+A\+L\+Y\+S\+I\+S, M\+U\+S\+E\+\_\+\+P\+O\+T\+\_\+\+S\+L\+E\+E\+P\+I\+N\+G, M\+U\+S\+E\+\_\+\+S\+C\+R\+\_\+\+E\+A\+R\+T\+H, M\+U\+S\+E\+\_\+\+S\+C\+R\+\_\+\+F\+I\+R\+E, M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+C\+O\+L\+D, M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+D\+E\+A\+T\+H, M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+F\+I\+R\+E, M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+L\+I\+G\+H\+T\+N\+I\+N\+G, M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+M\+A\+G\+I\+C\+\_\+\+M\+I\+S\+S\+I\+L\+E, M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+S\+L\+E\+E\+P, M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+S\+T\+R\+I\+K\+I\+N\+G, M\+U\+S\+E\+\_\+\+W\+A\+N\+\_\+\+T\+E\+L\+E\+P\+O\+R\+T\+A\+T\+I\+O\+N, monst\+::mx, monst\+::my, mzapmsg(), newsym(), monst\+::nmon, noncorporeal, obj\+::oclass, musable\+::offensive, otmp, obj\+::otyp, obj\+::owt, passes\+\_\+walls, Passes\+\_\+walls, P\+O\+T\+I\+O\+N\+\_\+\+C\+L\+A\+S\+S, precheck(), obj\+::quan, resists\+\_\+cold, resists\+\_\+fire, rn1, R\+O\+C\+K, S\+C\+R\+O\+L\+L\+\_\+\+C\+L\+A\+S\+S, shieldeff(), flag\+::soundok, S\+P\+B\+O\+O\+K\+\_\+\+C\+L\+A\+S\+S, obj\+::spe, T\+R\+U\+E, u, uarmh, unsolid, you\+::ux, you\+::uy, flag\+::verbose, W\+\_\+\+A\+R\+M\+H, which\+\_\+armor(), and youmonst.


\begin{DoxyCode}
1268 \{
1269     \textcolor{keywordtype}{int} i;
1270     \textcolor{keyword}{struct }\hyperlink{structobj}{obj} *\hyperlink{mhitu_8c_a8cf94e09e1a72daf7050a2817ba70974}{otmp} = \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_a016d6af9ae60f010812a200105259397}{offensive};
1271     \textcolor{keywordtype}{boolean} oseen;
1272 
1273     \textcolor{comment}{/* offensive potions are not drunk, they're thrown */}
1274     \textcolor{keywordflow}{if} (otmp->\hyperlink{structobj_a716ba3ee00602dede9ea5c68c74d45bd}{oclass} != \hyperlink{objclass_8h_a05335e5ee18dfa33af1c40056fe8fab9}{POTION\_CLASS} && (i = \hyperlink{muse_8c_aafe9cef615d465f4a327c5f8bff918a4}{precheck}(mtmp, otmp)) != 0)
1275         \textcolor{keywordflow}{return} i;
1276     oseen = otmp && \hyperlink{display_8h_ad75e04a9624fe7ba0e1715ae3a3feb27}{canseemon}(mtmp);
1277 
1278     \textcolor{keywordflow}{switch}(\hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_af4b04fd9bf567b138538681c91d145e9}{has\_offense}) \{
1279     \textcolor{keywordflow}{case} \hyperlink{muse_8c_a74b936ceb6d08cd647c24b7a9855bbd2}{MUSE\_WAN\_DEATH}:
1280     \textcolor{keywordflow}{case} \hyperlink{muse_8c_a35caddb6a36b66c17683384e434a61cc}{MUSE\_WAN\_SLEEP}:
1281     \textcolor{keywordflow}{case} \hyperlink{muse_8c_a5e2f9b11f00feb26f70d53f2f525afcc}{MUSE\_WAN\_FIRE}:
1282     \textcolor{keywordflow}{case} \hyperlink{muse_8c_a2a7c82f0a9d3bbec9f905e7a61081360}{MUSE\_WAN\_COLD}:
1283     \textcolor{keywordflow}{case} \hyperlink{muse_8c_af30cdd1527f03e100e0a8863fbaf0e36}{MUSE\_WAN\_LIGHTNING}:
1284     \textcolor{keywordflow}{case} \hyperlink{muse_8c_a55b22ac9743ab572be04691e3085cacf}{MUSE\_WAN\_MAGIC\_MISSILE}:
1285         \hyperlink{muse_8c_a82b42772c7f62e2033417e1c184da73b}{mzapmsg}(mtmp, otmp, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE});
1286         otmp->\hyperlink{structobj_a14fc8dc59e9073bfbf1e170875a98448}{spe}--;
1287         \textcolor{keywordflow}{if} (oseen) \hyperlink{hack_8h_afbd3607e7cef2f888f4190d40d058011}{makeknown}(otmp->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp});
1288         \hyperlink{muse_8c_a70406684323454fb7fb33104cc05f904}{m\_using} = \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
1289         buzz((\textcolor{keywordtype}{int})(-30 - (otmp->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} - WAN\_MAGIC\_MISSILE)),
1290             (otmp->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp} == WAN\_MAGIC\_MISSILE) ? 2 : 6,
1291             mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my},
1292             sgn(mtmp->\hyperlink{structmonst_abbf7f123305ee87bce6247f2a168b63d}{mux}-mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}), sgn(mtmp->\hyperlink{structmonst_ab4c41d111e70e2301aebf3c12b1404e8}{muy}-mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my}));
1293         \hyperlink{muse_8c_a70406684323454fb7fb33104cc05f904}{m\_using} = \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
1294         \textcolor{keywordflow}{return} (mtmp->\hyperlink{structmonst_abe22e95755f1348a6a1c78252be5d76d}{mhp} <= 0) ? 1 : 2;
1295     \textcolor{keywordflow}{case} \hyperlink{muse_8c_afed852913471cdec8c3c09a5b74f3066}{MUSE\_FIRE\_HORN}:
1296     \textcolor{keywordflow}{case} \hyperlink{muse_8c_a93600e9dc2ed44547dd403312a7e4d39}{MUSE\_FROST\_HORN}:
1297         \textcolor{keywordflow}{if} (oseen) \{
1298             \hyperlink{hack_8h_afbd3607e7cef2f888f4190d40d058011}{makeknown}(otmp->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp});
1299             pline(\textcolor{stringliteral}{"%s plays a %s!"}, Monnam(mtmp), xname(otmp));
1300         \} \textcolor{keywordflow}{else}
1301             You\_hear(\textcolor{stringliteral}{"a horn being played."});
1302         otmp->\hyperlink{structobj_a14fc8dc59e9073bfbf1e170875a98448}{spe}--;
1303         \hyperlink{muse_8c_a70406684323454fb7fb33104cc05f904}{m\_using} = \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
1304         buzz(-30 - ((otmp->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp}==FROST\_HORN) ? \hyperlink{monattk_8h_ad91817bd861d8b17fdfc7069122ab67e}{AD\_COLD}-1 : \hyperlink{monattk_8h_a2435fa84586bb5a35cf46f7abd380c86}{AD\_FIRE}-1),
1305             \hyperlink{hack_8h_af107ca092682647f298989038020f9c8}{rn1}(6,6), mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my},
1306             sgn(mtmp->\hyperlink{structmonst_abbf7f123305ee87bce6247f2a168b63d}{mux}-mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}), sgn(mtmp->\hyperlink{structmonst_ab4c41d111e70e2301aebf3c12b1404e8}{muy}-mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my}));
1307         \hyperlink{muse_8c_a70406684323454fb7fb33104cc05f904}{m\_using} = \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
1308         \textcolor{keywordflow}{return} (mtmp->\hyperlink{structmonst_abe22e95755f1348a6a1c78252be5d76d}{mhp} <= 0) ? 1 : 2;
1309     \textcolor{keywordflow}{case} \hyperlink{muse_8c_aee63b5574e746304cab9cbb88e1de182}{MUSE\_WAN\_TELEPORTATION}:
1310     \textcolor{keywordflow}{case} \hyperlink{muse_8c_ae54e2ee0bcdc7628cd790b1b1277dfc7}{MUSE\_WAN\_STRIKING}:
1311         \hyperlink{muse_8c_ac4ce829c86a7bd25047f918fac166b1f}{zap\_oseen} = oseen;
1312         \hyperlink{muse_8c_a82b42772c7f62e2033417e1c184da73b}{mzapmsg}(mtmp, otmp, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE});
1313         otmp->\hyperlink{structobj_a14fc8dc59e9073bfbf1e170875a98448}{spe}--;
1314         \hyperlink{muse_8c_a70406684323454fb7fb33104cc05f904}{m\_using} = \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
1315         \hyperlink{muse_8c_a07ac33c7bc46a3586197be209cd7f80e}{mbhit}(mtmp,\hyperlink{hack_8h_af107ca092682647f298989038020f9c8}{rn1}(8,6),\hyperlink{muse_8c_a6834998d463056c47210a44ddb1ae849}{mbhitm},bhito,otmp);
1316         \hyperlink{muse_8c_a70406684323454fb7fb33104cc05f904}{m\_using} = \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
1317         \textcolor{keywordflow}{return} 2;
1318     \textcolor{keywordflow}{case} \hyperlink{muse_8c_ad15e1902de0142f63a7d7956359ba185}{MUSE\_SCR\_EARTH}:
1319         \{
1320         \textcolor{comment}{/* TODO: handle steeds */}
1321             \textcolor{keyword}{register} \textcolor{keywordtype}{int} x, y;
1322         \textcolor{comment}{/* don't use monster fields after killing it */}
1323         \textcolor{keywordtype}{boolean} confused = (mtmp->mconf ? \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE} : \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE});
1324         \textcolor{keywordtype}{int} mmx = mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mmy = mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my};
1325 
1326         \hyperlink{muse_8c_adc8ed439d179dfe537178b5523edf8e3}{mreadmsg}(mtmp, otmp);
1327             \textcolor{comment}{/* Identify the scroll */}
1328         \textcolor{keywordflow}{if} (\hyperlink{display_8h_a13f0a7cac1ceb73885a59b8598de1648}{canspotmon}(mtmp)) \{
1329             pline\_The(\textcolor{stringliteral}{"%s rumbles %s %s!"}, ceiling(mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my}),
1330                     otmp->blessed ? \textcolor{stringliteral}{"around"} : \textcolor{stringliteral}{"above"},
1331                 mon\_nam(mtmp));
1332             \textcolor{keywordflow}{if} (oseen) \hyperlink{hack_8h_afbd3607e7cef2f888f4190d40d058011}{makeknown}(otmp->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp});
1333         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{vision_8h_a857efc720262bc13a9e4b4bcbb079b5c}{cansee}(mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my})) \{
1334             pline\_The(\textcolor{stringliteral}{"%s rumbles in the middle of nowhere!"},
1335             ceiling(mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my}));
1336             \textcolor{keywordflow}{if} (mtmp->minvis)
1337             \hyperlink{display_8c_add21782d0389d23fbc5a470ef91d77e9}{map\_invisible}(mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my});
1338             \textcolor{keywordflow}{if} (oseen) \hyperlink{hack_8h_afbd3607e7cef2f888f4190d40d058011}{makeknown}(otmp->\hyperlink{structobj_a95eb282afebd3599996035e8aab71751}{otyp});
1339         \}
1340 
1341             \textcolor{comment}{/* Loop through the surrounding squares */}
1342             \textcolor{keywordflow}{for} (x = mmx-1; x <= mmx+1; x++) \{
1343                 \textcolor{keywordflow}{for} (y = mmy-1; y <= mmy+1; y++) \{
1344                     \textcolor{comment}{/* Is this a suitable spot? */}
1345                     \textcolor{keywordflow}{if} (isok(x, y) && !closed\_door(x, y) &&
1346                             !\hyperlink{rm_8h_a041df081d95aacdcbf31a3bbfdd36e0e}{IS\_ROCK}(\hyperlink{rm_8h_a8cd681fba60fdedbabfd71a0b4bbfc00}{levl}[x][y].typ) &&
1347                             !\hyperlink{rm_8h_a2ea3e8f6557012c9ed584a3cbd772b95}{IS\_AIR}(\hyperlink{rm_8h_a8cd681fba60fdedbabfd71a0b4bbfc00}{levl}[x][y].typ) &&
1348                             (((x == mmx) && (y == mmy)) ?
1349                                 !otmp->blessed : !otmp->cursed) &&
1350                     (x != \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux} || y != \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy})) \{
1351                 \textcolor{keyword}{register} \textcolor{keyword}{struct }\hyperlink{structobj}{obj} *otmp2;
1352                 \textcolor{keyword}{register} \textcolor{keyword}{struct }\hyperlink{structmonst}{monst} *mtmp2;
1353 
1354                         \textcolor{comment}{/* Make the object(s) */}
1355                         otmp2 = mksobj(confused ? \hyperlink{objects_8c_ac1b5af7f6cac1028cbf4a80a05496eea}{ROCK} : BOULDER,
1356                                 \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE});
1357                         \textcolor{keywordflow}{if} (!otmp2) \textcolor{keywordflow}{continue};  \textcolor{comment}{/* Shouldn't happen */}
1358                         otmp2->\hyperlink{structobj_ad08c0ed1a746fbb52377ecd7e4220578}{quan} = confused ? \hyperlink{hack_8h_af107ca092682647f298989038020f9c8}{rn1}(5,2) : 1;
1359                         otmp2->\hyperlink{structobj_a606b1d5b273b814049cc1b1991adfeec}{owt} = weight(otmp2);
1360 
1361                         \textcolor{comment}{/* Find the monster here (might be same as mtmp) */}
1362                         mtmp2 = \hyperlink{rm_8h_a4d8dddf3df3fad65478980d2c8cbf53c}{m\_at}(x, y);
1363                         \textcolor{keywordflow}{if} (mtmp2 && !\hyperlink{mondata_8h_ac3d4d869d4c7625a840b9731b591e90b}{amorphous}(mtmp2->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}) &&
1364                                 !\hyperlink{mondata_8h_a42b9f266cafddebd01c657d1e39ae72d}{passes\_walls}(mtmp2->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}) &&
1365                                 !\hyperlink{mondata_8h_a8ef85e65e7dda38e65d7e3801cde6d2e}{noncorporeal}(mtmp2->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}) &&
1366                                 !\hyperlink{mondata_8h_aa072852c97f59a8374d1595cda2ab700}{unsolid}(mtmp2->\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data})) \{
1367                 \textcolor{keyword}{struct }\hyperlink{structobj}{obj} *helmet = \hyperlink{worn_8c_a260cadb0c77a7032f8e53716072e6cd7}{which\_armor}(mtmp2, \hyperlink{prop_8h_a4e8958625f891ea2329369d5032d0d6d}{W\_ARMH});
1368                 \textcolor{keywordtype}{int} mdmg;
1369 
1370                 \textcolor{keywordflow}{if} (\hyperlink{vision_8h_a857efc720262bc13a9e4b4bcbb079b5c}{cansee}(mtmp2->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mtmp2->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my})) \{
1371                     pline(\textcolor{stringliteral}{"%s is hit by %s!"}, Monnam(mtmp2),
1372                                     doname(otmp2));
1373                     \textcolor{keywordflow}{if} (mtmp2->minvis && !\hyperlink{display_8h_a13f0a7cac1ceb73885a59b8598de1648}{canspotmon}(mtmp2))
1374                     \hyperlink{display_8c_add21782d0389d23fbc5a470ef91d77e9}{map\_invisible}(mtmp2->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mtmp2->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my});
1375                 \}
1376                             mdmg = dmgval(otmp2, mtmp2) * otmp2->\hyperlink{structobj_ad08c0ed1a746fbb52377ecd7e4220578}{quan};
1377                 \textcolor{keywordflow}{if} (helmet) \{
1378                     \textcolor{keywordflow}{if}(\hyperlink{objclass_8h_a5134e0e0a63a108b16f212e15a97fc1a}{is\_metallic}(helmet)) \{
1379                     \textcolor{keywordflow}{if} (\hyperlink{display_8h_a13f0a7cac1ceb73885a59b8598de1648}{canspotmon}(mtmp2))
1380                         pline(\textcolor{stringliteral}{"Fortunately, %s is wearing a hard helmet."}, mon\_nam(mtmp2));
1381                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_ae3871fd2268fbc24b89cece8eb352dfc}{soundok})
1382                         You\_hear(\textcolor{stringliteral}{"a clanging sound."});
1383                     \textcolor{keywordflow}{if} (mdmg > 2) mdmg = 2;
1384                     \} \textcolor{keywordflow}{else} \{
1385                     \textcolor{keywordflow}{if} (\hyperlink{display_8h_a13f0a7cac1ceb73885a59b8598de1648}{canspotmon}(mtmp2))
1386                         pline(\textcolor{stringliteral}{"%s's %s does not protect %s."},
1387                         Monnam(mtmp2), xname(helmet),
1388                         \hyperlink{you_8h_ad994e7a24679279ec24f0ef064a274d7}{mhim}(mtmp2));
1389                     \}
1390                 \}
1391                             mtmp2->\hyperlink{structmonst_abe22e95755f1348a6a1c78252be5d76d}{mhp} -= mdmg;
1392                             \textcolor{keywordflow}{if} (mtmp2->\hyperlink{structmonst_abe22e95755f1348a6a1c78252be5d76d}{mhp} <= 0) \{
1393                     pline(\textcolor{stringliteral}{"%s is killed."}, Monnam(mtmp2));
1394                                 mondied(mtmp2);
1395                 \}
1396                         \}
1397                         \textcolor{comment}{/* Drop the rock/boulder to the floor */}
1398                         \textcolor{keywordflow}{if} (!flooreffects(otmp2, x, y, \textcolor{stringliteral}{"fall"})) \{
1399                             place\_object(otmp2, x, y);
1400                             stackobj(otmp2);
1401                             \hyperlink{display_8c_a185c6ad6e4c5a6be26a371b9aa17c32e}{newsym}(x, y);  \textcolor{comment}{/* map the rock */}
1402                         \}
1403                     \}
1404             \}
1405         \}
1406         m\_useup(mtmp, otmp);
1407         \textcolor{comment}{/* Attack the player */}
1408         \textcolor{keywordflow}{if} (distmin(mmx, mmy, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux}, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy}) == 1 && !otmp->cursed) \{
1409             \textcolor{keywordtype}{int} dmg;
1410             \textcolor{keyword}{struct }\hyperlink{structobj}{obj} *otmp2;
1411 
1412             \textcolor{comment}{/* Okay, \_you\_ write this without repeating the code */}
1413             otmp2 = mksobj(confused ? \hyperlink{objects_8c_ac1b5af7f6cac1028cbf4a80a05496eea}{ROCK} : BOULDER,
1414                 \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}, \hyperlink{global_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE});
1415             \textcolor{keywordflow}{if} (!otmp2) \textcolor{keywordflow}{goto} xxx\_noobj;  \textcolor{comment}{/* Shouldn't happen */}
1416             otmp2->\hyperlink{structobj_ad08c0ed1a746fbb52377ecd7e4220578}{quan} = confused ? \hyperlink{hack_8h_af107ca092682647f298989038020f9c8}{rn1}(5,2) : 1;
1417             otmp2->\hyperlink{structobj_a606b1d5b273b814049cc1b1991adfeec}{owt} = weight(otmp2);
1418             \textcolor{keywordflow}{if} (!\hyperlink{mondata_8h_ac3d4d869d4c7625a840b9731b591e90b}{amorphous}(\hyperlink{decl_8h_ad15893dbcb60e2777ae0dfac9f840858}{youmonst}.\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}) &&
1419                 !\hyperlink{youprop_8h_a3999ccab66a0f60683b02b022bd96739}{Passes\_walls} &&
1420                 !\hyperlink{mondata_8h_a8ef85e65e7dda38e65d7e3801cde6d2e}{noncorporeal}(\hyperlink{decl_8h_ad15893dbcb60e2777ae0dfac9f840858}{youmonst}.\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data}) &&
1421                 !\hyperlink{mondata_8h_aa072852c97f59a8374d1595cda2ab700}{unsolid}(\hyperlink{decl_8h_ad15893dbcb60e2777ae0dfac9f840858}{youmonst}.\hyperlink{structmonst_a5c8369d63f2ae0ca4466258542edecbe}{data})) \{
1422             You(\textcolor{stringliteral}{"are hit by %s!"}, doname(otmp2));
1423             dmg = dmgval(otmp2, &\hyperlink{decl_8h_ad15893dbcb60e2777ae0dfac9f840858}{youmonst}) * otmp2->\hyperlink{structobj_ad08c0ed1a746fbb52377ecd7e4220578}{quan};
1424             \textcolor{keywordflow}{if} (\hyperlink{decl_8h_a5990ad491dff32418089ab967be227a5}{uarmh}) \{
1425                 \textcolor{keywordflow}{if}(\hyperlink{objclass_8h_a5134e0e0a63a108b16f212e15a97fc1a}{is\_metallic}(\hyperlink{decl_8h_a5990ad491dff32418089ab967be227a5}{uarmh})) \{
1426                 pline(\textcolor{stringliteral}{"Fortunately, you are wearing a hard helmet."});
1427                 \textcolor{keywordflow}{if} (dmg > 2) dmg = 2;
1428                 \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{flag_8h_a997133526e0c6bed44ebc0116a48b50a}{flags}.\hyperlink{structflag_afd7dfe45d35356d861ab5e9834231929}{verbose}) \{
1429                 Your(\textcolor{stringliteral}{"%s does not protect you."},
1430                         xname(\hyperlink{decl_8h_a5990ad491dff32418089ab967be227a5}{uarmh}));
1431                 \}
1432             \}
1433             \} \textcolor{keywordflow}{else}
1434             dmg = 0;
1435             \textcolor{keywordflow}{if} (!flooreffects(otmp2, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux}, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy}, \textcolor{stringliteral}{"fall"})) \{
1436             place\_object(otmp2, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux}, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy});
1437             stackobj(otmp2);
1438             \hyperlink{display_8c_a185c6ad6e4c5a6be26a371b9aa17c32e}{newsym}(\hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_ace2fd92f7f1a640e45775efe6e5f6cf7}{ux}, \hyperlink{decl_8h_a342ae6d3415cd569bcea437201040743}{u}.\hyperlink{structyou_a8571cf3a9cfc41c3f877d0f56cda11a9}{uy});
1439             \}
1440             \textcolor{keywordflow}{if} (dmg) losehp(dmg, \textcolor{stringliteral}{"scroll of earth"}, \hyperlink{decl_8h_af4e54910b730baa32b2dfbe4dd2942c1}{KILLED\_BY\_AN});
1441         \}
1442         xxx\_noobj:
1443 
1444         \textcolor{keywordflow}{return} (mtmp->\hyperlink{structmonst_abe22e95755f1348a6a1c78252be5d76d}{mhp} <= 0) ? 1 : 2;
1445         \}
1446 \textcolor{preprocessor}{#if 0}
1447     \textcolor{keywordflow}{case} \hyperlink{muse_8c_a368c98dc7e6a48b4d5807d2f4e166d5d}{MUSE\_SCR\_FIRE}:
1448           \{
1449         \textcolor{keywordtype}{boolean} vis = \hyperlink{vision_8h_a857efc720262bc13a9e4b4bcbb079b5c}{cansee}(mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my});
1450 
1451         \hyperlink{muse_8c_adc8ed439d179dfe537178b5523edf8e3}{mreadmsg}(mtmp, otmp);
1452         \textcolor{keywordflow}{if} (mtmp->mconf) \{
1453             \textcolor{keywordflow}{if} (vis)
1454                 pline(\textcolor{stringliteral}{"Oh, what a pretty fire!"});
1455         \} \textcolor{keywordflow}{else} \{
1456             \textcolor{keyword}{struct }\hyperlink{structmonst}{monst} *mtmp2;
1457             \textcolor{keywordtype}{int} num;
1458 
1459             \textcolor{keywordflow}{if} (vis)
1460                 pline\_The(\textcolor{stringliteral}{"scroll erupts in a tower of flame!"});
1461             \hyperlink{display_8c_ac89f44ae626d79f05953e503312a939d}{shieldeff}(mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my});
1462             pline(\textcolor{stringliteral}{"%s is uninjured."}, Monnam(mtmp));
1463             (void) destroy\_mitem(mtmp, \hyperlink{objclass_8h_ac23f261da0f9e2a4c6afccecfc167a96}{SCROLL\_CLASS}, \hyperlink{monattk_8h_a2435fa84586bb5a35cf46f7abd380c86}{AD\_FIRE});
1464             (void) destroy\_mitem(mtmp, \hyperlink{objclass_8h_aba5935524b39b0fdd148a3d466a5c580}{SPBOOK\_CLASS}, \hyperlink{monattk_8h_a2435fa84586bb5a35cf46f7abd380c86}{AD\_FIRE});
1465             (void) destroy\_mitem(mtmp, \hyperlink{objclass_8h_a05335e5ee18dfa33af1c40056fe8fab9}{POTION\_CLASS}, \hyperlink{monattk_8h_a2435fa84586bb5a35cf46f7abd380c86}{AD\_FIRE});
1466             num = (2*(\hyperlink{hack_8h_af107ca092682647f298989038020f9c8}{rn1}(3, 3) + 2 * bcsign(otmp)) + 1)/3;
1467             \textcolor{keywordflow}{if} (\hyperlink{youprop_8h_a37f314f0655e4ea92122aa8788a28e19}{Fire\_resistance})
1468                 You(\textcolor{stringliteral}{"are not harmed."});
1469             burn\_away\_slime();
1470             \textcolor{keywordflow}{if} (\hyperlink{youprop_8h_ab83d6a803a76f8d34cac586e546a4a2c}{Half\_spell\_damage}) num = (num+1) / 2;
1471             \textcolor{keywordflow}{else} losehp(num, \textcolor{stringliteral}{"scroll of fire"}, \hyperlink{decl_8h_af4e54910b730baa32b2dfbe4dd2942c1}{KILLED\_BY\_AN});
1472             \textcolor{keywordflow}{for}(mtmp2 = \hyperlink{rm_8h_a9b7eba07f916406d6d62f5f82d273e40}{fmon}; mtmp2; mtmp2 = mtmp2->\hyperlink{structmonst_a4c4bcdcf3c4ec4a85313ade9f9c27b72}{nmon}) \{
1473                \textcolor{keywordflow}{if}(\hyperlink{monst_8h_a87ebcb12436dc12747fed36e83561249}{DEADMONSTER}(mtmp2)) \textcolor{keywordflow}{continue};
1474                \textcolor{keywordflow}{if}(mtmp == mtmp2) \textcolor{keywordflow}{continue};
1475                \textcolor{keywordflow}{if}(dist2(mtmp2->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx},mtmp2->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my},mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx},mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my}) < 3)\{
1476                 \textcolor{keywordflow}{if} (\hyperlink{mondata_8h_a9cd1ee3ba3c1e0e78509b763ce6d38d1}{resists\_fire}(mtmp2)) \textcolor{keywordflow}{continue};
1477                 mtmp2->\hyperlink{structmonst_abe22e95755f1348a6a1c78252be5d76d}{mhp} -= num;
1478                 \textcolor{keywordflow}{if} (\hyperlink{mondata_8h_a889684d1afa503bfbfcd1a3e84035b92}{resists\_cold}(mtmp2))
1479                     mtmp2->\hyperlink{structmonst_abe22e95755f1348a6a1c78252be5d76d}{mhp} -= 3*num;
1480                 \textcolor{keywordflow}{if}(mtmp2->\hyperlink{structmonst_abe22e95755f1348a6a1c78252be5d76d}{mhp} < 1) \{
1481                     mondied(mtmp2);
1482                     \textcolor{keywordflow}{break};
1483                 \}
1484                 \}
1485             \}
1486         \}
1487         \textcolor{keywordflow}{return} 2;
1488           \}
1489 \textcolor{preprocessor}{#endif  }\textcolor{comment}{/* 0 */}\textcolor{preprocessor}{}
1490     \textcolor{keywordflow}{case} \hyperlink{muse_8c_a27b03b7ceea5b8226cadd34496353139}{MUSE\_POT\_PARALYSIS}:
1491     \textcolor{keywordflow}{case} \hyperlink{muse_8c_a3c3fd8d2297b5bb2c0a2752dcbe8674d}{MUSE\_POT\_BLINDNESS}:
1492     \textcolor{keywordflow}{case} \hyperlink{muse_8c_a6d1ffa992436d95af0d255efb356fc19}{MUSE\_POT\_CONFUSION}:
1493     \textcolor{keywordflow}{case} \hyperlink{muse_8c_a131d30d36bd756962ddba0a71dc1ee0e}{MUSE\_POT\_SLEEPING}:
1494     \textcolor{keywordflow}{case} \hyperlink{muse_8c_a4fa82597beb31f42c721811ca5abe33f}{MUSE\_POT\_ACID}:
1495         \textcolor{comment}{/* Note: this setting of dknown doesn't suffice.  A monster}
1496 \textcolor{comment}{         * which is out of sight might throw and it hits something \_in\_}
1497 \textcolor{comment}{         * sight, a problem not existing with wands because wand rays}
1498 \textcolor{comment}{         * are not objects.  Also set dknown in mthrowu.c.}
1499 \textcolor{comment}{         */}
1500         \textcolor{keywordflow}{if} (\hyperlink{vision_8h_a857efc720262bc13a9e4b4bcbb079b5c}{cansee}(mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my})) \{
1501             otmp->dknown = 1;
1502             pline(\textcolor{stringliteral}{"%s hurls %s!"}, Monnam(mtmp),
1503                         singular(otmp, doname));
1504         \}
1505         m\_throw(mtmp, mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my}, sgn(mtmp->\hyperlink{structmonst_abbf7f123305ee87bce6247f2a168b63d}{mux}-mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}),
1506             sgn(mtmp->\hyperlink{structmonst_ab4c41d111e70e2301aebf3c12b1404e8}{muy}-mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my}),
1507             distmin(mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx},mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my},mtmp->\hyperlink{structmonst_abbf7f123305ee87bce6247f2a168b63d}{mux},mtmp->\hyperlink{structmonst_ab4c41d111e70e2301aebf3c12b1404e8}{muy}), otmp);
1508         \textcolor{keywordflow}{return} 2;
1509     \textcolor{keywordflow}{case} 0: \textcolor{keywordflow}{return} 0; \textcolor{comment}{/* i.e. an exploded wand */}
1510     \textcolor{keywordflow}{default}: impossible(\textcolor{stringliteral}{"%s wanted to perform action %d?"}, Monnam(mtmp),
1511             \hyperlink{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{m}.\hyperlink{structmusable_af4b04fd9bf567b138538681c91d145e9}{has\_offense});
1512         \textcolor{keywordflow}{break};
1513     \}
1514     \textcolor{keywordflow}{return} 0;
1515 \}
\end{DoxyCode}
\hypertarget{muse_8c_a3ba72ca24dd7ce63ed8681310363505f}{\index{muse.\+c@{muse.\+c}!you\+\_\+aggravate@{you\+\_\+aggravate}}
\index{you\+\_\+aggravate@{you\+\_\+aggravate}!muse.\+c@{muse.\+c}}
\subsubsection[{you\+\_\+aggravate}]{\setlength{\rightskip}{0pt plus 5cm}{\bf S\+T\+A\+T\+I\+C\+\_\+\+O\+V\+L} void you\+\_\+aggravate (
\begin{DoxyParamCaption}
\item[{struct {\bf monst} $\ast$}]{mtmp}
\end{DoxyParamCaption}
)}}\label{muse_8c_a3ba72ca24dd7ce63ed8681310363505f}


Definition at line 1884 of file muse.\+c.



References canspotmon, cls(), display\+\_\+nhwindow, display\+\_\+self, docrt(), map\+\_\+invisible(), mon\+\_\+to\+\_\+glyph, multi, newsym(), nomovemsg, show\+\_\+glyph(), T\+R\+U\+E, and W\+I\+N\+\_\+\+M\+A\+P.



Referenced by use\+\_\+misc().


\begin{DoxyCode}
1886 \{
1887     pline(\textcolor{stringliteral}{"For some reason, %s presence is known to you."},
1888         s\_suffix(noit\_mon\_nam(mtmp)));
1889     \hyperlink{display_8c_a4826277cc150ddc0f4de4bd464a34909}{cls}();
1890 \textcolor{preprocessor}{#ifdef CLIPPING}
1891     cliparound(mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my});
1892 \textcolor{preprocessor}{#endif}
1893     \hyperlink{display_8c_a60d3cfb0df75b80c36125ce154da217f}{show\_glyph}(mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my}, \hyperlink{display_8h_a1fa83f592d6dcf87df43743338ece721}{mon\_to\_glyph}(mtmp));
1894     \hyperlink{display_8h_aa4ec7eb1f23db38f5e6bcbab8cb0c5e4}{display\_self}();
1895     You\_feel(\textcolor{stringliteral}{"aggravated at %s."}, noit\_mon\_nam(mtmp));
1896     \hyperlink{winprocs_8h_ac8e74d03fbb65b9f5651e63d79bebc60}{display\_nhwindow}(\hyperlink{decl_8h_afa1f7dd312c4c1b72afe3d2c8c2af691}{WIN\_MAP}, \hyperlink{global_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE});
1897     \hyperlink{display_8c_aad46d5a3dee537d403163916114fd463}{docrt}();
1898     \textcolor{keywordflow}{if} (unconscious()) \{
1899         \hyperlink{decl_8h_a498406921f71695627a7107240f3ed7a}{multi} = -1;
1900         \hyperlink{decl_8h_a03b001040702c25afae477b18b1692c3}{nomovemsg} =
1901               \textcolor{stringliteral}{"Aggravated, you are jolted into full consciousness."};
1902     \}
1903     \hyperlink{display_8c_a185c6ad6e4c5a6be26a371b9aa17c32e}{newsym}(mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx},mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my});
1904     \textcolor{keywordflow}{if} (!\hyperlink{display_8h_a13f0a7cac1ceb73885a59b8598de1648}{canspotmon}(mtmp))
1905         \hyperlink{display_8c_add21782d0389d23fbc5a470ef91d77e9}{map\_invisible}(mtmp->\hyperlink{structmonst_a9bc20171e986845daccff8aafd8b5194}{mx}, mtmp->\hyperlink{structmonst_a0b969d9b6af5b55393f6acfe508c6f08}{my});
1906 \}
\end{DoxyCode}


\subsection{Variable Documentation}
\hypertarget{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}{\index{muse.\+c@{muse.\+c}!m@{m}}
\index{m@{m}!muse.\+c@{muse.\+c}}
\subsubsection[{m}]{\setlength{\rightskip}{0pt plus 5cm}struct {\bf musable}  m\hspace{0.3cm}{\ttfamily [static]}}}\label{muse_8c_a3ff7db235f25673e1fe2b7b1d66d305d}


Referenced by dev\+\_\+name(), find\+\_\+defensive(), find\+\_\+misc(), find\+\_\+offensive(), mar\+\_\+set\+\_\+margin(), mkaltar(), mkfount(), mkgrave(), mktrap(), place\+\_\+branch(), precheck(), use\+\_\+defensive(), use\+\_\+misc(), use\+\_\+offensive(), and write\+\_\+monsters().

\hypertarget{muse_8c_a70406684323454fb7fb33104cc05f904}{\index{muse.\+c@{muse.\+c}!m\+\_\+using@{m\+\_\+using}}
\index{m\+\_\+using@{m\+\_\+using}!muse.\+c@{muse.\+c}}
\subsubsection[{m\+\_\+using}]{\setlength{\rightskip}{0pt plus 5cm}{\bf boolean} m\+\_\+using = {\bf F\+A\+L\+S\+E}}}\label{muse_8c_a70406684323454fb7fb33104cc05f904}


Definition at line 14 of file muse.\+c.



Referenced by use\+\_\+defensive(), and use\+\_\+offensive().

\hypertarget{muse_8c_a2e4cd9d4199a5c6f1ecf9985d4a58dfb}{\index{muse.\+c@{muse.\+c}!monstr@{monstr}}
\index{monstr@{monstr}!muse.\+c@{muse.\+c}}
\subsubsection[{monstr}]{\setlength{\rightskip}{0pt plus 5cm}{\bf const} int monstr\mbox{[}$\,$\mbox{]}}}\label{muse_8c_a2e4cd9d4199a5c6f1ecf9985d4a58dfb}


Referenced by find\+\_\+misc(), rnd\+\_\+defensive\+\_\+item(), rnd\+\_\+misc\+\_\+item(), rnd\+\_\+offensive\+\_\+item(), and searches\+\_\+for\+\_\+item().

\hypertarget{muse_8c_a2e3443c1d5259c106546bb48b093bd91}{\index{muse.\+c@{muse.\+c}!trapx@{trapx}}
\index{trapx@{trapx}!muse.\+c@{muse.\+c}}
\subsubsection[{trapx}]{\setlength{\rightskip}{0pt plus 5cm}int trapx\hspace{0.3cm}{\ttfamily [static]}}}\label{muse_8c_a2e3443c1d5259c106546bb48b093bd91}


Definition at line 44 of file muse.\+c.



Referenced by use\+\_\+defensive().

\hypertarget{muse_8c_a2d804e7f376ac6699b1a10920158cc21}{\index{muse.\+c@{muse.\+c}!trapy@{trapy}}
\index{trapy@{trapy}!muse.\+c@{muse.\+c}}
\subsubsection[{trapy}]{\setlength{\rightskip}{0pt plus 5cm}int trapy\hspace{0.3cm}{\ttfamily [static]}}}\label{muse_8c_a2d804e7f376ac6699b1a10920158cc21}


Definition at line 44 of file muse.\+c.



Referenced by use\+\_\+defensive().

\hypertarget{muse_8c_ac4ce829c86a7bd25047f918fac166b1f}{\index{muse.\+c@{muse.\+c}!zap\+\_\+oseen@{zap\+\_\+oseen}}
\index{zap\+\_\+oseen@{zap\+\_\+oseen}!muse.\+c@{muse.\+c}}
\subsubsection[{zap\+\_\+oseen}]{\setlength{\rightskip}{0pt plus 5cm}{\bf boolean} zap\+\_\+oseen\hspace{0.3cm}{\ttfamily [static]}}}\label{muse_8c_ac4ce829c86a7bd25047f918fac166b1f}


Definition at line 45 of file muse.\+c.



Referenced by mbhitm().

