<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>bothack: nethack/src/makemon.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">bothack
   &#160;<span id="projectnumber">0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_557a50db675c42016abe0c17f9936298.html">nethack</a></li><li class="navelem"><a class="el" href="dir_d8c2cd034c87ed46f7d2aa67083eedb4.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">makemon.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="makemon_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*  SCCS Id: @(#)makemon.c  3.4 2003/09/06  */</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">/* Copyright (c) Stichting Mathematisch Centrum, Amsterdam, 1985. */</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">/* NetHack may be freely redistributed.  See license for details. */</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="hack_8h.html">hack.h</a>&quot;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="epri_8h.html">epri.h</a>&quot;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="emin_8h.html">emin.h</a>&quot;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="edog_8h.html">edog.h</a>&quot;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#ifdef REINCARNATION</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &lt;ctype.h&gt;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div>
<div class="line"><a name="l00013"></a><span class="lineno"><a class="line" href="makemon_8c.html#adff06eafc2768a95a516465e03af9993">   13</a></span>&#160;<a class="code" href="hack_8h.html#a01b21691d813ceb087b72a5f9db412c6">STATIC_VAR</a> <a class="code" href="config1_8h.html#a9987bf629301f5fe76ddd96aa2717ca1">NEARDATA</a> <span class="keyword">struct </span><a class="code" href="structmonst.html">monst</a> <a class="code" href="makemon_8c.html#adff06eafc2768a95a516465e03af9993">zeromonst</a>;</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">/* this assumes that a human quest leader or nemesis is an archetype</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">   of the corresponding role; that isn&#39;t so for some roles (tourist</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">   for instance) but is for the priests and monks we use it for... */</span></div>
<div class="line"><a name="l00018"></a><span class="lineno"><a class="line" href="makemon_8c.html#a4937ff19b458d9ced69526cf2da453d3">   18</a></span>&#160;<span class="preprocessor">#define quest_mon_represents_role(mptr,role_pm) \</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">        (mptr-&gt;mlet == S_HUMAN &amp;&amp; Role_if(role_pm) &amp;&amp; \</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">          (mptr-&gt;msound == MS_LEADER || mptr-&gt;msound == MS_NEMESIS))</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#ifdef OVL0</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<a class="code" href="hack_8h.html#a0c2ce0eef98596c51b3a10e50a29dd5e">STATIC_DCL</a> <span class="keywordtype">boolean</span> <a class="code" href="makemon_8c.html#adc984f7199dd53a5283606c48e58d784">FDECL</a>(uncommon, (<span class="keywordtype">int</span>));</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<a class="code" href="hack_8h.html#a0c2ce0eef98596c51b3a10e50a29dd5e">STATIC_DCL</a> <span class="keywordtype">int</span> <a class="code" href="makemon_8c.html#adc984f7199dd53a5283606c48e58d784">FDECL</a>(align_shift, (<span class="keyword">struct</span> <a class="code" href="structpermonst.html">permonst</a> *));</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* OVL0 */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<a class="code" href="hack_8h.html#a0c2ce0eef98596c51b3a10e50a29dd5e">STATIC_DCL</a> <span class="keywordtype">boolean</span> <a class="code" href="makemon_8c.html#adc984f7199dd53a5283606c48e58d784">FDECL</a>(wrong_elem_type, (<span class="keyword">struct</span> <a class="code" href="structpermonst.html">permonst</a> *));</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<a class="code" href="hack_8h.html#a0c2ce0eef98596c51b3a10e50a29dd5e">STATIC_DCL</a> <span class="keywordtype">void</span> <a class="code" href="makemon_8c.html#adc984f7199dd53a5283606c48e58d784">FDECL</a>(m_initgrp,(<span class="keyword">struct</span> <a class="code" href="structmonst.html">monst</a> *,<span class="keywordtype">int</span>,<span class="keywordtype">int</span>,<span class="keywordtype">int</span>));</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<a class="code" href="hack_8h.html#a0c2ce0eef98596c51b3a10e50a29dd5e">STATIC_DCL</a> <span class="keywordtype">void</span> <a class="code" href="makemon_8c.html#adc984f7199dd53a5283606c48e58d784">FDECL</a>(m_initthrow,(<span class="keyword">struct</span> <a class="code" href="structmonst.html">monst</a> *,<span class="keywordtype">int</span>,<span class="keywordtype">int</span>));</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<a class="code" href="hack_8h.html#a0c2ce0eef98596c51b3a10e50a29dd5e">STATIC_DCL</a> <span class="keywordtype">void</span> <a class="code" href="makemon_8c.html#adc984f7199dd53a5283606c48e58d784">FDECL</a>(m_initweap,(<span class="keyword">struct</span> <a class="code" href="structmonst.html">monst</a> *));</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#ifdef OVL1</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<a class="code" href="hack_8h.html#a0c2ce0eef98596c51b3a10e50a29dd5e">STATIC_DCL</a> <span class="keywordtype">void</span> <a class="code" href="makemon_8c.html#adc984f7199dd53a5283606c48e58d784">FDECL</a>(m_initinv,(<span class="keyword">struct</span> <a class="code" href="structmonst.html">monst</a> *));</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* OVL1 */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="keyword">extern</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="makemon_8c.html#a2e4cd9d4199a5c6f1ecf9985d4a58dfb">monstr</a>[];</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div>
<div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="makemon_8c.html#aa16585e924b656b4dff53e9a45eacecd">   36</a></span>&#160;<span class="preprocessor">#define m_initsgrp(mtmp, x, y)  m_initgrp(mtmp, x, y, 3)</span></div>
<div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="makemon_8c.html#a7cac21c6b7b26418bdfdccbce659d52d">   37</a></span>&#160;<span class="preprocessor">#define m_initlgrp(mtmp, x, y)  m_initgrp(mtmp, x, y, 10)</span></div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="makemon_8c.html#a74e808df5f0f897252cddd1bb798a895">   38</a></span>&#160;<span class="preprocessor">#define toostrong(monindx, lev) (monstr[monindx] &gt; lev)</span></div>
<div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="makemon_8c.html#a9ac5533f071a772a4fccedc3b969ca4f">   39</a></span>&#160;<span class="preprocessor">#define tooweak(monindx, lev)   (monstr[monindx] &lt; lev)</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#ifdef OVLB</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="keywordtype">boolean</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;is_home_elemental(ptr)</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<a class="code" href="mkmaze_8c.html#a24ac627a7839caecddfc66f1d46033f0">register</a> struct <a class="code" href="structpermonst.html">permonst</a> *ptr;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;{</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="keywordflow">if</span> (ptr-&gt;mlet == <a class="code" href="monsym_8h.html#a94b7f79df356477345c1ed49f9f6a7cc">S_ELEMENTAL</a>)</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        <span class="keywordflow">switch</span> (monsndx(ptr)) {</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        <span class="keywordflow">case</span> PM_AIR_ELEMENTAL: <span class="keywordflow">return</span> <a class="code" href="dungeon_8h.html#a2d9a2dcb88ded033c3305c7798f81c24">Is_airlevel</a>(&amp;<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a89878490db5d54221f04b3fb44ebdaa2">uz</a>);</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        <span class="keywordflow">case</span> PM_FIRE_ELEMENTAL: <span class="keywordflow">return</span> <a class="code" href="dungeon_8h.html#ab8c9d0d5de964b295e56e2763f970ac8">Is_firelevel</a>(&amp;<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a89878490db5d54221f04b3fb44ebdaa2">uz</a>);</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        <span class="keywordflow">case</span> PM_EARTH_ELEMENTAL: <span class="keywordflow">return</span> <a class="code" href="dungeon_8h.html#aa4eaf851320108eeaacde06ca61fe041">Is_earthlevel</a>(&amp;<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a89878490db5d54221f04b3fb44ebdaa2">uz</a>);</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        <span class="keywordflow">case</span> PM_WATER_ELEMENTAL: <span class="keywordflow">return</span> <a class="code" href="dungeon_8h.html#a9fd7b21db47607a73332aa75ba8f4832">Is_waterlevel</a>(&amp;<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a89878490db5d54221f04b3fb44ebdaa2">uz</a>);</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        }</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;}</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment"> * Return true if the given monster cannot exist on this elemental level.</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<a class="code" href="hack_8h.html#a6584b0687fb4e0040a85bbcdaa3e0ee1">STATIC_OVL</a> <span class="keywordtype">boolean</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;wrong_elem_type(ptr)</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <a class="code" href="mkmaze_8c.html#a24ac627a7839caecddfc66f1d46033f0">register</a> struct <a class="code" href="structpermonst.html">permonst</a> *ptr;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;{</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keywordflow">if</span> (ptr-&gt;mlet == <a class="code" href="monsym_8h.html#a94b7f79df356477345c1ed49f9f6a7cc">S_ELEMENTAL</a>) {</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="keywordflow">return</span>((<span class="keywordtype">boolean</span>)(!is_home_elemental(ptr)));</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="dungeon_8h.html#aa4eaf851320108eeaacde06ca61fe041">Is_earthlevel</a>(&amp;<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a89878490db5d54221f04b3fb44ebdaa2">uz</a>)) {</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="comment">/* no restrictions? */</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="dungeon_8h.html#a9fd7b21db47607a73332aa75ba8f4832">Is_waterlevel</a>(&amp;<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a89878490db5d54221f04b3fb44ebdaa2">uz</a>)) {</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="comment">/* just monsters that can swim */</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="mondata_8h.html#ab8ffd447c2b8217b49848268e2b6493d">is_swimmer</a>(ptr)) <span class="keywordflow">return</span> <a class="code" href="global_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="dungeon_8h.html#ab8c9d0d5de964b295e56e2763f970ac8">Is_firelevel</a>(&amp;<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a89878490db5d54221f04b3fb44ebdaa2">uz</a>)) {</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="mondata_8h.html#a17cf7d4bd486ef41147798b0eee91b89">pm_resistance</a>(ptr,<a class="code" href="monflag_8h.html#aaa293df3b8df0c738d1b9f06135cc58d">MR_FIRE</a>)) <span class="keywordflow">return</span> <a class="code" href="global_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="dungeon_8h.html#a2d9a2dcb88ded033c3305c7798f81c24">Is_airlevel</a>(&amp;<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a89878490db5d54221f04b3fb44ebdaa2">uz</a>)) {</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keywordflow">if</span>(!(<a class="code" href="mondata_8h.html#a4407b2600bc3b320829630ed895960c0">is_flyer</a>(ptr) &amp;&amp; ptr-&gt;mlet != <a class="code" href="monsym_8h.html#aa1a6b3df8bb5ef4a5056c9dc8dec8f13">S_TRAPPER</a>) &amp;&amp; !<a class="code" href="mondata_8h.html#aa0333e705b2ebafe594ebcdbed885cce">is_floater</a>(ptr)</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;       &amp;&amp; !<a class="code" href="mondata_8h.html#ac3d4d869d4c7625a840b9731b591e90b">amorphous</a>(ptr) &amp;&amp; !<a class="code" href="mondata_8h.html#a8ef85e65e7dda38e65d7e3801cde6d2e">noncorporeal</a>(ptr) &amp;&amp; !<a class="code" href="mondata_8h.html#ad5ce5d0c9e98b8d48b288b01a961e8d0">is_whirly</a>(ptr))</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="global_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    }</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;}</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<a class="code" href="hack_8h.html#a6584b0687fb4e0040a85bbcdaa3e0ee1">STATIC_OVL</a> <span class="keywordtype">void</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;m_initgrp(mtmp, x, y, n)    <span class="comment">/* make a group just like mtmp */</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<a class="code" href="mkmaze_8c.html#a24ac627a7839caecddfc66f1d46033f0">register</a> struct <a class="code" href="structmonst.html">monst</a> *mtmp;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<a class="code" href="mkmaze_8c.html#a24ac627a7839caecddfc66f1d46033f0">register</a> <span class="keywordtype">int</span> x, y, n;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;{</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <a class="code" href="structcoord.html">coord</a> <a class="code" href="celib_8c.html#a378f364ce8f01015f43ce168ea8afd39">mm</a>;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keyword">register</span> <span class="keywordtype">int</span> cnt = rnd(n);</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keyword">struct </span><a class="code" href="structmonst.html">monst</a> *mon;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="preprocessor">#if defined(__GNUC__) &amp;&amp; (defined(HPUX) || defined(DGUX))</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="comment">/* There is an unresolved problem with several people finding that</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">     * the game hangs eating CPU; if interrupted and restored, the level</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">     * will be filled with monsters.  Of those reports giving system type,</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">     * there were two DG/UX and two HP-UX, all using gcc as the compiler.</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">     * hcroft@hpopb1.cern.ch, using gcc 2.6.3 on HP-UX, says that the</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">     * problem went away for him and another reporter-to-newsgroup</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">     * after adding this debugging code.  This has almost got to be a</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">     * compiler bug, but until somebody tracks it down and gets it fixed,</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">     * might as well go with the &quot;but it went away when I tried to find</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">     * it&quot; code.</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keywordtype">int</span> cnttmp,cntdiv;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    cnttmp = cnt;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="preprocessor"># ifdef DEBUG</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    pline(<span class="stringliteral">&quot;init group call x=%d,y=%d,n=%d,cnt=%d.&quot;</span>, x, y, n, cnt);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="preprocessor"># endif</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    cntdiv = ((<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a6c7263bb25b91825bf7ecaab470d771a">ulevel</a> &lt; 3) ? 4 : (<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a6c7263bb25b91825bf7ecaab470d771a">ulevel</a> &lt; 5) ? 2 : 1);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="comment">/* Tuning: cut down on swarming at low character levels [mrs] */</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    cnt /= (<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a6c7263bb25b91825bf7ecaab470d771a">ulevel</a> &lt; 3) ? 4 : (<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a6c7263bb25b91825bf7ecaab470d771a">ulevel</a> &lt; 5) ? 2 : 1;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="preprocessor">#if defined(__GNUC__) &amp;&amp; (defined(HPUX) || defined(DGUX))</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordflow">if</span> (cnt != (cnttmp/cntdiv)) {</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        pline(<span class="stringliteral">&quot;cnt=%d using %d, cnttmp=%d, cntdiv=%d&quot;</span>, cnt,</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            (<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a6c7263bb25b91825bf7ecaab470d771a">ulevel</a> &lt; 3) ? 4 : (<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a6c7263bb25b91825bf7ecaab470d771a">ulevel</a> &lt; 5) ? 2 : 1,</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            cnttmp, cntdiv);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    }</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordflow">if</span>(!cnt) cnt++;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="preprocessor">#if defined(__GNUC__) &amp;&amp; (defined(HPUX) || defined(DGUX))</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="keywordflow">if</span> (cnt &lt; 0) cnt = 1;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keywordflow">if</span> (cnt &gt; 10) cnt = 10;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    mm.<a class="code" href="structcoord.html#ac3e93ff628aa19d2888c5f6fa26f430d">x</a> = x;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    mm.<a class="code" href="structcoord.html#a2b099692d87f98e4844b615136ca37fb">y</a> = y;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordflow">while</span>(cnt--) {</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <span class="keywordflow">if</span> (peace_minded(mtmp-&gt;data)) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <span class="comment">/* Don&#39;t create groups of peaceful monsters since they&#39;ll get</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">         * in our way.  If the monster has a percentage chance so some</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">         * are peaceful and some are not, the result will just be a</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">         * smaller group.</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="teleport_8c.html#a61ffc1bbdf6259d46ae8abd0dce3ce31">enexto</a>(&amp;mm, mm.<a class="code" href="structcoord.html#ac3e93ff628aa19d2888c5f6fa26f430d">x</a>, mm.<a class="code" href="structcoord.html#a2b099692d87f98e4844b615136ca37fb">y</a>, mtmp-&gt;data)) {</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;            mon = makemon(mtmp-&gt;data, mm.<a class="code" href="structcoord.html#ac3e93ff628aa19d2888c5f6fa26f430d">x</a>, mm.<a class="code" href="structcoord.html#a2b099692d87f98e4844b615136ca37fb">y</a>, <a class="code" href="hack_8h.html#ae449582f467baa0da531a6ea116a18f2">NO_MM_FLAGS</a>);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;            mon-&gt;mpeaceful = <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;            mon-&gt;mavenge = 0;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            set_malign(mon);</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            <span class="comment">/* Undo the second peace_minded() check in makemon(); if the</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">             * monster turned out to be peaceful the first time we</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">             * didn&#39;t create it at all; we don&#39;t want a second check.</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">             */</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        }</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    }</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;}</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<a class="code" href="hack_8h.html#a6584b0687fb4e0040a85bbcdaa3e0ee1">STATIC_OVL</a></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;m_initthrow(mtmp,otyp,oquan)</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;struct <a class="code" href="structmonst.html">monst</a> *mtmp;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="keywordtype">int</span> otyp,oquan;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;{</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keyword">register</span> <span class="keyword">struct </span><a class="code" href="structobj.html">obj</a> *<a class="code" href="mhitu_8c.html#a8cf94e09e1a72daf7050a2817ba70974">otmp</a>;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    otmp = mksobj(otyp, <a class="code" href="global_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>, <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    otmp-&gt;<a class="code" href="structobj.html#ad08c0ed1a746fbb52377ecd7e4220578">quan</a> = (long) <a class="code" href="hack_8h.html#af107ca092682647f298989038020f9c8">rn1</a>(oquan, 3);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    otmp-&gt;<a class="code" href="structobj.html#a606b1d5b273b814049cc1b1991adfeec">owt</a> = weight(otmp);</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordflow">if</span> (otyp == ORCISH_ARROW) otmp-&gt;opoisoned = <a class="code" href="global_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    (void) mpickobj(mtmp, otmp);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;}</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* OVLB */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="preprocessor">#ifdef OVL2</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<a class="code" href="hack_8h.html#a6584b0687fb4e0040a85bbcdaa3e0ee1">STATIC_OVL</a> <span class="keywordtype">void</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;m_initweap(mtmp)</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<a class="code" href="mkmaze_8c.html#a24ac627a7839caecddfc66f1d46033f0">register</a> struct <a class="code" href="structmonst.html">monst</a> *mtmp;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;{</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keyword">register</span> <span class="keyword">struct </span><a class="code" href="structpermonst.html">permonst</a> *ptr = mtmp-&gt;data;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keyword">register</span> <span class="keywordtype">int</span> mm = monsndx(ptr);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keyword">struct </span><a class="code" href="structobj.html">obj</a> *<a class="code" href="mhitu_8c.html#a8cf94e09e1a72daf7050a2817ba70974">otmp</a>;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="preprocessor">#ifdef REINCARNATION</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="dungeon_8h.html#a2732117523c8540638daf4315dda16b9">Is_rogue_level</a>(&amp;<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a89878490db5d54221f04b3fb44ebdaa2">uz</a>)) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment"> *  first a few special cases:</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment"> *      giants get a boulder to throw sometimes.</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment"> *      ettins get clubs</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment"> *      kobolds get darts to throw</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment"> *      centaurs get some sort of bow &amp; arrows or bolts</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment"> *      soldiers get all sorts of things.</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment"> *      kops get clubs &amp; cream pies.</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keywordflow">switch</span> (ptr-&gt;<a class="code" href="structpermonst.html#ab402dbf1bed9d0e595a2b3da6558da92">mlet</a>) {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="monsym_8h.html#a1e90d90b99d56ba8c44f924e951a6602">S_GIANT</a>:</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <span class="keywordflow">if</span> (rn2(2)) (void)mongets(mtmp, (mm != PM_ETTIN) ?</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                    BOULDER : CLUB);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="monsym_8h.html#afd17d6f6e4ac25a9ac0086ebf27b0469">S_HUMAN</a>:</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="mondata_8h.html#a6d73bc7ae8f744da17f71450f865aacc">is_mercenary</a>(ptr)) {</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            <span class="keywordtype">int</span> w1 = 0, w2 = 0;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            <span class="keywordflow">switch</span> (mm) {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            <span class="keywordflow">case</span> PM_WATCHMAN:</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            <span class="keywordflow">case</span> PM_SOLDIER:</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;              <span class="keywordflow">if</span> (!rn2(3)) {</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                  w1 = <a class="code" href="hack_8h.html#af107ca092682647f298989038020f9c8">rn1</a>(BEC_DE_CORBIN - PARTISAN + 1, PARTISAN);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                  w2 = rn2(2) ? DAGGER : KNIFE;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;              } <span class="keywordflow">else</span> w1 = rn2(2) ? SPEAR : SHORT_SWORD;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            <span class="keywordflow">case</span> PM_SERGEANT:</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;              w1 = rn2(2) ? FLAIL : MACE;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;            <span class="keywordflow">case</span> PM_LIEUTENANT:</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;              w1 = rn2(2) ? BROADSWORD : LONG_SWORD;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            <span class="keywordflow">case</span> PM_CAPTAIN:</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            <span class="keywordflow">case</span> PM_WATCH_CAPTAIN:</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;              w1 = rn2(2) ? LONG_SWORD : SILVER_SABER;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;              <span class="keywordflow">if</span> (!rn2(4)) w1 = DAGGER;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;              <span class="keywordflow">if</span> (!rn2(7)) w2 = SPEAR;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            }</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            <span class="keywordflow">if</span> (w1) (void)mongets(mtmp, w1);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            <span class="keywordflow">if</span> (!w2 &amp;&amp; w1 != DAGGER &amp;&amp; !rn2(4)) w2 = KNIFE;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            <span class="keywordflow">if</span> (w2) (void)mongets(mtmp, w2);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="mondata_8h.html#a34b30264e47f5967d450cc2c050951ce">is_elf</a>(ptr)) {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            <span class="keywordflow">if</span> (rn2(2))</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            (<span class="keywordtype">void</span>) mongets(mtmp,</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                   rn2(2) ? ELVEN_MITHRIL_COAT : ELVEN_CLOAK);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;            <span class="keywordflow">if</span> (rn2(2)) (void)mongets(mtmp, ELVEN_LEATHER_HELM);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!rn2(4)) (<span class="keywordtype">void</span>)mongets(mtmp, ELVEN_BOOTS);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;            <span class="keywordflow">if</span> (rn2(2)) (void)mongets(mtmp, ELVEN_DAGGER);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            <span class="keywordflow">switch</span> (rn2(3)) {</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            <span class="keywordflow">case</span> 0:</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                <span class="keywordflow">if</span> (!rn2(4)) (<span class="keywordtype">void</span>)mongets(mtmp, ELVEN_SHIELD);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                <span class="keywordflow">if</span> (rn2(3)) (void)mongets(mtmp, ELVEN_SHORT_SWORD);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                (void)mongets(mtmp, ELVEN_BOW);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                m_initthrow(mtmp, ELVEN_ARROW, 12);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                (void)mongets(mtmp, ELVEN_BROADSWORD);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                <span class="keywordflow">if</span> (rn2(2)) (<span class="keywordtype">void</span>)mongets(mtmp, ELVEN_SHIELD);</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                <span class="keywordflow">if</span> (rn2(2)) {</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                (void)mongets(mtmp, ELVEN_SPEAR);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                (void)mongets(mtmp, ELVEN_SHIELD);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                }</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            }</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            <span class="keywordflow">if</span> (mm == PM_ELVENKING) {</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            <span class="keywordflow">if</span> (rn2(3) || (<a class="code" href="decl_8h.html#abb694ef5acb9945ca69679a8360df51a">in_mklev</a> &amp;&amp; <a class="code" href="dungeon_8h.html#aa4eaf851320108eeaacde06ca61fe041">Is_earthlevel</a>(&amp;<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a89878490db5d54221f04b3fb44ebdaa2">uz</a>)))</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                (void)mongets(mtmp, PICK_AXE);</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            <span class="keywordflow">if</span> (!rn2(50)) (<span class="keywordtype">void</span>)mongets(mtmp, CRYSTAL_BALL);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            }</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ptr-&gt;<a class="code" href="structpermonst.html#a8f9cc062b40fa92ce38e504987326190">msound</a> == <a class="code" href="monflag_8h.html#a6e1ee38e14cf83854c7413f0cdd83e7e">MS_PRIEST</a> ||</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            <a class="code" href="makemon_8c.html#a4937ff19b458d9ced69526cf2da453d3">quest_mon_represents_role</a>(ptr,PM_PRIEST)) {</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            otmp = mksobj(MACE, <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>, <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;            <span class="keywordflow">if</span>(otmp) {</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            otmp-&gt;<a class="code" href="structobj.html#a14fc8dc59e9073bfbf1e170875a98448">spe</a> = rnd(3);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;            <span class="keywordflow">if</span>(!rn2(2)) curse(otmp);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            (void) mpickobj(mtmp, otmp);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            }</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        }</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="monsym_8h.html#a090fde972c0c8b83a994ae5472ff0852">S_ANGEL</a>:</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        {</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            <span class="keywordtype">int</span> spe2;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            <span class="comment">/* create minion stuff; can&#39;t use mongets */</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;            otmp = mksobj(LONG_SWORD, <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>, <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            <span class="comment">/* maybe make it special */</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            <span class="keywordflow">if</span> (!rn2(20) || <a class="code" href="mondata_8h.html#afeb3370436f9f0f0543e3546a2782b3d">is_lord</a>(ptr))</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            otmp = oname(otmp, artiname(</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                rn2(2) ? ART_DEMONBANE : ART_SUNSWORD));</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            bless(otmp);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            otmp-&gt;oerodeproof = <a class="code" href="global_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            spe2 = rn2(4);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            otmp-&gt;<a class="code" href="structobj.html#a14fc8dc59e9073bfbf1e170875a98448">spe</a> = <a class="code" href="hack_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>(otmp-&gt;<a class="code" href="structobj.html#a14fc8dc59e9073bfbf1e170875a98448">spe</a>, spe2);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            (void) mpickobj(mtmp, otmp);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;            otmp = mksobj(!rn2(4) || <a class="code" href="mondata_8h.html#afeb3370436f9f0f0543e3546a2782b3d">is_lord</a>(ptr) ?</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                  SHIELD_OF_REFLECTION : LARGE_SHIELD,</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                  <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>, <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            otmp-&gt;cursed = <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            otmp-&gt;oerodeproof = <a class="code" href="global_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            otmp-&gt;<a class="code" href="structobj.html#a14fc8dc59e9073bfbf1e170875a98448">spe</a> = 0;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            (void) mpickobj(mtmp, otmp);</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        }</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="monsym_8h.html#aff2dfaf3b780fb3c9644530e754ab088">S_HUMANOID</a>:</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <span class="keywordflow">if</span> (mm == PM_HOBBIT) {</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            <span class="keywordflow">switch</span> (rn2(3)) {</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;            <span class="keywordflow">case</span> 0:</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                (void)mongets(mtmp, DAGGER);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                (void)mongets(mtmp, ELVEN_DAGGER);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;            <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                (void)mongets(mtmp, SLING);</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;              }</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            <span class="keywordflow">if</span> (!rn2(10)) (<span class="keywordtype">void</span>)mongets(mtmp, ELVEN_MITHRIL_COAT);</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            <span class="keywordflow">if</span> (!rn2(10)) (void)mongets(mtmp, DWARVISH_CLOAK);</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="mondata_8h.html#ac52963ce02f1942e6260de79578fbed2">is_dwarf</a>(ptr)) {</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;            <span class="keywordflow">if</span> (rn2(7)) (<span class="keywordtype">void</span>)mongets(mtmp, DWARVISH_CLOAK);</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;            <span class="keywordflow">if</span> (rn2(7)) (void)mongets(mtmp, IRON_SHOES);</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;            <span class="keywordflow">if</span> (!rn2(4)) {</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;            (void)mongets(mtmp, DWARVISH_SHORT_SWORD);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            <span class="comment">/* note: you can&#39;t use a mattock with a shield */</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            <span class="keywordflow">if</span> (rn2(2)) (<span class="keywordtype">void</span>)mongets(mtmp, DWARVISH_MATTOCK);</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                (void)mongets(mtmp, AXE);</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                (void)mongets(mtmp, DWARVISH_ROUNDSHIELD);</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            }</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            (void)mongets(mtmp, DWARVISH_IRON_HELM);</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            <span class="keywordflow">if</span> (!rn2(3))</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                (<span class="keywordtype">void</span>)mongets(mtmp, DWARVISH_MITHRIL_COAT);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            (void)mongets(mtmp, !rn2(3) ? PICK_AXE : DAGGER);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            }</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        }</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="preprocessor"># ifdef KOPS</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="monsym_8h.html#ae786a562c666489455f6663f735a5f77">S_KOP</a>:     <span class="comment">/* create Keystone Kops with cream pies to</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment">                 * throw. As suggested by KAA.     [MRS]</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment">                 */</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        <span class="keywordflow">if</span> (!rn2(4)) m_initthrow(mtmp, CREAM_PIE, 2);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <span class="keywordflow">if</span> (!rn2(3)) (<span class="keywordtype">void</span>)mongets(mtmp,(rn2(2)) ? CLUB : RUBBER_HOSE);</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="preprocessor"># endif</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="monsym_8h.html#a2f5e3288d9c62ffe94eae6e003a5ebf8">S_ORC</a>:</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        <span class="keywordflow">if</span>(rn2(2)) (void)mongets(mtmp, ORCISH_HELM);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        <span class="keywordflow">switch</span> (mm != PM_ORC_CAPTAIN ? mm :</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;            rn2(2) ? PM_MORDOR_ORC : PM_URUK_HAI) {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;            <span class="keywordflow">case</span> PM_MORDOR_ORC:</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            <span class="keywordflow">if</span>(!rn2(3)) (<span class="keywordtype">void</span>)mongets(mtmp, SCIMITAR);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            <span class="keywordflow">if</span>(!rn2(3)) (void)mongets(mtmp, ORCISH_SHIELD);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            <span class="keywordflow">if</span>(!rn2(3)) (<span class="keywordtype">void</span>)mongets(mtmp, KNIFE);</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;            <span class="keywordflow">if</span>(!rn2(3)) (void)mongets(mtmp, ORCISH_CHAIN_MAIL);</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;            <span class="keywordflow">case</span> PM_URUK_HAI:</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;            <span class="keywordflow">if</span>(!rn2(3)) (<span class="keywordtype">void</span>)mongets(mtmp, ORCISH_CLOAK);</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;            <span class="keywordflow">if</span>(!rn2(3)) (void)mongets(mtmp, ORCISH_SHORT_SWORD);</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            <span class="keywordflow">if</span>(!rn2(3)) (<span class="keywordtype">void</span>)mongets(mtmp, IRON_SHOES);</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;            <span class="keywordflow">if</span>(!rn2(3)) {</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                (void)mongets(mtmp, ORCISH_BOW);</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                m_initthrow(mtmp, ORCISH_ARROW, 12);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;            }</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;            <span class="keywordflow">if</span>(!rn2(3)) (void)mongets(mtmp, URUK_HAI_SHIELD);</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;            <span class="keywordflow">if</span> (mm != PM_ORC_SHAMAN &amp;&amp; rn2(2))</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;              (<span class="keywordtype">void</span>)mongets(mtmp, (mm == PM_GOBLIN || rn2(2) == 0)</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                           ? ORCISH_DAGGER : SCIMITAR);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        }</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="monsym_8h.html#ab287608148a3be298ed3c928e7f76f51">S_OGRE</a>:</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        <span class="keywordflow">if</span> (!rn2(mm == PM_OGRE_KING ? 3 : mm == PM_OGRE_LORD ? 6 : 12))</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            (void) mongets(mtmp, BATTLE_AXE);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;            (<span class="keywordtype">void</span>) mongets(mtmp, CLUB);</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="monsym_8h.html#adfd7d880ae86198cb104883f1644ebcc">S_TROLL</a>:</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        <span class="keywordflow">if</span> (!rn2(2)) <span class="keywordflow">switch</span> (rn2(4)) {</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            <span class="keywordflow">case</span> 0: (void)mongets(mtmp, RANSEUR); <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            <span class="keywordflow">case</span> 1: (void)mongets(mtmp, PARTISAN); <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            <span class="keywordflow">case</span> 2: (void)mongets(mtmp, GLAIVE); <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            <span class="keywordflow">case</span> 3: (void)mongets(mtmp, SPETUM); <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        }</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="monsym_8h.html#ac270eaa90b0025e153c630d7a3ec2705">S_KOBOLD</a>:</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        <span class="keywordflow">if</span> (!rn2(4)) m_initthrow(mtmp, DART, 12);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="monsym_8h.html#a092e4d08a56151a274ba13e17f9aec39">S_CENTAUR</a>:</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        <span class="keywordflow">if</span> (rn2(2)) {</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;            <span class="keywordflow">if</span>(ptr == &amp;<a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[PM_FOREST_CENTAUR]) {</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            (void)mongets(mtmp, <a class="code" href="objects_8c.html#a3e459f83894a8f768a64c69247fd686f">BOW</a>);</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;            m_initthrow(mtmp, ARROW, 12);</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            (void)mongets(mtmp, CROSSBOW);</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;            m_initthrow(mtmp, CROSSBOW_BOLT, 12);</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;            }</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        }</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="monsym_8h.html#a923120ddc98c245500abf2711e27a4a7">S_WRAITH</a>:</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        (void)mongets(mtmp, KNIFE);</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        (void)mongets(mtmp, LONG_SWORD);</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="monsym_8h.html#ab0712e0f0d926039e2a9df8cdf27aab9">S_ZOMBIE</a>:</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        <span class="keywordflow">if</span> (!rn2(4)) (<span class="keywordtype">void</span>)mongets(mtmp, LEATHER_ARMOR);</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        <span class="keywordflow">if</span> (!rn2(4))</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            (void)mongets(mtmp, (rn2(3) ? KNIFE : SHORT_SWORD));</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="monsym_8h.html#a6283a16b3c897902a0dbaed3d06403c2">S_LIZARD</a>:</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        <span class="keywordflow">if</span> (mm == PM_SALAMANDER)</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            (void)mongets(mtmp, (rn2(7) ? SPEAR : rn2(3) ?</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                         TRIDENT : STILETTO));</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="monsym_8h.html#a6428ef16323852a393830dbac4bc72ee">S_DEMON</a>:</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        <span class="keywordflow">switch</span> (mm) {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;            <span class="keywordflow">case</span> PM_BALROG:</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;            (void)mongets(mtmp, BULLWHIP);</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            (void)mongets(mtmp, BROADSWORD);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            <span class="keywordflow">case</span> PM_ORCUS:</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;            (void)mongets(mtmp, WAN_DEATH); <span class="comment">/* the Wand of Orcus */</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;            <span class="keywordflow">case</span> PM_HORNED_DEVIL:</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;            (void)mongets(mtmp, rn2(4) ? TRIDENT : BULLWHIP);</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;            <span class="keywordflow">case</span> PM_DISPATER:</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;            (void)mongets(mtmp, WAN_STRIKING);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            <span class="keywordflow">case</span> PM_YEENOGHU:</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            (void)mongets(mtmp, FLAIL);</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        }</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        <span class="comment">/* prevent djinnis and mail daemons from leaving objects when</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="comment">         * they vanish</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="mondata_8h.html#a9f5d39edf86a6137fd76d419c7914af4">is_demon</a>(ptr)) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        <span class="comment">/* fall thru */</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="comment"> *  Now the general case, Some chance of getting some type</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment"> *  of weapon for &quot;normal&quot; monsters.  Certain special types</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment"> *  of monsters will get a bonus chance or different selections.</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;          {</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        <span class="keywordtype">int</span> bias;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        bias = <a class="code" href="mondata_8h.html#afeb3370436f9f0f0543e3546a2782b3d">is_lord</a>(ptr) + <a class="code" href="mondata_8h.html#a88f89429a4a8ec2fdaa354be5bc612c1">is_prince</a>(ptr) * 2 + <a class="code" href="mondata_8h.html#a43a56f8da67bffad8570befaef4cb528">extra_nasty</a>(ptr);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        <span class="keywordflow">switch</span>(rnd(14 - (2 * bias))) {</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;            <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="mondata_8h.html#ac9771120ab9458112bfd7b8099f978ba">strongmonst</a>(ptr)) (void) mongets(mtmp, BATTLE_AXE);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;            <span class="keywordflow">else</span> m_initthrow(mtmp, DART, 12);</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="mondata_8h.html#ac9771120ab9458112bfd7b8099f978ba">strongmonst</a>(ptr))</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                (void) mongets(mtmp, TWO_HANDED_SWORD);</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;            <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                (void) mongets(mtmp, CROSSBOW);</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                m_initthrow(mtmp, CROSSBOW_BOLT, 12);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;            }</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;            <span class="keywordflow">case</span> 3:</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;            (void) mongets(mtmp, <a class="code" href="objects_8c.html#a3e459f83894a8f768a64c69247fd686f">BOW</a>);</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;            m_initthrow(mtmp, ARROW, 12);</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;            <span class="keywordflow">case</span> 4:</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="mondata_8h.html#ac9771120ab9458112bfd7b8099f978ba">strongmonst</a>(ptr)) (void) mongets(mtmp, LONG_SWORD);</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;            <span class="keywordflow">else</span> m_initthrow(mtmp, DAGGER, 3);</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;            <span class="keywordflow">case</span> 5:</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="mondata_8h.html#ac9771120ab9458112bfd7b8099f978ba">strongmonst</a>(ptr))</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                (void) mongets(mtmp, LUCERN_HAMMER);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;            <span class="keywordflow">else</span> (<span class="keywordtype">void</span>) mongets(mtmp, AKLYS);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;            <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        }</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;          }</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    }</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="keywordflow">if</span> ((<span class="keywordtype">int</span>) mtmp-&gt;m_lev &gt; rn2(75))</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        (void) mongets(mtmp, <a class="code" href="muse_8c.html#a3f44daad6fea8db7a3823a5ad9297cd7">rnd_offensive_item</a>(mtmp));</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;}</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* OVL2 */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="preprocessor">#ifdef OVL1</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="preprocessor">#ifdef GOLDOBJ</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment"> *   Makes up money for monster&#39;s inventory.</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment"> *   This will change with silver &amp; copper coins</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="keywordtype">void</span> </div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;mkmonmoney(mtmp, amount)</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;struct <a class="code" href="structmonst.html">monst</a> *mtmp;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="keywordtype">long</span> amount;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;{</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <span class="keyword">struct </span><a class="code" href="structobj.html">obj</a> *<a class="code" href="structgold.html">gold</a> = mksobj(GOLD_PIECE, <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>, <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    gold-&gt;<a class="code" href="structobj.html#ad08c0ed1a746fbb52377ecd7e4220578">quan</a> = amount;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    add_to_minv(mtmp, gold);</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;}</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<a class="code" href="hack_8h.html#a6584b0687fb4e0040a85bbcdaa3e0ee1">STATIC_OVL</a> <span class="keywordtype">void</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;m_initinv(mtmp)</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<a class="code" href="mkmaze_8c.html#a24ac627a7839caecddfc66f1d46033f0">register</a> struct <a class="code" href="structmonst.html">monst</a>   *mtmp;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;{</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="keyword">register</span> <span class="keywordtype">int</span> cnt;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="keyword">register</span> <span class="keyword">struct </span><a class="code" href="structobj.html">obj</a> *<a class="code" href="mhitu_8c.html#a8cf94e09e1a72daf7050a2817ba70974">otmp</a>;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="keyword">register</span> <span class="keyword">struct </span><a class="code" href="structpermonst.html">permonst</a> *ptr = mtmp-&gt;data;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;<span class="preprocessor">#ifdef REINCARNATION</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="dungeon_8h.html#a2732117523c8540638daf4315dda16b9">Is_rogue_level</a>(&amp;<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a89878490db5d54221f04b3fb44ebdaa2">uz</a>)) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="comment"> *  Soldiers get armour &amp; rations - armour approximates their ac.</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="comment"> *  Nymphs may get mirror or potion of object detection.</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="keywordflow">switch</span>(ptr-&gt;<a class="code" href="structpermonst.html#ab402dbf1bed9d0e595a2b3da6558da92">mlet</a>) {</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="monsym_8h.html#afd17d6f6e4ac25a9ac0086ebf27b0469">S_HUMAN</a>:</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="mondata_8h.html#a6d73bc7ae8f744da17f71450f865aacc">is_mercenary</a>(ptr)) {</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;            <span class="keyword">register</span> <span class="keywordtype">int</span> mac;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;            <span class="keywordflow">switch</span>(monsndx(ptr)) {</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;            <span class="keywordflow">case</span> PM_GUARD: mac = -1; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;            <span class="keywordflow">case</span> PM_SOLDIER: mac = 3; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;            <span class="keywordflow">case</span> PM_SERGEANT: mac = 0; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;            <span class="keywordflow">case</span> PM_LIEUTENANT: mac = -2; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;            <span class="keywordflow">case</span> PM_CAPTAIN: mac = -3; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;            <span class="keywordflow">case</span> PM_WATCHMAN: mac = 3; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            <span class="keywordflow">case</span> PM_WATCH_CAPTAIN: mac = -2; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;            <span class="keywordflow">default</span>: impossible(<span class="stringliteral">&quot;odd mercenary %d?&quot;</span>, monsndx(ptr));</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                mac = 0;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;            }</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;            <span class="keywordflow">if</span> (mac &lt; -1 &amp;&amp; rn2(5))</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;            mac += 7 + mongets(mtmp, (rn2(5)) ?</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                       PLATE_MAIL : CRYSTAL_PLATE_MAIL);</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mac &lt; 3 &amp;&amp; rn2(5))</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;            mac += 6 + mongets(mtmp, (rn2(3)) ?</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                       SPLINT_MAIL : BANDED_MAIL);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rn2(5))</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;            mac += 3 + mongets(mtmp, (rn2(3)) ?</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;                       RING_MAIL : STUDDED_LEATHER_ARMOR);</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;            mac += 2 + mongets(mtmp, LEATHER_ARMOR);</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;            <span class="keywordflow">if</span> (mac &lt; 10 &amp;&amp; rn2(3))</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;            mac += 1 + mongets(mtmp, HELMET);</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mac &lt; 10 &amp;&amp; rn2(2))</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;            mac += 1 + mongets(mtmp, DENTED_POT);</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;            <span class="keywordflow">if</span> (mac &lt; 10 &amp;&amp; rn2(3))</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;            mac += 1 + mongets(mtmp, SMALL_SHIELD);</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mac &lt; 10 &amp;&amp; rn2(2))</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;            mac += 2 + mongets(mtmp, LARGE_SHIELD);</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;            <span class="keywordflow">if</span> (mac &lt; 10 &amp;&amp; rn2(3))</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;            mac += 1 + mongets(mtmp, LOW_BOOTS);</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mac &lt; 10 &amp;&amp; rn2(2))</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;            mac += 2 + mongets(mtmp, HIGH_BOOTS);</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;            <span class="keywordflow">if</span> (mac &lt; 10 &amp;&amp; rn2(3))</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;            mac += 1 + mongets(mtmp, LEATHER_GLOVES);</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mac &lt; 10 &amp;&amp; rn2(2))</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;            mac += 1 + mongets(mtmp, LEATHER_CLOAK);</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;            <span class="keywordflow">if</span>(ptr != &amp;<a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[PM_GUARD] &amp;&amp;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;            ptr != &amp;<a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[PM_WATCHMAN] &amp;&amp;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;            ptr != &amp;<a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[PM_WATCH_CAPTAIN]) {</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;            <span class="keywordflow">if</span> (!rn2(3)) (void) mongets(mtmp, K_RATION);</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;            <span class="keywordflow">if</span> (!rn2(2)) (<span class="keywordtype">void</span>) mongets(mtmp, C_RATION);</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;            <span class="keywordflow">if</span> (ptr != &amp;<a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[PM_SOLDIER] &amp;&amp; !rn2(3))</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                (void) mongets(mtmp, BUGLE);</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;            } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;               <span class="keywordflow">if</span> (ptr == &amp;<a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[PM_WATCHMAN] &amp;&amp; rn2(3))</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                (<span class="keywordtype">void</span>) mongets(mtmp, TIN_WHISTLE);</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ptr == &amp;<a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[PM_SHOPKEEPER]) {</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;            (void) mongets(mtmp,SKELETON_KEY);</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;            <span class="keywordflow">switch</span> (rn2(4)) {</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;            <span class="comment">/* MAJOR fall through ... */</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;            <span class="keywordflow">case</span> 0: (void) mongets(mtmp, WAN_MAGIC_MISSILE);</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;            <span class="keywordflow">case</span> 1: (void) mongets(mtmp, POT_EXTRA_HEALING);</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;            <span class="keywordflow">case</span> 2: (void) mongets(mtmp, POT_HEALING);</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;            <span class="keywordflow">case</span> 3: (void) mongets(mtmp, WAN_STRIKING);</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;            }</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ptr-&gt;<a class="code" href="structpermonst.html#a8f9cc062b40fa92ce38e504987326190">msound</a> == <a class="code" href="monflag_8h.html#a6e1ee38e14cf83854c7413f0cdd83e7e">MS_PRIEST</a> ||</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;            <a class="code" href="makemon_8c.html#a4937ff19b458d9ced69526cf2da453d3">quest_mon_represents_role</a>(ptr,PM_PRIEST)) {</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;            (void) mongets(mtmp, rn2(7) ? ROBE :</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                         rn2(3) ? CLOAK_OF_PROTECTION :</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                         CLOAK_OF_MAGIC_RESISTANCE);</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;            (void) mongets(mtmp, SMALL_SHIELD);</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="preprocessor">#ifndef GOLDOBJ</span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;            mtmp-&gt;mgold = (long)<a class="code" href="hack_8h.html#af107ca092682647f298989038020f9c8">rn1</a>(10,20);</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;            mkmonmoney(mtmp,(<span class="keywordtype">long</span>)<a class="code" href="hack_8h.html#af107ca092682647f298989038020f9c8">rn1</a>(10,20));</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="makemon_8c.html#a4937ff19b458d9ced69526cf2da453d3">quest_mon_represents_role</a>(ptr,PM_MONK)) {</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;            (void) mongets(mtmp, rn2(11) ? ROBE :</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;                         CLOAK_OF_MAGIC_RESISTANCE);</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        }</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="monsym_8h.html#a9e0d9f6e11465919bac8252be7ead3f8">S_NYMPH</a>:</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        <span class="keywordflow">if</span>(!rn2(2)) (<span class="keywordtype">void</span>) mongets(mtmp, MIRROR);</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        <span class="keywordflow">if</span>(!rn2(2)) (void) mongets(mtmp, POT_OBJECT_DETECTION);</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="monsym_8h.html#a1e90d90b99d56ba8c44f924e951a6602">S_GIANT</a>:</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        <span class="keywordflow">if</span> (ptr == &amp;<a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[PM_MINOTAUR]) {</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;            <span class="keywordflow">if</span> (!rn2(3) || (<a class="code" href="decl_8h.html#abb694ef5acb9945ca69679a8360df51a">in_mklev</a> &amp;&amp; <a class="code" href="dungeon_8h.html#aa4eaf851320108eeaacde06ca61fe041">Is_earthlevel</a>(&amp;<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a89878490db5d54221f04b3fb44ebdaa2">uz</a>)))</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;            (void) mongets(mtmp, WAN_DIGGING);</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="mondata_8h.html#ab19a9ff386dd9b2935e8d72395116035">is_giant</a>(ptr)) {</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;            <span class="keywordflow">for</span> (cnt = rn2((<span class="keywordtype">int</span>)(mtmp-&gt;m_lev / 2)); cnt; cnt--) {</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;            otmp = mksobj(rnd_class(DILITHIUM_CRYSTAL,LUCKSTONE-1),</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                      <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>, <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;            otmp-&gt;<a class="code" href="structobj.html#ad08c0ed1a746fbb52377ecd7e4220578">quan</a> = (long) <a class="code" href="hack_8h.html#af107ca092682647f298989038020f9c8">rn1</a>(2, 3);</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;            otmp-&gt;<a class="code" href="structobj.html#a606b1d5b273b814049cc1b1991adfeec">owt</a> = weight(otmp);</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;            (void) mpickobj(mtmp, otmp);</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;            }</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        }</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="monsym_8h.html#a923120ddc98c245500abf2711e27a4a7">S_WRAITH</a>:</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        <span class="keywordflow">if</span> (ptr == &amp;<a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[PM_NAZGUL]) {</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;            otmp = mksobj(RIN_INVISIBILITY, <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>, <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;            curse(otmp);</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;            (void) mpickobj(mtmp, otmp);</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        }</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="monsym_8h.html#ae5085838a60dca2e0c3fc8242fa659a7">S_LICH</a>:</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        <span class="keywordflow">if</span> (ptr == &amp;<a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[PM_MASTER_LICH] &amp;&amp; !rn2(13))</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;            (<span class="keywordtype">void</span>)mongets(mtmp, (rn2(7) ? ATHAME : WAN_NOTHING));</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ptr == &amp;<a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[PM_ARCH_LICH] &amp;&amp; !rn2(3)) {</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;            otmp = mksobj(rn2(3) ? ATHAME : QUARTERSTAFF,</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                      <a class="code" href="global_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>, rn2(13) ? <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a> : <a class="code" href="global_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;            <span class="keywordflow">if</span> (otmp-&gt;<a class="code" href="structobj.html#a14fc8dc59e9073bfbf1e170875a98448">spe</a> &lt; 2) otmp-&gt;<a class="code" href="structobj.html#a14fc8dc59e9073bfbf1e170875a98448">spe</a> = rnd(3);</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;            <span class="keywordflow">if</span> (!rn2(4)) otmp-&gt;oerodeproof = 1;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;            (void) mpickobj(mtmp, otmp);</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        }</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="monsym_8h.html#af0c3ce0cab08d748710bf38390422cdd">S_MUMMY</a>:</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;        <span class="keywordflow">if</span> (rn2(7)) (<span class="keywordtype">void</span>)mongets(mtmp, MUMMY_WRAPPING);</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="monsym_8h.html#a9e4ff2790701c4d8584436824aea85cc">S_QUANTMECH</a>:</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        <span class="keywordflow">if</span> (!rn2(20)) {</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;            otmp = mksobj(LARGE_BOX, <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>, <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;            otmp-&gt;<a class="code" href="structobj.html#a14fc8dc59e9073bfbf1e170875a98448">spe</a> = 1; <span class="comment">/* flag for special box */</span></div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;            otmp-&gt;<a class="code" href="structobj.html#a606b1d5b273b814049cc1b1991adfeec">owt</a> = weight(otmp);</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;            (void) mpickobj(mtmp, otmp);</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        }</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="monsym_8h.html#a61469c4fc890b937a980c72b87b462de">S_LEPRECHAUN</a>:</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;<span class="preprocessor">#ifndef GOLDOBJ</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        mtmp-&gt;mgold = (long) d(level_difficulty(), 30);</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        mkmonmoney(mtmp, (<span class="keywordtype">long</span>) d(level_difficulty(), 30));</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="monsym_8h.html#a6428ef16323852a393830dbac4bc72ee">S_DEMON</a>:</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;            <span class="comment">/* moved here from m_initweap() because these don&#39;t</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;<span class="comment">           have AT_WEAP so m_initweap() is not called for them */</span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        <span class="keywordflow">if</span> (ptr == &amp;<a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[PM_ICE_DEVIL] &amp;&amp; !rn2(4)) {</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;            (void)mongets(mtmp, SPEAR);</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ptr == &amp;<a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[PM_ASMODEUS]) {</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;            (void)mongets(mtmp, WAN_COLD);</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;            (void)mongets(mtmp, WAN_FIRE);</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        }</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    }</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="comment">/* ordinary soldiers rarely have access to magic (or gold :-) */</span></div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <span class="keywordflow">if</span> (ptr == &amp;<a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[PM_SOLDIER] &amp;&amp; rn2(13)) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    <span class="keywordflow">if</span> ((<span class="keywordtype">int</span>) mtmp-&gt;m_lev &gt; rn2(50))</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;        (<span class="keywordtype">void</span>) mongets(mtmp, <a class="code" href="muse_8c.html#ac8a389f8c0a717ed822b5f2e6d099e9d">rnd_defensive_item</a>(mtmp));</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <span class="keywordflow">if</span> ((<span class="keywordtype">int</span>) mtmp-&gt;m_lev &gt; rn2(100))</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        (void) mongets(mtmp, <a class="code" href="muse_8c.html#a23c2634e5c91f8a024abfa2a7eaebe91">rnd_misc_item</a>(mtmp));</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;<span class="preprocessor">#ifndef GOLDOBJ</span></div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="mondata_8h.html#ad02aec9b6259664d1426ae16d60d7338">likes_gold</a>(ptr) &amp;&amp; !mtmp-&gt;mgold &amp;&amp; !rn2(5))</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        mtmp-&gt;mgold =</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;              (<span class="keywordtype">long</span>) d(level_difficulty(), mtmp-&gt;minvent ? 5 : 10);</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="mondata_8h.html#ad02aec9b6259664d1426ae16d60d7338">likes_gold</a>(ptr) &amp;&amp; !findgold(mtmp-&gt;minvent) &amp;&amp; !rn2(5))</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        mkmonmoney(mtmp, (<span class="keywordtype">long</span>) d(level_difficulty(), mtmp-&gt;minvent ? 5 : 10));</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;}</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;<span class="comment">/* Note: for long worms, always call cutworm (cutworm calls clone_mon) */</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;<span class="keyword">struct </span><a class="code" href="structmonst.html">monst</a> *</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;clone_mon(mon, x, y)</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;struct <a class="code" href="structmonst.html">monst</a> *mon;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;<a class="code" href="global_8h.html#a2043b7d01ce89f4ee2fa6c345a752d32">xchar</a> x, y; <span class="comment">/* clone&#39;s preferred location or 0 (near mon) */</span></div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;{</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <a class="code" href="structcoord.html">coord</a> <a class="code" href="celib_8c.html#a378f364ce8f01015f43ce168ea8afd39">mm</a>;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <span class="keyword">struct </span><a class="code" href="structmonst.html">monst</a> *m2;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="comment">/* may be too weak or have been extinguished for population control */</span></div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <span class="keywordflow">if</span> (mon-&gt;mhp &lt;= 1 || (<a class="code" href="structmvitals.html">mvitals</a>[monsndx(mon-&gt;data)].<a class="code" href="structmvitals.html#a51369b55e24dc02d3f5768b8f5b01381">mvflags</a> &amp; <a class="code" href="monflag_8h.html#a6f4a7d5b60b0d1cdd5e5a194cfcc5cc3">G_EXTINCT</a>))</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        <span class="keywordflow">return</span> (<span class="keyword">struct</span> <a class="code" href="structmonst.html">monst</a> *)0;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <span class="keywordflow">if</span> (x == 0) {</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        mm.<a class="code" href="structcoord.html#ac3e93ff628aa19d2888c5f6fa26f430d">x</a> = mon-&gt;mx;</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        mm.<a class="code" href="structcoord.html#a2b099692d87f98e4844b615136ca37fb">y</a> = mon-&gt;my;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="teleport_8c.html#a61ffc1bbdf6259d46ae8abd0dce3ce31">enexto</a>(&amp;mm, mm.<a class="code" href="structcoord.html#ac3e93ff628aa19d2888c5f6fa26f430d">x</a>, mm.<a class="code" href="structcoord.html#a2b099692d87f98e4844b615136ca37fb">y</a>, mon-&gt;data) || <a class="code" href="rm_8h.html#a17ef631151b987fd582fca76a429c08a">MON_AT</a>(mm.<a class="code" href="structcoord.html#ac3e93ff628aa19d2888c5f6fa26f430d">x</a>, mm.<a class="code" href="structcoord.html#a2b099692d87f98e4844b615136ca37fb">y</a>))</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        <span class="keywordflow">return</span> (<span class="keyword">struct</span> <a class="code" href="structmonst.html">monst</a> *)0;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!isok(x, y)) {</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;        <span class="keywordflow">return</span> (<span class="keyword">struct</span> <a class="code" href="structmonst.html">monst</a> *)0;   <span class="comment">/* paranoia */</span></div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;        mm.<a class="code" href="structcoord.html#ac3e93ff628aa19d2888c5f6fa26f430d">x</a> = x;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;        mm.<a class="code" href="structcoord.html#a2b099692d87f98e4844b615136ca37fb">y</a> = y;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="rm_8h.html#a17ef631151b987fd582fca76a429c08a">MON_AT</a>(mm.<a class="code" href="structcoord.html#ac3e93ff628aa19d2888c5f6fa26f430d">x</a>, mm.<a class="code" href="structcoord.html#a2b099692d87f98e4844b615136ca37fb">y</a>)) {</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="teleport_8c.html#a61ffc1bbdf6259d46ae8abd0dce3ce31">enexto</a>(&amp;mm, mm.<a class="code" href="structcoord.html#ac3e93ff628aa19d2888c5f6fa26f430d">x</a>, mm.<a class="code" href="structcoord.html#a2b099692d87f98e4844b615136ca37fb">y</a>, mon-&gt;data) || <a class="code" href="rm_8h.html#a17ef631151b987fd582fca76a429c08a">MON_AT</a>(mm.<a class="code" href="structcoord.html#ac3e93ff628aa19d2888c5f6fa26f430d">x</a>, mm.<a class="code" href="structcoord.html#a2b099692d87f98e4844b615136ca37fb">y</a>))</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;            <span class="keywordflow">return</span> (<span class="keyword">struct</span> <a class="code" href="structmonst.html">monst</a> *)0;</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        }</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    }</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    m2 = <a class="code" href="monst_8h.html#a352cffea2f66afefb6dece2621aad500">newmonst</a>(0);</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    *m2 = *mon;         <span class="comment">/* copy condition of old monster */</span></div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    m2-&gt;<a class="code" href="structmonst.html#a4c4bcdcf3c4ec4a85313ade9f9c27b72">nmon</a> = <a class="code" href="rm_8h.html#a9b7eba07f916406d6d62f5f82d273e40">fmon</a>;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <a class="code" href="rm_8h.html#a9b7eba07f916406d6d62f5f82d273e40">fmon</a> = m2;</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    m2-&gt;<a class="code" href="structmonst.html#ad8084d1c794f3903b9ffa85fca798abd">m_id</a> = <a class="code" href="flag_8h.html#a997133526e0c6bed44ebc0116a48b50a">flags</a>.<a class="code" href="structflag.html#ab942b8e32836e4e1bc725d7715bacd68">ident</a>++;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <span class="keywordflow">if</span> (!m2-&gt;<a class="code" href="structmonst.html#ad8084d1c794f3903b9ffa85fca798abd">m_id</a>) m2-&gt;<a class="code" href="structmonst.html#ad8084d1c794f3903b9ffa85fca798abd">m_id</a> = <a class="code" href="flag_8h.html#a997133526e0c6bed44ebc0116a48b50a">flags</a>.<a class="code" href="structflag.html#ab942b8e32836e4e1bc725d7715bacd68">ident</a>++;    <span class="comment">/* ident overflowed */</span></div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    m2-&gt;<a class="code" href="structmonst.html#a9bc20171e986845daccff8aafd8b5194">mx</a> = mm.<a class="code" href="structcoord.html#ac3e93ff628aa19d2888c5f6fa26f430d">x</a>;</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    m2-&gt;<a class="code" href="structmonst.html#a0b969d9b6af5b55393f6acfe508c6f08">my</a> = mm.<a class="code" href="structcoord.html#a2b099692d87f98e4844b615136ca37fb">y</a>;</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    m2-&gt;<a class="code" href="structmonst.html#a480856d6a5db5610593c9816e525a978">minvent</a> = (<span class="keyword">struct </span><a class="code" href="structobj.html">obj</a> *) 0; <span class="comment">/* objects don&#39;t clone */</span></div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    m2-&gt;mleashed = <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;<span class="preprocessor">#ifndef GOLDOBJ</span></div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    m2-&gt;<a class="code" href="structmonst.html#a06dbdd0ca7ee096216aa10f86beed533">mgold</a> = 0L;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <span class="comment">/* Max HP the same, but current HP halved for both.  The caller</span></div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;<span class="comment">     * might want to override this by halving the max HP also.</span></div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;<span class="comment">     * When current HP is odd, the original keeps the extra point.</span></div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    m2-&gt;<a class="code" href="structmonst.html#a66c107319bb7bb318c04e6a0f5f03c60">mhpmax</a> = mon-&gt;mhpmax;</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    m2-&gt;<a class="code" href="structmonst.html#abe22e95755f1348a6a1c78252be5d76d">mhp</a> = mon-&gt;mhp / 2;</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    mon-&gt;mhp -= m2-&gt;<a class="code" href="structmonst.html#abe22e95755f1348a6a1c78252be5d76d">mhp</a>;</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <span class="comment">/* since shopkeepers and guards will only be cloned if they&#39;ve been</span></div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="comment">     * polymorphed away from their original forms, the clone doesn&#39;t have</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;<span class="comment">     * room for the extra information.  we also don&#39;t want two shopkeepers</span></div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;<span class="comment">     * around for the same shop.</span></div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <span class="keywordflow">if</span> (mon-&gt;isshk) m2-&gt;isshk = <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <span class="keywordflow">if</span> (mon-&gt;isgd) m2-&gt;isgd = <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <span class="keywordflow">if</span> (mon-&gt;ispriest) m2-&gt;ispriest = <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    m2-&gt;<a class="code" href="structmonst.html#a6c24439d98c9580ee2a3918008801ac2">mxlth</a> = 0;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <a class="code" href="rm_8h.html#af46e44dabc00162cdea350fe3dae252b">place_monster</a>(m2, m2-&gt;<a class="code" href="structmonst.html#a9bc20171e986845daccff8aafd8b5194">mx</a>, m2-&gt;<a class="code" href="structmonst.html#a0b969d9b6af5b55393f6acfe508c6f08">my</a>);</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="mondata_8h.html#a8ab6bc25a724f40d5f1c0b0a11b27ac3">emits_light</a>(m2-&gt;<a class="code" href="structmonst.html#a5c8369d63f2ae0ca4466258542edecbe">data</a>))</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        new_light_source(m2-&gt;<a class="code" href="structmonst.html#a9bc20171e986845daccff8aafd8b5194">mx</a>, m2-&gt;<a class="code" href="structmonst.html#a0b969d9b6af5b55393f6acfe508c6f08">my</a>, <a class="code" href="mondata_8h.html#a8ab6bc25a724f40d5f1c0b0a11b27ac3">emits_light</a>(m2-&gt;<a class="code" href="structmonst.html#a5c8369d63f2ae0ca4466258542edecbe">data</a>),</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;                 <a class="code" href="vision_8h.html#a7096e6ddfde7e563bc51f0fc139cb097">LS_MONSTER</a>, (<a class="code" href="tradstdc_8h.html#ad4a7dab7269b4b00e3c7c7d2e66f31cd">genericptr_t</a>)m2);</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    <span class="keywordflow">if</span> (m2-&gt;<a class="code" href="structmonst.html#a03fe7192ae1efd428bc9a0d2f856125f">mnamelth</a>) {</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        m2-&gt;<a class="code" href="structmonst.html#a03fe7192ae1efd428bc9a0d2f856125f">mnamelth</a> = 0; <span class="comment">/* or it won&#39;t get allocated */</span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        m2 = christen_monst(m2, <a class="code" href="monst_8h.html#ac29ed1d493cdb635e09ebbecb209ac2d">NAME</a>(mon));</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mon-&gt;isshk) {</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        m2 = christen_monst(m2, shkname(mon));</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    }</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    <span class="comment">/* not all clones caused by player are tame or peaceful */</span></div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="flag_8h.html#a997133526e0c6bed44ebc0116a48b50a">flags</a>.<a class="code" href="structflag.html#aefca97315c578e47f6c6cdf06864db9e">mon_moving</a>) {</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;        <span class="keywordflow">if</span> (mon-&gt;mtame)</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;        m2-&gt;<a class="code" href="structmonst.html#a6d525ec48f9d38cda6accbb0cb39efba">mtame</a> = rn2(<a class="code" href="hack_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>(2 + <a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a89d1a963eea3bc32c00233bc9332f24a">uluck</a>, 2)) ? mon-&gt;mtame : 0;</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mon-&gt;mpeaceful)</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;        m2-&gt;mpeaceful = rn2(<a class="code" href="hack_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>(2 + <a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a89d1a963eea3bc32c00233bc9332f24a">uluck</a>, 2)) ? 1 : 0;</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    }</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <a class="code" href="display_8c.html#a185c6ad6e4c5a6be26a371b9aa17c32e">newsym</a>(m2-&gt;<a class="code" href="structmonst.html#a9bc20171e986845daccff8aafd8b5194">mx</a>,m2-&gt;<a class="code" href="structmonst.html#a0b969d9b6af5b55393f6acfe508c6f08">my</a>);  <span class="comment">/* display the new monster */</span></div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <span class="keywordflow">if</span> (m2-&gt;<a class="code" href="structmonst.html#a6d525ec48f9d38cda6accbb0cb39efba">mtame</a>) {</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;        <span class="keyword">struct </span><a class="code" href="structmonst.html">monst</a> *m3;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        <span class="keywordflow">if</span> (mon-&gt;isminion) {</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;        m3 = <a class="code" href="monst_8h.html#a352cffea2f66afefb6dece2621aad500">newmonst</a>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structepri.html">epri</a>) + mon-&gt;mnamelth);</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;        *m3 = *m2;</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        m3-&gt;<a class="code" href="structmonst.html#a6c24439d98c9580ee2a3918008801ac2">mxlth</a> = <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="structepri.html">epri</a>);</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        <span class="keywordflow">if</span> (m2-&gt;<a class="code" href="structmonst.html#a03fe7192ae1efd428bc9a0d2f856125f">mnamelth</a>) <a class="code" href="global_8h.html#add22f733d1f2c380499f495068e42b7c">Strcpy</a>(<a class="code" href="monst_8h.html#ac29ed1d493cdb635e09ebbecb209ac2d">NAME</a>(m3), <a class="code" href="monst_8h.html#ac29ed1d493cdb635e09ebbecb209ac2d">NAME</a>(m2));</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        *(<a class="code" href="epri_8h.html#a8af728f8ed3894c68f86757f5308af8f">EPRI</a>(m3)) = *(<a class="code" href="epri_8h.html#a8af728f8ed3894c68f86757f5308af8f">EPRI</a>(mon));</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        replmon(m2, m3);</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        m2 = m3;</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;        <span class="comment">/* because m2 is a copy of mon it is tame but not init&#39;ed.</span></div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;<span class="comment">         * however, tamedog will not re-tame a tame dog, so m2</span></div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<span class="comment">         * must be made non-tame to get initialized properly.</span></div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        m2-&gt;<a class="code" href="structmonst.html#a6d525ec48f9d38cda6accbb0cb39efba">mtame</a> = 0;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;        <span class="keywordflow">if</span> ((m3 = tamedog(m2, (<span class="keyword">struct</span> <a class="code" href="structobj.html">obj</a> *)0)) != 0) {</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;            m2 = m3;</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;            *(<a class="code" href="edog_8h.html#a695eedda64fa55285c2ea3b098308a70">EDOG</a>(m2)) = *(<a class="code" href="edog_8h.html#a695eedda64fa55285c2ea3b098308a70">EDOG</a>(mon));</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        }</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        }</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    }</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    set_malign(m2);</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    <span class="keywordflow">return</span> m2;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;}</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;<span class="comment"> * Propagate a species</span></div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;<span class="comment"> * Once a certain number of monsters are created, don&#39;t create any more</span></div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;<span class="comment"> * at random (i.e. make them extinct).  The previous (3.2) behavior was</span></div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;<span class="comment"> * to do this when a certain number had _died_, which didn&#39;t make</span></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;<span class="comment"> * much sense.</span></div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;<span class="comment"> * Returns FALSE propagation unsuccessful</span></div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;<span class="comment"> *         TRUE  propagation successful</span></div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;<span class="keywordtype">boolean</span></div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;propagate(mndx, tally, ghostly)</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;int mndx;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;<span class="keywordtype">boolean</span> tally;</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;<span class="keywordtype">boolean</span> ghostly;</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;{</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <span class="keywordtype">boolean</span> result;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <a class="code" href="config_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> lim = mbirth_limit(mndx);</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    <span class="keywordtype">boolean</span> gone = (<a class="code" href="structmvitals.html">mvitals</a>[mndx].<a class="code" href="structmvitals.html#a51369b55e24dc02d3f5768b8f5b01381">mvflags</a> &amp; <a class="code" href="monflag_8h.html#ad600313e20617adbf44819cf9707971a">G_GONE</a>); <span class="comment">/* genocided or extinct */</span></div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    result = (((int) <a class="code" href="structmvitals.html">mvitals</a>[mndx].born &lt; lim) &amp;&amp; !gone) ? <a class="code" href="global_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a> : <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    <span class="comment">/* if it&#39;s unique, don&#39;t ever make it again */</span></div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[mndx].geno &amp; <a class="code" href="monflag_8h.html#ab99532c9310183c20279ce79e7f594dd">G_UNIQ</a>) <a class="code" href="structmvitals.html">mvitals</a>[mndx].<a class="code" href="structmvitals.html#a51369b55e24dc02d3f5768b8f5b01381">mvflags</a> |= <a class="code" href="monflag_8h.html#a6f4a7d5b60b0d1cdd5e5a194cfcc5cc3">G_EXTINCT</a>;</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structmvitals.html">mvitals</a>[mndx].born &lt; 255 &amp;&amp; tally &amp;&amp; (!ghostly || (ghostly &amp;&amp; result)))</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;         <a class="code" href="structmvitals.html">mvitals</a>[mndx].<a class="code" href="structmvitals.html#af01567cf023132ecac05b85abc3c3549">born</a>++;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    <span class="keywordflow">if</span> ((<span class="keywordtype">int</span>) <a class="code" href="structmvitals.html">mvitals</a>[mndx].<a class="code" href="structmvitals.html#af01567cf023132ecac05b85abc3c3549">born</a> &gt;= lim &amp;&amp; !(<a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[mndx].<a class="code" href="structpermonst.html#a0f9f93635f6228a61551c835640b3c1d">geno</a> &amp; <a class="code" href="monflag_8h.html#a4958e656bfb1881e0d63df942488b1fd">G_NOGEN</a>) &amp;&amp;</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;        !(<a class="code" href="structmvitals.html">mvitals</a>[mndx].mvflags &amp; <a class="code" href="monflag_8h.html#a6f4a7d5b60b0d1cdd5e5a194cfcc5cc3">G_EXTINCT</a>)) {</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;<span class="preprocessor">#if defined(DEBUG) &amp;&amp; defined(WIZARD)</span></div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="flag_8h.html#a5f48dc2f029e22c05489fb20a491db4b">wizard</a>) pline(<span class="stringliteral">&quot;Automatically extinguished %s.&quot;</span>,</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;                    makeplural(<a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[mndx].mname));</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;        <a class="code" href="structmvitals.html">mvitals</a>[mndx].<a class="code" href="structmvitals.html#a51369b55e24dc02d3f5768b8f5b01381">mvflags</a> |= <a class="code" href="monflag_8h.html#a6f4a7d5b60b0d1cdd5e5a194cfcc5cc3">G_EXTINCT</a>;</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        reset_rndmonst(mndx);</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    }</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;}</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;<span class="comment"> * called with [x,y] = coordinates;</span></div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;<span class="comment"> *  [0,0] means anyplace</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;<span class="comment"> *  [u.ux,u.uy] means: near player (if !in_mklev)</span></div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;<span class="comment"> *  In case we make a monster group, only return the one at [x,y].</span></div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;<span class="keyword">struct </span><a class="code" href="structmonst.html">monst</a> *</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;makemon(ptr, x, y, mmflags)</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;<a class="code" href="mkmaze_8c.html#a24ac627a7839caecddfc66f1d46033f0">register</a> struct <a class="code" href="structpermonst.html">permonst</a> *ptr;</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;<a class="code" href="mkmaze_8c.html#a24ac627a7839caecddfc66f1d46033f0">register</a> <span class="keywordtype">int</span>    x, y;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;<a class="code" href="mkmaze_8c.html#a24ac627a7839caecddfc66f1d46033f0">register</a> <span class="keywordtype">int</span>    mmflags;</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;{</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <span class="keyword">register</span> <span class="keyword">struct </span><a class="code" href="structmonst.html">monst</a> *mtmp;</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    <span class="keywordtype">int</span> mndx, mcham, ct, mitem, xlth;</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    <span class="keywordtype">boolean</span> anymon = (!ptr);</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <span class="keywordtype">boolean</span> byyou = (x == <a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#ace2fd92f7f1a640e45775efe6e5f6cf7">ux</a> &amp;&amp; y == <a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a8571cf3a9cfc41c3f877d0f56cda11a9">uy</a>);</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    <span class="keywordtype">boolean</span> allow_minvent = ((mmflags &amp; <a class="code" href="hack_8h.html#ab9abb3d58903e1c125446f40f6984095">NO_MINVENT</a>) == 0);</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    <span class="keywordtype">boolean</span> countbirth = ((mmflags &amp; <a class="code" href="hack_8h.html#a521db2c6d2f512da8384c71f01cc1c77">MM_NOCOUNTBIRTH</a>) == 0);</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    <span class="keywordtype">unsigned</span> gpflags = (mmflags &amp; <a class="code" href="hack_8h.html#ac5c62ebe8a21263fc51903b33c6b186f">MM_IGNOREWATER</a>) ? <a class="code" href="hack_8h.html#ac5c62ebe8a21263fc51903b33c6b186f">MM_IGNOREWATER</a> : 0;</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    <span class="comment">/* if caller wants random location, do it here */</span></div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <span class="keywordflow">if</span>(x == 0 &amp;&amp; y == 0) {</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;        <span class="keywordtype">int</span> tryct = 0;  <span class="comment">/* careful with bigrooms */</span></div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        <span class="keyword">struct </span><a class="code" href="structmonst.html">monst</a> fakemon;</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;        fakemon.<a class="code" href="structmonst.html#a5c8369d63f2ae0ca4466258542edecbe">data</a> = ptr; <span class="comment">/* set up for goodpos */</span></div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;        <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;            x = <a class="code" href="hack_8h.html#af107ca092682647f298989038020f9c8">rn1</a>(<a class="code" href="global_8h.html#a308dbfcc29f5a427c0315f3cbf03c3ed">COLNO</a>-3,2);</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;            y = rn2(<a class="code" href="global_8h.html#a9cce134868d97b23c35bcf1ff4a343d8">ROWNO</a>);</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        } <span class="keywordflow">while</span>(!<a class="code" href="teleport_8c.html#a6eccfce2bb34ffe646ba537130d622e3">goodpos</a>(x, y, ptr ? &amp;fakemon : (<span class="keyword">struct</span> <a class="code" href="structmonst.html">monst</a> *)0, gpflags) ||</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;            (!<a class="code" href="decl_8h.html#abb694ef5acb9945ca69679a8360df51a">in_mklev</a> &amp;&amp; tryct++ &lt; 50 &amp;&amp; <a class="code" href="vision_8h.html#a857efc720262bc13a9e4b4bcbb079b5c">cansee</a>(x, y)));</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (byyou &amp;&amp; !<a class="code" href="decl_8h.html#abb694ef5acb9945ca69679a8360df51a">in_mklev</a>) {</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;        <a class="code" href="structcoord.html">coord</a> bypos;</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="teleport_8c.html#a09908f1f00f2ed41b117f0207c681b35">enexto_core</a>(&amp;bypos, <a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#ace2fd92f7f1a640e45775efe6e5f6cf7">ux</a>, <a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a8571cf3a9cfc41c3f877d0f56cda11a9">uy</a>, ptr, gpflags)) {</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;            x = bypos.<a class="code" href="structcoord.html#ac3e93ff628aa19d2888c5f6fa26f430d">x</a>;</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;            y = bypos.<a class="code" href="structcoord.html#a2b099692d87f98e4844b615136ca37fb">y</a>;</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;        } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;            <span class="keywordflow">return</span>((<span class="keyword">struct</span> <a class="code" href="structmonst.html">monst</a> *)0);</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    }</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    <span class="comment">/* Does monster already exist at the position? */</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="rm_8h.html#a17ef631151b987fd582fca76a429c08a">MON_AT</a>(x, y)) {</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;        <span class="keywordflow">if</span> ((mmflags &amp; <a class="code" href="hack_8h.html#acfedaecac4bd4f842331f8631e5649e8">MM_ADJACENTOK</a>) != 0) {</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;            <a class="code" href="structcoord.html">coord</a> bypos;</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="teleport_8c.html#a09908f1f00f2ed41b117f0207c681b35">enexto_core</a>(&amp;bypos, x, y, ptr, gpflags)) {</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;                x = bypos.<a class="code" href="structcoord.html#ac3e93ff628aa19d2888c5f6fa26f430d">x</a>;</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;                y = bypos.<a class="code" href="structcoord.html#a2b099692d87f98e4844b615136ca37fb">y</a>;</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;            } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;                <span class="keywordflow">return</span>((<span class="keyword">struct</span> <a class="code" href="structmonst.html">monst</a> *) 0);</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;        } <span class="keywordflow">else</span> </div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;            <span class="keywordflow">return</span>((<span class="keyword">struct</span> <a class="code" href="structmonst.html">monst</a> *) 0);</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    }</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <span class="keywordflow">if</span>(ptr){</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;        mndx = monsndx(ptr);</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;        <span class="comment">/* if you are to make a specific monster and it has</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<span class="comment">           already been genocided, return */</span></div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="structmvitals.html">mvitals</a>[mndx].mvflags &amp; <a class="code" href="monflag_8h.html#a89b3308e85c121e38c6bef7077e49fd8">G_GENOD</a>) <span class="keywordflow">return</span>((<span class="keyword">struct</span> <a class="code" href="structmonst.html">monst</a> *) 0);</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;<span class="preprocessor">#if defined(WIZARD) &amp;&amp; defined(DEBUG)</span></div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="flag_8h.html#a5f48dc2f029e22c05489fb20a491db4b">wizard</a> &amp;&amp; (<a class="code" href="structmvitals.html">mvitals</a>[mndx].mvflags &amp; G_EXTINCT))</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;            pline(<span class="stringliteral">&quot;Explicitly creating extinct monster %s.&quot;</span>,</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;            <a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[mndx].mname);</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;        <span class="comment">/* make a random (common) monster that can survive here.</span></div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;<span class="comment">         * (the special levels ask for random monsters at specific</span></div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;<span class="comment">         * positions, causing mass drowning on the medusa level,</span></div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;<span class="comment">         * for instance.)</span></div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;        <span class="keywordtype">int</span> tryct = 0;  <span class="comment">/* maybe there are no good choices */</span></div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;        <span class="keyword">struct </span><a class="code" href="structmonst.html">monst</a> fakemon;</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;        <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;            <span class="keywordflow">if</span>(!(ptr = rndmonst())) {</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;                pline(<span class="stringliteral">&quot;Warning: no monster.&quot;</span>);</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;                <span class="keywordflow">return</span>((<span class="keyword">struct</span> <a class="code" href="structmonst.html">monst</a> *) 0); <span class="comment">/* no more monsters! */</span></div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;            }</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;            fakemon.data = ptr; <span class="comment">/* set up for goodpos */</span></div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;        } <span class="keywordflow">while</span>(!<a class="code" href="teleport_8c.html#a6eccfce2bb34ffe646ba537130d622e3">goodpos</a>(x, y, &amp;fakemon, gpflags) &amp;&amp; tryct++ &lt; 50);</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;        mndx = monsndx(ptr);</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    }</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    (void) propagate(mndx, countbirth, <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    xlth = ptr-&gt;pxlth;</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    <span class="keywordflow">if</span> (mmflags &amp; <a class="code" href="hack_8h.html#aa30b82d0d8c1e7c65e58f27bcde29ae1">MM_EDOG</a>) xlth += <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="structedog.html">edog</a>);</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mmflags &amp; <a class="code" href="hack_8h.html#a748ce8be8371670ccbbc5e5debfc2e18">MM_EMIN</a>) xlth += <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="structemin.html">emin</a>);</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    mtmp = <a class="code" href="monst_8h.html#a352cffea2f66afefb6dece2621aad500">newmonst</a>(xlth);</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    *mtmp = <a class="code" href="makemon_8c.html#adff06eafc2768a95a516465e03af9993">zeromonst</a>;      <span class="comment">/* clear all entries in structure */</span></div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    (void)memset((<a class="code" href="tradstdc_8h.html#ad4a7dab7269b4b00e3c7c7d2e66f31cd">genericptr_t</a>)mtmp-&gt;<a class="code" href="structmonst.html#a3fea4dd3adc3f4921e8b68a1f31326dd">mextra</a>, 0, xlth);</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;    mtmp-&gt;<a class="code" href="structmonst.html#a4c4bcdcf3c4ec4a85313ade9f9c27b72">nmon</a> = <a class="code" href="rm_8h.html#a9b7eba07f916406d6d62f5f82d273e40">fmon</a>;</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    <a class="code" href="rm_8h.html#a9b7eba07f916406d6d62f5f82d273e40">fmon</a> = mtmp;</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    mtmp-&gt;<a class="code" href="structmonst.html#ad8084d1c794f3903b9ffa85fca798abd">m_id</a> = <a class="code" href="flag_8h.html#a997133526e0c6bed44ebc0116a48b50a">flags</a>.<a class="code" href="structflag.html#ab942b8e32836e4e1bc725d7715bacd68">ident</a>++;</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    <span class="keywordflow">if</span> (!mtmp-&gt;<a class="code" href="structmonst.html#ad8084d1c794f3903b9ffa85fca798abd">m_id</a>) mtmp-&gt;<a class="code" href="structmonst.html#ad8084d1c794f3903b9ffa85fca798abd">m_id</a> = <a class="code" href="flag_8h.html#a997133526e0c6bed44ebc0116a48b50a">flags</a>.<a class="code" href="structflag.html#ab942b8e32836e4e1bc725d7715bacd68">ident</a>++;    <span class="comment">/* ident overflowed */</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    set_mon_data(mtmp, ptr, 0);</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    <span class="keywordflow">if</span> (mtmp-&gt;<a class="code" href="structmonst.html#a5c8369d63f2ae0ca4466258542edecbe">data</a>-&gt;<a class="code" href="structpermonst.html#a8f9cc062b40fa92ce38e504987326190">msound</a> == <a class="code" href="monflag_8h.html#a57dd24aec371766f02747931edfcad46">MS_LEADER</a>)</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;        <a class="code" href="decl_8h.html#a0cccaa8c269a70f9f598d16b8bcad4f7">quest_status</a>.<a class="code" href="structq__score.html#af070331d315654feb7df64146dea339d">leader_m_id</a> = mtmp-&gt;<a class="code" href="structmonst.html#ad8084d1c794f3903b9ffa85fca798abd">m_id</a>;</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    mtmp-&gt;<a class="code" href="structmonst.html#a6c24439d98c9580ee2a3918008801ac2">mxlth</a> = xlth;</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    mtmp-&gt;<a class="code" href="structmonst.html#a1a7aab6d8ab6271ccb21d34806c73f47">mnum</a> = mndx;</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    mtmp-&gt;<a class="code" href="structmonst.html#a80ec1118166ea76d347e47d088bd1f7c">m_lev</a> = adj_lev(ptr);</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="mondata_8h.html#a6fd7f5f330b2b760d6a27b06062945a4">is_golem</a>(ptr)) {</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;        mtmp-&gt;<a class="code" href="structmonst.html#a66c107319bb7bb318c04e6a0f5f03c60">mhpmax</a> = mtmp-&gt;<a class="code" href="structmonst.html#abe22e95755f1348a6a1c78252be5d76d">mhp</a> = golemhp(mndx);</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="mondata_8h.html#ae65c0c7b92cbe7cb6e8550523ef4f175">is_rider</a>(ptr)) {</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;        <span class="comment">/* We want low HP, but a high mlevel so they can attack well */</span></div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;        mtmp-&gt;<a class="code" href="structmonst.html#a66c107319bb7bb318c04e6a0f5f03c60">mhpmax</a> = mtmp-&gt;<a class="code" href="structmonst.html#abe22e95755f1348a6a1c78252be5d76d">mhp</a> = d(10,8);</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ptr-&gt;mlevel &gt; 49) {</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        <span class="comment">/* &quot;special&quot; fixed hp monster</span></div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;<span class="comment">         * the hit points are encoded in the mlevel in a somewhat strange</span></div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;<span class="comment">         * way to fit in the 50..127 positive range of a signed character</span></div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;<span class="comment">         * above the 1..49 that indicate &quot;normal&quot; monster levels */</span></div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;        mtmp-&gt;<a class="code" href="structmonst.html#a66c107319bb7bb318c04e6a0f5f03c60">mhpmax</a> = mtmp-&gt;<a class="code" href="structmonst.html#abe22e95755f1348a6a1c78252be5d76d">mhp</a> = 2*(ptr-&gt;mlevel - 6);</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;        mtmp-&gt;<a class="code" href="structmonst.html#a80ec1118166ea76d347e47d088bd1f7c">m_lev</a> = mtmp-&gt;<a class="code" href="structmonst.html#abe22e95755f1348a6a1c78252be5d76d">mhp</a> / 4;    <span class="comment">/* approximation */</span></div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ptr-&gt;mlet == <a class="code" href="monsym_8h.html#a32530da03aef4c8fa67564f3d28b50dd">S_DRAGON</a> &amp;&amp; mndx &gt;= PM_GRAY_DRAGON) {</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;        <span class="comment">/* adult dragons */</span></div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;        mtmp-&gt;<a class="code" href="structmonst.html#a66c107319bb7bb318c04e6a0f5f03c60">mhpmax</a> = mtmp-&gt;<a class="code" href="structmonst.html#abe22e95755f1348a6a1c78252be5d76d">mhp</a> = (int) (<a class="code" href="dungeon_8h.html#ae85486e6a752224948478a6e9dab0329">In_endgame</a>(&amp;<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a89878490db5d54221f04b3fb44ebdaa2">uz</a>) ?</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;        (8 * mtmp-&gt;<a class="code" href="structmonst.html#a80ec1118166ea76d347e47d088bd1f7c">m_lev</a>) : (4 * mtmp-&gt;<a class="code" href="structmonst.html#a80ec1118166ea76d347e47d088bd1f7c">m_lev</a> + d((<span class="keywordtype">int</span>)mtmp-&gt;<a class="code" href="structmonst.html#a80ec1118166ea76d347e47d088bd1f7c">m_lev</a>, 4)));</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!mtmp-&gt;<a class="code" href="structmonst.html#a80ec1118166ea76d347e47d088bd1f7c">m_lev</a>) {</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;        mtmp-&gt;<a class="code" href="structmonst.html#a66c107319bb7bb318c04e6a0f5f03c60">mhpmax</a> = mtmp-&gt;<a class="code" href="structmonst.html#abe22e95755f1348a6a1c78252be5d76d">mhp</a> = rnd(4);</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;        mtmp-&gt;<a class="code" href="structmonst.html#a66c107319bb7bb318c04e6a0f5f03c60">mhpmax</a> = mtmp-&gt;<a class="code" href="structmonst.html#abe22e95755f1348a6a1c78252be5d76d">mhp</a> = d((<span class="keywordtype">int</span>)mtmp-&gt;<a class="code" href="structmonst.html#a80ec1118166ea76d347e47d088bd1f7c">m_lev</a>, 8);</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;        <span class="keywordflow">if</span> (is_home_elemental(ptr))</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;        mtmp-&gt;<a class="code" href="structmonst.html#a66c107319bb7bb318c04e6a0f5f03c60">mhpmax</a> = (mtmp-&gt;<a class="code" href="structmonst.html#abe22e95755f1348a6a1c78252be5d76d">mhp</a> *= 3);</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    }</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="mondata_8h.html#a4ef9c86fddd17a5704d9312dd66d37f0">is_female</a>(ptr)) mtmp-&gt;female = <a class="code" href="global_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    <span class="keywordflow">else</span> if (<a class="code" href="mondata_8h.html#af87dbfd43bde750d2dceabc5d50353f4">is_male</a>(ptr)) mtmp-&gt;female = <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    <span class="keywordflow">else</span> mtmp-&gt;female = rn2(2); <span class="comment">/* ignored for neuters */</span></div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="dungeon_8h.html#ad19541d30218e5f3834c01d42bb381e2">In_sokoban</a>(&amp;<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a89878490db5d54221f04b3fb44ebdaa2">uz</a>) &amp;&amp; !<a class="code" href="mondata_8h.html#a9b2e225376aeed6f19559b2c2dced2d0">mindless</a>(ptr))  <span class="comment">/* know about traps here */</span></div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;        mtmp-&gt;<a class="code" href="structmonst.html#a792271938bf793d0b6cfef02171f967a">mtrapseen</a> = (1L &lt;&lt; (<a class="code" href="trap_8h.html#af181c9e6602b6432a0bf1a9243808968">PIT</a> - 1)) | (1L &lt;&lt; (<a class="code" href="trap_8h.html#a8049ef47c05eee8156bccee8d819c506">HOLE</a> - 1));</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    <span class="keywordflow">if</span> (ptr-&gt;msound == <a class="code" href="monflag_8h.html#a57dd24aec371766f02747931edfcad46">MS_LEADER</a>)       <span class="comment">/* leader knows about portal */</span></div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;        mtmp-&gt;<a class="code" href="structmonst.html#a792271938bf793d0b6cfef02171f967a">mtrapseen</a> |= (1L &lt;&lt; (<a class="code" href="trap_8h.html#a64bfa610e12179ef4bfa46c65166b2fe">MAGIC_PORTAL</a>-1));</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    <a class="code" href="rm_8h.html#af46e44dabc00162cdea350fe3dae252b">place_monster</a>(mtmp, x, y);</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    mtmp-&gt;mcansee = mtmp-&gt;mcanmove = <a class="code" href="global_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    mtmp-&gt;mpeaceful = (mmflags &amp; <a class="code" href="hack_8h.html#a8c49bf9ef4423d8f1c3f2998d81277c2">MM_ANGRY</a>) ? <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a> : peace_minded(ptr);</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    <span class="keywordflow">switch</span>(ptr-&gt;mlet) {</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="monsym_8h.html#ad8b9f73f4b42e8250eb5a69a12482436">S_MIMIC</a>:</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;            set_mimic_sym(mtmp);</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="monsym_8h.html#a14b30b9b42c7e1ffa278c5606d245a61">S_SPIDER</a>:</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="monsym_8h.html#a6685ecc90740a8c3fee524b92e50f9d3">S_SNAKE</a>:</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="decl_8h.html#abb694ef5acb9945ca69679a8360df51a">in_mklev</a>)</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;                <span class="keywordflow">if</span>(x &amp;&amp; y)</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;                (void) mkobj_at(0, x, y, <a class="code" href="global_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="mondata_8h.html#a37a7b9dfee69b94d8e6946bb04c22874">hides_under</a>(ptr) &amp;&amp; <a class="code" href="rm_8h.html#a8c5e05f917fa75d3b54c8c5045d6665b">OBJ_AT</a>(x, y))</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;                mtmp-&gt;mundetected = <a class="code" href="global_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="monsym_8h.html#a12f9073e331246f69c12938498713b20">S_LIGHT</a>:</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="monsym_8h.html#a94b7f79df356477345c1ed49f9f6a7cc">S_ELEMENTAL</a>:</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;            if (mndx == PM_STALKER || mndx == PM_BLACK_LIGHT) {</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;                mtmp-&gt;perminvis = <a class="code" href="global_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;                mtmp-&gt;minvis = <a class="code" href="global_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;            }</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="monsym_8h.html#a07cd4c997171ec30fbe1376341a26160">S_EEL</a>:</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;            <span class="keywordflow">if</span> (is_pool(x, y))</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;                mtmp-&gt;mundetected = <a class="code" href="global_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="monsym_8h.html#a61469c4fc890b937a980c72b87b462de">S_LEPRECHAUN</a>:</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;            mtmp-&gt;msleeping = 1;</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="monsym_8h.html#a61b5369975d5cd079ca9f3153e807079">S_JABBERWOCK</a>:</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="monsym_8h.html#a9e0d9f6e11465919bac8252be7ead3f8">S_NYMPH</a>:</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;            if (rn2(5) &amp;&amp; !<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a3e83735264e74265e8c8777f73e159fa">uhave</a>.amulet) mtmp-&gt;msleeping = 1;</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="monsym_8h.html#a2f5e3288d9c62ffe94eae6e003a5ebf8">S_ORC</a>:</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;            if (<a class="code" href="you_8h.html#ac1b9b8d9c3387e3d3a36b9474945879c">Race_if</a>(PM_ELF)) mtmp-&gt;mpeaceful = <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="monsym_8h.html#a5fbb649f5f1192ce9fd21c64ba22f2e1">S_UNICORN</a>:</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;            if (<a class="code" href="mondata_8h.html#aea6ec71970ce94bddd2270e198ff62f6">is_unicorn</a>(ptr) &amp;&amp;</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;                    sgn(<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a3f202dd89a837a9772a9eb1f1965f30c">ualign</a>.<a class="code" href="structalign.html#a0dadfa91b9ff06447f91ea8a2b898827">type</a>) == sgn(ptr-&gt;maligntyp))</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;                mtmp-&gt;mpeaceful = <a class="code" href="global_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="monsym_8h.html#a01e8c6d504db131fb9f679c90270124f">S_BAT</a>:</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;            if (<a class="code" href="dungeon_8h.html#a5cd7abaad3082e8a7b2f5ec30e44d2f4">Inhell</a> &amp;&amp; <a class="code" href="mondata_8h.html#ac458b2a33cdc76df339d7d836b0748f0">is_bat</a>(ptr))</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;                <a class="code" href="worn_8c.html#adaf11e4f4e6b2b5d86738411700e6050">mon_adjust_speed</a>(mtmp, 2, (<span class="keyword">struct</span> <a class="code" href="structobj.html">obj</a> *)0);</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    }</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    <span class="keywordflow">if</span> ((ct = <a class="code" href="mondata_8h.html#a8ab6bc25a724f40d5f1c0b0a11b27ac3">emits_light</a>(mtmp-&gt;<a class="code" href="structmonst.html#a5c8369d63f2ae0ca4466258542edecbe">data</a>)) &gt; 0)</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;        new_light_source(mtmp-&gt;<a class="code" href="structmonst.html#a9bc20171e986845daccff8aafd8b5194">mx</a>, mtmp-&gt;<a class="code" href="structmonst.html#a0b969d9b6af5b55393f6acfe508c6f08">my</a>, ct,</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;                 <a class="code" href="vision_8h.html#a7096e6ddfde7e563bc51f0fc139cb097">LS_MONSTER</a>, (<a class="code" href="tradstdc_8h.html#ad4a7dab7269b4b00e3c7c7d2e66f31cd">genericptr_t</a>)mtmp);</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    mitem = 0;  <span class="comment">/* extra inventory item for this monster */</span></div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    <span class="keywordflow">if</span> ((mcham = pm_to_cham(mndx)) != <a class="code" href="monst_8h.html#aa5d87eb24bb6295bb77589479298629a">CHAM_ORDINARY</a>) {</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;        <span class="comment">/* If you&#39;re protected with a ring, don&#39;t create</span></div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;<span class="comment">         * any shape-changing chameleons -dgk</span></div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="youprop_8h.html#a9e650a188eadc75d315da94987861e26">Protection_from_shape_changers</a>)</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;            mtmp-&gt;cham = <a class="code" href="monst_8h.html#aa5d87eb24bb6295bb77589479298629a">CHAM_ORDINARY</a>;</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;            mtmp-&gt;cham = mcham;</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;            (void) newcham(mtmp, rndmonst(), <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>, <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;        }</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mndx == PM_WIZARD_OF_YENDOR) {</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;        mtmp-&gt;iswiz = <a class="code" href="global_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;        <a class="code" href="flag_8h.html#a997133526e0c6bed44ebc0116a48b50a">flags</a>.<a class="code" href="structflag.html#a234ec46fbb73d319d628aa1cc320be8b">no_of_wizards</a>++;</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="flag_8h.html#a997133526e0c6bed44ebc0116a48b50a">flags</a>.<a class="code" href="structflag.html#a234ec46fbb73d319d628aa1cc320be8b">no_of_wizards</a> == 1 &amp;&amp; <a class="code" href="dungeon_8h.html#aa4eaf851320108eeaacde06ca61fe041">Is_earthlevel</a>(&amp;<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a89878490db5d54221f04b3fb44ebdaa2">uz</a>))</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;            mitem = SPE_DIG;</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mndx == PM_DJINNI) {</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;        <a class="code" href="flag_8h.html#a997133526e0c6bed44ebc0116a48b50a">flags</a>.<a class="code" href="structflag.html#a49bc19dacb9cf8ae7e97cf22bb964e2d">djinni_count</a>++;</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mndx == PM_GHOST) {</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;        <a class="code" href="flag_8h.html#a997133526e0c6bed44ebc0116a48b50a">flags</a>.<a class="code" href="structflag.html#a7c8d492cee8daf2733b18954793990e3">ghost_count</a>++;</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;        <span class="keywordflow">if</span> (!(mmflags &amp; <a class="code" href="hack_8h.html#a5d5a01be741383c3f65cf13efc3b1b3d">MM_NONAME</a>))</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;            mtmp = christen_monst(mtmp, rndghostname());</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mndx == PM_VLAD_THE_IMPALER) {</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;        mitem = CANDELABRUM_OF_INVOCATION;</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mndx == PM_CROESUS) {</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;        mitem = TWO_HANDED_SWORD;</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ptr-&gt;msound == <a class="code" href="monflag_8h.html#ad3e95482807ad66e48de9c5e1c865e63">MS_NEMESIS</a>) {</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;        mitem = BELL_OF_OPENING;</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mndx == PM_PESTILENCE) {</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;        mitem = POT_SICKNESS;</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;    }</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    <span class="keywordflow">if</span> (mitem &amp;&amp; allow_minvent) (void) mongets(mtmp, mitem);</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="decl_8h.html#abb694ef5acb9945ca69679a8360df51a">in_mklev</a>) {</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;        <span class="keywordflow">if</span>(((<a class="code" href="mondata_8h.html#a4e4710e23825db37f89573ca6ab1e3b4">is_ndemon</a>(ptr)) ||</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;            (mndx == PM_WUMPUS) ||</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;            (mndx == PM_LONG_WORM) ||</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;            (mndx == PM_GIANT_EEL)) &amp;&amp; !<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a3e83735264e74265e8c8777f73e159fa">uhave</a>.amulet &amp;&amp; rn2(5))</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;            mtmp-&gt;msleeping = <a class="code" href="global_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;        <span class="keywordflow">if</span>(byyou) {</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;            <a class="code" href="display_8c.html#a185c6ad6e4c5a6be26a371b9aa17c32e">newsym</a>(mtmp-&gt;<a class="code" href="structmonst.html#a9bc20171e986845daccff8aafd8b5194">mx</a>,mtmp-&gt;<a class="code" href="structmonst.html#a0b969d9b6af5b55393f6acfe508c6f08">my</a>);</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;            set_apparxy(mtmp);</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;        }</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    }</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="mondata_8h.html#adea0f5aad9185b27a8244ef26d388f15">is_dprince</a>(ptr) &amp;&amp; ptr-&gt;msound == <a class="code" href="monflag_8h.html#a5f84d434703b8711f037b27f2f6a345c">MS_BRIBE</a>) {</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;        mtmp-&gt;mpeaceful = mtmp-&gt;minvis = mtmp-&gt;perminvis = 1;</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;        mtmp-&gt;mavenge = 0;</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="decl_8h.html#a1aefaef88eef9075d8136d19410fd3b1">uwep</a> &amp;&amp; <a class="code" href="decl_8h.html#a1aefaef88eef9075d8136d19410fd3b1">uwep</a>-&gt;<a class="code" href="structobj.html#af03ce8a6a0ca51e8d8954fb1a1a31fbe">oartifact</a> == ART_EXCALIBUR)</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;        mtmp-&gt;mpeaceful = mtmp-&gt;<a class="code" href="structmonst.html#a6d525ec48f9d38cda6accbb0cb39efba">mtame</a> = <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    }</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;<span class="preprocessor">#ifndef DCC30_BUG</span></div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    <span class="keywordflow">if</span> (mndx == PM_LONG_WORM &amp;&amp; (mtmp-&gt;wormno = <a class="code" href="worm_8c.html#ab96a1b71bb8d3d3e793c97f280243188">get_wormno</a>()) != 0)</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    <span class="comment">/* DICE 3.0 doesn&#39;t like assigning and comparing mtmp-&gt;wormno in the</span></div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;<span class="comment">     * same expression.</span></div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    <span class="keywordflow">if</span> (mndx == PM_LONG_WORM &amp;&amp;</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;        (mtmp-&gt;wormno = <a class="code" href="worm_8c.html#ab96a1b71bb8d3d3e793c97f280243188">get_wormno</a>(), mtmp-&gt;wormno != 0))</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    {</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;        <span class="comment">/* we can now create worms with tails - 11/91 */</span></div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;        <a class="code" href="worm_8c.html#a05aef5dde943bbd2574310c3893d224c">initworm</a>(mtmp, rn2(5));</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="worm_8c.html#a49d9d0321fe56879dcea667fb15258a2">count_wsegs</a>(mtmp)) <a class="code" href="worm_8c.html#aa720d031cc0300330fbf45daaa61a260">place_worm_tail_randomly</a>(mtmp, x, y);</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    }</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    set_malign(mtmp);       <span class="comment">/* having finished peaceful changes */</span></div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    <span class="keywordflow">if</span>(anymon) {</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;        <span class="keywordflow">if</span> ((ptr-&gt;geno &amp; <a class="code" href="monflag_8h.html#aae2e1cac6d517b351255a0bc478afbc6">G_SGROUP</a>) &amp;&amp; rn2(2)) {</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;        <a class="code" href="makemon_8c.html#aa16585e924b656b4dff53e9a45eacecd">m_initsgrp</a>(mtmp, mtmp-&gt;<a class="code" href="structmonst.html#a9bc20171e986845daccff8aafd8b5194">mx</a>, mtmp-&gt;<a class="code" href="structmonst.html#a0b969d9b6af5b55393f6acfe508c6f08">my</a>);</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ptr-&gt;geno &amp; <a class="code" href="monflag_8h.html#a68e4cc969a84dd9ffbdb3bb18a403fe6">G_LGROUP</a>) {</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;        <span class="keywordflow">if</span>(rn2(3))  <a class="code" href="makemon_8c.html#a7cac21c6b7b26418bdfdccbce659d52d">m_initlgrp</a>(mtmp, mtmp-&gt;<a class="code" href="structmonst.html#a9bc20171e986845daccff8aafd8b5194">mx</a>, mtmp-&gt;<a class="code" href="structmonst.html#a0b969d9b6af5b55393f6acfe508c6f08">my</a>);</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;        <span class="keywordflow">else</span>        <a class="code" href="makemon_8c.html#aa16585e924b656b4dff53e9a45eacecd">m_initsgrp</a>(mtmp, mtmp-&gt;<a class="code" href="structmonst.html#a9bc20171e986845daccff8aafd8b5194">mx</a>, mtmp-&gt;<a class="code" href="structmonst.html#a0b969d9b6af5b55393f6acfe508c6f08">my</a>);</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;        }</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    }</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    <span class="keywordflow">if</span> (allow_minvent) {</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="mondata_8h.html#ab87aa9751f23a675185a8e27a2e68448">is_armed</a>(ptr))</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;        m_initweap(mtmp);   <span class="comment">/* equip with weapons / armor */</span></div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;        m_initinv(mtmp);  <span class="comment">/* add on a few special items incl. more armor */</span></div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;        <a class="code" href="worn_8c.html#a7e0d383cf09a999a333ec1154d0d52f3">m_dowear</a>(mtmp, <a class="code" href="global_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;        <span class="comment">/* no initial inventory is allowed */</span></div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;        <span class="keywordflow">if</span> (mtmp-&gt;<a class="code" href="structmonst.html#a480856d6a5db5610593c9816e525a978">minvent</a>) discard_minvent(mtmp);</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;        mtmp-&gt;<a class="code" href="structmonst.html#a480856d6a5db5610593c9816e525a978">minvent</a> = (<span class="keyword">struct </span><a class="code" href="structobj.html">obj</a> *)0;    <span class="comment">/* caller expects this */</span></div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    }</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;    <span class="keywordflow">if</span> ((ptr-&gt;mflags3 &amp; <a class="code" href="monflag_8h.html#aafd21a7b8b3ba16854e053a7982dbdc0">M3_WAITMASK</a>) &amp;&amp; !(mmflags &amp; <a class="code" href="hack_8h.html#a1a6292933fe0a0d5fc9473a27701d413">MM_NOWAIT</a>)) {</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;        <span class="keywordflow">if</span> (ptr-&gt;mflags3 &amp; <a class="code" href="monflag_8h.html#a5f22b81192022dc2e675cb658a7a71ac">M3_WAITFORU</a>)</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;            mtmp-&gt;<a class="code" href="structmonst.html#a5d03af85e4563c4068ac07d616af859f">mstrategy</a> |= <a class="code" href="monst_8h.html#a14b3e6ad96fe70130da9a110aa465ed6">STRAT_WAITFORU</a>;</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;        <span class="keywordflow">if</span> (ptr-&gt;mflags3 &amp; <a class="code" href="monflag_8h.html#af82bef56ee71b15c2745bbd1c5cc3549">M3_CLOSE</a>)</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;            mtmp-&gt;<a class="code" href="structmonst.html#a5d03af85e4563c4068ac07d616af859f">mstrategy</a> |= <a class="code" href="monst_8h.html#af63a669ab8d81fc300e6344e6da84a7b">STRAT_CLOSE</a>;</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    }</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="decl_8h.html#abb694ef5acb9945ca69679a8360df51a">in_mklev</a>)</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;        <a class="code" href="display_8c.html#a185c6ad6e4c5a6be26a371b9aa17c32e">newsym</a>(mtmp-&gt;<a class="code" href="structmonst.html#a9bc20171e986845daccff8aafd8b5194">mx</a>,mtmp-&gt;<a class="code" href="structmonst.html#a0b969d9b6af5b55393f6acfe508c6f08">my</a>);  <span class="comment">/* make sure the mon shows up */</span></div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    <span class="keywordflow">return</span>(mtmp);</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;}</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;<span class="keywordtype">int</span></div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;mbirth_limit(mndx)</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;int mndx;</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;{</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    <span class="comment">/* assert(MAXMONNO &lt; 255); */</span></div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;    <span class="keywordflow">return</span> (mndx == PM_NAZGUL ? 9 : mndx == PM_ERINYS ? 3 : <a class="code" href="global_8h.html#ae1e45066883010976eee941b1cbf4b0e">MAXMONNO</a>); </div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;}</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;<span class="comment">/* used for wand/scroll/spell of create monster */</span></div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;<span class="comment">/* returns TRUE iff you know monsters have been created */</span></div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;<span class="keywordtype">boolean</span></div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;create_critters(cnt, mptr)</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;int cnt;</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;struct <a class="code" href="structpermonst.html">permonst</a> *mptr;      <span class="comment">/* usually null; used for confused reading */</span></div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;{</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    <a class="code" href="structcoord.html">coord</a> c;</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    <span class="keywordtype">int</span> x, y;</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    <span class="keyword">struct </span><a class="code" href="structmonst.html">monst</a> *mon;</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    <span class="keywordtype">boolean</span> <a class="code" href="detect_8c.html#a2373e3a270d2b530119452501548080a">known</a> = <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;<span class="preprocessor">#ifdef WIZARD</span></div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    <span class="keywordtype">boolean</span> ask = <a class="code" href="flag_8h.html#a5f48dc2f029e22c05489fb20a491db4b">wizard</a>;</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    <span class="keywordflow">while</span> (cnt--) {</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;<span class="preprocessor">#ifdef WIZARD</span></div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;        <span class="keywordflow">if</span> (ask) {</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;        <span class="keywordflow">if</span> (create_particular()) {</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;            known = <a class="code" href="global_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;        }</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;        <span class="keywordflow">else</span> ask = <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;   <span class="comment">/* ESC will shut off prompting */</span></div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;        }</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;        x = <a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#ace2fd92f7f1a640e45775efe6e5f6cf7">ux</a>,  y = <a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a8571cf3a9cfc41c3f877d0f56cda11a9">uy</a>;</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;        <span class="comment">/* if in water, try to encourage an aquatic monster</span></div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;<span class="comment">           by finding and then specifying another wet location */</span></div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;        <span class="keywordflow">if</span> (!mptr &amp;&amp; <a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.uinwater &amp;&amp; <a class="code" href="teleport_8c.html#a61ffc1bbdf6259d46ae8abd0dce3ce31">enexto</a>(&amp;c, x, y, &amp;<a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[PM_GIANT_EEL]))</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;        x = c.<a class="code" href="structcoord.html#ac3e93ff628aa19d2888c5f6fa26f430d">x</a>,  y = c.<a class="code" href="structcoord.html#a2b099692d87f98e4844b615136ca37fb">y</a>;</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;        mon = makemon(mptr, x, y, <a class="code" href="hack_8h.html#ae449582f467baa0da531a6ea116a18f2">NO_MM_FLAGS</a>);</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;        <span class="keywordflow">if</span> (mon &amp;&amp; <a class="code" href="display_8h.html#a13f0a7cac1ceb73885a59b8598de1648">canspotmon</a>(mon)) known = <a class="code" href="global_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    }</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="detect_8c.html#a2373e3a270d2b530119452501548080a">known</a>;</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;}</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* OVL1 */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;<span class="preprocessor">#ifdef OVL0</span></div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;<a class="code" href="hack_8h.html#a6584b0687fb4e0040a85bbcdaa3e0ee1">STATIC_OVL</a> <span class="keywordtype">boolean</span></div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;uncommon(mndx)</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;int mndx;</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;{</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[mndx].geno &amp; (<a class="code" href="monflag_8h.html#a4958e656bfb1881e0d63df942488b1fd">G_NOGEN</a> | G_UNIQ)) <span class="keywordflow">return</span> <a class="code" href="global_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structmvitals.html">mvitals</a>[mndx].mvflags &amp; <a class="code" href="monflag_8h.html#ad600313e20617adbf44819cf9707971a">G_GONE</a>) <span class="keywordflow">return</span> <a class="code" href="global_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="dungeon_8h.html#a5cd7abaad3082e8a7b2f5ec30e44d2f4">Inhell</a>)</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;        <span class="keywordflow">return</span>(<a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[mndx].maligntyp &gt; <a class="code" href="align_8h.html#a58fee99b3a5a5db767e86d4c6705c9a1">A_NEUTRAL</a>);</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;        <span class="keywordflow">return</span>((<a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[mndx].geno &amp; <a class="code" href="monflag_8h.html#a3da4007839e17d9f696a70de0db6905a">G_HELL</a>) != 0);</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;}</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;<span class="comment"> *  shift the probability of a monster&#39;s generation by</span></div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;<span class="comment"> *  comparing the dungeon alignment and monster alignment.</span></div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;<span class="comment"> *  return an integer in the range of 0-5.</span></div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;<a class="code" href="hack_8h.html#a6584b0687fb4e0040a85bbcdaa3e0ee1">STATIC_OVL</a> <span class="keywordtype">int</span></div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;align_shift(ptr)</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;<a class="code" href="mkmaze_8c.html#a24ac627a7839caecddfc66f1d46033f0">register</a> struct <a class="code" href="structpermonst.html">permonst</a> *ptr;</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;{</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;    <span class="keyword">static</span> <a class="code" href="config1_8h.html#a9987bf629301f5fe76ddd96aa2717ca1">NEARDATA</a> <span class="keywordtype">long</span> oldmoves = 0L; <span class="comment">/* != 1, starting value of moves */</span></div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    <span class="keyword">static</span> <a class="code" href="config1_8h.html#a9987bf629301f5fe76ddd96aa2717ca1">NEARDATA</a> <a class="code" href="structs__level.html">s_level</a> *lev;</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    <span class="keyword">register</span> <span class="keywordtype">int</span> alshift;</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    <span class="keywordflow">if</span>(oldmoves != <a class="code" href="decl_8h.html#a2ccad6e8fb93740ed50c6d9a8f72ce2f">moves</a>) {</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    lev = Is_special(&amp;<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a89878490db5d54221f04b3fb44ebdaa2">uz</a>);</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    oldmoves = <a class="code" href="decl_8h.html#a2ccad6e8fb93740ed50c6d9a8f72ce2f">moves</a>;</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;    }</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;    <span class="keywordflow">switch</span>((lev) ? lev-&gt;flags.align : <a class="code" href="decl_8h.html#ac5ded4d65e561a90b475dc626c392a18">dungeons</a>[<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a89878490db5d54221f04b3fb44ebdaa2">uz</a>.<a class="code" href="structd__level.html#a035d301f0a8cafc6c757fbbda2b6935e">dnum</a>].<a class="code" href="structdungeon.html#a24aeb7474605b968237cd46e85f5c9cc">flags</a>.align) {</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    <span class="keywordflow">default</span>:    <span class="comment">/* just in case */</span></div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="align_8h.html#ae71f403a880b9d841b76e4cf64de1af6">AM_NONE</a>:   alshift = 0;</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="align_8h.html#ac5ed2af15492dbb6020886afd104f786">AM_LAWFUL</a>: alshift = (ptr-&gt;maligntyp+20)/(2*<a class="code" href="global_8h.html#aeefb2f9de83b5d8a58c0d9650bfb1f7c">ALIGNWEIGHT</a>);</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="align_8h.html#a67c4a32b3d1375a95c4416935399e338">AM_NEUTRAL</a>:    alshift = (20 - <a class="code" href="amidos_8c.html#a196e7f007a501cf9d0907cb2bab0b622">abs</a>(ptr-&gt;maligntyp))/<a class="code" href="global_8h.html#aeefb2f9de83b5d8a58c0d9650bfb1f7c">ALIGNWEIGHT</a>;</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="align_8h.html#a4bb126249b7cc0370b948950f11abe92">AM_CHAOTIC</a>:    alshift = (-(ptr-&gt;maligntyp-20))/(2*<a class="code" href="global_8h.html#aeefb2f9de83b5d8a58c0d9650bfb1f7c">ALIGNWEIGHT</a>);</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    }</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    <span class="keywordflow">return</span> alshift;</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;}</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;<span class="keyword">static</span> <a class="code" href="config1_8h.html#a9987bf629301f5fe76ddd96aa2717ca1">NEARDATA</a> <span class="keyword">struct </span>{</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    <span class="keywordtype">int</span> choice_count;</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    <span class="keywordtype">char</span> mchoices[<a class="code" href="permonst_8h.html#a3f241dd2d853d0d814ca915fcfd50d06">SPECIAL_PM</a>];  <span class="comment">/* value range is 0..127 */</span></div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;} rndmonst_state = { -1, {0} };</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;<span class="comment">/* select a random monster type */</span></div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;<span class="keyword">struct </span><a class="code" href="structpermonst.html">permonst</a> *</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;rndmonst()</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;{</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    <span class="keyword">register</span> <span class="keyword">struct </span><a class="code" href="structpermonst.html">permonst</a> *ptr;</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    <span class="keyword">register</span> <span class="keywordtype">int</span> mndx, ct;</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a89878490db5d54221f04b3fb44ebdaa2">uz</a>.<a class="code" href="structd__level.html#a035d301f0a8cafc6c757fbbda2b6935e">dnum</a> == <a class="code" href="decl_8h.html#a5c020f7f0a7d05e7db4caaec33caa9d7">quest_dnum</a> &amp;&amp; rn2(7) &amp;&amp; (ptr = <a class="code" href="questpgr_8c.html#a57090f6c6e025099a1ce1e0750885cc4">qt_montype</a>()) != 0)</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;        <span class="keywordflow">return</span> ptr;</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    <span class="keywordflow">if</span> (rndmonst_state.choice_count &lt; 0) {  <span class="comment">/* need to recalculate */</span></div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;        <span class="keywordtype">int</span> zlevel, minmlev, maxmlev;</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;        <span class="keywordtype">boolean</span> elemlevel;</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;<span class="preprocessor">#ifdef REINCARNATION</span></div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;        <span class="keywordtype">boolean</span> upper;</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;        rndmonst_state.choice_count = 0;</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;        <span class="comment">/* look for first common monster */</span></div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;        <span class="keywordflow">for</span> (mndx = <a class="code" href="permonst_8h.html#aedc8e4764f8cf4d681f6f6226eeaa6af">LOW_PM</a>; mndx &lt; <a class="code" href="permonst_8h.html#a3f241dd2d853d0d814ca915fcfd50d06">SPECIAL_PM</a>; mndx++) {</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;        <span class="keywordflow">if</span> (!uncommon(mndx)) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;        rndmonst_state.mchoices[mndx] = 0;</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;        }       </div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;        <span class="keywordflow">if</span> (mndx == SPECIAL_PM) {</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;        <span class="comment">/* evidently they&#39;ve all been exterminated */</span></div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;        pline(<span class="stringliteral">&quot;rndmonst: no common mons!&quot;</span>);</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;        <span class="keywordflow">return</span> (<span class="keyword">struct</span> <a class="code" href="structpermonst.html">permonst</a> *)0;</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;        } <span class="comment">/* else `mndx&#39; now ready for use below */</span></div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;        zlevel = level_difficulty();</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;        <span class="comment">/* determine the level of the weakest monster to make. */</span></div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;        minmlev = zlevel / 6;</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;        <span class="comment">/* determine the level of the strongest monster to make. */</span></div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;        maxmlev = (zlevel + <a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a6c7263bb25b91825bf7ecaab470d771a">ulevel</a>) / 2;</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;<span class="preprocessor">#ifdef REINCARNATION</span></div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;        upper = <a class="code" href="dungeon_8h.html#a2732117523c8540638daf4315dda16b9">Is_rogue_level</a>(&amp;<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a89878490db5d54221f04b3fb44ebdaa2">uz</a>);</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;        elemlevel = <a class="code" href="dungeon_8h.html#ae85486e6a752224948478a6e9dab0329">In_endgame</a>(&amp;<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a89878490db5d54221f04b3fb44ebdaa2">uz</a>) &amp;&amp; !<a class="code" href="dungeon_8h.html#af69a19c1eec378c1cebe9143febbe2b5">Is_astralevel</a>(&amp;<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a89878490db5d54221f04b3fb44ebdaa2">uz</a>);</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;<span class="comment"> *  Find out how many monsters exist in the range we have selected.</span></div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;        <span class="comment">/* (`mndx&#39; initialized above) */</span></div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;        <span class="keywordflow">for</span> ( ; mndx &lt; <a class="code" href="permonst_8h.html#a3f241dd2d853d0d814ca915fcfd50d06">SPECIAL_PM</a>; mndx++) {</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;        ptr = &amp;<a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[mndx];</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;        rndmonst_state.mchoices[mndx] = 0;</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="makemon_8c.html#a9ac5533f071a772a4fccedc3b969ca4f">tooweak</a>(mndx, minmlev) || <a class="code" href="makemon_8c.html#a74e808df5f0f897252cddd1bb798a895">toostrong</a>(mndx, maxmlev))</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;<span class="preprocessor">#ifdef REINCARNATION</span></div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;        <span class="keywordflow">if</span> (upper &amp;&amp; !isupper(<a class="code" href="decl_8h.html#a3de70854a5691ea43068787e1f9e44cf">def_monsyms</a>[(<span class="keywordtype">int</span>)(ptr-&gt;<a class="code" href="structpermonst.html#ab402dbf1bed9d0e595a2b3da6558da92">mlet</a>)])) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;        <span class="keywordflow">if</span> (elemlevel &amp;&amp; wrong_elem_type(ptr)) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;        <span class="keywordflow">if</span> (uncommon(mndx)) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="dungeon_8h.html#a5cd7abaad3082e8a7b2f5ec30e44d2f4">Inhell</a> &amp;&amp; (ptr-&gt;<a class="code" href="structpermonst.html#a0f9f93635f6228a61551c835640b3c1d">geno</a> &amp; <a class="code" href="monflag_8h.html#a24df05ca2acf54175d8f13416e8c9560">G_NOHELL</a>)) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;        ct = (int)(ptr-&gt;<a class="code" href="structpermonst.html#a0f9f93635f6228a61551c835640b3c1d">geno</a> &amp; <a class="code" href="monflag_8h.html#ac52e9284dd37996ba52a647af0862eee">G_FREQ</a>) + align_shift(ptr);</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;        <span class="keywordflow">if</span> (ct &lt; 0 || ct &gt; 127)</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;            <a class="code" href="txt2iff_8c.html#ab0824b6f5eb51db9371d2e9a222249d3">panic</a>(<span class="stringliteral">&quot;rndmonst: bad count [#%d: %d]&quot;</span>, mndx, ct);</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;        rndmonst_state.choice_count += ct;</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;        rndmonst_state.mchoices[mndx] = (char)ct;</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;        }</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;<span class="comment"> *      Possible modification:  if choice_count is &quot;too low&quot;,</span></div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;<span class="comment"> *      expand minmlev..maxmlev range and try again.</span></div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;    } <span class="comment">/* choice_count+mchoices[] recalc */</span></div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    <span class="keywordflow">if</span> (rndmonst_state.choice_count &lt;= 0) {</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;        <span class="comment">/* maybe no common mons left, or all are too weak or too strong */</span></div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;        Norep(<span class="stringliteral">&quot;rndmonst: choice_count=%d&quot;</span>, rndmonst_state.choice_count);</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;        <span class="keywordflow">return</span> (<span class="keyword">struct</span> <a class="code" href="structpermonst.html">permonst</a> *)0;</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    }</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;<span class="comment"> *  Now, select a monster at random.</span></div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;    ct = rnd(rndmonst_state.choice_count);</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;    <span class="keywordflow">for</span> (mndx = <a class="code" href="permonst_8h.html#aedc8e4764f8cf4d681f6f6226eeaa6af">LOW_PM</a>; mndx &lt; <a class="code" href="permonst_8h.html#a3f241dd2d853d0d814ca915fcfd50d06">SPECIAL_PM</a>; mndx++)</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;        <span class="keywordflow">if</span> ((ct -= (<span class="keywordtype">int</span>)rndmonst_state.mchoices[mndx]) &lt;= 0) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    <span class="keywordflow">if</span> (mndx == SPECIAL_PM || uncommon(mndx)) { <span class="comment">/* shouldn&#39;t happen */</span></div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;        impossible(<span class="stringliteral">&quot;rndmonst: bad `mndx&#39; [#%d]&quot;</span>, mndx);</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;        <span class="keywordflow">return</span> (<span class="keyword">struct</span> <a class="code" href="structpermonst.html">permonst</a> *)0;</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;    }</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[mndx];</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;}</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;<span class="comment">/* called when you change level (experience or dungeon depth) or when</span></div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;<span class="comment">   monster species can no longer be created (genocide or extinction) */</span></div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;reset_rndmonst(mndx)</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;int mndx;   <span class="comment">/* particular species that can no longer be created */</span></div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;{</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;    <span class="comment">/* cached selection info is out of date */</span></div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    <span class="keywordflow">if</span> (mndx == <a class="code" href="permonst_8h.html#a6485376b5cfc1627d2c68fcb98432cb0">NON_PM</a>) {</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;        rndmonst_state.choice_count = -1;   <span class="comment">/* full recalc needed */</span></div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mndx &lt; SPECIAL_PM) {</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;        rndmonst_state.choice_count -= rndmonst_state.mchoices[mndx];</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;        rndmonst_state.mchoices[mndx] = 0;</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;    } <span class="comment">/* note: safe to ignore extinction of unique monsters */</span></div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;}</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* OVL0 */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;<span class="preprocessor">#ifdef OVL1</span></div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;<span class="comment">/*  The routine below is used to make one of the multiple types</span></div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;<span class="comment"> *  of a given monster class.  The second parameter specifies a</span></div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;<span class="comment"> *  special casing bit mask to allow the normal genesis</span></div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;<span class="comment"> *  masks to be deactivated.  Returns 0 if no monsters</span></div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;<span class="comment"> *  in that class can be made.</span></div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;<span class="keyword">struct </span><a class="code" href="structpermonst.html">permonst</a> *</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;mkclass(<span class="keyword">class</span>,spc)</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;char    class;</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;<span class="keywordtype">int</span> spc;</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;{</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;    <span class="keyword">register</span> <span class="keywordtype">int</span>    first, last, num = 0;</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;    <span class="keywordtype">int</span> maxmlev, mask = (<a class="code" href="monflag_8h.html#a4958e656bfb1881e0d63df942488b1fd">G_NOGEN</a> | <a class="code" href="monflag_8h.html#ab99532c9310183c20279ce79e7f594dd">G_UNIQ</a>) &amp; ~spc;</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;    maxmlev = level_difficulty() &gt;&gt; 1;</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;    <span class="keywordflow">if</span>(class &lt; 1 || class &gt;= <a class="code" href="monsym_8h.html#a8c6bb361baecfba17240e1e0af655e1b">MAXMCLASSES</a>) {</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;        impossible(<span class="stringliteral">&quot;mkclass called with bad class!&quot;</span>);</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;        <span class="keywordflow">return</span>((<span class="keyword">struct</span> <a class="code" href="structpermonst.html">permonst</a> *) 0);</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;    }</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;<span class="comment">/*  Assumption #1:  monsters of a given class are contiguous in the</span></div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;<span class="comment"> *          mons[] array.</span></div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;    <span class="keywordflow">for</span> (first = <a class="code" href="permonst_8h.html#aedc8e4764f8cf4d681f6f6226eeaa6af">LOW_PM</a>; first &lt; <a class="code" href="permonst_8h.html#a3f241dd2d853d0d814ca915fcfd50d06">SPECIAL_PM</a>; first++)</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[first].<a class="code" href="structpermonst.html#ab402dbf1bed9d0e595a2b3da6558da92">mlet</a> == <span class="keyword">class</span>) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;    <span class="keywordflow">if</span> (first == SPECIAL_PM) <span class="keywordflow">return</span> (<span class="keyword">struct</span> <a class="code" href="structpermonst.html">permonst</a> *) 0;</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;    <span class="keywordflow">for</span> (last = first;</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;        last &lt; SPECIAL_PM &amp;&amp; <a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[last].<a class="code" href="structpermonst.html#ab402dbf1bed9d0e595a2b3da6558da92">mlet</a> == <span class="keyword">class</span>; last++)</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;        <span class="keywordflow">if</span> (!(<a class="code" href="structmvitals.html">mvitals</a>[last].mvflags &amp; G_GONE) &amp;&amp; !(<a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[last].<a class="code" href="structpermonst.html#a0f9f93635f6228a61551c835640b3c1d">geno</a> &amp; mask)</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;                    &amp;&amp; !<a class="code" href="mondata_8h.html#a79f42d78ef48eeced079d5c5de9b0fa2">is_placeholder</a>(&amp;<a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[last])) {</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;        <span class="comment">/* consider it */</span></div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;        <span class="keywordflow">if</span>(num &amp;&amp; <a class="code" href="makemon_8c.html#a74e808df5f0f897252cddd1bb798a895">toostrong</a>(last, maxmlev) &amp;&amp;</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;           monstr[last] != monstr[last-1] &amp;&amp; rn2(2)) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;        num += <a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[last].<a class="code" href="structpermonst.html#a0f9f93635f6228a61551c835640b3c1d">geno</a> &amp; <a class="code" href="monflag_8h.html#ac52e9284dd37996ba52a647af0862eee">G_FREQ</a>;</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;        }</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;    <span class="keywordflow">if</span>(!num) <span class="keywordflow">return</span>((<span class="keyword">struct</span> <a class="code" href="structpermonst.html">permonst</a> *) 0);</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;<span class="comment">/*  Assumption #2:  monsters of a given class are presented in ascending</span></div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;<span class="comment"> *          order of strength.</span></div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;    <span class="keywordflow">for</span>(num = rnd(num); num &gt; 0; first++)</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;        <span class="keywordflow">if</span> (!(<a class="code" href="structmvitals.html">mvitals</a>[first].mvflags &amp; G_GONE) &amp;&amp; !(<a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[first].<a class="code" href="structpermonst.html#a0f9f93635f6228a61551c835640b3c1d">geno</a> &amp; mask)</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;                    &amp;&amp; !<a class="code" href="mondata_8h.html#a79f42d78ef48eeced079d5c5de9b0fa2">is_placeholder</a>(&amp;<a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[first])) {</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;        <span class="comment">/* skew towards lower value monsters at lower exp. levels */</span></div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;        num -= <a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[first].<a class="code" href="structpermonst.html#a0f9f93635f6228a61551c835640b3c1d">geno</a> &amp; <a class="code" href="monflag_8h.html#ac52e9284dd37996ba52a647af0862eee">G_FREQ</a>;</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;        <span class="keywordflow">if</span> (num &amp;&amp; adj_lev(&amp;<a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[first]) &gt; (<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a6c7263bb25b91825bf7ecaab470d771a">ulevel</a>*2)) {</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;            <span class="comment">/* but not when multiple monsters are same level */</span></div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[first].<a class="code" href="structpermonst.html#aeed45d1ab54620bc7e5242b76f1c3c5f">mlevel</a> != <a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[first+1].<a class="code" href="structpermonst.html#aeed45d1ab54620bc7e5242b76f1c3c5f">mlevel</a>)</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;            num--;</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;        }</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;        }</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    first--; <span class="comment">/* correct an off-by-one error */</span></div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;    <span class="keywordflow">return</span>(&amp;<a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[first]);</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;}</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;<span class="keywordtype">int</span></div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;adj_lev(ptr)    <span class="comment">/* adjust strength of monsters based on u.uz and u.ulevel */</span></div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;<a class="code" href="mkmaze_8c.html#a24ac627a7839caecddfc66f1d46033f0">register</a> struct <a class="code" href="structpermonst.html">permonst</a> *ptr;</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;{</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;    <span class="keywordtype">int</span> tmp, tmp2;</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;    <span class="keywordflow">if</span> (ptr == &amp;<a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[PM_WIZARD_OF_YENDOR]) {</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;        <span class="comment">/* does not depend on other strengths, but does get stronger</span></div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;<span class="comment">         * every time he is killed</span></div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;        tmp = ptr-&gt;<a class="code" href="structpermonst.html#aeed45d1ab54620bc7e5242b76f1c3c5f">mlevel</a> + <a class="code" href="structmvitals.html">mvitals</a>[PM_WIZARD_OF_YENDOR].<a class="code" href="structmvitals.html#aa0f6a023b807f36c252377132ed25e72">died</a>;</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;        <span class="keywordflow">if</span> (tmp &gt; 49) tmp = 49;</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;        <span class="keywordflow">return</span> tmp;</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;    }</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;    <span class="keywordflow">if</span>((tmp = ptr-&gt;mlevel) &gt; 49) <span class="keywordflow">return</span>(50); <span class="comment">/* &quot;special&quot; demons/devils */</span></div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;    tmp2 = (level_difficulty() - tmp);</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;    <span class="keywordflow">if</span>(tmp2 &lt; 0) tmp--;     <span class="comment">/* if mlevel &gt; u.uz decrement tmp */</span></div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    <span class="keywordflow">else</span> tmp += (tmp2 / 5);     <span class="comment">/* else increment 1 per five diff */</span></div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;    tmp2 = (<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a6c7263bb25b91825bf7ecaab470d771a">ulevel</a> - ptr-&gt;mlevel);    <span class="comment">/* adjust vs. the player */</span></div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;    <span class="keywordflow">if</span>(tmp2 &gt; 0) tmp += (tmp2 / 4);     <span class="comment">/* level as well */</span></div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;    tmp2 = (3 * ((int) ptr-&gt;mlevel))/ 2;    <span class="comment">/* crude upper limit */</span></div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;    <span class="keywordflow">if</span> (tmp2 &gt; 49) tmp2 = 49;       <span class="comment">/* hard upper limit */</span></div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;    <span class="keywordflow">return</span>((tmp &gt; tmp2) ? tmp2 : (tmp &gt; 0 ? tmp : 0)); <span class="comment">/* 0 lower limit */</span></div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;}</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* OVL1 */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;<span class="preprocessor">#ifdef OVLB</span></div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;<span class="keyword">struct </span><a class="code" href="structpermonst.html">permonst</a> *</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;grow_up(mtmp, victim)   <span class="comment">/* `mtmp&#39; might &quot;grow up&quot; into a bigger version */</span></div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;struct <a class="code" href="structmonst.html">monst</a> *mtmp, *victim;</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;{</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;    <span class="keywordtype">int</span> oldtype, newtype, max_increase, cur_increase,</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;        lev_limit, hp_threshold;</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    <span class="keyword">struct </span><a class="code" href="structpermonst.html">permonst</a> *ptr = mtmp-&gt;data;</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    <span class="comment">/* monster died after killing enemy but before calling this function */</span></div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    <span class="comment">/* currently possible if killing a gas spore */</span></div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    <span class="keywordflow">if</span> (mtmp-&gt;mhp &lt;= 0)</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;        <span class="keywordflow">return</span> ((<span class="keyword">struct</span> <a class="code" href="structpermonst.html">permonst</a> *)0);</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    <span class="comment">/* note:  none of the monsters with special hit point calculations</span></div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;<span class="comment">       have both little and big forms */</span></div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;    oldtype = monsndx(ptr);</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;    newtype = little_to_big(oldtype);</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;    <span class="keywordflow">if</span> (newtype == PM_PRIEST &amp;&amp; mtmp-&gt;female) newtype = PM_PRIESTESS;</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;    <span class="comment">/* growth limits differ depending on method of advancement */</span></div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;    <span class="keywordflow">if</span> (victim) {       <span class="comment">/* killed a monster */</span></div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;<span class="comment">         * The HP threshold is the maximum number of hit points for the</span></div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;<span class="comment">         * current level; once exceeded, a level will be gained.</span></div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;<span class="comment">         * Possible bug: if somehow the hit points are already higher</span></div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;<span class="comment">         * than that, monster will gain a level without any increase in HP.</span></div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;        hp_threshold = mtmp-&gt;m_lev * 8;     <span class="comment">/* normal limit */</span></div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;        <span class="keywordflow">if</span> (!mtmp-&gt;m_lev)</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;        hp_threshold = 4;</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="mondata_8h.html#a6fd7f5f330b2b760d6a27b06062945a4">is_golem</a>(ptr)) <span class="comment">/* strange creatures */</span></div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;        hp_threshold = ((mtmp-&gt;mhpmax / 10) + 1) * 10 - 1;</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (is_home_elemental(ptr))</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;        hp_threshold *= 3;</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;        lev_limit = 3 * (int)ptr-&gt;<a class="code" href="structpermonst.html#aeed45d1ab54620bc7e5242b76f1c3c5f">mlevel</a> / 2;   <span class="comment">/* same as adj_lev() */</span></div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;        <span class="comment">/* If they can grow up, be sure the level is high enough for that */</span></div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;        if (oldtype != newtype &amp;&amp; <a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[newtype].<a class="code" href="structpermonst.html#aeed45d1ab54620bc7e5242b76f1c3c5f">mlevel</a> &gt; lev_limit)</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;        lev_limit = (int)<a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[newtype].<a class="code" href="structpermonst.html#aeed45d1ab54620bc7e5242b76f1c3c5f">mlevel</a>;</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;        <span class="comment">/* number of hit points to gain; unlike for the player, we put</span></div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;<span class="comment">           the limit at the bottom of the next level rather than the top */</span></div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;        max_increase = rnd((<span class="keywordtype">int</span>)victim-&gt;m_lev + 1);</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;        <span class="keywordflow">if</span> (mtmp-&gt;mhpmax + max_increase &gt; hp_threshold + 1)</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;        max_increase = <a class="code" href="hack_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>((hp_threshold + 1) - mtmp-&gt;mhpmax, 0);</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;        cur_increase = (max_increase &gt; 1) ? rn2(max_increase) : 0;</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;        <span class="comment">/* a gain level potion or wraith corpse; always go up a level</span></div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;<span class="comment">           unless already at maximum (49 is hard upper limit except</span></div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;<span class="comment">           for demon lords, who start at 50 and can&#39;t go any higher) */</span></div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;        max_increase = cur_increase = rnd(8);</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;        hp_threshold = 0;   <span class="comment">/* smaller than `mhpmax + max_increase&#39; */</span></div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;        lev_limit = 50;     <span class="comment">/* recalc below */</span></div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;    }</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;    mtmp-&gt;mhpmax += max_increase;</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;    mtmp-&gt;mhp += cur_increase;</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;    <span class="keywordflow">if</span> (mtmp-&gt;mhpmax &lt;= hp_threshold)</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;        <span class="keywordflow">return</span> ptr;     <span class="comment">/* doesn&#39;t gain a level */</span></div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="mondata_8h.html#a8bca282ec1e3773ac219c334e54071d5">is_mplayer</a>(ptr)) lev_limit = 30;    <span class="comment">/* same as player */</span></div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lev_limit &lt; 5) lev_limit = 5;  <span class="comment">/* arbitrary */</span></div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lev_limit &gt; 49) lev_limit = (ptr-&gt;<a class="code" href="structpermonst.html#aeed45d1ab54620bc7e5242b76f1c3c5f">mlevel</a> &gt; 49 ? 50 : 49);</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;    <span class="keywordflow">if</span> ((<span class="keywordtype">int</span>)++mtmp-&gt;m_lev &gt;= <a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[newtype].<a class="code" href="structpermonst.html#aeed45d1ab54620bc7e5242b76f1c3c5f">mlevel</a> &amp;&amp; newtype != oldtype) {</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;        ptr = &amp;<a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[newtype];</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="structmvitals.html">mvitals</a>[newtype].mvflags &amp; G_GENOD) {   <span class="comment">/* allow G_EXTINCT */</span></div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="display_8h.html#a13881a5dc42ea2076abd050773eee913">sensemon</a>(mtmp))</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;            pline(<span class="stringliteral">&quot;As %s grows up into %s, %s %s!&quot;</span>, mon_nam(mtmp),</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;            an(ptr-&gt;<a class="code" href="structpermonst.html#ae92da7d141243d7e37d4a12340bb248f">mname</a>), <a class="code" href="you_8h.html#a02ab05651821bbe8851d8459a27553e3">mhe</a>(mtmp),</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;            <a class="code" href="mondata_8h.html#aeae2da0c70efc6db9195f4216943a3a1">nonliving</a>(ptr) ? <span class="stringliteral">&quot;expires&quot;</span> : <span class="stringliteral">&quot;dies&quot;</span>);</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;        set_mon_data(mtmp, ptr, -1);    <span class="comment">/* keep mvitals[] accurate */</span></div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;        mondied(mtmp);</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;        <span class="keywordflow">return</span> (<span class="keyword">struct</span> <a class="code" href="structpermonst.html">permonst</a> *)0;</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;        }</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;        set_mon_data(mtmp, ptr, 1);     <span class="comment">/* preserve intrinsics */</span></div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;        <a class="code" href="display_8c.html#a185c6ad6e4c5a6be26a371b9aa17c32e">newsym</a>(mtmp-&gt;mx, mtmp-&gt;my);     <span class="comment">/* color may change */</span></div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;        lev_limit = (int)mtmp-&gt;m_lev;   <span class="comment">/* never undo increment */</span></div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;    }</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;    <span class="comment">/* sanity checks */</span></div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;    <span class="keywordflow">if</span> ((<span class="keywordtype">int</span>)mtmp-&gt;m_lev &gt; lev_limit) {</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;        mtmp-&gt;m_lev--;  <span class="comment">/* undo increment */</span></div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;        <span class="comment">/* HP might have been allowed to grow when it shouldn&#39;t */</span></div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;        <span class="keywordflow">if</span> (mtmp-&gt;mhpmax == hp_threshold + 1) mtmp-&gt;mhpmax--;</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;    }</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;    <span class="keywordflow">if</span> (mtmp-&gt;mhpmax &gt; 50*8) mtmp-&gt;mhpmax = 50*8;     <span class="comment">/* absolute limit */</span></div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;    <span class="keywordflow">if</span> (mtmp-&gt;mhp &gt; mtmp-&gt;mhpmax) mtmp-&gt;mhp = mtmp-&gt;mhpmax;</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;    <span class="keywordflow">return</span> ptr;</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;}</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* OVLB */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;<span class="preprocessor">#ifdef OVL1</span></div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;<span class="keywordtype">int</span></div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;mongets(mtmp, otyp)</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;<a class="code" href="mkmaze_8c.html#a24ac627a7839caecddfc66f1d46033f0">register</a> struct <a class="code" href="structmonst.html">monst</a> *mtmp;</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;<a class="code" href="mkmaze_8c.html#a24ac627a7839caecddfc66f1d46033f0">register</a> <span class="keywordtype">int</span> otyp;</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;{</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;    <span class="keyword">register</span> <span class="keyword">struct </span><a class="code" href="structobj.html">obj</a> *<a class="code" href="mhitu_8c.html#a8cf94e09e1a72daf7050a2817ba70974">otmp</a>;</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structobj.html#a14fc8dc59e9073bfbf1e170875a98448">spe</a>;</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;    <span class="keywordflow">if</span> (!otyp) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;    otmp = mksobj(otyp, <a class="code" href="global_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>, <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;    <span class="keywordflow">if</span> (otmp) {</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;        <span class="keywordflow">if</span> (mtmp-&gt;data-&gt;mlet == <a class="code" href="monsym_8h.html#a6428ef16323852a393830dbac4bc72ee">S_DEMON</a>) {</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;        <span class="comment">/* demons never get blessed objects */</span></div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;        <span class="keywordflow">if</span> (otmp-&gt;blessed) curse(otmp);</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="mondata_8h.html#a6bd06bc29ef4aaf6e4f982b587e1ea88">is_lminion</a>(mtmp)) {</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;        <span class="comment">/* lawful minions don&#39;t get cursed, bad, or rusting objects */</span></div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;        otmp-&gt;cursed = <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;        <span class="keywordflow">if</span>(otmp-&gt;<a class="code" href="structobj.html#a14fc8dc59e9073bfbf1e170875a98448">spe</a> &lt; 0) otmp-&gt;<a class="code" href="structobj.html#a14fc8dc59e9073bfbf1e170875a98448">spe</a> = 0;</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;        otmp-&gt;oerodeproof = <a class="code" href="global_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="mondata_8h.html#a8bca282ec1e3773ac219c334e54071d5">is_mplayer</a>(mtmp-&gt;data) &amp;&amp; <a class="code" href="obj_8h.html#ae284b60ec8919e5fb325f5a7b39a093c">is_sword</a>(otmp)) {</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;        otmp-&gt;<a class="code" href="structobj.html#a14fc8dc59e9073bfbf1e170875a98448">spe</a> = (3 + rn2(4));</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;        }</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;        <span class="keywordflow">if</span>(otmp-&gt;<a class="code" href="structobj.html#a95eb282afebd3599996035e8aab71751">otyp</a> == CANDELABRUM_OF_INVOCATION) {</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;        otmp-&gt;<a class="code" href="structobj.html#a14fc8dc59e9073bfbf1e170875a98448">spe</a> = 0;</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;        otmp-&gt;<a class="code" href="structobj.html#a3dd6f7cf99f6a946d0ca406cfca5c23d">age</a> = 0L;</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;        otmp-&gt;lamplit = <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;        otmp-&gt;blessed = otmp-&gt;cursed = <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (otmp-&gt;<a class="code" href="structobj.html#a95eb282afebd3599996035e8aab71751">otyp</a> == BELL_OF_OPENING) {</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;        otmp-&gt;blessed = otmp-&gt;cursed = <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (otmp-&gt;<a class="code" href="structobj.html#a95eb282afebd3599996035e8aab71751">otyp</a> == SPE_BOOK_OF_THE_DEAD) {</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;        otmp-&gt;blessed = <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;        otmp-&gt;cursed = <a class="code" href="global_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;        }</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;        <span class="comment">/* leaders don&#39;t tolerate inferior quality battle gear */</span></div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="mondata_8h.html#a88f89429a4a8ec2fdaa354be5bc612c1">is_prince</a>(mtmp-&gt;data)) {</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;        <span class="keywordflow">if</span> (otmp-&gt;<a class="code" href="structobj.html#a716ba3ee00602dede9ea5c68c74d45bd">oclass</a> == <a class="code" href="objclass_8h.html#a615c2dc6d3501d6b5e14c3373bc37ec1">WEAPON_CLASS</a> &amp;&amp; otmp-&gt;<a class="code" href="structobj.html#a14fc8dc59e9073bfbf1e170875a98448">spe</a> &lt; 1)</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;            otmp-&gt;<a class="code" href="structobj.html#a14fc8dc59e9073bfbf1e170875a98448">spe</a> = 1;</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (otmp-&gt;<a class="code" href="structobj.html#a716ba3ee00602dede9ea5c68c74d45bd">oclass</a> == <a class="code" href="objclass_8h.html#a038c650e790f05f72fa9204b1b82660b">ARMOR_CLASS</a> &amp;&amp; otmp-&gt;<a class="code" href="structobj.html#a14fc8dc59e9073bfbf1e170875a98448">spe</a> &lt; 0)</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;            otmp-&gt;<a class="code" href="structobj.html#a14fc8dc59e9073bfbf1e170875a98448">spe</a> = 0;</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;        }</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;        spe = otmp-&gt;<a class="code" href="structobj.html#a14fc8dc59e9073bfbf1e170875a98448">spe</a>;</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;        (void) mpickobj(mtmp, otmp);    <span class="comment">/* might free otmp */</span></div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;        <span class="keywordflow">return</span>(spe);</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">return</span>(0);</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;}</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* OVL1 */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;<span class="preprocessor">#ifdef OVLB</span></div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;<span class="keywordtype">int</span></div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;golemhp(<a class="code" href="lev__main_8c.html#ac765329451135abec74c45e1897abf26">type</a>)</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;int <a class="code" href="lev__main_8c.html#ac765329451135abec74c45e1897abf26">type</a>;</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;{</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;    <span class="keywordflow">switch</span>(type) {</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;        <span class="keywordflow">case</span> PM_STRAW_GOLEM: <span class="keywordflow">return</span> 20;</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;        <span class="keywordflow">case</span> PM_PAPER_GOLEM: <span class="keywordflow">return</span> 20;</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;        <span class="keywordflow">case</span> PM_ROPE_GOLEM: <span class="keywordflow">return</span> 30;</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;        <span class="keywordflow">case</span> PM_LEATHER_GOLEM: <span class="keywordflow">return</span> 40;</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;        <span class="keywordflow">case</span> PM_GOLD_GOLEM: <span class="keywordflow">return</span> 40;</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;        <span class="keywordflow">case</span> PM_WOOD_GOLEM: <span class="keywordflow">return</span> 50;</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;        <span class="keywordflow">case</span> PM_FLESH_GOLEM: <span class="keywordflow">return</span> 40;</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;        <span class="keywordflow">case</span> PM_CLAY_GOLEM: <span class="keywordflow">return</span> 50;</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;        <span class="keywordflow">case</span> PM_STONE_GOLEM: <span class="keywordflow">return</span> 60;</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;        <span class="keywordflow">case</span> PM_GLASS_GOLEM: <span class="keywordflow">return</span> 60;</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;        <span class="keywordflow">case</span> PM_IRON_GOLEM: <span class="keywordflow">return</span> 80;</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;        <span class="keywordflow">default</span>: <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;    }</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;}</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* OVLB */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;<span class="preprocessor">#ifdef OVL1</span></div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;<span class="comment"> *  Alignment vs. yours determines monster&#39;s attitude to you.</span></div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;<span class="comment"> *  ( some &quot;animal&quot; types are co-aligned, but also hungry )</span></div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;<span class="keywordtype">boolean</span></div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;peace_minded(ptr)</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;<a class="code" href="mkmaze_8c.html#a24ac627a7839caecddfc66f1d46033f0">register</a> struct <a class="code" href="structpermonst.html">permonst</a> *ptr;</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;{</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;    <a class="code" href="align_8h.html#a3e17b7a656899892e425fc89481aa2ab">aligntyp</a> mal = ptr-&gt;<a class="code" href="structpermonst.html#ad92ab559c3dc08cc1a40f3413377d787">maligntyp</a>, ual = <a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a3f202dd89a837a9772a9eb1f1965f30c">ualign</a>.<a class="code" href="structalign.html#a0dadfa91b9ff06447f91ea8a2b898827">type</a>;</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="mondata_8h.html#a8a9268e51bec1a39e89e4a969721179a">always_peaceful</a>(ptr)) <span class="keywordflow">return</span> <a class="code" href="global_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="mondata_8h.html#a4009754855425b7a9d4f1256086c82e2">always_hostile</a>(ptr)) <span class="keywordflow">return</span> <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;    <span class="keywordflow">if</span> (ptr-&gt;msound == <a class="code" href="monflag_8h.html#a57dd24aec371766f02747931edfcad46">MS_LEADER</a> || ptr-&gt;msound == <a class="code" href="monflag_8h.html#a1e410cbbb06eda4ed3d5c3aa6e1bf69f">MS_GUARDIAN</a>)</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="global_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;    <span class="keywordflow">if</span> (ptr-&gt;msound == <a class="code" href="monflag_8h.html#ad3e95482807ad66e48de9c5e1c865e63">MS_NEMESIS</a>)  <span class="keywordflow">return</span> <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="mondata_8h.html#a6fdc7de403be6968bbd1ea97e851c883">race_peaceful</a>(ptr)) <span class="keywordflow">return</span> <a class="code" href="global_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="mondata_8h.html#a5ab488202bebe9f5289b187f1bc0ef07">race_hostile</a>(ptr)) <span class="keywordflow">return</span> <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;    <span class="comment">/* the monster is hostile if its alignment is different from the</span></div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;<span class="comment">     * player&#39;s */</span></div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;    <span class="keywordflow">if</span> (sgn(mal) != sgn(ual)) <span class="keywordflow">return</span> <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;    <span class="comment">/* Negative monster hostile to player with Amulet. */</span></div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;    <span class="keywordflow">if</span> (mal &lt; <a class="code" href="align_8h.html#a58fee99b3a5a5db767e86d4c6705c9a1">A_NEUTRAL</a> &amp;&amp; <a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a3e83735264e74265e8c8777f73e159fa">uhave</a>.amulet) <span class="keywordflow">return</span> <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;    <span class="comment">/* minions are hostile to players that have strayed at all */</span></div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="mondata_8h.html#acc1e74b977b15476da10116f621dddfe">is_minion</a>(ptr)) <span class="keywordflow">return</span>((<span class="keywordtype">boolean</span>)(<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a3f202dd89a837a9772a9eb1f1965f30c">ualign</a>.<a class="code" href="structalign.html#ab3a768425270c33f059e3ead817e4e83">record</a> &gt;= 0));</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;    <span class="comment">/* Last case:  a chance of a co-aligned monster being</span></div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;<span class="comment">     * hostile.  This chance is greater if the player has strayed</span></div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;<span class="comment">     * (u.ualign.record negative) or the monster is not strongly aligned.</span></div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;    <span class="keywordflow">return</span>((<span class="keywordtype">boolean</span>)(!!rn2(16 + (<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a3f202dd89a837a9772a9eb1f1965f30c">ualign</a>.<a class="code" href="structalign.html#ab3a768425270c33f059e3ead817e4e83">record</a> &lt; -15 ? -15 : <a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a3f202dd89a837a9772a9eb1f1965f30c">ualign</a>.<a class="code" href="structalign.html#ab3a768425270c33f059e3ead817e4e83">record</a>)) &amp;&amp;</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;        !!rn2(2 + <a class="code" href="amidos_8c.html#a196e7f007a501cf9d0907cb2bab0b622">abs</a>(mal))));</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;}</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;<span class="comment">/* Set malign to have the proper effect on player alignment if monster is</span></div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;<span class="comment"> * killed.  Negative numbers mean it&#39;s bad to kill this monster; positive</span></div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;<span class="comment"> * numbers mean it&#39;s good.  Since there are more hostile monsters than</span></div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;<span class="comment"> * peaceful monsters, the penalty for killing a peaceful monster should be</span></div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;<span class="comment"> * greater than the bonus for killing a hostile monster to maintain balance.</span></div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;<span class="comment"> * Rules:</span></div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;<span class="comment"> *   it&#39;s bad to kill peaceful monsters, potentially worse to kill always-</span></div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;<span class="comment"> *  peaceful monsters</span></div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;<span class="comment"> *   it&#39;s never bad to kill a hostile monster, although it may not be good</span></div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;set_malign(mtmp)</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;struct <a class="code" href="structmonst.html">monst</a> *mtmp;</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;{</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;    <a class="code" href="config_8h.html#a0fd9ce9d735064461bebfe6037026093">schar</a> mal = mtmp-&gt;<a class="code" href="structmonst.html#a5c8369d63f2ae0ca4466258542edecbe">data</a>-&gt;<a class="code" href="structpermonst.html#ad92ab559c3dc08cc1a40f3413377d787">maligntyp</a>;</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;    <span class="keywordtype">boolean</span> coaligned;</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;    <span class="keywordflow">if</span> (mtmp-&gt;ispriest || mtmp-&gt;isminion) {</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;        <span class="comment">/* some monsters have individual alignments; check them */</span></div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;        <span class="keywordflow">if</span> (mtmp-&gt;ispriest)</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;            mal = <a class="code" href="epri_8h.html#a8af728f8ed3894c68f86757f5308af8f">EPRI</a>(mtmp)-&gt;shralign;</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mtmp-&gt;isminion)</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;            mal = <a class="code" href="emin_8h.html#aeda364b460b280fc3499c0f672979186">EMIN</a>(mtmp)-&gt;min_align;</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;        <span class="comment">/* unless alignment is none, set mal to -5,0,5 */</span></div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;        <span class="comment">/* (see align.h for valid aligntyp values)     */</span></div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;        <span class="keywordflow">if</span>(mal != <a class="code" href="align_8h.html#abe65d0cb8c8ae018c5bd63a280000eaa">A_NONE</a>)</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;            mal *= 5;</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;    }</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;    coaligned = (sgn(mal) == sgn(<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a3f202dd89a837a9772a9eb1f1965f30c">ualign</a>.<a class="code" href="structalign.html#a0dadfa91b9ff06447f91ea8a2b898827">type</a>));</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;    <span class="keywordflow">if</span> (mtmp-&gt;data-&gt;msound == <a class="code" href="monflag_8h.html#a57dd24aec371766f02747931edfcad46">MS_LEADER</a>) {</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;        mtmp-&gt;malign = -20;</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mal == <a class="code" href="align_8h.html#abe65d0cb8c8ae018c5bd63a280000eaa">A_NONE</a>) {</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;        <span class="keywordflow">if</span> (mtmp-&gt;mpeaceful)</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;            mtmp-&gt;malign = 0;</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;            mtmp-&gt;malign = 20;  <span class="comment">/* really hostile */</span></div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="mondata_8h.html#a8a9268e51bec1a39e89e4a969721179a">always_peaceful</a>(mtmp-&gt;data)) {</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;        <span class="keywordtype">int</span> absmal = <a class="code" href="amidos_8c.html#a196e7f007a501cf9d0907cb2bab0b622">abs</a>(mal);</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;        <span class="keywordflow">if</span> (mtmp-&gt;mpeaceful)</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;            mtmp-&gt;malign = -3*<a class="code" href="hack_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>(5,absmal);</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;            mtmp-&gt;malign = 3*<a class="code" href="hack_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>(5,absmal); <span class="comment">/* renegade */</span></div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="mondata_8h.html#a4009754855425b7a9d4f1256086c82e2">always_hostile</a>(mtmp-&gt;data)) {</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;        <span class="keywordtype">int</span> absmal = <a class="code" href="amidos_8c.html#a196e7f007a501cf9d0907cb2bab0b622">abs</a>(mal);</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;        <span class="keywordflow">if</span> (coaligned)</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;            mtmp-&gt;malign = 0;</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;            mtmp-&gt;malign = <a class="code" href="hack_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>(5,absmal);</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (coaligned) {</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;        <span class="keywordtype">int</span> absmal = <a class="code" href="amidos_8c.html#a196e7f007a501cf9d0907cb2bab0b622">abs</a>(mal);</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;        <span class="keywordflow">if</span> (mtmp-&gt;mpeaceful)</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;            mtmp-&gt;malign = -3*<a class="code" href="hack_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>(3,absmal);</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;        <span class="keywordflow">else</span>    <span class="comment">/* renegade */</span></div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;            mtmp-&gt;malign = <a class="code" href="hack_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>(3,absmal);</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;    } <span class="keywordflow">else</span>  <span class="comment">/* not coaligned and therefore hostile */</span></div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;        mtmp-&gt;malign = <a class="code" href="amidos_8c.html#a196e7f007a501cf9d0907cb2bab0b622">abs</a>(mal);</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;}</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* OVL1 */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;<span class="preprocessor">#ifdef OVLB</span></div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;<span class="keyword">static</span> <a class="code" href="config1_8h.html#a9987bf629301f5fe76ddd96aa2717ca1">NEARDATA</a> <span class="keywordtype">char</span> syms[] = {</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;    <a class="code" href="objclass_8h.html#af51133138bfb718b55aaa7f29711a10a">MAXOCLASSES</a>, <a class="code" href="objclass_8h.html#af51133138bfb718b55aaa7f29711a10a">MAXOCLASSES</a>+1, <a class="code" href="objclass_8h.html#a4d65a9d3e979073915c207bf6a806d63">RING_CLASS</a>, <a class="code" href="objclass_8h.html#a3465d7e5f808c98fcfc32e3159b9d9c2">WAND_CLASS</a>, <a class="code" href="objclass_8h.html#a615c2dc6d3501d6b5e14c3373bc37ec1">WEAPON_CLASS</a>,</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;    <a class="code" href="objclass_8h.html#a98c4704dea5f0606fe545294b44f8fd6">FOOD_CLASS</a>, <a class="code" href="objclass_8h.html#a2999621925083659147349e261e4cb3d">COIN_CLASS</a>, <a class="code" href="objclass_8h.html#ac23f261da0f9e2a4c6afccecfc167a96">SCROLL_CLASS</a>, <a class="code" href="objclass_8h.html#a05335e5ee18dfa33af1c40056fe8fab9">POTION_CLASS</a>, <a class="code" href="objclass_8h.html#a038c650e790f05f72fa9204b1b82660b">ARMOR_CLASS</a>,</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;    <a class="code" href="objclass_8h.html#af05e45a3c94a4a19096ee4f048ee96cd">AMULET_CLASS</a>, <a class="code" href="objclass_8h.html#ad8e3b1b1f1bd8dff660c15840a3f2b03">TOOL_CLASS</a>, <a class="code" href="objclass_8h.html#aaf0eb1ef8fd79e34747c058357003983">ROCK_CLASS</a>, <a class="code" href="objclass_8h.html#afc09c51ea922e9928f86a51177244796">GEM_CLASS</a>, <a class="code" href="objclass_8h.html#aba5935524b39b0fdd148a3d466a5c580">SPBOOK_CLASS</a>,</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;    <a class="code" href="monsym_8h.html#a70d3e3d0bf39f29be7524b51287a7821">S_MIMIC_DEF</a>, <a class="code" href="monsym_8h.html#a70d3e3d0bf39f29be7524b51287a7821">S_MIMIC_DEF</a>, <a class="code" href="monsym_8h.html#a70d3e3d0bf39f29be7524b51287a7821">S_MIMIC_DEF</a>,</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;};</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;set_mimic_sym(mtmp)     <span class="comment">/* KAA, modified by ERS */</span></div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;<a class="code" href="mkmaze_8c.html#a24ac627a7839caecddfc66f1d46033f0">register</a> struct <a class="code" href="structmonst.html">monst</a> *mtmp;</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;{</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;    <span class="keywordtype">int</span> typ, roomno, rt;</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;    <span class="keywordtype">unsigned</span> appear, ap_type;</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;    <span class="keywordtype">int</span> s_sym;</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;    <span class="keyword">struct </span><a class="code" href="structobj.html">obj</a> *<a class="code" href="mhitu_8c.html#a8cf94e09e1a72daf7050a2817ba70974">otmp</a>;</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;    <span class="keywordtype">int</span> mx, my;</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;    <span class="keywordflow">if</span> (!mtmp) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;    mx = mtmp-&gt;mx; my = mtmp-&gt;my;</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;    typ = <a class="code" href="rm_8h.html#a8cd681fba60fdedbabfd71a0b4bbfc00">levl</a>[mx][my].typ;</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;                    <span class="comment">/* only valid for INSIDE of room */</span></div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;    roomno = <a class="code" href="rm_8h.html#a8cd681fba60fdedbabfd71a0b4bbfc00">levl</a>[mx][my].roomno - <a class="code" href="mkroom_8h.html#acc0f2416007c594c5d38f980dedc1b68">ROOMOFFSET</a>;</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;    <span class="keywordflow">if</span> (roomno &gt;= 0)</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;        rt = <a class="code" href="mkroom_8h.html#a45030df62e6451e79233760364dca9e1">rooms</a>[roomno].<a class="code" href="structmkroom.html#a0ad2dc1a7e0527610e96e830b2cad471">rtype</a>;</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;<span class="preprocessor">#ifdef SPECIALIZATION</span></div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="rm_8h.html#af84b49fffdbf2780a5eb39f0203e4ffa">IS_ROOM</a>(typ))</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;        rt = <a class="code" href="mkroom_8h.html#a24fe7e4ef6dbb56e7d2570a7ac640d71">OROOM</a>,  roomno = 0;</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;    <span class="keywordflow">else</span>    rt = 0; <span class="comment">/* roomno &lt; 0 case for GCC_WARN */</span></div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="rm_8h.html#a8c5e05f917fa75d3b54c8c5045d6665b">OBJ_AT</a>(mx, my)) {</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;        ap_type = <a class="code" href="monst_8h.html#a398e3dada51d63d91d8d9a6fb3f90c62">M_AP_OBJECT</a>;</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;        appear = <a class="code" href="rm_8h.html#a721c99bfa099c4225215ba102e91fa39">level</a>.<a class="code" href="structdlevel__t.html#ac128f805d01d7746b499596dd3b92a53">objects</a>[mx][my]-&gt;<a class="code" href="structobj.html#a95eb282afebd3599996035e8aab71751">otyp</a>;</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="rm_8h.html#a44de5677b6310b3b96cad756e24b59d9">IS_DOOR</a>(typ) || <a class="code" href="rm_8h.html#a6bd7f45ec1e1ccd558d188e16a566208">IS_WALL</a>(typ) ||</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;           typ == <a class="code" href="rm_8h.html#a03fd0fa1e0dbd19ea38dff0c79e656a5">SDOOR</a> || typ == <a class="code" href="rm_8h.html#a35e6fdb78f87c982df30c7e9580ad95d">SCORR</a>) {</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;        ap_type = <a class="code" href="monst_8h.html#a3470d5a82b5711ec2b38fb153c3eab2f">M_AP_FURNITURE</a>;</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;<span class="comment">         *  If there is a wall to the left that connects to this</span></div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;<span class="comment">         *  location, then the mimic mimics a horizontal closed door.</span></div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;<span class="comment">         *  This does not allow doors to be in corners of rooms.</span></div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;        <span class="keywordflow">if</span> (mx != 0 &amp;&amp;</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;            (<a class="code" href="rm_8h.html#a8cd681fba60fdedbabfd71a0b4bbfc00">levl</a>[mx-1][my].typ == <a class="code" href="rm_8h.html#a3fcd4705d7b0ac05a88302170fcc58f5">HWALL</a>    ||</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;             <a class="code" href="rm_8h.html#a8cd681fba60fdedbabfd71a0b4bbfc00">levl</a>[mx-1][my].typ == <a class="code" href="rm_8h.html#ade633f6a4bac3d7c501e28d15c536d3d">TLCORNER</a> ||</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;             <a class="code" href="rm_8h.html#a8cd681fba60fdedbabfd71a0b4bbfc00">levl</a>[mx-1][my].typ == <a class="code" href="rm_8h.html#a9290fa8691acb3539d3381fec0e4b24a">TRWALL</a>   ||</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;             <a class="code" href="rm_8h.html#a8cd681fba60fdedbabfd71a0b4bbfc00">levl</a>[mx-1][my].typ == <a class="code" href="rm_8h.html#a8e1e6f2e3453c3dd85fbc6f5a54c8c34">BLCORNER</a> ||</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;             <a class="code" href="rm_8h.html#a8cd681fba60fdedbabfd71a0b4bbfc00">levl</a>[mx-1][my].typ == <a class="code" href="rm_8h.html#ab847e2347534eeb83217f5b36815b88d">TDWALL</a>   ||</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;             <a class="code" href="rm_8h.html#a8cd681fba60fdedbabfd71a0b4bbfc00">levl</a>[mx-1][my].typ == <a class="code" href="rm_8h.html#ac2a0c94b5722b98d84af548563e71d2f">CROSSWALL</a>||</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;             <a class="code" href="rm_8h.html#a8cd681fba60fdedbabfd71a0b4bbfc00">levl</a>[mx-1][my].typ == <a class="code" href="rm_8h.html#a618fa341dec5d9aeb5ac67deb7011d29">TUWALL</a>    ))</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;            appear = <a class="code" href="rm_8h.html#aa2fb4b079e394b211180b9a57cff39ac">S_hcdoor</a>;</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;            appear = <a class="code" href="rm_8h.html#a48b567f0b941ec718d04a736f71da55f">S_vcdoor</a>;</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;        <span class="keywordflow">if</span>(!mtmp-&gt;minvis || <a class="code" href="youprop_8h.html#ae00ea7702fa1870643d604364b0640c7">See_invisible</a>)</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;            <a class="code" href="vision_8c.html#ae985a63b19aa1a0a81fa91b46972e27e">block_point</a>(mx,my); <span class="comment">/* vision */</span></div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="rm_8h.html#a721c99bfa099c4225215ba102e91fa39">level</a>.<a class="code" href="structdlevel__t.html#ad52c01d015e2456cdae3300848115916">flags</a>.is_maze_lev &amp;&amp; rn2(2)) {</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;        ap_type = <a class="code" href="monst_8h.html#a398e3dada51d63d91d8d9a6fb3f90c62">M_AP_OBJECT</a>;</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;        appear = STATUE;</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (roomno &lt; 0) {</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;        ap_type = <a class="code" href="monst_8h.html#a398e3dada51d63d91d8d9a6fb3f90c62">M_AP_OBJECT</a>;</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;        appear = BOULDER;</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;        <span class="keywordflow">if</span>(!mtmp-&gt;minvis || <a class="code" href="youprop_8h.html#ae00ea7702fa1870643d604364b0640c7">See_invisible</a>)</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;            <a class="code" href="vision_8c.html#ae985a63b19aa1a0a81fa91b46972e27e">block_point</a>(mx,my); <span class="comment">/* vision */</span></div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rt == <a class="code" href="mkroom_8h.html#a1e2090a3604c11b6e73a862a80cb1371">ZOO</a> || rt == <a class="code" href="mkroom_8h.html#ab75d7f5a330f45915bd3794809ef1609">VAULT</a>) {</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;        ap_type = <a class="code" href="monst_8h.html#a398e3dada51d63d91d8d9a6fb3f90c62">M_AP_OBJECT</a>;</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;        appear = GOLD_PIECE;</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rt == <a class="code" href="mkroom_8h.html#aa219fb813ff6131b86a8f4a3ce45d063">DELPHI</a>) {</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;        <span class="keywordflow">if</span> (rn2(2)) {</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;            ap_type = <a class="code" href="monst_8h.html#a398e3dada51d63d91d8d9a6fb3f90c62">M_AP_OBJECT</a>;</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;            appear = STATUE;</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;            ap_type = <a class="code" href="monst_8h.html#a3470d5a82b5711ec2b38fb153c3eab2f">M_AP_FURNITURE</a>;</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;            appear = <a class="code" href="rm_8h.html#ad4ca1095edc055a8d3e1debbdaff6b1a">S_fountain</a>;</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;        }</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rt == <a class="code" href="mkroom_8h.html#ab8c9e1bea2ae73195887ee67f76acee2">TEMPLE</a>) {</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;        ap_type = <a class="code" href="monst_8h.html#a3470d5a82b5711ec2b38fb153c3eab2f">M_AP_FURNITURE</a>;</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;        appear = <a class="code" href="rm_8h.html#a2c0fad3823618e2244411efd9cdb7049">S_altar</a>;</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;<span class="comment">     * We won&#39;t bother with beehives, morgues, barracks, throne rooms</span></div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;<span class="comment">     * since they shouldn&#39;t contain too many mimics anyway...</span></div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rt &gt;= <a class="code" href="mkroom_8h.html#a925701a88c7ed0db502cfac9d8fbcf9e">SHOPBASE</a>) {</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;        s_sym = get_shop_item(rt - <a class="code" href="mkroom_8h.html#a925701a88c7ed0db502cfac9d8fbcf9e">SHOPBASE</a>);</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;        <span class="keywordflow">if</span> (s_sym &lt; 0) {</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;            ap_type = <a class="code" href="monst_8h.html#a398e3dada51d63d91d8d9a6fb3f90c62">M_AP_OBJECT</a>;</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;            appear = -s_sym;</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;            <span class="keywordflow">if</span> (s_sym == <a class="code" href="objclass_8h.html#ac72b41688ea83d87d0b4143899a9b0d7">RANDOM_CLASS</a>)</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;                s_sym = syms[rn2((<span class="keywordtype">int</span>)<span class="keyword">sizeof</span>(syms)-2) + 2];</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;            <span class="keywordflow">goto</span> assign_sym;</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;        }</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;        s_sym = syms[rn2((<span class="keywordtype">int</span>)<span class="keyword">sizeof</span>(syms))];</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;assign_sym:</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;        <span class="keywordflow">if</span> (s_sym &gt;= <a class="code" href="objclass_8h.html#af51133138bfb718b55aaa7f29711a10a">MAXOCLASSES</a>) {</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;            ap_type = <a class="code" href="monst_8h.html#a3470d5a82b5711ec2b38fb153c3eab2f">M_AP_FURNITURE</a>;</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;            appear = s_sym == <a class="code" href="objclass_8h.html#af51133138bfb718b55aaa7f29711a10a">MAXOCLASSES</a> ? <a class="code" href="rm_8h.html#a804c47940a9f1925d324bed72b37f22a">S_upstair</a> : <a class="code" href="rm_8h.html#a6388bf172af73ff09dd8df0676cb3cbb">S_dnstair</a>;</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (s_sym == <a class="code" href="objclass_8h.html#a2999621925083659147349e261e4cb3d">COIN_CLASS</a>) {</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;            ap_type = <a class="code" href="monst_8h.html#a398e3dada51d63d91d8d9a6fb3f90c62">M_AP_OBJECT</a>;</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;            appear = GOLD_PIECE;</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;            ap_type = <a class="code" href="monst_8h.html#a398e3dada51d63d91d8d9a6fb3f90c62">M_AP_OBJECT</a>;</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;            <span class="keywordflow">if</span> (s_sym == <a class="code" href="monsym_8h.html#a70d3e3d0bf39f29be7524b51287a7821">S_MIMIC_DEF</a>) {</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;                appear = STRANGE_OBJECT;</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;                otmp = mkobj( (<span class="keywordtype">char</span>) s_sym, <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a> );</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;                appear = otmp-&gt;<a class="code" href="structobj.html#a95eb282afebd3599996035e8aab71751">otyp</a>;</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;                <span class="comment">/* make sure container contents are free&#39;ed */</span></div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;                obfree(otmp, (<span class="keyword">struct</span> <a class="code" href="structobj.html">obj</a> *) 0);</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;            }</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;        }</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;    }</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;    mtmp-&gt;m_ap_type = ap_type;</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;    mtmp-&gt;mappearance = appear;</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;}</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;<span class="comment">/* release a monster from a bag of tricks */</span></div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;bagotricks(bag)</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;struct <a class="code" href="structobj.html">obj</a> *bag;</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;{</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;    <span class="keywordflow">if</span> (!bag || bag-&gt;otyp != BAG_OF_TRICKS) {</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;    impossible(<span class="stringliteral">&quot;bad bag o&#39; tricks&quot;</span>);</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bag-&gt;spe &lt; 1) {</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;    pline(<a class="code" href="decl_8h.html#acd8c890f5e2054727eb32955ccc93850">nothing_happens</a>);</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;    <span class="keywordtype">boolean</span> gotone = <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;    <span class="keywordtype">int</span> cnt = 1;</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;    consume_obj_charge(bag, <a class="code" href="global_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;    <span class="keywordflow">if</span> (!rn2(23)) cnt += <a class="code" href="hack_8h.html#af107ca092682647f298989038020f9c8">rn1</a>(7, 1);</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;    <span class="keywordflow">while</span> (cnt-- &gt; 0) {</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;        <span class="keywordflow">if</span> (makemon((<span class="keyword">struct</span> <a class="code" href="structpermonst.html">permonst</a> *)0, <a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#ace2fd92f7f1a640e45775efe6e5f6cf7">ux</a>, <a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a8571cf3a9cfc41c3f877d0f56cda11a9">uy</a>, <a class="code" href="hack_8h.html#ae449582f467baa0da531a6ea116a18f2">NO_MM_FLAGS</a>))</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;        gotone = <a class="code" href="global_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;    }</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;    <span class="keywordflow">if</span> (gotone) <a class="code" href="hack_8h.html#afbd3607e7cef2f888f4190d40d058011">makeknown</a>(BAG_OF_TRICKS);</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;    }</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;}</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* OVLB */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;<span class="comment">/*makemon.c*/</span></div>
<div class="ttc" id="structmonst_html_a5d03af85e4563c4068ac07d616af859f"><div class="ttname"><a href="structmonst.html#a5d03af85e4563c4068ac07d616af859f">monst::mstrategy</a></div><div class="ttdeci">long mstrategy</div><div class="ttdef"><b>Definition:</b> <a href="monst_8h_source.html#l00114">monst.h:114</a></div></div>
<div class="ttc" id="display_8h_html_a13f0a7cac1ceb73885a59b8598de1648"><div class="ttname"><a href="display_8h.html#a13f0a7cac1ceb73885a59b8598de1648">canspotmon</a></div><div class="ttdeci">#define canspotmon(mon)</div><div class="ttdef"><b>Definition:</b> <a href="display_8h_source.html#l00092">display.h:92</a></div></div>
<div class="ttc" id="structdlevel__t_html_ad52c01d015e2456cdae3300848115916"><div class="ttname"><a href="structdlevel__t.html#ad52c01d015e2456cdae3300848115916">dlevel_t::flags</a></div><div class="ttdeci">struct levelflags flags</div><div class="ttdef"><b>Definition:</b> <a href="rm_8h_source.html#l00486">rm.h:486</a></div></div>
<div class="ttc" id="structobj_html"><div class="ttname"><a href="structobj.html">obj</a></div><div class="ttdef"><b>Definition:</b> <a href="obj_8h_source.html#l00017">obj.h:17</a></div></div>
<div class="ttc" id="structpermonst_html_ad92ab559c3dc08cc1a40f3413377d787"><div class="ttname"><a href="structpermonst.html#ad92ab559c3dc08cc1a40f3413377d787">permonst::maligntyp</a></div><div class="ttdeci">aligntyp maligntyp</div><div class="ttdef"><b>Definition:</b> <a href="permonst_8h_source.html#l00048">permonst.h:48</a></div></div>
<div class="ttc" id="decl_8h_html_a1aefaef88eef9075d8136d19410fd3b1"><div class="ttname"><a href="decl_8h.html#a1aefaef88eef9075d8136d19410fd3b1">uwep</a></div><div class="ttdeci">E NEARDATA struct obj * uwep</div><div class="ttdef"><b>Definition:</b> <a href="decl_8h_source.html#l00240">decl.h:240</a></div></div>
<div class="ttc" id="mondata_8h_html_a37a7b9dfee69b94d8e6946bb04c22874"><div class="ttname"><a href="mondata_8h.html#a37a7b9dfee69b94d8e6946bb04c22874">hides_under</a></div><div class="ttdeci">#define hides_under(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="mondata_8h_source.html#l00038">mondata.h:38</a></div></div>
<div class="ttc" id="monst_8h_html_a398e3dada51d63d91d8d9a6fb3f90c62"><div class="ttname"><a href="monst_8h.html#a398e3dada51d63d91d8d9a6fb3f90c62">M_AP_OBJECT</a></div><div class="ttdeci">#define M_AP_OBJECT</div><div class="ttdef"><b>Definition:</b> <a href="monst_8h_source.html#l00059">monst.h:59</a></div></div>
<div class="ttc" id="global_8h_html_ae1e45066883010976eee941b1cbf4b0e"><div class="ttname"><a href="global_8h.html#ae1e45066883010976eee941b1cbf4b0e">MAXMONNO</a></div><div class="ttdeci">#define MAXMONNO</div><div class="ttdef"><b>Definition:</b> <a href="global_8h_source.html#l00342">global.h:342</a></div></div>
<div class="ttc" id="emin_8h_html"><div class="ttname"><a href="emin_8h.html">emin.h</a></div></div>
<div class="ttc" id="monsym_8h_html_a61b5369975d5cd079ca9f3153e807079"><div class="ttname"><a href="monsym_8h.html#a61b5369975d5cd079ca9f3153e807079">S_JABBERWOCK</a></div><div class="ttdeci">#define S_JABBERWOCK</div><div class="ttdef"><b>Definition:</b> <a href="monsym_8h_source.html#l00047">monsym.h:47</a></div></div>
<div class="ttc" id="structmonst_html_a6d525ec48f9d38cda6accbb0cb39efba"><div class="ttname"><a href="structmonst.html#a6d525ec48f9d38cda6accbb0cb39efba">monst::mtame</a></div><div class="ttdeci">schar mtame</div><div class="ttdef"><b>Definition:</b> <a href="monst_8h_source.html#l00062">monst.h:62</a></div></div>
<div class="ttc" id="worm_8c_html_a49d9d0321fe56879dcea667fb15258a2"><div class="ttname"><a href="worm_8c.html#a49d9d0321fe56879dcea667fb15258a2">count_wsegs</a></div><div class="ttdeci">int count_wsegs(struct monst *mtmp)</div><div class="ttdef"><b>Definition:</b> <a href="worm_8c_source.html#l00682">worm.c:682</a></div></div>
<div class="ttc" id="structpermonst_html_ae92da7d141243d7e37d4a12340bb248f"><div class="ttname"><a href="structpermonst.html#ae92da7d141243d7e37d4a12340bb248f">permonst::mname</a></div><div class="ttdeci">const char * mname</div><div class="ttdef"><b>Definition:</b> <a href="permonst_8h_source.html#l00042">permonst.h:42</a></div></div>
<div class="ttc" id="monsym_8h_html_aa1a6b3df8bb5ef4a5056c9dc8dec8f13"><div class="ttname"><a href="monsym_8h.html#aa1a6b3df8bb5ef4a5056c9dc8dec8f13">S_TRAPPER</a></div><div class="ttdeci">#define S_TRAPPER</div><div class="ttdef"><b>Definition:</b> <a href="monsym_8h_source.html#l00032">monsym.h:32</a></div></div>
<div class="ttc" id="mondata_8h_html_ae65c0c7b92cbe7cb6e8550523ef4f175"><div class="ttname"><a href="mondata_8h.html#ae65c0c7b92cbe7cb6e8550523ef4f175">is_rider</a></div><div class="ttdeci">#define is_rider(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="mondata_8h_source.html#l00134">mondata.h:134</a></div></div>
<div class="ttc" id="mkroom_8h_html_a45030df62e6451e79233760364dca9e1"><div class="ttname"><a href="mkroom_8h.html#a45030df62e6451e79233760364dca9e1">rooms</a></div><div class="ttdeci">NEARDATA struct mkroom rooms[(MAXNROFROOMS+1)*2]</div><div class="ttdef"><b>Definition:</b> <a href="decl_8c_source.html#l00136">decl.c:136</a></div></div>
<div class="ttc" id="align_8h_html_a67c4a32b3d1375a95c4416935399e338"><div class="ttname"><a href="align_8h.html#a67c4a32b3d1375a95c4416935399e338">AM_NEUTRAL</a></div><div class="ttdeci">#define AM_NEUTRAL</div><div class="ttdef"><b>Definition:</b> <a href="align_8h_source.html#l00029">align.h:29</a></div></div>
<div class="ttc" id="rm_8h_html_a6388bf172af73ff09dd8df0676cb3cbb"><div class="ttname"><a href="rm_8h.html#a6388bf172af73ff09dd8df0676cb3cbb">S_dnstair</a></div><div class="ttdeci">#define S_dnstair</div><div class="ttdef"><b>Definition:</b> <a href="rm_8h_source.html#l00130">rm.h:130</a></div></div>
<div class="ttc" id="monsym_8h_html_ab287608148a3be298ed3c928e7f76f51"><div class="ttname"><a href="monsym_8h.html#ab287608148a3be298ed3c928e7f76f51">S_OGRE</a></div><div class="ttdeci">#define S_OGRE</div><div class="ttdef"><b>Definition:</b> <a href="monsym_8h_source.html#l00052">monsym.h:52</a></div></div>
<div class="ttc" id="structmvitals_html_a51369b55e24dc02d3f5768b8f5b01381"><div class="ttname"><a href="structmvitals.html#a51369b55e24dc02d3f5768b8f5b01381">mvitals::mvflags</a></div><div class="ttdeci">uchar mvflags</div><div class="ttdef"><b>Definition:</b> <a href="decl_8h_source.html#l00268">decl.h:268</a></div></div>
<div class="ttc" id="rm_8h_html_a8cd681fba60fdedbabfd71a0b4bbfc00"><div class="ttname"><a href="rm_8h.html#a8cd681fba60fdedbabfd71a0b4bbfc00">levl</a></div><div class="ttdeci">#define levl</div><div class="ttdef"><b>Definition:</b> <a href="rm_8h_source.html#l00495">rm.h:495</a></div></div>
<div class="ttc" id="monsym_8h_html_a8c6bb361baecfba17240e1e0af655e1b"><div class="ttname"><a href="monsym_8h.html#a8c6bb361baecfba17240e1e0af655e1b">MAXMCLASSES</a></div><div class="ttdeci">#define MAXMCLASSES</div><div class="ttdef"><b>Definition:</b> <a href="monsym_8h_source.html#l00074">monsym.h:74</a></div></div>
<div class="ttc" id="monflag_8h_html_ab99532c9310183c20279ce79e7f594dd"><div class="ttname"><a href="monflag_8h.html#ab99532c9310183c20279ce79e7f594dd">G_UNIQ</a></div><div class="ttdeci">#define G_UNIQ</div><div class="ttdef"><b>Definition:</b> <a href="monflag_8h_source.html#l00182">monflag.h:182</a></div></div>
<div class="ttc" id="display_8h_html_a13881a5dc42ea2076abd050773eee913"><div class="ttname"><a href="display_8h.html#a13881a5dc42ea2076abd050773eee913">sensemon</a></div><div class="ttdeci">#define sensemon(mon)</div><div class="ttdef"><b>Definition:</b> <a href="display_8h_source.html#l00036">display.h:36</a></div></div>
<div class="ttc" id="epri_8h_html"><div class="ttname"><a href="epri_8h.html">epri.h</a></div></div>
<div class="ttc" id="structpermonst_html_ab402dbf1bed9d0e595a2b3da6558da92"><div class="ttname"><a href="structpermonst.html#ab402dbf1bed9d0e595a2b3da6558da92">permonst::mlet</a></div><div class="ttdeci">char mlet</div><div class="ttdef"><b>Definition:</b> <a href="permonst_8h_source.html#l00043">permonst.h:43</a></div></div>
<div class="ttc" id="structyou_html_a8571cf3a9cfc41c3f877d0f56cda11a9"><div class="ttname"><a href="structyou.html#a8571cf3a9cfc41c3f877d0f56cda11a9">you::uy</a></div><div class="ttdeci">xchar uy</div><div class="ttdef"><b>Definition:</b> <a href="you_8h_source.html#l00233">you.h:233</a></div></div>
<div class="ttc" id="monsym_8h_html_a94b7f79df356477345c1ed49f9f6a7cc"><div class="ttname"><a href="monsym_8h.html#a94b7f79df356477345c1ed49f9f6a7cc">S_ELEMENTAL</a></div><div class="ttdeci">#define S_ELEMENTAL</div><div class="ttdef"><b>Definition:</b> <a href="monsym_8h_source.html#l00043">monsym.h:43</a></div></div>
<div class="ttc" id="makemon_8c_html_a7cac21c6b7b26418bdfdccbce659d52d"><div class="ttname"><a href="makemon_8c.html#a7cac21c6b7b26418bdfdccbce659d52d">m_initlgrp</a></div><div class="ttdeci">#define m_initlgrp(mtmp, x, y)</div><div class="ttdef"><b>Definition:</b> <a href="makemon_8c_source.html#l00037">makemon.c:37</a></div></div>
<div class="ttc" id="mkroom_8h_html_ab75d7f5a330f45915bd3794809ef1609"><div class="ttname"><a href="mkroom_8h.html#ab75d7f5a330f45915bd3794809ef1609">VAULT</a></div><div class="ttdeci">#define VAULT</div><div class="ttdef"><b>Definition:</b> <a href="mkroom_8h_source.html#l00054">mkroom.h:54</a></div></div>
<div class="ttc" id="worm_8c_html_a05aef5dde943bbd2574310c3893d224c"><div class="ttname"><a href="worm_8c.html#a05aef5dde943bbd2574310c3893d224c">initworm</a></div><div class="ttdeci">void initworm(struct monst *worm, int wseg_count)</div><div class="ttdef"><b>Definition:</b> <a href="worm_8c_source.html#l00111">worm.c:111</a></div></div>
<div class="ttc" id="mkroom_8h_html_a24fe7e4ef6dbb56e7d2570a7ac640d71"><div class="ttname"><a href="mkroom_8h.html#a24fe7e4ef6dbb56e7d2570a7ac640d71">OROOM</a></div><div class="ttdeci">#define OROOM</div><div class="ttdef"><b>Definition:</b> <a href="mkroom_8h_source.html#l00051">mkroom.h:51</a></div></div>
<div class="ttc" id="makemon_8c_html_a74e808df5f0f897252cddd1bb798a895"><div class="ttname"><a href="makemon_8c.html#a74e808df5f0f897252cddd1bb798a895">toostrong</a></div><div class="ttdeci">#define toostrong(monindx, lev)</div><div class="ttdef"><b>Definition:</b> <a href="makemon_8c_source.html#l00038">makemon.c:38</a></div></div>
<div class="ttc" id="flag_8h_html_a5f48dc2f029e22c05489fb20a491db4b"><div class="ttname"><a href="flag_8h.html#a5f48dc2f029e22c05489fb20a491db4b">wizard</a></div><div class="ttdeci">#define wizard</div><div class="ttdef"><b>Definition:</b> <a href="flag_8h_source.html#l00035">flag.h:35</a></div></div>
<div class="ttc" id="decl_8h_html_acd8c890f5e2054727eb32955ccc93850"><div class="ttname"><a href="decl_8h.html#acd8c890f5e2054727eb32955ccc93850">nothing_happens</a></div><div class="ttdeci">#define nothing_happens</div><div class="ttdef"><b>Definition:</b> <a href="decl_8h_source.html#l00299">decl.h:299</a></div></div>
<div class="ttc" id="monflag_8h_html_a24df05ca2acf54175d8f13416e8c9560"><div class="ttname"><a href="monflag_8h.html#a24df05ca2acf54175d8f13416e8c9560">G_NOHELL</a></div><div class="ttdeci">#define G_NOHELL</div><div class="ttdef"><b>Definition:</b> <a href="monflag_8h_source.html#l00183">monflag.h:183</a></div></div>
<div class="ttc" id="detect_8c_html_a2373e3a270d2b530119452501548080a"><div class="ttname"><a href="detect_8c.html#a2373e3a270d2b530119452501548080a">known</a></div><div class="ttdeci">boolean known</div></div>
<div class="ttc" id="emin_8h_html_aeda364b460b280fc3499c0f672979186"><div class="ttname"><a href="emin_8h.html#aeda364b460b280fc3499c0f672979186">EMIN</a></div><div class="ttdeci">#define EMIN(mon)</div><div class="ttdef"><b>Definition:</b> <a href="emin_8h_source.html#l00012">emin.h:12</a></div></div>
<div class="ttc" id="mondata_8h_html_a6fdc7de403be6968bbd1ea97e851c883"><div class="ttname"><a href="mondata_8h.html#a6fdc7de403be6968bbd1ea97e851c883">race_peaceful</a></div><div class="ttdeci">#define race_peaceful(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="mondata_8h_source.html#l00102">mondata.h:102</a></div></div>
<div class="ttc" id="rm_8h_html_a48b567f0b941ec718d04a736f71da55f"><div class="ttname"><a href="rm_8h.html#a48b567f0b941ec718d04a736f71da55f">S_vcdoor</a></div><div class="ttdeci">#define S_vcdoor</div><div class="ttdef"><b>Definition:</b> <a href="rm_8h_source.html#l00122">rm.h:122</a></div></div>
<div class="ttc" id="structcoord_html_a2b099692d87f98e4844b615136ca37fb"><div class="ttname"><a href="structcoord.html#a2b099692d87f98e4844b615136ca37fb">coord::y</a></div><div class="ttdeci">int y</div><div class="ttdef"><b>Definition:</b> <a href="lev__yacc_8c_source.html#l00078">lev_yacc.c:78</a></div></div>
<div class="ttc" id="mondata_8h_html_ab8ffd447c2b8217b49848268e2b6493d"><div class="ttname"><a href="mondata_8h.html#ab8ffd447c2b8217b49848268e2b6493d">is_swimmer</a></div><div class="ttdeci">#define is_swimmer(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="mondata_8h_source.html#l00030">mondata.h:30</a></div></div>
<div class="ttc" id="mondata_8h_html_ad5ce5d0c9e98b8d48b288b01a961e8d0"><div class="ttname"><a href="mondata_8h.html#ad5ce5d0c9e98b8d48b288b01a961e8d0">is_whirly</a></div><div class="ttdeci">#define is_whirly(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="mondata_8h_source.html#l00049">mondata.h:49</a></div></div>
<div class="ttc" id="rm_8h_html_a8e1e6f2e3453c3dd85fbc6f5a54c8c34"><div class="ttname"><a href="rm_8h.html#a8e1e6f2e3453c3dd85fbc6f5a54c8c34">BLCORNER</a></div><div class="ttdeci">#define BLCORNER</div><div class="ttdef"><b>Definition:</b> <a href="rm_8h_source.html#l00038">rm.h:38</a></div></div>
<div class="ttc" id="structflag_html_a7c8d492cee8daf2733b18954793990e3"><div class="ttname"><a href="structflag.html#a7c8d492cee8daf2733b18954793990e3">flag::ghost_count</a></div><div class="ttdeci">int ghost_count</div><div class="ttdef"><b>Definition:</b> <a href="flag_8h_source.html#l00099">flag.h:99</a></div></div>
<div class="ttc" id="monsym_8h_html_a9e4ff2790701c4d8584436824aea85cc"><div class="ttname"><a href="monsym_8h.html#a9e4ff2790701c4d8584436824aea85cc">S_QUANTMECH</a></div><div class="ttdeci">#define S_QUANTMECH</div><div class="ttdef"><b>Definition:</b> <a href="monsym_8h_source.html#l00054">monsym.h:54</a></div></div>
<div class="ttc" id="structmonst_html_a4c4bcdcf3c4ec4a85313ade9f9c27b72"><div class="ttname"><a href="structmonst.html#a4c4bcdcf3c4ec4a85313ade9f9c27b72">monst::nmon</a></div><div class="ttdeci">struct monst * nmon</div><div class="ttdef"><b>Definition:</b> <a href="monst_8h_source.html#l00041">monst.h:41</a></div></div>
<div class="ttc" id="hack_8h_html_af107ca092682647f298989038020f9c8"><div class="ttname"><a href="hack_8h.html#af107ca092682647f298989038020f9c8">rn1</a></div><div class="ttdeci">#define rn1(x, y)</div><div class="ttdef"><b>Definition:</b> <a href="hack_8h_source.html#l00291">hack.h:291</a></div></div>
<div class="ttc" id="monsym_8h_html_a14b30b9b42c7e1ffa278c5606d245a61"><div class="ttname"><a href="monsym_8h.html#a14b30b9b42c7e1ffa278c5606d245a61">S_SPIDER</a></div><div class="ttdeci">#define S_SPIDER</div><div class="ttdef"><b>Definition:</b> <a href="monsym_8h_source.html#l00031">monsym.h:31</a></div></div>
<div class="ttc" id="structpermonst_html_a0f9f93635f6228a61551c835640b3c1d"><div class="ttname"><a href="structpermonst.html#a0f9f93635f6228a61551c835640b3c1d">permonst::geno</a></div><div class="ttdeci">unsigned short geno</div><div class="ttdef"><b>Definition:</b> <a href="permonst_8h_source.html#l00049">permonst.h:49</a></div></div>
<div class="ttc" id="mondata_8h_html_ac3d4d869d4c7625a840b9731b591e90b"><div class="ttname"><a href="mondata_8h.html#ac3d4d869d4c7625a840b9731b591e90b">amorphous</a></div><div class="ttdeci">#define amorphous(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="mondata_8h_source.html#l00034">mondata.h:34</a></div></div>
<div class="ttc" id="structobj_html_a95eb282afebd3599996035e8aab71751"><div class="ttname"><a href="structobj.html#a95eb282afebd3599996035e8aab71751">obj::otyp</a></div><div class="ttdeci">short otyp</div><div class="ttdef"><b>Definition:</b> <a href="obj_8h_source.html#l00027">obj.h:27</a></div></div>
<div class="ttc" id="decl_8h_html_a3de70854a5691ea43068787e1f9e44cf"><div class="ttname"><a href="decl_8h.html#a3de70854a5691ea43068787e1f9e44cf">def_monsyms</a></div><div class="ttdeci">E const char def_monsyms[MAXMCLASSES]</div><div class="ttdef"><b>Definition:</b> <a href="decl_8h_source.html#l00236">decl.h:236</a></div></div>
<div class="ttc" id="dungeon_8h_html_a9fd7b21db47607a73332aa75ba8f4832"><div class="ttname"><a href="dungeon_8h.html#a9fd7b21db47607a73332aa75ba8f4832">Is_waterlevel</a></div><div class="ttdeci">#define Is_waterlevel(x)</div><div class="ttdef"><b>Definition:</b> <a href="dungeon_8h_source.html#l00103">dungeon.h:103</a></div></div>
<div class="ttc" id="objclass_8h_html_a615c2dc6d3501d6b5e14c3373bc37ec1"><div class="ttname"><a href="objclass_8h.html#a615c2dc6d3501d6b5e14c3373bc37ec1">WEAPON_CLASS</a></div><div class="ttdeci">#define WEAPON_CLASS</div><div class="ttdef"><b>Definition:</b> <a href="objclass_8h_source.html#l00126">objclass.h:126</a></div></div>
<div class="ttc" id="hack_8h_html_afbd3607e7cef2f888f4190d40d058011"><div class="ttname"><a href="hack_8h.html#afbd3607e7cef2f888f4190d40d058011">makeknown</a></div><div class="ttdeci">#define makeknown(x)</div><div class="ttdef"><b>Definition:</b> <a href="hack_8h_source.html#l00287">hack.h:287</a></div></div>
<div class="ttc" id="hack_8h_html_a8c49bf9ef4423d8f1c3f2998d81277c2"><div class="ttname"><a href="hack_8h.html#a8c49bf9ef4423d8f1c3f2998d81277c2">MM_ANGRY</a></div><div class="ttdeci">#define MM_ANGRY</div><div class="ttdef"><b>Definition:</b> <a href="hack_8h_source.html#l00139">hack.h:139</a></div></div>
<div class="ttc" id="structyou_html_a3e83735264e74265e8c8777f73e159fa"><div class="ttname"><a href="structyou.html#a3e83735264e74265e8c8777f73e159fa">you::uhave</a></div><div class="ttdeci">struct u_have uhave</div><div class="ttdef"><b>Definition:</b> <a href="you_8h_source.html#l00310">you.h:310</a></div></div>
<div class="ttc" id="monst_8h_html_a14b3e6ad96fe70130da9a110aa465ed6"><div class="ttname"><a href="monst_8h.html#a14b3e6ad96fe70130da9a110aa465ed6">STRAT_WAITFORU</a></div><div class="ttdeci">#define STRAT_WAITFORU</div><div class="ttdef"><b>Definition:</b> <a href="monst_8h_source.html#l00116">monst.h:116</a></div></div>
<div class="ttc" id="monflag_8h_html_a89b3308e85c121e38c6bef7077e49fd8"><div class="ttname"><a href="monflag_8h.html#a89b3308e85c121e38c6bef7077e49fd8">G_GENOD</a></div><div class="ttdeci">#define G_GENOD</div><div class="ttdef"><b>Definition:</b> <a href="monflag_8h_source.html#l00195">monflag.h:195</a></div></div>
<div class="ttc" id="mondata_8h_html_a43a56f8da67bffad8570befaef4cb528"><div class="ttname"><a href="mondata_8h.html#a43a56f8da67bffad8570befaef4cb528">extra_nasty</a></div><div class="ttdeci">#define extra_nasty(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="mondata_8h_source.html#l00103">mondata.h:103</a></div></div>
<div class="ttc" id="structflag_html_ab942b8e32836e4e1bc725d7715bacd68"><div class="ttname"><a href="structflag.html#ab942b8e32836e4e1bc725d7715bacd68">flag::ident</a></div><div class="ttdeci">unsigned ident</div><div class="ttdef"><b>Definition:</b> <a href="flag_8h_source.html#l00087">flag.h:87</a></div></div>
<div class="ttc" id="dungeon_8h_html_a2732117523c8540638daf4315dda16b9"><div class="ttname"><a href="dungeon_8h.html#a2732117523c8540638daf4315dda16b9">Is_rogue_level</a></div><div class="ttdeci">#define Is_rogue_level(x)</div><div class="ttdef"><b>Definition:</b> <a href="dungeon_8h_source.html#l00117">dungeon.h:117</a></div></div>
<div class="ttc" id="structemin_html"><div class="ttname"><a href="structemin.html">emin</a></div><div class="ttdef"><b>Definition:</b> <a href="emin_8h_source.html#l00008">emin.h:8</a></div></div>
<div class="ttc" id="rm_8h_html_a35e6fdb78f87c982df30c7e9580ad95d"><div class="ttname"><a href="rm_8h.html#a35e6fdb78f87c982df30c7e9580ad95d">SCORR</a></div><div class="ttdeci">#define SCORR</div><div class="ttdef"><b>Definition:</b> <a href="rm_8h_source.html#l00048">rm.h:48</a></div></div>
<div class="ttc" id="dungeon_8h_html_a5cd7abaad3082e8a7b2f5ec30e44d2f4"><div class="ttname"><a href="dungeon_8h.html#a5cd7abaad3082e8a7b2f5ec30e44d2f4">Inhell</a></div><div class="ttdeci">#define Inhell</div><div class="ttdef"><b>Definition:</b> <a href="dungeon_8h_source.html#l00126">dungeon.h:126</a></div></div>
<div class="ttc" id="structedog_html"><div class="ttname"><a href="structedog.html">edog</a></div><div class="ttdef"><b>Definition:</b> <a href="edog_8h_source.html#l00019">edog.h:19</a></div></div>
<div class="ttc" id="monst_8h_html_a3470d5a82b5711ec2b38fb153c3eab2f"><div class="ttname"><a href="monst_8h.html#a3470d5a82b5711ec2b38fb153c3eab2f">M_AP_FURNITURE</a></div><div class="ttdeci">#define M_AP_FURNITURE</div><div class="ttdef"><b>Definition:</b> <a href="monst_8h_source.html#l00058">monst.h:58</a></div></div>
<div class="ttc" id="makemon_8c_html_aa16585e924b656b4dff53e9a45eacecd"><div class="ttname"><a href="makemon_8c.html#aa16585e924b656b4dff53e9a45eacecd">m_initsgrp</a></div><div class="ttdeci">#define m_initsgrp(mtmp, x, y)</div><div class="ttdef"><b>Definition:</b> <a href="makemon_8c_source.html#l00036">makemon.c:36</a></div></div>
<div class="ttc" id="structyou_html_a89878490db5d54221f04b3fb44ebdaa2"><div class="ttname"><a href="structyou.html#a89878490db5d54221f04b3fb44ebdaa2">you::uz</a></div><div class="ttdeci">d_level uz</div><div class="ttdef"><b>Definition:</b> <a href="you_8h_source.html#l00238">you.h:238</a></div></div>
<div class="ttc" id="tradstdc_8h_html_ad4a7dab7269b4b00e3c7c7d2e66f31cd"><div class="ttname"><a href="tradstdc_8h.html#ad4a7dab7269b4b00e3c7c7d2e66f31cd">genericptr_t</a></div><div class="ttdeci">genericptr genericptr_t</div><div class="ttdef"><b>Definition:</b> <a href="tradstdc_8h_source.html#l00188">tradstdc.h:188</a></div></div>
<div class="ttc" id="monsym_8h_html_a70d3e3d0bf39f29be7524b51287a7821"><div class="ttname"><a href="monsym_8h.html#a70d3e3d0bf39f29be7524b51287a7821">S_MIMIC_DEF</a></div><div class="ttdeci">#define S_MIMIC_DEF</div><div class="ttdef"><b>Definition:</b> <a href="monsym_8h_source.html#l00072">monsym.h:72</a></div></div>
<div class="ttc" id="decl_8h_html_a342ae6d3415cd569bcea437201040743"><div class="ttname"><a href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a></div><div class="ttdeci">E NEARDATA struct you u</div><div class="ttdef"><b>Definition:</b> <a href="decl_8h_source.html#l00255">decl.h:255</a></div></div>
<div class="ttc" id="monsym_8h_html_a6685ecc90740a8c3fee524b92e50f9d3"><div class="ttname"><a href="monsym_8h.html#a6685ecc90740a8c3fee524b92e50f9d3">S_SNAKE</a></div><div class="ttdeci">#define S_SNAKE</div><div class="ttdef"><b>Definition:</b> <a href="monsym_8h_source.html#l00056">monsym.h:56</a></div></div>
<div class="ttc" id="structpermonst_html"><div class="ttname"><a href="structpermonst.html">permonst</a></div><div class="ttdef"><b>Definition:</b> <a href="permonst_8h_source.html#l00041">permonst.h:41</a></div></div>
<div class="ttc" id="structobj_html_ad08c0ed1a746fbb52377ecd7e4220578"><div class="ttname"><a href="structobj.html#ad08c0ed1a746fbb52377ecd7e4220578">obj::quan</a></div><div class="ttdeci">long quan</div><div class="ttdef"><b>Definition:</b> <a href="obj_8h_source.html#l00029">obj.h:29</a></div></div>
<div class="ttc" id="vision_8c_html_ae985a63b19aa1a0a81fa91b46972e27e"><div class="ttname"><a href="vision_8c.html#ae985a63b19aa1a0a81fa91b46972e27e">block_point</a></div><div class="ttdeci">void block_point(int x, int y)</div><div class="ttdef"><b>Definition:</b> <a href="vision_8c_source.html#l00818">vision.c:818</a></div></div>
<div class="ttc" id="flag_8h_html_a997133526e0c6bed44ebc0116a48b50a"><div class="ttname"><a href="flag_8h.html#a997133526e0c6bed44ebc0116a48b50a">flags</a></div><div class="ttdeci">NEARDATA struct flag flags</div><div class="ttdef"><b>Definition:</b> <a href="decl_8c_source.html#l00143">decl.c:143</a></div></div>
<div class="ttc" id="rm_8h_html_af46e44dabc00162cdea350fe3dae252b"><div class="ttname"><a href="rm_8h.html#af46e44dabc00162cdea350fe3dae252b">place_monster</a></div><div class="ttdeci">#define place_monster(m, x, y)</div><div class="ttdef"><b>Definition:</b> <a href="rm_8h_source.html#l00516">rm.h:516</a></div></div>
<div class="ttc" id="mkmaze_8c_html_a24ac627a7839caecddfc66f1d46033f0"><div class="ttname"><a href="mkmaze_8c.html#a24ac627a7839caecddfc66f1d46033f0">register</a></div><div class="ttdeci">#define register</div><div class="ttdef"><b>Definition:</b> <a href="mkmaze_8c_source.html#l00912">mkmaze.c:912</a></div></div>
<div class="ttc" id="structpermonst_html_aeed45d1ab54620bc7e5242b76f1c3c5f"><div class="ttname"><a href="structpermonst.html#aeed45d1ab54620bc7e5242b76f1c3c5f">permonst::mlevel</a></div><div class="ttdeci">schar mlevel</div><div class="ttdef"><b>Definition:</b> <a href="permonst_8h_source.html#l00044">permonst.h:44</a></div></div>
<div class="ttc" id="monsym_8h_html_ae786a562c666489455f6663f735a5f77"><div class="ttname"><a href="monsym_8h.html#ae786a562c666489455f6663f735a5f77">S_KOP</a></div><div class="ttdeci">#define S_KOP</div><div class="ttdef"><b>Definition:</b> <a href="monsym_8h_source.html#l00048">monsym.h:48</a></div></div>
<div class="ttc" id="trap_8h_html_a8049ef47c05eee8156bccee8d819c506"><div class="ttname"><a href="trap_8h.html#a8049ef47c05eee8156bccee8d819c506">HOLE</a></div><div class="ttdeci">#define HOLE</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00065">trap.h:65</a></div></div>
<div class="ttc" id="rm_8h_html_a9290fa8691acb3539d3381fec0e4b24a"><div class="ttname"><a href="rm_8h.html#a9290fa8691acb3539d3381fec0e4b24a">TRWALL</a></div><div class="ttdeci">#define TRWALL</div><div class="ttdef"><b>Definition:</b> <a href="rm_8h_source.html#l00044">rm.h:44</a></div></div>
<div class="ttc" id="permonst_8h_html_aedc8e4764f8cf4d681f6f6226eeaa6af"><div class="ttname"><a href="permonst_8h.html#aedc8e4764f8cf4d681f6f6226eeaa6af">LOW_PM</a></div><div class="ttdeci">#define LOW_PM</div><div class="ttdef"><b>Definition:</b> <a href="permonst_8h_source.html#l00076">permonst.h:76</a></div></div>
<div class="ttc" id="rm_8h_html_a17ef631151b987fd582fca76a429c08a"><div class="ttname"><a href="rm_8h.html#a17ef631151b987fd582fca76a429c08a">MON_AT</a></div><div class="ttdeci">#define MON_AT(x, y)</div><div class="ttdef"><b>Definition:</b> <a href="rm_8h_source.html#l00511">rm.h:511</a></div></div>
<div class="ttc" id="lev__main_8c_html_ac765329451135abec74c45e1897abf26"><div class="ttname"><a href="lev__main_8c.html#ac765329451135abec74c45e1897abf26">type</a></div><div class="ttdeci">int type</div><div class="ttdef"><b>Definition:</b> <a href="lev__main_8c_source.html#l00109">lev_main.c:109</a></div></div>
<div class="ttc" id="monsym_8h_html_a9e0d9f6e11465919bac8252be7ead3f8"><div class="ttname"><a href="monsym_8h.html#a9e0d9f6e11465919bac8252be7ead3f8">S_NYMPH</a></div><div class="ttdeci">#define S_NYMPH</div><div class="ttdef"><b>Definition:</b> <a href="monsym_8h_source.html#l00026">monsym.h:26</a></div></div>
<div class="ttc" id="structmonst_html_a66c107319bb7bb318c04e6a0f5f03c60"><div class="ttname"><a href="structmonst.html#a66c107319bb7bb318c04e6a0f5f03c60">monst::mhpmax</a></div><div class="ttdeci">int mhpmax</div><div class="ttdef"><b>Definition:</b> <a href="monst_8h_source.html#l00053">monst.h:53</a></div></div>
<div class="ttc" id="monflag_8h_html_a5f22b81192022dc2e675cb658a7a71ac"><div class="ttname"><a href="monflag_8h.html#a5f22b81192022dc2e675cb658a7a71ac">M3_WAITFORU</a></div><div class="ttdeci">#define M3_WAITFORU</div><div class="ttdef"><b>Definition:</b> <a href="monflag_8h_source.html#l00153">monflag.h:153</a></div></div>
<div class="ttc" id="mondata_8h_html_aa0333e705b2ebafe594ebcdbed885cce"><div class="ttname"><a href="mondata_8h.html#aa0333e705b2ebafe594ebcdbed885cce">is_floater</a></div><div class="ttdeci">#define is_floater(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="mondata_8h_source.html#l00028">mondata.h:28</a></div></div>
<div class="ttc" id="monsym_8h_html_ad8b9f73f4b42e8250eb5a69a12482436"><div class="ttname"><a href="monsym_8h.html#ad8b9f73f4b42e8250eb5a69a12482436">S_MIMIC</a></div><div class="ttdeci">#define S_MIMIC</div><div class="ttdef"><b>Definition:</b> <a href="monsym_8h_source.html#l00025">monsym.h:25</a></div></div>
<div class="ttc" id="monsym_8h_html_ab0712e0f0d926039e2a9df8cdf27aab9"><div class="ttname"><a href="monsym_8h.html#ab0712e0f0d926039e2a9df8cdf27aab9">S_ZOMBIE</a></div><div class="ttdeci">#define S_ZOMBIE</div><div class="ttdef"><b>Definition:</b> <a href="monsym_8h_source.html#l00063">monsym.h:63</a></div></div>
<div class="ttc" id="mondata_8h_html_a34b30264e47f5967d450cc2c050951ce"><div class="ttname"><a href="mondata_8h.html#a34b30264e47f5967d450cc2c050951ce">is_elf</a></div><div class="ttdeci">#define is_elf(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="mondata_8h_source.html#l00080">mondata.h:80</a></div></div>
<div class="ttc" id="mondata_8h_html_a6bd06bc29ef4aaf6e4f982b587e1ea88"><div class="ttname"><a href="mondata_8h.html#a6bd06bc29ef4aaf6e4f982b587e1ea88">is_lminion</a></div><div class="ttdeci">#define is_lminion(mon)</div><div class="ttdef"><b>Definition:</b> <a href="mondata_8h_source.html#l00022">mondata.h:22</a></div></div>
<div class="ttc" id="objclass_8h_html_a05335e5ee18dfa33af1c40056fe8fab9"><div class="ttname"><a href="objclass_8h.html#a05335e5ee18dfa33af1c40056fe8fab9">POTION_CLASS</a></div><div class="ttdeci">#define POTION_CLASS</div><div class="ttdef"><b>Definition:</b> <a href="objclass_8h_source.html#l00132">objclass.h:132</a></div></div>
<div class="ttc" id="structdungeon_html_a24aeb7474605b968237cd46e85f5c9cc"><div class="ttname"><a href="structdungeon.html#a24aeb7474605b968237cd46e85f5c9cc">dungeon::flags</a></div><div class="ttdeci">d_flags flags</div><div class="ttdef"><b>Definition:</b> <a href="dungeon_8h_source.html#l00057">dungeon.h:57</a></div></div>
<div class="ttc" id="objclass_8h_html_afc09c51ea922e9928f86a51177244796"><div class="ttname"><a href="objclass_8h.html#afc09c51ea922e9928f86a51177244796">GEM_CLASS</a></div><div class="ttdeci">#define GEM_CLASS</div><div class="ttdef"><b>Definition:</b> <a href="objclass_8h_source.html#l00137">objclass.h:137</a></div></div>
<div class="ttc" id="structmonst_html_a9bc20171e986845daccff8aafd8b5194"><div class="ttname"><a href="structmonst.html#a9bc20171e986845daccff8aafd8b5194">monst::mx</a></div><div class="ttdeci">xchar mx</div><div class="ttdef"><b>Definition:</b> <a href="monst_8h_source.html#l00049">monst.h:49</a></div></div>
<div class="ttc" id="structmonst_html_a03fe7192ae1efd428bc9a0d2f856125f"><div class="ttname"><a href="structmonst.html#a03fe7192ae1efd428bc9a0d2f856125f">monst::mnamelth</a></div><div class="ttdeci">uchar mnamelth</div><div class="ttdef"><b>Definition:</b> <a href="monst_8h_source.html#l00142">monst.h:142</a></div></div>
<div class="ttc" id="monflag_8h_html_a68e4cc969a84dd9ffbdb3bb18a403fe6"><div class="ttname"><a href="monflag_8h.html#a68e4cc969a84dd9ffbdb3bb18a403fe6">G_LGROUP</a></div><div class="ttdeci">#define G_LGROUP</div><div class="ttdef"><b>Definition:</b> <a href="monflag_8h_source.html#l00187">monflag.h:187</a></div></div>
<div class="ttc" id="mondata_8h_html_a4ef9c86fddd17a5704d9312dd66d37f0"><div class="ttname"><a href="mondata_8h.html#a4ef9c86fddd17a5704d9312dd66d37f0">is_female</a></div><div class="ttdeci">#define is_female(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="mondata_8h_source.html#l00096">mondata.h:96</a></div></div>
<div class="ttc" id="structyou_html_ace2fd92f7f1a640e45775efe6e5f6cf7"><div class="ttname"><a href="structyou.html#ace2fd92f7f1a640e45775efe6e5f6cf7">you::ux</a></div><div class="ttdeci">xchar ux</div><div class="ttdef"><b>Definition:</b> <a href="you_8h_source.html#l00233">you.h:233</a></div></div>
<div class="ttc" id="rm_8h_html_a03fd0fa1e0dbd19ea38dff0c79e656a5"><div class="ttname"><a href="rm_8h.html#a03fd0fa1e0dbd19ea38dff0c79e656a5">SDOOR</a></div><div class="ttdeci">#define SDOOR</div><div class="ttdef"><b>Definition:</b> <a href="rm_8h_source.html#l00047">rm.h:47</a></div></div>
<div class="ttc" id="global_8h_html_aa8cecfc5c5c054d2875c03e77b7be15d"><div class="ttname"><a href="global_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a></div><div class="ttdeci">#define TRUE</div><div class="ttdef"><b>Definition:</b> <a href="global_8h_source.html#l00060">global.h:60</a></div></div>
<div class="ttc" id="makemon_8c_html_a2e4cd9d4199a5c6f1ecf9985d4a58dfb"><div class="ttname"><a href="makemon_8c.html#a2e4cd9d4199a5c6f1ecf9985d4a58dfb">monstr</a></div><div class="ttdeci">const int monstr[]</div></div>
<div class="ttc" id="rm_8h_html_a3fcd4705d7b0ac05a88302170fcc58f5"><div class="ttname"><a href="rm_8h.html#a3fcd4705d7b0ac05a88302170fcc58f5">HWALL</a></div><div class="ttdeci">#define HWALL</div><div class="ttdef"><b>Definition:</b> <a href="rm_8h_source.html#l00035">rm.h:35</a></div></div>
<div class="ttc" id="objclass_8h_html_ac72b41688ea83d87d0b4143899a9b0d7"><div class="ttname"><a href="objclass_8h.html#ac72b41688ea83d87d0b4143899a9b0d7">RANDOM_CLASS</a></div><div class="ttdeci">#define RANDOM_CLASS</div><div class="ttdef"><b>Definition:</b> <a href="objclass_8h_source.html#l00124">objclass.h:124</a></div></div>
<div class="ttc" id="hack_8h_html_a521db2c6d2f512da8384c71f01cc1c77"><div class="ttname"><a href="hack_8h.html#a521db2c6d2f512da8384c71f01cc1c77">MM_NOCOUNTBIRTH</a></div><div class="ttdeci">#define MM_NOCOUNTBIRTH</div><div class="ttdef"><b>Definition:</b> <a href="hack_8h_source.html#l00141">hack.h:141</a></div></div>
<div class="ttc" id="you_8h_html_ac1b9b8d9c3387e3d3a36b9474945879c"><div class="ttname"><a href="you_8h.html#ac1b9b8d9c3387e3d3a36b9474945879c">Race_if</a></div><div class="ttdeci">#define Race_if(X)</div><div class="ttdef"><b>Definition:</b> <a href="you_8h_source.html#l00194">you.h:194</a></div></div>
<div class="ttc" id="hack_8h_html_affe776513b24d84b39af8ab0930fef7f"><div class="ttname"><a href="hack_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a></div><div class="ttdeci">#define max(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="hack_8h_source.html#l00277">hack.h:277</a></div></div>
<div class="ttc" id="decl_8h_html_a2ccad6e8fb93740ed50c6d9a8f72ce2f"><div class="ttname"><a href="decl_8h.html#a2ccad6e8fb93740ed50c6d9a8f72ce2f">moves</a></div><div class="ttdeci">E NEARDATA long moves</div><div class="ttdef"><b>Definition:</b> <a href="decl_8h_source.html#l00213">decl.h:213</a></div></div>
<div class="ttc" id="structmonst_html_a6c24439d98c9580ee2a3918008801ac2"><div class="ttname"><a href="structmonst.html#a6c24439d98c9580ee2a3918008801ac2">monst::mxlth</a></div><div class="ttdeci">short mxlth</div><div class="ttdef"><b>Definition:</b> <a href="monst_8h_source.html#l00143">monst.h:143</a></div></div>
<div class="ttc" id="rm_8h_html_ac2a0c94b5722b98d84af548563e71d2f"><div class="ttname"><a href="rm_8h.html#ac2a0c94b5722b98d84af548563e71d2f">CROSSWALL</a></div><div class="ttdeci">#define CROSSWALL</div><div class="ttdef"><b>Definition:</b> <a href="rm_8h_source.html#l00040">rm.h:40</a></div></div>
<div class="ttc" id="objclass_8h_html_af05e45a3c94a4a19096ee4f048ee96cd"><div class="ttname"><a href="objclass_8h.html#af05e45a3c94a4a19096ee4f048ee96cd">AMULET_CLASS</a></div><div class="ttdeci">#define AMULET_CLASS</div><div class="ttdef"><b>Definition:</b> <a href="objclass_8h_source.html#l00129">objclass.h:129</a></div></div>
<div class="ttc" id="mondata_8h_html_ab19a9ff386dd9b2935e8d72395116035"><div class="ttname"><a href="mondata_8h.html#ab19a9ff386dd9b2935e8d72395116035">is_giant</a></div><div class="ttdeci">#define is_giant(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="mondata_8h_source.html#l00090">mondata.h:90</a></div></div>
<div class="ttc" id="mkroom_8h_html_a1e2090a3604c11b6e73a862a80cb1371"><div class="ttname"><a href="mkroom_8h.html#a1e2090a3604c11b6e73a862a80cb1371">ZOO</a></div><div class="ttdeci">#define ZOO</div><div class="ttdef"><b>Definition:</b> <a href="mkroom_8h_source.html#l00058">mkroom.h:58</a></div></div>
<div class="ttc" id="mkroom_8h_html_a925701a88c7ed0db502cfac9d8fbcf9e"><div class="ttname"><a href="mkroom_8h.html#a925701a88c7ed0db502cfac9d8fbcf9e">SHOPBASE</a></div><div class="ttdeci">#define SHOPBASE</div><div class="ttdef"><b>Definition:</b> <a href="mkroom_8h_source.html#l00064">mkroom.h:64</a></div></div>
<div class="ttc" id="muse_8c_html_ac8a389f8c0a717ed822b5f2e6d099e9d"><div class="ttname"><a href="muse_8c.html#ac8a389f8c0a717ed822b5f2e6d099e9d">rnd_defensive_item</a></div><div class="ttdeci">int rnd_defensive_item(struct monst *mtmp)</div><div class="ttdef"><b>Definition:</b> <a href="muse_8c_source.html#l00901">muse.c:901</a></div></div>
<div class="ttc" id="muse_8c_html_a3f44daad6fea8db7a3823a5ad9297cd7"><div class="ttname"><a href="muse_8c.html#a3f44daad6fea8db7a3823a5ad9297cd7">rnd_offensive_item</a></div><div class="ttdeci">int rnd_offensive_item(struct monst *mtmp)</div><div class="ttdef"><b>Definition:</b> <a href="muse_8c_source.html#l01518">muse.c:1518</a></div></div>
<div class="ttc" id="monsym_8h_html_a32530da03aef4c8fa67564f3d28b50dd"><div class="ttname"><a href="monsym_8h.html#a32530da03aef4c8fa67564f3d28b50dd">S_DRAGON</a></div><div class="ttdeci">#define S_DRAGON</div><div class="ttdef"><b>Definition:</b> <a href="monsym_8h_source.html#l00042">monsym.h:42</a></div></div>
<div class="ttc" id="monst_8h_html_af63a669ab8d81fc300e6344e6da84a7b"><div class="ttname"><a href="monst_8h.html#af63a669ab8d81fc300e6344e6da84a7b">STRAT_CLOSE</a></div><div class="ttdeci">#define STRAT_CLOSE</div><div class="ttdef"><b>Definition:</b> <a href="monst_8h_source.html#l00117">monst.h:117</a></div></div>
<div class="ttc" id="worm_8c_html_aa720d031cc0300330fbf45daaa61a260"><div class="ttname"><a href="worm_8c.html#aa720d031cc0300330fbf45daaa61a260">place_worm_tail_randomly</a></div><div class="ttdeci">void place_worm_tail_randomly(struct monst *worm, xchar x, xchar y)</div><div class="ttdef"><b>Definition:</b> <a href="worm_8c_source.html#l00590">worm.c:590</a></div></div>
<div class="ttc" id="objclass_8h_html_a3465d7e5f808c98fcfc32e3159b9d9c2"><div class="ttname"><a href="objclass_8h.html#a3465d7e5f808c98fcfc32e3159b9d9c2">WAND_CLASS</a></div><div class="ttdeci">#define WAND_CLASS</div><div class="ttdef"><b>Definition:</b> <a href="objclass_8h_source.html#l00135">objclass.h:135</a></div></div>
<div class="ttc" id="mondata_8h_html_ab87aa9751f23a675185a8e27a2e68448"><div class="ttname"><a href="mondata_8h.html#ab87aa9751f23a675185a8e27a2e68448">is_armed</a></div><div class="ttdeci">#define is_armed(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="mondata_8h_source.html#l00071">mondata.h:71</a></div></div>
<div class="ttc" id="youprop_8h_html_a9e650a188eadc75d315da94987861e26"><div class="ttname"><a href="youprop_8h.html#a9e650a188eadc75d315da94987861e26">Protection_from_shape_changers</a></div><div class="ttdeci">#define Protection_from_shape_changers</div><div class="ttdef"><b>Definition:</b> <a href="youprop_8h_source.html#l00310">youprop.h:310</a></div></div>
<div class="ttc" id="structflag_html_a234ec46fbb73d319d628aa1cc320be8b"><div class="ttname"><a href="structflag.html#a234ec46fbb73d319d628aa1cc320be8b">flag::no_of_wizards</a></div><div class="ttdeci">unsigned no_of_wizards</div><div class="ttdef"><b>Definition:</b> <a href="flag_8h_source.html#l00092">flag.h:92</a></div></div>
<div class="ttc" id="mhitu_8c_html_a8cf94e09e1a72daf7050a2817ba70974"><div class="ttname"><a href="mhitu_8c.html#a8cf94e09e1a72daf7050a2817ba70974">otmp</a></div><div class="ttdeci">STATIC_VAR NEARDATA struct obj * otmp</div><div class="ttdef"><b>Definition:</b> <a href="mhitu_8c_source.html#l00008">mhitu.c:8</a></div></div>
<div class="ttc" id="vision_8h_html_a857efc720262bc13a9e4b4bcbb079b5c"><div class="ttname"><a href="vision_8h.html#a857efc720262bc13a9e4b4bcbb079b5c">cansee</a></div><div class="ttdeci">#define cansee(x, y)</div><div class="ttdef"><b>Definition:</b> <a href="vision_8h_source.html#l00030">vision.h:30</a></div></div>
<div class="ttc" id="rm_8h_html_af84b49fffdbf2780a5eb39f0203e4ffa"><div class="ttname"><a href="rm_8h.html#af84b49fffdbf2780a5eb39f0203e4ffa">IS_ROOM</a></div><div class="ttdeci">#define IS_ROOM(typ)</div><div class="ttdef"><b>Definition:</b> <a href="rm_8h_source.html#l00085">rm.h:85</a></div></div>
<div class="ttc" id="monflag_8h_html_ac52e9284dd37996ba52a647af0862eee"><div class="ttname"><a href="monflag_8h.html#ac52e9284dd37996ba52a647af0862eee">G_FREQ</a></div><div class="ttdeci">#define G_FREQ</div><div class="ttdef"><b>Definition:</b> <a href="monflag_8h_source.html#l00190">monflag.h:190</a></div></div>
<div class="ttc" id="monsym_8h_html_a6283a16b3c897902a0dbaed3d06403c2"><div class="ttname"><a href="monsym_8h.html#a6283a16b3c897902a0dbaed3d06403c2">S_LIZARD</a></div><div class="ttdeci">#define S_LIZARD</div><div class="ttdef"><b>Definition:</b> <a href="monsym_8h_source.html#l00069">monsym.h:69</a></div></div>
<div class="ttc" id="structmonst_html_a5c8369d63f2ae0ca4466258542edecbe"><div class="ttname"><a href="structmonst.html#a5c8369d63f2ae0ca4466258542edecbe">monst::data</a></div><div class="ttdeci">struct permonst * data</div><div class="ttdef"><b>Definition:</b> <a href="monst_8h_source.html#l00042">monst.h:42</a></div></div>
<div class="ttc" id="structmonst_html_abe22e95755f1348a6a1c78252be5d76d"><div class="ttname"><a href="structmonst.html#abe22e95755f1348a6a1c78252be5d76d">monst::mhp</a></div><div class="ttdeci">int mhp</div><div class="ttdef"><b>Definition:</b> <a href="monst_8h_source.html#l00053">monst.h:53</a></div></div>
<div class="ttc" id="monsym_8h_html_a61469c4fc890b937a980c72b87b462de"><div class="ttname"><a href="monsym_8h.html#a61469c4fc890b937a980c72b87b462de">S_LEPRECHAUN</a></div><div class="ttdeci">#define S_LEPRECHAUN</div><div class="ttdef"><b>Definition:</b> <a href="monsym_8h_source.html#l00024">monsym.h:24</a></div></div>
<div class="ttc" id="objclass_8h_html_aba5935524b39b0fdd148a3d466a5c580"><div class="ttname"><a href="objclass_8h.html#aba5935524b39b0fdd148a3d466a5c580">SPBOOK_CLASS</a></div><div class="ttdeci">#define SPBOOK_CLASS</div><div class="ttdef"><b>Definition:</b> <a href="objclass_8h_source.html#l00134">objclass.h:134</a></div></div>
<div class="ttc" id="monsym_8h_html_a5fbb649f5f1192ce9fd21c64ba22f2e1"><div class="ttname"><a href="monsym_8h.html#a5fbb649f5f1192ce9fd21c64ba22f2e1">S_UNICORN</a></div><div class="ttdeci">#define S_UNICORN</div><div class="ttdef"><b>Definition:</b> <a href="monsym_8h_source.html#l00033">monsym.h:33</a></div></div>
<div class="ttc" id="structq__score_html_af070331d315654feb7df64146dea339d"><div class="ttname"><a href="structq__score.html#af070331d315654feb7df64146dea339d">q_score::leader_m_id</a></div><div class="ttdeci">unsigned leader_m_id</div><div class="ttdef"><b>Definition:</b> <a href="quest_8h_source.html#l00032">quest.h:32</a></div></div>
<div class="ttc" id="mkroom_8h_html_acc0f2416007c594c5d38f980dedc1b68"><div class="ttname"><a href="mkroom_8h.html#acc0f2416007c594c5d38f980dedc1b68">ROOMOFFSET</a></div><div class="ttdeci">#define ROOMOFFSET</div><div class="ttdef"><b>Definition:</b> <a href="mkroom_8h_source.html#l00087">mkroom.h:87</a></div></div>
<div class="ttc" id="mondata_8h_html_a17cf7d4bd486ef41147798b0eee91b89"><div class="ttname"><a href="mondata_8h.html#a17cf7d4bd486ef41147798b0eee91b89">pm_resistance</a></div><div class="ttdeci">#define pm_resistance(ptr, typ)</div><div class="ttdef"><b>Definition:</b> <a href="mondata_8h_source.html#l00011">mondata.h:11</a></div></div>
<div class="ttc" id="teleport_8c_html_a6eccfce2bb34ffe646ba537130d622e3"><div class="ttname"><a href="teleport_8c.html#a6eccfce2bb34ffe646ba537130d622e3">goodpos</a></div><div class="ttdeci">boolean goodpos(int x, int y, struct monst *mtmp, unsigned gpflags)</div><div class="ttdef"><b>Definition:</b> <a href="teleport_8c_source.html#l00021">teleport.c:21</a></div></div>
<div class="ttc" id="structmonst_html_a06dbdd0ca7ee096216aa10f86beed533"><div class="ttname"><a href="structmonst.html#a06dbdd0ca7ee096216aa10f86beed533">monst::mgold</a></div><div class="ttdeci">long mgold</div><div class="ttdef"><b>Definition:</b> <a href="monst_8h_source.html#l00134">monst.h:134</a></div></div>
<div class="ttc" id="monsym_8h_html_a12f9073e331246f69c12938498713b20"><div class="ttname"><a href="monsym_8h.html#a12f9073e331246f69c12938498713b20">S_LIGHT</a></div><div class="ttdeci">#define S_LIGHT</div><div class="ttdef"><b>Definition:</b> <a href="monsym_8h_source.html#l00037">monsym.h:37</a></div></div>
<div class="ttc" id="global_8h_html_a308dbfcc29f5a427c0315f3cbf03c3ed"><div class="ttname"><a href="global_8h.html#a308dbfcc29f5a427c0315f3cbf03c3ed">COLNO</a></div><div class="ttdeci">#define COLNO</div><div class="ttdef"><b>Definition:</b> <a href="global_8h_source.html#l00317">global.h:317</a></div></div>
<div class="ttc" id="dungeon_8h_html_aa4eaf851320108eeaacde06ca61fe041"><div class="ttname"><a href="dungeon_8h.html#aa4eaf851320108eeaacde06ca61fe041">Is_earthlevel</a></div><div class="ttdeci">#define Is_earthlevel(x)</div><div class="ttdef"><b>Definition:</b> <a href="dungeon_8h_source.html#l00102">dungeon.h:102</a></div></div>
<div class="ttc" id="mondata_8h_html_afeb3370436f9f0f0543e3546a2782b3d"><div class="ttname"><a href="mondata_8h.html#afeb3370436f9f0f0543e3546a2782b3d">is_lord</a></div><div class="ttdeci">#define is_lord(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="mondata_8h_source.html#l00111">mondata.h:111</a></div></div>
<div class="ttc" id="mondata_8h_html_ac9771120ab9458112bfd7b8099f978ba"><div class="ttname"><a href="mondata_8h.html#ac9771120ab9458112bfd7b8099f978ba">strongmonst</a></div><div class="ttdeci">#define strongmonst(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="mondata_8h_source.html#l00104">mondata.h:104</a></div></div>
<div class="ttc" id="mondata_8h_html_a79f42d78ef48eeced079d5c5de9b0fa2"><div class="ttname"><a href="mondata_8h.html#a79f42d78ef48eeced079d5c5de9b0fa2">is_placeholder</a></div><div class="ttdeci">#define is_placeholder(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="mondata_8h_source.html#l00137">mondata.h:137</a></div></div>
<div class="ttc" id="monsym_8h_html_a1e90d90b99d56ba8c44f924e951a6602"><div class="ttname"><a href="monsym_8h.html#a1e90d90b99d56ba8c44f924e951a6602">S_GIANT</a></div><div class="ttdeci">#define S_GIANT</div><div class="ttdef"><b>Definition:</b> <a href="monsym_8h_source.html#l00046">monsym.h:46</a></div></div>
<div class="ttc" id="monst_8h_html_aa5d87eb24bb6295bb77589479298629a"><div class="ttname"><a href="monst_8h.html#aa5d87eb24bb6295bb77589479298629a">CHAM_ORDINARY</a></div><div class="ttdeci">#define CHAM_ORDINARY</div><div class="ttdef"><b>Definition:</b> <a href="monst_8h_source.html#l00072">monst.h:72</a></div></div>
<div class="ttc" id="dungeon_8h_html_ae85486e6a752224948478a6e9dab0329"><div class="ttname"><a href="dungeon_8h.html#ae85486e6a752224948478a6e9dab0329">In_endgame</a></div><div class="ttdeci">#define In_endgame(x)</div><div class="ttdef"><b>Definition:</b> <a href="dungeon_8h_source.html#l00127">dungeon.h:127</a></div></div>
<div class="ttc" id="monsym_8h_html_a090fde972c0c8b83a994ae5472ff0852"><div class="ttname"><a href="monsym_8h.html#a090fde972c0c8b83a994ae5472ff0852">S_ANGEL</a></div><div class="ttdeci">#define S_ANGEL</div><div class="ttdef"><b>Definition:</b> <a href="monsym_8h_source.html#l00039">monsym.h:39</a></div></div>
<div class="ttc" id="config1_8h_html_a9987bf629301f5fe76ddd96aa2717ca1"><div class="ttname"><a href="config1_8h.html#a9987bf629301f5fe76ddd96aa2717ca1">NEARDATA</a></div><div class="ttdeci">#define NEARDATA</div><div class="ttdef"><b>Definition:</b> <a href="config1_8h_source.html#l00079">config1.h:79</a></div></div>
<div class="ttc" id="structmonst_html_a3fea4dd3adc3f4921e8b68a1f31326dd"><div class="ttname"><a href="structmonst.html#a3fea4dd3adc3f4921e8b68a1f31326dd">monst::mextra</a></div><div class="ttdeci">long mextra[1]</div><div class="ttdef"><b>Definition:</b> <a href="monst_8h_source.html#l00147">monst.h:147</a></div></div>
<div class="ttc" id="hack_8h_html_a748ce8be8371670ccbbc5e5debfc2e18"><div class="ttname"><a href="hack_8h.html#a748ce8be8371670ccbbc5e5debfc2e18">MM_EMIN</a></div><div class="ttdeci">#define MM_EMIN</div><div class="ttdef"><b>Definition:</b> <a href="hack_8h_source.html#l00138">hack.h:138</a></div></div>
<div class="ttc" id="objclass_8h_html_a4d65a9d3e979073915c207bf6a806d63"><div class="ttname"><a href="objclass_8h.html#a4d65a9d3e979073915c207bf6a806d63">RING_CLASS</a></div><div class="ttdeci">#define RING_CLASS</div><div class="ttdef"><b>Definition:</b> <a href="objclass_8h_source.html#l00128">objclass.h:128</a></div></div>
<div class="ttc" id="mondata_8h_html_a8bca282ec1e3773ac219c334e54071d5"><div class="ttname"><a href="mondata_8h.html#a8bca282ec1e3773ac219c334e54071d5">is_mplayer</a></div><div class="ttdeci">#define is_mplayer(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="mondata_8h_source.html#l00132">mondata.h:132</a></div></div>
<div class="ttc" id="youprop_8h_html_ae00ea7702fa1870643d604364b0640c7"><div class="ttname"><a href="youprop_8h.html#ae00ea7702fa1870643d604364b0640c7">See_invisible</a></div><div class="ttdeci">#define See_invisible</div><div class="ttdef"><b>Definition:</b> <a href="youprop_8h_source.html#l00139">youprop.h:139</a></div></div>
<div class="ttc" id="worn_8c_html_adaf11e4f4e6b2b5d86738411700e6050"><div class="ttname"><a href="worn_8c.html#adaf11e4f4e6b2b5d86738411700e6050">mon_adjust_speed</a></div><div class="ttdeci">void mon_adjust_speed(struct monst *mon, int adjust, struct obj *obj)</div><div class="ttdef"><b>Definition:</b> <a href="worn_8c_source.html#l00144">worn.c:144</a></div></div>
<div class="ttc" id="worn_8c_html_a7e0d383cf09a999a333ec1154d0d52f3"><div class="ttname"><a href="worn_8c.html#a7e0d383cf09a999a333ec1154d0d52f3">m_dowear</a></div><div class="ttdeci">void m_dowear(struct monst *mon, boolean creation)</div><div class="ttdef"><b>Definition:</b> <a href="worn_8c_source.html#l00359">worn.c:359</a></div></div>
<div class="ttc" id="muse_8c_html_a23c2634e5c91f8a024abfa2a7eaebe91"><div class="ttname"><a href="muse_8c.html#a23c2634e5c91f8a024abfa2a7eaebe91">rnd_misc_item</a></div><div class="ttdeci">int rnd_misc_item(struct monst *mtmp)</div><div class="ttdef"><b>Definition:</b> <a href="muse_8c_source.html#l01909">muse.c:1909</a></div></div>
<div class="ttc" id="structflag_html_aefca97315c578e47f6c6cdf06864db9e"><div class="ttname"><a href="structflag.html#aefca97315c578e47f6c6cdf06864db9e">flag::mon_moving</a></div><div class="ttdeci">boolean mon_moving</div><div class="ttdef"><b>Definition:</b> <a href="flag_8h_source.html#l00054">flag.h:54</a></div></div>
<div class="ttc" id="mondata_8h_html_a6d73bc7ae8f744da17f71450f865aacc"><div class="ttname"><a href="mondata_8h.html#a6d73bc7ae8f744da17f71450f865aacc">is_mercenary</a></div><div class="ttdeci">#define is_mercenary(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="mondata_8h_source.html#l00094">mondata.h:94</a></div></div>
<div class="ttc" id="monflag_8h_html_ad600313e20617adbf44819cf9707971a"><div class="ttname"><a href="monflag_8h.html#ad600313e20617adbf44819cf9707971a">G_GONE</a></div><div class="ttdeci">#define G_GONE</div><div class="ttdef"><b>Definition:</b> <a href="monflag_8h_source.html#l00194">monflag.h:194</a></div></div>
<div class="ttc" id="config_8h_html_a0fd9ce9d735064461bebfe6037026093"><div class="ttname"><a href="config_8h.html#a0fd9ce9d735064461bebfe6037026093">schar</a></div><div class="ttdeci">signed char schar</div><div class="ttdef"><b>Definition:</b> <a href="config_8h_source.html#l00262">config.h:262</a></div></div>
<div class="ttc" id="mondata_8h_html_a4e4710e23825db37f89573ca6ab1e3b4"><div class="ttname"><a href="mondata_8h.html#a4e4710e23825db37f89573ca6ab1e3b4">is_ndemon</a></div><div class="ttdeci">#define is_ndemon(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="mondata_8h_source.html#l00113">mondata.h:113</a></div></div>
<div class="ttc" id="mondata_8h_html_a88f89429a4a8ec2fdaa354be5bc612c1"><div class="ttname"><a href="mondata_8h.html#a88f89429a4a8ec2fdaa354be5bc612c1">is_prince</a></div><div class="ttdeci">#define is_prince(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="mondata_8h_source.html#l00112">mondata.h:112</a></div></div>
<div class="ttc" id="align_8h_html_ae71f403a880b9d841b76e4cf64de1af6"><div class="ttname"><a href="align_8h.html#ae71f403a880b9d841b76e4cf64de1af6">AM_NONE</a></div><div class="ttdeci">#define AM_NONE</div><div class="ttdef"><b>Definition:</b> <a href="align_8h_source.html#l00027">align.h:27</a></div></div>
<div class="ttc" id="monflag_8h_html_af82bef56ee71b15c2745bbd1c5cc3549"><div class="ttname"><a href="monflag_8h.html#af82bef56ee71b15c2745bbd1c5cc3549">M3_CLOSE</a></div><div class="ttdeci">#define M3_CLOSE</div><div class="ttdef"><b>Definition:</b> <a href="monflag_8h_source.html#l00154">monflag.h:154</a></div></div>
<div class="ttc" id="questpgr_8c_html_a57090f6c6e025099a1ce1e0750885cc4"><div class="ttname"><a href="questpgr_8c.html#a57090f6c6e025099a1ce1e0750885cc4">qt_montype</a></div><div class="ttdeci">struct permonst * qt_montype()</div><div class="ttdef"><b>Definition:</b> <a href="questpgr_8c_source.html#l00426">questpgr.c:426</a></div></div>
<div class="ttc" id="structgold_html"><div class="ttname"><a href="structgold.html">gold</a></div><div class="ttdef"><b>Definition:</b> <a href="sp__lev_8h_source.html#l00114">sp_lev.h:114</a></div></div>
<div class="ttc" id="structmvitals_html"><div class="ttname"><a href="structmvitals.html">mvitals</a></div><div class="ttdef"><b>Definition:</b> <a href="decl_8h_source.html#l00265">decl.h:265</a></div></div>
<div class="ttc" id="hack_8h_html_ae449582f467baa0da531a6ea116a18f2"><div class="ttname"><a href="hack_8h.html#ae449582f467baa0da531a6ea116a18f2">NO_MM_FLAGS</a></div><div class="ttdeci">#define NO_MM_FLAGS</div><div class="ttdef"><b>Definition:</b> <a href="hack_8h_source.html#l00134">hack.h:134</a></div></div>
<div class="ttc" id="structmonst_html_a480856d6a5db5610593c9816e525a978"><div class="ttname"><a href="structmonst.html#a480856d6a5db5610593c9816e525a978">monst::minvent</a></div><div class="ttdeci">struct obj * minvent</div><div class="ttdef"><b>Definition:</b> <a href="monst_8h_source.html#l00136">monst.h:136</a></div></div>
<div class="ttc" id="rm_8h_html_aa2fb4b079e394b211180b9a57cff39ac"><div class="ttname"><a href="rm_8h.html#aa2fb4b079e394b211180b9a57cff39ac">S_hcdoor</a></div><div class="ttdeci">#define S_hcdoor</div><div class="ttdef"><b>Definition:</b> <a href="rm_8h_source.html#l00123">rm.h:123</a></div></div>
<div class="ttc" id="txt2iff_8c_html_ab0824b6f5eb51db9371d2e9a222249d3"><div class="ttname"><a href="txt2iff_8c.html#ab0824b6f5eb51db9371d2e9a222249d3">panic</a></div><div class="ttdeci">void panic(const char *)</div><div class="ttdef"><b>Definition:</b> <a href="txt2iff_8c_source.html#l00454">txt2iff.c:454</a></div></div>
<div class="ttc" id="objects_8c_html_a3e459f83894a8f768a64c69247fd686f"><div class="ttname"><a href="objects_8c.html#a3e459f83894a8f768a64c69247fd686f">BOW</a></div><div class="ttdeci">#define BOW(name, app, kn, prob, wt, cost, hitbon, metal, sub, color)</div></div>
<div class="ttc" id="edog_8h_html_a695eedda64fa55285c2ea3b098308a70"><div class="ttname"><a href="edog_8h.html#a695eedda64fa55285c2ea3b098308a70">EDOG</a></div><div class="ttdeci">#define EDOG(mon)</div><div class="ttdef"><b>Definition:</b> <a href="edog_8h_source.html#l00031">edog.h:31</a></div></div>
<div class="ttc" id="monsym_8h_html_af0c3ce0cab08d748710bf38390422cdd"><div class="ttname"><a href="monsym_8h.html#af0c3ce0cab08d748710bf38390422cdd">S_MUMMY</a></div><div class="ttdeci">#define S_MUMMY</div><div class="ttdef"><b>Definition:</b> <a href="monsym_8h_source.html#l00050">monsym.h:50</a></div></div>
<div class="ttc" id="monsym_8h_html_a923120ddc98c245500abf2711e27a4a7"><div class="ttname"><a href="monsym_8h.html#a923120ddc98c245500abf2711e27a4a7">S_WRAITH</a></div><div class="ttdeci">#define S_WRAITH</div><div class="ttdef"><b>Definition:</b> <a href="monsym_8h_source.html#l00060">monsym.h:60</a></div></div>
<div class="ttc" id="rm_8h_html_ad4ca1095edc055a8d3e1debbdaff6b1a"><div class="ttname"><a href="rm_8h.html#ad4ca1095edc055a8d3e1debbdaff6b1a">S_fountain</a></div><div class="ttdeci">#define S_fountain</div><div class="ttdef"><b>Definition:</b> <a href="rm_8h_source.html#l00137">rm.h:137</a></div></div>
<div class="ttc" id="objclass_8h_html_aaf0eb1ef8fd79e34747c058357003983"><div class="ttname"><a href="objclass_8h.html#aaf0eb1ef8fd79e34747c058357003983">ROCK_CLASS</a></div><div class="ttdeci">#define ROCK_CLASS</div><div class="ttdef"><b>Definition:</b> <a href="objclass_8h_source.html#l00138">objclass.h:138</a></div></div>
<div class="ttc" id="hack_8h_html_a1a6292933fe0a0d5fc9473a27701d413"><div class="ttname"><a href="hack_8h.html#a1a6292933fe0a0d5fc9473a27701d413">MM_NOWAIT</a></div><div class="ttdeci">#define MM_NOWAIT</div><div class="ttdef"><b>Definition:</b> <a href="hack_8h_source.html#l00136">hack.h:136</a></div></div>
<div class="ttc" id="monflag_8h_html_a5f84d434703b8711f037b27f2f6a345c"><div class="ttname"><a href="monflag_8h.html#a5f84d434703b8711f037b27f2f6a345c">MS_BRIBE</a></div><div class="ttdeci">#define MS_BRIBE</div><div class="ttdef"><b>Definition:</b> <a href="monflag_8h_source.html#l00039">monflag.h:39</a></div></div>
<div class="ttc" id="monflag_8h_html_ad3e95482807ad66e48de9c5e1c865e63"><div class="ttname"><a href="monflag_8h.html#ad3e95482807ad66e48de9c5e1c865e63">MS_NEMESIS</a></div><div class="ttdeci">#define MS_NEMESIS</div><div class="ttdef"><b>Definition:</b> <a href="monflag_8h_source.html#l00043">monflag.h:43</a></div></div>
<div class="ttc" id="structflag_html_a49bc19dacb9cf8ae7e97cf22bb964e2d"><div class="ttname"><a href="structflag.html#a49bc19dacb9cf8ae7e97cf22bb964e2d">flag::djinni_count</a></div><div class="ttdeci">int djinni_count</div><div class="ttdef"><b>Definition:</b> <a href="flag_8h_source.html#l00099">flag.h:99</a></div></div>
<div class="ttc" id="structmvitals_html_aa0f6a023b807f36c252377132ed25e72"><div class="ttname"><a href="structmvitals.html#aa0f6a023b807f36c252377132ed25e72">mvitals::died</a></div><div class="ttdeci">uchar died</div><div class="ttdef"><b>Definition:</b> <a href="decl_8h_source.html#l00267">decl.h:267</a></div></div>
<div class="ttc" id="mondata_8h_html_a9b2e225376aeed6f19559b2c2dced2d0"><div class="ttname"><a href="mondata_8h.html#a9b2e225376aeed6f19559b2c2dced2d0">mindless</a></div><div class="ttdeci">#define mindless(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="mondata_8h_source.html#l00057">mondata.h:57</a></div></div>
<div class="ttc" id="monflag_8h_html_a3da4007839e17d9f696a70de0db6905a"><div class="ttname"><a href="monflag_8h.html#a3da4007839e17d9f696a70de0db6905a">G_HELL</a></div><div class="ttdeci">#define G_HELL</div><div class="ttdef"><b>Definition:</b> <a href="monflag_8h_source.html#l00184">monflag.h:184</a></div></div>
<div class="ttc" id="objclass_8h_html_ad8e3b1b1f1bd8dff660c15840a3f2b03"><div class="ttname"><a href="objclass_8h.html#ad8e3b1b1f1bd8dff660c15840a3f2b03">TOOL_CLASS</a></div><div class="ttdeci">#define TOOL_CLASS</div><div class="ttdef"><b>Definition:</b> <a href="objclass_8h_source.html#l00130">objclass.h:130</a></div></div>
<div class="ttc" id="rm_8h_html_a44de5677b6310b3b96cad756e24b59d9"><div class="ttname"><a href="rm_8h.html#a44de5677b6310b3b96cad756e24b59d9">IS_DOOR</a></div><div class="ttdeci">#define IS_DOOR(typ)</div><div class="ttdef"><b>Definition:</b> <a href="rm_8h_source.html#l00081">rm.h:81</a></div></div>
<div class="ttc" id="mondata_8h_html_a9f5d39edf86a6137fd76d419c7914af4"><div class="ttname"><a href="mondata_8h.html#a9f5d39edf86a6137fd76d419c7914af4">is_demon</a></div><div class="ttdeci">#define is_demon(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="mondata_8h_source.html#l00093">mondata.h:93</a></div></div>
<div class="ttc" id="mondata_8h_html_aea6ec71970ce94bddd2270e198ff62f6"><div class="ttname"><a href="mondata_8h.html#aea6ec71970ce94bddd2270e198ff62f6">is_unicorn</a></div><div class="ttdeci">#define is_unicorn(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="mondata_8h_source.html#l00125">mondata.h:125</a></div></div>
<div class="ttc" id="permonst_8h_html_a3f241dd2d853d0d814ca915fcfd50d06"><div class="ttname"><a href="permonst_8h.html#a3f241dd2d853d0d814ca915fcfd50d06">SPECIAL_PM</a></div><div class="ttdeci">#define SPECIAL_PM</div><div class="ttdef"><b>Definition:</b> <a href="permonst_8h_source.html#l00077">permonst.h:77</a></div></div>
<div class="ttc" id="structpermonst_html_a8f9cc062b40fa92ce38e504987326190"><div class="ttname"><a href="structpermonst.html#a8f9cc062b40fa92ce38e504987326190">permonst::msound</a></div><div class="ttdeci">uchar msound</div><div class="ttdef"><b>Definition:</b> <a href="permonst_8h_source.html#l00054">permonst.h:54</a></div></div>
<div class="ttc" id="structmonst_html_a1a7aab6d8ab6271ccb21d34806c73f47"><div class="ttname"><a href="structmonst.html#a1a7aab6d8ab6271ccb21d34806c73f47">monst::mnum</a></div><div class="ttdeci">short mnum</div><div class="ttdef"><b>Definition:</b> <a href="monst_8h_source.html#l00044">monst.h:44</a></div></div>
<div class="ttc" id="rm_8h_html_a9b7eba07f916406d6d62f5f82d273e40"><div class="ttname"><a href="rm_8h.html#a9b7eba07f916406d6d62f5f82d273e40">fmon</a></div><div class="ttdeci">#define fmon</div><div class="ttdef"><b>Definition:</b> <a href="rm_8h_source.html#l00497">rm.h:497</a></div></div>
<div class="ttc" id="monflag_8h_html_a6f4a7d5b60b0d1cdd5e5a194cfcc5cc3"><div class="ttname"><a href="monflag_8h.html#a6f4a7d5b60b0d1cdd5e5a194cfcc5cc3">G_EXTINCT</a></div><div class="ttdeci">#define G_EXTINCT</div><div class="ttdef"><b>Definition:</b> <a href="monflag_8h_source.html#l00196">monflag.h:196</a></div></div>
<div class="ttc" id="mondata_8h_html_aeae2da0c70efc6db9195f4216943a3a1"><div class="ttname"><a href="mondata_8h.html#aeae2da0c70efc6db9195f4216943a3a1">nonliving</a></div><div class="ttdeci">#define nonliving(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="mondata_8h_source.html#l00168">mondata.h:168</a></div></div>
<div class="ttc" id="hack_8h_html_a5d5a01be741383c3f65cf13efc3b1b3d"><div class="ttname"><a href="hack_8h.html#a5d5a01be741383c3f65cf13efc3b1b3d">MM_NONAME</a></div><div class="ttdeci">#define MM_NONAME</div><div class="ttdef"><b>Definition:</b> <a href="hack_8h_source.html#l00140">hack.h:140</a></div></div>
<div class="ttc" id="mondata_8h_html_a5ab488202bebe9f5289b187f1bc0ef07"><div class="ttname"><a href="mondata_8h.html#a5ab488202bebe9f5289b187f1bc0ef07">race_hostile</a></div><div class="ttdeci">#define race_hostile(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="mondata_8h_source.html#l00101">mondata.h:101</a></div></div>
<div class="ttc" id="hack_8h_html_a01b21691d813ceb087b72a5f9db412c6"><div class="ttname"><a href="hack_8h.html#a01b21691d813ceb087b72a5f9db412c6">STATIC_VAR</a></div><div class="ttdeci">#define STATIC_VAR</div><div class="ttdef"><b>Definition:</b> <a href="hack_8h_source.html#l00314">hack.h:314</a></div></div>
<div class="ttc" id="objclass_8h_html_a2999621925083659147349e261e4cb3d"><div class="ttname"><a href="objclass_8h.html#a2999621925083659147349e261e4cb3d">COIN_CLASS</a></div><div class="ttdeci">#define COIN_CLASS</div><div class="ttdef"><b>Definition:</b> <a href="objclass_8h_source.html#l00136">objclass.h:136</a></div></div>
<div class="ttc" id="structalign_html_a0dadfa91b9ff06447f91ea8a2b898827"><div class="ttname"><a href="structalign.html#a0dadfa91b9ff06447f91ea8a2b898827">align::type</a></div><div class="ttdeci">aligntyp type</div><div class="ttdef"><b>Definition:</b> <a href="align_8h_source.html#l00011">align.h:11</a></div></div>
<div class="ttc" id="structalign_html_ab3a768425270c33f059e3ead817e4e83"><div class="ttname"><a href="structalign.html#ab3a768425270c33f059e3ead817e4e83">align::record</a></div><div class="ttdeci">int record</div><div class="ttdef"><b>Definition:</b> <a href="align_8h_source.html#l00012">align.h:12</a></div></div>
<div class="ttc" id="decl_8h_html_a5c020f7f0a7d05e7db4caaec33caa9d7"><div class="ttname"><a href="decl_8h.html#a5c020f7f0a7d05e7db4caaec33caa9d7">quest_dnum</a></div><div class="ttdeci">#define quest_dnum</div><div class="ttdef"><b>Definition:</b> <a href="decl_8h_source.html#l00102">decl.h:102</a></div></div>
<div class="ttc" id="global_8h_html_a9cce134868d97b23c35bcf1ff4a343d8"><div class="ttname"><a href="global_8h.html#a9cce134868d97b23c35bcf1ff4a343d8">ROWNO</a></div><div class="ttdeci">#define ROWNO</div><div class="ttdef"><b>Definition:</b> <a href="global_8h_source.html#l00318">global.h:318</a></div></div>
<div class="ttc" id="mondata_8h_html_a4009754855425b7a9d4f1256086c82e2"><div class="ttname"><a href="mondata_8h.html#a4009754855425b7a9d4f1256086c82e2">always_hostile</a></div><div class="ttdeci">#define always_hostile(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="mondata_8h_source.html#l00099">mondata.h:99</a></div></div>
<div class="ttc" id="hack_8h_html_aa30b82d0d8c1e7c65e58f27bcde29ae1"><div class="ttname"><a href="hack_8h.html#aa30b82d0d8c1e7c65e58f27bcde29ae1">MM_EDOG</a></div><div class="ttdeci">#define MM_EDOG</div><div class="ttdef"><b>Definition:</b> <a href="hack_8h_source.html#l00137">hack.h:137</a></div></div>
<div class="ttc" id="global_8h_html_aa93f0eb578d23995850d61f7d61c55c1"><div class="ttname"><a href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a></div><div class="ttdeci">#define FALSE</div><div class="ttdef"><b>Definition:</b> <a href="global_8h_source.html#l00061">global.h:61</a></div></div>
<div class="ttc" id="you_8h_html_a02ab05651821bbe8851d8459a27553e3"><div class="ttname"><a href="you_8h.html#a02ab05651821bbe8851d8459a27553e3">mhe</a></div><div class="ttdeci">#define mhe(mtmp)</div><div class="ttdef"><b>Definition:</b> <a href="you_8h_source.html#l00213">you.h:213</a></div></div>
<div class="ttc" id="structepri_html"><div class="ttname"><a href="structepri.html">epri</a></div><div class="ttdef"><b>Definition:</b> <a href="epri_8h_source.html#l00008">epri.h:8</a></div></div>
<div class="ttc" id="monst_8h_html_a352cffea2f66afefb6dece2621aad500"><div class="ttname"><a href="monst_8h.html#a352cffea2f66afefb6dece2621aad500">newmonst</a></div><div class="ttdeci">#define newmonst(xl)</div><div class="ttdef"><b>Definition:</b> <a href="monst_8h_source.html#l00167">monst.h:167</a></div></div>
<div class="ttc" id="monflag_8h_html_a6e1ee38e14cf83854c7413f0cdd83e7e"><div class="ttname"><a href="monflag_8h.html#a6e1ee38e14cf83854c7413f0cdd83e7e">MS_PRIEST</a></div><div class="ttdeci">#define MS_PRIEST</div><div class="ttdef"><b>Definition:</b> <a href="monflag_8h_source.html#l00047">monflag.h:47</a></div></div>
<div class="ttc" id="display_8c_html_a185c6ad6e4c5a6be26a371b9aa17c32e"><div class="ttname"><a href="display_8c.html#a185c6ad6e4c5a6be26a371b9aa17c32e">newsym</a></div><div class="ttdeci">void newsym(int x, int y)</div><div class="ttdef"><b>Definition:</b> <a href="display_8c_source.html#l00629">display.c:629</a></div></div>
<div class="ttc" id="structd__level_html_a035d301f0a8cafc6c757fbbda2b6935e"><div class="ttname"><a href="structd__level.html#a035d301f0a8cafc6c757fbbda2b6935e">d_level::dnum</a></div><div class="ttdeci">xchar dnum</div><div class="ttdef"><b>Definition:</b> <a href="dungeon_8h_source.html#l00018">dungeon.h:18</a></div></div>
<div class="ttc" id="teleport_8c_html_a09908f1f00f2ed41b117f0207c681b35"><div class="ttname"><a href="teleport_8c.html#a09908f1f00f2ed41b117f0207c681b35">enexto_core</a></div><div class="ttdeci">boolean enexto_core(coord *cc, xchar xx, xchar yy, struct permonst *mdat, unsigned entflags)</div><div class="ttdef"><b>Definition:</b> <a href="teleport_8c_source.html#l00106">teleport.c:106</a></div></div>
<div class="ttc" id="align_8h_html_a58fee99b3a5a5db767e86d4c6705c9a1"><div class="ttname"><a href="align_8h.html#a58fee99b3a5a5db767e86d4c6705c9a1">A_NEUTRAL</a></div><div class="ttdeci">#define A_NEUTRAL</div><div class="ttdef"><b>Definition:</b> <a href="align_8h_source.html#l00021">align.h:21</a></div></div>
<div class="ttc" id="monsym_8h_html_a092e4d08a56151a274ba13e17f9aec39"><div class="ttname"><a href="monsym_8h.html#a092e4d08a56151a274ba13e17f9aec39">S_CENTAUR</a></div><div class="ttdeci">#define S_CENTAUR</div><div class="ttdef"><b>Definition:</b> <a href="monsym_8h_source.html#l00041">monsym.h:41</a></div></div>
<div class="ttc" id="mondata_8h_html_ac458b2a33cdc76df339d7d836b0748f0"><div class="ttname"><a href="mondata_8h.html#ac458b2a33cdc76df339d7d836b0748f0">is_bat</a></div><div class="ttdeci">#define is_bat(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="mondata_8h_source.html#l00086">mondata.h:86</a></div></div>
<div class="ttc" id="rm_8h_html_ab847e2347534eeb83217f5b36815b88d"><div class="ttname"><a href="rm_8h.html#ab847e2347534eeb83217f5b36815b88d">TDWALL</a></div><div class="ttdeci">#define TDWALL</div><div class="ttdef"><b>Definition:</b> <a href="rm_8h_source.html#l00042">rm.h:42</a></div></div>
<div class="ttc" id="monflag_8h_html_a57dd24aec371766f02747931edfcad46"><div class="ttname"><a href="monflag_8h.html#a57dd24aec371766f02747931edfcad46">MS_LEADER</a></div><div class="ttdeci">#define MS_LEADER</div><div class="ttdef"><b>Definition:</b> <a href="monflag_8h_source.html#l00042">monflag.h:42</a></div></div>
<div class="ttc" id="rm_8h_html_a2c0fad3823618e2244411efd9cdb7049"><div class="ttname"><a href="rm_8h.html#a2c0fad3823618e2244411efd9cdb7049">S_altar</a></div><div class="ttdeci">#define S_altar</div><div class="ttdef"><b>Definition:</b> <a href="rm_8h_source.html#l00133">rm.h:133</a></div></div>
<div class="ttc" id="structobj_html_af03ce8a6a0ca51e8d8954fb1a1a31fbe"><div class="ttname"><a href="structobj.html#af03ce8a6a0ca51e8d8954fb1a1a31fbe">obj::oartifact</a></div><div class="ttdeci">char oartifact</div><div class="ttdef"><b>Definition:</b> <a href="obj_8h_source.html#l00043">obj.h:43</a></div></div>
<div class="ttc" id="monflag_8h_html_aaa293df3b8df0c738d1b9f06135cc58d"><div class="ttname"><a href="monflag_8h.html#aaa293df3b8df0c738d1b9f06135cc58d">MR_FIRE</a></div><div class="ttdeci">#define MR_FIRE</div><div class="ttdef"><b>Definition:</b> <a href="monflag_8h_source.html#l00053">monflag.h:53</a></div></div>
<div class="ttc" id="mondata_8h_html_a4407b2600bc3b320829630ed895960c0"><div class="ttname"><a href="mondata_8h.html#a4407b2600bc3b320829630ed895960c0">is_flyer</a></div><div class="ttdeci">#define is_flyer(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="mondata_8h_source.html#l00027">mondata.h:27</a></div></div>
<div class="ttc" id="align_8h_html_abe65d0cb8c8ae018c5bd63a280000eaa"><div class="ttname"><a href="align_8h.html#abe65d0cb8c8ae018c5bd63a280000eaa">A_NONE</a></div><div class="ttdeci">#define A_NONE</div><div class="ttdef"><b>Definition:</b> <a href="align_8h_source.html#l00018">align.h:18</a></div></div>
<div class="ttc" id="monst_8h_html_ac29ed1d493cdb635e09ebbecb209ac2d"><div class="ttname"><a href="monst_8h.html#ac29ed1d493cdb635e09ebbecb209ac2d">NAME</a></div><div class="ttdeci">#define NAME(mtmp)</div><div class="ttdef"><b>Definition:</b> <a href="monst_8h_source.html#l00174">monst.h:174</a></div></div>
<div class="ttc" id="monsym_8h_html_a2f5e3288d9c62ffe94eae6e003a5ebf8"><div class="ttname"><a href="monsym_8h.html#a2f5e3288d9c62ffe94eae6e003a5ebf8">S_ORC</a></div><div class="ttdeci">#define S_ORC</div><div class="ttdef"><b>Definition:</b> <a href="monsym_8h_source.html#l00027">monsym.h:27</a></div></div>
<div class="ttc" id="hack_8h_html_ac5c62ebe8a21263fc51903b33c6b186f"><div class="ttname"><a href="hack_8h.html#ac5c62ebe8a21263fc51903b33c6b186f">MM_IGNOREWATER</a></div><div class="ttdeci">#define MM_IGNOREWATER</div><div class="ttdef"><b>Definition:</b> <a href="hack_8h_source.html#l00142">hack.h:142</a></div></div>
<div class="ttc" id="makemon_8c_html_a4937ff19b458d9ced69526cf2da453d3"><div class="ttname"><a href="makemon_8c.html#a4937ff19b458d9ced69526cf2da453d3">quest_mon_represents_role</a></div><div class="ttdeci">#define quest_mon_represents_role(mptr, role_pm)</div><div class="ttdef"><b>Definition:</b> <a href="makemon_8c_source.html#l00018">makemon.c:18</a></div></div>
<div class="ttc" id="align_8h_html_a4bb126249b7cc0370b948950f11abe92"><div class="ttname"><a href="align_8h.html#a4bb126249b7cc0370b948950f11abe92">AM_CHAOTIC</a></div><div class="ttdeci">#define AM_CHAOTIC</div><div class="ttdef"><b>Definition:</b> <a href="align_8h_source.html#l00028">align.h:28</a></div></div>
<div class="ttc" id="structs__level_html"><div class="ttname"><a href="structs__level.html">s_level</a></div><div class="ttdef"><b>Definition:</b> <a href="dungeon_8h_source.html#l00022">dungeon.h:22</a></div></div>
<div class="ttc" id="dungeon_8h_html_ab8c9d0d5de964b295e56e2763f970ac8"><div class="ttname"><a href="dungeon_8h.html#ab8c9d0d5de964b295e56e2763f970ac8">Is_firelevel</a></div><div class="ttdeci">#define Is_firelevel(x)</div><div class="ttdef"><b>Definition:</b> <a href="dungeon_8h_source.html#l00104">dungeon.h:104</a></div></div>
<div class="ttc" id="monsym_8h_html_a07cd4c997171ec30fbe1376341a26160"><div class="ttname"><a href="monsym_8h.html#a07cd4c997171ec30fbe1376341a26160">S_EEL</a></div><div class="ttdeci">#define S_EEL</div><div class="ttdef"><b>Definition:</b> <a href="monsym_8h_source.html#l00068">monsym.h:68</a></div></div>
<div class="ttc" id="makemon_8c_html_adc984f7199dd53a5283606c48e58d784"><div class="ttname"><a href="makemon_8c.html#adc984f7199dd53a5283606c48e58d784">FDECL</a></div><div class="ttdeci">STATIC_DCL boolean FDECL(wrong_elem_type,(struct permonst *))</div></div>
<div class="ttc" id="mkroom_8h_html_aa219fb813ff6131b86a8f4a3ce45d063"><div class="ttname"><a href="mkroom_8h.html#aa219fb813ff6131b86a8f4a3ce45d063">DELPHI</a></div><div class="ttdeci">#define DELPHI</div><div class="ttdef"><b>Definition:</b> <a href="mkroom_8h_source.html#l00059">mkroom.h:59</a></div></div>
<div class="ttc" id="vision_8h_html_a7096e6ddfde7e563bc51f0fc139cb097"><div class="ttname"><a href="vision_8h.html#a7096e6ddfde7e563bc51f0fc139cb097">LS_MONSTER</a></div><div class="ttdeci">#define LS_MONSTER</div><div class="ttdef"><b>Definition:</b> <a href="vision_8h_source.html#l00022">vision.h:22</a></div></div>
<div class="ttc" id="monflag_8h_html_a4958e656bfb1881e0d63df942488b1fd"><div class="ttname"><a href="monflag_8h.html#a4958e656bfb1881e0d63df942488b1fd">G_NOGEN</a></div><div class="ttdeci">#define G_NOGEN</div><div class="ttdef"><b>Definition:</b> <a href="monflag_8h_source.html#l00185">monflag.h:185</a></div></div>
<div class="ttc" id="mondata_8h_html_af87dbfd43bde750d2dceabc5d50353f4"><div class="ttname"><a href="mondata_8h.html#af87dbfd43bde750d2dceabc5d50353f4">is_male</a></div><div class="ttdeci">#define is_male(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="mondata_8h_source.html#l00095">mondata.h:95</a></div></div>
<div class="ttc" id="structmonst_html_ad8084d1c794f3903b9ffa85fca798abd"><div class="ttname"><a href="structmonst.html#ad8084d1c794f3903b9ffa85fca798abd">monst::m_id</a></div><div class="ttdeci">unsigned m_id</div><div class="ttdef"><b>Definition:</b> <a href="monst_8h_source.html#l00043">monst.h:43</a></div></div>
<div class="ttc" id="structobj_html_a3dd6f7cf99f6a946d0ca406cfca5c23d"><div class="ttname"><a href="structobj.html#a3dd6f7cf99f6a946d0ca406cfca5c23d">obj::age</a></div><div class="ttdeci">long age</div><div class="ttdef"><b>Definition:</b> <a href="obj_8h_source.html#l00101">obj.h:101</a></div></div>
<div class="ttc" id="global_8h_html_add22f733d1f2c380499f495068e42b7c"><div class="ttname"><a href="global_8h.html#add22f733d1f2c380499f495068e42b7c">Strcpy</a></div><div class="ttdeci">#define Strcpy</div><div class="ttdef"><b>Definition:</b> <a href="global_8h_source.html#l00274">global.h:274</a></div></div>
<div class="ttc" id="amidos_8c_html_a196e7f007a501cf9d0907cb2bab0b622"><div class="ttname"><a href="amidos_8c.html#a196e7f007a501cf9d0907cb2bab0b622">abs</a></div><div class="ttdeci">int abs(int x)</div><div class="ttdef"><b>Definition:</b> <a href="amidos_8c_source.html#l00071">amidos.c:71</a></div></div>
<div class="ttc" id="global_8h_html_aeefb2f9de83b5d8a58c0d9650bfb1f7c"><div class="ttname"><a href="global_8h.html#aeefb2f9de83b5d8a58c0d9650bfb1f7c">ALIGNWEIGHT</a></div><div class="ttdeci">#define ALIGNWEIGHT</div><div class="ttdef"><b>Definition:</b> <a href="global_8h_source.html#l00338">global.h:338</a></div></div>
<div class="ttc" id="structmkroom_html_a0ad2dc1a7e0527610e96e830b2cad471"><div class="ttname"><a href="structmkroom.html#a0ad2dc1a7e0527610e96e830b2cad471">mkroom::rtype</a></div><div class="ttdeci">schar rtype</div><div class="ttdef"><b>Definition:</b> <a href="mkroom_8h_source.html#l00012">mkroom.h:12</a></div></div>
<div class="ttc" id="rm_8h_html_a618fa341dec5d9aeb5ac67deb7011d29"><div class="ttname"><a href="rm_8h.html#a618fa341dec5d9aeb5ac67deb7011d29">TUWALL</a></div><div class="ttdeci">#define TUWALL</div><div class="ttdef"><b>Definition:</b> <a href="rm_8h_source.html#l00041">rm.h:41</a></div></div>
<div class="ttc" id="makemon_8c_html_adff06eafc2768a95a516465e03af9993"><div class="ttname"><a href="makemon_8c.html#adff06eafc2768a95a516465e03af9993">zeromonst</a></div><div class="ttdeci">STATIC_VAR NEARDATA struct monst zeromonst</div><div class="ttdef"><b>Definition:</b> <a href="makemon_8c_source.html#l00013">makemon.c:13</a></div></div>
<div class="ttc" id="monsym_8h_html_ae5085838a60dca2e0c3fc8242fa659a7"><div class="ttname"><a href="monsym_8h.html#ae5085838a60dca2e0c3fc8242fa659a7">S_LICH</a></div><div class="ttdeci">#define S_LICH</div><div class="ttdef"><b>Definition:</b> <a href="monsym_8h_source.html#l00049">monsym.h:49</a></div></div>
<div class="ttc" id="config_8h_html_a65f85814a8290f9797005d3b28e7e5fc"><div class="ttname"><a href="config_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a></div><div class="ttdeci">unsigned char uchar</div><div class="ttdef"><b>Definition:</b> <a href="config_8h_source.html#l00276">config.h:276</a></div></div>
<div class="ttc" id="rm_8h_html_a8c5e05f917fa75d3b54c8c5045d6665b"><div class="ttname"><a href="rm_8h.html#a8c5e05f917fa75d3b54c8c5045d6665b">OBJ_AT</a></div><div class="ttdeci">#define OBJ_AT(x, y)</div><div class="ttdef"><b>Definition:</b> <a href="rm_8h_source.html#l00507">rm.h:507</a></div></div>
<div class="ttc" id="hack_8h_html_ab9abb3d58903e1c125446f40f6984095"><div class="ttname"><a href="hack_8h.html#ab9abb3d58903e1c125446f40f6984095">NO_MINVENT</a></div><div class="ttdeci">#define NO_MINVENT</div><div class="ttdef"><b>Definition:</b> <a href="hack_8h_source.html#l00135">hack.h:135</a></div></div>
<div class="ttc" id="align_8h_html_a3e17b7a656899892e425fc89481aa2ab"><div class="ttname"><a href="align_8h.html#a3e17b7a656899892e425fc89481aa2ab">aligntyp</a></div><div class="ttdeci">schar aligntyp</div><div class="ttdef"><b>Definition:</b> <a href="align_8h_source.html#l00008">align.h:8</a></div></div>
<div class="ttc" id="mondata_8h_html_acc1e74b977b15476da10116f621dddfe"><div class="ttname"><a href="mondata_8h.html#acc1e74b977b15476da10116f621dddfe">is_minion</a></div><div class="ttdeci">#define is_minion(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="mondata_8h_source.html#l00117">mondata.h:117</a></div></div>
<div class="ttc" id="monsym_8h_html_a6428ef16323852a393830dbac4bc72ee"><div class="ttname"><a href="monsym_8h.html#a6428ef16323852a393830dbac4bc72ee">S_DEMON</a></div><div class="ttdeci">#define S_DEMON</div><div class="ttdef"><b>Definition:</b> <a href="monsym_8h_source.html#l00067">monsym.h:67</a></div></div>
<div class="ttc" id="structmonst_html_a80ec1118166ea76d347e47d088bd1f7c"><div class="ttname"><a href="structmonst.html#a80ec1118166ea76d347e47d088bd1f7c">monst::m_lev</a></div><div class="ttdeci">uchar m_lev</div><div class="ttdef"><b>Definition:</b> <a href="monst_8h_source.html#l00046">monst.h:46</a></div></div>
<div class="ttc" id="mondata_8h_html_adea0f5aad9185b27a8244ef26d388f15"><div class="ttname"><a href="mondata_8h.html#adea0f5aad9185b27a8244ef26d388f15">is_dprince</a></div><div class="ttdeci">#define is_dprince(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="mondata_8h_source.html#l00116">mondata.h:116</a></div></div>
<div class="ttc" id="mondata_8h_html_a8ef85e65e7dda38e65d7e3801cde6d2e"><div class="ttname"><a href="mondata_8h.html#a8ef85e65e7dda38e65d7e3801cde6d2e">noncorporeal</a></div><div class="ttdeci">#define noncorporeal(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="mondata_8h_source.html#l00035">mondata.h:35</a></div></div>
<div class="ttc" id="structyou_html_a3f202dd89a837a9772a9eb1f1965f30c"><div class="ttname"><a href="structyou.html#a3f202dd89a837a9772a9eb1f1965f30c">you::ualign</a></div><div class="ttdeci">align ualign</div><div class="ttdef"><b>Definition:</b> <a href="you_8h_source.html#l00318">you.h:318</a></div></div>
<div class="ttc" id="monflag_8h_html_aae2e1cac6d517b351255a0bc478afbc6"><div class="ttname"><a href="monflag_8h.html#aae2e1cac6d517b351255a0bc478afbc6">G_SGROUP</a></div><div class="ttdeci">#define G_SGROUP</div><div class="ttdef"><b>Definition:</b> <a href="monflag_8h_source.html#l00186">monflag.h:186</a></div></div>
<div class="ttc" id="structobj_html_a14fc8dc59e9073bfbf1e170875a98448"><div class="ttname"><a href="structobj.html#a14fc8dc59e9073bfbf1e170875a98448">obj::spe</a></div><div class="ttdeci">schar spe</div><div class="ttdef"><b>Definition:</b> <a href="obj_8h_source.html#l00031">obj.h:31</a></div></div>
<div class="ttc" id="objclass_8h_html_a98c4704dea5f0606fe545294b44f8fd6"><div class="ttname"><a href="objclass_8h.html#a98c4704dea5f0606fe545294b44f8fd6">FOOD_CLASS</a></div><div class="ttdeci">#define FOOD_CLASS</div><div class="ttdef"><b>Definition:</b> <a href="objclass_8h_source.html#l00131">objclass.h:131</a></div></div>
<div class="ttc" id="mondata_8h_html_ad02aec9b6259664d1426ae16d60d7338"><div class="ttname"><a href="mondata_8h.html#ad02aec9b6259664d1426ae16d60d7338">likes_gold</a></div><div class="ttdeci">#define likes_gold(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="mondata_8h_source.html#l00118">mondata.h:118</a></div></div>
<div class="ttc" id="monsym_8h_html_afd17d6f6e4ac25a9ac0086ebf27b0469"><div class="ttname"><a href="monsym_8h.html#afd17d6f6e4ac25a9ac0086ebf27b0469">S_HUMAN</a></div><div class="ttdeci">#define S_HUMAN</div><div class="ttdef"><b>Definition:</b> <a href="monsym_8h_source.html#l00064">monsym.h:64</a></div></div>
<div class="ttc" id="structcoord_html"><div class="ttname"><a href="structcoord.html">coord</a></div><div class="ttdef"><b>Definition:</b> <a href="lev__yacc_8c_source.html#l00076">lev_yacc.c:76</a></div></div>
<div class="ttc" id="structyou_html_a89d1a963eea3bc32c00233bc9332f24a"><div class="ttname"><a href="structyou.html#a89d1a963eea3bc32c00233bc9332f24a">you::uluck</a></div><div class="ttdeci">schar uluck</div><div class="ttdef"><b>Definition:</b> <a href="you_8h_source.html#l00323">you.h:323</a></div></div>
<div class="ttc" id="obj_8h_html_ae284b60ec8919e5fb325f5a7b39a093c"><div class="ttname"><a href="obj_8h.html#ae284b60ec8919e5fb325f5a7b39a093c">is_sword</a></div><div class="ttdeci">#define is_sword(otmp)</div><div class="ttdef"><b>Definition:</b> <a href="obj_8h_source.html#l00136">obj.h:136</a></div></div>
<div class="ttc" id="decl_8h_html_a0cccaa8c269a70f9f598d16b8bcad4f7"><div class="ttname"><a href="decl_8h.html#a0cccaa8c269a70f9f598d16b8bcad4f7">quest_status</a></div><div class="ttdeci">E struct q_score quest_status</div><div class="ttdef"><b>Definition:</b> <a href="decl_8h_source.html#l00130">decl.h:130</a></div></div>
<div class="ttc" id="dungeon_8h_html_af69a19c1eec378c1cebe9143febbe2b5"><div class="ttname"><a href="dungeon_8h.html#af69a19c1eec378c1cebe9143febbe2b5">Is_astralevel</a></div><div class="ttdeci">#define Is_astralevel(x)</div><div class="ttdef"><b>Definition:</b> <a href="dungeon_8h_source.html#l00101">dungeon.h:101</a></div></div>
<div class="ttc" id="objclass_8h_html_ac23f261da0f9e2a4c6afccecfc167a96"><div class="ttname"><a href="objclass_8h.html#ac23f261da0f9e2a4c6afccecfc167a96">SCROLL_CLASS</a></div><div class="ttdeci">#define SCROLL_CLASS</div><div class="ttdef"><b>Definition:</b> <a href="objclass_8h_source.html#l00133">objclass.h:133</a></div></div>
<div class="ttc" id="edog_8h_html"><div class="ttname"><a href="edog_8h.html">edog.h</a></div></div>
<div class="ttc" id="trap_8h_html_af181c9e6602b6432a0bf1a9243808968"><div class="ttname"><a href="trap_8h.html#af181c9e6602b6432a0bf1a9243808968">PIT</a></div><div class="ttdeci">#define PIT</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00063">trap.h:63</a></div></div>
<div class="ttc" id="hack_8h_html_a0c2ce0eef98596c51b3a10e50a29dd5e"><div class="ttname"><a href="hack_8h.html#a0c2ce0eef98596c51b3a10e50a29dd5e">STATIC_DCL</a></div><div class="ttdeci">#define STATIC_DCL</div><div class="ttdef"><b>Definition:</b> <a href="hack_8h_source.html#l00312">hack.h:312</a></div></div>
<div class="ttc" id="worm_8c_html_ab96a1b71bb8d3d3e793c97f280243188"><div class="ttname"><a href="worm_8c.html#ab96a1b71bb8d3d3e793c97f280243188">get_wormno</a></div><div class="ttdeci">int get_wormno()</div><div class="ttdef"><b>Definition:</b> <a href="worm_8c_source.html#l00086">worm.c:86</a></div></div>
<div class="ttc" id="monsym_8h_html_aff2dfaf3b780fb3c9644530e754ab088"><div class="ttname"><a href="monsym_8h.html#aff2dfaf3b780fb3c9644530e754ab088">S_HUMANOID</a></div><div class="ttdeci">#define S_HUMANOID</div><div class="ttdef"><b>Definition:</b> <a href="monsym_8h_source.html#l00020">monsym.h:20</a></div></div>
<div class="ttc" id="structobj_html_a606b1d5b273b814049cc1b1991adfeec"><div class="ttname"><a href="structobj.html#a606b1d5b273b814049cc1b1991adfeec">obj::owt</a></div><div class="ttdeci">unsigned owt</div><div class="ttdef"><b>Definition:</b> <a href="obj_8h_source.html#l00028">obj.h:28</a></div></div>
<div class="ttc" id="mondata_8h_html_a6fd7f5f330b2b760d6a27b06062945a4"><div class="ttname"><a href="mondata_8h.html#a6fd7f5f330b2b760d6a27b06062945a4">is_golem</a></div><div class="ttdeci">#define is_golem(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="mondata_8h_source.html#l00091">mondata.h:91</a></div></div>
<div class="ttc" id="teleport_8c_html_a61ffc1bbdf6259d46ae8abd0dce3ce31"><div class="ttname"><a href="teleport_8c.html#a61ffc1bbdf6259d46ae8abd0dce3ce31">enexto</a></div><div class="ttdeci">boolean enexto(coord *cc, xchar xx, xchar yy, struct permonst *mdat)</div><div class="ttdef"><b>Definition:</b> <a href="teleport_8c_source.html#l00097">teleport.c:97</a></div></div>
<div class="ttc" id="structmonst_html_a0b969d9b6af5b55393f6acfe508c6f08"><div class="ttname"><a href="structmonst.html#a0b969d9b6af5b55393f6acfe508c6f08">monst::my</a></div><div class="ttdeci">xchar my</div><div class="ttdef"><b>Definition:</b> <a href="monst_8h_source.html#l00049">monst.h:49</a></div></div>
<div class="ttc" id="objclass_8h_html_af51133138bfb718b55aaa7f29711a10a"><div class="ttname"><a href="objclass_8h.html#af51133138bfb718b55aaa7f29711a10a">MAXOCLASSES</a></div><div class="ttdeci">#define MAXOCLASSES</div><div class="ttdef"><b>Definition:</b> <a href="objclass_8h_source.html#l00142">objclass.h:142</a></div></div>
<div class="ttc" id="rm_8h_html_a721c99bfa099c4225215ba102e91fa39"><div class="ttname"><a href="rm_8h.html#a721c99bfa099c4225215ba102e91fa39">level</a></div><div class="ttdeci">dlevel_t level</div><div class="ttdef"><b>Definition:</b> <a href="decl_8c_source.html#l00140">decl.c:140</a></div></div>
<div class="ttc" id="decl_8h_html_abb694ef5acb9945ca69679a8360df51a"><div class="ttname"><a href="decl_8h.html#abb694ef5acb9945ca69679a8360df51a">in_mklev</a></div><div class="ttdeci">E NEARDATA boolean in_mklev</div><div class="ttdef"><b>Definition:</b> <a href="decl_8h_source.html#l00216">decl.h:216</a></div></div>
<div class="ttc" id="align_8h_html_ac5ed2af15492dbb6020886afd104f786"><div class="ttname"><a href="align_8h.html#ac5ed2af15492dbb6020886afd104f786">AM_LAWFUL</a></div><div class="ttdeci">#define AM_LAWFUL</div><div class="ttdef"><b>Definition:</b> <a href="align_8h_source.html#l00030">align.h:30</a></div></div>
<div class="ttc" id="makemon_8c_html_a9ac5533f071a772a4fccedc3b969ca4f"><div class="ttname"><a href="makemon_8c.html#a9ac5533f071a772a4fccedc3b969ca4f">tooweak</a></div><div class="ttdeci">#define tooweak(monindx, lev)</div><div class="ttdef"><b>Definition:</b> <a href="makemon_8c_source.html#l00039">makemon.c:39</a></div></div>
<div class="ttc" id="epri_8h_html_a8af728f8ed3894c68f86757f5308af8f"><div class="ttname"><a href="epri_8h.html#a8af728f8ed3894c68f86757f5308af8f">EPRI</a></div><div class="ttdeci">#define EPRI(mon)</div><div class="ttdef"><b>Definition:</b> <a href="epri_8h_source.html#l00016">epri.h:16</a></div></div>
<div class="ttc" id="rm_8h_html_a804c47940a9f1925d324bed72b37f22a"><div class="ttname"><a href="rm_8h.html#a804c47940a9f1925d324bed72b37f22a">S_upstair</a></div><div class="ttdeci">#define S_upstair</div><div class="ttdef"><b>Definition:</b> <a href="rm_8h_source.html#l00129">rm.h:129</a></div></div>
<div class="ttc" id="celib_8c_html_a378f364ce8f01015f43ce168ea8afd39"><div class="ttname"><a href="celib_8c.html#a378f364ce8f01015f43ce168ea8afd39">mm</a></div><div class="ttdeci">unsigned int mm</div><div class="ttdef"><b>Definition:</b> <a href="celib_8c_source.html#l00013">celib.c:13</a></div></div>
<div class="ttc" id="monflag_8h_html_aafd21a7b8b3ba16854e053a7982dbdc0"><div class="ttname"><a href="monflag_8h.html#aafd21a7b8b3ba16854e053a7982dbdc0">M3_WAITMASK</a></div><div class="ttdeci">#define M3_WAITMASK</div><div class="ttdef"><b>Definition:</b> <a href="monflag_8h_source.html#l00157">monflag.h:157</a></div></div>
<div class="ttc" id="mondata_8h_html_ac52963ce02f1942e6260de79578fbed2"><div class="ttname"><a href="mondata_8h.html#ac52963ce02f1942e6260de79578fbed2">is_dwarf</a></div><div class="ttdeci">#define is_dwarf(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="mondata_8h_source.html#l00081">mondata.h:81</a></div></div>
<div class="ttc" id="rm_8h_html_a6bd7f45ec1e1ccd558d188e16a566208"><div class="ttname"><a href="rm_8h.html#a6bd7f45ec1e1ccd558d188e16a566208">IS_WALL</a></div><div class="ttdeci">#define IS_WALL(typ)</div><div class="ttdef"><b>Definition:</b> <a href="rm_8h_source.html#l00078">rm.h:78</a></div></div>
<div class="ttc" id="structmonst_html_a792271938bf793d0b6cfef02171f967a"><div class="ttname"><a href="structmonst.html#a792271938bf793d0b6cfef02171f967a">monst::mtrapseen</a></div><div class="ttdeci">long mtrapseen</div><div class="ttdef"><b>Definition:</b> <a href="monst_8h_source.html#l00131">monst.h:131</a></div></div>
<div class="ttc" id="hack_8h_html_acfedaecac4bd4f842331f8631e5649e8"><div class="ttname"><a href="hack_8h.html#acfedaecac4bd4f842331f8631e5649e8">MM_ADJACENTOK</a></div><div class="ttdeci">#define MM_ADJACENTOK</div><div class="ttdef"><b>Definition:</b> <a href="hack_8h_source.html#l00143">hack.h:143</a></div></div>
<div class="ttc" id="structdlevel__t_html_ac128f805d01d7746b499596dd3b92a53"><div class="ttname"><a href="structdlevel__t.html#ac128f805d01d7746b499596dd3b92a53">dlevel_t::objects</a></div><div class="ttdeci">struct obj * objects[COLNO][ROWNO]</div><div class="ttdef"><b>Definition:</b> <a href="rm_8h_source.html#l00474">rm.h:474</a></div></div>
<div class="ttc" id="mondata_8h_html_a8a9268e51bec1a39e89e4a969721179a"><div class="ttname"><a href="mondata_8h.html#a8a9268e51bec1a39e89e4a969721179a">always_peaceful</a></div><div class="ttdeci">#define always_peaceful(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="mondata_8h_source.html#l00100">mondata.h:100</a></div></div>
<div class="ttc" id="monsym_8h_html_a01e8c6d504db131fb9f679c90270124f"><div class="ttname"><a href="monsym_8h.html#a01e8c6d504db131fb9f679c90270124f">S_BAT</a></div><div class="ttdeci">#define S_BAT</div><div class="ttdef"><b>Definition:</b> <a href="monsym_8h_source.html#l00040">monsym.h:40</a></div></div>
<div class="ttc" id="hack_8h_html_a6584b0687fb4e0040a85bbcdaa3e0ee1"><div class="ttname"><a href="hack_8h.html#a6584b0687fb4e0040a85bbcdaa3e0ee1">STATIC_OVL</a></div><div class="ttdeci">#define STATIC_OVL</div><div class="ttdef"><b>Definition:</b> <a href="hack_8h_source.html#l00313">hack.h:313</a></div></div>
<div class="ttc" id="structyou_html_a6c7263bb25b91825bf7ecaab470d771a"><div class="ttname"><a href="structyou.html#a6c7263bb25b91825bf7ecaab470d771a">you::ulevel</a></div><div class="ttdeci">int ulevel</div><div class="ttdef"><b>Definition:</b> <a href="you_8h_source.html#l00244">you.h:244</a></div></div>
<div class="ttc" id="mkroom_8h_html_ab8c9e1bea2ae73195887ee67f76acee2"><div class="ttname"><a href="mkroom_8h.html#ab8c9e1bea2ae73195887ee67f76acee2">TEMPLE</a></div><div class="ttdeci">#define TEMPLE</div><div class="ttdef"><b>Definition:</b> <a href="mkroom_8h_source.html#l00060">mkroom.h:60</a></div></div>
<div class="ttc" id="dungeon_8h_html_a2d9a2dcb88ded033c3305c7798f81c24"><div class="ttname"><a href="dungeon_8h.html#a2d9a2dcb88ded033c3305c7798f81c24">Is_airlevel</a></div><div class="ttdeci">#define Is_airlevel(x)</div><div class="ttdef"><b>Definition:</b> <a href="dungeon_8h_source.html#l00105">dungeon.h:105</a></div></div>
<div class="ttc" id="mondata_8h_html_a8ab6bc25a724f40d5f1c0b0a11b27ac3"><div class="ttname"><a href="mondata_8h.html#a8ab6bc25a724f40d5f1c0b0a11b27ac3">emits_light</a></div><div class="ttdeci">#define emits_light(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="mondata_8h_source.html#l00146">mondata.h:146</a></div></div>
<div class="ttc" id="monsym_8h_html_ac270eaa90b0025e153c630d7a3ec2705"><div class="ttname"><a href="monsym_8h.html#ac270eaa90b0025e153c630d7a3ec2705">S_KOBOLD</a></div><div class="ttdeci">#define S_KOBOLD</div><div class="ttdef"><b>Definition:</b> <a href="monsym_8h_source.html#l00023">monsym.h:23</a></div></div>
<div class="ttc" id="permonst_8h_html_ab96e7c4682ea5ae4f83339a15c06f676"><div class="ttname"><a href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a></div><div class="ttdeci">NEARDATA struct permonst mons[]</div><div class="ttdef"><b>Definition:</b> <a href="monst_8c_source.html#l00093">monst.c:93</a></div></div>
<div class="ttc" id="structmonst_html"><div class="ttname"><a href="structmonst.html">monst</a></div><div class="ttdef"><b>Definition:</b> <a href="monst_8h_source.html#l00040">monst.h:40</a></div></div>
<div class="ttc" id="monsym_8h_html_adfd7d880ae86198cb104883f1644ebcc"><div class="ttname"><a href="monsym_8h.html#adfd7d880ae86198cb104883f1644ebcc">S_TROLL</a></div><div class="ttdeci">#define S_TROLL</div><div class="ttdef"><b>Definition:</b> <a href="monsym_8h_source.html#l00057">monsym.h:57</a></div></div>
<div class="ttc" id="rm_8h_html_ade633f6a4bac3d7c501e28d15c536d3d"><div class="ttname"><a href="rm_8h.html#ade633f6a4bac3d7c501e28d15c536d3d">TLCORNER</a></div><div class="ttdeci">#define TLCORNER</div><div class="ttdef"><b>Definition:</b> <a href="rm_8h_source.html#l00036">rm.h:36</a></div></div>
<div class="ttc" id="permonst_8h_html_a6485376b5cfc1627d2c68fcb98432cb0"><div class="ttname"><a href="permonst_8h.html#a6485376b5cfc1627d2c68fcb98432cb0">NON_PM</a></div><div class="ttdeci">#define NON_PM</div><div class="ttdef"><b>Definition:</b> <a href="permonst_8h_source.html#l00075">permonst.h:75</a></div></div>
<div class="ttc" id="dungeon_8h_html_ad19541d30218e5f3834c01d42bb381e2"><div class="ttname"><a href="dungeon_8h.html#ad19541d30218e5f3834c01d42bb381e2">In_sokoban</a></div><div class="ttdeci">#define In_sokoban(x)</div><div class="ttdef"><b>Definition:</b> <a href="dungeon_8h_source.html#l00125">dungeon.h:125</a></div></div>
<div class="ttc" id="decl_8h_html_ac5ded4d65e561a90b475dc626c392a18"><div class="ttname"><a href="decl_8h.html#ac5ded4d65e561a90b475dc626c392a18">dungeons</a></div><div class="ttdeci">E NEARDATA dungeon dungeons[]</div><div class="ttdef"><b>Definition:</b> <a href="decl_8h_source.html#l00125">decl.h:125</a></div></div>
<div class="ttc" id="structmvitals_html_af01567cf023132ecac05b85abc3c3549"><div class="ttname"><a href="structmvitals.html#af01567cf023132ecac05b85abc3c3549">mvitals::born</a></div><div class="ttdeci">uchar born</div><div class="ttdef"><b>Definition:</b> <a href="decl_8h_source.html#l00266">decl.h:266</a></div></div>
<div class="ttc" id="objclass_8h_html_a038c650e790f05f72fa9204b1b82660b"><div class="ttname"><a href="objclass_8h.html#a038c650e790f05f72fa9204b1b82660b">ARMOR_CLASS</a></div><div class="ttdeci">#define ARMOR_CLASS</div><div class="ttdef"><b>Definition:</b> <a href="objclass_8h_source.html#l00127">objclass.h:127</a></div></div>
<div class="ttc" id="hack_8h_html"><div class="ttname"><a href="hack_8h.html">hack.h</a></div></div>
<div class="ttc" id="structcoord_html_ac3e93ff628aa19d2888c5f6fa26f430d"><div class="ttname"><a href="structcoord.html#ac3e93ff628aa19d2888c5f6fa26f430d">coord::x</a></div><div class="ttdeci">int x</div><div class="ttdef"><b>Definition:</b> <a href="lev__yacc_8c_source.html#l00077">lev_yacc.c:77</a></div></div>
<div class="ttc" id="global_8h_html_a2043b7d01ce89f4ee2fa6c345a752d32"><div class="ttname"><a href="global_8h.html#a2043b7d01ce89f4ee2fa6c345a752d32">xchar</a></div><div class="ttdeci">schar xchar</div><div class="ttdef"><b>Definition:</b> <a href="global_8h_source.html#l00054">global.h:54</a></div></div>
<div class="ttc" id="trap_8h_html_a64bfa610e12179ef4bfa46c65166b2fe"><div class="ttname"><a href="trap_8h.html#a64bfa610e12179ef4bfa46c65166b2fe">MAGIC_PORTAL</a></div><div class="ttdeci">#define MAGIC_PORTAL</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00069">trap.h:69</a></div></div>
<div class="ttc" id="monflag_8h_html_a1e410cbbb06eda4ed3d5c3aa6e1bf69f"><div class="ttname"><a href="monflag_8h.html#a1e410cbbb06eda4ed3d5c3aa6e1bf69f">MS_GUARDIAN</a></div><div class="ttdeci">#define MS_GUARDIAN</div><div class="ttdef"><b>Definition:</b> <a href="monflag_8h_source.html#l00044">monflag.h:44</a></div></div>
<div class="ttc" id="structobj_html_a716ba3ee00602dede9ea5c68c74d45bd"><div class="ttname"><a href="structobj.html#a716ba3ee00602dede9ea5c68c74d45bd">obj::oclass</a></div><div class="ttdeci">char oclass</div><div class="ttdef"><b>Definition:</b> <a href="obj_8h_source.html#l00041">obj.h:41</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Feb 5 2014 18:11:47 for bothack by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
