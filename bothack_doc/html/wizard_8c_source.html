<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>bothack: nethack/src/wizard.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">bothack
   &#160;<span id="projectnumber">0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_557a50db675c42016abe0c17f9936298.html">nethack</a></li><li class="navelem"><a class="el" href="dir_d8c2cd034c87ed46f7d2aa67083eedb4.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">wizard.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="wizard_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*  SCCS Id: @(#)wizard.c   3.4 2003/02/18  */</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">/* Copyright (c) Stichting Mathematisch Centrum, Amsterdam, 1985. */</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">/* NetHack may be freely redistributed.  See license for details. */</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">/* wizard code - inspired by rogue code from Merlyn Leroy (digi-g!brian) */</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">/*         - heavily modified to give the wiz balls.  (genat!mike)   */</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">/*         - dewimped and given some maledictions. -3. */</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">/*         - generalized for 3.1 (mike@bullns.on01.bull.ca) */</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="hack_8h.html">hack.h</a>&quot;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qtext_8h.html">qtext.h</a>&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="epri_8h.html">epri.h</a>&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="keyword">extern</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="wizard_8c.html#a2e4cd9d4199a5c6f1ecf9985d4a58dfb">monstr</a>[];</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#ifdef OVLB</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<a class="code" href="hack_8h.html#a0c2ce0eef98596c51b3a10e50a29dd5e">STATIC_DCL</a> <span class="keywordtype">short</span> <a class="code" href="tradstdc_8h.html#a6807c5bd45183ceeea158c55a0bc3fbb">FDECL</a>(which_arti, (<span class="keywordtype">int</span>));</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<a class="code" href="hack_8h.html#a0c2ce0eef98596c51b3a10e50a29dd5e">STATIC_DCL</a> <span class="keywordtype">boolean</span> <a class="code" href="tradstdc_8h.html#a6807c5bd45183ceeea158c55a0bc3fbb">FDECL</a>(mon_has_arti, (<span class="keyword">struct</span> <a class="code" href="structmonst.html">monst</a> *,<a class="code" href="wingem1_8c.html#ad659aea772b5811d42324ccffeb9d682">SHORT_P</a>));</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<a class="code" href="hack_8h.html#a0c2ce0eef98596c51b3a10e50a29dd5e">STATIC_DCL</a> <span class="keyword">struct </span><a class="code" href="structmonst.html">monst</a> *<a class="code" href="tradstdc_8h.html#a6807c5bd45183ceeea158c55a0bc3fbb">FDECL</a>(other_mon_has_arti, (<span class="keyword">struct</span> <a class="code" href="structmonst.html">monst</a> *,<a class="code" href="wingem1_8c.html#ad659aea772b5811d42324ccffeb9d682">SHORT_P</a>));</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<a class="code" href="hack_8h.html#a0c2ce0eef98596c51b3a10e50a29dd5e">STATIC_DCL</a> <span class="keyword">struct </span><a class="code" href="structobj.html">obj</a> *<a class="code" href="tradstdc_8h.html#a6807c5bd45183ceeea158c55a0bc3fbb">FDECL</a>(on_ground, (<a class="code" href="wingem1_8c.html#ad659aea772b5811d42324ccffeb9d682">SHORT_P</a>));</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<a class="code" href="hack_8h.html#a0c2ce0eef98596c51b3a10e50a29dd5e">STATIC_DCL</a> <span class="keywordtype">boolean</span> <a class="code" href="tradstdc_8h.html#a6807c5bd45183ceeea158c55a0bc3fbb">FDECL</a>(you_have, (<span class="keywordtype">int</span>));</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<a class="code" href="hack_8h.html#a0c2ce0eef98596c51b3a10e50a29dd5e">STATIC_DCL</a> <span class="keywordtype">long</span> <a class="code" href="tradstdc_8h.html#a6807c5bd45183ceeea158c55a0bc3fbb">FDECL</a>(target_on, (<span class="keywordtype">int</span>,<span class="keyword">struct</span> <a class="code" href="structmonst.html">monst</a> *));</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<a class="code" href="hack_8h.html#a0c2ce0eef98596c51b3a10e50a29dd5e">STATIC_DCL</a> <span class="keywordtype">long</span> <a class="code" href="tradstdc_8h.html#a6807c5bd45183ceeea158c55a0bc3fbb">FDECL</a>(strategy, (<span class="keyword">struct</span> <a class="code" href="structmonst.html">monst</a> *));</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="keyword">static</span> <a class="code" href="config1_8h.html#a9987bf629301f5fe76ddd96aa2717ca1">NEARDATA</a> <span class="keyword">const</span> <span class="keywordtype">int</span> nasties[] = {</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    PM_COCKATRICE, PM_ETTIN, PM_STALKER, PM_MINOTAUR, PM_RED_DRAGON,</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    PM_BLACK_DRAGON, PM_GREEN_DRAGON, PM_OWLBEAR, PM_PURPLE_WORM,</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    PM_ROCK_TROLL, PM_XAN, PM_GREMLIN, PM_UMBER_HULK, PM_VAMPIRE_LORD,</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    PM_XORN, PM_ZRUTY, PM_ELF_LORD, PM_ELVENKING, PM_YELLOW_DRAGON,</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    PM_LEOCROTTA, PM_BALUCHITHERIUM, PM_CARNIVOROUS_APE, PM_FIRE_GIANT,</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    PM_COUATL, PM_CAPTAIN, PM_WINGED_GARGOYLE, PM_MASTER_MIND_FLAYER,</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    PM_FIRE_ELEMENTAL, PM_JABBERWOCK, PM_ARCH_LICH, PM_OGRE_KING,</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    PM_OLOG_HAI, PM_IRON_GOLEM, PM_OCHRE_JELLY, PM_GREEN_SLIME,</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    PM_DISENCHANTER</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    };</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="keyword">static</span> <a class="code" href="config1_8h.html#a9987bf629301f5fe76ddd96aa2717ca1">NEARDATA</a> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> wizapp[] = {</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    PM_HUMAN, PM_WATER_DEMON, PM_VAMPIRE,</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    PM_RED_DRAGON, PM_TROLL, PM_UMBER_HULK,</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    PM_XORN, PM_XAN, PM_COCKATRICE,</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    PM_FLOATING_EYE,</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    PM_GUARDIAN_NAGA,</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    PM_TRAPPER</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;};</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* OVLB */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#ifdef OVL0</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">/* If you&#39;ve found the Amulet, make the Wizard appear after some time */</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">/* Also, give hints about portal locations, if amulet is worn/wielded -dlc */</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;amulet()</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;{</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keyword">struct </span><a class="code" href="structmonst.html">monst</a> *mtmp;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keyword">struct </span><a class="code" href="structtrap.html">trap</a> *ttmp;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keyword">struct </span><a class="code" href="structobj.html">obj</a> *amu;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#if 0       </span><span class="comment">/* caller takes care of this check */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a3e83735264e74265e8c8777f73e159fa">uhave</a>.amulet)</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keywordflow">if</span> ((((amu = <a class="code" href="decl_8h.html#a602a9d34078660dd260aed96b2abd4ca">uamul</a>) != 0 &amp;&amp; amu-&gt;<a class="code" href="structobj.html#a95eb282afebd3599996035e8aab71751">otyp</a> == AMULET_OF_YENDOR) ||</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;         ((amu = <a class="code" href="decl_8h.html#a1aefaef88eef9075d8136d19410fd3b1">uwep</a>) != 0 &amp;&amp; amu-&gt;<a class="code" href="structobj.html#a95eb282afebd3599996035e8aab71751">otyp</a> == AMULET_OF_YENDOR))</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        &amp;&amp; !rn2(15)) {</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <span class="keywordflow">for</span>(ttmp = <a class="code" href="trap_8h.html#a442e327ae9fbb5d15e2df82e488de313">ftrap</a>; ttmp; ttmp = ttmp-&gt;<a class="code" href="structtrap.html#aef8ea4650dce701fde7f7f3e1310c892">ntrap</a>) {</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <span class="keywordflow">if</span>(ttmp-&gt;ttyp == <a class="code" href="trap_8h.html#a64bfa610e12179ef4bfa46c65166b2fe">MAGIC_PORTAL</a>) {</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;            <span class="keywordtype">int</span> du = <a class="code" href="hack_8h.html#a1f84afcae19c5b60124bc509ed647f84">distu</a>(ttmp-&gt;<a class="code" href="structtrap.html#a8a3d31070852119ee66c8662b0c883c7">tx</a>, ttmp-&gt;<a class="code" href="structtrap.html#a579c4f0e2d31e3657c930d6741737b20">ty</a>);</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;            <span class="keywordflow">if</span> (du &lt;= 9)</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;            pline(<span class="stringliteral">&quot;%s hot!&quot;</span>, Tobjnam(amu, <span class="stringliteral">&quot;feel&quot;</span>));</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (du &lt;= 64)</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;            pline(<span class="stringliteral">&quot;%s very warm.&quot;</span>, Tobjnam(amu, <span class="stringliteral">&quot;feel&quot;</span>));</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (du &lt;= 144)</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;            pline(<span class="stringliteral">&quot;%s warm.&quot;</span>, Tobjnam(amu, <span class="stringliteral">&quot;feel&quot;</span>));</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;            <span class="comment">/* else, the amulet feels normal */</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        }</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        }</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    }</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="flag_8h.html#a997133526e0c6bed44ebc0116a48b50a">flags</a>.<a class="code" href="structflag.html#a234ec46fbb73d319d628aa1cc320be8b">no_of_wizards</a>)</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="comment">/* find Wizard, and wake him if necessary */</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordflow">for</span>(mtmp = <a class="code" href="rm_8h.html#a9b7eba07f916406d6d62f5f82d273e40">fmon</a>; mtmp; mtmp = mtmp-&gt;<a class="code" href="structmonst.html#a4c4bcdcf3c4ec4a85313ade9f9c27b72">nmon</a>)</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="monst_8h.html#a87ebcb12436dc12747fed36e83561249">DEADMONSTER</a>(mtmp) &amp;&amp; mtmp-&gt;iswiz &amp;&amp; mtmp-&gt;msleeping &amp;&amp; !rn2(40)) {</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        mtmp-&gt;msleeping = 0;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="hack_8h.html#a1f84afcae19c5b60124bc509ed647f84">distu</a>(mtmp-&gt;<a class="code" href="structmonst.html#a9bc20171e986845daccff8aafd8b5194">mx</a>,mtmp-&gt;<a class="code" href="structmonst.html#a0b969d9b6af5b55393f6acfe508c6f08">my</a>) &gt; 2)</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;            You(</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="stringliteral">&quot;get the creepy feeling that somebody noticed your taking the Amulet.&quot;</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;            );</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        }</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;}</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* OVL0 */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="preprocessor">#ifdef OVLB</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="keywordtype">int</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;mon_has_amulet(mtmp)</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<a class="code" href="mkmaze_8c.html#a24ac627a7839caecddfc66f1d46033f0">register</a> struct <a class="code" href="structmonst.html">monst</a> *mtmp;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;{</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keyword">register</span> <span class="keyword">struct </span><a class="code" href="structobj.html">obj</a> *<a class="code" href="mhitu_8c.html#a8cf94e09e1a72daf7050a2817ba70974">otmp</a>;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keywordflow">for</span>(otmp = mtmp-&gt;minvent; otmp; otmp = otmp-&gt;<a class="code" href="structobj.html#ad1c5d790528ee1d8349ef302994789d8">nobj</a>)</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <span class="keywordflow">if</span>(otmp-&gt;<a class="code" href="structobj.html#a95eb282afebd3599996035e8aab71751">otyp</a> == AMULET_OF_YENDOR) <span class="keywordflow">return</span>(1);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keywordflow">return</span>(0);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;}</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="keywordtype">int</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;mon_has_special(mtmp)</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<a class="code" href="mkmaze_8c.html#a24ac627a7839caecddfc66f1d46033f0">register</a> struct <a class="code" href="structmonst.html">monst</a> *mtmp;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;{</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keyword">register</span> <span class="keyword">struct </span><a class="code" href="structobj.html">obj</a> *<a class="code" href="mhitu_8c.html#a8cf94e09e1a72daf7050a2817ba70974">otmp</a>;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordflow">for</span>(otmp = mtmp-&gt;minvent; otmp; otmp = otmp-&gt;<a class="code" href="structobj.html#ad1c5d790528ee1d8349ef302994789d8">nobj</a>)</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <span class="keywordflow">if</span>(otmp-&gt;<a class="code" href="structobj.html#a95eb282afebd3599996035e8aab71751">otyp</a> == AMULET_OF_YENDOR ||</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            <a class="code" href="questpgr_8c.html#a883c5ecd485acd110958e3a233cf9b57">is_quest_artifact</a>(otmp) ||</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            otmp-&gt;<a class="code" href="structobj.html#a95eb282afebd3599996035e8aab71751">otyp</a> == BELL_OF_OPENING ||</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            otmp-&gt;<a class="code" href="structobj.html#a95eb282afebd3599996035e8aab71751">otyp</a> == CANDELABRUM_OF_INVOCATION ||</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            otmp-&gt;<a class="code" href="structobj.html#a95eb282afebd3599996035e8aab71751">otyp</a> == SPE_BOOK_OF_THE_DEAD) <span class="keywordflow">return</span>(1);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keywordflow">return</span>(0);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;}</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment"> *  New for 3.1  Strategy / Tactics for the wiz, as well as other</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment"> *  monsters that are &quot;after&quot; something (defined via mflag3).</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment"> *  The strategy section decides *what* the monster is going</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment"> *  to attempt, the tactics section implements the decision.</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="preprocessor">#define STRAT(w, x, y, typ) (w | ((long)(x)&lt;&lt;16) | ((long)(y)&lt;&lt;8) | (long)typ)</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="preprocessor">#define M_Wants(mask)   (mtmp-&gt;data-&gt;mflags3 &amp; (mask))</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<a class="code" href="hack_8h.html#a6584b0687fb4e0040a85bbcdaa3e0ee1">STATIC_OVL</a> <span class="keywordtype">short</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;which_arti(mask)</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <a class="code" href="mkmaze_8c.html#a24ac627a7839caecddfc66f1d46033f0">register</a> <span class="keywordtype">int</span> mask;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;{</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordflow">switch</span>(mask) {</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="monflag_8h.html#ac903041723866dfbf6b60d03b1722ce1">M3_WANTSAMUL</a>:  <span class="keywordflow">return</span>(AMULET_OF_YENDOR);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="monflag_8h.html#af66f05140c21b70495dab12be6d5ca02">M3_WANTSBELL</a>:  <span class="keywordflow">return</span>(BELL_OF_OPENING);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="monflag_8h.html#acd80fc7dc8c3292b680bddc77856be64">M3_WANTSCAND</a>:  <span class="keywordflow">return</span>(CANDELABRUM_OF_INVOCATION);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="monflag_8h.html#adb821fed58321dfe7451806f004674df">M3_WANTSBOOK</a>:  <span class="keywordflow">return</span>(SPE_BOOK_OF_THE_DEAD);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <span class="keywordflow">default</span>:        <span class="keywordflow">break</span>;  <span class="comment">/* 0 signifies quest artifact */</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    }</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordflow">return</span>(0);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;}</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment"> *  If &quot;otyp&quot; is zero, it triggers a check for the quest_artifact,</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment"> *  since bell, book, candle, and amulet are all objects, not really</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment"> *  artifacts right now.    [MRS]</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<a class="code" href="hack_8h.html#a6584b0687fb4e0040a85bbcdaa3e0ee1">STATIC_OVL</a> <span class="keywordtype">boolean</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;mon_has_arti(mtmp, <a class="code" href="structobj.html#a95eb282afebd3599996035e8aab71751">otyp</a>)</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <a class="code" href="mkmaze_8c.html#a24ac627a7839caecddfc66f1d46033f0">register</a> struct <a class="code" href="structmonst.html">monst</a> *mtmp;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <a class="code" href="mkmaze_8c.html#a24ac627a7839caecddfc66f1d46033f0">register</a> <span class="keywordtype">short</span>  <a class="code" href="structobj.html#a95eb282afebd3599996035e8aab71751">otyp</a>;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;{</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keyword">register</span> <span class="keyword">struct </span><a class="code" href="structobj.html">obj</a> *<a class="code" href="mhitu_8c.html#a8cf94e09e1a72daf7050a2817ba70974">otmp</a>;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordflow">for</span>(otmp = mtmp-&gt;minvent; otmp; otmp = otmp-&gt;<a class="code" href="structobj.html#ad1c5d790528ee1d8349ef302994789d8">nobj</a>) {</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <span class="keywordflow">if</span>(otyp) {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <span class="keywordflow">if</span>(otmp-&gt;<a class="code" href="structobj.html#a95eb282afebd3599996035e8aab71751">otyp</a> == otyp)</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            <span class="keywordflow">return</span>(1);</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        }</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;         <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="questpgr_8c.html#a883c5ecd485acd110958e3a233cf9b57">is_quest_artifact</a>(otmp)) <span class="keywordflow">return</span>(1);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    }</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordflow">return</span>(0);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;}</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<a class="code" href="hack_8h.html#a6584b0687fb4e0040a85bbcdaa3e0ee1">STATIC_OVL</a> <span class="keyword">struct </span><a class="code" href="structmonst.html">monst</a> *</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;other_mon_has_arti(mtmp, otyp)</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <a class="code" href="mkmaze_8c.html#a24ac627a7839caecddfc66f1d46033f0">register</a> struct <a class="code" href="structmonst.html">monst</a> *mtmp;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <a class="code" href="mkmaze_8c.html#a24ac627a7839caecddfc66f1d46033f0">register</a> <span class="keywordtype">short</span>  otyp;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;{</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keyword">register</span> <span class="keyword">struct </span><a class="code" href="structmonst.html">monst</a> *mtmp2;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keywordflow">for</span>(mtmp2 = <a class="code" href="rm_8h.html#a9b7eba07f916406d6d62f5f82d273e40">fmon</a>; mtmp2; mtmp2 = mtmp2-&gt;<a class="code" href="structmonst.html#a4c4bcdcf3c4ec4a85313ade9f9c27b72">nmon</a>)</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <span class="comment">/* no need for !DEADMONSTER check here since they have no inventory */</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <span class="keywordflow">if</span>(mtmp2 != mtmp)</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <span class="keywordflow">if</span>(mon_has_arti(mtmp2, otyp)) <span class="keywordflow">return</span>(mtmp2);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keywordflow">return</span>((<span class="keyword">struct</span> <a class="code" href="structmonst.html">monst</a> *)0);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;}</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<a class="code" href="hack_8h.html#a6584b0687fb4e0040a85bbcdaa3e0ee1">STATIC_OVL</a> <span class="keyword">struct </span><a class="code" href="structobj.html">obj</a> *</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;on_ground(otyp)</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <a class="code" href="mkmaze_8c.html#a24ac627a7839caecddfc66f1d46033f0">register</a> <span class="keywordtype">short</span>  otyp;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;{</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keyword">register</span> <span class="keyword">struct </span><a class="code" href="structobj.html">obj</a> *<a class="code" href="mhitu_8c.html#a8cf94e09e1a72daf7050a2817ba70974">otmp</a>;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordflow">for</span> (otmp = <a class="code" href="rm_8h.html#a4d2866bf9ebea1c08c26174b5c8cfbb7">fobj</a>; <a class="code" href="mhitu_8c.html#a8cf94e09e1a72daf7050a2817ba70974">otmp</a>; otmp = otmp-&gt;<a class="code" href="structobj.html#ad1c5d790528ee1d8349ef302994789d8">nobj</a>)</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <span class="keywordflow">if</span> (otyp) {</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <span class="keywordflow">if</span> (otmp-&gt;<a class="code" href="structobj.html#a95eb282afebd3599996035e8aab71751">otyp</a> == otyp)</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            <span class="keywordflow">return</span>(otmp);</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="questpgr_8c.html#a883c5ecd485acd110958e3a233cf9b57">is_quest_artifact</a>(otmp))</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="keywordflow">return</span>(otmp);</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordflow">return</span>((<span class="keyword">struct</span> <a class="code" href="structobj.html">obj</a> *)0);</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;}</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<a class="code" href="hack_8h.html#a6584b0687fb4e0040a85bbcdaa3e0ee1">STATIC_OVL</a> <span class="keywordtype">boolean</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;you_have(mask)</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <a class="code" href="mkmaze_8c.html#a24ac627a7839caecddfc66f1d46033f0">register</a> <span class="keywordtype">int</span> mask;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;{</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keywordflow">switch</span>(mask) {</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="monflag_8h.html#ac903041723866dfbf6b60d03b1722ce1">M3_WANTSAMUL</a>:  <span class="keywordflow">return</span>(<span class="keywordtype">boolean</span>)(<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a3e83735264e74265e8c8777f73e159fa">uhave</a>.amulet);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="monflag_8h.html#af66f05140c21b70495dab12be6d5ca02">M3_WANTSBELL</a>:  <span class="keywordflow">return</span>(<span class="keywordtype">boolean</span>)(<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a3e83735264e74265e8c8777f73e159fa">uhave</a>.bell);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="monflag_8h.html#acd80fc7dc8c3292b680bddc77856be64">M3_WANTSCAND</a>:  <span class="keywordflow">return</span>(<span class="keywordtype">boolean</span>)(<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a3e83735264e74265e8c8777f73e159fa">uhave</a>.menorah);</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="monflag_8h.html#adb821fed58321dfe7451806f004674df">M3_WANTSBOOK</a>:  <span class="keywordflow">return</span>(<span class="keywordtype">boolean</span>)(<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a3e83735264e74265e8c8777f73e159fa">uhave</a>.book);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="monflag_8h.html#acffdd40c01928441a189dee8b1f1aa9c">M3_WANTSARTI</a>:  <span class="keywordflow">return</span>(<span class="keywordtype">boolean</span>)(<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a3e83735264e74265e8c8777f73e159fa">uhave</a>.questart);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <span class="keywordflow">default</span>:        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    }</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordflow">return</span>(0);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;}</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<a class="code" href="hack_8h.html#a6584b0687fb4e0040a85bbcdaa3e0ee1">STATIC_OVL</a> <span class="keywordtype">long</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;target_on(mask, mtmp)</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <a class="code" href="mkmaze_8c.html#a24ac627a7839caecddfc66f1d46033f0">register</a> <span class="keywordtype">int</span> mask;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <a class="code" href="mkmaze_8c.html#a24ac627a7839caecddfc66f1d46033f0">register</a> struct <a class="code" href="structmonst.html">monst</a> *mtmp;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;{</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keyword">register</span> <span class="keywordtype">short</span>  <a class="code" href="structobj.html#a95eb282afebd3599996035e8aab71751">otyp</a>;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keyword">register</span> <span class="keyword">struct </span><a class="code" href="structobj.html">obj</a> *<a class="code" href="mhitu_8c.html#a8cf94e09e1a72daf7050a2817ba70974">otmp</a>;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keyword">register</span> <span class="keyword">struct </span><a class="code" href="structmonst.html">monst</a> *mtmp2;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="keywordflow">if</span>(!M_Wants(mask))  <span class="keywordflow">return</span>(<a class="code" href="monst_8h.html#a13f072ce727d1069426544dfa05094c9">STRAT_NONE</a>);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    otyp = which_arti(mask);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordflow">if</span>(!mon_has_arti(mtmp, otyp)) {</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <span class="keywordflow">if</span>(you_have(mask))</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <span class="keywordflow">return</span>(STRAT(<a class="code" href="monst_8h.html#ab8449cb525fecbb0679c83fd28521078">STRAT_PLAYER</a>, <a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#ace2fd92f7f1a640e45775efe6e5f6cf7">ux</a>, <a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a8571cf3a9cfc41c3f877d0f56cda11a9">uy</a>, mask));</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>((otmp = on_ground(otyp)))</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <span class="keywordflow">return</span>(STRAT(<a class="code" href="monst_8h.html#a39bea710360b85bb05ee43b77e3e9e32">STRAT_GROUND</a>, otmp-&gt;<a class="code" href="structobj.html#aac936c7da6b4f1eca0a94f75c242e5cc">ox</a>, otmp-&gt;<a class="code" href="structobj.html#a72dace5e678b56ae42c3fb19292e5839">oy</a>, mask));</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>((mtmp2 = other_mon_has_arti(mtmp, otyp)))</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <span class="keywordflow">return</span>(STRAT(<a class="code" href="monst_8h.html#a8baefe8f5d9e74a47c4cf4d93ddab8ef">STRAT_MONSTR</a>, mtmp2-&gt;<a class="code" href="structmonst.html#a9bc20171e986845daccff8aafd8b5194">mx</a>, mtmp2-&gt;<a class="code" href="structmonst.html#a0b969d9b6af5b55393f6acfe508c6f08">my</a>, mask));</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    }</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keywordflow">return</span>(<a class="code" href="monst_8h.html#a13f072ce727d1069426544dfa05094c9">STRAT_NONE</a>);</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;}</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<a class="code" href="hack_8h.html#a6584b0687fb4e0040a85bbcdaa3e0ee1">STATIC_OVL</a> <span class="keywordtype">long</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;strategy(mtmp)</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <a class="code" href="mkmaze_8c.html#a24ac627a7839caecddfc66f1d46033f0">register</a> struct <a class="code" href="structmonst.html">monst</a> *mtmp;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;{</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordtype">long</span> strat, dstrat;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="mondata_8h.html#ab0cdbecbce4b88b729f7f2fa54b02f62">is_covetous</a>(mtmp-&gt;data) ||</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <span class="comment">/* perhaps a shopkeeper has been polymorphed into a master</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment">           lich; we don&#39;t want it teleporting to the stairs to heal</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment">           because that will leave its shop untended */</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        (mtmp-&gt;isshk &amp;&amp; inhishop(mtmp)))</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="monst_8h.html#a13f072ce727d1069426544dfa05094c9">STRAT_NONE</a>;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordflow">switch</span>((mtmp-&gt;mhp*3)/mtmp-&gt;mhpmax) {    <span class="comment">/* 0-3 */</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;       <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <span class="keywordflow">case</span> 0: <span class="comment">/* panic time - mtmp is almost snuffed */</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            <span class="keywordflow">return</span>(<a class="code" href="monst_8h.html#a7b64eda618aeaa19505700c5ea1fa3d6">STRAT_HEAL</a>);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <span class="keywordflow">case</span> 1: <span class="comment">/* the wiz is less cautious */</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            <span class="keywordflow">if</span>(mtmp-&gt;data != &amp;<a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[PM_WIZARD_OF_YENDOR])</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                <span class="keywordflow">return</span>(<a class="code" href="monst_8h.html#a7b64eda618aeaa19505700c5ea1fa3d6">STRAT_HEAL</a>);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            <span class="comment">/* else fall through */</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        <span class="keywordflow">case</span> 2: dstrat = <a class="code" href="monst_8h.html#a7b64eda618aeaa19505700c5ea1fa3d6">STRAT_HEAL</a>;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <span class="keywordflow">case</span> 3: dstrat = <a class="code" href="monst_8h.html#a13f072ce727d1069426544dfa05094c9">STRAT_NONE</a>;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    }</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="flag_8h.html#a997133526e0c6bed44ebc0116a48b50a">flags</a>.<a class="code" href="structflag.html#a41f2f729280257e4e4a770606bec1043">made_amulet</a>)</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <span class="keywordflow">if</span>((strat = target_on(<a class="code" href="monflag_8h.html#ac903041723866dfbf6b60d03b1722ce1">M3_WANTSAMUL</a>, mtmp)) != <a class="code" href="monst_8h.html#a13f072ce727d1069426544dfa05094c9">STRAT_NONE</a>)</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <span class="keywordflow">return</span>(strat);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#aaa426b9f3053502028edbe45d2031208">uevent</a>.invoked) {      <span class="comment">/* priorities change once gate opened */</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        <span class="keywordflow">if</span>((strat = target_on(<a class="code" href="monflag_8h.html#acffdd40c01928441a189dee8b1f1aa9c">M3_WANTSARTI</a>, mtmp)) != <a class="code" href="monst_8h.html#a13f072ce727d1069426544dfa05094c9">STRAT_NONE</a>)</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        <span class="keywordflow">return</span>(strat);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <span class="keywordflow">if</span>((strat = target_on(<a class="code" href="monflag_8h.html#adb821fed58321dfe7451806f004674df">M3_WANTSBOOK</a>, mtmp)) != <a class="code" href="monst_8h.html#a13f072ce727d1069426544dfa05094c9">STRAT_NONE</a>)</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <span class="keywordflow">return</span>(strat);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        <span class="keywordflow">if</span>((strat = target_on(<a class="code" href="monflag_8h.html#af66f05140c21b70495dab12be6d5ca02">M3_WANTSBELL</a>, mtmp)) != <a class="code" href="monst_8h.html#a13f072ce727d1069426544dfa05094c9">STRAT_NONE</a>)</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        <span class="keywordflow">return</span>(strat);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        <span class="keywordflow">if</span>((strat = target_on(<a class="code" href="monflag_8h.html#acd80fc7dc8c3292b680bddc77856be64">M3_WANTSCAND</a>, mtmp)) != <a class="code" href="monst_8h.html#a13f072ce727d1069426544dfa05094c9">STRAT_NONE</a>)</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <span class="keywordflow">return</span>(strat);</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        <span class="keywordflow">if</span>((strat = target_on(<a class="code" href="monflag_8h.html#adb821fed58321dfe7451806f004674df">M3_WANTSBOOK</a>, mtmp)) != <a class="code" href="monst_8h.html#a13f072ce727d1069426544dfa05094c9">STRAT_NONE</a>)</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <span class="keywordflow">return</span>(strat);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <span class="keywordflow">if</span>((strat = target_on(<a class="code" href="monflag_8h.html#af66f05140c21b70495dab12be6d5ca02">M3_WANTSBELL</a>, mtmp)) != <a class="code" href="monst_8h.html#a13f072ce727d1069426544dfa05094c9">STRAT_NONE</a>)</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <span class="keywordflow">return</span>(strat);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <span class="keywordflow">if</span>((strat = target_on(<a class="code" href="monflag_8h.html#acd80fc7dc8c3292b680bddc77856be64">M3_WANTSCAND</a>, mtmp)) != <a class="code" href="monst_8h.html#a13f072ce727d1069426544dfa05094c9">STRAT_NONE</a>)</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <span class="keywordflow">return</span>(strat);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <span class="keywordflow">if</span>((strat = target_on(<a class="code" href="monflag_8h.html#acffdd40c01928441a189dee8b1f1aa9c">M3_WANTSARTI</a>, mtmp)) != <a class="code" href="monst_8h.html#a13f072ce727d1069426544dfa05094c9">STRAT_NONE</a>)</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        <span class="keywordflow">return</span>(strat);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    }</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="keywordflow">return</span>(dstrat);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;}</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="keywordtype">int</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;tactics(mtmp)</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <a class="code" href="mkmaze_8c.html#a24ac627a7839caecddfc66f1d46033f0">register</a> struct <a class="code" href="structmonst.html">monst</a> *mtmp;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;{</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keywordtype">long</span> strat = strategy(mtmp);</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    mtmp-&gt;mstrategy = (mtmp-&gt;mstrategy &amp; <a class="code" href="monst_8h.html#a4f9dcb847e3f6a5b6d1e5ce78902938b">STRAT_WAITMASK</a>) | strat;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="keywordflow">switch</span> (strat) {</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="monst_8h.html#a7b64eda618aeaa19505700c5ea1fa3d6">STRAT_HEAL</a>:    <span class="comment">/* hide and recover */</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        <span class="comment">/* if wounded, hole up on or near the stairs (to block them) */</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        <span class="comment">/* unless, of course, there are no stairs (e.g. endlevel) */</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        mtmp-&gt;mavenge = 1; <span class="comment">/* covetous monsters attack while fleeing */</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <span class="keywordflow">if</span> (In_W_tower(mtmp-&gt;mx, mtmp-&gt;my, &amp;<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a89878490db5d54221f04b3fb44ebdaa2">uz</a>) ||</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            (mtmp-&gt;iswiz &amp;&amp; !<a class="code" href="decl_8h.html#a6ddff041cb808902b66e0b7196f03e00">xupstair</a> &amp;&amp; !mon_has_amulet(mtmp))) {</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            <span class="keywordflow">if</span> (!rn2(3 + mtmp-&gt;mhp/10)) (<span class="keywordtype">void</span>) <a class="code" href="teleport_8c.html#aa6c4370d0e90b61589cd46404ceab176">rloc</a>(mtmp, <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="decl_8h.html#a6ddff041cb808902b66e0b7196f03e00">xupstair</a> &amp;&amp;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;             (mtmp-&gt;mx != <a class="code" href="decl_8h.html#a6ddff041cb808902b66e0b7196f03e00">xupstair</a> || mtmp-&gt;my != <a class="code" href="decl_8h.html#a26867130b8519f38c26a8b28b4df9ac0">yupstair</a>)) {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            (void) mnearto(mtmp, <a class="code" href="decl_8h.html#a6ddff041cb808902b66e0b7196f03e00">xupstair</a>, <a class="code" href="decl_8h.html#a26867130b8519f38c26a8b28b4df9ac0">yupstair</a>, <a class="code" href="global_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        }</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <span class="comment">/* if you&#39;re not around, cast healing spells */</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="hack_8h.html#a1f84afcae19c5b60124bc509ed647f84">distu</a>(mtmp-&gt;mx,mtmp-&gt;my) &gt; (<a class="code" href="hack_8h.html#a26ee0a18384e9ca14b97a4f877791284">BOLT_LIM</a> * <a class="code" href="hack_8h.html#a26ee0a18384e9ca14b97a4f877791284">BOLT_LIM</a>))</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            <span class="keywordflow">if</span>(mtmp-&gt;mhp &lt;= mtmp-&gt;mhpmax - 8) {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            mtmp-&gt;mhp += rnd(8);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            <span class="keywordflow">return</span>(1);</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            }</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        <span class="comment">/* fall through :-) */</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="monst_8h.html#a13f072ce727d1069426544dfa05094c9">STRAT_NONE</a>:    <span class="comment">/* harrass */</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        <span class="keywordflow">if</span> (!rn2(!mtmp-&gt;mflee ? 5 : 33)) mnexto(mtmp);</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <span class="keywordflow">return</span>(0);</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        <span class="keywordflow">default</span>:        <span class="comment">/* kill, maim, pillage! */</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        <span class="keywordtype">long</span>  <a class="code" href="detect_8c.html#a8201fc0bfa35306851be2a25ab2d6263">where</a> = (strat &amp; <a class="code" href="monst_8h.html#a8ac273da2104db1f2321c04911fe0da1">STRAT_STRATMASK</a>);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        <a class="code" href="global_8h.html#a2043b7d01ce89f4ee2fa6c345a752d32">xchar</a> tx = <a class="code" href="monst_8h.html#acea83a3fce629f9d51cc8f874b3766d3">STRAT_GOALX</a>(strat),</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;              ty = <a class="code" href="monst_8h.html#afb45808d646b1b116a7eaaad3bc1e87e">STRAT_GOALY</a>(strat);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        <span class="keywordtype">int</span>   targ = strat &amp; <a class="code" href="monst_8h.html#af5982224ccf04ba828ca3167e38fe10d">STRAT_GOAL</a>;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        <span class="keyword">struct </span><a class="code" href="structobj.html">obj</a> *<a class="code" href="mhitu_8c.html#a8cf94e09e1a72daf7050a2817ba70974">otmp</a>;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        <span class="keywordflow">if</span>(!targ) { <span class="comment">/* simply wants you to close */</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;            <span class="keywordflow">return</span>(0);</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        }</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        <span class="keywordflow">if</span>((<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#ace2fd92f7f1a640e45775efe6e5f6cf7">ux</a> == tx &amp;&amp; <a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a8571cf3a9cfc41c3f877d0f56cda11a9">uy</a> == ty) || where == <a class="code" href="monst_8h.html#ab8449cb525fecbb0679c83fd28521078">STRAT_PLAYER</a>) {</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;            <span class="comment">/* player is standing on it (or has it) */</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;            mnexto(mtmp);</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            <span class="keywordflow">return</span>(0);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        }</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        <span class="keywordflow">if</span>(where == <a class="code" href="monst_8h.html#a39bea710360b85bb05ee43b77e3e9e32">STRAT_GROUND</a>) {</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;            <span class="keywordflow">if</span>(!<a class="code" href="rm_8h.html#a17ef631151b987fd582fca76a429c08a">MON_AT</a>(tx, ty) || (mtmp-&gt;mx == tx &amp;&amp; mtmp-&gt;my == ty)) {</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            <span class="comment">/* teleport to it and pick it up */</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;            <a class="code" href="teleport_8c.html#a3707933b53701ba07bdb94aaf5db0c33">rloc_to</a>(mtmp, tx, ty);  <span class="comment">/* clean old pos */</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            <span class="keywordflow">if</span> ((otmp = on_ground(which_arti(targ))) != 0) {</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="vision_8h.html#a857efc720262bc13a9e4b4bcbb079b5c">cansee</a>(mtmp-&gt;mx, mtmp-&gt;my))</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                pline(<span class="stringliteral">&quot;%s picks up %s.&quot;</span>,</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                    Monnam(mtmp),</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                    (<a class="code" href="hack_8h.html#a1f84afcae19c5b60124bc509ed647f84">distu</a>(mtmp-&gt;mx, mtmp-&gt;my) &lt;= 5) ?</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                     doname(otmp) : distant_name(otmp, doname));</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                obj_extract_self(otmp);</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                (void) mpickobj(mtmp, otmp);</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                <span class="keywordflow">return</span>(1);</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">return</span>(0);</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            <span class="comment">/* a monster is standing on it - cause some trouble */</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            <span class="keywordflow">if</span> (!rn2(5)) mnexto(mtmp);</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            <span class="keywordflow">return</span>(0);</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            }</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            } <span class="keywordflow">else</span> { <span class="comment">/* a monster has it - &#39;port beside it. */</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            (void) mnearto(mtmp, tx, ty, <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;            <span class="keywordflow">return</span>(0);</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        }</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        }</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    }</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="comment">/*NOTREACHED*/</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="keywordflow">return</span>(0);</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;}</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;aggravate()</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;{</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="keyword">register</span> <span class="keyword">struct </span><a class="code" href="structmonst.html">monst</a> *mtmp;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="keywordflow">for</span>(mtmp = <a class="code" href="rm_8h.html#a9b7eba07f916406d6d62f5f82d273e40">fmon</a>; mtmp; mtmp = mtmp-&gt;<a class="code" href="structmonst.html#a4c4bcdcf3c4ec4a85313ade9f9c27b72">nmon</a>)</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="monst_8h.html#a87ebcb12436dc12747fed36e83561249">DEADMONSTER</a>(mtmp)) {</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        mtmp-&gt;msleeping = 0;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <span class="keywordflow">if</span>(!mtmp-&gt;mcanmove &amp;&amp; !rn2(5)) {</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;            mtmp-&gt;mfrozen = 0;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;            mtmp-&gt;mcanmove = 1;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        }</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        }</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;}</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;clonewiz()</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;{</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keyword">register</span> <span class="keyword">struct </span><a class="code" href="structmonst.html">monst</a> *mtmp2;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keywordflow">if</span> ((mtmp2 = makemon(&amp;<a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[PM_WIZARD_OF_YENDOR],</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                <a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#ace2fd92f7f1a640e45775efe6e5f6cf7">ux</a>, <a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a8571cf3a9cfc41c3f877d0f56cda11a9">uy</a>, <a class="code" href="hack_8h.html#ae449582f467baa0da531a6ea116a18f2">NO_MM_FLAGS</a>)) != 0) {</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        mtmp2-&gt;msleeping = mtmp2-&gt;<a class="code" href="structmonst.html#a6d525ec48f9d38cda6accbb0cb39efba">mtame</a> = mtmp2-&gt;mpeaceful = 0;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a3e83735264e74265e8c8777f73e159fa">uhave</a>.amulet &amp;&amp; rn2(2)) {  <span class="comment">/* give clone a fake */</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        (void) add_to_minv(mtmp2, mksobj(FAKE_AMULET_OF_YENDOR,</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                    <a class="code" href="global_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>, <a class="code" href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>));</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        }</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        mtmp2-&gt;<a class="code" href="structmonst.html#aab8fc9a0be90b4db8333b09487e2620c">m_ap_type</a> = <a class="code" href="monst_8h.html#ac3674020cb0ffbb50a783e53e76e21f4">M_AP_MONSTER</a>;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        mtmp2-&gt;<a class="code" href="structmonst.html#a60ba74caeb4e779b7ccdb99150823bb9">mappearance</a> = wizapp[rn2(<a class="code" href="global_8h.html#afd2537d19a3cb6556b0f727580ec6ee7">SIZE</a>(wizapp))];</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        <a class="code" href="display_8c.html#a185c6ad6e4c5a6be26a371b9aa17c32e">newsym</a>(mtmp2-&gt;<a class="code" href="structmonst.html#a9bc20171e986845daccff8aafd8b5194">mx</a>,mtmp2-&gt;<a class="code" href="structmonst.html#a0b969d9b6af5b55393f6acfe508c6f08">my</a>);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    }</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;}</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="comment">/* also used by newcham() */</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="keywordtype">int</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;pick_nasty()</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;{</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="comment">/* To do?  Possibly should filter for appropriate forms when</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="comment">       in the elemental planes or surrounded by water or lava. */</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="keywordflow">return</span> nasties[rn2(<a class="code" href="global_8h.html#afd2537d19a3cb6556b0f727580ec6ee7">SIZE</a>(nasties))];</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;}</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="comment">/* create some nasty monsters, aligned or neutral with the caster */</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="comment">/* a null caster defaults to a chaotic caster (e.g. the wizard) */</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="keywordtype">int</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;nasty(mcast)</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    struct <a class="code" href="structmonst.html">monst</a> *mcast;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;{</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="keyword">register</span> <span class="keyword">struct </span><a class="code" href="structmonst.html">monst</a>   *mtmp;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="keyword">register</span> <span class="keywordtype">int</span>    i, j, tmp;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keywordtype">int</span> castalign = (mcast ? mcast-&gt;data-&gt;maligntyp : -1);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <a class="code" href="structcoord.html">coord</a> bypos;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="wingem1_8c.html#a66e3fedede6aa372e5196e55e5e8d5c1">count</a>=0;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="keywordflow">if</span>(!rn2(10) &amp;&amp; <a class="code" href="dungeon_8h.html#a5cd7abaad3082e8a7b2f5ec30e44d2f4">Inhell</a>) {</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <a class="code" href="minion_8c.html#a81b52e95ccc9055c8667999ce20de7cf">msummon</a>((<span class="keyword">struct</span> <a class="code" href="structmonst.html">monst</a> *) 0);    <span class="comment">/* summons like WoY */</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    count++;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    tmp = (<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a6c7263bb25b91825bf7ecaab470d771a">ulevel</a> &gt; 3) ? <a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a6c7263bb25b91825bf7ecaab470d771a">ulevel</a>/3 : 1; <span class="comment">/* just in case -- rph */</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="comment">/* if we don&#39;t have a casting monster, the nasties appear around you */</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    bypos.<a class="code" href="structcoord.html#ac3e93ff628aa19d2888c5f6fa26f430d">x</a> = <a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#ace2fd92f7f1a640e45775efe6e5f6cf7">ux</a>;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    bypos.<a class="code" href="structcoord.html#a2b099692d87f98e4844b615136ca37fb">y</a> = <a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a8571cf3a9cfc41c3f877d0f56cda11a9">uy</a>;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="keywordflow">for</span>(i = rnd(tmp); i &gt; 0; --i)</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        <span class="keywordflow">for</span>(j=0; j&lt;20; j++) {</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        <span class="keywordtype">int</span> makeindex;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <span class="comment">/* Don&#39;t create more spellcasters of the monsters&#39; level or</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="comment">         * higher--avoids chain summoners filling up the level.</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;            makeindex = pick_nasty();</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        } <span class="keywordflow">while</span>(mcast &amp;&amp; attacktype(&amp;<a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[makeindex], <a class="code" href="monattk_8h.html#aae08f3175f1d778d2656ec379266fc49">AT_MAGC</a>) &amp;&amp;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;            <a class="code" href="wizard_8c.html#a2e4cd9d4199a5c6f1ecf9985d4a58dfb">monstr</a>[makeindex] &gt;= <a class="code" href="wizard_8c.html#a2e4cd9d4199a5c6f1ecf9985d4a58dfb">monstr</a>[mcast-&gt;mnum]);</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        <span class="comment">/* do this after picking the monster to place */</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        <span class="keywordflow">if</span> (mcast &amp;&amp;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;            !<a class="code" href="teleport_8c.html#a61ffc1bbdf6259d46ae8abd0dce3ce31">enexto</a>(&amp;bypos, mcast-&gt;mux, mcast-&gt;muy, &amp;<a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[makeindex]))</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        <span class="keywordflow">if</span> ((mtmp = makemon(&amp;<a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[makeindex],</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                    bypos.<a class="code" href="structcoord.html#ac3e93ff628aa19d2888c5f6fa26f430d">x</a>, bypos.<a class="code" href="structcoord.html#a2b099692d87f98e4844b615136ca37fb">y</a>, <a class="code" href="hack_8h.html#ae449582f467baa0da531a6ea116a18f2">NO_MM_FLAGS</a>)) != 0) {</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;            mtmp-&gt;msleeping = mtmp-&gt;mpeaceful = mtmp-&gt;<a class="code" href="structmonst.html#a6d525ec48f9d38cda6accbb0cb39efba">mtame</a> = 0;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            set_malign(mtmp);</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        } <span class="keywordflow">else</span> <span class="comment">/* GENOD? */</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            mtmp = makemon((<span class="keyword">struct</span> <a class="code" href="structpermonst.html">permonst</a> *)0,</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                    bypos.<a class="code" href="structcoord.html#ac3e93ff628aa19d2888c5f6fa26f430d">x</a>, bypos.<a class="code" href="structcoord.html#a2b099692d87f98e4844b615136ca37fb">y</a>, <a class="code" href="hack_8h.html#ae449582f467baa0da531a6ea116a18f2">NO_MM_FLAGS</a>);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        <span class="keywordflow">if</span>(mtmp &amp;&amp; (mtmp-&gt;<a class="code" href="structmonst.html#a5c8369d63f2ae0ca4466258542edecbe">data</a>-&gt;<a class="code" href="structpermonst.html#ad92ab559c3dc08cc1a40f3413377d787">maligntyp</a> == 0 ||</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                    sgn(mtmp-&gt;<a class="code" href="structmonst.html#a5c8369d63f2ae0ca4466258542edecbe">data</a>-&gt;<a class="code" href="structpermonst.html#ad92ab559c3dc08cc1a40f3413377d787">maligntyp</a>) == sgn(castalign)) ) {</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;            count++;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        }</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        }</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    }</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="wingem1_8c.html#a66e3fedede6aa372e5196e55e5e8d5c1">count</a>;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;}</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="comment">/*  Let&#39;s resurrect the wizard, for some unexpected fun.    */</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;resurrect()</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;{</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="keyword">struct </span><a class="code" href="structmonst.html">monst</a> *mtmp, **mmtmp;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="keywordtype">long</span> elapsed;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *verb;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="flag_8h.html#a997133526e0c6bed44ebc0116a48b50a">flags</a>.<a class="code" href="structflag.html#a234ec46fbb73d319d628aa1cc320be8b">no_of_wizards</a>) {</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        <span class="comment">/* make a new Wizard */</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        verb = <span class="stringliteral">&quot;kill&quot;</span>;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        mtmp = makemon(&amp;<a class="code" href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a>[PM_WIZARD_OF_YENDOR], <a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#ace2fd92f7f1a640e45775efe6e5f6cf7">ux</a>, <a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a8571cf3a9cfc41c3f877d0f56cda11a9">uy</a>, <a class="code" href="hack_8h.html#a1a6292933fe0a0d5fc9473a27701d413">MM_NOWAIT</a>);</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        <span class="comment">/* look for a migrating Wizard */</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        verb = <span class="stringliteral">&quot;elude&quot;</span>;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        mmtmp = &amp;<a class="code" href="decl_8h.html#a10b9afc11cdab35fe16667bb8a5506d2">migrating_mons</a>;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        <span class="keywordflow">while</span> ((mtmp = *mmtmp) != 0) {</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        <span class="keywordflow">if</span> (mtmp-&gt;iswiz &amp;&amp;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;            <span class="comment">/* if he has the Amulet, he won&#39;t bring it to you */</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;            !mon_has_amulet(mtmp) &amp;&amp;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;            (elapsed = <a class="code" href="decl_8h.html#a75c1f008487d95630d0d789a79bb5c74">monstermoves</a> - mtmp-&gt;<a class="code" href="structmonst.html#a942c3eb47c3057fe67733f1a7be5e63b">mlstmv</a>) &gt; 0L) {</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;            mon_catchup_elapsed_time(mtmp, elapsed);</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;            <span class="keywordflow">if</span> (elapsed &gt;= <a class="code" href="global_8h.html#a7e80c139c01102183d2a57d61b5d2d8a">LARGEST_INT</a>) elapsed = <a class="code" href="global_8h.html#a7e80c139c01102183d2a57d61b5d2d8a">LARGEST_INT</a> - 1;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;            elapsed /= 50L;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;            <span class="keywordflow">if</span> (mtmp-&gt;msleeping &amp;&amp; rn2((<span class="keywordtype">int</span>)elapsed + 1))</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;            mtmp-&gt;msleeping = 0;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;            <span class="keywordflow">if</span> (mtmp-&gt;mfrozen == 1) <span class="comment">/* would unfreeze on next move */</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;            mtmp-&gt;mfrozen = 0,  mtmp-&gt;mcanmove = 1;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;            <span class="keywordflow">if</span> (mtmp-&gt;mcanmove &amp;&amp; !mtmp-&gt;msleeping) {</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;            *mmtmp = mtmp-&gt;<a class="code" href="structmonst.html#a4c4bcdcf3c4ec4a85313ade9f9c27b72">nmon</a>;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;            mon_arrive(mtmp, <a class="code" href="global_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;            <span class="comment">/* note: there might be a second Wizard; if so,</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="comment">               he&#39;ll have to wait til the next resurrection */</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;            }</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        }</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        mmtmp = &amp;mtmp-&gt;<a class="code" href="structmonst.html#a4c4bcdcf3c4ec4a85313ade9f9c27b72">nmon</a>;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        }</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    }</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keywordflow">if</span> (mtmp) {</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        mtmp-&gt;msleeping = mtmp-&gt;<a class="code" href="structmonst.html#a6d525ec48f9d38cda6accbb0cb39efba">mtame</a> = mtmp-&gt;mpeaceful = 0;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        set_malign(mtmp);</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        pline(<span class="stringliteral">&quot;A voice booms out...&quot;</span>);</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        verbalize(<span class="stringliteral">&quot;So thou thought thou couldst %s me, fool.&quot;</span>, verb);</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    }</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;}</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="comment">/*  Here, we make trouble for the poor shmuck who actually  */</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="comment">/*  managed to do in the Wizard.                */</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;intervene()</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;{</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="keywordtype">int</span> which = <a class="code" href="dungeon_8h.html#af69a19c1eec378c1cebe9143febbe2b5">Is_astralevel</a>(&amp;<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a89878490db5d54221f04b3fb44ebdaa2">uz</a>) ? rnd(4) : rn2(6);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="comment">/* cases 0 and 5 don&#39;t apply on the Astral level */</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <span class="keywordflow">switch</span> (which) {</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        <span class="keywordflow">case</span> 0:</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        <span class="keywordflow">case</span> 1: You_feel(<span class="stringliteral">&quot;vaguely nervous.&quot;</span>);</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        <span class="keywordflow">case</span> 2: <span class="keywordflow">if</span> (!<a class="code" href="youprop_8h.html#a1b6e24068169af4177e15b48595c08c9">Blind</a>)</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;                You(<span class="stringliteral">&quot;notice a %s glow surrounding you.&quot;</span>,</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;                  hcolor(<a class="code" href="decl_8h.html#a55df3d1bd35f9756e4d497a2762a6c70">NH_BLACK</a>));</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;            <a class="code" href="sit_8c.html#a2835848ba066c9a75ae7f7400213fbd6">rndcurse</a>();</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;        <span class="keywordflow">case</span> 3: aggravate();</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        <span class="keywordflow">case</span> 4: (void)nasty((<span class="keyword">struct</span> <a class="code" href="structmonst.html">monst</a> *)0);</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        <span class="keywordflow">case</span> 5: resurrect();</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    }</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;}</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;wizdead()</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;{</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <a class="code" href="flag_8h.html#a997133526e0c6bed44ebc0116a48b50a">flags</a>.<a class="code" href="structflag.html#a234ec46fbb73d319d628aa1cc320be8b">no_of_wizards</a>--;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#aaa426b9f3053502028edbe45d2031208">uevent</a>.udemigod) {</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        <a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#aaa426b9f3053502028edbe45d2031208">uevent</a>.udemigod = <a class="code" href="global_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        <a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a57a2b161db463d1534dd5b71e9ff79b6">udg_cnt</a> = <a class="code" href="hack_8h.html#af107ca092682647f298989038020f9c8">rn1</a>(250, 50);</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    }</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;}</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> * <span class="keyword">const</span> random_insult[] = {</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <span class="stringliteral">&quot;antic&quot;</span>,</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <span class="stringliteral">&quot;blackguard&quot;</span>,</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <span class="stringliteral">&quot;caitiff&quot;</span>,</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <span class="stringliteral">&quot;chucklehead&quot;</span>,</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="stringliteral">&quot;coistrel&quot;</span>,</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <span class="stringliteral">&quot;craven&quot;</span>,</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="stringliteral">&quot;cretin&quot;</span>,</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <span class="stringliteral">&quot;cur&quot;</span>,</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="stringliteral">&quot;dastard&quot;</span>,</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <span class="stringliteral">&quot;demon fodder&quot;</span>,</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <span class="stringliteral">&quot;dimwit&quot;</span>,</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <span class="stringliteral">&quot;dolt&quot;</span>,</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <span class="stringliteral">&quot;fool&quot;</span>,</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <span class="stringliteral">&quot;footpad&quot;</span>,</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <span class="stringliteral">&quot;imbecile&quot;</span>,</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <span class="stringliteral">&quot;knave&quot;</span>,</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="stringliteral">&quot;maledict&quot;</span>,</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="stringliteral">&quot;miscreant&quot;</span>,</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="stringliteral">&quot;niddering&quot;</span>,</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="stringliteral">&quot;poltroon&quot;</span>,</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="stringliteral">&quot;rattlepate&quot;</span>,</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="stringliteral">&quot;reprobate&quot;</span>,</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <span class="stringliteral">&quot;scapegrace&quot;</span>,</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="stringliteral">&quot;varlet&quot;</span>,</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="stringliteral">&quot;villein&quot;</span>,  <span class="comment">/* (sic.) */</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="stringliteral">&quot;wittol&quot;</span>,</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="stringliteral">&quot;worm&quot;</span>,</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <span class="stringliteral">&quot;wretch&quot;</span>,</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;};</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> * <span class="keyword">const</span> random_malediction[] = {</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="stringliteral">&quot;Hell shall soon claim thy remains,&quot;</span>,</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <span class="stringliteral">&quot;I chortle at thee, thou pathetic&quot;</span>,</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="stringliteral">&quot;Prepare to die, thou&quot;</span>,</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="stringliteral">&quot;Resistance is useless,&quot;</span>,</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <span class="stringliteral">&quot;Surrender or die, thou&quot;</span>,</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <span class="stringliteral">&quot;There shall be no mercy, thou&quot;</span>,</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <span class="stringliteral">&quot;Thou shalt repent of thy cunning,&quot;</span>,</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="stringliteral">&quot;Thou art as a flea to me,&quot;</span>,</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="stringliteral">&quot;Thou art doomed,&quot;</span>,</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <span class="stringliteral">&quot;Thy fate is sealed,&quot;</span>,</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <span class="stringliteral">&quot;Verily, thou shalt be one dead&quot;</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;};</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="comment">/* Insult or intimidate the player */</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;cuss(mtmp)</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;<a class="code" href="mkmaze_8c.html#a24ac627a7839caecddfc66f1d46033f0">register</a> struct <a class="code" href="structmonst.html">monst</a>   *mtmp;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;{</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <span class="keywordflow">if</span> (mtmp-&gt;iswiz) {</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        <span class="keywordflow">if</span> (!rn2(5))  <span class="comment">/* typical bad guy action */</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        pline(<span class="stringliteral">&quot;%s laughs fiendishly.&quot;</span>, Monnam(mtmp));</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a3e83735264e74265e8c8777f73e159fa">uhave</a>.amulet &amp;&amp; !rn2(<a class="code" href="global_8h.html#afd2537d19a3cb6556b0f727580ec6ee7">SIZE</a>(random_insult)))</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;            verbalize(<span class="stringliteral">&quot;Relinquish the amulet, %s!&quot;</span>,</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;              random_insult[rn2(<a class="code" href="global_8h.html#afd2537d19a3cb6556b0f727580ec6ee7">SIZE</a>(random_insult))]);</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a>.<a class="code" href="structyou.html#a94468a400f14da123d5160f8eefd7641">uhp</a> &lt; 5 &amp;&amp; !rn2(2))  <span class="comment">/* Panic */</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;            verbalize(rn2(2) ?</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;              <span class="stringliteral">&quot;Even now thy life force ebbs, %s!&quot;</span> :</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;              <span class="stringliteral">&quot;Savor thy breath, %s, it be thy last!&quot;</span>,</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;              random_insult[rn2(<a class="code" href="global_8h.html#afd2537d19a3cb6556b0f727580ec6ee7">SIZE</a>(random_insult))]);</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mtmp-&gt;mhp &lt; 5 &amp;&amp; !rn2(2))  <span class="comment">/* Parthian shot */</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;            verbalize(rn2(2) ?</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                  <span class="stringliteral">&quot;I shall return.&quot;</span> :</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                  <span class="stringliteral">&quot;I&#39;ll be back.&quot;</span>);</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;            verbalize(<span class="stringliteral">&quot;%s %s!&quot;</span>,</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;              random_malediction[rn2(<a class="code" href="global_8h.html#afd2537d19a3cb6556b0f727580ec6ee7">SIZE</a>(random_malediction))],</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;              random_insult[rn2(<a class="code" href="global_8h.html#afd2537d19a3cb6556b0f727580ec6ee7">SIZE</a>(random_insult))]);</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="mondata_8h.html#a6bd06bc29ef4aaf6e4f982b587e1ea88">is_lminion</a>(mtmp)) {</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;        <a class="code" href="questpgr_8c.html#a46ceb90f530db0baf90130da5deb1c6b">com_pager</a>(rn2(<a class="code" href="qtext_8h.html#a43661c36dea21f9f8a98abed84135cc1">QTN_ANGELIC</a> - 1 + (<a class="code" href="youprop_8h.html#aa873f7ea0a3d096ef94ff651907f7a76">Hallucination</a> ? 1 : 0)) +</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                  <a class="code" href="qtext_8h.html#a0dd782d55cb4886c11178daf242d6cd6">QT_ANGELIC</a>);</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        <span class="keywordflow">if</span> (!rn2(5))</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        pline(<span class="stringliteral">&quot;%s casts aspersions on your ancestry.&quot;</span>, Monnam(mtmp));</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;            <a class="code" href="questpgr_8c.html#a46ceb90f530db0baf90130da5deb1c6b">com_pager</a>(rn2(<a class="code" href="qtext_8h.html#ae68725fd76b773e297ce9b3ef2c9006e">QTN_DEMONIC</a>) + <a class="code" href="qtext_8h.html#afc8cb00160a2f3d820c09b4b977a835b">QT_DEMONIC</a>);</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    }</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;}</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* OVLB */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="comment">/*wizard.c*/</span></div>
<div class="ttc" id="structobj_html"><div class="ttname"><a href="structobj.html">obj</a></div><div class="ttdef"><b>Definition:</b> <a href="obj_8h_source.html#l00017">obj.h:17</a></div></div>
<div class="ttc" id="structpermonst_html_ad92ab559c3dc08cc1a40f3413377d787"><div class="ttname"><a href="structpermonst.html#ad92ab559c3dc08cc1a40f3413377d787">permonst::maligntyp</a></div><div class="ttdeci">aligntyp maligntyp</div><div class="ttdef"><b>Definition:</b> <a href="permonst_8h_source.html#l00048">permonst.h:48</a></div></div>
<div class="ttc" id="decl_8h_html_a1aefaef88eef9075d8136d19410fd3b1"><div class="ttname"><a href="decl_8h.html#a1aefaef88eef9075d8136d19410fd3b1">uwep</a></div><div class="ttdeci">E NEARDATA struct obj * uwep</div><div class="ttdef"><b>Definition:</b> <a href="decl_8h_source.html#l00240">decl.h:240</a></div></div>
<div class="ttc" id="structmonst_html_a6d525ec48f9d38cda6accbb0cb39efba"><div class="ttname"><a href="structmonst.html#a6d525ec48f9d38cda6accbb0cb39efba">monst::mtame</a></div><div class="ttdeci">schar mtame</div><div class="ttdef"><b>Definition:</b> <a href="monst_8h_source.html#l00062">monst.h:62</a></div></div>
<div class="ttc" id="questpgr_8c_html_a883c5ecd485acd110958e3a233cf9b57"><div class="ttname"><a href="questpgr_8c.html#a883c5ecd485acd110958e3a233cf9b57">is_quest_artifact</a></div><div class="ttdeci">boolean is_quest_artifact(struct obj *otmp)</div><div class="ttdef"><b>Definition:</b> <a href="questpgr_8c_source.html#l00181">questpgr.c:181</a></div></div>
<div class="ttc" id="mondata_8h_html_ab0cdbecbce4b88b729f7f2fa54b02f62"><div class="ttname"><a href="mondata_8h.html#ab0cdbecbce4b88b729f7f2fa54b02f62">is_covetous</a></div><div class="ttdeci">#define is_covetous(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="mondata_8h_source.html#l00129">mondata.h:129</a></div></div>
<div class="ttc" id="structobj_html_ad1c5d790528ee1d8349ef302994789d8"><div class="ttname"><a href="structobj.html#ad1c5d790528ee1d8349ef302994789d8">obj::nobj</a></div><div class="ttdeci">struct obj * nobj</div><div class="ttdef"><b>Definition:</b> <a href="obj_8h_source.html#l00018">obj.h:18</a></div></div>
<div class="ttc" id="epri_8h_html"><div class="ttname"><a href="epri_8h.html">epri.h</a></div></div>
<div class="ttc" id="structyou_html_a8571cf3a9cfc41c3f877d0f56cda11a9"><div class="ttname"><a href="structyou.html#a8571cf3a9cfc41c3f877d0f56cda11a9">you::uy</a></div><div class="ttdeci">xchar uy</div><div class="ttdef"><b>Definition:</b> <a href="you_8h_source.html#l00233">you.h:233</a></div></div>
<div class="ttc" id="structtrap_html"><div class="ttname"><a href="structtrap.html">trap</a></div><div class="ttdef"><b>Definition:</b> <a href="sp__lev_8h_source.html#l00054">sp_lev.h:54</a></div></div>
<div class="ttc" id="detect_8c_html_a8201fc0bfa35306851be2a25ab2d6263"><div class="ttname"><a href="detect_8c.html#a8201fc0bfa35306851be2a25ab2d6263">where</a></div><div class="ttdeci">d_level * where</div><div class="ttdef"><b>Definition:</b> <a href="detect_8c_source.html#l00781">detect.c:781</a></div></div>
<div class="ttc" id="teleport_8c_html_aa6c4370d0e90b61589cd46404ceab176"><div class="ttname"><a href="teleport_8c.html#aa6c4370d0e90b61589cd46404ceab176">rloc</a></div><div class="ttdeci">boolean rloc(struct monst *mtmp, boolean suppress_impossible)</div><div class="ttdef"><b>Definition:</b> <a href="teleport_8c_source.html#l00980">teleport.c:980</a></div></div>
<div class="ttc" id="structyou_html_a57a2b161db463d1534dd5b71e9ff79b6"><div class="ttname"><a href="structyou.html#a57a2b161db463d1534dd5b71e9ff79b6">you::udg_cnt</a></div><div class="ttdeci">unsigned udg_cnt</div><div class="ttdef"><b>Definition:</b> <a href="you_8h_source.html#l00308">you.h:308</a></div></div>
<div class="ttc" id="structcoord_html_a2b099692d87f98e4844b615136ca37fb"><div class="ttname"><a href="structcoord.html#a2b099692d87f98e4844b615136ca37fb">coord::y</a></div><div class="ttdeci">int y</div><div class="ttdef"><b>Definition:</b> <a href="lev__yacc_8c_source.html#l00078">lev_yacc.c:78</a></div></div>
<div class="ttc" id="decl_8h_html_a10b9afc11cdab35fe16667bb8a5506d2"><div class="ttname"><a href="decl_8h.html#a10b9afc11cdab35fe16667bb8a5506d2">migrating_mons</a></div><div class="ttdeci">E NEARDATA struct monst * migrating_mons</div><div class="ttdef"><b>Definition:</b> <a href="decl_8h_source.html#l00263">decl.h:263</a></div></div>
<div class="ttc" id="sit_8c_html_a2835848ba066c9a75ae7f7400213fbd6"><div class="ttname"><a href="sit_8c.html#a2835848ba066c9a75ae7f7400213fbd6">rndcurse</a></div><div class="ttdeci">void rndcurse()</div><div class="ttdef"><b>Definition:</b> <a href="sit_8c_source.html#l00312">sit.c:312</a></div></div>
<div class="ttc" id="structmonst_html_a4c4bcdcf3c4ec4a85313ade9f9c27b72"><div class="ttname"><a href="structmonst.html#a4c4bcdcf3c4ec4a85313ade9f9c27b72">monst::nmon</a></div><div class="ttdeci">struct monst * nmon</div><div class="ttdef"><b>Definition:</b> <a href="monst_8h_source.html#l00041">monst.h:41</a></div></div>
<div class="ttc" id="structyou_html_aaa426b9f3053502028edbe45d2031208"><div class="ttname"><a href="structyou.html#aaa426b9f3053502028edbe45d2031208">you::uevent</a></div><div class="ttdeci">struct u_event uevent</div><div class="ttdef"><b>Definition:</b> <a href="you_8h_source.html#l00309">you.h:309</a></div></div>
<div class="ttc" id="hack_8h_html_af107ca092682647f298989038020f9c8"><div class="ttname"><a href="hack_8h.html#af107ca092682647f298989038020f9c8">rn1</a></div><div class="ttdeci">#define rn1(x, y)</div><div class="ttdef"><b>Definition:</b> <a href="hack_8h_source.html#l00291">hack.h:291</a></div></div>
<div class="ttc" id="structobj_html_aac936c7da6b4f1eca0a94f75c242e5cc"><div class="ttname"><a href="structobj.html#aac936c7da6b4f1eca0a94f75c242e5cc">obj::ox</a></div><div class="ttdeci">xchar ox</div><div class="ttdef"><b>Definition:</b> <a href="obj_8h_source.html#l00026">obj.h:26</a></div></div>
<div class="ttc" id="monst_8h_html_a87ebcb12436dc12747fed36e83561249"><div class="ttname"><a href="monst_8h.html#a87ebcb12436dc12747fed36e83561249">DEADMONSTER</a></div><div class="ttdeci">#define DEADMONSTER(mon)</div><div class="ttdef"><b>Definition:</b> <a href="monst_8h_source.html#l00179">monst.h:179</a></div></div>
<div class="ttc" id="structobj_html_a95eb282afebd3599996035e8aab71751"><div class="ttname"><a href="structobj.html#a95eb282afebd3599996035e8aab71751">obj::otyp</a></div><div class="ttdeci">short otyp</div><div class="ttdef"><b>Definition:</b> <a href="obj_8h_source.html#l00027">obj.h:27</a></div></div>
<div class="ttc" id="structyou_html_a3e83735264e74265e8c8777f73e159fa"><div class="ttname"><a href="structyou.html#a3e83735264e74265e8c8777f73e159fa">you::uhave</a></div><div class="ttdeci">struct u_have uhave</div><div class="ttdef"><b>Definition:</b> <a href="you_8h_source.html#l00310">you.h:310</a></div></div>
<div class="ttc" id="monst_8h_html_ac3674020cb0ffbb50a783e53e76e21f4"><div class="ttname"><a href="monst_8h.html#ac3674020cb0ffbb50a783e53e76e21f4">M_AP_MONSTER</a></div><div class="ttdeci">#define M_AP_MONSTER</div><div class="ttdef"><b>Definition:</b> <a href="monst_8h_source.html#l00060">monst.h:60</a></div></div>
<div class="ttc" id="dungeon_8h_html_a5cd7abaad3082e8a7b2f5ec30e44d2f4"><div class="ttname"><a href="dungeon_8h.html#a5cd7abaad3082e8a7b2f5ec30e44d2f4">Inhell</a></div><div class="ttdeci">#define Inhell</div><div class="ttdef"><b>Definition:</b> <a href="dungeon_8h_source.html#l00126">dungeon.h:126</a></div></div>
<div class="ttc" id="youprop_8h_html_aa873f7ea0a3d096ef94ff651907f7a76"><div class="ttname"><a href="youprop_8h.html#aa873f7ea0a3d096ef94ff651907f7a76">Hallucination</a></div><div class="ttdeci">#define Hallucination</div><div class="ttdef"><b>Definition:</b> <a href="youprop_8h_source.html#l00116">youprop.h:116</a></div></div>
<div class="ttc" id="structyou_html_a89878490db5d54221f04b3fb44ebdaa2"><div class="ttname"><a href="structyou.html#a89878490db5d54221f04b3fb44ebdaa2">you::uz</a></div><div class="ttdeci">d_level uz</div><div class="ttdef"><b>Definition:</b> <a href="you_8h_source.html#l00238">you.h:238</a></div></div>
<div class="ttc" id="monst_8h_html_ab8449cb525fecbb0679c83fd28521078"><div class="ttname"><a href="monst_8h.html#ab8449cb525fecbb0679c83fd28521078">STRAT_PLAYER</a></div><div class="ttdeci">#define STRAT_PLAYER</div><div class="ttdef"><b>Definition:</b> <a href="monst_8h_source.html#l00122">monst.h:122</a></div></div>
<div class="ttc" id="decl_8h_html_a342ae6d3415cd569bcea437201040743"><div class="ttname"><a href="decl_8h.html#a342ae6d3415cd569bcea437201040743">u</a></div><div class="ttdeci">E NEARDATA struct you u</div><div class="ttdef"><b>Definition:</b> <a href="decl_8h_source.html#l00255">decl.h:255</a></div></div>
<div class="ttc" id="structtrap_html_a579c4f0e2d31e3657c930d6741737b20"><div class="ttname"><a href="structtrap.html#a579c4f0e2d31e3657c930d6741737b20">trap::ty</a></div><div class="ttdeci">xchar ty</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00017">trap.h:17</a></div></div>
<div class="ttc" id="structpermonst_html"><div class="ttname"><a href="structpermonst.html">permonst</a></div><div class="ttdef"><b>Definition:</b> <a href="permonst_8h_source.html#l00041">permonst.h:41</a></div></div>
<div class="ttc" id="monst_8h_html_acea83a3fce629f9d51cc8f874b3766d3"><div class="ttname"><a href="monst_8h.html#acea83a3fce629f9d51cc8f874b3766d3">STRAT_GOALX</a></div><div class="ttdeci">#define STRAT_GOALX(s)</div><div class="ttdef"><b>Definition:</b> <a href="monst_8h_source.html#l00128">monst.h:128</a></div></div>
<div class="ttc" id="flag_8h_html_a997133526e0c6bed44ebc0116a48b50a"><div class="ttname"><a href="flag_8h.html#a997133526e0c6bed44ebc0116a48b50a">flags</a></div><div class="ttdeci">NEARDATA struct flag flags</div><div class="ttdef"><b>Definition:</b> <a href="decl_8c_source.html#l00143">decl.c:143</a></div></div>
<div class="ttc" id="mkmaze_8c_html_a24ac627a7839caecddfc66f1d46033f0"><div class="ttname"><a href="mkmaze_8c.html#a24ac627a7839caecddfc66f1d46033f0">register</a></div><div class="ttdeci">#define register</div><div class="ttdef"><b>Definition:</b> <a href="mkmaze_8c_source.html#l00912">mkmaze.c:912</a></div></div>
<div class="ttc" id="monst_8h_html_a4f9dcb847e3f6a5b6d1e5ce78902938b"><div class="ttname"><a href="monst_8h.html#a4f9dcb847e3f6a5b6d1e5ce78902938b">STRAT_WAITMASK</a></div><div class="ttdeci">#define STRAT_WAITMASK</div><div class="ttdef"><b>Definition:</b> <a href="monst_8h_source.html#l00118">monst.h:118</a></div></div>
<div class="ttc" id="rm_8h_html_a17ef631151b987fd582fca76a429c08a"><div class="ttname"><a href="rm_8h.html#a17ef631151b987fd582fca76a429c08a">MON_AT</a></div><div class="ttdeci">#define MON_AT(x, y)</div><div class="ttdef"><b>Definition:</b> <a href="rm_8h_source.html#l00511">rm.h:511</a></div></div>
<div class="ttc" id="global_8h_html_afd2537d19a3cb6556b0f727580ec6ee7"><div class="ttname"><a href="global_8h.html#afd2537d19a3cb6556b0f727580ec6ee7">SIZE</a></div><div class="ttdeci">#define SIZE(x)</div><div class="ttdef"><b>Definition:</b> <a href="global_8h_source.html#l00123">global.h:123</a></div></div>
<div class="ttc" id="mondata_8h_html_a6bd06bc29ef4aaf6e4f982b587e1ea88"><div class="ttname"><a href="mondata_8h.html#a6bd06bc29ef4aaf6e4f982b587e1ea88">is_lminion</a></div><div class="ttdeci">#define is_lminion(mon)</div><div class="ttdef"><b>Definition:</b> <a href="mondata_8h_source.html#l00022">mondata.h:22</a></div></div>
<div class="ttc" id="tradstdc_8h_html_a6807c5bd45183ceeea158c55a0bc3fbb"><div class="ttname"><a href="tradstdc_8h.html#a6807c5bd45183ceeea158c55a0bc3fbb">FDECL</a></div><div class="ttdeci">#define FDECL(f, p)</div><div class="ttdef"><b>Definition:</b> <a href="tradstdc_8h_source.html#l00167">tradstdc.h:167</a></div></div>
<div class="ttc" id="structflag_html_a41f2f729280257e4e4a770606bec1043"><div class="ttname"><a href="structflag.html#a41f2f729280257e4e4a770606bec1043">flag::made_amulet</a></div><div class="ttdeci">boolean made_amulet</div><div class="ttdef"><b>Definition:</b> <a href="flag_8h_source.html#l00053">flag.h:53</a></div></div>
<div class="ttc" id="minion_8c_html_a81b52e95ccc9055c8667999ce20de7cf"><div class="ttname"><a href="minion_8c.html#a81b52e95ccc9055c8667999ce20de7cf">msummon</a></div><div class="ttdeci">void msummon(struct monst *mon)</div><div class="ttdef"><b>Definition:</b> <a href="minion_8c_source.html#l00010">minion.c:10</a></div></div>
<div class="ttc" id="structmonst_html_a9bc20171e986845daccff8aafd8b5194"><div class="ttname"><a href="structmonst.html#a9bc20171e986845daccff8aafd8b5194">monst::mx</a></div><div class="ttdeci">xchar mx</div><div class="ttdef"><b>Definition:</b> <a href="monst_8h_source.html#l00049">monst.h:49</a></div></div>
<div class="ttc" id="structyou_html_ace2fd92f7f1a640e45775efe6e5f6cf7"><div class="ttname"><a href="structyou.html#ace2fd92f7f1a640e45775efe6e5f6cf7">you::ux</a></div><div class="ttdeci">xchar ux</div><div class="ttdef"><b>Definition:</b> <a href="you_8h_source.html#l00233">you.h:233</a></div></div>
<div class="ttc" id="global_8h_html_aa8cecfc5c5c054d2875c03e77b7be15d"><div class="ttname"><a href="global_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a></div><div class="ttdeci">#define TRUE</div><div class="ttdef"><b>Definition:</b> <a href="global_8h_source.html#l00060">global.h:60</a></div></div>
<div class="ttc" id="structtrap_html_a8a3d31070852119ee66c8662b0c883c7"><div class="ttname"><a href="structtrap.html#a8a3d31070852119ee66c8662b0c883c7">trap::tx</a></div><div class="ttdeci">xchar tx</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00017">trap.h:17</a></div></div>
<div class="ttc" id="decl_8h_html_a26867130b8519f38c26a8b28b4df9ac0"><div class="ttname"><a href="decl_8h.html#a26867130b8519f38c26a8b28b4df9ac0">yupstair</a></div><div class="ttdeci">#define yupstair</div><div class="ttdef"><b>Definition:</b> <a href="decl_8h_source.html#l00112">decl.h:112</a></div></div>
<div class="ttc" id="monattk_8h_html_aae08f3175f1d778d2656ec379266fc49"><div class="ttname"><a href="monattk_8h.html#aae08f3175f1d778d2656ec379266fc49">AT_MAGC</a></div><div class="ttdeci">#define AT_MAGC</div><div class="ttdef"><b>Definition:</b> <a href="monattk_8h_source.html#l00029">monattk.h:29</a></div></div>
<div class="ttc" id="structflag_html_a234ec46fbb73d319d628aa1cc320be8b"><div class="ttname"><a href="structflag.html#a234ec46fbb73d319d628aa1cc320be8b">flag::no_of_wizards</a></div><div class="ttdeci">unsigned no_of_wizards</div><div class="ttdef"><b>Definition:</b> <a href="flag_8h_source.html#l00092">flag.h:92</a></div></div>
<div class="ttc" id="mhitu_8c_html_a8cf94e09e1a72daf7050a2817ba70974"><div class="ttname"><a href="mhitu_8c.html#a8cf94e09e1a72daf7050a2817ba70974">otmp</a></div><div class="ttdeci">STATIC_VAR NEARDATA struct obj * otmp</div><div class="ttdef"><b>Definition:</b> <a href="mhitu_8c_source.html#l00008">mhitu.c:8</a></div></div>
<div class="ttc" id="vision_8h_html_a857efc720262bc13a9e4b4bcbb079b5c"><div class="ttname"><a href="vision_8h.html#a857efc720262bc13a9e4b4bcbb079b5c">cansee</a></div><div class="ttdeci">#define cansee(x, y)</div><div class="ttdef"><b>Definition:</b> <a href="vision_8h_source.html#l00030">vision.h:30</a></div></div>
<div class="ttc" id="monst_8h_html_a39bea710360b85bb05ee43b77e3e9e32"><div class="ttname"><a href="monst_8h.html#a39bea710360b85bb05ee43b77e3e9e32">STRAT_GROUND</a></div><div class="ttdeci">#define STRAT_GROUND</div><div class="ttdef"><b>Definition:</b> <a href="monst_8h_source.html#l00120">monst.h:120</a></div></div>
<div class="ttc" id="structmonst_html_a5c8369d63f2ae0ca4466258542edecbe"><div class="ttname"><a href="structmonst.html#a5c8369d63f2ae0ca4466258542edecbe">monst::data</a></div><div class="ttdeci">struct permonst * data</div><div class="ttdef"><b>Definition:</b> <a href="monst_8h_source.html#l00042">monst.h:42</a></div></div>
<div class="ttc" id="wizard_8c_html_a2e4cd9d4199a5c6f1ecf9985d4a58dfb"><div class="ttname"><a href="wizard_8c.html#a2e4cd9d4199a5c6f1ecf9985d4a58dfb">monstr</a></div><div class="ttdeci">const int monstr[]</div></div>
<div class="ttc" id="teleport_8c_html_a3707933b53701ba07bdb94aaf5db0c33"><div class="ttname"><a href="teleport_8c.html#a3707933b53701ba07bdb94aaf5db0c33">rloc_to</a></div><div class="ttdeci">void rloc_to(struct monst *mtmp, int x, int y)</div><div class="ttdef"><b>Definition:</b> <a href="teleport_8c_source.html#l00935">teleport.c:935</a></div></div>
<div class="ttc" id="config1_8h_html_a9987bf629301f5fe76ddd96aa2717ca1"><div class="ttname"><a href="config1_8h.html#a9987bf629301f5fe76ddd96aa2717ca1">NEARDATA</a></div><div class="ttdeci">#define NEARDATA</div><div class="ttdef"><b>Definition:</b> <a href="config1_8h_source.html#l00079">config1.h:79</a></div></div>
<div class="ttc" id="questpgr_8c_html_a46ceb90f530db0baf90130da5deb1c6b"><div class="ttname"><a href="questpgr_8c.html#a46ceb90f530db0baf90130da5deb1c6b">com_pager</a></div><div class="ttdeci">void com_pager(int msgnum)</div><div class="ttdef"><b>Definition:</b> <a href="questpgr_8c_source.html#l00390">questpgr.c:390</a></div></div>
<div class="ttc" id="wingem1_8c_html_ad659aea772b5811d42324ccffeb9d682"><div class="ttname"><a href="wingem1_8c.html#ad659aea772b5811d42324ccffeb9d682">SHORT_P</a></div><div class="ttdeci">#define SHORT_P</div><div class="ttdef"><b>Definition:</b> <a href="wingem1_8c_source.html#l00030">wingem1.c:30</a></div></div>
<div class="ttc" id="decl_8h_html_a55df3d1bd35f9756e4d497a2762a6c70"><div class="ttname"><a href="decl_8h.html#a55df3d1bd35f9756e4d497a2762a6c70">NH_BLACK</a></div><div class="ttdeci">#define NH_BLACK</div><div class="ttdef"><b>Definition:</b> <a href="decl_8h_source.html#l00277">decl.h:277</a></div></div>
<div class="ttc" id="qtext_8h_html"><div class="ttname"><a href="qtext_8h.html">qtext.h</a></div></div>
<div class="ttc" id="structyou_html_a94468a400f14da123d5160f8eefd7641"><div class="ttname"><a href="structyou.html#a94468a400f14da123d5160f8eefd7641">you::uhp</a></div><div class="ttdeci">int uhp</div><div class="ttdef"><b>Definition:</b> <a href="you_8h_source.html#l00334">you.h:334</a></div></div>
<div class="ttc" id="monst_8h_html_a13f072ce727d1069426544dfa05094c9"><div class="ttname"><a href="monst_8h.html#a13f072ce727d1069426544dfa05094c9">STRAT_NONE</a></div><div class="ttdeci">#define STRAT_NONE</div><div class="ttdef"><b>Definition:</b> <a href="monst_8h_source.html#l00123">monst.h:123</a></div></div>
<div class="ttc" id="hack_8h_html_ae449582f467baa0da531a6ea116a18f2"><div class="ttname"><a href="hack_8h.html#ae449582f467baa0da531a6ea116a18f2">NO_MM_FLAGS</a></div><div class="ttdeci">#define NO_MM_FLAGS</div><div class="ttdef"><b>Definition:</b> <a href="hack_8h_source.html#l00134">hack.h:134</a></div></div>
<div class="ttc" id="qtext_8h_html_a43661c36dea21f9f8a98abed84135cc1"><div class="ttname"><a href="qtext_8h.html#a43661c36dea21f9f8a98abed84135cc1">QTN_ANGELIC</a></div><div class="ttdeci">#define QTN_ANGELIC</div><div class="ttdef"><b>Definition:</b> <a href="qtext_8h_source.html#l00104">qtext.h:104</a></div></div>
<div class="ttc" id="monst_8h_html_afb45808d646b1b116a7eaaad3bc1e87e"><div class="ttname"><a href="monst_8h.html#afb45808d646b1b116a7eaaad3bc1e87e">STRAT_GOALY</a></div><div class="ttdeci">#define STRAT_GOALY(s)</div><div class="ttdef"><b>Definition:</b> <a href="monst_8h_source.html#l00129">monst.h:129</a></div></div>
<div class="ttc" id="hack_8h_html_a1a6292933fe0a0d5fc9473a27701d413"><div class="ttname"><a href="hack_8h.html#a1a6292933fe0a0d5fc9473a27701d413">MM_NOWAIT</a></div><div class="ttdeci">#define MM_NOWAIT</div><div class="ttdef"><b>Definition:</b> <a href="hack_8h_source.html#l00136">hack.h:136</a></div></div>
<div class="ttc" id="rm_8h_html_a4d2866bf9ebea1c08c26174b5c8cfbb7"><div class="ttname"><a href="rm_8h.html#a4d2866bf9ebea1c08c26174b5c8cfbb7">fobj</a></div><div class="ttdeci">#define fobj</div><div class="ttdef"><b>Definition:</b> <a href="rm_8h_source.html#l00496">rm.h:496</a></div></div>
<div class="ttc" id="wingem1_8c_html_a66e3fedede6aa372e5196e55e5e8d5c1"><div class="ttname"><a href="wingem1_8c.html#a66e3fedede6aa372e5196e55e5e8d5c1">count</a></div><div class="ttdeci">static long count</div><div class="ttdef"><b>Definition:</b> <a href="wingem1_8c_source.html#l01693">wingem1.c:1693</a></div></div>
<div class="ttc" id="qtext_8h_html_a0dd782d55cb4886c11178daf242d6cd6"><div class="ttname"><a href="qtext_8h.html#a0dd782d55cb4886c11178daf242d6cd6">QT_ANGELIC</a></div><div class="ttdeci">#define QT_ANGELIC</div><div class="ttdef"><b>Definition:</b> <a href="qtext_8h_source.html#l00103">qtext.h:103</a></div></div>
<div class="ttc" id="rm_8h_html_a9b7eba07f916406d6d62f5f82d273e40"><div class="ttname"><a href="rm_8h.html#a9b7eba07f916406d6d62f5f82d273e40">fmon</a></div><div class="ttdeci">#define fmon</div><div class="ttdef"><b>Definition:</b> <a href="rm_8h_source.html#l00497">rm.h:497</a></div></div>
<div class="ttc" id="monst_8h_html_af5982224ccf04ba828ca3167e38fe10d"><div class="ttname"><a href="monst_8h.html#af5982224ccf04ba828ca3167e38fe10d">STRAT_GOAL</a></div><div class="ttdeci">#define STRAT_GOAL</div><div class="ttdef"><b>Definition:</b> <a href="monst_8h_source.html#l00127">monst.h:127</a></div></div>
<div class="ttc" id="monst_8h_html_a7b64eda618aeaa19505700c5ea1fa3d6"><div class="ttname"><a href="monst_8h.html#a7b64eda618aeaa19505700c5ea1fa3d6">STRAT_HEAL</a></div><div class="ttdeci">#define STRAT_HEAL</div><div class="ttdef"><b>Definition:</b> <a href="monst_8h_source.html#l00119">monst.h:119</a></div></div>
<div class="ttc" id="youprop_8h_html_a1b6e24068169af4177e15b48595c08c9"><div class="ttname"><a href="youprop_8h.html#a1b6e24068169af4177e15b48595c08c9">Blind</a></div><div class="ttdeci">#define Blind</div><div class="ttdef"><b>Definition:</b> <a href="youprop_8h_source.html#l00099">youprop.h:99</a></div></div>
<div class="ttc" id="qtext_8h_html_ae68725fd76b773e297ce9b3ef2c9006e"><div class="ttname"><a href="qtext_8h.html#ae68725fd76b773e297ce9b3ef2c9006e">QTN_DEMONIC</a></div><div class="ttdeci">#define QTN_DEMONIC</div><div class="ttdef"><b>Definition:</b> <a href="qtext_8h_source.html#l00107">qtext.h:107</a></div></div>
<div class="ttc" id="structmonst_html_aab8fc9a0be90b4db8333b09487e2620c"><div class="ttname"><a href="structmonst.html#aab8fc9a0be90b4db8333b09487e2620c">monst::m_ap_type</a></div><div class="ttdeci">uchar m_ap_type</div><div class="ttdef"><b>Definition:</b> <a href="monst_8h_source.html#l00055">monst.h:55</a></div></div>
<div class="ttc" id="global_8h_html_aa93f0eb578d23995850d61f7d61c55c1"><div class="ttname"><a href="global_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a></div><div class="ttdeci">#define FALSE</div><div class="ttdef"><b>Definition:</b> <a href="global_8h_source.html#l00061">global.h:61</a></div></div>
<div class="ttc" id="display_8c_html_a185c6ad6e4c5a6be26a371b9aa17c32e"><div class="ttname"><a href="display_8c.html#a185c6ad6e4c5a6be26a371b9aa17c32e">newsym</a></div><div class="ttdeci">void newsym(int x, int y)</div><div class="ttdef"><b>Definition:</b> <a href="display_8c_source.html#l00629">display.c:629</a></div></div>
<div class="ttc" id="monflag_8h_html_adb821fed58321dfe7451806f004674df"><div class="ttname"><a href="monflag_8h.html#adb821fed58321dfe7451806f004674df">M3_WANTSBOOK</a></div><div class="ttdeci">#define M3_WANTSBOOK</div><div class="ttdef"><b>Definition:</b> <a href="monflag_8h_source.html#l00149">monflag.h:149</a></div></div>
<div class="ttc" id="decl_8h_html_a75c1f008487d95630d0d789a79bb5c74"><div class="ttname"><a href="decl_8h.html#a75c1f008487d95630d0d789a79bb5c74">monstermoves</a></div><div class="ttdeci">E NEARDATA long monstermoves</div><div class="ttdef"><b>Definition:</b> <a href="decl_8h_source.html#l00213">decl.h:213</a></div></div>
<div class="ttc" id="decl_8h_html_a602a9d34078660dd260aed96b2abd4ca"><div class="ttname"><a href="decl_8h.html#a602a9d34078660dd260aed96b2abd4ca">uamul</a></div><div class="ttdeci">E NEARDATA struct obj * uamul</div><div class="ttdef"><b>Definition:</b> <a href="decl_8h_source.html#l00240">decl.h:240</a></div></div>
<div class="ttc" id="trap_8h_html_a442e327ae9fbb5d15e2df82e488de313"><div class="ttname"><a href="trap_8h.html#a442e327ae9fbb5d15e2df82e488de313">ftrap</a></div><div class="ttdeci">struct trap * ftrap</div><div class="ttdef"><b>Definition:</b> <a href="decl_8c_source.html#l00141">decl.c:141</a></div></div>
<div class="ttc" id="structobj_html_a72dace5e678b56ae42c3fb19292e5839"><div class="ttname"><a href="structobj.html#a72dace5e678b56ae42c3fb19292e5839">obj::oy</a></div><div class="ttdeci">xchar oy</div><div class="ttdef"><b>Definition:</b> <a href="obj_8h_source.html#l00026">obj.h:26</a></div></div>
<div class="ttc" id="monflag_8h_html_af66f05140c21b70495dab12be6d5ca02"><div class="ttname"><a href="monflag_8h.html#af66f05140c21b70495dab12be6d5ca02">M3_WANTSBELL</a></div><div class="ttdeci">#define M3_WANTSBELL</div><div class="ttdef"><b>Definition:</b> <a href="monflag_8h_source.html#l00148">monflag.h:148</a></div></div>
<div class="ttc" id="structmonst_html_a942c3eb47c3057fe67733f1a7be5e63b"><div class="ttname"><a href="structmonst.html#a942c3eb47c3057fe67733f1a7be5e63b">monst::mlstmv</a></div><div class="ttdeci">long mlstmv</div><div class="ttdef"><b>Definition:</b> <a href="monst_8h_source.html#l00132">monst.h:132</a></div></div>
<div class="ttc" id="monflag_8h_html_acffdd40c01928441a189dee8b1f1aa9c"><div class="ttname"><a href="monflag_8h.html#acffdd40c01928441a189dee8b1f1aa9c">M3_WANTSARTI</a></div><div class="ttdeci">#define M3_WANTSARTI</div><div class="ttdef"><b>Definition:</b> <a href="monflag_8h_source.html#l00151">monflag.h:151</a></div></div>
<div class="ttc" id="structmonst_html_a60ba74caeb4e779b7ccdb99150823bb9"><div class="ttname"><a href="structmonst.html#a60ba74caeb4e779b7ccdb99150823bb9">monst::mappearance</a></div><div class="ttdeci">unsigned mappearance</div><div class="ttdef"><b>Definition:</b> <a href="monst_8h_source.html#l00054">monst.h:54</a></div></div>
<div class="ttc" id="monflag_8h_html_ac903041723866dfbf6b60d03b1722ce1"><div class="ttname"><a href="monflag_8h.html#ac903041723866dfbf6b60d03b1722ce1">M3_WANTSAMUL</a></div><div class="ttdeci">#define M3_WANTSAMUL</div><div class="ttdef"><b>Definition:</b> <a href="monflag_8h_source.html#l00147">monflag.h:147</a></div></div>
<div class="ttc" id="monflag_8h_html_acd80fc7dc8c3292b680bddc77856be64"><div class="ttname"><a href="monflag_8h.html#acd80fc7dc8c3292b680bddc77856be64">M3_WANTSCAND</a></div><div class="ttdeci">#define M3_WANTSCAND</div><div class="ttdef"><b>Definition:</b> <a href="monflag_8h_source.html#l00150">monflag.h:150</a></div></div>
<div class="ttc" id="hack_8h_html_a26ee0a18384e9ca14b97a4f877791284"><div class="ttname"><a href="hack_8h.html#a26ee0a18384e9ca14b97a4f877791284">BOLT_LIM</a></div><div class="ttdeci">#define BOLT_LIM</div><div class="ttdef"><b>Definition:</b> <a href="hack_8h_source.html#l00021">hack.h:21</a></div></div>
<div class="ttc" id="structtrap_html_aef8ea4650dce701fde7f7f3e1310c892"><div class="ttname"><a href="structtrap.html#aef8ea4650dce701fde7f7f3e1310c892">trap::ntrap</a></div><div class="ttdeci">struct trap * ntrap</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00016">trap.h:16</a></div></div>
<div class="ttc" id="structcoord_html"><div class="ttname"><a href="structcoord.html">coord</a></div><div class="ttdef"><b>Definition:</b> <a href="lev__yacc_8c_source.html#l00076">lev_yacc.c:76</a></div></div>
<div class="ttc" id="dungeon_8h_html_af69a19c1eec378c1cebe9143febbe2b5"><div class="ttname"><a href="dungeon_8h.html#af69a19c1eec378c1cebe9143febbe2b5">Is_astralevel</a></div><div class="ttdeci">#define Is_astralevel(x)</div><div class="ttdef"><b>Definition:</b> <a href="dungeon_8h_source.html#l00101">dungeon.h:101</a></div></div>
<div class="ttc" id="hack_8h_html_a0c2ce0eef98596c51b3a10e50a29dd5e"><div class="ttname"><a href="hack_8h.html#a0c2ce0eef98596c51b3a10e50a29dd5e">STATIC_DCL</a></div><div class="ttdeci">#define STATIC_DCL</div><div class="ttdef"><b>Definition:</b> <a href="hack_8h_source.html#l00312">hack.h:312</a></div></div>
<div class="ttc" id="teleport_8c_html_a61ffc1bbdf6259d46ae8abd0dce3ce31"><div class="ttname"><a href="teleport_8c.html#a61ffc1bbdf6259d46ae8abd0dce3ce31">enexto</a></div><div class="ttdeci">boolean enexto(coord *cc, xchar xx, xchar yy, struct permonst *mdat)</div><div class="ttdef"><b>Definition:</b> <a href="teleport_8c_source.html#l00097">teleport.c:97</a></div></div>
<div class="ttc" id="structmonst_html_a0b969d9b6af5b55393f6acfe508c6f08"><div class="ttname"><a href="structmonst.html#a0b969d9b6af5b55393f6acfe508c6f08">monst::my</a></div><div class="ttdeci">xchar my</div><div class="ttdef"><b>Definition:</b> <a href="monst_8h_source.html#l00049">monst.h:49</a></div></div>
<div class="ttc" id="monst_8h_html_a8baefe8f5d9e74a47c4cf4d93ddab8ef"><div class="ttname"><a href="monst_8h.html#a8baefe8f5d9e74a47c4cf4d93ddab8ef">STRAT_MONSTR</a></div><div class="ttdeci">#define STRAT_MONSTR</div><div class="ttdef"><b>Definition:</b> <a href="monst_8h_source.html#l00121">monst.h:121</a></div></div>
<div class="ttc" id="hack_8h_html_a1f84afcae19c5b60124bc509ed647f84"><div class="ttname"><a href="hack_8h.html#a1f84afcae19c5b60124bc509ed647f84">distu</a></div><div class="ttdeci">#define distu(xx, yy)</div><div class="ttdef"><b>Definition:</b> <a href="hack_8h_source.html#l00288">hack.h:288</a></div></div>
<div class="ttc" id="global_8h_html_a7e80c139c01102183d2a57d61b5d2d8a"><div class="ttname"><a href="global_8h.html#a7e80c139c01102183d2a57d61b5d2d8a">LARGEST_INT</a></div><div class="ttdeci">#define LARGEST_INT</div><div class="ttdef"><b>Definition:</b> <a href="global_8h_source.html#l00131">global.h:131</a></div></div>
<div class="ttc" id="hack_8h_html_a6584b0687fb4e0040a85bbcdaa3e0ee1"><div class="ttname"><a href="hack_8h.html#a6584b0687fb4e0040a85bbcdaa3e0ee1">STATIC_OVL</a></div><div class="ttdeci">#define STATIC_OVL</div><div class="ttdef"><b>Definition:</b> <a href="hack_8h_source.html#l00313">hack.h:313</a></div></div>
<div class="ttc" id="structyou_html_a6c7263bb25b91825bf7ecaab470d771a"><div class="ttname"><a href="structyou.html#a6c7263bb25b91825bf7ecaab470d771a">you::ulevel</a></div><div class="ttdeci">int ulevel</div><div class="ttdef"><b>Definition:</b> <a href="you_8h_source.html#l00244">you.h:244</a></div></div>
<div class="ttc" id="permonst_8h_html_ab96e7c4682ea5ae4f83339a15c06f676"><div class="ttname"><a href="permonst_8h.html#ab96e7c4682ea5ae4f83339a15c06f676">mons</a></div><div class="ttdeci">NEARDATA struct permonst mons[]</div><div class="ttdef"><b>Definition:</b> <a href="monst_8c_source.html#l00093">monst.c:93</a></div></div>
<div class="ttc" id="structmonst_html"><div class="ttname"><a href="structmonst.html">monst</a></div><div class="ttdef"><b>Definition:</b> <a href="monst_8h_source.html#l00040">monst.h:40</a></div></div>
<div class="ttc" id="monst_8h_html_a8ac273da2104db1f2321c04911fe0da1"><div class="ttname"><a href="monst_8h.html#a8ac273da2104db1f2321c04911fe0da1">STRAT_STRATMASK</a></div><div class="ttdeci">#define STRAT_STRATMASK</div><div class="ttdef"><b>Definition:</b> <a href="monst_8h_source.html#l00124">monst.h:124</a></div></div>
<div class="ttc" id="hack_8h_html"><div class="ttname"><a href="hack_8h.html">hack.h</a></div></div>
<div class="ttc" id="decl_8h_html_a6ddff041cb808902b66e0b7196f03e00"><div class="ttname"><a href="decl_8h.html#a6ddff041cb808902b66e0b7196f03e00">xupstair</a></div><div class="ttdeci">#define xupstair</div><div class="ttdef"><b>Definition:</b> <a href="decl_8h_source.html#l00111">decl.h:111</a></div></div>
<div class="ttc" id="qtext_8h_html_afc8cb00160a2f3d820c09b4b977a835b"><div class="ttname"><a href="qtext_8h.html#afc8cb00160a2f3d820c09b4b977a835b">QT_DEMONIC</a></div><div class="ttdeci">#define QT_DEMONIC</div><div class="ttdef"><b>Definition:</b> <a href="qtext_8h_source.html#l00106">qtext.h:106</a></div></div>
<div class="ttc" id="structcoord_html_ac3e93ff628aa19d2888c5f6fa26f430d"><div class="ttname"><a href="structcoord.html#ac3e93ff628aa19d2888c5f6fa26f430d">coord::x</a></div><div class="ttdeci">int x</div><div class="ttdef"><b>Definition:</b> <a href="lev__yacc_8c_source.html#l00077">lev_yacc.c:77</a></div></div>
<div class="ttc" id="global_8h_html_a2043b7d01ce89f4ee2fa6c345a752d32"><div class="ttname"><a href="global_8h.html#a2043b7d01ce89f4ee2fa6c345a752d32">xchar</a></div><div class="ttdeci">schar xchar</div><div class="ttdef"><b>Definition:</b> <a href="global_8h_source.html#l00054">global.h:54</a></div></div>
<div class="ttc" id="trap_8h_html_a64bfa610e12179ef4bfa46c65166b2fe"><div class="ttname"><a href="trap_8h.html#a64bfa610e12179ef4bfa46c65166b2fe">MAGIC_PORTAL</a></div><div class="ttdeci">#define MAGIC_PORTAL</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00069">trap.h:69</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Feb 5 2014 18:11:49 for bothack by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
